{"cve_desc": "The DCM reader in ImageMagick before 6.9.4-5 and 7.x before 7.0.1-7 allows remote attackers to have unspecified impact by leveraging lack of validation of (1) pixel.red, (2) pixel.green, and (3) pixel.blue.", "commit_msg": "Add additional checks to DCM reader to prevent data-driven faults (bug report from Hanno B\u00f6ck\n\n", "diff": ["diff --git a/ChangeLog b/ChangeLog\nindex 70f2d014d..de0b1fa58 100644\n--- a/ChangeLog\n+++ b/ChangeLog\n@@ -5,6 +5,8 @@\n     https://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=29626).\n   * Don't interpret -fx option arguments (reference\n     https://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=29774);\n+  * Add additional checks to DCM reader to prevent data-driven faults (bug\n+    report from Hanno B\u00f6ck).\n \n 2016-05-21  7.0.1-6 Cristy  <quetzlzacatenango@image...>\n   * Release ImageMagick version 7.0.1-6, GIT revision 18241:d4f277c:20160521.\n", "diff --git a/coders/dcm.c b/coders/dcm.c\nindex f86e57326..26125f778 100644\n--- a/coders/dcm.c\n+++ b/coders/dcm.c\n@@ -3216,6 +3216,8 @@ static Image *ReadDCMImage(const ImageInfo *image_info,ExceptionInfo *exception)\n             /*\n               Photometric interpretation.\n             */\n+            if (data == (unsigned char *) NULL)\n+              break;\n             for (i=0; i < (ssize_t) MagickMin(length,MagickPathExtent-1); i++)\n               photometric[i]=(char) data[i];\n             photometric[i]='\\0';\n@@ -3237,6 +3239,8 @@ static Image *ReadDCMImage(const ImageInfo *image_info,ExceptionInfo *exception)\n             /*\n               Number of frames.\n             */\n+            if (data == (unsigned char *) NULL)\n+              break;\n             number_scenes=StringToUnsignedLong((char *) data);\n             break;\n           }\n@@ -3674,7 +3678,7 @@ static Image *ReadDCMImage(const ImageInfo *image_info,ExceptionInfo *exception)\n       if (scale == (Quantum *) NULL)\n         ThrowReaderException(ResourceLimitError,\"MemoryAllocationFailed\");\n       range=GetQuantumRange(depth);\n-      for (i=0; i < (ssize_t) (GetQuantumRange(depth)+1); i++)\n+      for (i=0; i <= (ssize_t) GetQuantumRange(depth); i++)\n         scale[i]=ScaleAnyToQuantum((size_t) i,range);\n     }\n   if (image->compression == RLECompression)\n@@ -3965,9 +3969,12 @@ static Image *ReadDCMImage(const ImageInfo *image_info,ExceptionInfo *exception)\n                 pixel.blue&=mask;\n                 if (scale != (Quantum *) NULL)\n                   {\n-                    pixel.red=scale[pixel.red];\n-                    pixel.green=scale[pixel.green];\n-                    pixel.blue=scale[pixel.blue];\n+                    if (pixel.red <= GetQuantumRange(depth))\n+                      pixel.red=scale[pixel.red];\n+                    if (pixel.green <= GetQuantumRange(depth))\n+                      pixel.green=scale[pixel.green];\n+                    if (pixel.blue <= GetQuantumRange(depth))\n+                      pixel.blue=scale[pixel.blue];\n                   }\n               }\n             SetPixelRed(image,(Quantum) pixel.red,q);\n"], "label": 1, "cve": "CVE-2016-5691", "rank": 1, "commit": "5511ef530576ed18fd636baa3bb4eda3d667665d", "cve_attention_tokens": ["dcm", "blue", "green", "reader", "red"]}
{"cve_desc": "iplookup/index.php in Moodle through 2.4.11, 2.5.x before 2.5.9, 2.6.x before 2.6.6, and 2.7.x before 2.7.3 allows remote attackers to cause a denial of service (resource consumption) by triggering the calculation of an estimated latitude and longitude for an IP address.", "commit_msg": "MDL-47321 iplookup: Prevent guest users from using iplookup\n\n", "diff": ["diff --git a/iplookup/index.php b/iplookup/index.php\nindex 92dd51ea462..129b59f7f15 100644\n--- a/iplookup/index.php\n+++ b/iplookup/index.php\n@@ -27,7 +27,11 @@\n require('../config.php');\n require_once('lib.php');\n \n-require_login();\n+require_login(0, false);\n+if (isguestuser()) {\n+    // Guest users cannot perform lookups.\n+    throw new require_login_exception('Guests are not allowed here.');\n+}\n \n $ip   = optional_param('ip', getremoteaddr(), PARAM_HOST);\n $user = optional_param('user', 0, PARAM_INT);\n"], "label": 1, "cve": "CVE-2014-7847", "rank": 4, "commit": "324b018bbce2f56198fe8808968bad6c8798710a", "cve_attention_tokens": ["iplookup", "ip"]}
{"cve_desc": "org/mitre/oauth2/web/OAuthConfirmationController.java in the OpenID Connect server implementation for MITREid Connect through 1.3.3 contains a Mass Assignment (aka Autobinding) vulnerability. This arises due to unsafe usage of the @ModelAttribute annotation during the OAuth authorization flow, in which HTTP request parameters affect an authorizationRequest.", "commit_msg": "Fix Spring Autobinding vulnerability\n\n1. Make authorizationRequest no longer affected by http request parameters due to @ModelAttribute. See http://agrrrdog.blogspot.com/2017/03/autobinding-vulns-and-spring-mvc.html\n\n", "diff": ["diff --git a/openid-connect-server/src/main/java/org/mitre/oauth2/web/OAuthConfirmationController.java b/openid-connect-server/src/main/java/org/mitre/oauth2/web/OAuthConfirmationController.java\nindex d8946469..29c9a141 100644\n--- a/openid-connect-server/src/main/java/org/mitre/oauth2/web/OAuthConfirmationController.java\n+++ b/openid-connect-server/src/main/java/org/mitre/oauth2/web/OAuthConfirmationController.java\n@@ -103,9 +103,9 @@ public class OAuthConfirmationController {\n \n \t@PreAuthorize(\"hasRole('ROLE_USER')\")\n \t@RequestMapping(\"/oauth/confirm_access\")\n-\tpublic String confimAccess(Map<String, Object> model, @ModelAttribute(\"authorizationRequest\") AuthorizationRequest authRequest,\n-\t\t\tPrincipal p) {\n+\tpublic String confirmAccess(Map<String, Object> model, Principal p) {\n \n+\t\tAuthorizationRequest authRequest = (AuthorizationRequest) model.get(\"authorizationRequest\");\n \t\t// Check the \"prompt\" parameter to see if we need to do special processing\n \n \t\tString prompt = (String)authRequest.getExtensions().get(PROMPT);\n"], "label": 1, "cve": "CVE-2021-27582", "rank": 1, "commit": "7eba3c12fed82388f917e8dd9b73e86e3a311e4c", "cve_attention_tokens": ["oauthconfirmationcontroller", "authorizationrequest", "autobinding", "modelattribute", "confirmation", "oauth", "controller", "authorization", "java", "vulnerability"]}
{"cve_desc": "The default configuration of Apache Maven 3.0.4, when using Maven Wagon 2.1, disables SSL certificate checks, which allows remote attackers to spoof servers via a man-in-the-middle (MITM) attack.", "commit_msg": "[WAGON-385] some securities check are disabled per default (change the off per default)\nrename maven.wagon.http.ssl.easy to maven.wagon.http.ssl.insecure with false per default.\n\n", "diff": ["diff --git a/wagon-providers/wagon-http-shared4/src/main/java/org/apache/maven/wagon/shared/http4/AbstractHttpClientWagon.java b/wagon-providers/wagon-http-shared4/src/main/java/org/apache/maven/wagon/shared/http4/AbstractHttpClientWagon.java\nindex b728c00c..c1689c80 100644\n--- a/wagon-providers/wagon-http-shared4/src/main/java/org/apache/maven/wagon/shared/http4/AbstractHttpClientWagon.java\n+++ b/wagon-providers/wagon-http-shared4/src/main/java/org/apache/maven/wagon/shared/http4/AbstractHttpClientWagon.java\n@@ -250,11 +250,11 @@ public boolean isStreaming()\n \n     /**\n      * skip failure on certificate validity checks.\n-     * <b>enabled by default</b>\n+     * <b>disabled by default</b>\n      *\n      * @since 2.0\n      */\n-    protected static boolean sslEasy = Boolean.valueOf( System.getProperty( \"maven.wagon.http.ssl.easy\", \"true\" ) );\n+    protected static boolean sslEasy = Boolean.valueOf( System.getProperty( \"maven.wagon.http.ssl.insecure\", \"false\" ) );\n \n     /**\n      * ssl hostname verifier is allow all by default. Disable this will use a browser compat hostname verifier\n"], "label": 1, "cve": "CVE-2013-0253", "rank": 3, "commit": "2f7bb33852cbb9ddb4e1abaa37f282b67bf72af5", "cve_attention_tokens": ["certificate"]}
{"cve_desc": "curl before version 7.61.1 is vulnerable to a buffer overrun in the NTLM authentication code. The internal function Curl_ntlm_core_mk_nt_hash multiplies the length of the password by two (SUM) to figure out how large temporary storage area to allocate from the heap. The length value is then subsequently used to iterate over the password and generate output into the allocated storage buffer. On systems with a 32 bit size_t, the math to calculate SUM triggers an integer overflow when the password length exceeds 2GB (2^31 bytes). This integer overflow usually causes a very small buffer to actually get allocated instead of the intended very huge one, making the use of that buffer end up in a heap buffer overflow. (This bug is almost identical to CVE-2017-8816.)", "commit_msg": "http2: Use correct format identifier for stream_id\n\nCloses #2928\n\n", "diff": ["diff --git a/lib/http2.c b/lib/http2.c\nindex 22655e94c..d76919300 100644\n--- a/lib/http2.c\n+++ b/lib/http2.c\n@@ -575,7 +575,7 @@ static int push_promise(struct Curl_easy *data,\n                                               frame->promised_stream_id,\n                                               newhandle);\n     if(rv) {\n-      infof(data, \"failed to set user_data for stream %u\\n\",\n+      infof(data, \"failed to set user_data for stream %d\\n\",\n             frame->promised_stream_id);\n       DEBUGASSERT(0);\n       goto fail;\n@@ -818,7 +818,7 @@ static int on_stream_close(nghttp2_session *session, int32_t stream_id,\n     /* remove the entry from the hash as the stream is now gone */\n     rv = nghttp2_session_set_stream_user_data(session, stream_id, 0);\n     if(rv) {\n-      infof(data_s, \"http/2: failed to clear user_data for stream %u!\\n\",\n+      infof(data_s, \"http/2: failed to clear user_data for stream %d!\\n\",\n             stream_id);\n       DEBUGASSERT(0);\n     }\n@@ -1122,7 +1122,7 @@ void Curl_http2_done(struct connectdata *conn, bool premature)\n     int rv = nghttp2_session_set_stream_user_data(httpc->h2,\n                                                   http->stream_id, 0);\n     if(rv) {\n-      infof(data, \"http/2: failed to clear user_data for stream %u!\\n\",\n+      infof(data, \"http/2: failed to clear user_data for stream %d!\\n\",\n             http->stream_id);\n       DEBUGASSERT(0);\n     }\n@@ -2132,7 +2132,7 @@ CURLcode Curl_http2_switched(struct connectdata *conn,\n                                               stream->stream_id,\n                                               data);\n     if(rv) {\n-      infof(data, \"http/2: failed to set user_data for stream %u!\\n\",\n+      infof(data, \"http/2: failed to set user_data for stream %d!\\n\",\n             stream->stream_id);\n       DEBUGASSERT(0);\n     }\n"], "label": 0, "cve": "CVE-2018-14618", "rank": 49, "commit": "19ebc282172ff204648f350c6e716197d5b4d221", "cve_attention_tokens": []}
{"cve_desc": "An issue was discovered in Artifex MuJS 1.0.5. jscompile.c can cause a denial of service (invalid stack-frame jump) because it lacks an ENDTRY opcode call.", "commit_msg": "Issue #92: Remove unimplemented function.\n\n", "diff": ["diff --git a/docs/reference.html b/docs/reference.html\nindex 31eb362..48b2850 100644\n--- a/docs/reference.html\n+++ b/docs/reference.html\n@@ -365,13 +365,12 @@ Wrapper to push a new error object on the stack using a printf formatting string\n \n <pre>\n int js_gettop(js_State *J);\n-void js_settop(js_State *J, int idx); -- not implemented yet\n void js_pop(js_State *J, int n);\n void js_rot(js_State *J, int n);\n void js_copy(js_State *J, int idx);\n void js_remove(js_State *J, int idx);\n-void js_insert(js_State *J, int idx); -- not implemented yet\n-void js_replace(js_State* J, int idx); -- not implemented yet\n+void js_insert(js_State *J, int idx);\n+void js_replace(js_State* J, int idx);\n </pre>\n \n <h3>Comparisons and arithmetic</h3>\n", "diff --git a/mujs.h b/mujs.h\nindex 075ad58..d5dcc93 100644\n--- a/mujs.h\n+++ b/mujs.h\n@@ -193,7 +193,6 @@ short js_toint16(js_State *J, int idx);\n unsigned short js_touint16(js_State *J, int idx);\n \n int js_gettop(js_State *J);\n-void js_settop(js_State *J, int idx);\n void js_pop(js_State *J, int n);\n void js_rot(js_State *J, int n);\n void js_copy(js_State *J, int idx);\n"], "label": 0, "cve": "CVE-2019-11412", "rank": 9, "commit": "2c24e194d423db1639a5ba6793aa36d3bfb1df3b", "cve_attention_tokens": ["stack"]}
{"cve_desc": "Electron-Cash-SLP before version 3.6.2 has a vulnerability. All token creators that use the \"Mint Tool\" feature of the Electron Cash SLP Edition are at risk of sending the minting authority baton to the wrong SLP address. Sending the mint baton to the wrong address will give another party the ability to issue new tokens or permanently destroy future minting capability. This is fixed version 3.6.2.", "commit_msg": "burn tool dialog update\n\n", "diff": ["diff --git a/gui/qt/slp_burn_token_dialog.py b/gui/qt/slp_burn_token_dialog.py\nindex 34cbedf2e..c2863b141 100644\n--- a/gui/qt/slp_burn_token_dialog.py\n+++ b/gui/qt/slp_burn_token_dialog.py\n@@ -119,10 +119,14 @@ class SlpBurnTokenDialog(QDialog, MessageBoxMixin):\n         if self.baton_txo != None:\n             self.token_burn_baton_cb.setDisabled(False)\n \n-        self.token_burn_invalid_cb = cb = QCheckBox(_(\"Burn invalid SLP transactions for this token\"))\n-        self.token_burn_invalid_cb.setChecked(True)\n-        grid.addWidget(self.token_burn_invalid_cb, row, 1)\n-        row += 1\n+        '''\n+            This feature is currently disabled. More work should be done on the\n+            validation before this is re-introduced as a feature.\n+        '''\n+        # self.token_burn_invalid_cb = cb = QCheckBox(_(\"Burn invalid SLP transactions for this token\"))\n+        # self.token_burn_invalid_cb.setChecked(False)\n+        # grid.addWidget(self.token_burn_invalid_cb, row, 1)\n+        # row += 1\n \n         self.cancel_button = b = QPushButton(_(\"Cancel\"))\n         self.cancel_button.setAutoDefault(True)\n@@ -269,7 +273,7 @@ class SlpBurnTokenDialog(QDialog, MessageBoxMixin):\n                         domain=None,\n                         exclude_frozen=True,\n                         confirmed_only=self.main_window.config.get('confirmed_only', False),\n-                        slp_include_invalid=self.token_burn_invalid_cb.isChecked(),\n+                        slp_include_invalid=False, #self.token_burn_invalid_cb.isChecked(),\n                         slp_include_baton=self.token_burn_baton_cb.isChecked()\n                         )\n             if multisig_tx_to_sign is None:\n@@ -350,10 +354,10 @@ class SlpBurnTokenDialog(QDialog, MessageBoxMixin):\n                 if coin['token_value'] == \"MINT_BATON\" and coin['token_validation_state'] == 1:\n                     selected_slp_coins.append(coin)\n \n-        if self.token_burn_invalid_cb.isChecked():\n-            for coin in slp_coins:\n-                if coin['token_validation_state'] != 1:\n-                    selected_slp_coins.append(coin)\n+        # if self.token_burn_invalid_cb.isChecked():\n+        #     for coin in slp_coins:\n+        #         if coin['token_validation_state'] != 1:\n+        #             selected_slp_coins.append(coin)\n \n         try:\n             if multisig_tx_to_sign is None:\n"], "label": 0, "cve": "CVE-2020-11014", "rank": 6, "commit": "dff609f10f57f4686c6696a6b2e42f4a21cbfcc6", "cve_attention_tokens": ["baton", "mint", "tool"]}
{"cve_desc": "Cross-site scripting (XSS) vulnerability in exceptions.rb in the i18n gem before 0.6.6 for Ruby allows remote attackers to inject arbitrary web script or HTML via a crafted I18n::MissingTranslationData.new call.", "commit_msg": "Bump version to 0.6.6\n\n", "diff": ["diff --git a/lib/i18n/version.rb b/lib/i18n/version.rb\nindex c5e4154..2ec84bd 100644\n--- a/lib/i18n/version.rb\n+++ b/lib/i18n/version.rb\n@@ -1,3 +1,3 @@\n module I18n\n-  VERSION = \"0.6.5\"\n+  VERSION = \"0.6.6\"\n end\n"], "label": 0, "cve": "CVE-2013-4492", "rank": 8, "commit": "0475a22940006693be73ef222e0fa0d27f94e7ee", "cve_attention_tokens": []}
{"cve_desc": "Cross-site scripting (XSS) vulnerability in repository/lib.php in Moodle 2.1.x before 2.1.7 and 2.2.x before 2.2.4 allows remote authenticated administrators to inject arbitrary web script or HTML by renaming a repository.", "commit_msg": "Automatically generated installer lang files\n\n", "diff": ["diff --git a/install/lang/ar/admin.php b/install/lang/ar/admin.php\nindex 5a094e082e1..ef40fd4b26a 100644\n--- a/install/lang/ar/admin.php\n+++ b/install/lang/ar/admin.php\n@@ -36,7 +36,7 @@ $string['cliincorrectvalueerror'] = '\u062e\u0637\u0623\u060c \u0627\u0644\u0642\u064a\u0645\u0629 \"{$a->value}\" \u063a\u064a\u0631\n $string['cliincorrectvalueretry'] = '\u0642\u064a\u0645\u0629 \u063a\u064a\u0631 \u0635\u062d\u064a\u062d\u0629\u060c \u062d\u0627\u0648\u0644 \u0645\u0631\u0629 \u0623\u062e\u0631\u0649';\n $string['clitypevalue'] = '\u0623\u062f\u062e\u0644 \u0627\u0644\u0642\u064a\u0645\u0629';\n $string['clitypevaluedefault'] = '\u0627\u062f\u062e\u0644 \u0627\u0644\u0642\u064a\u0645 \u0623\u0648 \u0627\u0636\u063a\u0637 \u0627\u0646\u062a\u0631 (Enter) \u0644\u0625\u0633\u062a\u062e\u062f\u0627\u0645 \u0627\u0644\u0642\u064a\u0645 \u0627\u0644\u0623\u0641\u062a\u0631\u0627\u0636\u064a\u0629  ({$a})';\n-$string['cliunknowoption'] = '\u062e\u064a\u0627\u0631\u0627\u062a \u063a\u064a\u0631 \u0645\u0639\u0631\u0648\u0641\u0629 \n+$string['cliunknowoption'] = '\u062e\u064a\u0627\u0631\u0627\u062a \u063a\u064a\u0631 \u0645\u0639\u0631\u0648\u0641\u0629\n {$a}\n \u0627\u0644\u0631\u062c\u0627\u0621 \u0627\u0633\u062a\u062e\u062f\u0627\u0645 \u062e\u064a\u0627\u0631 \u0627\u0644\u0645\u0633\u0627\u0639\u062f\u0629';\n $string['cliyesnoprompt'] = '\u0627\u062f\u062e\u0644 (Y) \u062a\u0639\u0646\u064a \u0646\u0639\u0645 \u0623\u0648 (N) \u062a\u0639\u0646\u064a \u0644\u0623';\n", "diff --git a/install/lang/ast/install.php b/install/lang/ast/install.php\nindex 1d2201f5285..a3ba3834ea9 100644\n--- a/install/lang/ast/install.php\n+++ b/install/lang/ast/install.php\n@@ -44,10 +44,10 @@ $string['memorylimithelp'] = '<p>La llende de memoria del PHP del so servidor ta\n \n <p>Esto va facer que Moodle tenga problemes de memoria m\u00e1s tarde, especialmente si tien munchos m\u00f3dulos y/o munchos usuarios.</p>\n \n-<p>Recomendamos que configure PHP con una llende m\u00e1s grande si ye posible, como por exemplu 40M.  \n+<p>Recomendamos que configure PHP con una llende m\u00e1s grande si ye posible, como por exemplu 40M.\n    Esisten varies formes nes que pue intentar facer esta modificaci\u00f3n:</p>\n <ol>\n-<li>Si pue, recompile PHP con <i>--enable-memory-limit</i>.  \n+<li>Si pue, recompile PHP con <i>--enable-memory-limit</i>.\n    Esto va permitir que\\'l propiu Moodle modifique la llende de memoria.</li>\n <li>Si tien accesu al so ficheru php.ini pue modificar el valor de <b>memory_limit</b> a daqu\u00e9 paec\u00edo a 40M.  Si nun tien accesu a esi ficheru igual pue pidir al alministrador del sistema que lo faiga.</li>\n <li>En dellos servidores PHP pue crear un ficheru .htaccess nel direutoriu Moodle cola ringlera que vien darr\u00e9u:\n", "diff --git a/install/lang/az/admin.php b/install/lang/az/admin.php\nindex e9436368f1f..f91d19299cd 100644\n--- a/install/lang/az/admin.php\n+++ b/install/lang/az/admin.php\n@@ -36,7 +36,7 @@ $string['cliincorrectvalueerror'] = 'S\u0259hv, \"{$a->option}\" \u00fc\u00e7\u00fcn s\u0259hv \"{$a->v\n $string['cliincorrectvalueretry'] = 'S\u0259hv, \"{$a->option}\" \u00fc\u00e7\u00fcn s\u0259hv \"{$a->value}\" qiym\u0259ti';\n $string['clitypevalue'] = 'Qiym\u0259ti daxil edin';\n $string['clitypevaluedefault'] = 'Qiym\u0259ti daxil edin, ({$a}) qiym\u0259tind\u0259n avtomatik olaraq istifad\u0259 etm\u0259k \u00fc\u00e7\u00fcn Enter d\u00fcym\u0259sini bas\u0131n';\n-$string['cliunknowoption'] = 'T\u0259yin olunmayan parametrl\u0259r: \n+$string['cliunknowoption'] = 'T\u0259yin olunmayan parametrl\u0259r:\n   {$a}\n Z\u0259hm\u0259t olmasa help parametrind\u0259n istifad\u0259 edin';\n $string['cliyesnoprompt'] = 'y (b\u0259li) v\u0259 n (xeyr) d\u00fcym\u0259sini bas\u0131n';\n", "diff --git a/install/lang/az/install.php b/install/lang/az/install.php\nindex dc431ffe87f..d2d28eb9284 100644\n--- a/install/lang/az/install.php\n+++ b/install/lang/az/install.php\n@@ -70,23 +70,23 @@ $string['pathsroparentdataroot'] = '({$a->parent}) valideyn kataloquna yazmaq m\n $string['pathssubadmindir'] = 'Veb-hostinql\u0259rin say\u0131 az olduqda yol/admin idar\u0259etm\u0259 panelin\u0259 v\u0259 ya dig\u0259r bir yer\u0259 ke\u00e7m\u0259k \u00fc\u00e7\u00fcn x\u00fcsusi URL-dir. T\u0259\u0259ss\u00fcf ki, bu Moodlun idar\u0259etm\u0259 s\u0259hif\u0259l\u0259rinin standart m\u00f6vqeyi il\u0259 ziddiyy\u0259t t\u0259\u015fkil edir. Bunu Moodle kataloqunda admin qovlu\u011funun ad\u0131n\u0131 d\u0259yi\u015fm\u0259kl\u0259 v\u0259 burada yeni ad\u0131 g\u00f6st\u0259rm\u0259kl\u0259 aradan qald\u0131rmaq olar. M\u0259s\u0259l\u0259n, <em>moodleadmin</em>. Bu zaman Moodlun idar\u0259etm\u0259 panelin\u0259 b\u00fct\u00fcn ke\u00e7idl\u0259r avtomatik olaraq d\u0259yi\u015fir.';\n $string['pathssubdataroot'] = 'Moodlun y\u00fckl\u0259nmi\u015f fayllar\u0131 harada saxlayaca\u011f\u0131n\u0131 m\u00fctl\u0259q g\u00f6st\u0259rm\u0259k laz\u0131md\u0131r  Veb-server istifad\u0259\u00e7isinin (usually \\'nobody\\' or \\'apache\\') bu kataloqda oxuma v\u0259 YAZMA \u00fc\u00e7\u00fcn icaz\u0259si olmal\u0131d\u0131r, lakin bu zaman \u0130nternetd\u0259n birba\u015fa m\u00fcraci\u0259t m\u00fcmk\u00fcn ola bilm\u0259z. \u018fg\u0259r bu kataloq m\u00f6vcud deyils\u0259, qura\u015fd\u0131rma proqram\u0131 onu yaratma\u011fa c\u0259hd edir. ';\n $string['pathssubdirroot'] = 'Moodlun qura\u015fd\u0131r\u0131lmas\u0131 kataloquna tam yol';\n-$string['pathssubwwwroot'] = 'Moodla ke\u00e7idin m\u00fcmk\u00fcn oldu\u011fu tam veb-\u00fcnvan.\n-Moodla ke\u00e7id \u00fc\u00e7\u00fcn bir ne\u00e7\u0259 \u00fcnvandan istifad\u0259 etm\u0259k m\u00fcmk\u00fcn deyil. \u018fg\u0259r sizin sayt\u0131n bir ne\u00e7\u0259 a\u00e7\u0131q \u00fcnvan\u0131 varsa, siz h\u0259mi\u015f\u0259 bu \u00fcnvanlardan g\u00f6st\u0259ril\u0259n \u00fcnvana ke\u00e7idi t\u0259min etm\u0259lisiniz.\n-\u0259g\u0259gr sizin sayta h\u0259m \u0130nternetd\u0259n v\u0259 h\u0259m d\u0259 lokal \u015f\u0259b\u0259k\u0259d\u0259n ke\u00e7id m\u00fcmk\u00fcnd\u00fcrs\u0259, burada \u00fcmumi \u00fcnvan\u0131 g\u00f6st\u0259rin v\u0259 DNS-i el\u0259 sazlay\u0131n ki, lokal istifad\u0259\u00e7il\u0259r d\u0259 bu \u00fcnvandan istifad\u0259 ed\u0259 bilsin.\n-\u018fg\u0259r g\u00f6st\u0259ril\u0259n \u00fcnvan d\u00fczg\u00fcn deyils\u0259, qura\u015fd\u0131rman\u0131 dig\u0259r qiym\u0259tl\u0259 yenid\u0259n ba\u015flamaq \u00fc\u00e7\u00fcn brauzerin \u00fcnvan s\u0259tirind\u0259 URL-i d\u0259yi\u015fin. ';\n+$string['pathssubwwwroot'] = 'Moodla ke\u00e7idin m\u00fcmk\u00fcn oldu\u011fu tam veb-\u00fcnvan.\n+Moodla ke\u00e7id \u00fc\u00e7\u00fcn bir ne\u00e7\u0259 \u00fcnvandan istifad\u0259 etm\u0259k m\u00fcmk\u00fcn deyil. \u018fg\u0259r sizin sayt\u0131n bir ne\u00e7\u0259 a\u00e7\u0131q \u00fcnvan\u0131 varsa, siz h\u0259mi\u015f\u0259 bu \u00fcnvanlardan g\u00f6st\u0259ril\u0259n \u00fcnvana ke\u00e7idi t\u0259min etm\u0259lisiniz.\n+\u0259g\u0259gr sizin sayta h\u0259m \u0130nternetd\u0259n v\u0259 h\u0259m d\u0259 lokal \u015f\u0259b\u0259k\u0259d\u0259n ke\u00e7id m\u00fcmk\u00fcnd\u00fcrs\u0259, burada \u00fcmumi \u00fcnvan\u0131 g\u00f6st\u0259rin v\u0259 DNS-i el\u0259 sazlay\u0131n ki, lokal istifad\u0259\u00e7il\u0259r d\u0259 bu \u00fcnvandan istifad\u0259 ed\u0259 bilsin.\n+\u018fg\u0259r g\u00f6st\u0259ril\u0259n \u00fcnvan d\u00fczg\u00fcn deyils\u0259, qura\u015fd\u0131rman\u0131 dig\u0259r qiym\u0259tl\u0259 yenid\u0259n ba\u015flamaq \u00fc\u00e7\u00fcn brauzerin \u00fcnvan s\u0259tirind\u0259 URL-i d\u0259yi\u015fin.';\n $string['pathsunsecuredataroot'] = 'Veril\u0259nl\u0259r kataloqunun m\u00f6vqeyi t\u0259hl\u00fck\u0259sizlik t\u0259l\u0259bl\u0259rin\u0259 cavab vermir.';\n $string['pathswrongadmindir'] = 'Admin kataloqu m\u00f6vcud deyil';\n $string['phpextension'] = '{$a} PHP  geni\u00e7l\u0259nm\u0259si';\n $string['phpversion'] = 'PHP versiyas\u0131';\n-$string['phpversionhelp'] = '<p>Moodle \u00fc\u00e7\u00fcn PHP-nin 4.3.0  v\u0259 ondan yuxar\u0131  v\u0259 ya 5.1.0 v\u0259 ondan yuxar\u0131 versiyalar\u0131(5.0.versiyas\u0131n\u0131n b\u0259zi probleml\u0259ri m\u0259lumdur) laz\u0131md\u0131r.</p>\n-<p>\u0130ndi Siz, {$a} versiyas\u0131ndan istifad\u0259 edirsiniz</p>\n-<p>Siz PHP-ni yenil\u0259m\u0259lisiniz v\u0259 ya PHP-nin daha yeni versiyas\u0131 olan xostinq\u0259 ke\u00e7m\u0259lisiniz!<br />\n+$string['phpversionhelp'] = '<p>Moodle \u00fc\u00e7\u00fcn PHP-nin 4.3.0  v\u0259 ondan yuxar\u0131  v\u0259 ya 5.1.0 v\u0259 ondan yuxar\u0131 versiyalar\u0131(5.0.versiyas\u0131n\u0131n b\u0259zi probleml\u0259ri m\u0259lumdur) laz\u0131md\u0131r.</p>\n+<p>\u0130ndi Siz, {$a} versiyas\u0131ndan istifad\u0259 edirsiniz</p>\n+<p>Siz PHP-ni yenil\u0259m\u0259lisiniz v\u0259 ya PHP-nin daha yeni versiyas\u0131 olan xostinq\u0259 ke\u00e7m\u0259lisiniz!<br />\n (5.0.x  verisyas\u0131 olarsa 4.4.x versiyas\u0131na qay\u0131da bil\u0259rsiniz)</p>';\n $string['welcomep10'] = '{$a->installername} ({$a->installerversion})';\n $string['welcomep20'] = 'Siz bu s\u0259hif\u0259ni ona g\u00f6r\u0259 g\u00f6r\u00fcrs\u00fcn\u00fcz ki, <strong>{$a->packname} {$a->packversion}</strong> proqram paketini \u00f6z kompy\u00fcterinizd\u0259 m\u00fcv\u0259ff\u0259qiyy\u0259tl\u0259 qurmusunuz. T\u0259brik edirik!';\n $string['welcomep30'] = '<strong>{$a->installername}</strong>  proqram paketinin bu versiyas\u0131nda <strong>Moodle</strong>un i\u015fl\u0259y\u0259c\u0259yi m\u00fchiti yaratmaq \u00fc\u00e7\u00fcn a\u015fa\u011f\u0131dak\u0131 proqramlar var:';\n $string['welcomep40'] = 'Paket\u0259 h\u0259m\u00e7inin <strong>Moodle {$a->moodlerelease} ({$a->moodleversion})</strong> daxildir.';\n-$string['welcomep50'] = 'Bu paket\u0259 daxil olan \u0259lav\u0259l\u0259rd\u0259n istifad\u0259 edilm\u0259 ard\u0131c\u0131ll\u0131\u011f\u0131, m\u00fcvafiq lisenziyalarla m\u00fc\u0259yy\u0259n edilir. <strong>{$a->installername}</strong>  tam proqram paketi\n+$string['welcomep50'] = 'Bu paket\u0259 daxil olan \u0259lav\u0259l\u0259rd\u0259n istifad\u0259 edilm\u0259 ard\u0131c\u0131ll\u0131\u011f\u0131, m\u00fcvafiq lisenziyalarla m\u00fc\u0259yy\u0259n edilir. <strong>{$a->installername}</strong>  tam proqram paketi\n  <a href=\"http://www.opensource.org/docs/definition_plain.html\">m\u0259nb\u0259ni a\u00e7\u0131r</a> v\u0259 <a href=\"http://www.gnu.org/copyleft/gpl.html\">GPL</a> lisenziyas\u0131n\u0131n \u015f\u0259rtl\u0259rin\u0259 uy\u011fun olaraq yay\u0131l\u0131r.';\n $string['welcomep60'] = 'N\u00f6vb\u0259ti s\u0259hif\u0259l\u0259rd\u0259 Siz, bir ne\u00e7\u0259 sad\u0259 add\u0131mla \u00f6z kompy\u00fcterinizd\u0259 <strong>Moodle</strong>-un parametrl\u0259rini sazlaya v\u0259 qura\u015fd\u0131ra bil\u0259rsiniz. Siz sazlama parametrl\u0259rini susmaya g\u00f6r\u0259 q\u0259bul ed\u0259 v\u0259 ya \u00f6z t\u0259l\u0259bl\u0259rinizd\u0259n as\u0131l\u0131 olaraq d\u0259yi\u015f\u0259 bil\u0259rsiniz.';\n $string['welcomep70'] = '<strong>Moodle</strong> qura\u015fd\u0131rma prosesini davam etm\u0259k \u00fc\u00e7\u00fcn \"N\u00f6vb\u0259ti\" d\u00fcym\u0259sini s\u0131x\u0131n.';\n", "diff --git a/install/lang/ca/admin.php b/install/lang/ca/admin.php\nindex 106f2003013..89a21c0c033 100644\n--- a/install/lang/ca/admin.php\n+++ b/install/lang/ca/admin.php\n@@ -36,7 +36,7 @@ $string['cliincorrectvalueerror'] = 'Error, valor incorrecte \"{$a->value}\" per a\n $string['cliincorrectvalueretry'] = 'Valor incorrecte, si us plau, torneu-ho a provar.';\n $string['clitypevalue'] = 'Valor de tipus';\n $string['clitypevaluedefault'] = 'valor de tipus, premeu Intro per fer servir un valor per defecte ({$a})';\n-$string['cliunknowoption'] = 'Opcions inv\u00e0lides: \n+$string['cliunknowoption'] = 'Opcions inv\u00e0lides:\n  {$a}\n L\\'opci\u00f3 --help us orientar\u00e0.';\n $string['cliyesnoprompt'] = 'Escriu y (significa S\u00ed) o n (significa No)';\n", "diff --git a/install/lang/ca/install.php b/install/lang/ca/install.php\nindex ed01c676b42..3ddef500622 100644\n--- a/install/lang/ca/install.php\n+++ b/install/lang/ca/install.php\n@@ -64,8 +64,8 @@ $string['welcomep10'] = '{$a->installername} ({$a->installerversion})';\n $string['welcomep20'] = 'Esteu veient aquesta p\u00e0gina perqu\u00e8 heu instal\u00b7lat amb \u00e8xit i heu executat el paquet <strong>{$a->packname} {$a->packversion}</strong>. Felicitacions!';\n $string['welcomep30'] = 'Aquesta versi\u00f3 de <strong>{$a->installername}</strong> inclou les aplicacions necess\u00e0ries per crear un entorn en el qual funcioni <strong>Moodle</strong>:';\n $string['welcomep40'] = 'El paquet inclou tamb\u00e9 <strong>Moodle {$a->moodlerelease} ({$a->moodleversion})</strong>.';\n-$string['welcomep50'] = 'L\\'\u00fas de totes les aplicacions d\\'aquest paquet \u00e9s governat per les seves llic\u00e8ncies respectives. El paquet <strong>{$a->installername}</strong> complet \u00e9s \n-<a href=\"http://www.opensource.org/docs/definition_plain.html\">codi font obert</a> i es distribueix \n+$string['welcomep50'] = 'L\\'\u00fas de totes les aplicacions d\\'aquest paquet \u00e9s governat per les seves llic\u00e8ncies respectives. El paquet <strong>{$a->installername}</strong> complet \u00e9s\n+<a href=\"http://www.opensource.org/docs/definition_plain.html\">codi font obert</a> i es distribueix\n sota llic\u00e8ncia <a href=\"http://www.gnu.org/copyleft/gpl.html\">GPL</a>.';\n $string['welcomep60'] = 'Les p\u00e0gines seg\u00fcents us guiaran per una s\u00e8rie de passos f\u00e0cils de seguir per configurar <strong>Moodle</strong> en el vostre ordinador. Podeu acceptar els par\u00e0metres per defecte o, opcionalment, modificar-los perqu\u00e8 s\\'ajustin a les vostres necessitats.';\n $string['welcomep70'] = 'Feu clic en el bot\u00f3 \"Seg\u00fcent\" per continuar la configuraci\u00f3 de <strong>Moodle</strong>.';\n", "diff --git a/install/lang/cy/install.php b/install/lang/cy/install.php\nindex c00efcf5632..fc21312d5b8 100644\n--- a/install/lang/cy/install.php\n+++ b/install/lang/cy/install.php\n@@ -42,21 +42,21 @@ $string['installation'] = 'Gosod';\n $string['langdownloaderror'] = 'Yn anffodus, ni osodwyd yr iaith ganlynol: \"{$a}\". Bydd y broses osod yn cario ymlaen yn Saesneg.';\n $string['memorylimithelp'] = '<p>Mae maint y cof PHP yn eich gweinydd ar hyn o bryd yn {$a}.</p>\n \n-<p>Gall hyn arwain at broblemau \u00e2\\'r cof yn nes ymlaen, yn enwedig \n+<p>Gall hyn arwain at broblemau \u00e2\\'r cof yn nes ymlaen, yn enwedig\n    os ydych wedi galluogi llawer o fodiwlau a/neu lawer o ddefnyddwyr.</p>\n \n-<p>Rydym yn argymell eich bod yn ffurfweddu PHP gyda mwy o gof os yn bosib, megis 40M.  \n+<p>Rydym yn argymell eich bod yn ffurfweddu PHP gyda mwy o gof os yn bosib, megis 40M.\n    Mae sawl ffordd o wneud hyn:</p>\n <ol>\n-<li>Os ydych yn gallu, ceisiwch ail-grynhoi PHP gyda <i>--enable-memory-limit</i>.  \n+<li>Os ydych yn gallu, ceisiwch ail-grynhoi PHP gyda <i>--enable-memory-limit</i>.\n     Bydd hyn yn gadael i Moodle osod maint y cof ei hun.</li>\n-<li>Os ydych yn gallu mynd i mewn i\\'ch ffeil php.ini, gallwch newid y gosodiad <b>memory_limit</b> \n-    yn y fan honno i tua 40M. Os nad ydych chi\\'n gallu gwneud hyn eich hun, efallai  \n+<li>Os ydych yn gallu mynd i mewn i\\'ch ffeil php.ini, gallwch newid y gosodiad <b>memory_limit</b>\n+    yn y fan honno i tua 40M. Os nad ydych chi\\'n gallu gwneud hyn eich hun, efallai\n     y gallech ofyn i\\'ch gweinyddwr wneud hyn i chi.</li>\n-<li>Ar rai gweinyddion PHP, gallwch greu ffeil .htaccess yng nghyfeiriadur Moodle  \n+<li>Ar rai gweinyddion PHP, gallwch greu ffeil .htaccess yng nghyfeiriadur Moodle\n     sy\\'n cynnwys y llinell hon:\n     <p><blockquote>php_value memory_limit 40M</blockquote></p>\n-    <p>Fodd bynnag, ar rai gweinyddion bydd hyn yn atal <b>pob</b> tudalen PHP rhag gweithio \n+    <p>Fodd bynnag, ar rai gweinyddion bydd hyn yn atal <b>pob</b> tudalen PHP rhag gweithio\n     (bydd gwallau\\'n ymddangos pan fyddwch yn edrych ar dudalennau) felly bydd rhaid i chi dynnu\\'r ffeil .htaccess file.</p></li>\n </ol>';\n $string['phpversion'] = 'Fersiwn PHP';\n@@ -65,15 +65,15 @@ $string['phpversionhelp'] = '<p>Mae angen o leiaf fersiwn PHP 4.3.0 neu 5.1.0 ar\n <p>Rhaid i chi uwchraddio PHP neu newid i westeiwr \u00e2 fersiwn diweddarach o PHP!<br/>\n (Os oes gennych 5.0.x gallwch hefyd is-raddio i fersiwn 4.4.x)</p>';\n $string['welcomep10'] = '{$a->installername} ({$a->installerversion})';\n-$string['welcomep20'] = 'Rydych chi\\'n gweld y dudalen hon gan eich bod wedi gosod a  \n+$string['welcomep20'] = 'Rydych chi\\'n gweld y dudalen hon gan eich bod wedi gosod a\n     lansio\\'r pecyn <strong>{$a->packname} {$a->packversion}</strong> yn llwyddiannus ar eich cyfrifiadur. Llongyfarchiadau!';\n-$string['welcomep30'] = 'Mae\\'r fersiwn <strong>{$a->installername}</strong> yn cynnwys rhaglenni \n+$string['welcomep30'] = 'Mae\\'r fersiwn <strong>{$a->installername}</strong> yn cynnwys rhaglenni\n     i greu amgylchedd y gall  <strong>Moodle</strong> weithio ynddo, sef:';\n $string['welcomep40'] = 'Mae\\'r pecyn hefyd yn cynnwys <strong>Moodle {$a->moodlerelease} ({$a->moodleversion})</strong>.';\n-$string['welcomep50'] = 'Y trwyddedau perthnasol sy\\'n llywodraethu dros yr holl raglenni yn y pecyn hwn. Y pecyn cyflawn yw <strong>{$a->installername}</strong> \n+$string['welcomep50'] = 'Y trwyddedau perthnasol sy\\'n llywodraethu dros yr holl raglenni yn y pecyn hwn. Y pecyn cyflawn yw <strong>{$a->installername}</strong>\n     <a href=\"http://www.opensource.org/docs/definition_plain.html\">open source</a> a chaiff ei ddosbarthu dan y drwydded <a href=\"http://www.gnu.org/copyleft/gpl.html\">GPL</a>.';\n-$string['welcomep60'] = 'Bydd y tudalennau canlynol yn eich arwain drwy\\'r camau syml i  \n-    ffurfweddu a gosod <strong>Moodle</strong> ar eich cyfrifiadur. Gallwch ddewis derbyn y gosodiadau \n+$string['welcomep60'] = 'Bydd y tudalennau canlynol yn eich arwain drwy\\'r camau syml i\n+    ffurfweddu a gosod <strong>Moodle</strong> ar eich cyfrifiadur. Gallwch ddewis derbyn y gosodiadau\n     diofyn, neu gallwch eu newid eich hun ar gyfer eich dibenion chi.';\n $string['welcomep70'] = 'Cliciwch y botwm \"Nesaf\" i fwrw ymlaen i osod <strong>Moodle</strong>.';\n $string['wwwroot'] = 'Cyfeiriad ar y we';\n", "diff --git a/install/lang/da/install.php b/install/lang/da/install.php\nindex 3612e60102f..a22c1b6dd24 100644\n--- a/install/lang/da/install.php\n+++ b/install/lang/da/install.php\n@@ -48,21 +48,21 @@ Installationsprogrammet udf\u00f8rer et tjek f\u00f8r hver installation og opgradering.\n $string['errorsinenvironment'] = 'Systemtjekket mislykkedes!';\n $string['installation'] = 'Installation';\n $string['langdownloaderror'] = 'Sproget \"{$a}\" blev desv\u00e6rre ikke installeret. Installationen vil forts\u00e6tte p\u00e5 engelsk.';\n-$string['memorylimithelp'] = '<p>Den m\u00e6ngde hukommelse PHP kan bruge, er sat til {$a}.</p> \n+$string['memorylimithelp'] = '<p>Den m\u00e6ngde hukommelse PHP kan bruge, er sat til {$a}.</p>\n \n-<p>Dette kan for\u00e5rsage at der opst\u00e5r problemer senere, is\u00e6r hvis du har mange moduler aktiveret eller mange brugere.</p> \n+<p>Dette kan for\u00e5rsage at der opst\u00e5r problemer senere, is\u00e6r hvis du har mange moduler aktiveret eller mange brugere.</p>\n \n-<p>Vi anbefaler at du konfigurerer PHP med mere hukommelse, f.eks. 40M. \n-Der er flere m\u00e5der hvorp\u00e5 du kan rette det.</p> \n-<ol> \n-<li>Hvis du har mulighed for det, kan du rekompilere PHP med <i>--enable-memory-limit</i>. \n-Det vil tillade at Moodle selv kan definere hvor meget hukommelse der er brug for.</li> \n+<p>Vi anbefaler at du konfigurerer PHP med mere hukommelse, f.eks. 40M.\n+Der er flere m\u00e5der hvorp\u00e5 du kan rette det.</p>\n+<ol>\n+<li>Hvis du har mulighed for det, kan du rekompilere PHP med <i>--enable-memory-limit</i>.\n+Det vil tillade at Moodle selv kan definere hvor meget hukommelse der er brug for.</li>\n \n-<li>Hvis du har adgang til php.ini filen kan du \u00e6ndre <b>memory_limit</b>-indstillingen til noget i retning af 40M. \n-Hvis du ikke har direkte adgang til den kan du bede systemadministratoren om at g\u00f8re det for dig.</li> \n+<li>Hvis du har adgang til php.ini filen kan du \u00e6ndre <b>memory_limit</b>-indstillingen til noget i retning af 40M.\n+Hvis du ikke har direkte adgang til den kan du bede systemadministratoren om at g\u00f8re det for dig.</li>\n \n <li>P\u00e5 nogle servere kan du oprette en \\'.htaccess\\' fil og gemme den i moodle-mappen med linjen:\n-<blockquote><div>php_value memory_limit 40M</div></blockquote> \n+<blockquote><div>php_value memory_limit 40M</div></blockquote>\n <p>Det kan dog p\u00e5 nogle servere forhindre <b>alle</b> PHP-siderne i at virke (du vil se fejl n\u00e5r du ser p\u00e5 siderne). I s\u00e5 fald kan du blive n\u00f8dt til at fjerne \\'.htaccess\\' filen igen.</p></li> </ol>';\n $string['paths'] = 'Stier';\n $string['pathserrcreatedataroot'] = 'Datamappen ({$a->dataroot}) kan ikke oprettes af installationsprogrammet.';\n@@ -72,19 +72,18 @@ $string['pathsroparentdataroot'] = 'Den overordnede mappe ({$a->parent}) er skri\n $string['pathssubadmindir'] = 'Enkelte webhoteller bruger /admin som speciel URL til kontrolpanelet el. lign. Desv\u00e6rre konflikter det med Moodles standardplacering af admin-sider. Du kan klare dette ved at give admin-mappen et andet navn i din installation og skrive det her. Det kan f.eks. v\u00e6re <em>moodleadmin</em>. Det vil fikse admin-links i Moodle.';\n $string['pathssubdataroot'] = 'Du har brug for et sted, hvor Moodle kan gemme uploadede filer. Denne mappe skal kunne l\u00e6ses OG SKRIVES I af webserverbrugeren (oftest \\'ingen\\' eller \\'apache\\'), men m\u00e5 ikke v\u00e6re tilg\u00e6ngelig direkte via internettet. Installationsprogrammet vil fors\u00f8ge at oprette mappen, hvis ikke den allerede eksisterer.';\n $string['pathssubdirroot'] = 'Den fulde sti til Moodleinstallationen.';\n-$string['pathssubwwwroot'] = 'Moodles fulde web-adresse. \n+$string['pathssubwwwroot'] = 'Moodles fulde web-adresse.\n Det er ikke muligt at komme ind p\u00e5 Moodle fra mere end en adresse.\n Hvis dit websted har flere offentlige adresser skal du ops\u00e6tte permanent viderestilling til dem alle undtagen denne.\n Hvis dit websted er tilg\u00e6ngeligt fra b\u00e5de internet og intranet skal du bruge internetadressen her og ops\u00e6tte din DNS s\u00e5dan at intranet-brugerne kan bruge den offentlige adresse ogs\u00e5.\n-Hvis ikke adressen er korrekt m\u00e5 du \u00e6ndre URL\\'en i din browser og genstarte installationen med den rigtige adresse.\n-';\n+Hvis ikke adressen er korrekt m\u00e5 du \u00e6ndre URL\\'en i din browser og genstarte installationen med den rigtige adresse.';\n $string['pathsunsecuredataroot'] = 'Datamappen er ikke sikret';\n $string['pathswrongadmindir'] = 'Adminmappe eksisterer ikke';\n $string['phpextension'] = '{$a} PHP-extension';\n $string['phpversion'] = 'PHP version';\n-$string['phpversionhelp'] = '<p>Moodle kr\u00e6ver mindst PHP version 4.3.0. eller 5.1.0 (5.0.x er beh\u00e6ftet med fejl).</p> \n-<p>Webserveren bruger i \u00f8jeblikket version {$a}</p> \n-<p>Du bliver n\u00f8dt til at opdatere PHP eller flytte systemet over p\u00e5 en anden webserver der har en nyere version af PHP!</p> \n+$string['phpversionhelp'] = '<p>Moodle kr\u00e6ver mindst PHP version 4.3.0. eller 5.1.0 (5.0.x er beh\u00e6ftet med fejl).</p>\n+<p>Webserveren bruger i \u00f8jeblikket version {$a}</p>\n+<p>Du bliver n\u00f8dt til at opdatere PHP eller flytte systemet over p\u00e5 en anden webserver der har en nyere version af PHP!</p>\n (Har du ver. 5.0.x kan du ogs\u00e5 nedgradere til 4.4.x)</p>';\n $string['welcomep10'] = '{$a->installername} ({$a->installerversion})';\n $string['welcomep20'] = 'Du ser denne side fordi du med succes har installeret og \u00e5bnet pakken <strong>{$a->packname} {$a->packversion}</strong> p\u00e5 din computer.\n", "diff --git a/install/lang/de/admin.php b/install/lang/de/admin.php\nindex 1bf73b84e19..9e68412b9f8 100644\n--- a/install/lang/de/admin.php\n+++ b/install/lang/de/admin.php\n@@ -36,7 +36,7 @@ $string['cliincorrectvalueerror'] = 'Fehler: Falscher Wert \"{$a->value}\" f\u00fcr \"{\n $string['cliincorrectvalueretry'] = 'Falscher Wert - bitte nochmal';\n $string['clitypevalue'] = 'Wert eingeben';\n $string['clitypevaluedefault'] = 'Wert eingeben oder Standardwert benutzen ({$a})';\n-$string['cliunknowoption'] = 'Nicht erkannte Optionen: \n+$string['cliunknowoption'] = 'Nicht erkannte Optionen:\n   {$a}\n Hilfe wird \u00fcber die Option -help angezeigt.';\n $string['cliyesnoprompt'] = 'y (yes=ja) oder n (no=nein) eingeben';\n", "diff --git a/install/lang/de/install.php b/install/lang/de/install.php\nindex 56a55191979..56a0cf7575c 100644\n--- a/install/lang/de/install.php\n+++ b/install/lang/de/install.php\n@@ -66,7 +66,7 @@ $string['pathsroparentdataroot'] = 'Das Verzeichnis ({$a->parent}) ist schreibge\n $string['pathssubadmindir'] = 'Einige Webserver benutzen /admin als speziellen Link, um auf Einstellungsseiten oder \u00c4hnliches zu verweisen. Ungl\u00fccklicherweise kollidiert dies mit dem standardm\u00e4\u00dfigen Verzeichnis f\u00fcr die Moodle-Administration. Sie k\u00f6nnen dieses Problem beheben, indem Sie das Verzeichnis admin in Ihrer Moodle-Installation umbenennen und den neuen Namen hier eingeben (z.B. <em>moodleadmin</em>). Mit dieser \u00c4nderung werden alle Admin-Links korrigiert.';\n $string['pathssubdataroot'] = 'Sie ben\u00f6tigen einen Platz, wo Moodle hochgeladene Dateien abspeichern kann. Dieses Verzeichnis muss Lese- und Schreibrechte f\u00fcr das Nutzerkonto besitzen, mit dem Ihr Webservers l\u00e4uft (\u00fcblicherweise \\'nobody\\', \\'apache\\' oder \\'www\\'). Au\u00dferdem sollte das Verzeichnis nicht direkt aus dem Internet erreichbar sein. Das Intallationsskript wird versuchen, ein solches Verzeichnis zu erstellen, falls es nicht existiert.</p>';\n $string['pathssubdirroot'] = 'Vollst\u00e4ndiger Pfad der Moodle-Installation';\n-$string['pathssubwwwroot'] = 'Vollst\u00e4ndige Webadresse f\u00fcr den Zugriff auf Moodle. Es ist nicht m\u00f6glich, \u00fcber unterschiedliche Adressen auf Moodle zuzugreifen. Sollte Ihre Website mehrere \u00f6ffentliche Adressen verwenden, so m\u00fcssen Sie eine Adresse festlegen und f\u00fcr die \u00fcbrigen Adressen dauerhafte Weiterleitungen dorthin einrichten. \n+$string['pathssubwwwroot'] = 'Vollst\u00e4ndige Webadresse f\u00fcr den Zugriff auf Moodle. Es ist nicht m\u00f6glich, \u00fcber unterschiedliche Adressen auf Moodle zuzugreifen. Sollte Ihre Website mehrere \u00f6ffentliche Adressen verwenden, so m\u00fcssen Sie eine Adresse festlegen und f\u00fcr die \u00fcbrigen Adressen dauerhafte Weiterleitungen dorthin einrichten.\n <p>Falls Ihre Website gleichzeitig im Intranet und im Internet erreichbar ist, so tragen Sie die \u00f6ffentliche Adresse ein. Konfigurieren Sie den DNS so, dass Moodle auch aus dem Intranet \u00fcber die \u00f6ffentliche Adresse erreichbar ist.\n <p>F\u00fchren Sie Ihre Moodle-Installation unbedingt mit der richtigen Adresse durch, weil es andernfalls zu Problemen kommen k\u00f6nnte.';\n $string['pathsunsecuredataroot'] = 'Der Speicherort des Verzeichnisses \\'dataroot\\' ist unsicher';\n", "diff --git a/install/lang/es/install.php b/install/lang/es/install.php\nindex f3dd7c37f9d..3b6560767a4 100644\n--- a/install/lang/es/install.php\n+++ b/install/lang/es/install.php\n@@ -81,17 +81,17 @@ $string['phpextension'] = 'Extensi\u00f3n PHP {$a}';\n $string['phpversion'] = 'Versi\u00f3n PHP';\n $string['phpversionhelp'] = '<p>Moodle requiere al menos una versi\u00f3n de PHP 4.3.0 o 5.1.0 ((5.0.x tiene una serie de problemas conocidos).</p>\n <p>En este momento est\u00e1 ejecutando la versi\u00f3n {$a}</p>\n-<p>\u00a1Debe actualizar PHP o trasladarse a otro servidor con una versi\u00f3n m\u00e1s reciente de PHP!<br /> \n+<p>\u00a1Debe actualizar PHP o trasladarse a otro servidor con una versi\u00f3n m\u00e1s reciente de PHP!<br />\n (En caso de 5.0.x podr\u00eda tambi\u00e9n revertir a la versi\u00f3n 4.4.x)</p>';\n $string['welcomep10'] = '{$a->installername} ({$a->installerversion})';\n $string['welcomep20'] = 'Si est\u00e1 viendo esta p\u00e1gina es porque ha podido ejecutar el paquete <strong>{$a->packname} {$a->packversion}</strong> en su ordenador. !Enhorabuena!';\n-$string['welcomep30'] = 'Esta versi\u00f3n de <strong>{$a->installername}</strong> incluye las \n+$string['welcomep30'] = 'Esta versi\u00f3n de <strong>{$a->installername}</strong> incluye las\n     aplicaciones necesarias para que <strong>Moodle</strong> funcione en su ordenador,\n     principalmente:';\n $string['welcomep40'] = 'El paquete tambi\u00e9n incluye <strong>Moodle {$a->moodlerelease} ({$a->moodleversion})</strong>.';\n-$string['welcomep50'] = 'El uso de todas las aplicaciones del paquete est\u00e1 gobernado por sus respectivas \n-    licencias. El programa <strong>{$a->installername}</strong> es \n-    <a href=\"http://www.opensource.org/docs/definition_plain.html\">c\u00f3digo abierto</a> y se distribuye \n+$string['welcomep50'] = 'El uso de todas las aplicaciones del paquete est\u00e1 gobernado por sus respectivas\n+    licencias. El programa <strong>{$a->installername}</strong> es\n+    <a href=\"http://www.opensource.org/docs/definition_plain.html\">c\u00f3digo abierto</a> y se distribuye\n     bajo licencia <a href=\"http://www.gnu.org/copyleft/gpl.html\">GPL</a>.';\n $string['welcomep60'] = 'Las siguientes p\u00e1ginas le guiar\u00e1n a trav\u00e9s de algunos sencillos pasos para configurar\n     y ajustar <strong>Moodle</strong> en su ordenador. Puede utilizar los valores por defecto sugeridos o,\n", "diff --git a/install/lang/eu/install.php b/install/lang/eu/install.php\nindex d0673e4885c..74283bd19da 100644\n--- a/install/lang/eu/install.php\n+++ b/install/lang/eu/install.php\n@@ -75,13 +75,13 @@ $string['phpversionhelp'] = '<p>Moodle-k PHP 4.1.0 edo geroagoko bertsioa behar\n $string['welcomep10'] = '{$a->installername} ({$a->installerversion})';\n $string['welcomep20'] = 'Orri hau ikusten baduzu <strong>{$a->packname} {$a->packversion}</strong> paketea\n     zure ordenadorean instalatu ahal izan duzu. Zorionak!';\n-$string['welcomep30'] = '<strong>{$a->installername}</strong>ren bertsio honek <strong>Moodle</strong>k \n+$string['welcomep30'] = '<strong>{$a->installername}</strong>ren bertsio honek <strong>Moodle</strong>k\n     zure ordenadorean funtzionatzeko behar diren aplikazioak dauzka,\n     bereziki:';\n $string['welcomep40'] = 'Paketeak ere zera dauka: <strong>Moodle {$a->moodlerelease} ({$a->moodleversion})</strong>.';\n-$string['welcomep50'] = 'Paketeko aplikazio guztien erabilpena dagozkien lizentziek \n-    arautzen dute. <strong>{$a->installername}</strong> aplikazioak \n-    <a href=\"http://www.opensource.org/docs/definition_plain.html\">kode irekia</a> dauka eta \n+$string['welcomep50'] = 'Paketeko aplikazio guztien erabilpena dagozkien lizentziek\n+    arautzen dute. <strong>{$a->installername}</strong> aplikazioak\n+    <a href=\"http://www.opensource.org/docs/definition_plain.html\">kode irekia</a> dauka eta\n    <a href=\"http://www.gnu.org/copyleft/gpl.html\">GPL</a> lizentziapean banatzen da.';\n $string['welcomep60'] = 'Datozen orriek urrats erraz batzuen bidez gidatuko zaituzte\n    <strong>Moodle</strong> zure ordenadorean instalatu eta konfiguratzeko. Aholkatzen diren lehentsitako baloreak\n", "diff --git a/install/lang/gl/install.php b/install/lang/gl/install.php\nindex 2d5c2eebd64..696c264d37f 100644\n--- a/install/lang/gl/install.php\n+++ b/install/lang/gl/install.php\n@@ -44,10 +44,10 @@ $string['memorylimithelp'] = '<p>O l\u00edmite de memoria para PHP do seu servidor e\n \n <p>Isto far\u00e1 que Moodle te\u00f1a problemas de memoria m\u00e1is tarde, especialmente se ten un n\u00famero de m\u00f3dulos significativo e/ou un gran n\u00famero de usuarios.</p>\n \n-<p>Recomendamos que configure PHP cun l\u00edmite maior se \u00e9 posible, como por exemplo 16M.  \n+<p>Recomendamos que configure PHP cun l\u00edmite maior se \u00e9 posible, como por exemplo 16M.\n    Existen varias formas que pode tentar para facer esta modificaci\u00f3n:</p>\n <ol>\n-<li>Se pode, recompile PHP con <i>--enable-memory-limit</i>.  \n+<li>Se pode, recompile PHP con <i>--enable-memory-limit</i>.\n     Iso permitir\u00e1 que o propio Moodle modifique o l\u00edmite de memoria.</li>\n <li>Se ten acceso ao seu ficheiro php.ini pode modificar o valor de <b>memory_limit</b> para algo semellante a 16M.  Se non ten acceso a ese ficheiro tal vez poida pedir ao administrador do sistema que o faga.</li>\n <li>Nalg\u00fans servidores PHP servers pode crear un ficheiro .htaccess no directorio Moodle coa li\u00f1a seguinte:\n@@ -61,7 +61,7 @@ $string['phpversionhelp'] = '<p>Moodle require unha versi\u00f3n de PHP de 4.3.0 com\n (No caso de ter unha versi\u00f3n 5.0.x pode retornar para unha versi\u00f3n 4.4.x)</p>';\n $string['welcomep10'] = '{$a->installername} ({$a->installerversion})';\n $string['welcomep20'] = 'Est\u00e1 a ver esta p\u00e1xina porque conseguiu instalar e iniciar o  paquete <strong>{$a->packname} {$a->packversion}</strong> no seu computador. Parab\u00e9ns!';\n-$string['welcomep30'] = 'Esta versi\u00f3n do <strong>{$a->installername}</strong> incl\u00fae as aplicaci\u00f3ns \n+$string['welcomep30'] = 'Esta versi\u00f3n do <strong>{$a->installername}</strong> incl\u00fae as aplicaci\u00f3ns\n     para crear o \u00e1mbito en que <strong>Moodle</strong> pode funcionar, nomeadamente:';\n $string['welcomep40'] = 'O paquete tam\u00e9n incl\u00fae <strong>Moodle {$a->moodlerelease} ({$a->moodleversion})</strong>.';\n $string['welcomep50'] = 'A utilizaci\u00f3n de todas as aplicaci\u00f3ns deste paquete r\u00e9xese polas respectivas licenzas. O paquete <strong>{$a->installername}</strong> completo \u00e9     <a href=\"http://www.opensource.org/docs/definition_plain.html\"> c\u00f3digo aberto</a>  distribu\u00eddo nos termos da licenza <a href=\"http://www.gnu.org/copyleft/gpl.html\">GPL</a>.';\n", "diff --git a/install/lang/he/admin.php b/install/lang/he/admin.php\nindex 2e23323151b..f4c571c9e38 100644\n--- a/install/lang/he/admin.php\n+++ b/install/lang/he/admin.php\n@@ -37,7 +37,7 @@ $string['cliincorrectvalueerror'] = '\u05e9\u05d2\u05d9\u05d0\u05d4: \u05e2\u05e8\u05da \u05dc\u05d0 \u05ea\u05e7\u05d9\u05df\n $string['cliincorrectvalueretry'] = '\u05e2\u05e8\u05da \u05e9\u05d2\u05d5\u05d9, \u05e0\u05e1\u05d4 \u05e9\u05e0\u05d9\u05ea';\n $string['clitypevalue'] = '\u05e1\u05d5\u05d2 \u05d4\u05e2\u05e8\u05da';\n $string['clitypevaluedefault'] = '\u05e1\u05d5\u05d2 \u05d4\u05e2\u05e8\u05da, \u05d4\u05e7\u05e9 Enter \u05dc\u05e9\u05d9\u05de\u05d5\u05e9 \u05d1\u05e2\u05e8\u05da \u05d1\u05e8\u05d9\u05e8\u05ea \u05de\u05d7\u05d3\u05dc ({$a})';\n-$string['cliunknowoption'] = '\u05d0\u05e4\u05e9\u05e8\u05d5\u05d9\u05d5\u05ea \u05dc\u05d0 \u05de\u05d5\u05db\u05e8\u05d5\u05ea : \n+$string['cliunknowoption'] = '\u05d0\u05e4\u05e9\u05e8\u05d5\u05d9\u05d5\u05ea \u05dc\u05d0 \u05de\u05d5\u05db\u05e8\u05d5\u05ea :\n {$a}\n \u05d0\u05e0\u05d0 \u05d4\u05e9\u05ea\u05de\u05e9 \u05d1\u05d0\u05e4\u05e9\u05e8\u05d5\u05ea \u05d4\u05e2\u05d6\u05e8\u05d4.';\n $string['cliyesnoprompt'] = '\u05e8\u05e9\u05d5\u05dd y (\u05e9\u05e4\u05e8\u05d5\u05e9\u05d5 \u05db\u05df) \u05d0\u05d5 n (\u05e9\u05e4\u05e8\u05d5\u05e9\u05d5 \u05dc\u05d0)';\n", "diff --git a/install/lang/he/install.php b/install/lang/he/install.php\nindex 421694ae56d..d3011dffbb6 100644\n--- a/install/lang/he/install.php\n+++ b/install/lang/he/install.php\n@@ -79,8 +79,8 @@ $string['paths'] = '\u05e0\u05ea\u05d9\u05d1\u05d9\u05dd';\n $string['pathserrcreatedataroot'] = '\u05e1\u05e4\u05e8\u05d9\u05d9\u05ea \u05d4\u05de\u05d9\u05d3\u05e2 (Data Directory) - ({$a->dataroot}) \u05dc\u05d0 \u05d9\u05db\u05d5\u05dc\u05d4 \u05dc\u05d4\u05d9\u05d5\u05d5\u05e6\u05e8 \u05e2\u05dc-\u05d9\u05d3\u05d9 \u05d4\u05de\u05ea\u05e7\u05d9\u05df.';\n $string['pathshead'] = '\u05e0\u05ea\u05d9\u05d1\u05d9\u05dd \u05de\u05d0\u05d5\u05e9\u05e8\u05d9\u05dd';\n $string['pathsrodataroot'] = '\u05e1\u05e4\u05e8\u05d9\u05d9\u05ea \u05d4\u05de\u05d9\u05d3\u05e2 (Data Directory) \u05dc\u05d0 \u05e0\u05d9\u05ea\u05e0\u05ea \u05dc\u05db\u05ea\u05d9\u05d1\u05d4.';\n-$string['pathsroparentdataroot'] = '\u05e1\u05e4\u05e8\u05d9\u05d9\u05ea \u05d4\u05d0\u05d1 - ({$a->parent}) \u05dc\u05d0 \u05e0\u05d9\u05ea\u05e0\u05ea \u05dc\u05db\u05ea\u05d9\u05d1\u05d4. \n-\u05e1\u05e4\u05e8\u05d9\u05d9\u05ea \u05d4\u05de\u05d9\u05d3\u05e2 (Data Directory) - ({$a->dataroot}) \u05dc\u05d0 \u05d9\u05db\u05d5\u05dc\u05d4 \u05dc\u05d4\u05d9\u05d5\u05d5\u05e6\u05e8 \u05e2\u05dc-\u05d9\u05d3\u05d9 \u05d4\u05de\u05ea\u05e7\u05d9\u05df. ';\n+$string['pathsroparentdataroot'] = '\u05e1\u05e4\u05e8\u05d9\u05d9\u05ea \u05d4\u05d0\u05d1 - ({$a->parent}) \u05dc\u05d0 \u05e0\u05d9\u05ea\u05e0\u05ea \u05dc\u05db\u05ea\u05d9\u05d1\u05d4.\n+\u05e1\u05e4\u05e8\u05d9\u05d9\u05ea \u05d4\u05de\u05d9\u05d3\u05e2 (Data Directory) - ({$a->dataroot}) \u05dc\u05d0 \u05d9\u05db\u05d5\u05dc\u05d4 \u05dc\u05d4\u05d9\u05d5\u05d5\u05e6\u05e8 \u05e2\u05dc-\u05d9\u05d3\u05d9 \u05d4\u05de\u05ea\u05e7\u05d9\u05df.';\n $string['pathssubdirroot'] = '\u05d4\u05e0\u05ea\u05d9\u05d1 \u05d4\u05de\u05dc\u05d0 \u05dc\u05e1\u05e4\u05e8\u05d9\u05d9\u05ea \u05d4\u05d4\u05ea\u05e7\u05e0\u05d4 \u05e9\u05dc Moodle';\n $string['pathsunsecuredataroot'] = '\u05e1\u05e4\u05e8\u05d9\u05d9\u05ea \u05d4\u05de\u05d9\u05d3\u05e2 (Data Directory) \u05dc\u05d0 \u05de\u05d0\u05d5\u05d1\u05d8\u05d7\u05ea';\n $string['pathswrongadmindir'] = '\u05e1\u05e4\u05e8\u05d9\u05d9\u05ea \u05d4-admin \u05dc\u05d0 \u05e7\u05d9\u05d9\u05de\u05ea';\n@@ -96,11 +96,11 @@ $string['welcomep20'] = '\u05d4\u05d9\u05e0\u05da \u05e8\u05d5\u05d0\u05d4 \u05d0\u05ea \u05e2\u05de\u05d5\u05d3 \u05d6\u05d4 \u05de\u05e4\u05e0\u05d9 \u05e9\u05d4\u05ea\u05e7\n \u05d7\u05d1\u05d9\u05dc\u05d4 \u05d1\u05de\u05d7\u05e9\u05d1\u05da. \u05d1\u05e8\u05db\u05d5\u05ea\u05d9\u05e0\u05d5!';\n $string['welcomep30'] = '\u05d2\u05d9\u05e8\u05e1\u05ea <strong>{$a->installername}</strong> \u05db\u05d5\u05dc\u05dc\u05ea \u05d0\u05ea \u05d4\u05d9\u05d9\u05e9\u05d5\u05de\u05d9\u05dd \u05dc\u05d9\u05e6\u05d5\u05e8 \u05e1\u05d1\u05d9\u05d1\u05d4 \u05d0\u05e9\u05e8 \u05d1\u05d4 <strong> Moodle </strong>\n \u05d9\u05e4\u05e2\u05dc \u05d3\u05d4\u05d9\u05d9\u05e0\u05d5:';\n-$string['welcomep40'] = '\u05d4\u05d7\u05d1\u05d9\u05dc\u05d4 \u05db\u05d5\u05dc\u05dc\u05ea \u05d1\u05e0\u05d5\u05e1\u05e3 \n+$string['welcomep40'] = '\u05d4\u05d7\u05d1\u05d9\u05dc\u05d4 \u05db\u05d5\u05dc\u05dc\u05ea \u05d1\u05e0\u05d5\u05e1\u05e3\n <strong>Moodle {$a->moodlerelease} ({$a->moodleversion})</strong>.';\n-$string['welcomep50'] = '\u05d4\u05e9\u05d9\u05de\u05d5\u05e9 \u05d1\u05db\u05dc \u05d4\u05d9\u05d9\u05e9\u05d5\u05de\u05d9\u05dd \u05d1\u05d7\u05d1\u05d9\u05dc\u05d4 \u05d6\u05d5 \u05de\u05e4\u05d5\u05e7\u05d7 \u05e2\"\u05d9 \u05d4\u05e8\u05e9\u05d9\u05d5\u05e0\u05d5\u05ea \u05d4\u05de\u05ea\u05d0\u05d9\u05de\u05d9\u05dd \u05dc\u05d4\u05dd. \u05d4\u05d7\u05d1\u05d9\u05dc\u05d4 \n+$string['welcomep50'] = '\u05d4\u05e9\u05d9\u05de\u05d5\u05e9 \u05d1\u05db\u05dc \u05d4\u05d9\u05d9\u05e9\u05d5\u05de\u05d9\u05dd \u05d1\u05d7\u05d1\u05d9\u05dc\u05d4 \u05d6\u05d5 \u05de\u05e4\u05d5\u05e7\u05d7 \u05e2\"\u05d9 \u05d4\u05e8\u05e9\u05d9\u05d5\u05e0\u05d5\u05ea \u05d4\u05de\u05ea\u05d0\u05d9\u05de\u05d9\u05dd \u05dc\u05d4\u05dd. \u05d4\u05d7\u05d1\u05d9\u05dc\u05d4\n <strong>{$a->installername}</strong>\n-\u05d4\u05e9\u05dc\u05de\u05d4 \u05d4\u05d9\u05d0 \n+\u05d4\u05e9\u05dc\u05de\u05d4 \u05d4\u05d9\u05d0\n <a href=\"http://www.opensource.org/docs/definition_plain.html\"> \u05e7\u05d5\u05d3 \u05e4\u05ea\u05d5\u05d7\n </a>\n \u05d5\u05d4\u05d9\u05d0 \u05de\u05d1\u05d5\u05d6\u05e8\u05ea \u05ea\u05d7\u05ea \u05e8\u05d9\u05e9\u05d9\u05d5\u05df\n", "diff --git a/install/lang/hr/install.php b/install/lang/hr/install.php\nindex 822c72fb946..06e22c17983 100644\n--- a/install/lang/hr/install.php\n+++ b/install/lang/hr/install.php\n@@ -50,15 +50,15 @@ Puna provjera okru\u017eenja se obavlja prije svake instalacije ili nadogradnje post\n $string['errorsinenvironment'] = 'Pogre\u0161ke u okru\u017eenju poslu\u017eitelja!';\n $string['installation'] = 'Instalacija';\n $string['langdownloaderror'] = 'Na\u017ealost, jezik \"{$a}\" nije instaliran. Proces instalacije \u0107e biti nastavljen na engleskom jeziku.';\n-$string['memorylimithelp'] = '<p>PHP ograni\u010denje memorije na poslu\u017eitelju je trenutno pode\u0161eno na {$a}.</p> \n+$string['memorylimithelp'] = '<p>PHP ograni\u010denje memorije na poslu\u017eitelju je trenutno pode\u0161eno na {$a}.</p>\n \n-<p>Ova postavka mo\u017ee kasnije rezultirati memorijskim problemima na va\u0161em Moodle sustavu, posebno ako imate ve\u0107i broj uklju\u010denih modula i/ili ve\u0107i broj korisnika.</p> \n+<p>Ova postavka mo\u017ee kasnije rezultirati memorijskim problemima na va\u0161em Moodle sustavu, posebno ako imate ve\u0107i broj uklju\u010denih modula i/ili ve\u0107i broj korisnika.</p>\n \n <p>Preporu\u010dujemo da konfigurirate PHP s ve\u0107im ograni\u010denjem ako je mogu\u0107e, recimo 40M. Postoji nekoliko na\u010dina na koje to mo\u017eete napraviti:</p>\n-<ol> \n-<li>Ako mo\u017eete, rekompajlirajte PHP s <i>--enable-memory-limit</i>. Ovo \u0107e dozvoliti Moodle sustavu samostalno postavljanje memorijskog ograni\u010denja.</li> \n-<li>Ako imate pristup php.ini datoteci, mo\u017eete promijeniti <b>memory_limit</b> vrijednost na 40M. Ako nemate pristup toj datoteci mo\u017eete pitati svog administratora da to uradi.</li> \n-<li>Na nekim PHP poslu\u017eiteljima mo\u017eete napraviti .htaccess datoteku u Moodle mapi koja sadr\u017ei red: <p><blockquote>php_value memory_limit 40M</blockquote></p> \n+<ol>\n+<li>Ako mo\u017eete, rekompajlirajte PHP s <i>--enable-memory-limit</i>. Ovo \u0107e dozvoliti Moodle sustavu samostalno postavljanje memorijskog ograni\u010denja.</li>\n+<li>Ako imate pristup php.ini datoteci, mo\u017eete promijeniti <b>memory_limit</b> vrijednost na 40M. Ako nemate pristup toj datoteci mo\u017eete pitati svog administratora da to uradi.</li>\n+<li>Na nekim PHP poslu\u017eiteljima mo\u017eete napraviti .htaccess datoteku u Moodle mapi koja sadr\u017ei red: <p><blockquote>php_value memory_limit 40M</blockquote></p>\n <p>Uzmite u obzir da \u0107e na nekim poslu\u017eiteljima to sprije\u010diti prikazivanje <b>svih</b> PHP stranica (bit \u0107e vam prikazana poruka o gre\u0161ci), pa \u0107ete na takvim poslu\u017eiteljima morati ukloniti .htaccess datoteku.</p></li> </ol>';\n $string['paths'] = 'Putanje (PATH)';\n $string['pathserrcreatedataroot'] = 'Instalacijska skripta ne mo\u017ee stvoriti \\'Mapu s podacima\\' ({$a->dataroot}).';\n@@ -69,8 +69,8 @@ $string['pathssubadmindir'] = 'Manji broj webhosting tvrtki koristi /admin kao p\n Ovo \u0107e promijeniti administratorsku poveznicu na Moodle sustavu u novu vrijednost.';\n $string['pathssubdataroot'] = 'Mora postojati mapa u koju Moodle mo\u017ee pohraniti upload datoteke. Korisnik pod kojim je pokrenut web server (obi\u010dno \\'nobody\\' ili \\'apache\\') bi morao imati mogu\u0107nost \u010ditanja/pisanja podataka u toj mapi, ali oni ne bi trebali biti dostupni direktno preko weba. Instalacijska skripta \u0107e poku\u0161ati stvoriti navedenu mapu ako ista ne postoji.';\n $string['pathssubdirroot'] = 'Puna putanja (PATH) do Moodle instalacije.';\n-$string['pathssubwwwroot'] = 'Unesite punu web adresu putem koje \u0107e se pristupati va\u0161em Moodle sustavu. \n-Moodle sustavu NIJE MOGU\u0106E pristupiti preko vi\u0161e URL-ova, odaberite onaj koji vam najvi\u0161e odgovara. \n+$string['pathssubwwwroot'] = 'Unesite punu web adresu putem koje \u0107e se pristupati va\u0161em Moodle sustavu.\n+Moodle sustavu NIJE MOGU\u0106E pristupiti preko vi\u0161e URL-ova, odaberite onaj koji vam najvi\u0161e odgovara.\n Ako va\u0161 poslu\u017eitelj ima vi\u0161estruke javne adrese, onda morate postaviti tzv. permanent redirect na sve osim ove adrese.\n Ako je va\u0161 poslu\u017eitelj dostupan i putem intraneta i Interneta, onda ovdje unesite javnu adresu i podesite DNS tako da va\u0161i intranet korisnici mogu koristiti tu javnu adresu.\n Ako adresa nije to\u010dna, molimo unesite to\u010dnu adresu u va\u0161 internet preglednik i ponovno pokrenite instalaciju s promijenjenim vrijednostima.';\n", "diff --git a/install/lang/hu/install.php b/install/lang/hu/install.php\nindex 1261f4f9e01..f205ca729b7 100644\n--- a/install/lang/hu/install.php\n+++ b/install/lang/hu/install.php\n@@ -59,18 +59,18 @@ $string['pathsroparentdataroot'] = 'A felettes k\u00f6nyvt\u00e1s ({$a->parent}) nem \u00edr\n $string['pathssubadmindir'] = 'Egy p\u00e1r webes gazdag\u00e9p eset\u00e9n az /admin speci\u00e1lis URL pl. a vez\u00e9rl\u0151panel el\u00e9r\u00e9s\u00e9hez. Ez \u00fctk\u00f6zik a Moodle admin oldalainak standard hely\u00e9vel. Jav\u00edt\u00e1s: a telep\u00edt\u00e9sben nevezze \u00e1t a rendszergazda k\u00f6nyvt\u00e1r\u00e1t, az \u00faj nevet pedig \u00edrja be ide. P\u00e9ld\u00e1ul: <em>moodleadmin</em>. Ezzel helyrehozhat\u00f3k a Moodle rendszergazdai ugr\u00f3pontjai.';\n $string['pathssubdataroot'] = 'Sz\u00fcks\u00e9ge van egy helyre, ahol a Moodle mentheti a felt\u00f6lt\u00f6tt \u00e1llom\u00e1nyokat. Ez a k\u00f6nyvt\u00e1r a webszerver felhaszn\u00e1l\u00f3ja (\u00e1ltal\u00e1ban \\'nobody\\' vagy \\'apache\\') sz\u00e1m\u00e1ra legyen mind olvashat\u00f3, MIND \u00cdRHAT\u00d3. Ha nem l\u00e9tezik, a telep\u00edt\u0151 megpr\u00f3b\u00e1lja l\u00e9trehozni.';\n $string['pathssubdirroot'] = 'Teljes \u00fatvonal a Moodle telep\u00edt\u00e9s\u00e9hez. ';\n-$string['pathssubwwwroot'] = 'A Moodle el\u00e9r\u00e9s\u00e9re haszn\u00e1land\u00f3 teljes webc\u00edm. A Moodle egyszerre t\u00f6bb \n-c\u00edmr\u0151l nem \u00e9rhet\u0151 el. Ha port\u00e1lja t\u00f6bb c\u00edmet haszn\u00e1l, a jelen c\u00edm kiv\u00e9tel\u00e9vel az \u00f6sszeshez \u00e1lland\u00f3 \n-\u00e1tir\u00e1ny\u00edt\u00e1st kell be\u00e1ll\u00edtania. Ha port\u00e1lja mind intranetr\u0151l, mind az internetr\u0151l el\u00e9rhet\u0151, a nyilv\u00e1nos \n-c\u00edmet itt adja meg, a DNS-t pedig \u00fagy \u00e1ll\u00edtsa be, hogy az intranetr\u0151l a \n+$string['pathssubwwwroot'] = 'A Moodle el\u00e9r\u00e9s\u00e9re haszn\u00e1land\u00f3 teljes webc\u00edm. A Moodle egyszerre t\u00f6bb\n+c\u00edmr\u0151l nem \u00e9rhet\u0151 el. Ha port\u00e1lja t\u00f6bb c\u00edmet haszn\u00e1l, a jelen c\u00edm kiv\u00e9tel\u00e9vel az \u00f6sszeshez \u00e1lland\u00f3\n+\u00e1tir\u00e1ny\u00edt\u00e1st kell be\u00e1ll\u00edtania. Ha port\u00e1lja mind intranetr\u0151l, mind az internetr\u0151l el\u00e9rhet\u0151, a nyilv\u00e1nos\n+c\u00edmet itt adja meg, a DNS-t pedig \u00fagy \u00e1ll\u00edtsa be, hogy az intranetr\u0151l a\n nyilv\u00e1nos c\u00edm is el\u00e9rhet\u0151 legyen. Ha a c\u00edm hib\u00e1s, m\u00f3dos\u00edtsa b\u00f6ng\u00e9sz\u0151j\u00e9ben az URL-t, hogy a telep\u00edt\u00e9s egy m\u00e1sik \u00e9rt\u00e9kkel induljon \u00fajra.';\n $string['pathsunsecuredataroot'] = 'Az adatok gy\u00f6k\u00e9rk\u00f6nyvt\u00e1ra nem biztons\u00e1gos.';\n $string['pathswrongadmindir'] = 'Nem l\u00e9tezik az admin k\u00f6nyvt\u00e1r.';\n $string['phpextension'] = '{$a} PHP-b\u0151v\u00edtm\u00e9ny';\n $string['phpversion'] = 'PHP-verzi\u00f3';\n $string['phpversionhelp'] = 'A Moodle haszn\u00e1lat\u00e1hoz legal\u00e1bb a PHP 4.3.0 vagy 5.1.0 verzi\u00f3ja sz\u00fcks\u00e9ges\n- (az 5.0.x t\u00f6bb ismert gond miatt nem aj\u00e1nlott). Az \u00d6n \u00e1ltal haszn\u00e1lt \n-verzi\u00f3 {$a}. Friss\u00edtse a PHP-verzi\u00f3t, vagy t\u00e9rjen \u00e1t \u00fajabb PHP-verzi\u00f3t \n+ (az 5.0.x t\u00f6bb ismert gond miatt nem aj\u00e1nlott). Az \u00d6n \u00e1ltal haszn\u00e1lt\n+verzi\u00f3 {$a}. Friss\u00edtse a PHP-verzi\u00f3t, vagy t\u00e9rjen \u00e1t \u00fajabb PHP-verzi\u00f3t\n m\u0171k\u00f6dtet\u0151 gazdag\u00e9pre! (5.0.x eset\u00e9n visszat\u00e9rhet a 4.4.x verzi\u00f3hoz is)';\n $string['welcomep10'] = '{$a->installername} ({$a->installerversion})';\n $string['welcomep20'] = 'Az\u00e9rt l\u00e1tja ezt az oldalt, mert sikeresen telep\u00edtette \u00e9s futtatja az {$a->packname} {$a->packversion} csomagot sz\u00e1m\u00edt\u00f3g\u00e9p\u00e9n. Gratul\u00e1lunk!';\n", "diff --git a/install/lang/hy/install.php b/install/lang/hy/install.php\nindex d40c02e9733..2629147a235 100644\n--- a/install/lang/hy/install.php\n+++ b/install/lang/hy/install.php\n@@ -42,17 +42,17 @@ $string['installation'] = '\u054f\u0565\u0572\u0561\u056f\u0561\u0575\u0578\u0582\u0574';\n $string['langdownloaderror'] = '\u0551\u0561\u057e\u0578\u0584 \"{$a}\" \u056c\u0565\u0566\u0578\u0582\u0576 \u057f\u0565\u0572\u0561\u056f\u0561\u0575\u057e\u0561\u056e \u0579\u0567 \u0587 \u057f\u0565\u0572\u0561\u056f\u0561\u0575\u0574\u0561\u0576 \u0563\u0578\u0580\u056e\u0568\u0576\u0569\u0561\u0581\u0568 \u056f\u0577\u0561\u0580\u0578\u0582\u0576\u0561\u056f\u057e\u056b \u0561\u0576\u0563\u056c\u0565\u0580\u0565\u0576\u0578\u057e\u0589';\n $string['memorylimithelp'] = '<p>PHP-\u056b \u0570\u056b\u0577\u0578\u0572\u0578\u0582\u0569\u0575\u0561\u0576 \u057d\u0561\u0570\u0574\u0561\u0576\u0568 \u057d\u057a\u0561\u057d\u0561\u0580\u056f\u0579\u056b \u0570\u0561\u0574\u0561\u0580 \u0576\u0565\u0580\u056f\u0561\u0575\u0578\u0582\u0574\u057d \u057d\u0561\u0570\u0574\u0561\u0576\u057e\u0561\u056e \u0567\u055d {$a}\u0589</p>\n \n-<p>\u0570\u0565\u057f\u0561\u0563\u0561\u0575\u0578\u0582\u0574 \u056f\u0561\u0580\u0578\u0572 \u0565\u0584 \u0570\u056b\u0577\u0578\u0572\u0578\u0582\u0569\u0575\u0561\u0576 \u0570\u0565\u057f \u056f\u0561\u057a\u057e\u0561\u056e \u056d\u0576\u0564\u056b\u0580\u0576\u0565\u0580 \u0578\u0582\u0576\u0565\u0576\u0561\u056c, \n+<p>\u0570\u0565\u057f\u0561\u0563\u0561\u0575\u0578\u0582\u0574 \u056f\u0561\u0580\u0578\u0572 \u0565\u0584 \u0570\u056b\u0577\u0578\u0572\u0578\u0582\u0569\u0575\u0561\u0576 \u0570\u0565\u057f \u056f\u0561\u057a\u057e\u0561\u056e \u056d\u0576\u0564\u056b\u0580\u0576\u0565\u0580 \u0578\u0582\u0576\u0565\u0576\u0561\u056c,\n    \u0565\u0569\u0565 Moodle-\u0578\u0582\u0574 \u0578\u0582\u0576\u0565\u0576\u0561\u0584 \u0577\u0561\u057f \u0574\u0578\u0564\u0578\u0582\u056c\u0576\u0565\u0580 \u0587/\u056f\u0561\u0574 \u0574\u0565\u056e \u0569\u057e\u0578\u057e \u0585\u0563\u057f\u0561\u0563\u0578\u0580\u056e\u0578\u0572\u0576\u0565\u0580\u0589</p>\n \n <p>\u053d\u0578\u0580\u0570\u0578\u0582\u0580\u0564 \u0565\u0576\u0584 \u057f\u0561\u056c\u056b\u057d PHP-\u0576 \u056f\u0561\u0566\u0574\u0561\u0571\u0587\u0565\u056c \u0570\u0576\u0561\u0580\u0561\u057e\u0578\u0580\u056b\u0576 \u0577\u0561\u057f \u0570\u056b\u0577\u0578\u0572\u0578\u0582\u0569\u0575\u0561\u0576 \u0570\u0561\u0574\u0561\u0580, \u0585\u0580\u056b\u0576\u0561\u056f` 40M: \u0534\u0580\u0561 \u0570\u0561\u0574\u0561\u0580 \u056f\u0561\u0576 \u0574\u056b \u0584\u0561\u0576\u056b \u0571\u0587\u0565\u0580, \u0578\u0580\u0578\u0576\u0584 \u056f\u0561\u0580\u0578\u0572 \u0565\u0584 \u0583\u0578\u0580\u0571\u0565\u056c.</p>\n <ol>\n <li>\u0535\u0569\u0565 \u0564\u0578\u0582\u0584 \u056f\u0561\u0580\u0578\u0572 \u0565\u0584, \u057e\u0565\u0580\u0561\u056f\u0561\u0566\u0574\u0561\u0580\u056f\u0565\u056c PHP-\u0576 <i>--enable-memory-limit</i>-\u0578\u057e\u0589 \u0531\u0575\u0576 \u0569\u0578\u0582\u0575\u056c \u056f\u057f\u0561 Moodle-\u056b\u0576 \u056b\u0576\u0584\u0576\u0578\u0582\u0580\u0578\u0582\u0575\u0576 \u056f\u0561\u0580\u0563\u0561\u0562\u0565\u0580\u0565\u056c \u0570\u056b\u0577\u0578\u0572\u0578\u0582\u0569\u0575\u0561\u0576 \u057d\u0561\u0570\u0574\u0561\u0576\u0568\u0589</li>\n-<li>\u0535\u0569\u0565 \u0541\u0565\u0566 \u0574\u0561\u057f\u0579\u0565\u056c\u056b \u0567 php.ini \u0586\u0561\u0575\u056c\u0568, \u056f\u0561\u0580\u0578\u0572 \u0565\u0584 \u0583\u0578\u056d\u0565\u056c <b>memory_limit</b>-\u0568\u055d \n+<li>\u0535\u0569\u0565 \u0541\u0565\u0566 \u0574\u0561\u057f\u0579\u0565\u056c\u056b \u0567 php.ini \u0586\u0561\u0575\u056c\u0568, \u056f\u0561\u0580\u0578\u0572 \u0565\u0584 \u0583\u0578\u056d\u0565\u056c <b>memory_limit</b>-\u0568\u055d\n     \u056f\u0561\u0580\u0563\u0561\u0562\u0565\u0580\u0565\u056c\u0578\u057e \u0574\u0578\u057f\u0561\u057e\u0578\u0580\u0561\u057a\u0565\u057d 40M\u0589  </li>\n <li>\u0548\u0580\u0578\u0577 PHP \u057d\u057a\u0561\u057d\u0561\u0580\u056f\u056b\u0579\u0576\u0565\u0580\u0578\u0582\u0574 Moodle \u0564\u056b\u0580\u0565\u056f\u057f\u0578\u0580\u056b\u0561\u0575\u0578\u0582\u0574 \u056f\u0561\u0580\u0578\u0572 \u0565\u0584 \u057d\u057f\u0565\u0572\u056e\u0565\u056c .htaccess \u0586\u0561\u0575\u056c\u0568, \u0578\u0580\u0568 \u057a\u0561\u0580\u0578\u0582\u0576\u0561\u056f\u0578\u0582\u0574 \u0567 \u0561\u0575\u057d \u057f\u0578\u0572\u0568\u055d\n     <blockquote><div>php_value memory_limit 40M</div></blockquote>\n-    <p>\u054d\u0561\u056f\u0561\u0575\u0576 \u0578\u0580\u0578\u0577 \u057d\u057a\u0561\u057d\u0561\u0580\u056f\u056b\u0579\u0576\u0565\u0580\u0578\u0582\u0574 \u057d\u0561 \u056f\u056f\u0561\u0576\u056d\u0561\u0580\u0563\u0565\u056c\u056b <b>\u0562\u0578\u056c\u0578\u0580</b> PHP \u0567\u057b\u0565\u0580\u056b \u0561\u0577\u056d\u0561\u057f\u0565\u056c\u0568 \n+    <p>\u054d\u0561\u056f\u0561\u0575\u0576 \u0578\u0580\u0578\u0577 \u057d\u057a\u0561\u057d\u0561\u0580\u056f\u056b\u0579\u0576\u0565\u0580\u0578\u0582\u0574 \u057d\u0561 \u056f\u056f\u0561\u0576\u056d\u0561\u0580\u0563\u0565\u056c\u056b <b>\u0562\u0578\u056c\u0578\u0580</b> PHP \u0567\u057b\u0565\u0580\u056b \u0561\u0577\u056d\u0561\u057f\u0565\u056c\u0568\n     (\u0564\u0578\u0582\u0584 \u056f\u057f\u0565\u057d\u0576\u0565\u0584 \u057d\u056d\u0561\u056c\u0576\u0565\u0580 \u0567\u057b\u0565\u0580\u0568 \u0564\u056b\u057f\u0565\u056c\u056b\u057d), \u0561\u0575\u057d\u057a\u056b\u057d\u0578\u057e \u0564\u0578\u0582\u0584 \u057a\u0565\u057f\u0584 \u0567 \u057b\u0576\u057b\u0565\u0584 .htaccess \u0586\u0561\u0575\u056c\u0568\u0589</p></li>\n </ol>';\n $string['phpversion'] = 'PHP \u057f\u0561\u0580\u0562\u0565\u0580\u0561\u056f';\n@@ -64,7 +64,7 @@ $string['welcomep10'] = '{$a->installername} ({$a->installerversion})';\n $string['welcomep20'] = '\u0534\u0578\u0582\u0584 \u057f\u0565\u057d\u0576\u0578\u0582\u0574 \u0565\u0584 \u0561\u0575\u057d \u0567\u057b\u0568, \u0584\u0561\u0576\u056b \u0578\u0580 \u0570\u0561\u057b\u0578\u0572\u0578\u0582\u0569\u0575\u0561\u0574\u0562 \u057f\u0565\u0572\u0561\u056f\u0561\u0575\u0565\u056c \u0587 \u0563\u0578\u0580\u056e\u0561\u0580\u056f\u0565\u056c <strong>{$a->packname} {$a->packversion}</strong> \u0583\u0561\u0569\u0565\u0569\u0568\u0589 \u0547\u0576\u0578\u0580\u0570\u0561\u057e\u0578\u0580\u0561\u0576\u0584\u0576\u0565\u0580\u0589';\n $string['welcomep30'] = '<strong>{$a->installername}</strong> \u0569\u0578\u0572\u0561\u0580\u056f\u0578\u0582\u0574\u0568 \u057a\u0561\u0580\u0578\u0582\u0576\u0561\u056f\u0578\u0582\u0574 \u0567  \u056f\u056b\u0580\u0561\u057c\u0561\u056f\u0561\u0576 \u056e\u0580\u0561\u0563\u0580\u0565\u0580, \u0578\u0580\u0578\u0576\u0584 \u057d\u057f\u0565\u0572\u056e\u0578\u0582\u0574 \u0565\u0576 \u0574\u056b\u057b\u0561\u057e\u0561\u0575\u0580, \u0578\u0580\u057f\u0565\u0572 <strong>Moodle</strong> \u056f\u0561\u0577\u056d\u0561\u057f\u056b, \u0574\u0561\u057d\u0576\u0561\u057e\u0578\u0580\u0561\u057a\u0565\u057d\u055d';\n $string['welcomep40'] = '\u0531\u0575\u057d \u0583\u0561\u0569\u0565\u0569\u0568 \u057a\u0561\u0580\u0578\u0582\u0576\u0561\u056f\u0578\u0582\u0574 \u0567 \u0576\u0561\u0587 <strong>Moodle {$a->moodlerelease} ({$a->moodleversion})</strong>\u0589';\n-$string['welcomep50'] = '\u0553\u0561\u0569\u0565\u0569\u056b \u0562\u0578\u056c\u0578\u0580 \u056f\u056b\u0580\u0561\u057c\u0561\u056f\u0561\u0576 \u056e\u0580\u0561\u0563\u0580\u0565\u0580\u056b \u0585\u0563\u057f\u0561\u0563\u0578\u0580\u056e\u0578\u0582\u0574\u0568 \u0572\u0565\u056f\u0561\u057e\u0561\u0580\u057e\u0578\u0582\u0574 \u0567 \u0564\u0580\u0561\u0576\u0581 \u0570\u0561\u0574\u0561\u057a\u0561\u057f\u0561\u057d\u056d\u0561\u0576 \u0561\u0580\u057f\u0578\u0576\u0561\u0563\u0580\u0565\u0580\u0578\u057e: \u0531\u0574\u0562\u0578\u0572\u057b\u0561\u056f\u0561\u0576 <strong>{$a->installername}</strong> \u0583\u0561\u0569\u0565\u0569\u0568 \n+$string['welcomep50'] = '\u0553\u0561\u0569\u0565\u0569\u056b \u0562\u0578\u056c\u0578\u0580 \u056f\u056b\u0580\u0561\u057c\u0561\u056f\u0561\u0576 \u056e\u0580\u0561\u0563\u0580\u0565\u0580\u056b \u0585\u0563\u057f\u0561\u0563\u0578\u0580\u056e\u0578\u0582\u0574\u0568 \u0572\u0565\u056f\u0561\u057e\u0561\u0580\u057e\u0578\u0582\u0574 \u0567 \u0564\u0580\u0561\u0576\u0581 \u0570\u0561\u0574\u0561\u057a\u0561\u057f\u0561\u057d\u056d\u0561\u0576 \u0561\u0580\u057f\u0578\u0576\u0561\u0563\u0580\u0565\u0580\u0578\u057e: \u0531\u0574\u0562\u0578\u0572\u057b\u0561\u056f\u0561\u0576 <strong>{$a->installername}</strong> \u0583\u0561\u0569\u0565\u0569\u0568\n     <a href=\"http://www.opensource.org/docs/definition_plain.html\">\u0562\u0561\u0581 \u056f\u0578\u0564\u0578\u057e \u0567</a> \u0587 \u057f\u0580\u0561\u0574\u0561\u0564\u0580\u057e\u0578\u0582\u0574 \u0567 <a href=\"http://www.gnu.org/copyleft/gpl.html\">GPL</a> \u0561\u0580\u057f\u0578\u0576\u0561\u0563\u0580\u0578\u057e\u0589';\n $string['welcomep60'] = '\u0540\u0565\u057f\u0587\u0575\u0561\u056c \u0567\u057b\u0565\u0580\u056b \u0578\u0580\u0578\u0577 \u0570\u0565\u0577\u057f \u0584\u0561\u0575\u056c\u0565\u0580\u056b\u0576 \u0570\u0565\u057f\u0587\u0565\u056c\u0578\u057e\u055d \u056f\u0561\u0580\u0578\u0572 \u0565\u0584 <strong>Moodle</strong> \u057f\u0565\u0572\u0561\u056f\u0561\u0575\u0565\u056c \u0541\u0565\u0580 \u0570\u0561\u0574\u0561\u056f\u0561\u0580\u0563\u0579\u0578\u0582\u0574\u0589 \u0534\u0578\u0582\u0584 \u056f\u0561\u0580\u0578\u0572 \u0565\u0584 \u0570\u0561\u0574\u0561\u0571\u0561\u0575\u0576\u057e\u0565\u056c \u056c\u057c\u0565\u056c\u0575\u0561\u0575\u0576 \u056f\u0561\u0580\u0563\u0561\u0562\u0565\u0580\u0578\u0582\u0574\u0576\u0565\u0580\u056b \u0570\u0565\u057f \u056f\u0561\u0574 \u0583\u0578\u056d\u0565\u056c \u0564\u0580\u0561\u0576\u0584\u055d \u0571\u0565\u0580 \u057a\u0561\u0570\u0561\u0576\u057b\u0576\u0565\u0580\u056b\u0576 \u0570\u0561\u0574\u0561\u057a\u0561\u057f\u0561\u057d\u056d\u0561\u0576:';\n $string['welcomep70'] = '\u054d\u0565\u0572\u0574\u0565\u0584 \u057d\u057f\u0578\u0580\u0587 \u0563\u057f\u0576\u057e\u0578\u0572 \\'\u0540\u0561\u057b\u0578\u0580\u0564\\' \u056f\u0578\u0573\u0561\u056f\u0568, \u0578\u0580\u057a\u0565\u057d\u0566\u056b \u0561\u0576\u0581\u0576\u0565\u0584 <strong>Moodle</strong>-\u056b \u056f\u0561\u0580\u0563\u0561\u0562\u0565\u0580\u0574\u0561\u0576 \u0570\u0561\u057b\u0578\u0580\u0564 \u0584\u0561\u0575\u056c\u056b\u0576:';\n", "diff --git a/install/lang/ka/install.php b/install/lang/ka/install.php\nindex 47700e15701..fadb0e78c3d 100644\n--- a/install/lang/ka/install.php\n+++ b/install/lang/ka/install.php\n@@ -38,21 +38,21 @@ $string['dirroot'] = 'Moodle-\u10d8\u10e1 \u10d3\u10d8\u10e0\u10d4\u10e5\u10e2\u10dd\u10e0\u10d8\u10d0';\n $string['installation'] = '\u10d8\u10dc\u10e1\u10e2\u10d0\u10da\u10d8\u10e0\u10d4\u10d1\u10d0';\n $string['memorylimithelp'] = '<p>The PHP memory limit for your server is currently set to {$a}.</p>\n \n-<p>This may cause Moodle to have memory problems later on, especially \n+<p>This may cause Moodle to have memory problems later on, especially\n if you have a lot of modules enabled and/or a lot of users.</p>\n \n-<p>We recommend that you configure PHP with a higher limit if possible, like 40M. \n+<p>We recommend that you configure PHP with a higher limit if possible, like 40M.\n There are several ways of doing this that you can try:</p>\n <ol>\n-<li>If you are able to, recompile PHP with <i>--enable-memory-limit</i>. \n+<li>If you are able to, recompile PHP with <i>--enable-memory-limit</i>.\n This will allow Moodle to set the memory limit itself.</li>\n-<li>If you have access to your php.ini file, you can change the <b>memory_limit</b> \n-setting in there to something like 40M. If you don\\'t have access you might \n+<li>If you have access to your php.ini file, you can change the <b>memory_limit</b>\n+setting in there to something like 40M. If you don\\'t have access you might\n be able to ask your administrator to do this for you.</li>\n-<li>On some PHP servers you can create a .htaccess file in the Moodle directory \n+<li>On some PHP servers you can create a .htaccess file in the Moodle directory\n containing this line:\n <p><blockquote>php_value memory_limit 40M</blockquote></p>\n-<p>However, on some servers this will prevent <b>all</b> PHP pages from working \n+<p>However, on some servers this will prevent <b>all</b> PHP pages from working\n (you will see errors when you look at pages) so you\\'ll have to remove the .htaccess file.</p></li>\n </ol>';\n $string['phpversion'] = 'PHP \u10d5\u10d0\u10e0\u10d8\u10d0\u10dc\u10e2\u10d8';\n", "diff --git a/install/lang/ko/install.php b/install/lang/ko/install.php\nindex d3526b86e22..aab4295d4d6 100644\n--- a/install/lang/ko/install.php\n+++ b/install/lang/ko/install.php\n@@ -52,7 +52,7 @@ $string['memorylimithelp'] = '<p>\ud604\uc7ac \uc11c\ubc84\uc758 PHP \uba54\ubaa8\ub9ac \uc0ac\uc6a9\ub7c9\uc740 {$a\n \n <p>\uc774\ub294 \ucd94\ud6c4\uc5d0 \ubb34\ub4e4\uc774 \uc6d0\ud65c\ud788 \uad6c\ub3d9\ub418\ub294 \ub370 \ubb38\uc81c\uac00 \ub420 \uac83\uc785\ub2c8\ub2e4. \ud2b9\ud788 \uc5ec\ub7ec\ubd84\uc774 \uc0c1\ub2f9\ud788 \ub9ce\uc740 \ubaa8\ub4c8\uc744 \uc774\uc6a9\ud558\uace0 \ub610 \uc0ac\uc6a9\uc790\uac00 \ub9ce\uc544\uc9c0\uac8c \ub418\uba74 \ubb38\uc81c\uac00 \ub420 \uc18c\uc9c0\uac00 \ub354 \ucee4\uc9d1\ub2c8\ub2e4.</p>\n \n-<p>PHP\uac00 \uc0ac\uc6a9\ud560 \uc218 \uc788\ub294 \uba54\ubaa8\ub9ac \uc6a9\ub791\uc744 40M \ub098 \uc544\ub2c8\uba74 \ub354 \ud070 \uac12\uc73c\ub85c \uc124\uc815\ud558\uae38 \uad8c\ud569\ub2c8\ub2e4. \uc124\uc815\ud558\ub294 \ubc29\ubc95\uc740 \n+<p>PHP\uac00 \uc0ac\uc6a9\ud560 \uc218 \uc788\ub294 \uba54\ubaa8\ub9ac \uc6a9\ub791\uc744 40M \ub098 \uc544\ub2c8\uba74 \ub354 \ud070 \uac12\uc73c\ub85c \uc124\uc815\ud558\uae38 \uad8c\ud569\ub2c8\ub2e4. \uc124\uc815\ud558\ub294 \ubc29\ubc95\uc740\n \uc5ec\ub7ec\uac00\uc9c0\uac00 \uc788\uc2b5\ub2c8\ub2e4.</p>\n <ol>\n <li>\ub9cc\uc57d PHP\uc18c\uc2a4\ub97c \uc7ac\ucef4\ud30c\uc77c \ud560 \uc218 \uc788\ub2e4\uba74 \uc635\uc158\uc5d0 <i>--enable-memory-limit</i> \uc744 \ud3ec\ud568\uc2dc\ucf1c \ucef4\ud30c\uc77c \ud558\uc2ed\uc2dc\uc624. \uc774\ub807\uac8c \ud574 \ub193\uc73c\uba74 \ubb34\ub4e4 \ud504\ub85c\uadf8\ub7a8\uc73c\ub85c \uba54\ubaa8\ub9ac \uc6a9\ub7c9\uc744 \uc81c\uc5b4\ud560 \uc218 \uc788\uac8c \ub429\ub2c8\ub2e4.</li>\n@@ -72,7 +72,7 @@ $string['pathssubdataroot'] = '\ubb34\ub4e4\ub85c \uc5c5\ub85c\ub4dc\ub41c \ud30c\uc77c\uc744 \uc800\uc7a5\ud560 \uc218 \n $string['pathssubdirroot'] = '\ubb34\ub4e4 \uc124\uce58\ub97c \uc704\ud55c \uc644\uc804\ud55c \ub514\ub809\ud1a0\ub9ac \uacbd\ub85c.';\n $string['pathssubwwwroot'] = '\ubb34\ub4e4\uc744 \uc811\uc18d\ud560 \uc218 \uc788\ub294 \uc804\uccb4 \uc6f9 \uc8fc\uc18c. \ub2e4\uc911 \uc8fc\uc18c\ub97c \uc774\uc6a9\ud574\uc11c\ub294 \ubb34\ub4e4\uc5d0 \uc811\uc18d\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.\n \ub9cc\uc77c \uc0ac\uc774\ud2b8\uac00 \ubcf5\uc218\uc758 \uacf5\uac1c \uc8fc\uc18c\ub97c \uac16\uace0 \uc788\ub294 \uacbd\uc6b0, \uc5ec\uae30\uc5d0 \uc785\ub825\ud55c \uc8fc\uc18c \uc774\uc678\uc758 \uacf3\uc5d0\uc11c\ub294 \uc601\uad6c\uc801\uc778 redirect\ub97c \uc124\uc815\ud574 \ub193\uc544\uc57c\ub9cc \ud569\ub2c8\ub2e4.\n-\ub9cc\uc57d \uc5ec\ub7ec\ubd84\uc758 \uc0ac\uc774\ud2b8\uac00 \uc778\ud130\ub137\uacfc \uc778\ud2b8\ub77c\ub137 \ubaa8\ub450\uc5d0\uc11c \uc811\uc18d\ud560 \uc218 \uc788\ub2e4\uba74 \uc5ec\uae30\uc5d0 \uacf5\uc2dd\uc801\uc778 \uc8fc\uc18c\ub97c \uc785\ub825\ud558\uace0 DNS\ub97c \uc124\uc815\ud574\uc11c \uc778\ud2b8\ub77c\ub137 \uc0ac\uc6a9\uc790\ub4e4\ub3c4 \uacf5\uac1c \uc8fc\uc18c\ub97c \uc0ac\uc6a9\ud560 \uc218 \uc788\uac8c \ud574\uc57c\ud560 \uac83\uc785\ub2c8\ub2e4. \n+\ub9cc\uc57d \uc5ec\ub7ec\ubd84\uc758 \uc0ac\uc774\ud2b8\uac00 \uc778\ud130\ub137\uacfc \uc778\ud2b8\ub77c\ub137 \ubaa8\ub450\uc5d0\uc11c \uc811\uc18d\ud560 \uc218 \uc788\ub2e4\uba74 \uc5ec\uae30\uc5d0 \uacf5\uc2dd\uc801\uc778 \uc8fc\uc18c\ub97c \uc785\ub825\ud558\uace0 DNS\ub97c \uc124\uc815\ud574\uc11c \uc778\ud2b8\ub77c\ub137 \uc0ac\uc6a9\uc790\ub4e4\ub3c4 \uacf5\uac1c \uc8fc\uc18c\ub97c \uc0ac\uc6a9\ud560 \uc218 \uc788\uac8c \ud574\uc57c\ud560 \uac83\uc785\ub2c8\ub2e4.\n \ub9cc\uc77c \uc8fc\uc18c\uac00 \uc62c\ubc14\ub974\uc9c0 \uc54a\ub2e4\uba74 \ube0c\ub77c\uc6b0\uc800\uc5d0\uc11c URL\uc744 \ubcc0\uacbd\ud558\uc5ec \ub2e4\ub978 \uac12\uc73c\ub85c \uc124\uce58\ub97c \ub2e4\uc2dc \uc2dc\uc791 \ud558\uc2ed\uc2dc\uc694.';\n $string['pathsunsecuredataroot'] = 'Dataroot \uacbd\ub85c\uac00 \uc548\uc804\ud558\uc9c0 \uc54a\uc74c';\n $string['pathswrongadmindir'] = '\uad00\ub9ac\uc790 \uacbd\ub85c\uac00 \uc874\uc7ac\ud558\uc9c0 \uc54a\uc74c';\n", "diff --git a/install/lang/lv/install.php b/install/lang/lv/install.php\nindex 965a708189c..22c343603a8 100644\n--- a/install/lang/lv/install.php\n+++ b/install/lang/lv/install.php\n@@ -43,16 +43,16 @@ $string['installation'] = 'Instal\u0113\u0161ana';\n $string['langdownloaderror'] = '\u201c{$a}\u201d valodas pakotne diem\u017e\u0113l netika instal\u0113ta. Instal\u0113\u0161ana tiks turpin\u0101ta ang\u013cu valod\u0101.';\n $string['memorylimithelp'] = '<p>Pa\u0161laik iestat\u012btais PHP atmi\u0146as apjoma ierobe\u017eojums j\u016bsu server\u012b ir {$a}.</p>\n \n-<p>Sist\u0113m\u0101 Moodle tas v\u0113l\u0101k var izrais\u012bt atmi\u0146as izmanto\u0161anas probl\u0113mas, it \u012bpa\u0161i tad, \n+<p>Sist\u0113m\u0101 Moodle tas v\u0113l\u0101k var izrais\u012bt atmi\u0146as izmanto\u0161anas probl\u0113mas, it \u012bpa\u0161i tad,\n    ja b\u016bsit iesp\u0113jojis lielu skaitu modu\u013cu un/vai lietot\u0101ju.</p>\n \n <p>Ja iesp\u0113jams, ieteicams konfigur\u0113t PHP ar liel\u0101ku maksim\u0101l\u0101s atmi\u0146as apjomu, piem\u0113ram, 40\u00a0MB. Ir vair\u0101ki veidi, k\u0101 to var izdar\u012bt, piem\u0113ram:</p>\n <ol>\n-<li>Ja iesp\u0113jams, atk\u0101rtoti kompil\u0113jiet PHP, izmantojot <i>--enable-memory-limit</i>.  \n+<li>Ja iesp\u0113jams, atk\u0101rtoti kompil\u0113jiet PHP, izmantojot <i>--enable-memory-limit</i>.\n     \u0160\u0101d\u0101 gad\u012bjum\u0101 sist\u0113ma Moodle atmi\u0146as apjoma ierobe\u017eojumu var\u0113s iestat\u012bt autom\u0101tiski.</li>\n <li>Ja jums ir piek\u013cuve php.ini failam, varat main\u012bt taj\u0101 eso\u0161o parametra <b>memory_limit</b> iestat\u012bjumu, piem\u0113ram, uz 40 MB.  Ja jums nav piek\u013cuves \u0161im failam, pal\u016bdziet to izdar\u012bt administratoram.</li>\n <li>Da\u017eos PHP serveros Moodle direktorij\u0101 var izveidot failu .htaccess, kur\u0101 ir \u0161\u0101da rinda:    <p><blockquote>php_value memory_limit 40M</blockquote></p>\n-    <p>Tom\u0113r da\u017eos serveros tas ne\u013caus darboties <b>nevienai</b> PHP lapai \n+    <p>Tom\u0113r da\u017eos serveros tas ne\u013caus darboties <b>nevienai</b> PHP lapai\n (atverot \u0161\u012bs lapas, tiks par\u0101d\u012bti k\u013c\u016bdas zi\u0146ojumi), un fails .htaccess b\u016bs j\u0101no\u0146em.</p></li>\n </ol>';\n $string['phpversion'] = 'PHP versija';\n@@ -61,17 +61,17 @@ $string['phpversionhelp'] = '<p>Sist\u0113m\u0101 Moodle j\u0101izmanto PHP, kuras versija i\n <p>Ir j\u0101jaunina PHP vai j\u0101p\u0101riet uz resursdatoru, kur\u0101 tiek izmantota jaun\u0101ka PHP versija.</p>\n (Ja PHP versija ir 5.0.x, var ar\u012b atk\u0101pties uz versiju 4.4.x)</p>';\n $string['welcomep10'] = '{$a->installername} ({$a->installerversion})';\n-$string['welcomep20'] = 'J\u016bs redzat \u0161o lapu, jo esat veiksm\u012bgi instal\u0113jis un \n+$string['welcomep20'] = 'J\u016bs redzat \u0161o lapu, jo esat veiksm\u012bgi instal\u0113jis un\n     palaidis sav\u0101 dator\u0101 pakotni <strong>{$a->packname} {$a->packversion}</strong>. Apsveicam!';\n-$string['welcomep30'] = '\u0160aj\u0101 <strong>{$a->installername}</strong> laidien\u0101 ir iek\u013cautas lietojumprogrammas, \n+$string['welcomep30'] = '\u0160aj\u0101 <strong>{$a->installername}</strong> laidien\u0101 ir iek\u013cautas lietojumprogrammas,\n     kas paredz\u0113tas, lai izveidotu vidi, kur\u0101 darbosies sist\u0113ma <strong>Moodle</strong>, proti:';\n $string['welcomep40'] = 'Pakotn\u0113 ir iek\u013cauta ar\u012b sist\u0113ma <strong>Moodle {$a->moodlerelease} ({$a->moodleversion})</strong>.';\n-$string['welcomep50'] = 'Visu \u0161\u012bs pakotnes lietojumprogrammu izmanto\u0161anu regul\u0113 attiec\u012bgo \n-    licen\u010du nosac\u012bjumi. Vis\u0101 <strong>{$a->installername}</strong> pakotn\u0113 ir iek\u013cauts \n-    <a href=\"http://www.opensource.org/docs/definition_plain.html\">atkl\u0101tais pirmkods</a>, un t\u0101 tiek izplat\u012bta \n+$string['welcomep50'] = 'Visu \u0161\u012bs pakotnes lietojumprogrammu izmanto\u0161anu regul\u0113 attiec\u012bgo\n+    licen\u010du nosac\u012bjumi. Vis\u0101 <strong>{$a->installername}</strong> pakotn\u0113 ir iek\u013cauts\n+    <a href=\"http://www.opensource.org/docs/definition_plain.html\">atkl\u0101tais pirmkods</a>, un t\u0101 tiek izplat\u012bta\n     saska\u0146\u0101 ar <a href=\"http://www.gnu.org/copyleft/gpl.html\">GPL</a> licences nosac\u012bjumiem.';\n-$string['welcomep60'] = 'N\u0101kamaj\u0101s lap\u0101s tiks sniegti vienk\u0101r\u0161i nor\u0101d\u012bjumi par to, k\u0101 \n-    dator\u0101 konfigur\u0113t un iestat\u012bt sist\u0113mu <strong>Moodle</strong>. Varat akcept\u0113t noklus\u0113juma \n+$string['welcomep60'] = 'N\u0101kamaj\u0101s lap\u0101s tiks sniegti vienk\u0101r\u0161i nor\u0101d\u012bjumi par to, k\u0101\n+    dator\u0101 konfigur\u0113t un iestat\u012bt sist\u0113mu <strong>Moodle</strong>. Varat akcept\u0113t noklus\u0113juma\n     iestat\u012bjumus vai varat tos main\u012bt, lai piel\u0101gotu sav\u0101m vajadz\u012bb\u0101m.';\n $string['welcomep70'] = 'Noklik\u0161\u0137iniet uz pogas T\u0101l\u0101k, lai turpin\u0101tu sist\u0113mas <strong>Moodle</strong> instal\u0113\u0161anu.';\n $string['wwwroot'] = 'T\u012bmek\u013ca adrese';\n", "diff --git a/install/lang/mk/install.php b/install/lang/mk/install.php\nindex c38634e0fda..e77ca05371d 100644\n--- a/install/lang/mk/install.php\n+++ b/install/lang/mk/install.php\n@@ -42,16 +42,16 @@ $string['installation'] = '\u0418\u043d\u0441\u0442\u0430\u043b\u0430\u0446\u0438\u0458\u0430';\n $string['langdownloaderror'] = '\u0417\u0430 \u0436\u0430\u043b, \u0458\u0430\u0437\u0438\u043a\u043e\u0442 \"{$a}\" \u043d\u0435 \u0431\u0435\u0448\u0435 \u0438\u043d\u0441\u0442\u0430\u043b\u0438\u0440\u0430\u043d. \u0418\u043d\u0441\u0442\u0430\u043b\u0430\u0446\u0438\u0441\u043a\u0438\u043e\u0442 \u043f\u0440\u043e\u0446\u0435\u0441 \u045c\u0435 \u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438 \u043d\u0430 \u0430\u043d\u0433\u043b\u0438\u0441\u043a\u0438.';\n $string['memorylimithelp'] = '<p>\u041f\u0440\u0430\u0433\u043e\u0442 \u043d\u0430 \u043c\u0435\u043c\u043e\u0440\u0438\u0458\u0430\u0442\u0430 \u043a\u0430\u0458 PHP \u0437\u0430 \u0412\u0430\u0448\u0438\u043e\u0442 \u043a\u043e\u043c\u043f\u0458\u0443\u0442\u0435\u0440 \u043c\u043e\u043c\u0435\u043d\u0442\u0430\u043b\u043d\u043e \u0435 \u043f\u043e\u0434\u0435\u0441\u0435\u043d\u0430 \u043d\u0430 {$a}. </p>\n \n-<p>\u041e\u0432\u0430 \u043c\u043e\u0436\u0435 \u0434\u0430 \u043f\u0440\u0435\u0434\u0438\u0437\u0432\u0438\u043a\u0430 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0438 \u0441\u043e \u043c\u0435\u043c\u043e\u0440\u0438\u0458\u0430\u0442\u0430 \u043f\u043e\u0434\u043e\u0446\u043d\u0430, \n+<p>\u041e\u0432\u0430 \u043c\u043e\u0436\u0435 \u0434\u0430 \u043f\u0440\u0435\u0434\u0438\u0437\u0432\u0438\u043a\u0430 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0438 \u0441\u043e \u043c\u0435\u043c\u043e\u0440\u0438\u0458\u0430\u0442\u0430 \u043f\u043e\u0434\u043e\u0446\u043d\u0430,\n   \u043f\u043e\u0441\u0435\u0431\u043d\u043e \u0430\u043a\u043e \u0438\u043c\u0430\u0442\u0435 \u0433\u043e\u043b\u0435\u043c \u0431\u0440\u043e\u0458 \u043d\u0430 \u043e\u0432\u043e\u0437\u043c\u043e\u0436\u0435\u043d\u0438 \u043c\u043e\u0434\u0443\u043b\u0438 (\u0435\u0434\u0438\u043d\u0438\u0446\u0438) \u0438/\u0438\u043b\u0438 \u0433\u043e\u043b\u0435\u043c \u0431\u0440\u043e\u0458 \u043d\u0430 \u043a\u043e\u0440\u0438\u0441\u043d\u0438\u0446\u0438.</p>\n \n <p>\u0412\u0438 \u043f\u0440\u0435\u043f\u043e\u0440\u0430\u0447\u0443\u0432\u0430\u043c\u0435 \u0434\u0430 \u0433\u043e \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0438\u0440\u0430\u0442\u0435 PHP \u0441\u043e \u043d\u0430\u0458\u0433\u043e\u043b\u0435\u043c \u043c\u043e\u0436\u0435\u043d \u043f\u0440\u0430\u0433 \u043d\u0430 \u043c\u0435\u043c\u043e\u0440\u0438\u0458\u0430, \u043a\u0430\u043a\u043e \u0448\u0442\u043e \u0435 16\u041c.\n    \u0415\u0432\u0435 \u043d\u0435\u043a\u043e\u043b\u043a\u0443 \u043d\u0430\u0447\u0438\u043d\u0438 \u0437\u0430 \u0434\u0430 \u0433\u043e \u043f\u043e\u0441\u0442\u0438\u0433\u043d\u0435\u0442\u0435 \u0442\u043e\u0430 : </p>\n <ol>\n-<li>\u0410\u043a\u043e \u0441\u0442\u0435 \u0441\u043f\u043e\u0441\u043e\u0431\u0435\u043d, \u043f\u043e\u0432\u0442\u043e\u0440\u043d\u043e \u043a\u043e\u043c\u043f\u0430\u0458\u043b\u0438\u0440\u0430\u0458\u0442\u0435 PHP \u0441\u043e<i>--enable-memory-limit</i>.  \n+<li>\u0410\u043a\u043e \u0441\u0442\u0435 \u0441\u043f\u043e\u0441\u043e\u0431\u0435\u043d, \u043f\u043e\u0432\u0442\u043e\u0440\u043d\u043e \u043a\u043e\u043c\u043f\u0430\u0458\u043b\u0438\u0440\u0430\u0458\u0442\u0435 PHP \u0441\u043e<i>--enable-memory-limit</i>.\n     \u041e\u0432\u0430 \u045c\u0435 \u043e\u0432\u043e\u0437\u043c\u043e\u0436\u0438 \u043d\u0430 Moodle \u0441\u0430\u043c \u0434\u0430 \u0433\u043e \u043f\u043e\u0441\u0442\u0430\u0432\u0438 \u043f\u0440\u0430\u0433\u043e\u0442 \u043d\u0430 \u043c\u0435\u043c\u043e\u0440\u0438\u0458\u0430\u0442\u0430. </li>\n-<li> \u0410\u043a\u043e \u0438\u043c\u0430\u0442\u0435 \u043f\u0440\u0438\u0441\u0442\u0430\u043f \u0434\u043e \u0412\u0430\u0448\u0430\u0442\u0430 \u0434\u0430\u0442\u043e\u0442\u0435\u043a\u0430 php.ini, \u043c\u043e\u0436\u0435\u0442\u0435 \u0434\u0430 \u0433\u043e \u043f\u0440\u043e\u043c\u0435\u043d\u0438\u0442\u0435 <b>memory_limit</b> \n-    \u043d\u0430 16\u041c. \u0412\u043e \u0441\u043f\u0440\u043e\u0442\u0438\u0432\u043d\u043e, \u0430\u043a\u043e \u043d\u0435\u043c\u0430\u0442\u0435 \u043f\u0440\u0438\u0441\u0442\u0430\u043f, \u043c\u043e\u0436\u0435\u0431\u0438 \u045c\u0435 \u0431\u0438\u0434\u0435\u0442\u0435 \u0441\u043f\u043e\u0441\u043e\u0431\u043d\u0438 \n+<li> \u0410\u043a\u043e \u0438\u043c\u0430\u0442\u0435 \u043f\u0440\u0438\u0441\u0442\u0430\u043f \u0434\u043e \u0412\u0430\u0448\u0430\u0442\u0430 \u0434\u0430\u0442\u043e\u0442\u0435\u043a\u0430 php.ini, \u043c\u043e\u0436\u0435\u0442\u0435 \u0434\u0430 \u0433\u043e \u043f\u0440\u043e\u043c\u0435\u043d\u0438\u0442\u0435 <b>memory_limit</b>\n+    \u043d\u0430 16\u041c. \u0412\u043e \u0441\u043f\u0440\u043e\u0442\u0438\u0432\u043d\u043e, \u0430\u043a\u043e \u043d\u0435\u043c\u0430\u0442\u0435 \u043f\u0440\u0438\u0441\u0442\u0430\u043f, \u043c\u043e\u0436\u0435\u0431\u0438 \u045c\u0435 \u0431\u0438\u0434\u0435\u0442\u0435 \u0441\u043f\u043e\u0441\u043e\u0431\u043d\u0438\n     \u0434\u0430 \u0433\u043e \u0437\u0430\u043c\u043e\u043b\u0438\u0442\u0435 \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u043e\u0442 \u0434\u0430 \u0458\u0430 \u0437\u0430\u0432\u0440\u0448\u0438 \u043e\u0432\u0430\u0430 \u0440\u0430\u0431\u043e\u0442\u0430.  </li>\n <li>\u041d\u0430 \u043d\u0435\u043a\u043e\u0438 PHP \u0441\u0435\u0440\u0432\u0435\u0440\u0438, \u043c\u043e\u0436\u0435\u0442\u0435 \u0434\u0430 \u043a\u0440\u0435\u0438\u0440\u0430\u0442\u0435 \u0434\u0430\u0442\u043e\u0442\u0435\u043a\u0430 .htaccess \u0432\u043e \u0434\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u0443\u043c\u043e\u0442 \u043d\u0430 Moodle,\n     \u043a\u043e\u0458\u0430 \u0433\u0438 \u0441\u043e\u0434\u0440\u0436\u0438 \u0441\u043b\u0435\u0434\u043d\u0438\u0432\u0435 \u043b\u0438\u043d\u0438\u0438 :\n", "diff --git a/install/lang/mn/install.php b/install/lang/mn/install.php\nindex 8a7a3c7933b..1098624aee5 100644\n--- a/install/lang/mn/install.php\n+++ b/install/lang/mn/install.php\n@@ -60,7 +60,7 @@ $string['welcomep10'] = '{$a->installername} ({$a->installerversion})';\n $string['welcomep20'] = '\u0422\u0430 <strong>{$a->packname} {$a->packversion}</strong> \u0431\u0430\u0433\u0446\u044b\u0433 \u043a\u043e\u043c\u043f\u044c\u044e\u0442\u0435\u0440 \u0434\u044d\u044d\u0440\u044d\u044d \u0430\u043c\u0436\u0438\u043b\u0442\u0442\u0430\u0439 \u0441\u0443\u0443\u043b\u0433\u0430\u0436 \u0430\u0436\u0438\u043b\u043b\u0443\u0443\u043b\u0441\u0430\u043d \u0442\u0443\u043b \u044d\u043d\u044d \u0445\u0443\u0443\u0434\u0441\u044b\u0433 \u0445\u0430\u0440\u0436 \u0431\u0430\u0439\u043d\u0430. \u0411\u0430\u044f\u0440 \u0445\u04af\u0440\u0433\u044d\u0435!';\n $string['welcomep30'] = '<strong>{$a->installername}</strong> -\u043d\u0438\u0439 \u044d\u043d\u044d \u0445\u0443\u0432\u0438\u043b\u0431\u0430\u0440 \u043d\u044c <strong>Moo\u0434\u043b</strong> \u0430\u0436\u0438\u043b\u043b\u0430\u0445 \u043e\u0440\u0447\u043d\u044b\u0433 \u04af\u04af\u0441\u0433\u044d\u0445 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u0443\u0443\u0434 \u0430\u0433\u0443\u0443\u043b\u0441\u0430\u043d, \u0442\u044d\u0434\u0433\u044d\u044d\u0440 \u043d\u044c:';\n $string['welcomep40'] = '\u042d\u043d\u044d \u0431\u0430\u0433\u0446 \u043d\u044c \u043c\u04e9\u043d <strong>Moo\u0434\u043b {$a->moodlerelease} ({$a->moodleversion})</strong>-\u0433 \u0430\u0433\u0443\u0443\u043b\u0441\u0430\u043d.';\n-$string['welcomep50'] = '\u042d\u043d\u044d \u0431\u0430\u0433\u0446 \u0434\u043e\u0442\u043e\u0440\u0445 \u0431\u04af\u0445 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u0443\u0443\u0434 \u043d\u044c \u04e9\u04e9\u0440\u0441\u0434\u0438\u0439\u043d \u043b\u0438\u0437\u0435\u043d\u0446\u0442\u044d\u0439. \u0411\u04af\u0440\u044d\u043d <strong>{$a->installername}</strong> \u0431\u0430\u0433\u0446 \u043d\u044c \n+$string['welcomep50'] = '\u042d\u043d\u044d \u0431\u0430\u0433\u0446 \u0434\u043e\u0442\u043e\u0440\u0445 \u0431\u04af\u0445 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u0443\u0443\u0434 \u043d\u044c \u04e9\u04e9\u0440\u0441\u0434\u0438\u0439\u043d \u043b\u0438\u0437\u0435\u043d\u0446\u0442\u044d\u0439. \u0411\u04af\u0440\u044d\u043d <strong>{$a->installername}</strong> \u0431\u0430\u0433\u0446 \u043d\u044c\n <a href=\"http://www.opensource.org/docs/definition_plain.html\">open source</a>  \u0431\u04e9\u0433\u04e9\u04e9\u0434 <a href=\"http://www.gnu.org/copyleft/gpl.html\">GPL</a> -\u0438\u0439\u043d \u043b\u0438\u0437\u0435\u043d\u0446\u0438\u0439\u043d \u0434\u043e\u0440 \u0442\u04af\u0433\u044d\u044d\u0433\u0434\u0434\u044d\u0433.';\n $string['welcomep60'] = '\u0414\u0430\u0440\u0430\u0430\u0433\u0438\u0439\u043d \u0445\u0443\u0443\u0434\u0441\u0443\u0443\u0434 \u043d\u044c \u043a\u043e\u043c\u043f\u044c\u044e\u0442\u0435\u0440 \u0434\u044d\u044d\u0440\u044d\u044d <strong>Moo\u0434\u043b</strong> \u0442\u043e\u0445\u0438\u0440\u0443\u0443\u043b\u0430\u0445 \u0442\u0430\u0430\u0440\u0443\u0443\u043b\u0430\u0445 \u044d\u043d\u0433\u0438\u0439\u043d \u0430\u043b\u0445\u043c\u0443\u0443\u0434\u044b\u0433 \u0430\u0433\u0443\u0443\u043b\u0441\u0430\u043d \u0431\u0430\u0439\u0433\u0430\u0430. \u0422\u0430 \u0430\u043d\u0445\u043d\u044b \u0443\u0442\u0433\u044b\u043d \u0442\u043e\u0445\u0438\u0440\u0433\u043e\u043e\u043d\u0443\u0443\u0434\u044b\u0433 \u0445\u04af\u043b\u044d\u044d\u043d \u0430\u0432\u0447 \u0431\u043e\u043b\u043d\u043e, \u044d\u0441\u0432\u044d\u043b \u04e9\u04e9\u0440\u0438\u0439\u043d \u0445\u044d\u0440\u044d\u0433\u0446\u044d\u044d\u043d\u0434 \u043d\u0438\u0439\u0446\u04af\u04af\u043b\u044d\u043d \u04e9\u04e9\u0440\u0447\u0438\u043b\u0436 \u0431\u043e\u043b\u043d\u043e.';\n $string['welcomep70'] = '<strong>Moo\u0434\u043b\u044d\u044d</strong> \u0442\u043e\u0445\u0438\u0440\u0443\u0443\u043b\u0430\u0445\u044b\u043d \u0442\u0443\u043b\u0434 \u0434\u043e\u043e\u0440\u0445 \u201c\u04ae\u0440\u0433\u044d\u043b\u0436\u043b\u04af\u04af\u043b\u044d\u0445\u201d \u0442\u043e\u0432\u0447\u0438\u043d \u0434\u044d\u044d\u0440 \u0434\u0430\u0440\u0436 \u0446\u0430\u0430\u0436 \u044f\u0432\u043d\u0430 \u0443\u0443.';\n", "diff --git a/install/lang/nl/admin.php b/install/lang/nl/admin.php\nindex 51e5af81281..f520f3ffe61 100644\n--- a/install/lang/nl/admin.php\n+++ b/install/lang/nl/admin.php\n@@ -36,7 +36,7 @@ $string['cliincorrectvalueerror'] = 'Fout, waarde \"{$a->value}\" voor de optie \"{\n $string['cliincorrectvalueretry'] = 'Foute waarde. Probeer opnieuw';\n $string['clitypevalue'] = 'type waarde';\n $string['clitypevaluedefault'] = 'type waarde, druk op Enter om de standaardwaarde te gebruiken ({$a})';\n-$string['cliunknowoption'] = 'Onherkenbare opties: \n+$string['cliunknowoption'] = 'Onherkenbare opties:\n {$a}\n gebruik --help optie.';\n $string['cliyesnoprompt'] = 'typ j (ja) of n (nee)';\n", "diff --git a/install/lang/no/install.php b/install/lang/no/install.php\nindex 8cbf252f11a..2967290261e 100644\n--- a/install/lang/no/install.php\n+++ b/install/lang/no/install.php\n@@ -51,7 +51,7 @@ $string['memorylimithelp'] = '<p>PHP minnegrensen for serveren din er n\u00e5 satt t\n <p>Dette kan skape minneproblemer for Moodle senere, spesielt hvis du har mange moduler tillatt og/eller mange brukere.</p>\n <p>Vi anbefaler at du konfigurer PHP med en h\u00f8yere grense enn mulig, for eksepmel 40M. Det er flere m\u00e5ter \u00e5 gj\u00f8re dette p\u00e5.:</p>\n <ol>\n-<li>Hvis du har muligheten, rekompiler PHP med<i>--enable-memory-limit</i>.  \n+<li>Hvis du har muligheten, rekompiler PHP med<i>--enable-memory-limit</i>.\n Dette vil tillate Moodle \u00e5 sette minnegrensen selv.</li>\n <li>Hvis du har tilgang til php.ini fila di, kan du endre <b>memory_limit</b> innstillinga der til omtrent 40M. Hvis du ikke har tilgang kan du be administrator gj\u00f8re dette for deg.</li>\n <li>P\u00e5 noen PHP-servere kan du lage en .htaccess fil i Moodlemappen som inneholder denne linjen:\n", "diff --git a/install/lang/pl/install.php b/install/lang/pl/install.php\nindex 281ce0b38f8..a84d0015846 100644\n--- a/install/lang/pl/install.php\n+++ b/install/lang/pl/install.php\n@@ -69,7 +69,7 @@ $string['pathsunsecuredataroot'] = 'Lokalizacja g\u0142\u00f3wnego katalogu danych nie j\n $string['pathswrongadmindir'] = 'Katalog admin nie istnieje';\n $string['phpextension'] = '{$a} rozszerzenie PHP';\n $string['phpversion'] = 'Wersja PHP';\n-$string['phpversionhelp'] = '<p>Moodle wymaga wersji PHP co najmniej 4.3.0 lub 5.1.0 (5.0.x posiada kilka znanych problem\u00f3w).</p> \n+$string['phpversionhelp'] = '<p>Moodle wymaga wersji PHP co najmniej 4.3.0 lub 5.1.0 (5.0.x posiada kilka znanych problem\u00f3w).</p>\n <p>Obecnie jest uruchomiona wersja {$a}</p>\n <p>Musisz uaktualni\u0107 wersj\u0119 PHP lub przenie\u015b\u0107 na host z nowsz\u0105 wersj\u0105 PHP!<br />(W przypadku wersji 5.0.x mo\u017cesz dokona\u0107 downgrade do wersji 4.4.x)</p>';\n $string['welcomep10'] = '{$a->installername} ({$a->installerversion})';\n", "diff --git a/install/lang/pt/admin.php b/install/lang/pt/admin.php\nindex 3dd9059c826..d0cad4598a9 100644\n--- a/install/lang/pt/admin.php\n+++ b/install/lang/pt/admin.php\n@@ -36,8 +36,8 @@ $string['cliincorrectvalueerror'] = 'Erro. Valor \"{$a->value}\" incorreto para \"{\n $string['cliincorrectvalueretry'] = 'Valor incorreto, por favor tente novamente';\n $string['clitypevalue'] = 'valor do tipo';\n $string['clitypevaluedefault'] = 'Escreva o valor. Ou Enter para usar o valor  por omiss\u00e3o ({$a}).';\n-$string['cliunknowoption'] = 'Op\u00e7\u00f5es desconhecidas: \n-{$a} \n+$string['cliunknowoption'] = 'Op\u00e7\u00f5es desconhecidas:\n+{$a}\n Por favor use a op\u00e7\u00e3o --help';\n $string['cliyesnoprompt'] = 'digite s (para sim) ou n (para n\u00e3o)';\n $string['environmentrequireinstall'] = '\u00e9 necess\u00e1rio estar instalada/ativa';\n", "diff --git a/install/lang/pt/install.php b/install/lang/pt/install.php\nindex 277d1dad99c..2315ef6ea06 100644\n--- a/install/lang/pt/install.php\n+++ b/install/lang/pt/install.php\n@@ -69,7 +69,7 @@ $string['pathshead'] = 'Confirmar caminhos';\n $string['pathsrodataroot'] = 'A diretoria dataroot n\u00e3o tem permiss\u00f5es de escrita.';\n $string['pathsroparentdataroot'] = 'O diret\u00f3rio pai ({$a->parent}) n\u00e3o tem permiss\u00f5es de escrita. O programa de instala\u00e7\u00e3o n\u00e3o conseguiu criar o diret\u00f3rio de dados ({$a->dataroot})';\n $string['pathssubadmindir'] = 'Alguns (poucos) alojamentos web usam /admin como um URL especial para permitir o acesso ao control panel ou a outras funcionalidades.\n-Infelizmente esta designa\u00e7\u00e3o entra em conflito com a localiza\u00e7\u00e3o que o Moodle atribui \u00e0s p\u00e1ginas de administra\u00e7\u00e3o. \n+Infelizmente esta designa\u00e7\u00e3o entra em conflito com a localiza\u00e7\u00e3o que o Moodle atribui \u00e0s p\u00e1ginas de administra\u00e7\u00e3o.\n A solu\u00e7\u00e3o passa por renomear o diret\u00f3rio admin da sua instala\u00e7\u00e3o do Moodle e colocando o nome escolhido aqui. Por exemplo:\n <em>moodleadmin</em>. Isto corrige os links de administra\u00e7\u00e3o no Moodle.';\n $string['pathssubdataroot'] = '\u00c9 necess\u00e1rio um local onde o Moodle possa gravar os ficheiros submetidos. Este diret\u00f3rio tem que ter permiss\u00f5es de leitura e ESCRITA pelo servidor web (normalmente \\'nobody\\' ou \\'apache\\'), mas n\u00e3o pode estar acess\u00edvel atrav\u00e9s da web. O programa de instala\u00e7\u00e3o tentar\u00e1 criar este diret\u00f3rio se ele ainda n\u00e3o existir.';\n", "diff --git a/install/lang/ru/install.php b/install/lang/ru/install.php\nindex a425b557f8b..6e23b4c361f 100644\n--- a/install/lang/ru/install.php\n+++ b/install/lang/ru/install.php\n@@ -53,12 +53,12 @@ $string['memorylimithelp'] = '<p>\u0421\u0435\u0439\u0447\u0430\u0441 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0435 \u043f\u0430\u043c\u044f\u0442\n \n <p>\u0418\u0437-\u0437\u0430 \u044d\u0442\u043e\u0433\u043e \u0443 \u0447\u0435\u0440\u0435\u0437 \u043a\u0430\u043a\u043e\u0435-\u0442\u043e \u0432\u0440\u0435\u043c\u044f \u0443 Moodle \u043c\u043e\u0433\u0443\u0442 \u0432\u043e\u0437\u043d\u0438\u043a\u043d\u0443\u0442\u044c \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u044b \u0441 \u043f\u0430\u043c\u044f\u0442\u044c\u044e, \u043e\u0441\u043e\u0431\u0435\u043d\u043d\u043e \u0435\u0441\u043b\u0438 \u0443 \u0412\u0430\u0441 \u0431\u0443\u0434\u0435\u0442 \u043c\u043d\u043e\u0433\u043e \u043c\u043e\u0434\u0443\u043b\u0435\u0439 \u0438/\u0438\u043b\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439.</p>\n \n-<p>\u041c\u044b \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u043c, \u0435\u0441\u043b\u0438 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e, \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u0432 PHP \u0431\u043e\u043b\u0435\u0435 \u0432\u044b\u0441\u043e\u043a\u043e\u0435 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0435 \u043f\u0430\u043c\u044f\u0442\u0438, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 40M. \n+<p>\u041c\u044b \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u043c, \u0435\u0441\u043b\u0438 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e, \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u0432 PHP \u0431\u043e\u043b\u0435\u0435 \u0432\u044b\u0441\u043e\u043a\u043e\u0435 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0435 \u043f\u0430\u043c\u044f\u0442\u0438, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 40M.\n \u042d\u0442\u043e \u043c\u043e\u0436\u043d\u043e \u043f\u043e\u043f\u0440\u043e\u0431\u043e\u0432\u0430\u0442\u044c \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u043c\u0438 \u0441\u043f\u043e\u0441\u043e\u0431\u0430\u043c\u0438:</p>\n <ol>\n-<li>\u0415\u0441\u043b\u0438 \u0435\u0441\u0442\u044c \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c, \u043f\u0435\u0440\u0435\u043a\u043e\u043c\u043f\u0438\u043b\u0438\u0440\u0443\u0451\u0442\u0435 PHP \u0441 \u043a\u043b\u044e\u0447\u043e\u043c <i>--enable-memory-limit</i>. \n+<li>\u0415\u0441\u043b\u0438 \u0435\u0441\u0442\u044c \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c, \u043f\u0435\u0440\u0435\u043a\u043e\u043c\u043f\u0438\u043b\u0438\u0440\u0443\u0451\u0442\u0435 PHP \u0441 \u043a\u043b\u044e\u0447\u043e\u043c <i>--enable-memory-limit</i>.\n \u0412 \u044d\u0442\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 Moodle \u0441\u043c\u043e\u0436\u0435\u0442 \u0441\u0430\u043c\u043e\u0441\u0442\u043e\u044f\u0442\u0435\u043b\u044c\u043d\u0430 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0435 \u043f\u0430\u043c\u044f\u0442\u0438.</li>\n-<li>\u0415\u0441\u043b\u0438 \u0443 \u0412\u0430\u0441 \u0435\u0441\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f \u043a \u0444\u0430\u0439\u043b\u0443 php.ini, \u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 <b>memory_limit</b> \n+<li>\u0415\u0441\u043b\u0438 \u0443 \u0412\u0430\u0441 \u0435\u0441\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f \u043a \u0444\u0430\u0439\u043b\u0443 php.ini, \u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 <b>memory_limit</b>\n \u043d\u0430 \u0447\u0442\u043e-\u043d\u0438\u0431\u0443\u0434\u044c \u0442\u0438\u043f\u0430 40M. \u0415\u0441\u043b\u0438 \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u0443 \u0412\u0430\u0441 \u043d\u0435\u0442, \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0443 \u0412\u0430\u0441 \u0435\u0441\u0442\u044c \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u043f\u043e\u043f\u0440\u043e\u0441\u0438\u0442\u044c \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0430 \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u044d\u0442\u043e.</li>\n <li>\u041d\u0430 \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u0441\u0435\u0440\u0432\u0435\u0440\u0430\u0445 PHP \u043c\u043e\u0436\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u0432 \u043a\u0430\u0442\u0430\u043b\u043e\u0433\u0435 Moodle \u0444\u0430\u0439\u043b .htaccess \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0449\u0438\u0439 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0443\u044e \u0441\u0442\u0440\u043e\u043a\u0443:\n <blockquote><div>php_value memory_limit 40M</div></blockquote>\n", "diff --git a/install/lang/sl/install.php b/install/lang/sl/install.php\nindex aa6aad662b6..1890f964099 100644\n--- a/install/lang/sl/install.php\n+++ b/install/lang/sl/install.php\n@@ -52,18 +52,18 @@ $string['memorylimithelp'] = '<p>Omejitev pomnilnika PHP je trenutno na va\u0161em s\n <p>To lahko povzro\u010di, da bo imel Moodle pozneje te\u017eave s pomnilnikom. \u0160e posebej,\n    \u010de imate vklju\u010denih veliko modulov oziroma veliko uporabnikov.</p>\n \n-<p>Priporo\u010damo, da konfigurirate PHP z vi\u0161jo omejitvijo, \u010de je mo\u017eno npr. 40M.  \n+<p>Priporo\u010damo, da konfigurirate PHP z vi\u0161jo omejitvijo, \u010de je mo\u017eno npr. 40M.\n    To lahko poskusite storiti na ve\u010d na\u010dinov:</p>\n <ol>\n-<li>\u010ce lahko, ponovno prevedite PHP z <i>--enable-memory-limit</i>.  \n+<li>\u010ce lahko, ponovno prevedite PHP z <i>--enable-memory-limit</i>.\n     To bo omogo\u010dilo, da bo Moodle sam nastavil omejitev pomnilnik zase.</li>\n-<li>\u010ce imate dostop do va\u0161e datoteke php.ini, lahko spremenite vrednost <b>memory_limit</b> \n-    v tej datoteki na, recimo, 40M.  \u010ce nimate dostopa, boste morda \n+<li>\u010ce imate dostop do va\u0161e datoteke php.ini, lahko spremenite vrednost <b>memory_limit</b>\n+    v tej datoteki na, recimo, 40M.  \u010ce nimate dostopa, boste morda\n     lahko prosili va\u0161ega skrbnika, da to naredi za vas.</li>\n-<li>Na nekaterih stre\u017enikih PHP lahko ustvarite datoteko .htaccess v imeniku Moodle, \n+<li>Na nekaterih stre\u017enikih PHP lahko ustvarite datoteko .htaccess v imeniku Moodle,\n     ki naj vsebuje to vrstico:\n     <p><blockquote>php_value memory_limit 40M</blockquote></p>\n-    <p>Vendar lahko to prepre\u010di delovanje <b>vseh</b> PHP strani \n+    <p>Vendar lahko to prepre\u010di delovanje <b>vseh</b> PHP strani\n     (ob prikazu strani boste videli napake) in boste morali odstraniti datoteko .htaccess.</p></li>\n </ol>';\n $string['paths'] = 'Poti';\n@@ -84,17 +84,17 @@ $string['phpversionhelp'] = '<p>Moodle zahteva razli\u010dico PHP vsaj 4.3.0 ali 5.1\n <p>Posodobiti in nadgraditi morate PHP ali premakniti program na stre\u017enik s novej\u0161o razli\u010dico PHP!<br />\n (V primeru razli\u010dice 5.0.x lahko namestite tudi razli\u010dico 4.4.x)</p>';\n $string['welcomep10'] = '{$a->installername} ({$a->installerversion})';\n-$string['welcomep20'] = 'To stran vidite, ker ste uspe\u0161no namestili in \n+$string['welcomep20'] = 'To stran vidite, ker ste uspe\u0161no namestili in\n     zagnali paket <strong>{$a->packname} {$a->packversion}</strong> na va\u0161em ra\u010dunalniku. \u010cestitamo!';\n-$string['welcomep30'] = 'Ta razli\u010dica <strong>{$a->installername}</strong> vklju\u010duje aplikacije \n+$string['welcomep30'] = 'Ta razli\u010dica <strong>{$a->installername}</strong> vklju\u010duje aplikacije\n     za ustvarjanje okolja v katerem bo deloval <strong>Moodle</strong> in sicer:';\n $string['welcomep40'] = 'Ta paket vklju\u010duje tudi <strong>Moodle {$a->moodlerelease} ({$a->moodleversion})</strong>.';\n-$string['welcomep50'] = 'Uporabo vseh aplikacij v tem paketu dolo\u010dajo njihove ustrezne \n-    licence. Celoten paket <strong>{$a->installername}</strong> je \n-    <a href=\"http://www.opensource.org/docs/definition_plain.html\">odprta koda</a> in se raz\u0161irja \n+$string['welcomep50'] = 'Uporabo vseh aplikacij v tem paketu dolo\u010dajo njihove ustrezne\n+    licence. Celoten paket <strong>{$a->installername}</strong> je\n+    <a href=\"http://www.opensource.org/docs/definition_plain.html\">odprta koda</a> in se raz\u0161irja\n     pod licenco <a href=\"http://www.gnu.org/copyleft/gpl.html\">GPL</a>.';\n-$string['welcomep60'] = 'Naslednje strani vas bodo popeljale skozi nekaj enostavno sledljivih korakov za \n-    konfiguracijo in nastavitev <strong>Moodle</strong>  na va\u0161em ra\u010dunalniku. Sprejmete lahko privzete \n+$string['welcomep60'] = 'Naslednje strani vas bodo popeljale skozi nekaj enostavno sledljivih korakov za\n+    konfiguracijo in nastavitev <strong>Moodle</strong>  na va\u0161em ra\u010dunalniku. Sprejmete lahko privzete\n     nastavitve ali jih, \u010de tako \u017eelite, spremenite, da bodo ustrezale va\u0161im potrebam.';\n $string['welcomep70'] = 'Kliknite spodnji gumb \"Naprej\" za nadaljevanje nastavitve <strong>Moodle</strong>.';\n $string['wwwroot'] = 'Spletni naslov';\n", "diff --git a/install/lang/sm/install.php b/install/lang/sm/install.php\nindex 3d45937076f..8ff523cde32 100644\n--- a/install/lang/sm/install.php\n+++ b/install/lang/sm/install.php\n@@ -37,21 +37,21 @@ $string['dirroot'] = 'Auala atu i le Moodle';\n $string['installation'] = 'Fa\\'atu/Install';\n $string['memorylimithelp'] = '<p>The PHP memory limit for your server is currently set to {$a}.</p>\n \n-<p>This may cause Moodle to have memory problems later on, especially \n+<p>This may cause Moodle to have memory problems later on, especially\n    if you have a lot of modules enabled and/or a lot of users.\n \n-<p>We recommend that you configure PHP with a higher limit if possible, like 40M.  \n+<p>We recommend that you configure PHP with a higher limit if possible, like 40M.\n    There are several ways of doing this that you can try:\n <ol>\n-<li>If you are able to, recompile PHP with <i>--enable-memory-limit</i>.  \n+<li>If you are able to, recompile PHP with <i>--enable-memory-limit</i>.\n     This will allow Moodle to set the memory limit itself.\n-<li>If you have access to your php.ini file, you can change the <b>memory_limit</b> \n-    setting in there to something like 40M.  If you don\\'t have access you might \n+<li>If you have access to your php.ini file, you can change the <b>memory_limit</b>\n+    setting in there to something like 40M.  If you don\\'t have access you might\n     be able to ask your administrator to do this for you.\n-<li>On some PHP servers you can create a .htaccess file in the Moodle directory \n+<li>On some PHP servers you can create a .htaccess file in the Moodle directory\n     containing this line:\n     <p><blockquote>php_value memory_limit 40M</blockquote></p>\n-    <p>However, on some servers this will prevent <b>all</b> PHP pages from working \n+    <p>However, on some servers this will prevent <b>all</b> PHP pages from working\n     (you will see errors when you look at pages) so you\\'ll have to remove the .htaccess file.\n </ol>';\n $string['phpversion'] = 'Liliuga PHP';\n", "diff --git a/install/lang/sr_cr/install.php b/install/lang/sr_cr/install.php\nindex e313e3ebb6b..73b57885497 100644\n--- a/install/lang/sr_cr/install.php\n+++ b/install/lang/sr_cr/install.php\n@@ -69,8 +69,8 @@ $string['pathsroparentdataroot'] = '\u041d\u0438\u0458\u0435 \u043c\u043e\u0433\u0443\u045b \u0443\u043f\u0438\u0441 \u0443 \u043d\u0430\u0434\u0440\u0435\u0452\n $string['pathssubadmindir'] = '\u0412\u0440\u043b\u043e \u043c\u0430\u043b\u0438 \u0431\u0440\u043e\u0458 \u0432\u0435\u0431 \u0441\u0435\u0440\u0432\u0435\u0440\u0430 \u043a\u043e\u0440\u0438\u0441\u0442\u0438 /admin \u043a\u0430\u043e \u0441\u043f\u0435\u0446\u0438\u0458\u0430\u043b\u043d\u0438 URL \u0437\u0430 \u043f\u0440\u0438\u0441\u0442\u0443\u043f \u0440\u0430\u0437\u043d\u0438\u043c \u043f\u043e\u0434\u0435\u0448\u0430\u0432\u0430\u045a\u0438\u043c\u0430 (\u043a\u043e\u043d\u0442\u0440\u043e\u043b\u043d\u0438 \u043f\u0430\u043d\u0435\u043b \u0438 \u0441\u043b.). \u041d\u0430\u0436\u0430\u043b\u043e\u0441\u0442, \u0442\u043e \u0434\u043e\u0432\u043e\u0434\u0438 \u0434\u043e \u043a\u043e\u043d\u0444\u043b\u0438\u043a\u0442\u0430 \u0441\u0430 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0434\u043d\u043e\u043c \u043b\u043e\u043a\u0430\u0446\u0438\u0458\u043e\u043c \u0437\u0430 \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0441\u043a\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435 \u0443 Moodleu. \u041e\u0432\u0430\u0458 \u043f\u0440\u043e\u0431\u043b\u0435\u043c \u043c\u043e\u0436\u0435\u0442\u0435 \u0440\u0435\u0448\u0438\u0442\u0438 \u0442\u0430\u043a\u043e \u0448\u0442\u043e \u045b\u0435\u0442\u0435 \u043f\u0440\u043e\u043c\u0435\u043d\u0438\u0442\u0438 \u0438\u043c\u0435 \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0441\u043a\u043e\u0433 \u0434\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u0458\u0443\u043c\u0430 \u0443 \u0432\u0430\u0448\u043e\u0458 \u0438\u043d\u0441\u0442\u0430\u043b\u0430\u0446\u0438\u0458\u0438, \u0438 \u043e\u0432\u0434\u0435 \u0443\u043f\u0438\u0441\u0430\u0442\u0438 \u0442\u043e \u043d\u043e\u0432\u043e \u0438\u043c\u0435. \u041d\u0430 \u043f\u0440\u0438\u043c\u0435\u0440 <em>moodleadmin</em>. \u041e\u0432\u043e \u043f\u043e\u0434\u0435\u0448\u0430\u0432\u0430\u045a\u0435 \u045b\u0435 \u043f\u0440\u0435\u043f\u0440\u0430\u0432\u0438\u0442\u0438 \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0441\u043a\u0435 \u043b\u0438\u043d\u043a\u043e\u0432\u0435 \u0443 Moodle \u0441\u0438\u0441\u0442\u0435\u043c\u0443.';\n $string['pathssubdataroot'] = '\u041f\u043e\u0442\u0440\u0435\u0431\u0430\u043d \u0432\u0430\u043c \u0458\u0435 \u043f\u0440\u043e\u0441\u0442\u043e\u0440 \u0433\u0434\u0435 \u045b\u0435 Moodle \u0447\u0443\u0432\u0430\u0442\u0438 \u043f\u043e\u0441\u0442\u0430\u0432\u0459\u0435\u043d\u0435 \u0434\u0430\u0442\u043e\u0442\u0435\u043a\u0435. \u041e\u0432\u0430\u0458 \u0434\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u0458\u0443\u043c \u0442\u0440\u0435\u0431\u0430 \u0434\u0430 \u0431\u0443\u0434\u0435 \u043f\u043e\u0434\u0435\u0448\u0435\u043d \u0442\u0430\u043a\u043e \u0434\u0430 \u0441\u0435 \u043c\u043e\u0436\u0435 \u0447\u0438\u0442\u0430\u0442\u0438 \u0438 \u0443 \u045a\u0435\u0433\u0430 \u0443\u043f\u0438\u0441\u0438\u0432\u0430\u0442\u0438 \u043e\u0434 \u0441\u0442\u0440\u0430\u043d\u0435 \u043a\u043e\u0440\u0438\u0441\u043d\u0438\u043a\u0430 \u0432\u0435\u0431 \u0441\u0435\u0440\u0432\u0435\u0440\u0430 (\u043e\u0431\u0438\u0447\u043d\u043e \\'nobody\\' \u0438\u043b\u0438 \\'apache\\'), \u0430\u043b\u0438 \u0438\u0441\u0442\u043e\u0432\u0440\u0435\u043c\u0435\u043d\u043e \u043c\u043e\u0440\u0430 \u0431\u0438\u0442\u0438 \u0434\u043e\u0441\u0442\u0443\u043f\u0430\u043d \u0434\u0438\u0440\u0435\u043a\u0442\u043d\u043e \u043f\u0440\u0435\u043a\u043e \u0432\u0435\u0431\u0430. \u0423\u043a\u043e\u043b\u0438\u043a\u043e \u043e\u0432\u0430\u0458 \u0434\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u0458\u0443\u043c \u043d\u0435 \u043f\u043e\u0441\u0442\u043e\u0458\u0438 Moodle \u045b\u0435 \u043f\u043e\u043a\u0443\u0448\u0430\u0442\u0438 \u0434\u0430 \u0433\u0430 \u043a\u0440\u0435\u0438\u0440\u0430 \u0442\u043e\u043a\u043e\u043c \u0438\u043d\u0441\u0442\u0430\u043b\u0430\u0446\u0438\u0458\u0435.';\n $string['pathssubdirroot'] = '\u041f\u0443\u043d\u0430 \u043f\u0443\u0442\u0430\u045a\u0430 \u0434\u043e \u0434\u0438\u0440\u0435\u043a\u0442\u043e\u0442\u0438\u0458\u0443\u043c\u0430 \u0437\u0430 \u0438\u043d\u0441\u0442\u0430\u043b\u0430\u0446\u0438\u0458\u0443 Moodlea.';\n-$string['pathssubwwwroot'] = '\u041f\u0443\u043d\u0430 \u0432\u0435\u0431 \u0430\u0434\u0440\u0435\u0441\u0430 \u043f\u0443\u0442\u0435\u043c \u043a\u043e\u0458\u0435 \u045b\u0435 \u0441\u0435 \u043f\u0440\u0438\u0441\u0442\u0443\u043f\u0430\u0442\u0438 Moodleu. \u041d\u0438\u0458\u0435 \u043c\u043e\u0433\u0443\u045b\u0435 \u043f\u0440\u0438\u0441\u0442\u0443\u043f\u0430\u0442\u0438 Moodleu \u043a\u043e\u0440\u0438\u0441\u0442\u0435\u045b\u0438 \u0432\u0438\u0448\u0435 \u0430\u0434\u0440\u0435\u0441\u0430. \n-\u0410\u043a\u043e \u0432\u0430\u0448 \u0441\u0430\u0458\u0442 \u0438\u043c\u0430 \u0432\u0438\u0448\u0435 \u0458\u0430\u0432\u043d\u0438\u0445 \u0430\u0434\u0440\u0435\u0441\u0430 \u043e\u043d\u0434\u0430 \u043d\u0430 \u0441\u0432\u0438\u043c\u0430 \u043c\u043e\u0440\u0430\u0442\u0435 \u0434\u0430 \u043f\u043e\u0434\u0435\u0441\u0438\u0442\u0435 \u043f\u0435\u0440\u043c\u0430\u043d\u0435\u043d\u0442\u043d\u0435 \u0440\u0435\u0434\u0438\u0440\u0435\u043a\u0446\u0438\u0458\u0435 \u043e\u0441\u0438\u043c \u043d\u0430 \u043e\u0432\u043e\u0458. \n+$string['pathssubwwwroot'] = '\u041f\u0443\u043d\u0430 \u0432\u0435\u0431 \u0430\u0434\u0440\u0435\u0441\u0430 \u043f\u0443\u0442\u0435\u043c \u043a\u043e\u0458\u0435 \u045b\u0435 \u0441\u0435 \u043f\u0440\u0438\u0441\u0442\u0443\u043f\u0430\u0442\u0438 Moodleu. \u041d\u0438\u0458\u0435 \u043c\u043e\u0433\u0443\u045b\u0435 \u043f\u0440\u0438\u0441\u0442\u0443\u043f\u0430\u0442\u0438 Moodleu \u043a\u043e\u0440\u0438\u0441\u0442\u0435\u045b\u0438 \u0432\u0438\u0448\u0435 \u0430\u0434\u0440\u0435\u0441\u0430.\n+\u0410\u043a\u043e \u0432\u0430\u0448 \u0441\u0430\u0458\u0442 \u0438\u043c\u0430 \u0432\u0438\u0448\u0435 \u0458\u0430\u0432\u043d\u0438\u0445 \u0430\u0434\u0440\u0435\u0441\u0430 \u043e\u043d\u0434\u0430 \u043d\u0430 \u0441\u0432\u0438\u043c\u0430 \u043c\u043e\u0440\u0430\u0442\u0435 \u0434\u0430 \u043f\u043e\u0434\u0435\u0441\u0438\u0442\u0435 \u043f\u0435\u0440\u043c\u0430\u043d\u0435\u043d\u0442\u043d\u0435 \u0440\u0435\u0434\u0438\u0440\u0435\u043a\u0446\u0438\u0458\u0435 \u043e\u0441\u0438\u043c \u043d\u0430 \u043e\u0432\u043e\u0458.\n \u0410\u043a\u043e \u0458\u0435 \u0432\u0430\u0448 \u0441\u0430\u0458\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u0430\u043d \u0441\u0430 \u0438\u043d\u0442\u0435\u0440\u043d\u0435\u0442\u0430 \u0430\u043b\u0438 \u0438 \u0438\u0437 \u0438\u043d\u0442\u0440\u0430\u043d\u0435\u0442 \u043e\u043a\u0440\u0443\u0436\u0435\u045a\u0430 \u043e\u0432\u0434\u0435 \u0443\u043f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435 \u0458\u0430\u0432\u043d\u0443 \u0430\u0434\u0440\u0435\u0441\u0443 \u0438 \u043f\u043e\u0434\u0435\u0441\u0438\u0442\u0435 DNS \u0442\u0430\u043a\u043e \u0434\u0430 \u0438 \u0438\u043d\u0442\u0440\u0430\u043d\u0435\u0442 \u043a\u043e\u0440\u0438\u0441\u043d\u0438\u0446\u0438 \u043c\u043e\u0433\u0443 \u0434\u0430 \u043a\u043e\u0440\u0438\u0441\u0442\u0435 \u0458\u0430\u0432\u043d\u0443 \u0430\u0434\u0440\u0435\u0441\u0443.\n \u0410\u043a\u043e \u0458\u0435 \u0430\u0434\u0440\u0435\u0441\u0430 \u043d\u0435\u0442\u0430\u0447\u043d\u0430 \u043f\u0440\u043e\u043c\u0435\u043d\u0438\u0442\u0435 URL \u0443 \u0441\u0432\u043e\u043c \u0432\u0435\u0431 \u0447\u0438\u0442\u0430\u0447\u0443 \u0434\u0430 \u0431\u0438\u0441\u0442\u0435 \u043f\u043e\u043d\u043e\u0432\u043e \u043f\u043e\u043a\u0440\u0435\u043d\u0443\u043b\u0438 \u0438\u043d\u0441\u0442\u0430\u043b\u0430\u0446\u0438\u0458\u0443 \u0441\u0430 \u0434\u0440\u0443\u0433\u0430\u0447\u0438\u0458\u043e\u043c \u0432\u0440\u0435\u0434\u043d\u043e\u0448\u045b\u0443.';\n $string['pathsunsecuredataroot'] = 'Dataroot \u043b\u043e\u043a\u0430\u0446\u0438\u0458\u0430 \u043d\u0438\u0458\u0435 \u0431\u0435\u0437\u0431\u0435\u0434\u043d\u0430';\n", "diff --git a/install/lang/sr_lt/install.php b/install/lang/sr_lt/install.php\nindex 684855d0f0a..78d90322b10 100644\n--- a/install/lang/sr_lt/install.php\n+++ b/install/lang/sr_lt/install.php\n@@ -69,8 +69,8 @@ $string['pathsroparentdataroot'] = 'Nije mogu\u0107 upis u nadre\u0111eni direktorijum (\n $string['pathssubadmindir'] = 'Vrlo mali broj veb servera koristi /admin kao specijalni URL za pristup raznim pode\u0161avanjima (kontrolni panel i sl.). Na\u017ealost, to dovodi do konflikta sa standardnom lokacijom za administratorske stranice u Moodleu. Ovaj problem mo\u017eete re\u0161iti tako \u0161to \u0107ete promeniti ime administratorskog direktorijuma u va\u0161oj instalaciji, i ovde upisati to novo ime. Na primer <em>moodleadmin</em>. Ovo pode\u0161avanje \u0107e prepraviti administratorske linkove u Moodle sistemu.';\n $string['pathssubdataroot'] = 'Potreban vam je prostor gde \u0107e Moodle \u010duvati postavljene datoteke. Ovaj direktorijum treba da bude pode\u0161en tako da se mo\u017ee \u010ditati i u njega upisivati od strane korisnika veb servera (obi\u010dno \\'nobody\\' ili \\'apache\\'), ali istovremeno mora biti dostupan direktno preko veba. Ukoliko ovaj direktorijum ne postoji Moodle \u0107e poku\u0161ati da ga kreira tokom instalacije.';\n $string['pathssubdirroot'] = 'Puna putanja do direktotijuma za instalaciju Moodlea.';\n-$string['pathssubwwwroot'] = 'Puna veb adresa putem koje \u0107e se pristupati Moodleu. Nije mogu\u0107e pristupati Moodleu koriste\u0107i vi\u0161e adresa. \n-Ako va\u0161 sajt ima vi\u0161e javnih adresa onda na svima morate da podesite permanentne redirekcije osim na ovoj. \n+$string['pathssubwwwroot'] = 'Puna veb adresa putem koje \u0107e se pristupati Moodleu. Nije mogu\u0107e pristupati Moodleu koriste\u0107i vi\u0161e adresa.\n+Ako va\u0161 sajt ima vi\u0161e javnih adresa onda na svima morate da podesite permanentne redirekcije osim na ovoj.\n Ako je va\u0161 sajt dostupan sa interneta ali i iz intranet okru\u017eenja ovde upotrebite javnu adresu i podesite DNS tako da i intranet korisnici mogu da koriste javnu adresu.\n Ako je adresa neta\u010dna promenite URL u svom veb \u010dita\u010du da biste ponovo pokrenuli instalaciju sa druga\u010dijom vredno\u0161\u0107u.';\n $string['pathsunsecuredataroot'] = 'Dataroot lokacija nije bezbedna';\n", "diff --git a/install/lang/ta/install.php b/install/lang/ta/install.php\nindex 2fb10728fe7..3b0ff5d48fa 100644\n--- a/install/lang/ta/install.php\n+++ b/install/lang/ta/install.php\n@@ -42,21 +42,21 @@ $string['installation'] = 'Installation';\n $string['langdownloaderror'] = 'Unfortunately the language \"{$a}\" was not installed. The installation process will continue in English.';\n $string['memorylimithelp'] = '<p>The PHP memory limit for your server is currently set to {$a}.</p>\n \n-<p>This may cause Moodle to have memory problems later on, especially \n+<p>This may cause Moodle to have memory problems later on, especially\n    if you have a lot of modules enabled and/or a lot of users.</p>\n \n-<p>We recommend that you configure PHP with a higher limit if possible, like 40M.  \n+<p>We recommend that you configure PHP with a higher limit if possible, like 40M.\n    There are several ways of doing this that you can try:</p>\n <ol>\n-<li>If you are able to, recompile PHP with <i>--enable-memory-limit</i>.  \n+<li>If you are able to, recompile PHP with <i>--enable-memory-limit</i>.\n     This will allow Moodle to set the memory limit itself.</li>\n-<li>If you have access to your php.ini file, you can change the <b>memory_limit</b> \n-    setting in there to something like 40M.  If you don\\'t have access you might \n+<li>If you have access to your php.ini file, you can change the <b>memory_limit</b>\n+    setting in there to something like 40M.  If you don\\'t have access you might\n     be able to ask your administrator to do this for you.</li>\n-<li>On some PHP servers you can create a .htaccess file in the Moodle directory \n+<li>On some PHP servers you can create a .htaccess file in the Moodle directory\n     containing this line:\n     <p><blockquote>php_value memory_limit 40M</blockquote></p>\n-    <p>However, on some servers this will prevent <b>all</b> PHP pages from working \n+    <p>However, on some servers this will prevent <b>all</b> PHP pages from working\n     (you will see errors when you look at pages) so you\\'ll have to remove the .htaccess file.</p></li>\n </ol>';\n $string['phpversion'] = '\u0baa\u0bbf\u0b8e\u0b9a\u0bcd\u0baa\u0bbf \u0baa\u0ba4\u0bbf\u0baa\u0bcd\u0baa\u0bc1';\n@@ -65,17 +65,17 @@ $string['phpversionhelp'] = '<p>Moodle requires a PHP version of at least 4.3.0\n <p>You must upgrade PHP or move to a host with a newer version of PHP!<br/>\n (In case of 5.0.x you could also downgrade to 4.4.x version)</p>';\n $string['welcomep10'] = '{$a->installername} ({$a->installerversion})';\n-$string['welcomep20'] = 'You are seeing this page because you have successfully installed and \n+$string['welcomep20'] = 'You are seeing this page because you have successfully installed and\n     launched the <strong>{$a->packname} {$a->packversion}</strong> package in your computer. Congratulations!';\n-$string['welcomep30'] = 'This release of the <strong>{$a->installername}</strong> includes the applications \n+$string['welcomep30'] = 'This release of the <strong>{$a->installername}</strong> includes the applications\n     to create an environment in which <strong>Moodle</strong> will operate, namely:';\n $string['welcomep40'] = 'The package also includes <strong>Moodle {$a->moodlerelease} ({$a->moodleversion})</strong>.';\n-$string['welcomep50'] = 'The use of all the applications in this package is governed by their respective \n-    licences. The complete <strong>{$a->installername}</strong> package is \n-    <a href=\"http://www.opensource.org/docs/definition_plain.html\">open source</a> and is distributed \n+$string['welcomep50'] = 'The use of all the applications in this package is governed by their respective\n+    licences. The complete <strong>{$a->installername}</strong> package is\n+    <a href=\"http://www.opensource.org/docs/definition_plain.html\">open source</a> and is distributed\n     under the <a href=\"http://www.gnu.org/copyleft/gpl.html\">GPL</a> license.';\n-$string['welcomep60'] = 'The following pages will lead you through some easy to follow steps to \n-    configure and set up <strong>Moodle</strong> on your computer. You may accept the default \n+$string['welcomep60'] = 'The following pages will lead you through some easy to follow steps to\n+    configure and set up <strong>Moodle</strong> on your computer. You may accept the default\n     settings or, optionally, amend them to suit your own needs.';\n $string['welcomep70'] = 'Click the \"Next\" button below to continue with the set up of <strong>Moodle</strong>.';\n $string['wwwroot'] = '\u0b87\u0ba3\u0bc8\u0baf \u0bae\u0bc1\u0b95\u0bb5\u0bb0\u0bbf';\n", "diff --git a/install/lang/ta_lk/install.php b/install/lang/ta_lk/install.php\nindex a13f78bc161..a54ee57f00e 100644\n--- a/install/lang/ta_lk/install.php\n+++ b/install/lang/ta_lk/install.php\n@@ -55,7 +55,7 @@ $string['memorylimithelp'] = '<p>\u0b89\u0b99\u0bcd\u0b95\u0bb3\u0bc1\u0b9f\u0bc8\u0baf \u0b9a\u0bc7\u0bb5\u0bc8\u0baf\u0b95\n <li>\u0b9a\u0bbf\u0bb2 PHP \u0b9a\u0bc7\u0bb5\u0bc8\u0baf\u0b95\u0b99\u0bcd\u0b95\u0bb3\u0bbf\u0bb2\u0bcd \u0ba8\u0bc0\u0b99\u0bcd\u0b95\u0bb3\u0bcd \u0b87\u0ba8\u0bcd\u0ba4 \u0bb5\u0bb0\u0bbf\u0baf\u0bc8\u0b95\u0bcd \u0b95\u0bca\u0ba3\u0bcd\u0b9f\u0bbf\u0bb0\u0bc1\u0b95\u0bcd\u0b95\u0bbf\u0ba9\u0bcd\u0bb1 Moodle \u0b95\u0bcb\u0baa\u0bcd\u0baa\u0bc1\u0ba4\u0bcd \u0ba4\u0bca\u0b95\u0bc1\u0ba4\u0bbf\u0baf\u0bbf\u0bb2\u0bc1\u0bb3\u0bcd\u0bb3 \u0b92\u0bb0\u0bc1 .htaccess \u0b95\u0bcb\u0baa\u0bcd\u0baa\u0bc8 \u0b89\u0bb0\u0bc1\u0bb5\u0bbe\u0b95\u0bcd\u0b95 \u0bae\u0bc1\u0b9f\u0bbf\u0b95\u0bbf\u0bb1\u0ba4\u0bc1.\n \n <p><blockquote>php_\u0baa\u0bc6\u0bb1\u0bc1\u0bae\u0ba4\u0bbf \u0ba8\u0bbf\u0ba9\u0bc8\u0bb5\u0b95_\u0bb5\u0bb0\u0bc8\u0baf\u0bb1\u0bc8 40M</blockquote></p>\n-  \n+\n <p>\u0b8e\u0baa\u0bcd\u0baa\u0b9f\u0bbf\u0baf\u0bbe\u0baf\u0bbf\u0ba9\u0bc1\u0bae\u0bcd, \u0b9a\u0bbf\u0bb2 \u0b9a\u0bc7\u0bb5\u0bc8\u0baf\u0b95\u0b99\u0bcd\u0b95\u0bb3\u0bbf\u0bb2\u0bcd \u0b87\u0ba4\u0bc1 \u0bb5\u0bc7\u0bb2\u0bc8 \u0b9a\u0bc6\u0baf\u0bcd\u0bb5\u0ba4\u0bbf\u0bb2\u0bbf\u0bb0\u0bc1\u0ba8\u0bcd\u0ba4\u0bc1 <b>\u0b85\u0ba9\u0bc8\u0ba4\u0bcd\u0ba4\u0bc1</b> PHP \u0baa\u0b95\u0bcd\u0b95\u0b99\u0bcd\u0b95\u0bb3\u0bc8 \u0ba4\u0b9f\u0bc1\u0b95\u0bcd\u0b95\u0bc1\u0bae\u0bcd(\u0ba8\u0bc0\u0b99\u0bcd\u0b95\u0bb3\u0bcd \u0baa\u0b95\u0bcd\u0b95\u0b99\u0bcd\u0b95\u0bb3\u0bc8 \u0baa\u0bbe\u0bb0\u0bcd\u0b95\u0bcd\u0b95\u0bbf\u0ba9\u0bcd\u0bb1 \u0baa\u0bcb\u0ba4\u0bc1 \u0ba4\u0bb5\u0bb1\u0bc1\u0b95\u0bb3\u0bc8 \u0baa\u0bbe\u0bb0\u0bcd\u0baa\u0bcd\u0baa\u0bc0\u0bb0\u0bcd\u0b95\u0bb3\u0bcd) \u0b86\u0b95\u0bc8\u0baf\u0bbe\u0bb2\u0bcd \u0ba8\u0bc0\u0b99\u0bcd\u0b95\u0bb3\u0bcd .htaccess \u0b95\u0bcb\u0baa\u0bcd\u0baa\u0bc8 \u0ba8\u0bc0\u0b95\u0bcd\u0b95 \u0bb5\u0bc7\u0ba3\u0bcd\u0b9f\u0bbf\u0baf\u0bbf\u0bb0\u0bc1\u0b95\u0bcd\u0b95\u0bc1\u0bae\u0bcd.</p></li>\n </ol>';\n $string['paths'] = '\u0baa\u0bbe\u0ba4\u0bc8\u0b95\u0bb3\u0bcd';\n@@ -68,7 +68,7 @@ $string['phpversionhelp'] = '<p>Moodle \u0b95\u0bc1\u0bb1\u0bc8\u0ba8\u0bcd\u0ba4\u0bb3\u0bb5\u0bc1 \u0b92\u0bb0\u0bc1\n \n (5.0.x \u0b87\u0ba9\u0bcd \u0b9a\u0bae\u0bcd\u0baa\u0bb5\u0ba4\u0bcd\u0ba4\u0bbf\u0bb2\u0bcd,\u0ba8\u0bc0\u0b99\u0bcd\u0b95\u0bb3\u0bcd 4.4.x \u0baa\u0ba4\u0bbf\u0baa\u0bcd\u0baa\u0bbf\u0bb1\u0bcd\u0b95\u0bc1 \u0b95\u0bc0\u0bb4\u0bcd\u0ba4\u0bcd\u0ba4\u0bb0\u0baa\u0bcd\u0baa\u0b9f\u0bc1\u0ba4\u0bcd\u0ba4 \u0bae\u0bc1\u0b9f\u0bbf\u0b95\u0bbf\u0ba9\u0bcd\u0bb1\u0ba4\u0bc1)</p>';\n $string['welcomep10'] = '{$a->installername} ({$a->installerversion})';\n-$string['welcomep20'] = '\u0ba8\u0bc0\u0b99\u0bcd\u0b95\u0bb3\u0bcd \u0bb5\u0bc6\u0bb1\u0bcd\u0bb1\u0bbf\u0b95\u0bb0\u0bae\u0bbe\u0b95 \u0ba8\u0bbf\u0bb1\u0bc1\u0bb5\u0bbf \u0b86\u0bb0\u0bae\u0bcd\u0baa\u0bbf\u0ba4\u0bcd\u0ba4\u0bc1\u0bb3\u0bcd\u0bb3\u0ba4\u0ba9\u0bcd \u0b95\u0bbe\u0bb0\u0ba3\u0bae\u0bbe\u0b95 \u0ba8\u0bc0\u0b99\u0bcd\u0b95\u0bb3\u0bcd \u0b87\u0baa\u0bcd\u0baa\u0b95\u0bcd\u0b95\u0ba4\u0bcd\u0ba4\u0bc8 \u0baa\u0bbe\u0bb0\u0bcd\u0b95\u0bcd\u0b95\u0bbf\u0bb1\u0bc0\u0bb0\u0bcd\u0b95\u0bb3\u0bcd \n+$string['welcomep20'] = '\u0ba8\u0bc0\u0b99\u0bcd\u0b95\u0bb3\u0bcd \u0bb5\u0bc6\u0bb1\u0bcd\u0bb1\u0bbf\u0b95\u0bb0\u0bae\u0bbe\u0b95 \u0ba8\u0bbf\u0bb1\u0bc1\u0bb5\u0bbf \u0b86\u0bb0\u0bae\u0bcd\u0baa\u0bbf\u0ba4\u0bcd\u0ba4\u0bc1\u0bb3\u0bcd\u0bb3\u0ba4\u0ba9\u0bcd \u0b95\u0bbe\u0bb0\u0ba3\u0bae\u0bbe\u0b95 \u0ba8\u0bc0\u0b99\u0bcd\u0b95\u0bb3\u0bcd \u0b87\u0baa\u0bcd\u0baa\u0b95\u0bcd\u0b95\u0ba4\u0bcd\u0ba4\u0bc8 \u0baa\u0bbe\u0bb0\u0bcd\u0b95\u0bcd\u0b95\u0bbf\u0bb1\u0bc0\u0bb0\u0bcd\u0b95\u0bb3\u0bcd\n     <strong>{$a->packname} {$a->packversion}</strong> \u0b89\u0b99\u0bcd\u0b95\u0bb3\u0bcd \u0b95\u0ba3\u0ba9\u0bbf\u0baf\u0bbf\u0bb2\u0bcd \u0b89\u0bb3\u0bcd\u0bb3  \u0baa\u0bca\u0ba4\u0bbf\u0baf\u0bbf\u0bb2\u0bcd \u0b89\u0bb3\u0bcd\u0bb3\u0ba4\u0bc1.\u0bb5\u0bbe\u0bb4\u0bcd\u0ba4\u0bcd\u0ba4\u0bc1\u0b95\u0bcd\u0b95\u0bb3\u0bcd!';\n $string['welcomep30'] = '<strong>{$a->installername}</strong>\u0ba9\u0bcd \u0bb5\u0bc6\u0bb3\u0bbf\u0baf\u0bc0\u0b9f\u0bc1, <strong>Moodle</strong> \u0b87\u0baf\u0b99\u0bcd\u0b95\u0bc1\u0bae\u0bcd \u0b8e\u0ba9\u0bcd\u0b95\u0bbf\u0ba9\u0bcd\u0bb1 \u0b92\u0bb0\u0bc1 \u0b9a\u0bc2\u0bb4\u0bb2\u0bc8 \u0b89\u0bb0\u0bc1\u0bb5\u0bbe\u0b95\u0bcd\u0b95\u0bc1\u0bb5\u0ba4\u0bb1\u0bcd\u0b95\u0bc1 \u0baa\u0baf\u0ba9\u0bcd\u0baa\u0bbe\u0b9f\u0bcd\u0b9f\u0bc1 \u0bae\u0bc6\u0ba9\u0bcd\u0baa\u0bca\u0bb0\u0bc1\u0bb3\u0bc8 \u0b89\u0bb3\u0bcd\u0bb3\u0b9f\u0b95\u0bcd\u0b95\u0bc1\u0b95\u0bbf\u0bb1\u0ba4\u0bc1.';\n $string['welcomep40'] = '\u0baa\u0bca\u0ba4\u0bbf, <strong>Moodle {$a->moodlerelease} ({$a->moodleversion})</strong> \u0b90\u0baf\u0bc1\u0bae\u0bcd \u0b89\u0bb3\u0bcd\u0bb3\u0b9f\u0b95\u0bcd\u0b95\u0bbf\u0baf\u0bbf\u0bb0\u0bc1\u0b95\u0bcd\u0b95\u0bbf\u0ba9\u0bcd\u0bb1\u0ba4\u0bc1.';\n", "diff --git a/install/lang/th/install.php b/install/lang/th/install.php\nindex ecad79a94da..92905a4bab5 100644\n--- a/install/lang/th/install.php\n+++ b/install/lang/th/install.php\n@@ -48,7 +48,7 @@ $string['memorylimithelp'] = '<p>\u0e04\u0e48\u0e32\u0e04\u0e27\u0e32\u0e21\u0e08\u0e33\u0e2a\u0e39\u0e07\u0e2a\u0e38\u0e14\n \n <ol>\n \n-<li>\u0e23\u0e35\u0e04\u0e2d\u0e21\u0e44\u0e1e\u0e25\u0e4c PHP \u0e43\u0e2b\u0e21\u0e48 \u0e42\u0e14\u0e22\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e04\u0e33\u0e2a\u0e31\u0e48\u0e07 <i>--enable-memory-limit</i> \u0e0b\u0e36\u0e48\u0e07\u0e40\u0e1b\u0e47\u0e19\u0e01\u0e32\u0e23\u0e15\u0e31\u0e49\u0e07\u0e04\u0e48\u0e32\u0e43\u0e2b\u0e49 moodle \u0e01\u0e33\u0e2b\u0e19\u0e14\u0e02\u0e35\u0e14\u0e08\u0e33\u0e01\u0e31\u0e14\u0e04\u0e48\u0e32\u0e2a\u0e39\u0e07\u0e2a\u0e38\u0e14\u0e40\u0e2d\u0e07 \n+<li>\u0e23\u0e35\u0e04\u0e2d\u0e21\u0e44\u0e1e\u0e25\u0e4c PHP \u0e43\u0e2b\u0e21\u0e48 \u0e42\u0e14\u0e22\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e04\u0e33\u0e2a\u0e31\u0e48\u0e07 <i>--enable-memory-limit</i> \u0e0b\u0e36\u0e48\u0e07\u0e40\u0e1b\u0e47\u0e19\u0e01\u0e32\u0e23\u0e15\u0e31\u0e49\u0e07\u0e04\u0e48\u0e32\u0e43\u0e2b\u0e49 moodle \u0e01\u0e33\u0e2b\u0e19\u0e14\u0e02\u0e35\u0e14\u0e08\u0e33\u0e01\u0e31\u0e14\u0e04\u0e48\u0e32\u0e2a\u0e39\u0e07\u0e2a\u0e38\u0e14\u0e40\u0e2d\u0e07\n \n <li>\u0e16\u0e49\u0e32\u0e04\u0e38\u0e13\u0e2a\u0e32\u0e21\u0e32\u0e23\u0e16\u0e41\u0e01\u0e49\u0e44\u0e02\u0e44\u0e1f\u0e25\u0e4c  php.ini \u0e44\u0e14\u0e49\u0e14\u0e49\u0e27\u0e22\u0e15\u0e19\u0e40\u0e2d\u0e07\u0e01\u0e47\u0e2a\u0e32\u0e21\u0e32\u0e23\u0e16\u0e40\u0e1b\u0e25\u0e35\u0e48\u0e22\u0e19\u0e04\u0e48\u0e32 <b>memory_limit</b> \u0e43\u0e2b\u0e49\u0e40\u0e1b\u0e47\u0e19\u0e04\u0e48\u0e32\u0e2d\u0e37\u0e48\u0e19\u0e44\u0e14\u0e49\u0e40\u0e0a\u0e48\u0e19  40M \u0e41\u0e15\u0e48\u0e16\u0e49\u0e32\u0e44\u0e21\u0e48\u0e2a\u0e32\u0e21\u0e32\u0e23\u0e16\u0e40\u0e1b\u0e25\u0e35\u0e48\u0e22\u0e19\u0e04\u0e48\u0e32\u0e19\u0e35\u0e49\u0e44\u0e14\u0e49\u0e14\u0e49\u0e27\u0e22\u0e15\u0e19\u0e40\u0e2d\u0e07\u0e43\u0e2b\u0e49\u0e41\u0e08\u0e49\u0e07\u0e1c\u0e39\u0e49\u0e14\u0e39\u0e41\u0e25\u0e23\u0e30\u0e1a\u0e1a\u0e41\u0e01\u0e49\u0e44\u0e02\n \n@@ -56,7 +56,7 @@ $string['memorylimithelp'] = '<p>\u0e04\u0e48\u0e32\u0e04\u0e27\u0e32\u0e21\u0e08\u0e33\u0e2a\u0e39\u0e07\u0e2a\u0e38\u0e14\n \n <p><blockquote>php_value memory_limit 40M</blockquote></p>\n \n-<p>\u0e2d\u0e22\u0e48\u0e32\u0e07\u0e44\u0e23\u0e01\u0e47\u0e15\u0e32\u0e21\u0e43\u0e19\u0e1a\u0e32\u0e07\u0e40\u0e0b\u0e34\u0e23\u0e4c\u0e1f\u0e40\u0e27\u0e2d\u0e23\u0e4c\u0e04\u0e38\u0e13\u0e44\u0e21\u0e48\u0e2a\u0e32\u0e21\u0e32\u0e23\u0e16\u0e43\u0e0a\u0e49 \u0e27\u0e34\u0e18\u0e35\u0e19\u0e35\u0e49\u0e44\u0e14\u0e49 \u0e42\u0e14\u0e22\u0e08\u0e30\u0e21\u0e35\u0e01\u0e32\u0e23\u0e41\u0e2a\u0e14\u0e07 error \u0e02\u0e36\u0e49\u0e19\u0e21\u0e32\u0e04\u0e38\u0e13\u0e08\u0e33\u0e40\u0e1b\u0e47\u0e19\u0e15\u0e49\u0e2d\u0e07\u0e25\u0e1a\u0e44\u0e1f\u0e25\u0e4c\u0e14\u0e31\u0e07\u0e01\u0e25\u0e48\u0e32\u0e27\u0e19\u0e35\u0e49\u0e17\u0e34\u0e49\u0e07 \n+<p>\u0e2d\u0e22\u0e48\u0e32\u0e07\u0e44\u0e23\u0e01\u0e47\u0e15\u0e32\u0e21\u0e43\u0e19\u0e1a\u0e32\u0e07\u0e40\u0e0b\u0e34\u0e23\u0e4c\u0e1f\u0e40\u0e27\u0e2d\u0e23\u0e4c\u0e04\u0e38\u0e13\u0e44\u0e21\u0e48\u0e2a\u0e32\u0e21\u0e32\u0e23\u0e16\u0e43\u0e0a\u0e49 \u0e27\u0e34\u0e18\u0e35\u0e19\u0e35\u0e49\u0e44\u0e14\u0e49 \u0e42\u0e14\u0e22\u0e08\u0e30\u0e21\u0e35\u0e01\u0e32\u0e23\u0e41\u0e2a\u0e14\u0e07 error \u0e02\u0e36\u0e49\u0e19\u0e21\u0e32\u0e04\u0e38\u0e13\u0e08\u0e33\u0e40\u0e1b\u0e47\u0e19\u0e15\u0e49\u0e2d\u0e07\u0e25\u0e1a\u0e44\u0e1f\u0e25\u0e4c\u0e14\u0e31\u0e07\u0e01\u0e25\u0e48\u0e32\u0e27\u0e19\u0e35\u0e49\u0e17\u0e34\u0e49\u0e07\n </ol>';\n $string['phpversion'] = 'PHP \u0e40\u0e27\u0e2d\u0e23\u0e4c\u0e0a\u0e31\u0e19';\n $string['phpversionhelp'] = '<p>Moodle \u0e08\u0e33\u0e40\u0e1b\u0e47\u0e19\u0e15\u0e49\u0e2d\u0e07\u0e43\u0e0a\u0e49 PHP \u0e40\u0e27\u0e2d\u0e23\u0e4c\u0e0a\u0e31\u0e19 4.1.0 \u0e40\u0e1b\u0e47\u0e19\u0e2d\u0e22\u0e48\u0e32\u0e07\u0e19\u0e49\u0e2d\u0e22</p>\n@@ -68,7 +68,7 @@ $string['welcomep10'] = '{$a->installername} ({$a->installerversion})';\n $string['welcomep20'] = '\u0e17\u0e48\u0e32\u0e19\u0e44\u0e14\u0e49\u0e17\u0e33\u0e01\u0e32\u0e23\u0e15\u0e34\u0e14\u0e15\u0e31\u0e49\u0e07<strong>{$a->packname} {$a->packversion}</strong> \u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08\u0e41\u0e25\u0e49\u0e27';\n $string['welcomep30'] = '\u0e40\u0e27\u0e2d\u0e23\u0e4c\u0e0a\u0e31\u0e48\u0e19 <strong>{$a->installername}</strong>\u0e23\u0e27\u0e21\u0e42\u0e1b\u0e23\u0e41\u0e01\u0e23\u0e21\u0e2a\u0e33\u0e2b\u0e23\u0e31\u0e1a\u0e2a\u0e23\u0e49\u0e32\u0e07\u0e04\u0e27\u0e32\u0e21\u0e43\u0e2b\u0e49\u0e01\u0e31\u0e1a\u0e23\u0e30\u0e1a\u0e1a\u0e0b\u0e36\u0e48\u0e07 Moodle \u0e2a\u0e32\u0e21\u0e32\u0e23\u0e16\u0e17\u0e33\u0e07\u0e32\u0e19\u0e44\u0e14\u0e49';\n $string['welcomep40'] = '\u0e41\u0e1e\u0e47\u0e01\u0e40\u0e01\u0e08\u0e19\u0e35\u0e49\u0e23\u0e27\u0e21 <strong>Moodle {$a->moodlerelease} ({$a->moodleversion})</strong>.';\n-$string['welcomep50'] = '\u0e01\u0e32\u0e23\u0e43\u0e0a\u0e49\u0e07\u0e32\u0e19\u0e42\u0e1b\u0e23\u0e41\u0e01\u0e23\u0e21\u0e15\u0e48\u0e32\u0e07 \u0e46 \u0e43\u0e19\u0e41\u0e1e\u0e47\u0e01\u0e40\u0e01\u0e08\u0e19\u0e35\u0e49\u0e2a\u0e32\u0e21\u0e32\u0e23\u0e16\u0e17\u0e33\u0e44\u0e14\u0e49\u0e42\u0e14\u0e22\u0e44\u0e21\u0e48\u0e25\u0e30\u0e40\u0e21\u0e34\u0e14\u0e2a\u0e31\u0e0d\u0e0d\u0e32\u0e19\u0e38\u0e0d\u0e32\u0e15\u0e02\u0e2d\u0e07\u0e41\u0e15\u0e48\u0e25\u0e30\u0e42\u0e1b\u0e23\u0e41\u0e01\u0e23\u0e21  \u0e42\u0e1b\u0e41\u0e01\u0e23\u0e21<strong>{$a->installername}</strong>\u0e40\u0e15\u0e47\u0e21\u0e23\u0e39\u0e1b\u0e41\u0e1a\u0e1a\u0e19\u0e31\u0e49\u0e19\u0e08\u0e31\u0e14\u0e40\u0e1b\u0e47\u0e19\u0e42\u0e1b\u0e23\u0e41\u0e01\u0e23\u0e21\u0e1b\u0e23\u0e30\u0e40\u0e20\u0e17 \n+$string['welcomep50'] = '\u0e01\u0e32\u0e23\u0e43\u0e0a\u0e49\u0e07\u0e32\u0e19\u0e42\u0e1b\u0e23\u0e41\u0e01\u0e23\u0e21\u0e15\u0e48\u0e32\u0e07 \u0e46 \u0e43\u0e19\u0e41\u0e1e\u0e47\u0e01\u0e40\u0e01\u0e08\u0e19\u0e35\u0e49\u0e2a\u0e32\u0e21\u0e32\u0e23\u0e16\u0e17\u0e33\u0e44\u0e14\u0e49\u0e42\u0e14\u0e22\u0e44\u0e21\u0e48\u0e25\u0e30\u0e40\u0e21\u0e34\u0e14\u0e2a\u0e31\u0e0d\u0e0d\u0e32\u0e19\u0e38\u0e0d\u0e32\u0e15\u0e02\u0e2d\u0e07\u0e41\u0e15\u0e48\u0e25\u0e30\u0e42\u0e1b\u0e23\u0e41\u0e01\u0e23\u0e21  \u0e42\u0e1b\u0e41\u0e01\u0e23\u0e21<strong>{$a->installername}</strong>\u0e40\u0e15\u0e47\u0e21\u0e23\u0e39\u0e1b\u0e41\u0e1a\u0e1a\u0e19\u0e31\u0e49\u0e19\u0e08\u0e31\u0e14\u0e40\u0e1b\u0e47\u0e19\u0e42\u0e1b\u0e23\u0e41\u0e01\u0e23\u0e21\u0e1b\u0e23\u0e30\u0e40\u0e20\u0e17\n <a href=\"http://www.opensource.org/docs/definition_plain.html\">\u0e42\u0e2d\u0e40\u0e1e\u0e48\u0e19\u0e0b\u0e2d\u0e23\u0e4c\u0e2a</a> \u0e41\u0e25\u0e30\u0e40\u0e1c\u0e22\u0e41\u0e1e\u0e23\u0e48\u0e20\u0e32\u0e22\u0e43\u0e15\u0e49\u0e2a\u0e4d\u0e0d\u0e0d\u0e32\u0e19\u0e38\u0e0d\u0e32\u0e15 <a href=\"http://www.gnu.org/copyleft/gpl.html\">GPL</a>';\n $string['welcomep60'] = '\u0e2b\u0e19\u0e49\u0e32\u0e16\u0e31\u0e14\u0e08\u0e32\u0e01\u0e19\u0e35\u0e49\u0e44\u0e1b\u0e08\u0e30\u0e40\u0e1b\u0e47\u0e19\u0e01\u0e32\u0e23\u0e15\u0e31\u0e49\u0e07\u0e04\u0e48\u0e32 Moodle \u0e1a\u0e19\u0e04\u0e2d\u0e21\u0e1e\u0e34\u0e27\u0e40\u0e15\u0e2d\u0e23\u0e4c\u0e04\u0e38\u0e13\u0e2a\u0e32\u0e21\u0e32\u0e23\u0e16\u0e22\u0e2d\u0e21\u0e23\u0e31\u0e1a\u0e04\u0e48\u0e32\u0e17\u0e35\u0e48\u0e15\u0e31\u0e49\u0e07\u0e44\u0e27\u0e49\u0e17\u0e31\u0e49\u0e07\u0e2b\u0e21\u0e14\u0e2b\u0e23\u0e37\u0e2d\u0e40\u0e1b\u0e25\u0e35\u0e48\u0e22\u0e19\u0e41\u0e1b\u0e25\u0e07\u0e43\u0e2b\u0e49\u0e40\u0e2b\u0e21\u0e32\u0e30\u0e01\u0e31\u0e1a\u0e04\u0e27\u0e32\u0e21\u0e15\u0e49\u0e2d\u0e07\u0e01\u0e32\u0e23';\n $string['welcomep70'] = '\u0e04\u0e25\u0e34\u0e01\u0e17\u0e35\u0e48 \"\u0e15\u0e48\u0e2d\u0e44\u0e1b\" \u0e40\u0e1e\u0e37\u0e48\u0e2d\u0e15\u0e34\u0e14\u0e15\u0e31\u0e49\u0e07 Moodle \u0e15\u0e48\u0e2d\u0e44\u0e1b';\n", "diff --git a/install/lang/tl/install.php b/install/lang/tl/install.php\nindex cb4acabb801..1543d90b9af 100644\n--- a/install/lang/tl/install.php\n+++ b/install/lang/tl/install.php\n@@ -48,15 +48,15 @@ $string['memorylimithelp'] = '<p>Ang memory limit ng PHP para sa server mo ay ka\n <p>Iminumungkahi namin na isaayos mo ang PHP na may mas mataas na limit kung maaari, tulad ng 40M.\n     May iba\\'t-ibang paraan na magagawa kayo upang ito ay maiisakatuparan:</p>\n <ol>\n-<li>Kunga maaari mong gawin, muling ikompayl ang PHP na may <i>--enable-memory-limit</i>.  \n+<li>Kunga maaari mong gawin, muling ikompayl ang PHP na may <i>--enable-memory-limit</i>.\n      Pahihintulutan nito ang Moodle na itakda ang memory limit sa sarili nito.</li>\n-<li>Kung mapapasok mo ang iyong sakong php.ini, mababago mo ang <b>memory_limit</b> \n+<li>Kung mapapasok mo ang iyong sakong php.ini, mababago mo ang <b>memory_limit</b>\n     na kaayusan doon at gawin itong mga 40M.  Kung wala kang karapatang pasukin ito\n     baka puwede mong hilingin sa administrador na gawin ito para sa iyo.</li>\n <li>Sa ilang PHP serve maaari kang lumikha ng isang sakong .htaccess sa bugsok ng Moodle\n     na naglalaman ng linyang ito:\n     <p><blockquote>php_value memory_limit 40M</blockquote></p>\n-    <p>Subali\\'t sa ilang server ay pipigilin nito ang paggana ng <b>lahat</b> ng pahinang PHP \n+    <p>Subali\\'t sa ilang server ay pipigilin nito ang paggana ng <b>lahat</b> ng pahinang PHP\n     (makakakita ka ng mga error kapag tumingin ka sa mga pahina) kaya\\'t kakailanganin mong tanggalin ang sakong .htaccess.</p></li>\n </ol>';\n $string['phpversion'] = 'Bersiyon ng PHP';\n", "diff --git a/install/lang/to/install.php b/install/lang/to/install.php\nindex 35ec8a8ffc8..309fdd7b595 100644\n--- a/install/lang/to/install.php\n+++ b/install/lang/to/install.php\n@@ -39,16 +39,16 @@ $string['memorylimithelp'] = '<p> Koe memolii PHP limiti ki ho\\'o seeva \\'oku lo\n \n <p>\\'E malava eni ke fakalanga\\'i e Muutolo ke \\'iai ha ngaahi memolii palopalema \\'a mui ange , tautautefito kapau \\'oku ma\\'u ha ngaahi motiula \\'oku malava pea/mo ha kau \\'iusa tokolahi.\n \n-<p>\\'Oku mau faka\\'ai\\'ai koe keke fakafika ho\\'o PHP aki ha limiti ma\\'olunga kapau \\'e lava, hange koe 40M.    \n+<p>\\'Oku mau faka\\'ai\\'ai koe keke fakafika ho\\'o PHP aki ha limiti ma\\'olunga kapau \\'e lava, hange koe 40M.\n    Koe ngaahi founga kehekehe eni teke lava \\'o \\'ahi\\'ahi\\'i ki hono fai \\'o \\'eni:\n <ol>\n-<li>Kapau teke lava,toe fakatahatah\\'i e PHP moe <i>--malava-memolii-limiti</i>.  \n-    \\'E hanga he\\'e me\\'a ko\\'eni \\'o fakangofua e Muutolo kene seti pee e limiti \\'oe memolii \\'eia pee.  \n-<li>Kapau \\'oku \\'iai ha\\'o \\'ekisesi ki ho\\'o php.ini faile, teke lava \\'o liliu <b>memolii_limiti</b> \n-    \\'o seti\\'i ia ki ha me\\'a hangee koe 40M. Kapau \\'oku \\'ikai ke \\'iai ha\\'o \\'ekisesi, teke kei malava pe keke kole ki ho\\'o \\'etiminisituleitaa kene fai \\'eni ma\\'au. \n+<li>Kapau teke lava,toe fakatahatah\\'i e PHP moe <i>--malava-memolii-limiti</i>.\n+    \\'E hanga he\\'e me\\'a ko\\'eni \\'o fakangofua e Muutolo kene seti pee e limiti \\'oe memolii \\'eia pee.\n+<li>Kapau \\'oku \\'iai ha\\'o \\'ekisesi ki ho\\'o php.ini faile, teke lava \\'o liliu <b>memolii_limiti</b>\n+    \\'o seti\\'i ia ki ha me\\'a hangee koe 40M. Kapau \\'oku \\'ikai ke \\'iai ha\\'o \\'ekisesi, teke kei malava pe keke kole ki ho\\'o \\'etiminisituleitaa kene fai \\'eni ma\\'au.\n <li>\\'i he ni\\'ihi \\'oe ngaahi seeva PHPtekelava \\'o fakatupu ha .ht\\'ekisesi faile \\'i loto \\'ihe fakahinohino Muutolo \\'oku \\'i loto \\'i he laine ko \\'eni:\n     <p><polokakuouti>php_mahu\\'inga memolii_limiti 40M</polokakuouti></p>\n-    <p>Kaekehe, he\\'ikai ke lava \\'eni ia \\'i he ni\\'ihi \\'oe ngaahi seeva<b>all</b> PHP ngaahi peesi \\'oku ngaue \n+    <p>Kaekehe, he\\'ikai ke lava \\'eni ia \\'i he ni\\'ihi \\'oe ngaahi seeva<b>all</b> PHP ngaahi peesi \\'oku ngaue\n     (teke lava \\'o sio ki he ngaahi fehalaaki \\'i ha\\'o sio ki he ngaahi peesi) koia ai kuopau keke to\\'o e .ht\\'ekisesi faile.\n </ol>';\n $string['phpversion'] = 'vesiniPHP';\n", "diff --git a/install/lang/vi/install.php b/install/lang/vi/install.php\nindex add67153e83..033f396e562 100644\n--- a/install/lang/vi/install.php\n+++ b/install/lang/vi/install.php\n@@ -38,21 +38,21 @@ $string['dirroot'] = 'Th\u01b0 m\u1ee5c Moodle';\n $string['installation'] = 'C\u00e0i \u0111\u1eb7t';\n $string['memorylimithelp'] = '<p> PHP thi\u1ebft l\u1eadp gi\u1edbi h\u1ea1n b\u1ed9 nh\u1edb cho m\u00e1y ch\u1ee7 c\u1ee7a b\u1ea1n hi\u1ec7n t\u1ea1i l\u00e0 {$a}.</p>\n \n-<p>\u0110\u00e2y c\u00f3 th\u1ec3 l\u00e0 nguy\u00ean nh\u00e2n Moodle c\u00f3 c\u00e1c v\u1ea5n \u0111\u1ec1 v\u1ec1 b\u1ed9 nh\u1edb v\u00e0o m\u1ed9t th\u1eddi \u0111i\u1ec3m n\u00e0o \u0111\u00f3, \u0111\u1eb7c bi\u1ec7t \n+<p>\u0110\u00e2y c\u00f3 th\u1ec3 l\u00e0 nguy\u00ean nh\u00e2n Moodle c\u00f3 c\u00e1c v\u1ea5n \u0111\u1ec1 v\u1ec1 b\u1ed9 nh\u1edb v\u00e0o m\u1ed9t th\u1eddi \u0111i\u1ec3m n\u00e0o \u0111\u00f3, \u0111\u1eb7c bi\u1ec7t\n    n\u1ebfu b\u1ea1n c\u00f3 nhi\u1ec1u m\u00f4\u0111un \u0111\u01b0\u1ee3c cho ph\u00e9p v\u00e0 nhi\u1ec1u ng\u01b0\u1eddi d\u00f9ng.\n \n-<p>Ch\u00fang t\u00f4i \u0111\u1ec1 ngh\u1ecb r\u1eb1ng b\u1ea1n c\u1ea5u h\u00ecnh PHP v\u1edbi m\u1ed9t gi\u1edbi h\u1ea1n l\u1edbn h\u01a1n n\u1ebfu c\u00f3 th\u1ec3, ch\u1eb3ng h\u1ea1n nh\u01b0 40M.  \n+<p>Ch\u00fang t\u00f4i \u0111\u1ec1 ngh\u1ecb r\u1eb1ng b\u1ea1n c\u1ea5u h\u00ecnh PHP v\u1edbi m\u1ed9t gi\u1edbi h\u1ea1n l\u1edbn h\u01a1n n\u1ebfu c\u00f3 th\u1ec3, ch\u1eb3ng h\u1ea1n nh\u01b0 40M.\n    C\u00f3 m\u1ed9t s\u1ed1 c\u00e1ch \u0111\u1ec3 l\u00e0m \u0111i\u1ec1u n\u00e0y m\u00e0 b\u1ea1n c\u00f3 th\u1ec3 th\u1eed:\n <ol>\n-<li>N\u1ebfu b\u1ea1n c\u00f3 kh\u1ea3 n\u0103ng, bi\u00ean t\u1eadp l\u1ea1i PHP v\u1edbi <i>--gi\u1edbi h\u1ea1n b\u1ed9 nh\u1edb cho ph\u00e9p</i>.  \n+<li>N\u1ebfu b\u1ea1n c\u00f3 kh\u1ea3 n\u0103ng, bi\u00ean t\u1eadp l\u1ea1i PHP v\u1edbi <i>--gi\u1edbi h\u1ea1n b\u1ed9 nh\u1edb cho ph\u00e9p</i>.\n     \u0110i\u1ec1u n\u00e0y s\u1ebd cho ph\u00e9p Moodle t\u1ef1 thi\u1ebft l\u1eadp gi\u1edbi h\u1ea1n b\u1ed9 nh\u1edb.\n-<li>N\u1ebfu b\u1ea1n truy c\u1eadp file php.ini c\u1ee7a b\u1ea1n, b\u1ea1n c\u00f3 th\u1ec3 thay \u0111\u1ed5i <b>gi\u1edbi h\u1ea1n b\u1ed9 nh\u1edb</b> \n-    thi\u1ebft l\u1eadp trong \u0111\u00f3 th\u00e0nh m\u1ed9t gi\u00e1 tr\u1ecb n\u00e0o \u0111\u00f3 ch\u1eb3ng h\u1ea1n nh\u01b0 40M. N\u1ebfu b\u1ea1n kh\u00f4ng \u0111\u01b0\u1ee3c ph\u00e9p truy c\u1eadp \n+<li>N\u1ebfu b\u1ea1n truy c\u1eadp file php.ini c\u1ee7a b\u1ea1n, b\u1ea1n c\u00f3 th\u1ec3 thay \u0111\u1ed5i <b>gi\u1edbi h\u1ea1n b\u1ed9 nh\u1edb</b>\n+    thi\u1ebft l\u1eadp trong \u0111\u00f3 th\u00e0nh m\u1ed9t gi\u00e1 tr\u1ecb n\u00e0o \u0111\u00f3 ch\u1eb3ng h\u1ea1n nh\u01b0 40M. N\u1ebfu b\u1ea1n kh\u00f4ng \u0111\u01b0\u1ee3c ph\u00e9p truy c\u1eadp\n     b\u1ea1n c\u00f3 th\u1ec3 y\u00eau c\u1ea7u qu\u1ea3n tr\u1ecb vi\u00ean c\u1ee7a b\u1ea1n \u0111\u1ec3 l\u00e0m \u0111i\u1ec1u \u0111\u00f3 cho b\u1ea1n.</li>\n-<li> Tr\u00ean m\u1ed9t s\u1ed1 m\u00e1y ch\u1ee7 ch\u1ea1y PHP b\u1ea1n c\u00f3 th\u1ec3 t\u1ea1o m\u1ed9t file .htaccess trong th\u01b0 m\u1ee5c Moodle  \n+<li> Tr\u00ean m\u1ed9t s\u1ed1 m\u00e1y ch\u1ee7 ch\u1ea1y PHP b\u1ea1n c\u00f3 th\u1ec3 t\u1ea1o m\u1ed9t file .htaccess trong th\u01b0 m\u1ee5c Moodle\n     ch\u1ee9a d\u00f2ng n\u00e0y:\n     <p><blockquote> gi\u00e1 tr\u1ecb gi\u1edbi h\u1ea1n b\u1ed9 nh\u1edb 40M</blockquote></p>\n-    <p>Tuy nhi\u00ean, tr\u00ean m\u1ed9t s\u1ed1 m\u00e1y ch\u1ee7 \u0111i\u1ec1u n\u00e0y c\u00f3 th\u1ec3 ng\u0103n c\u1ea3n <b>t\u1ea5t c\u1ea3</b> c\u00e1c trang PHP l\u00e0m vi\u1ec7c \n+    <p>Tuy nhi\u00ean, tr\u00ean m\u1ed9t s\u1ed1 m\u00e1y ch\u1ee7 \u0111i\u1ec1u n\u00e0y c\u00f3 th\u1ec3 ng\u0103n c\u1ea3n <b>t\u1ea5t c\u1ea3</b> c\u00e1c trang PHP l\u00e0m vi\u1ec7c\n     (b\u1ea1n s\u1ebd nh\u00ecn th\u1ea5y c\u00e1c l\u1ed7i khi b\u1ea1n xem x\u00e9t nh\u1eefng trang n\u00e0y )v\u00ec th\u1ebf b\u1ea1n s\u1ebd pah\u1ec9 di chuy\u1ec1n file .htaccess.</p></li>\n </ol>';\n $string['phpversion'] = 'Phi\u00ean b\u1ea3n PHP';\n"], "label": 0, "cve": "CVE-2012-3393", "rank": 22, "commit": "bb5bda8aa174f90690f8c66661cd177310b211fa", "cve_attention_tokens": []}
{"cve_desc": "ImageMagick 7.0.6-1 has a memory leak vulnerability in ReadMATImage in coders\\mat.c.", "commit_msg": "...\n\n", "diff": ["diff --git a/coders/mat.c b/coders/mat.c\nindex fc19bc5c6..0171eb772 100644\n--- a/coders/mat.c\n+++ b/coders/mat.c\n@@ -472,11 +472,11 @@ static void RelinquishZIPMemory(voidpf context,voidpf memory)\n \n #if defined(MAGICKCORE_ZLIB_DELEGATE)\n /** This procedure decompreses an image block for a new MATLAB format. */\n-static Image *DecompressBlock(Image *orig, unsigned int *Size, ImageInfo *clone_info, ExceptionInfo *exception)\n+static Image *decompress_block(Image *orig, unsigned int *Size, ImageInfo *clone_info, ExceptionInfo *exception)\n {\n \n Image *image2;\n-void *CacheBlock, *DecompressBlock;\n+void *cache_block, *decompress_block;\n z_stream zip_info;\n FILE *mat_file;\n size_t magick_size;\n@@ -495,12 +495,12 @@ ssize_t TotalSize = 0;\n     (void) remove_utf8(clone_info->filename);\n   }\n \n-  CacheBlock = AcquireQuantumMemory((size_t)((*Size<16384)?*Size:16384),sizeof(unsigned char *));\n-  if(CacheBlock==NULL) return NULL;\n-  DecompressBlock = AcquireQuantumMemory((size_t)(4096),sizeof(unsigned char *));\n-  if(DecompressBlock==NULL)\n+  cache_block = AcquireQuantumMemory((size_t)(*Size < 16384) ? *Size: 16384,sizeof(unsigned char *));\n+  if(cache_block==NULL) return NULL;\n+  decompress_block = AcquireQuantumMemory((size_t)(4096),sizeof(unsigned char *));\n+  if(decompress_block==NULL)\n   {\n-    RelinquishMagickMemory(CacheBlock);\n+    RelinquishMagickMemory(cache_block);\n     return NULL;\n   }\n \n@@ -510,8 +510,8 @@ ssize_t TotalSize = 0;\n     mat_file = fdopen(file,\"w\");\n   if(!mat_file)\n   {\n-    RelinquishMagickMemory(CacheBlock);\n-    RelinquishMagickMemory(DecompressBlock);\n+    RelinquishMagickMemory(cache_block);\n+    RelinquishMagickMemory(decompress_block);\n     (void) LogMagickEvent(CoderEvent,GetMagickModule(),\"Cannot create file stream for decompressed image\");\n     return NULL;\n   }\n@@ -522,8 +522,8 @@ ssize_t TotalSize = 0;\n   zip_status = inflateInit(&zip_info);\n   if (zip_status != Z_OK)\n     {\n-      RelinquishMagickMemory(CacheBlock);\n-      RelinquishMagickMemory(DecompressBlock);\n+      RelinquishMagickMemory(cache_block);\n+      RelinquishMagickMemory(decompress_block);\n       (void) ThrowMagickException(exception,GetMagickModule(),CorruptImageError,\n         \"UnableToUncompressImage\",\"`%s'\",clone_info->filename);\n       (void) fclose(mat_file);\n@@ -536,18 +536,18 @@ ssize_t TotalSize = 0;\n   zip_info.total_out = 0;\n   while(*Size>0 && !EOFBlob(orig))\n   {\n-    magick_size = ReadBlob(orig, (*Size<16384)?*Size:16384, (unsigned char *) CacheBlock);\n-    zip_info.next_in = (Bytef *) CacheBlock;\n+    magick_size = ReadBlob(orig, (*Size < 16384) ? *Size : 16384, (unsigned char *) cache_block);\n+    zip_info.next_in = (Bytef *) cache_block;\n     zip_info.avail_in = (uInt) magick_size;\n \n     while(zip_info.avail_in>0)\n     {\n       zip_info.avail_out = 4096;\n-      zip_info.next_out = (Bytef *) DecompressBlock;\n+      zip_info.next_out = (Bytef *) decompress_block;\n       zip_status = inflate(&zip_info,Z_NO_FLUSH);\n       if ((zip_status != Z_OK) && (zip_status != Z_STREAM_END))\n         break;\n-      extent=fwrite(DecompressBlock, 4096-zip_info.avail_out, 1, mat_file);\n+      extent=fwrite(decompress_block, 4096-zip_info.avail_out, 1, mat_file);\n       (void) extent;\n       TotalSize += 4096-zip_info.avail_out;\n \n@@ -562,8 +562,8 @@ DblBreak:\n \n   inflateEnd(&zip_info);\n   (void)fclose(mat_file);\n-  RelinquishMagickMemory(CacheBlock);\n-  RelinquishMagickMemory(DecompressBlock);\n+  RelinquishMagickMemory(cache_block);\n+  RelinquishMagickMemory(decompress_block);\n   *Size = TotalSize;\n \n   if((clone_info->file=fopen(clone_info->filename,\"rb\"))==NULL) goto UnlinkFile;\n@@ -944,6 +944,8 @@ MATLAB_KO: ThrowReaderException(CorruptImageError,\"ImproperImageHeader\");\n     if(EOFBlob(image)) break;\n     MATLAB_HDR.ObjectSize = ReadBlobXXXLong(image);\n     if(EOFBlob(image)) break;\n+    if(MATLAB_HDR.ObjectSize+filepos > GetBlobSize(image))\n+      goto MATLAB_KO;\n     filepos += MATLAB_HDR.ObjectSize + 4 + 4;\n \n     clone_info=CloneImageInfo(image_info);\n@@ -951,7 +953,7 @@ MATLAB_KO: ThrowReaderException(CorruptImageError,\"ImproperImageHeader\");\n #if defined(MAGICKCORE_ZLIB_DELEGATE)\n     if(MATLAB_HDR.DataType == miCOMPRESSED)\n     {\n-      image2 = DecompressBlock(image,&MATLAB_HDR.ObjectSize,clone_info,exception);\n+      image2 = decompress_block(image,&MATLAB_HDR.ObjectSize,clone_info,exception);\n       if(image2==NULL) continue;\n       MATLAB_HDR.DataType = ReadBlobXXXLong(image2); /* replace compressed object type. */\n     }\n@@ -1096,6 +1098,8 @@ RestoreMSCWarning\n     image->colors = one << image->depth;\n     if (image->columns == 0 || image->rows == 0)\n       goto MATLAB_KO;\n+    if((unsigned long)ldblk*MATLAB_HDR.SizeY > MATLAB_HDR.ObjectSize)\n+      goto MATLAB_KO;\n     /* Image is gray when no complex flag is set and 2D Matrix */\n     if ((MATLAB_HDR.DimFlag == 8) &&\n         ((MATLAB_HDR.StructureFlag & FLAG_COMPLEX) == 0))\n"], "label": 0, "cve": "CVE-2017-12667", "rank": 4, "commit": "7d2e1595047e76b39a0add4253da0594c5a440af", "cve_attention_tokens": []}
{"cve_desc": "Open redirect vulnerability in the valid_back_url function in app/controllers/application_controller.rb in Redmine before 2.6.7, 3.0.x before 3.0.5, and 3.1.x before 3.1.1 allows remote attackers to redirect users to arbitrary web sites and conduct phishing attacks via a crafted back_url parameter, as demonstrated by \"@attacker.com,\" a different vulnerability than CVE-2014-1985.", "commit_msg": "Updates for 3.1.1 release.\n\ngit-svn-id: http://svn.redmine.org/redmine/trunk@14606 e93f8b46-1217-0410-a6f0-8f06a7374b81\n\n", "diff": ["diff --git a/doc/CHANGELOG b/doc/CHANGELOG\nindex b6ab23f0a..dc9c7dfa7 100644\n--- a/doc/CHANGELOG\n+++ b/doc/CHANGELOG\n@@ -4,6 +4,37 @@ Redmine - project management software\n Copyright (C) 2006-2015  Jean-Philippe Lang\n http://www.redmine.org/\n \n+== 2015-09-20 v3.1.1\n+\n+* Feature #11253: Total time spent from subtasks on the issue list\n+* Feature #20688: Add Total estimated hours column on issue list\n+* Feature #20738: Upgrade Rails 4.2.4\n+* Defect #19577: Open redirect vulnerability\n+* Defect #20761: Fix typo of Japanese translation for notice_gantt_chart_truncated\n+* Defect #20427: Cannot create a custom query visibility is \"to these roles only\"\n+* Defect #20454: Mail handler: unwanted assignment to a group occurs\n+* Defect #20278: Wrong syntax for resizing inline images will throw a 500 error\n+* Defect #20401: \"Spent time\" panel: columns not wrapping\n+* Defect #20407: Monospace font-family values are differ between application.css and scm.css\n+* Defect #20456: 3.1-stable/3.1.0: missing commits (omitted from being merged from trunk)\n+* Defect #20466: Broken email notification layout in Outlook\n+* Defect #20490: WARNING: Can't mass-assign protected attributes for User\n+* Defect #20633: Help cursor showing up since r14154\n+* Patch #20293: Russian translation for 2.6-stable\n+* Patch #20294: Russian translation for 2.6-stable\n+* Patch #20408: Turkish translation for 2.6-stable\n+* Patch #20557: Czech translation for 2.6-stable\n+* Patch #20735: Markdown: Upgrade redcarpet gem to 3.3 (ruby 1.9 and higher)\n+* Patch #20745: Portuguese translation for 2.6-stable\n+* Patch #20512: Project.copy_from deletes enabled_modules on source\n+* Patch #20737: Czech translation for 3.0-stable\n+* Patch #20746: Portuguese translation for 3.0-stable\n+* Patch #20243: Use https links instead of http links in ApplicationHelper#avatar_edit_link and Redmine::Info class methods\n+* Patch #20410: Turkish translation for 3.1-stable\n+* Patch #20452: Czech localisation update\n+* Patch #20731: Change Japanese translation for \"spent time\"\n+* Patch #20747: Portuguese translation for 3.1-stable\n+\n == 2015-07-26 v3.1.0\n \n * Defect #4334: \"Watch\"ing an issue doesn't update watchers list\n", "diff --git a/lib/redmine/version.rb b/lib/redmine/version.rb\nindex 60f6c42ea..a133bc7dc 100644\n--- a/lib/redmine/version.rb\n+++ b/lib/redmine/version.rb\n@@ -4,7 +4,7 @@ module Redmine\n   module VERSION #:nodoc:\n     MAJOR = 3\n     MINOR = 1\n-    TINY  = 0\n+    TINY  = 1\n \n     # Branch values:\n     # * official release: nil\n"], "label": 0, "cve": "CVE-2015-8474", "rank": 3, "commit": "41011013be1a0370c301134aab21baa21f2d87e6", "cve_attention_tokens": ["vulnerability"]}
{"cve_desc": "Legacy C++ Facebook Thrift servers (using cpp instead of cpp2) would not error upon receiving messages with containers of fields of unknown type. As a result, malicious clients could send short messages which would take a long time for the server to parse, potentially leading to denial of service. This issue affects Facebook Thrift prior to v2019.05.06.00.", "commit_msg": "Stop enforcing required fields in C++ unless deprecated mode is enabled\n\nSummary: We're removing support for `required` fields from FBThrift. This diff removes enforcement of `required` fields from C++ (it can be re-enabled for the migration period via `deprecated_enforce_required` option passed to C++ codegen.\n\nReviewed By: vitaut\n\nDifferential Revision: D13851524\n\nfbshipit-source-id: a805ca0490143f3f2143c255369566bd9cd030a9\n\n", "diff": ["diff --git a/thrift/compiler/generate/t_mstch_cpp2_generator.cc b/thrift/compiler/generate/t_mstch_cpp2_generator.cc\nindex 5c0789f8ff..353b03e006 100644\n--- a/thrift/compiler/generate/t_mstch_cpp2_generator.cc\n+++ b/thrift/compiler/generate/t_mstch_cpp2_generator.cc\n@@ -1350,6 +1350,8 @@ class mstch_cpp2_program : public mstch_program {\n             {\"program:indirection\", &mstch_cpp2_program::indirection},\n             {\"program:aliases_to_struct\",\n              &mstch_cpp2_program::aliases_to_struct},\n+            {\"program:enforce_required?\",\n+             &mstch_cpp2_program::enforce_required},\n         });\n   }\n   std::string get_program_namespace(t_program const* program) override {\n@@ -1704,6 +1706,9 @@ class mstch_cpp2_program : public mstch_program {\n     }\n     return a;\n   }\n+  mstch::node enforce_required() {\n+    return cache_->parsed_options_.count(\"deprecated_enforce_required\") != 0;\n+  }\n };\n \n class enum_cpp2_generator : public enum_generator {\n", "diff --git a/thrift/compiler/generate/templates/cpp2/module_types_tcc/deserialize_struct.mustache b/thrift/compiler/generate/templates/cpp2/module_types_tcc/deserialize_struct.mustache\nindex b18f28bac4..19c58eb082 100644\n--- a/thrift/compiler/generate/templates/cpp2/module_types_tcc/deserialize_struct.mustache\n+++ b/thrift/compiler/generate/templates/cpp2/module_types_tcc/deserialize_struct.mustache\n@@ -22,9 +22,9 @@ void <%struct:name%>::readNoXfer(Protocol_* iprot) {\n \n   using apache::thrift::TProtocolException;\n \n-<%#struct:fields%><%#field:required?%>\n+<%#program:enforce_required?%><%#struct:fields%><%#field:required?%>\n   bool isset_<%field:cpp_name%> = false;\n-<%/field:required?%><%/struct:fields%>\n+<%/field:required?%><%/struct:fields%><%/program:enforce_required?%>\n \n <%#struct:fields?%>\n <%#struct:fields%>\n@@ -80,11 +80,11 @@ _readField_<%field:cpp_name%>:\n _end:\n   _readState.readStructEnd(iprot);\n \n-  <%#struct:fields%><%#field:required?%>\n+  <%#program:enforce_required?%><%#struct:fields%><%#field:required?%>\n   if (!isset_<%field:cpp_name%>) {\n     TProtocolException::throwMissingRequiredField(\"<%field:name%>\", \"<%struct:name%>\");\n   }\n-  <%/field:required?%><%/struct:fields%>\n+  <%/field:required?%><%/struct:fields%><%/program:enforce_required?%>\n   return;\n \n _loop:\n", "diff --git a/thrift/compiler/generate/templates/cpp2/module_types_tcc/deserialize_struct_field.mustache b/thrift/compiler/generate/templates/cpp2/module_types_tcc/deserialize_struct_field.mustache\nindex 528d038a6d..738f5e7ffb 100644\n--- a/thrift/compiler/generate/templates/cpp2/module_types_tcc/deserialize_struct_field.mustache\n+++ b/thrift/compiler/generate/templates/cpp2/module_types_tcc/deserialize_struct_field.mustache\n@@ -71,9 +71,9 @@ this-><%field:cpp_name%> = std::move(ptr);<%!\n %><%/type:struct?%><%!\n %><%/field:optionals?%><%/field:cpp_ref?%><%!\n \n-%><%#field:required?%>\n+%><%#program:enforce_required?%><%#field:required?%>\n isset_<%field:cpp_name%> = true;<%!\n-%><%/field:required?%><%!\n+%><%/field:required?%><%/program:enforce_required?%><%!\n %><%^field:required?%><%^struct:optionals?%><%^field:cpp_ref?%>\n this->__isset.<%field:cpp_name%> = true;<%!\n %><%/field:cpp_ref?%><%/struct:optionals?%><%/field:required?%>\n", "diff --git a/thrift/compiler/test/fixtures/constants/gen-cpp2/module_types.tcc b/thrift/compiler/test/fixtures/constants/gen-cpp2/module_types.tcc\nindex 7ef2cf026f..4972ee6442 100644\n--- a/thrift/compiler/test/fixtures/constants/gen-cpp2/module_types.tcc\n+++ b/thrift/compiler/test/fixtures/constants/gen-cpp2/module_types.tcc\n@@ -118,7 +118,6 @@ void Internship::readNoXfer(Protocol_* iprot) {\n \n   using apache::thrift::TProtocolException;\n \n-  bool isset_weeks = false;\n \n   if (UNLIKELY(!_readState.advanceToNextField(\n           iprot,\n@@ -130,7 +129,6 @@ void Internship::readNoXfer(Protocol_* iprot) {\n _readField_weeks:\n   {\n     ::apache::thrift::detail::pm::protocol_methods< ::apache::thrift::type_class::integral, int32_t>::read(*iprot, this->weeks);\n-    isset_weeks = true;\n   }\n \n   if (UNLIKELY(!_readState.advanceToNextField(\n@@ -170,9 +168,6 @@ _readField_employer:\n _end:\n   _readState.readStructEnd(iprot);\n \n-  if (!isset_weeks) {\n-    TProtocolException::throwMissingRequiredField(\"weeks\", \"Internship\");\n-  }\n   return;\n \n _loop:\n@@ -398,8 +393,6 @@ void Range::readNoXfer(Protocol_* iprot) {\n \n   using apache::thrift::TProtocolException;\n \n-  bool isset_min = false;\n-  bool isset_max = false;\n \n   if (UNLIKELY(!_readState.advanceToNextField(\n           iprot,\n@@ -411,7 +404,6 @@ void Range::readNoXfer(Protocol_* iprot) {\n _readField_min:\n   {\n     ::apache::thrift::detail::pm::protocol_methods< ::apache::thrift::type_class::integral, int32_t>::read(*iprot, this->min);\n-    isset_min = true;\n   }\n \n   if (UNLIKELY(!_readState.advanceToNextField(\n@@ -424,7 +416,6 @@ _readField_min:\n _readField_max:\n   {\n     ::apache::thrift::detail::pm::protocol_methods< ::apache::thrift::type_class::integral, int32_t>::read(*iprot, this->max);\n-    isset_max = true;\n   }\n \n   if (UNLIKELY(!_readState.advanceToNextField(\n@@ -438,12 +429,6 @@ _readField_max:\n _end:\n   _readState.readStructEnd(iprot);\n \n-  if (!isset_min) {\n-    TProtocolException::throwMissingRequiredField(\"min\", \"Range\");\n-  }\n-  if (!isset_max) {\n-    TProtocolException::throwMissingRequiredField(\"max\", \"Range\");\n-  }\n   return;\n \n _loop:\n", "diff --git a/thrift/compiler/test/fixtures/deprecated-enforce-required/cmd b/thrift/compiler/test/fixtures/deprecated-enforce-required/cmd\nnew file mode 100644\nindex 0000000000..356d8c5d2b\n--- /dev/null\n+++ b/thrift/compiler/test/fixtures/deprecated-enforce-required/cmd\n@@ -0,0 +1 @@\n+mstch_cpp2:deprecated_enforce_required src/module.thrift\n", "diff --git a/thrift/compiler/test/fixtures/deprecated-enforce-required/gen-cpp2/module_constants.cpp b/thrift/compiler/test/fixtures/deprecated-enforce-required/gen-cpp2/module_constants.cpp\nnew file mode 100644\nindex 0000000000..5370918011\n--- /dev/null\n+++ b/thrift/compiler/test/fixtures/deprecated-enforce-required/gen-cpp2/module_constants.cpp\n@@ -0,0 +1,14 @@\n+/**\n+ * Autogenerated by Thrift\n+ *\n+ * DO NOT EDIT UNLESS YOU ARE SURE THAT YOU KNOW WHAT YOU ARE DOING\n+ *  @generated\n+ */\n+\n+#include \"thrift/compiler/test/fixtures/deprecated-enforce-required/gen-cpp2/module_constants.h\"\n+\n+#include <folly/Indestructible.h>\n+\n+namespace cpp2 {\n+\n+} // cpp2\n", "diff --git a/thrift/compiler/test/fixtures/deprecated-enforce-required/gen-cpp2/module_constants.h b/thrift/compiler/test/fixtures/deprecated-enforce-required/gen-cpp2/module_constants.h\nnew file mode 100644\nindex 0000000000..433f0f0130\n--- /dev/null\n+++ b/thrift/compiler/test/fixtures/deprecated-enforce-required/gen-cpp2/module_constants.h\n@@ -0,0 +1,19 @@\n+/**\n+ * Autogenerated by Thrift\n+ *\n+ * DO NOT EDIT UNLESS YOU ARE SURE THAT YOU KNOW WHAT YOU ARE DOING\n+ *  @generated\n+ */\n+#pragma once\n+\n+#include <thrift/lib/cpp2/protocol/Protocol.h>\n+\n+#include \"thrift/compiler/test/fixtures/deprecated-enforce-required/gen-cpp2/module_types.h\"\n+\n+namespace cpp2 {\n+\n+struct module_constants {\n+\n+};\n+\n+} // cpp2\n", "diff --git a/thrift/compiler/test/fixtures/deprecated-enforce-required/gen-cpp2/module_data.cpp b/thrift/compiler/test/fixtures/deprecated-enforce-required/gen-cpp2/module_data.cpp\nnew file mode 100644\nindex 0000000000..134b99ad76\n--- /dev/null\n+++ b/thrift/compiler/test/fixtures/deprecated-enforce-required/gen-cpp2/module_data.cpp\n@@ -0,0 +1,10 @@\n+/**\n+ * Autogenerated by Thrift\n+ *\n+ * DO NOT EDIT UNLESS YOU ARE SURE THAT YOU KNOW WHAT YOU ARE DOING\n+ *  @generated\n+ */\n+\n+#include \"thrift/compiler/test/fixtures/deprecated-enforce-required/gen-cpp2/module_data.h\"\n+\n+\n", "diff --git a/thrift/compiler/test/fixtures/deprecated-enforce-required/gen-cpp2/module_data.h b/thrift/compiler/test/fixtures/deprecated-enforce-required/gen-cpp2/module_data.h\nnew file mode 100644\nindex 0000000000..5bdea780f1\n--- /dev/null\n+++ b/thrift/compiler/test/fixtures/deprecated-enforce-required/gen-cpp2/module_data.h\n@@ -0,0 +1,15 @@\n+/**\n+ * Autogenerated by Thrift\n+ *\n+ * DO NOT EDIT UNLESS YOU ARE SURE THAT YOU KNOW WHAT YOU ARE DOING\n+ *  @generated\n+ */\n+#pragma once\n+\n+#include <array>\n+#include <cstddef>\n+#include <thrift/lib/cpp/Thrift.h>\n+\n+#include \"thrift/compiler/test/fixtures/deprecated-enforce-required/gen-cpp2/module_types.h\"\n+\n+\n", "diff --git a/thrift/compiler/test/fixtures/deprecated-enforce-required/gen-cpp2/module_types.cpp b/thrift/compiler/test/fixtures/deprecated-enforce-required/gen-cpp2/module_types.cpp\nnew file mode 100644\nindex 0000000000..a4619b1609\n--- /dev/null\n+++ b/thrift/compiler/test/fixtures/deprecated-enforce-required/gen-cpp2/module_types.cpp\n@@ -0,0 +1,80 @@\n+/**\n+ * Autogenerated by Thrift\n+ *\n+ * DO NOT EDIT UNLESS YOU ARE SURE THAT YOU KNOW WHAT YOU ARE DOING\n+ *  @generated\n+ */\n+#include \"thrift/compiler/test/fixtures/deprecated-enforce-required/gen-cpp2/module_types.h\"\n+#include \"thrift/compiler/test/fixtures/deprecated-enforce-required/gen-cpp2/module_types.tcc\"\n+\n+#include <algorithm>\n+#include <folly/Indestructible.h>\n+\n+#include \"thrift/compiler/test/fixtures/deprecated-enforce-required/gen-cpp2/module_data.h\"\n+\n+\n+namespace apache {\n+namespace thrift {\n+namespace detail {\n+\n+void TccStructTraits<::cpp2::Foo>::translateFieldName(\n+    FOLLY_MAYBE_UNUSED folly::StringPiece _fname,\n+    FOLLY_MAYBE_UNUSED int16_t& fid,\n+    FOLLY_MAYBE_UNUSED apache::thrift::protocol::TType& _ftype) {\n+  if (false) {}\n+  else if (_fname == \"bar\") {\n+    fid = 1;\n+    _ftype = apache::thrift::protocol::T_I32;\n+  }\n+}\n+\n+} // namespace detail\n+} // namespace thrift\n+} // namespace apache\n+\n+namespace cpp2 {\n+\n+Foo::Foo(apache::thrift::FragileConstructor, int32_t bar__arg) :\n+    bar(std::move(bar__arg)) {}\n+\n+void Foo::__clear() {\n+  // clear all fields\n+  bar = 0;\n+}\n+\n+bool Foo::operator==(const Foo& rhs) const {\n+  (void)rhs;\n+  auto& lhs = *this;\n+  (void)lhs;\n+  if (!(lhs.bar == rhs.bar)) {\n+    return false;\n+  }\n+  return true;\n+}\n+\n+bool Foo::operator<(const Foo& rhs) const {\n+  (void)rhs;\n+  auto& lhs = *this;\n+  (void)lhs;\n+  if (!(lhs.bar == rhs.bar)) {\n+    return lhs.bar < rhs.bar;\n+  }\n+  return false;\n+}\n+\n+\n+void swap(Foo& a, Foo& b) {\n+  using ::std::swap;\n+  swap(a.bar, b.bar);\n+}\n+\n+template void Foo::readNoXfer<>(apache::thrift::BinaryProtocolReader*);\n+template uint32_t Foo::write<>(apache::thrift::BinaryProtocolWriter*) const;\n+template uint32_t Foo::serializedSize<>(apache::thrift::BinaryProtocolWriter const*) const;\n+template uint32_t Foo::serializedSizeZC<>(apache::thrift::BinaryProtocolWriter const*) const;\n+template void Foo::readNoXfer<>(apache::thrift::CompactProtocolReader*);\n+template uint32_t Foo::write<>(apache::thrift::CompactProtocolWriter*) const;\n+template uint32_t Foo::serializedSize<>(apache::thrift::CompactProtocolWriter const*) const;\n+template uint32_t Foo::serializedSizeZC<>(apache::thrift::CompactProtocolWriter const*) const;\n+\n+} // cpp2\n", "diff --git a/thrift/compiler/test/fixtures/deprecated-enforce-required/gen-cpp2/module_types.h b/thrift/compiler/test/fixtures/deprecated-enforce-required/gen-cpp2/module_types.h\nnew file mode 100644\nindex 0000000000..b23ad0b70e\n--- /dev/null\n+++ b/thrift/compiler/test/fixtures/deprecated-enforce-required/gen-cpp2/module_types.h\n@@ -0,0 +1,91 @@\n+/**\n+ * Autogenerated by Thrift\n+ *\n+ * DO NOT EDIT UNLESS YOU ARE SURE THAT YOU KNOW WHAT YOU ARE DOING\n+ *  @generated\n+ */\n+#pragma once\n+\n+#include <thrift/lib/cpp2/GeneratedHeaderHelper.h>\n+#include <thrift/lib/cpp2/Thrift.h>\n+#include <thrift/lib/cpp2/gen/module_types_h.h>\n+#include <thrift/lib/cpp2/protocol/Protocol.h>\n+\n+\n+// BEGIN declare_enums\n+\n+// END declare_enums\n+// BEGIN struct_indirection\n+\n+// END struct_indirection\n+// BEGIN forward_declare\n+namespace cpp2 {\n+class Foo;\n+} // cpp2\n+// END forward_declare\n+// BEGIN typedefs\n+\n+// END typedefs\n+// BEGIN hash_and_equal_to\n+// END hash_and_equal_to\n+namespace cpp2 {\n+class Foo final : private apache::thrift::detail::st::ComparisonOperators<Foo> {\n+ public:\n+\n+  Foo() :\n+      bar(0) {}\n+  // FragileConstructor for use in initialization lists only.\n+  [[deprecated(\"This constructor is deprecated\")]]\n+  Foo(apache::thrift::FragileConstructor, int32_t bar__arg);\n+  template <typename _T>\n+  void __set_field(::apache::thrift::detail::argument_wrapper<1, _T> arg) {\n+    bar = arg.extract();\n+  }\n+\n+  Foo(Foo&&) = default;\n+\n+  Foo(const Foo&) = default;\n+\n+  Foo& operator=(Foo&&) = default;\n+\n+  Foo& operator=(const Foo&) = default;\n+  void __clear();\n+  int32_t bar;\n+  bool operator==(const Foo& rhs) const;\n+  bool operator<(const Foo& rhs) const;\n+\n+  int32_t get_bar() const {\n+    return bar;\n+  }\n+\n+  int32_t& set_bar(int32_t bar_) {\n+    bar = bar_;\n+    return bar;\n+  }\n+\n+  template <class Protocol_>\n+  uint32_t read(Protocol_* iprot);\n+  template <class Protocol_>\n+  uint32_t serializedSize(Protocol_ const* prot_) const;\n+  template <class Protocol_>\n+  uint32_t serializedSizeZC(Protocol_ const* prot_) const;\n+  template <class Protocol_>\n+  uint32_t write(Protocol_* prot_) const;\n+\n+ private:\n+  template <class Protocol_>\n+  void readNoXfer(Protocol_* iprot);\n+\n+  friend class ::apache::thrift::Cpp2Ops< Foo >;\n+};\n+\n+void swap(Foo& a, Foo& b);\n+\n+template <class Protocol_>\n+uint32_t Foo::read(Protocol_* iprot) {\n+  auto _xferStart = iprot->getCursorPosition();\n+  readNoXfer(iprot);\n+  return iprot->getCursorPosition() - _xferStart;\n+}\n+\n+} // cpp2\n", "diff --git a/thrift/compiler/test/fixtures/deprecated-enforce-required/gen-cpp2/module_types.tcc b/thrift/compiler/test/fixtures/deprecated-enforce-required/gen-cpp2/module_types.tcc\nnew file mode 100644\nindex 0000000000..b0e355fbad\n--- /dev/null\n+++ b/thrift/compiler/test/fixtures/deprecated-enforce-required/gen-cpp2/module_types.tcc\n@@ -0,0 +1,145 @@\n+/**\n+ * Autogenerated by Thrift\n+ *\n+ * DO NOT EDIT UNLESS YOU ARE SURE THAT YOU KNOW WHAT YOU ARE DOING\n+ *  @generated\n+ */\n+#pragma once\n+\n+#include \"thrift/compiler/test/fixtures/deprecated-enforce-required/gen-cpp2/module_types.h\"\n+\n+#include <thrift/lib/cpp2/GeneratedSerializationCodeHelper.h>\n+#include <thrift/lib/cpp2/gen/module_types_tcc.h>\n+\n+#include <thrift/lib/cpp2/protocol/BinaryProtocol.h>\n+#include <thrift/lib/cpp2/protocol/CompactProtocol.h>\n+#include <thrift/lib/cpp2/protocol/ProtocolReaderStructReadState.h>\n+\n+\n+namespace apache {\n+namespace thrift {\n+namespace detail {\n+\n+template <>\n+struct TccStructTraits<::cpp2::Foo> {\n+  static void translateFieldName(\n+      folly::StringPiece _fname,\n+      int16_t& fid,\n+      apache::thrift::protocol::TType& _ftype);\n+};\n+\n+} // namespace detail\n+} // namespace thrift\n+} // namespace apache\n+\n+namespace cpp2 {\n+\n+template <class Protocol_>\n+void Foo::readNoXfer(Protocol_* iprot) {\n+  apache::thrift::detail::ProtocolReaderStructReadState<Protocol_> _readState;\n+\n+  _readState.readStructBegin(iprot);\n+\n+  using apache::thrift::TProtocolException;\n+\n+  bool isset_bar = false;\n+\n+  if (UNLIKELY(!_readState.advanceToNextField(\n+          iprot,\n+          0,\n+          1,\n+          apache::thrift::protocol::T_I32))) {\n+    goto _loop;\n+  }\n+_readField_bar:\n+  {\n+    ::apache::thrift::detail::pm::protocol_methods< ::apache::thrift::type_class::integral, int32_t>::read(*iprot, this->bar);\n+    isset_bar = true;\n+  }\n+\n+  if (UNLIKELY(!_readState.advanceToNextField(\n+          iprot,\n+          1,\n+          0,\n+          apache::thrift::protocol::T_STOP))) {\n+    goto _loop;\n+  }\n+\n+_end:\n+  _readState.readStructEnd(iprot);\n+\n+  if (!isset_bar) {\n+    TProtocolException::throwMissingRequiredField(\"bar\", \"Foo\");\n+  }\n+  return;\n+\n+_loop:\n+  if (_readState.fieldType == apache::thrift::protocol::T_STOP) {\n+    goto _end;\n+  }\n+  if (iprot->kUsesFieldNames()) {\n+    apache::thrift::detail::TccStructTraits<Foo>::translateFieldName(_readState.fieldName(), _readState.fieldId, _readState.fieldType);\n+  }\n+\n+  switch (_readState.fieldId) {\n+    case 1:\n+    {\n+      if (LIKELY(_readState.isCompatibleWithType(iprot, apache::thrift::protocol::T_I32))) {\n+        goto _readField_bar;\n+      } else {\n+        goto _skip;\n+      }\n+    }\n+    default:\n+    {\n+_skip:\n+      iprot->skip(_readState.fieldType);\n+      _readState.readFieldEnd(iprot);\n+      _readState.readFieldBeginNoInline(iprot);\n+      goto _loop;\n+    }\n+  }\n+}\n+\n+template <class Protocol_>\n+uint32_t Foo::serializedSize(Protocol_ const* prot_) const {\n+  uint32_t xfer = 0;\n+  xfer += prot_->serializedStructSize(\"Foo\");\n+  xfer += prot_->serializedFieldSize(\"bar\", apache::thrift::protocol::T_I32, 1);\n+  xfer += ::apache::thrift::detail::pm::protocol_methods< ::apache::thrift::type_class::integral, int32_t>::serializedSize<false>(*prot_, this->bar);\n+  xfer += prot_->serializedSizeStop();\n+  return xfer;\n+}\n+\n+template <class Protocol_>\n+uint32_t Foo::serializedSizeZC(Protocol_ const* prot_) const {\n+  uint32_t xfer = 0;\n+  xfer += prot_->serializedStructSize(\"Foo\");\n+  xfer += prot_->serializedFieldSize(\"bar\", apache::thrift::protocol::T_I32, 1);\n+  xfer += ::apache::thrift::detail::pm::protocol_methods< ::apache::thrift::type_class::integral, int32_t>::serializedSize<false>(*prot_, this->bar);\n+  xfer += prot_->serializedSizeStop();\n+  return xfer;\n+}\n+\n+template <class Protocol_>\n+uint32_t Foo::write(Protocol_* prot_) const {\n+  uint32_t xfer = 0;\n+  xfer += prot_->writeStructBegin(\"Foo\");\n+  xfer += prot_->writeFieldBegin(\"bar\", apache::thrift::protocol::T_I32, 1);\n+  xfer += ::apache::thrift::detail::pm::protocol_methods< ::apache::thrift::type_class::integral, int32_t>::write(*prot_, this->bar);\n+  xfer += prot_->writeFieldEnd();\n+  xfer += prot_->writeFieldStop();\n+  xfer += prot_->writeStructEnd();\n+  return xfer;\n+}\n+\n+extern template void Foo::readNoXfer<>(apache::thrift::BinaryProtocolReader*);\n+extern template uint32_t Foo::write<>(apache::thrift::BinaryProtocolWriter*) const;\n+extern template uint32_t Foo::serializedSize<>(apache::thrift::BinaryProtocolWriter const*) const;\n+extern template uint32_t Foo::serializedSizeZC<>(apache::thrift::BinaryProtocolWriter const*) const;\n+extern template void Foo::readNoXfer<>(apache::thrift::CompactProtocolReader*);\n+extern template uint32_t Foo::write<>(apache::thrift::CompactProtocolWriter*) const;\n+extern template uint32_t Foo::serializedSize<>(apache::thrift::CompactProtocolWriter const*) const;\n+extern template uint32_t Foo::serializedSizeZC<>(apache::thrift::CompactProtocolWriter const*) const;\n+\n+} // cpp2\n", "diff --git a/thrift/compiler/test/fixtures/deprecated-enforce-required/gen-cpp2/module_types_custom_protocol.h b/thrift/compiler/test/fixtures/deprecated-enforce-required/gen-cpp2/module_types_custom_protocol.h\nnew file mode 100644\nindex 0000000000..11b260c478\n--- /dev/null\n+++ b/thrift/compiler/test/fixtures/deprecated-enforce-required/gen-cpp2/module_types_custom_protocol.h\n@@ -0,0 +1,18 @@\n+/**\n+ * Autogenerated by Thrift\n+ *\n+ * DO NOT EDIT UNLESS YOU ARE SURE THAT YOU KNOW WHAT YOU ARE DOING\n+ *  @generated\n+ */\n+#pragma once\n+\n+\n+/**\n+ * This header file includes the tcc files of the corresponding header file\n+ * and the header files of its dependent types. Include this header file\n+ * only when you need to use custom protocols (e.g. DebugProtocol,\n+ * VirtualProtocol) to read/write thrift structs.\n+ */\n+\n+#include \"thrift/compiler/test/fixtures/deprecated-enforce-required/gen-cpp2/module_types.tcc\"\n+\n", "diff --git a/thrift/compiler/test/fixtures/deprecated-enforce-required/src/module.thrift b/thrift/compiler/test/fixtures/deprecated-enforce-required/src/module.thrift\nnew file mode 100644\nindex 0000000000..d5a0de113a\n--- /dev/null\n+++ b/thrift/compiler/test/fixtures/deprecated-enforce-required/src/module.thrift\n@@ -0,0 +1,3 @@\n+struct Foo {\n+  1: required i32 bar\n+}\n", "diff --git a/thrift/compiler/test/fixtures/exceptions/gen-cpp2/module_types.tcc b/thrift/compiler/test/fixtures/exceptions/gen-cpp2/module_types.tcc\nindex 19732aacbe..3a4ee26f0e 100644\n--- a/thrift/compiler/test/fixtures/exceptions/gen-cpp2/module_types.tcc\n+++ b/thrift/compiler/test/fixtures/exceptions/gen-cpp2/module_types.tcc\n@@ -134,7 +134,6 @@ void Fiery::readNoXfer(Protocol_* iprot) {\n \n   using apache::thrift::TProtocolException;\n \n-  bool isset_message = false;\n \n   if (UNLIKELY(!_readState.advanceToNextField(\n           iprot,\n@@ -146,7 +145,6 @@ void Fiery::readNoXfer(Protocol_* iprot) {\n _readField_message:\n   {\n     iprot->readString(this->message);\n-    isset_message = true;\n   }\n \n   if (UNLIKELY(!_readState.advanceToNextField(\n@@ -160,9 +158,6 @@ _readField_message:\n _end:\n   _readState.readStructEnd(iprot);\n \n-  if (!isset_message) {\n-    TProtocolException::throwMissingRequiredField(\"message\", \"Fiery\");\n-  }\n   return;\n \n _loop:\n", "diff --git a/thrift/compiler/test/fixtures/fatal/gen-cpp2/module_types.tcc b/thrift/compiler/test/fixtures/fatal/gen-cpp2/module_types.tcc\nindex 2996c9359c..6889a6d5d0 100644\n--- a/thrift/compiler/test/fixtures/fatal/gen-cpp2/module_types.tcc\n+++ b/thrift/compiler/test/fixtures/fatal/gen-cpp2/module_types.tcc\n@@ -2211,8 +2211,6 @@ void struct1::readNoXfer(Protocol_* iprot) {\n \n   using apache::thrift::TProtocolException;\n \n-  bool isset_field0 = false;\n-  bool isset_field3 = false;\n \n   if (UNLIKELY(!_readState.advanceToNextField(\n           iprot,\n@@ -2224,7 +2222,6 @@ void struct1::readNoXfer(Protocol_* iprot) {\n _readField_field0:\n   {\n     ::apache::thrift::detail::pm::protocol_methods< ::apache::thrift::type_class::integral, int32_t>::read(*iprot, this->field0);\n-    isset_field0 = true;\n   }\n \n   if (UNLIKELY(!_readState.advanceToNextField(\n@@ -2263,7 +2260,6 @@ _readField_field2:\n _readField_field3:\n   {\n     ::apache::thrift::detail::pm::protocol_methods< ::apache::thrift::type_class::enumeration,  ::test_cpp2::cpp_reflection::enum2>::read(*iprot, this->field3);\n-    isset_field3 = true;\n   }\n \n   if (UNLIKELY(!_readState.advanceToNextField(\n@@ -2303,12 +2299,6 @@ _readField_field5:\n _end:\n   _readState.readStructEnd(iprot);\n \n-  if (!isset_field0) {\n-    TProtocolException::throwMissingRequiredField(\"field0\", \"struct1\");\n-  }\n-  if (!isset_field3) {\n-    TProtocolException::throwMissingRequiredField(\"field3\", \"struct1\");\n-  }\n   return;\n \n _loop:\n@@ -3346,7 +3336,6 @@ void struct4::readNoXfer(Protocol_* iprot) {\n \n   using apache::thrift::TProtocolException;\n \n-  bool isset_field0 = false;\n \n   if (UNLIKELY(!_readState.advanceToNextField(\n           iprot,\n@@ -3358,7 +3347,6 @@ void struct4::readNoXfer(Protocol_* iprot) {\n _readField_field0:\n   {\n     ::apache::thrift::detail::pm::protocol_methods< ::apache::thrift::type_class::integral, int32_t>::read(*iprot, this->field0);\n-    isset_field0 = true;\n   }\n \n   if (UNLIKELY(!_readState.advanceToNextField(\n@@ -3412,9 +3400,6 @@ _readField_field3:\n _end:\n   _readState.readStructEnd(iprot);\n \n-  if (!isset_field0) {\n-    TProtocolException::throwMissingRequiredField(\"field0\", \"struct4\");\n-  }\n   return;\n \n _loop:\n@@ -3567,7 +3552,6 @@ void struct5::readNoXfer(Protocol_* iprot) {\n \n   using apache::thrift::TProtocolException;\n \n-  bool isset_field0 = false;\n \n   if (UNLIKELY(!_readState.advanceToNextField(\n           iprot,\n@@ -3579,7 +3563,6 @@ void struct5::readNoXfer(Protocol_* iprot) {\n _readField_field0:\n   {\n     ::apache::thrift::detail::pm::protocol_methods< ::apache::thrift::type_class::integral, int32_t>::read(*iprot, this->field0);\n-    isset_field0 = true;\n   }\n \n   if (UNLIKELY(!_readState.advanceToNextField(\n@@ -3645,9 +3628,6 @@ _readField_field4:\n _end:\n   _readState.readStructEnd(iprot);\n \n-  if (!isset_field0) {\n-    TProtocolException::throwMissingRequiredField(\"field0\", \"struct5\");\n-  }\n   return;\n \n _loop:\n", "diff --git a/thrift/compiler/test/fixtures/mcpp2-compare/gen-cpp2/extra_services_types.tcc b/thrift/compiler/test/fixtures/mcpp2-compare/gen-cpp2/extra_services_types.tcc\nindex f3d3ae83a1..e5339aebf7 100644\n--- a/thrift/compiler/test/fixtures/mcpp2-compare/gen-cpp2/extra_services_types.tcc\n+++ b/thrift/compiler/test/fixtures/mcpp2-compare/gen-cpp2/extra_services_types.tcc\n@@ -43,10 +43,6 @@ void containerStruct2::readNoXfer(Protocol_* iprot) {\n \n   using apache::thrift::TProtocolException;\n \n-  bool isset_req_fieldA = false;\n-  bool isset_req_fieldB = false;\n-  bool isset_req_fieldC = false;\n-  bool isset_req_fieldE = false;\n \n   if (UNLIKELY(!_readState.advanceToNextField(\n           iprot,\n@@ -70,7 +66,6 @@ _readField_fieldA:\n _readField_req_fieldA:\n   {\n     iprot->readBool(this->req_fieldA);\n-    isset_req_fieldA = true;\n   }\n \n   if (UNLIKELY(!_readState.advanceToNextField(\n@@ -110,7 +105,6 @@ _readField_req_fieldB:\n   {\n     this->req_fieldB = std::map<std::string, bool>();\n     ::apache::thrift::detail::pm::protocol_methods< ::apache::thrift::type_class::map<::apache::thrift::type_class::string, ::apache::thrift::type_class::integral>, std::map<std::string, bool>>::read(*iprot, this->req_fieldB);\n-    isset_req_fieldB = true;\n   }\n \n   if (UNLIKELY(!_readState.advanceToNextField(\n@@ -150,7 +144,6 @@ _readField_req_fieldC:\n   {\n     this->req_fieldC = std::set<int32_t>();\n     ::apache::thrift::detail::pm::protocol_methods< ::apache::thrift::type_class::set<::apache::thrift::type_class::integral>, std::set<int32_t>>::read(*iprot, this->req_fieldC);\n-    isset_req_fieldC = true;\n   }\n \n   if (UNLIKELY(!_readState.advanceToNextField(\n@@ -200,7 +193,6 @@ _readField_fieldE:\n _readField_req_fieldE:\n   {\n     iprot->readString(this->req_fieldE);\n-    isset_req_fieldE = true;\n   }\n \n   if (UNLIKELY(!_readState.advanceToNextField(\n@@ -227,18 +219,6 @@ _readField_opt_fieldE:\n _end:\n   _readState.readStructEnd(iprot);\n \n-  if (!isset_req_fieldA) {\n-    TProtocolException::throwMissingRequiredField(\"req_fieldA\", \"containerStruct2\");\n-  }\n-  if (!isset_req_fieldB) {\n-    TProtocolException::throwMissingRequiredField(\"req_fieldB\", \"containerStruct2\");\n-  }\n-  if (!isset_req_fieldC) {\n-    TProtocolException::throwMissingRequiredField(\"req_fieldC\", \"containerStruct2\");\n-  }\n-  if (!isset_req_fieldE) {\n-    TProtocolException::throwMissingRequiredField(\"req_fieldE\", \"containerStruct2\");\n-  }\n   return;\n \n _loop:\n", "diff --git a/thrift/compiler/test/fixtures/mcpp2-compare/gen-cpp2/module_types.tcc b/thrift/compiler/test/fixtures/mcpp2-compare/gen-cpp2/module_types.tcc\nindex 62e19c52d0..af3a1091c3 100644\n--- a/thrift/compiler/test/fixtures/mcpp2-compare/gen-cpp2/module_types.tcc\n+++ b/thrift/compiler/test/fixtures/mcpp2-compare/gen-cpp2/module_types.tcc\n@@ -493,7 +493,6 @@ void MyStruct::readNoXfer(Protocol_* iprot) {\n \n   using apache::thrift::TProtocolException;\n \n-  bool isset_MyBinaryField3 = false;\n \n   if (UNLIKELY(!_readState.advanceToNextField(\n           iprot,\n@@ -583,7 +582,6 @@ _readField_MyBinaryField2:\n _readField_MyBinaryField3:\n   {\n     iprot->readBinary(this->MyBinaryField3);\n-    isset_MyBinaryField3 = true;\n   }\n \n   if (UNLIKELY(!_readState.advanceToNextField(\n@@ -625,9 +623,6 @@ _readField_MyMapEnumAndInt:\n _end:\n   _readState.readStructEnd(iprot);\n \n-  if (!isset_MyBinaryField3) {\n-    TProtocolException::throwMissingRequiredField(\"MyBinaryField3\", \"MyStruct\");\n-  }\n   return;\n \n _loop:\n@@ -1919,9 +1914,6 @@ void AnException::readNoXfer(Protocol_* iprot) {\n \n   using apache::thrift::TProtocolException;\n \n-  bool isset_req_code = false;\n-  bool isset_req_message = false;\n-  bool isset_req_exception_map = false;\n \n   if (UNLIKELY(!_readState.advanceToNextField(\n           iprot,\n@@ -1946,7 +1938,6 @@ _readField_code:\n _readField_req_code:\n   {\n     ::apache::thrift::detail::pm::protocol_methods< ::apache::thrift::type_class::integral, int32_t>::read(*iprot, this->req_code);\n-    isset_req_code = true;\n   }\n \n   if (UNLIKELY(!_readState.advanceToNextField(\n@@ -1972,7 +1963,6 @@ _readField_message2:\n _readField_req_message:\n   {\n     iprot->readString(this->req_message);\n-    isset_req_message = true;\n   }\n \n   if (UNLIKELY(!_readState.advanceToNextField(\n@@ -2028,7 +2018,6 @@ _readField_req_exception_map:\n   {\n     this->req_exception_map = std::map<std::string, int32_t>();\n     ::apache::thrift::detail::pm::protocol_methods< ::apache::thrift::type_class::map<::apache::thrift::type_class::string, ::apache::thrift::type_class::integral>, std::map<std::string, int32_t>>::read(*iprot, this->req_exception_map);\n-    isset_req_exception_map = true;\n   }\n \n   if (UNLIKELY(!_readState.advanceToNextField(\n@@ -2138,15 +2127,6 @@ _readField_a_union_typedef_list:\n _end:\n   _readState.readStructEnd(iprot);\n \n-  if (!isset_req_code) {\n-    TProtocolException::throwMissingRequiredField(\"req_code\", \"AnException\");\n-  }\n-  if (!isset_req_message) {\n-    TProtocolException::throwMissingRequiredField(\"req_message\", \"AnException\");\n-  }\n-  if (!isset_req_exception_map) {\n-    TProtocolException::throwMissingRequiredField(\"req_exception_map\", \"AnException\");\n-  }\n   return;\n \n _loop:\n@@ -2509,7 +2489,6 @@ void AnotherException::readNoXfer(Protocol_* iprot) {\n \n   using apache::thrift::TProtocolException;\n \n-  bool isset_req_code = false;\n \n   if (UNLIKELY(!_readState.advanceToNextField(\n           iprot,\n@@ -2534,7 +2513,6 @@ _readField_code:\n _readField_req_code:\n   {\n     ::apache::thrift::detail::pm::protocol_methods< ::apache::thrift::type_class::integral, int32_t>::read(*iprot, this->req_code);\n-    isset_req_code = true;\n   }\n \n   if (UNLIKELY(!_readState.advanceToNextField(\n@@ -2561,9 +2539,6 @@ _readField_message:\n _end:\n   _readState.readStructEnd(iprot);\n \n-  if (!isset_req_code) {\n-    TProtocolException::throwMissingRequiredField(\"req_code\", \"AnotherException\");\n-  }\n   return;\n \n _loop:\n@@ -2692,13 +2667,6 @@ void containerStruct::readNoXfer(Protocol_* iprot) {\n \n   using apache::thrift::TProtocolException;\n \n-  bool isset_req_fieldA = false;\n-  bool isset_req_fieldB = false;\n-  bool isset_req_fieldC = false;\n-  bool isset_req_fieldE = false;\n-  bool isset_req_fieldR = false;\n-  bool isset_req_fieldV = false;\n-  bool isset_req_fieldX = false;\n \n   if (UNLIKELY(!_readState.advanceToNextField(\n           iprot,\n@@ -2723,7 +2691,6 @@ _readField_fieldA:\n _readField_req_fieldA:\n   {\n     iprot->readBool(this->req_fieldA);\n-    isset_req_fieldA = true;\n   }\n \n   if (UNLIKELY(!_readState.advanceToNextField(\n@@ -2764,7 +2731,6 @@ _readField_req_fieldB:\n   {\n     this->req_fieldB = std::map<std::string, bool>();\n     ::apache::thrift::detail::pm::protocol_methods< ::apache::thrift::type_class::map<::apache::thrift::type_class::string, ::apache::thrift::type_class::integral>, std::map<std::string, bool>>::read(*iprot, this->req_fieldB);\n-    isset_req_fieldB = true;\n   }\n \n   if (UNLIKELY(!_readState.advanceToNextField(\n@@ -2806,7 +2772,6 @@ _readField_req_fieldC:\n   {\n     this->req_fieldC = std::set<int32_t>();\n     ::apache::thrift::detail::pm::protocol_methods< ::apache::thrift::type_class::set<::apache::thrift::type_class::integral>, std::set<int32_t>>::read(*iprot, this->req_fieldC);\n-    isset_req_fieldC = true;\n   }\n \n   if (UNLIKELY(!_readState.advanceToNextField(\n@@ -2859,7 +2824,6 @@ _readField_fieldE:\n _readField_req_fieldE:\n   {\n     iprot->readString(this->req_fieldE);\n-    isset_req_fieldE = true;\n   }\n \n   if (UNLIKELY(!_readState.advanceToNextField(\n@@ -3063,7 +3027,6 @@ _readField_fieldR:\n _readField_req_fieldR:\n   {\n     ::apache::thrift::detail::pm::protocol_methods< ::apache::thrift::type_class::enumeration,  ::some::valid::ns::MyEnumA>::read(*iprot, this->req_fieldR);\n-    isset_req_fieldR = true;\n   }\n \n   if (UNLIKELY(!_readState.advanceToNextField(\n@@ -3143,7 +3106,6 @@ _readField_fieldV:\n _readField_req_fieldV:\n   {\n     ::apache::thrift::Cpp2Ops<  ::some::valid::ns::MyStruct>::read(iprot, &this->req_fieldV);\n-    isset_req_fieldV = true;\n   }\n \n   if (UNLIKELY(!_readState.advanceToNextField(\n@@ -3196,7 +3158,6 @@ _readField_fieldX:\n _readField_req_fieldX:\n   {\n     ::apache::thrift::Cpp2Ops<  ::some::valid::ns::ComplexUnion>::read(iprot, &this->req_fieldX);\n-    isset_req_fieldX = true;\n   }\n \n   if (UNLIKELY(!_readState.advanceToNextField(\n@@ -3332,27 +3293,6 @@ _readField_fieldSD:\n _end:\n   _readState.readStructEnd(iprot);\n \n-  if (!isset_req_fieldA) {\n-    TProtocolException::throwMissingRequiredField(\"req_fieldA\", \"containerStruct\");\n-  }\n-  if (!isset_req_fieldB) {\n-    TProtocolException::throwMissingRequiredField(\"req_fieldB\", \"containerStruct\");\n-  }\n-  if (!isset_req_fieldC) {\n-    TProtocolException::throwMissingRequiredField(\"req_fieldC\", \"containerStruct\");\n-  }\n-  if (!isset_req_fieldE) {\n-    TProtocolException::throwMissingRequiredField(\"req_fieldE\", \"containerStruct\");\n-  }\n-  if (!isset_req_fieldR) {\n-    TProtocolException::throwMissingRequiredField(\"req_fieldR\", \"containerStruct\");\n-  }\n-  if (!isset_req_fieldV) {\n-    TProtocolException::throwMissingRequiredField(\"req_fieldV\", \"containerStruct\");\n-  }\n-  if (!isset_req_fieldX) {\n-    TProtocolException::throwMissingRequiredField(\"req_fieldX\", \"containerStruct\");\n-  }\n   return;\n \n _loop:\n@@ -4336,7 +4276,6 @@ void MyIncludedStruct::readNoXfer(Protocol_* iprot) {\n \n   using apache::thrift::TProtocolException;\n \n-  bool isset_ARequiredField = false;\n \n   if (UNLIKELY(!_readState.advanceToNextField(\n           iprot,\n@@ -4388,7 +4327,6 @@ _readField_ARefField:\n _readField_ARequiredField:\n   {\n     ::apache::thrift::Cpp2Ops<  ::some::valid::ns::AStruct>::read(iprot, &this->ARequiredField);\n-    isset_ARequiredField = true;\n   }\n \n   if (UNLIKELY(!_readState.advanceToNextField(\n@@ -4402,9 +4340,6 @@ _readField_ARequiredField:\n _end:\n   _readState.readStructEnd(iprot);\n \n-  if (!isset_ARequiredField) {\n-    TProtocolException::throwMissingRequiredField(\"ARequiredField\", \"MyIncludedStruct\");\n-  }\n   return;\n \n _loop:\n@@ -4567,12 +4502,6 @@ void AnnotatedStruct::readNoXfer(Protocol_* iprot) {\n \n   using apache::thrift::TProtocolException;\n \n-  bool isset_req_cpp_unique_ref = false;\n-  bool isset_req_cpp2_unique_ref = false;\n-  bool isset_req_container_with_ref = false;\n-  bool isset_req_ref_type_shared = false;\n-  bool isset_req_ref_type_const = false;\n-  bool isset_req_ref_type_unique = false;\n \n   if (UNLIKELY(!_readState.advanceToNextField(\n           iprot,\n@@ -4641,7 +4570,6 @@ _readField_req_cpp_unique_ref:\n     std::unique_ptr< ::some::valid::ns::containerStruct> ptr = std::make_unique< ::some::valid::ns::containerStruct>();\n     ::apache::thrift::Cpp2Ops<  ::some::valid::ns::containerStruct>::read(iprot, ptr.get());\n     this->req_cpp_unique_ref = std::move(ptr);\n-    isset_req_cpp_unique_ref = true;\n   }\n \n   if (UNLIKELY(!_readState.advanceToNextField(\n@@ -4656,7 +4584,6 @@ _readField_req_cpp2_unique_ref:\n     std::unique_ptr< ::some::valid::ns::containerStruct> ptr = std::make_unique< ::some::valid::ns::containerStruct>();\n     ::apache::thrift::Cpp2Ops<  ::some::valid::ns::containerStruct>::read(iprot, ptr.get());\n     this->req_cpp2_unique_ref = std::move(ptr);\n-    isset_req_cpp2_unique_ref = true;\n   }\n \n   if (UNLIKELY(!_readState.advanceToNextField(\n@@ -4671,7 +4598,6 @@ _readField_req_container_with_ref:\n     std::unique_ptr<std::vector<std::string>> ptr = std::make_unique<std::vector<std::string>>();\n     ::apache::thrift::detail::pm::protocol_methods< ::apache::thrift::type_class::list<::apache::thrift::type_class::string>, std::vector<std::string>>::read(*iprot, *ptr);\n     this->req_container_with_ref = std::move(ptr);\n-    isset_req_container_with_ref = true;\n   }\n \n   if (UNLIKELY(!_readState.advanceToNextField(\n@@ -4770,7 +4696,6 @@ _readField_req_ref_type_shared:\n     std::unique_ptr< ::some::valid::ns::containerStruct> ptr = std::make_unique< ::some::valid::ns::containerStruct>();\n     ::apache::thrift::Cpp2Ops<  ::some::valid::ns::containerStruct>::read(iprot, ptr.get());\n     this->req_ref_type_shared = std::move(ptr);\n-    isset_req_ref_type_shared = true;\n   }\n \n   if (UNLIKELY(!_readState.advanceToNextField(\n@@ -4785,7 +4710,6 @@ _readField_req_ref_type_const:\n     std::unique_ptr< ::some::valid::ns::containerStruct> ptr = std::make_unique< ::some::valid::ns::containerStruct>();\n     ::apache::thrift::Cpp2Ops<  ::some::valid::ns::containerStruct>::read(iprot, ptr.get());\n     this->req_ref_type_const = std::move(ptr);\n-    isset_req_ref_type_const = true;\n   }\n \n   if (UNLIKELY(!_readState.advanceToNextField(\n@@ -4800,7 +4724,6 @@ _readField_req_ref_type_unique:\n     std::unique_ptr<std::vector<std::string>> ptr = std::make_unique<std::vector<std::string>>();\n     ::apache::thrift::detail::pm::protocol_methods< ::apache::thrift::type_class::list<::apache::thrift::type_class::string>, std::vector<std::string>>::read(*iprot, *ptr);\n     this->req_ref_type_unique = std::move(ptr);\n-    isset_req_ref_type_unique = true;\n   }\n \n   if (UNLIKELY(!_readState.advanceToNextField(\n@@ -5143,24 +5066,6 @@ _readField_struct_struct:\n _end:\n   _readState.readStructEnd(iprot);\n \n-  if (!isset_req_cpp_unique_ref) {\n-    TProtocolException::throwMissingRequiredField(\"req_cpp_unique_ref\", \"AnnotatedStruct\");\n-  }\n-  if (!isset_req_cpp2_unique_ref) {\n-    TProtocolException::throwMissingRequiredField(\"req_cpp2_unique_ref\", \"AnnotatedStruct\");\n-  }\n-  if (!isset_req_container_with_ref) {\n-    TProtocolException::throwMissingRequiredField(\"req_container_with_ref\", \"AnnotatedStruct\");\n-  }\n-  if (!isset_req_ref_type_shared) {\n-    TProtocolException::throwMissingRequiredField(\"req_ref_type_shared\", \"AnnotatedStruct\");\n-  }\n-  if (!isset_req_ref_type_const) {\n-    TProtocolException::throwMissingRequiredField(\"req_ref_type_const\", \"AnnotatedStruct\");\n-  }\n-  if (!isset_req_ref_type_unique) {\n-    TProtocolException::throwMissingRequiredField(\"req_ref_type_unique\", \"AnnotatedStruct\");\n-  }\n   return;\n \n _loop:\n@@ -6802,7 +6707,6 @@ void AllRequiredNoExceptMoveCtrStruct::readNoXfer(Protocol_* iprot) {\n \n   using apache::thrift::TProtocolException;\n \n-  bool isset_intField = false;\n \n   if (UNLIKELY(!_readState.advanceToNextField(\n           iprot,\n@@ -6814,7 +6718,6 @@ void AllRequiredNoExceptMoveCtrStruct::readNoXfer(Protocol_* iprot) {\n _readField_intField:\n   {\n     ::apache::thrift::detail::pm::protocol_methods< ::apache::thrift::type_class::integral, int64_t>::read(*iprot, this->intField);\n-    isset_intField = true;\n   }\n \n   if (UNLIKELY(!_readState.advanceToNextField(\n@@ -6828,9 +6731,6 @@ _readField_intField:\n _end:\n   _readState.readStructEnd(iprot);\n \n-  if (!isset_intField) {\n-    TProtocolException::throwMissingRequiredField(\"intField\", \"AllRequiredNoExceptMoveCtrStruct\");\n-  }\n   return;\n \n _loop:\n", "diff --git a/thrift/compiler/test/fixtures/nimble/gen-cpp2/module_types.tcc b/thrift/compiler/test/fixtures/nimble/gen-cpp2/module_types.tcc\nindex 6c0063ed59..b5b1251563 100644\n--- a/thrift/compiler/test/fixtures/nimble/gen-cpp2/module_types.tcc\n+++ b/thrift/compiler/test/fixtures/nimble/gen-cpp2/module_types.tcc\n@@ -43,7 +43,6 @@ void BasicTypes::readNoXfer(Protocol_* iprot) {\n \n   using apache::thrift::TProtocolException;\n \n-  bool isset_first = false;\n \n   if (UNLIKELY(!_readState.advanceToNextField(\n           iprot,\n@@ -55,7 +54,6 @@ void BasicTypes::readNoXfer(Protocol_* iprot) {\n _readField_first:\n   {\n     ::apache::thrift::detail::pm::protocol_methods< ::apache::thrift::type_class::integral, int32_t>::read(*iprot, this->first);\n-    isset_first = true;\n   }\n \n   if (UNLIKELY(!_readState.advanceToNextField(\n@@ -108,9 +106,6 @@ _readField_isTrue:\n _end:\n   _readState.readStructEnd(iprot);\n \n-  if (!isset_first) {\n-    TProtocolException::throwMissingRequiredField(\"first\", \"BasicTypes\");\n-  }\n   return;\n \n _loop:\n", "diff --git a/thrift/compiler/test/fixtures/refs/gen-cpp2/module_types.tcc b/thrift/compiler/test/fixtures/refs/gen-cpp2/module_types.tcc\nindex 198bfa7f35..ef5843351a 100644\n--- a/thrift/compiler/test/fixtures/refs/gen-cpp2/module_types.tcc\n+++ b/thrift/compiler/test/fixtures/refs/gen-cpp2/module_types.tcc\n@@ -269,7 +269,6 @@ void MyField::readNoXfer(Protocol_* iprot) {\n \n   using apache::thrift::TProtocolException;\n \n-  bool isset_req_value = false;\n \n   if (UNLIKELY(!_readState.advanceToNextField(\n           iprot,\n@@ -307,7 +306,6 @@ _readField_value:\n _readField_req_value:\n   {\n     ::apache::thrift::detail::pm::protocol_methods< ::apache::thrift::type_class::integral, int64_t>::read(*iprot, this->req_value);\n-    isset_req_value = true;\n   }\n \n   if (UNLIKELY(!_readState.advanceToNextField(\n@@ -321,9 +319,6 @@ _readField_req_value:\n _end:\n   _readState.readStructEnd(iprot);\n \n-  if (!isset_req_value) {\n-    TProtocolException::throwMissingRequiredField(\"req_value\", \"MyField\");\n-  }\n   return;\n \n _loop:\n@@ -442,7 +437,6 @@ void MyStruct::readNoXfer(Protocol_* iprot) {\n \n   using apache::thrift::TProtocolException;\n \n-  bool isset_req_ref = false;\n \n   if (UNLIKELY(!_readState.advanceToNextField(\n           iprot,\n@@ -484,7 +478,6 @@ _readField_req_ref:\n     std::unique_ptr< ::cpp2::MyField> ptr = std::make_unique< ::cpp2::MyField>();\n     ::apache::thrift::Cpp2Ops<  ::cpp2::MyField>::read(iprot, ptr.get());\n     this->req_ref = std::move(ptr);\n-    isset_req_ref = true;\n   }\n \n   if (UNLIKELY(!_readState.advanceToNextField(\n@@ -498,9 +491,6 @@ _readField_req_ref:\n _end:\n   _readState.readStructEnd(iprot);\n \n-  if (!isset_req_ref) {\n-    TProtocolException::throwMissingRequiredField(\"req_ref\", \"MyStruct\");\n-  }\n   return;\n \n _loop:\n@@ -1334,7 +1324,6 @@ void StructWithSharedConst::readNoXfer(Protocol_* iprot) {\n \n   using apache::thrift::TProtocolException;\n \n-  bool isset_req_shared_const = false;\n \n   if (UNLIKELY(!_readState.advanceToNextField(\n           iprot,\n@@ -1376,7 +1365,6 @@ _readField_req_shared_const:\n     std::unique_ptr< ::cpp2::MyField> ptr = std::make_unique< ::cpp2::MyField>();\n     ::apache::thrift::Cpp2Ops<  ::cpp2::MyField>::read(iprot, ptr.get());\n     this->req_shared_const = std::move(ptr);\n-    isset_req_shared_const = true;\n   }\n \n   if (UNLIKELY(!_readState.advanceToNextField(\n@@ -1390,9 +1378,6 @@ _readField_req_shared_const:\n _end:\n   _readState.readStructEnd(iprot);\n \n-  if (!isset_req_shared_const) {\n-    TProtocolException::throwMissingRequiredField(\"req_shared_const\", \"StructWithSharedConst\");\n-  }\n   return;\n \n _loop:\n@@ -1646,7 +1631,6 @@ void StructWithRef::readNoXfer(Protocol_* iprot) {\n \n   using apache::thrift::TProtocolException;\n \n-  bool isset_req_field = false;\n \n   if (UNLIKELY(!_readState.advanceToNextField(\n           iprot,\n@@ -1688,7 +1672,6 @@ _readField_req_field:\n     std::unique_ptr< ::cpp2::Empty> ptr = std::make_unique< ::cpp2::Empty>();\n     ::apache::thrift::Cpp2Ops<  ::cpp2::Empty>::read(iprot, ptr.get());\n     this->req_field = std::move(ptr);\n-    isset_req_field = true;\n   }\n \n   if (UNLIKELY(!_readState.advanceToNextField(\n@@ -1702,9 +1685,6 @@ _readField_req_field:\n _end:\n   _readState.readStructEnd(iprot);\n \n-  if (!isset_req_field) {\n-    TProtocolException::throwMissingRequiredField(\"req_field\", \"StructWithRef\");\n-  }\n   return;\n \n _loop:\n@@ -1880,7 +1860,6 @@ void StructWithRefTypeUnique::readNoXfer(Protocol_* iprot) {\n \n   using apache::thrift::TProtocolException;\n \n-  bool isset_req_field = false;\n \n   if (UNLIKELY(!_readState.advanceToNextField(\n           iprot,\n@@ -1922,7 +1901,6 @@ _readField_req_field:\n     std::unique_ptr< ::cpp2::Empty> ptr = std::make_unique< ::cpp2::Empty>();\n     ::apache::thrift::Cpp2Ops<  ::cpp2::Empty>::read(iprot, ptr.get());\n     this->req_field = std::move(ptr);\n-    isset_req_field = true;\n   }\n \n   if (UNLIKELY(!_readState.advanceToNextField(\n@@ -1936,9 +1914,6 @@ _readField_req_field:\n _end:\n   _readState.readStructEnd(iprot);\n \n-  if (!isset_req_field) {\n-    TProtocolException::throwMissingRequiredField(\"req_field\", \"StructWithRefTypeUnique\");\n-  }\n   return;\n \n _loop:\n@@ -2114,7 +2089,6 @@ void StructWithRefTypeShared::readNoXfer(Protocol_* iprot) {\n \n   using apache::thrift::TProtocolException;\n \n-  bool isset_req_field = false;\n \n   if (UNLIKELY(!_readState.advanceToNextField(\n           iprot,\n@@ -2156,7 +2130,6 @@ _readField_req_field:\n     std::unique_ptr< ::cpp2::Empty> ptr = std::make_unique< ::cpp2::Empty>();\n     ::apache::thrift::Cpp2Ops<  ::cpp2::Empty>::read(iprot, ptr.get());\n     this->req_field = std::move(ptr);\n-    isset_req_field = true;\n   }\n \n   if (UNLIKELY(!_readState.advanceToNextField(\n@@ -2170,9 +2143,6 @@ _readField_req_field:\n _end:\n   _readState.readStructEnd(iprot);\n \n-  if (!isset_req_field) {\n-    TProtocolException::throwMissingRequiredField(\"req_field\", \"StructWithRefTypeShared\");\n-  }\n   return;\n \n _loop:\n@@ -2348,7 +2318,6 @@ void StructWithRefTypeSharedConst::readNoXfer(Protocol_* iprot) {\n \n   using apache::thrift::TProtocolException;\n \n-  bool isset_req_field = false;\n \n   if (UNLIKELY(!_readState.advanceToNextField(\n           iprot,\n@@ -2390,7 +2359,6 @@ _readField_req_field:\n     std::unique_ptr< ::cpp2::Empty> ptr = std::make_unique< ::cpp2::Empty>();\n     ::apache::thrift::Cpp2Ops<  ::cpp2::Empty>::read(iprot, ptr.get());\n     this->req_field = std::move(ptr);\n-    isset_req_field = true;\n   }\n \n   if (UNLIKELY(!_readState.advanceToNextField(\n@@ -2404,9 +2372,6 @@ _readField_req_field:\n _end:\n   _readState.readStructEnd(iprot);\n \n-  if (!isset_req_field) {\n-    TProtocolException::throwMissingRequiredField(\"req_field\", \"StructWithRefTypeSharedConst\");\n-  }\n   return;\n \n _loop:\n", "diff --git a/thrift/compiler/test/fixtures/types/gen-cpp2/module_types.tcc b/thrift/compiler/test/fixtures/types/gen-cpp2/module_types.tcc\nindex 91f86cbcc1..9f55464af4 100644\n--- a/thrift/compiler/test/fixtures/types/gen-cpp2/module_types.tcc\n+++ b/thrift/compiler/test/fixtures/types/gen-cpp2/module_types.tcc\n@@ -1469,11 +1469,6 @@ void MinPadding::readNoXfer(Protocol_* iprot) {\n \n   using apache::thrift::TProtocolException;\n \n-  bool isset_small = false;\n-  bool isset_big = false;\n-  bool isset_medium = false;\n-  bool isset_biggish = false;\n-  bool isset_tiny = false;\n \n   if (UNLIKELY(!_readState.advanceToNextField(\n           iprot,\n@@ -1485,7 +1480,6 @@ void MinPadding::readNoXfer(Protocol_* iprot) {\n _readField_small:\n   {\n     ::apache::thrift::detail::pm::protocol_methods< ::apache::thrift::type_class::integral, int8_t>::read(*iprot, this->small);\n-    isset_small = true;\n   }\n \n   if (UNLIKELY(!_readState.advanceToNextField(\n@@ -1498,7 +1492,6 @@ _readField_small:\n _readField_big:\n   {\n     ::apache::thrift::detail::pm::protocol_methods< ::apache::thrift::type_class::integral, int64_t>::read(*iprot, this->big);\n-    isset_big = true;\n   }\n \n   if (UNLIKELY(!_readState.advanceToNextField(\n@@ -1511,7 +1504,6 @@ _readField_big:\n _readField_medium:\n   {\n     ::apache::thrift::detail::pm::protocol_methods< ::apache::thrift::type_class::integral, int16_t>::read(*iprot, this->medium);\n-    isset_medium = true;\n   }\n \n   if (UNLIKELY(!_readState.advanceToNextField(\n@@ -1524,7 +1516,6 @@ _readField_medium:\n _readField_biggish:\n   {\n     ::apache::thrift::detail::pm::protocol_methods< ::apache::thrift::type_class::integral, int32_t>::read(*iprot, this->biggish);\n-    isset_biggish = true;\n   }\n \n   if (UNLIKELY(!_readState.advanceToNextField(\n@@ -1537,7 +1528,6 @@ _readField_biggish:\n _readField_tiny:\n   {\n     ::apache::thrift::detail::pm::protocol_methods< ::apache::thrift::type_class::integral, int8_t>::read(*iprot, this->tiny);\n-    isset_tiny = true;\n   }\n \n   if (UNLIKELY(!_readState.advanceToNextField(\n@@ -1551,21 +1541,6 @@ _readField_tiny:\n _end:\n   _readState.readStructEnd(iprot);\n \n-  if (!isset_small) {\n-    TProtocolException::throwMissingRequiredField(\"small\", \"MinPadding\");\n-  }\n-  if (!isset_big) {\n-    TProtocolException::throwMissingRequiredField(\"big\", \"MinPadding\");\n-  }\n-  if (!isset_medium) {\n-    TProtocolException::throwMissingRequiredField(\"medium\", \"MinPadding\");\n-  }\n-  if (!isset_biggish) {\n-    TProtocolException::throwMissingRequiredField(\"biggish\", \"MinPadding\");\n-  }\n-  if (!isset_tiny) {\n-    TProtocolException::throwMissingRequiredField(\"tiny\", \"MinPadding\");\n-  }\n   return;\n \n _loop:\n", "diff --git a/thrift/test/JsonToThriftTest/SimpleJSONToThriftTest.cpp b/thrift/test/JsonToThriftTest/SimpleJSONToThriftTest.cpp\nindex 36359c4440..103280e37d 100644\n--- a/thrift/test/JsonToThriftTest/SimpleJSONToThriftTest.cpp\n+++ b/thrift/test/JsonToThriftTest/SimpleJSONToThriftTest.cpp\n@@ -380,18 +380,14 @@ TEST(SimpleJSONToThriftTest, MissingField) {\n }\n \n TEST(SimpleJSONToThriftTest, BoundaryCase) {\n-  // jsonSimpleT2 is to test whether the generated code throw exeption\n-  // if the required field doesn't have value : field c's value is\n-  // missing\n+  // jsonSimpleT2 is to test that the generated code does NOT throw exeption\n+  // if the required field doesn't have value, since required is being\n+  // deprecated.\n   string jsonSimpleT(\n       \"{\\\"a\\\":true,\\\"d\\\":32,\\\"e\\\":64,\\\"b\\\":8,\"\n       \"\\\"f\\\":0.99,\\\"g\\\":\\\"Hello\\\"}\");\n   mySimpleStruct thriftSimpleObj;\n-  try {\n-    deserializeJSON(thriftSimpleObj, jsonSimpleT);\n-    ADD_FAILURE();\n-  } catch (apache::thrift::TException& e) {\n-  }\n+  deserializeJSON(thriftSimpleObj, jsonSimpleT);\n \n   string jsonByteTW(\"{\\\"a\\\":128}\");\n   myByteStruct thriftByteObjW;\n@@ -459,8 +455,9 @@ TEST(SimpleJSONToThriftTest, ComplexTypeMissingRequiredFieldInMember) {\n   myComplexStruct thriftComplexObj;\n   try {\n     deserializeJSON(thriftComplexObj, jsonComplexT);\n-    ADD_FAILURE();\n   } catch (apache::thrift::TException& e) {\n+    // We don't enforce required anymore, thus shouldn't throw.\n+    ADD_FAILURE();\n   }\n }\n \n"], "label": 0, "cve": "CVE-2019-3565", "rank": 8, "commit": "1684e9c02f7bb0b014fc44e3e138655c9337adc8", "cve_attention_tokens": []}
{"cve_desc": "lib/formslib.php in Moodle 2.1.x before 2.1.4 and 2.2.x before 2.2.1 does not properly handle multiple instances of a form element, which has unspecified impact and remote attack vectors.", "commit_msg": "MDL-30378 navigation: Front page activities are now added to the navigation on every page\n\n", "diff": ["diff --git a/lib/navigationlib.php b/lib/navigationlib.php\nindex 625a516a3b7..64aa8c0a135 100644\n--- a/lib/navigationlib.php\n+++ b/lib/navigationlib.php\n@@ -1060,7 +1060,7 @@ class global_navigation extends navigation_node {\n         $mycourses = enrol_get_my_courses(NULL, 'visible DESC,sortorder ASC', $limit);\n         $showallcourses = (count($mycourses) == 0 || !empty($CFG->navshowallcourses));\n         $showcategories = ($showallcourses && $this->show_categories());\n-        $issite = ($this->page->course->id != SITEID);\n+        $issite = ($this->page->course->id == SITEID);\n         $ismycourse = (array_key_exists($this->page->course->id, $mycourses));\n \n         // Check if any courses were returned.\n@@ -1080,148 +1080,84 @@ class global_navigation extends navigation_node {\n         // JavaScript enabled.\n         $frontpagecourse = $this->load_course($SITE);\n         $this->add_front_page_course_essentials($frontpagecourse, $SITE);\n+        $this->load_course_sections($SITE, $frontpagecourse);\n \n         $canviewcourseprofile = true;\n \n-        // Next load context specific content into the navigation\n-        switch ($this->page->context->contextlevel) {\n-            case CONTEXT_SYSTEM :\n-                // This has already been loaded we just need to map the variable\n-                $coursenode = $frontpagecourse;\n-                $this->load_all_categories(null, $showcategories);\n-                break;\n-            case CONTEXT_COURSECAT :\n-                // This has already been loaded we just need to map the variable\n-                $coursenode = $frontpagecourse;\n-                $this->load_all_categories($this->page->context->instanceid, $showcategories);\n-                break;\n-            case CONTEXT_BLOCK :\n-            case CONTEXT_COURSE :\n-                // Load the course associated with the page into the navigation\n-                $course = $this->page->course;\n-                if ($showcategories && !$issite && !$ismycourse) {\n-                    $this->load_all_categories($course->category, $showcategories);\n-                }\n-                $coursenode = $this->load_course($course);\n-\n-                // If the course wasn't added then don't try going any further.\n-                if (!$coursenode) {\n-                    $canviewcourseprofile = false;\n+        // No need to run the generation code for if its the front page.\n+        // That has already been done for every page above.\n+        if (!$issite) {\n+            // Next load context specific content into the navigation\n+            switch ($this->page->context->contextlevel) {\n+                case CONTEXT_SYSTEM :\n+                    // This has already been loaded we just need to map the variable\n+                    $coursenode = $frontpagecourse;\n+                    $this->load_all_categories(null, $showcategories);\n                     break;\n-                }\n-\n-                // If the user is not enrolled then we only want to show the\n-                // course node and not populate it.\n-                $coursecontext = get_context_instance(CONTEXT_COURSE, $course->id);\n-\n-                // Not enrolled, can't view, and hasn't switched roles\n-                if (!can_access_course($coursecontext)) {\n-                    // TODO: very ugly hack - do not force \"parents\" to enrol into course their child is enrolled in,\n-                    // this hack has been propagated from user/view.php to display the navigation node. (MDL-25805)\n-                    $isparent = false;\n-                    if ($this->useridtouseforparentchecks) {\n-                        if ($this->useridtouseforparentchecks != $USER->id) {\n-                            $usercontext   = get_context_instance(CONTEXT_USER, $this->useridtouseforparentchecks, MUST_EXIST);\n-                            if ($DB->record_exists('role_assignments', array('userid' => $USER->id, 'contextid' => $usercontext->id))\n-                                    and has_capability('moodle/user:viewdetails', $usercontext)) {\n-                                $isparent = true;\n-                            }\n-                        }\n+                case CONTEXT_COURSECAT :\n+                    // This has already been loaded we just need to map the variable\n+                    $coursenode = $frontpagecourse;\n+                    $this->load_all_categories($this->page->context->instanceid, $showcategories);\n+                    break;\n+                case CONTEXT_BLOCK :\n+                case CONTEXT_COURSE :\n+                    // Load the course associated with the page into the navigation\n+                    $course = $this->page->course;\n+                    if ($showcategories && !$ismycourse) {\n+                        $this->load_all_categories($course->category, $showcategories);\n                     }\n+                    $coursenode = $this->load_course($course);\n \n-                    if (!$isparent) {\n-                        $coursenode->make_active();\n+                    // If the course wasn't added then don't try going any further.\n+                    if (!$coursenode) {\n                         $canviewcourseprofile = false;\n                         break;\n                     }\n-                }\n-                // Add the essentials such as reports etc...\n-                $this->add_course_essentials($coursenode, $course);\n-                if ($this->format_display_course_content($course->format)) {\n-                    // Load the course sections\n-                    $sections = $this->load_course_sections($course, $coursenode);\n-                }\n-                if (!$coursenode->contains_active_node() && !$coursenode->search_for_active_node()) {\n-                    $coursenode->make_active();\n-                }\n-                break;\n-            case CONTEXT_MODULE :\n-                $course = $this->page->course;\n-                $cm = $this->page->cm;\n \n-                if ($showcategories && !$issite && !$ismycourse) {\n-                    $this->load_all_categories($course->category, $showcategories);\n-                }\n-\n-                // Load the course associated with the page into the navigation\n-                $coursenode = $this->load_course($course);\n-\n-                // If the course wasn't added then don't try going any further.\n-                if (!$coursenode) {\n-                    $canviewcourseprofile = false;\n-                    break;\n-                }\n-\n-                // If the user is not enrolled then we only want to show the\n-                // course node and not populate it.\n-                $coursecontext = get_context_instance(CONTEXT_COURSE, $course->id);\n-                if (!can_access_course($coursecontext)) {\n-                    $coursenode->make_active();\n-                    $canviewcourseprofile = false;\n-                    break;\n-                }\n+                    // If the user is not enrolled then we only want to show the\n+                    // course node and not populate it.\n+                    $coursecontext = get_context_instance(CONTEXT_COURSE, $course->id);\n \n-                $this->add_course_essentials($coursenode, $course);\n-                // Load the course sections into the page\n-                $sections = $this->load_course_sections($course, $coursenode);\n-                if ($course->id != SITEID) {\n-                    // Find the section for the $CM associated with the page and collect\n-                    // its section number.\n-                    if (isset($cm->sectionnum)) {\n-                        $cm->sectionnumber = $cm->sectionnum;\n-                    } else {\n-                        foreach ($sections as $section) {\n-                            if ($section->id == $cm->section) {\n-                                $cm->sectionnumber = $section->section;\n-                                break;\n+                    // Not enrolled, can't view, and hasn't switched roles\n+                    if (!can_access_course($coursecontext)) {\n+                        // TODO: very ugly hack - do not force \"parents\" to enrol into course their child is enrolled in,\n+                        // this hack has been propagated from user/view.php to display the navigation node. (MDL-25805)\n+                        $isparent = false;\n+                        if ($this->useridtouseforparentchecks) {\n+                            if ($this->useridtouseforparentchecks != $USER->id) {\n+                                $usercontext   = get_context_instance(CONTEXT_USER, $this->useridtouseforparentchecks, MUST_EXIST);\n+                                if ($DB->record_exists('role_assignments', array('userid' => $USER->id, 'contextid' => $usercontext->id))\n+                                        and has_capability('moodle/user:viewdetails', $usercontext)) {\n+                                    $isparent = true;\n+                                }\n                             }\n                         }\n-                    }\n \n-                    // Load all of the section activities for the section the cm belongs to.\n-                    if (isset($cm->sectionnumber) and !empty($sections[$cm->sectionnumber])) {\n-                        list($sectionarray, $activityarray) = $this->generate_sections_and_activities($course);\n-                        $activities = $this->load_section_activities($sections[$cm->sectionnumber]->sectionnode, $cm->sectionnumber, $activityarray);\n-                    } else {\n-                        $activities = array();\n-                        if ($activity = $this->load_stealth_activity($coursenode, get_fast_modinfo($course))) {\n-                            // \"stealth\" activity from unavailable section\n-                            $activities[$cm->id] = $activity;\n+                        if (!$isparent) {\n+                            $coursenode->make_active();\n+                            $canviewcourseprofile = false;\n+                            break;\n                         }\n                     }\n-                } else {\n-                    $activities = array();\n-                    $activities[$cm->id] = $coursenode->get($cm->id, navigation_node::TYPE_ACTIVITY);\n-                }\n-                if (!empty($activities[$cm->id])) {\n-                    // Finally load the cm specific navigaton information\n-                    $this->load_activity($cm, $course, $activities[$cm->id]);\n-                    // Check if we have an active ndoe\n-                    if (!$activities[$cm->id]->contains_active_node() && !$activities[$cm->id]->search_for_active_node()) {\n-                        // And make the activity node active.\n-                        $activities[$cm->id]->make_active();\n+                    // Add the essentials such as reports etc...\n+                    $this->add_course_essentials($coursenode, $course);\n+                    if ($this->format_display_course_content($course->format)) {\n+                        // Load the course sections\n+                        $sections = $this->load_course_sections($course, $coursenode);\n                     }\n-                } else {\n-                    //TODO: something is wrong, what to do? (Skodak)\n-                }\n-                break;\n-            case CONTEXT_USER :\n-                $course = $this->page->course;\n-                if ($course->id != SITEID) {\n-                    if ($showcategories && !$issite && !$ismycourse) {\n+                    if (!$coursenode->contains_active_node() && !$coursenode->search_for_active_node()) {\n+                        $coursenode->make_active();\n+                    }\n+                    break;\n+                case CONTEXT_MODULE :\n+                    $course = $this->page->course;\n+                    $cm = $this->page->cm;\n+\n+                    if ($showcategories && !$ismycourse) {\n                         $this->load_all_categories($course->category, $showcategories);\n                     }\n-                    // Load the course associated with the user into the navigation\n+\n+                    // Load the course associated with the page into the navigation\n                     $coursenode = $this->load_course($course);\n \n                     // If the course wasn't added then don't try going any further.\n@@ -1238,10 +1174,79 @@ class global_navigation extends navigation_node {\n                         $canviewcourseprofile = false;\n                         break;\n                     }\n+\n                     $this->add_course_essentials($coursenode, $course);\n+                    // Load the course sections into the page\n                     $sections = $this->load_course_sections($course, $coursenode);\n-                }\n-                break;\n+                    if ($course->id != SITEID) {\n+                        // Find the section for the $CM associated with the page and collect\n+                        // its section number.\n+                        if (isset($cm->sectionnum)) {\n+                            $cm->sectionnumber = $cm->sectionnum;\n+                        } else {\n+                            foreach ($sections as $section) {\n+                                if ($section->id == $cm->section) {\n+                                    $cm->sectionnumber = $section->section;\n+                                    break;\n+                                }\n+                            }\n+                        }\n+\n+                        // Load all of the section activities for the section the cm belongs to.\n+                        if (isset($cm->sectionnumber) and !empty($sections[$cm->sectionnumber])) {\n+                            list($sectionarray, $activityarray) = $this->generate_sections_and_activities($course);\n+                            $activities = $this->load_section_activities($sections[$cm->sectionnumber]->sectionnode, $cm->sectionnumber, $activityarray);\n+                        } else {\n+                            $activities = array();\n+                            if ($activity = $this->load_stealth_activity($coursenode, get_fast_modinfo($course))) {\n+                                // \"stealth\" activity from unavailable section\n+                                $activities[$cm->id] = $activity;\n+                            }\n+                        }\n+                    } else {\n+                        $activities = array();\n+                        $activities[$cm->id] = $coursenode->get($cm->id, navigation_node::TYPE_ACTIVITY);\n+                    }\n+                    if (!empty($activities[$cm->id])) {\n+                        // Finally load the cm specific navigaton information\n+                        $this->load_activity($cm, $course, $activities[$cm->id]);\n+                        // Check if we have an active ndoe\n+                        if (!$activities[$cm->id]->contains_active_node() && !$activities[$cm->id]->search_for_active_node()) {\n+                            // And make the activity node active.\n+                            $activities[$cm->id]->make_active();\n+                        }\n+                    } else {\n+                        //TODO: something is wrong, what to do? (Skodak)\n+                    }\n+                    break;\n+                case CONTEXT_USER :\n+                    $course = $this->page->course;\n+                    if ($course->id != SITEID) {\n+                        if ($showcategories && !$ismycourse) {\n+                            $this->load_all_categories($course->category, $showcategories);\n+                        }\n+                        // Load the course associated with the user into the navigation\n+                        $coursenode = $this->load_course($course);\n+\n+                        // If the course wasn't added then don't try going any further.\n+                        if (!$coursenode) {\n+                            $canviewcourseprofile = false;\n+                            break;\n+                        }\n+\n+                        // If the user is not enrolled then we only want to show the\n+                        // course node and not populate it.\n+                        $coursecontext = get_context_instance(CONTEXT_COURSE, $course->id);\n+                        if (!can_access_course($coursecontext)) {\n+                            $coursenode->make_active();\n+                            $canviewcourseprofile = false;\n+                            break;\n+                        }\n+                        $this->add_course_essentials($coursenode, $course);\n+                        $sections = $this->load_course_sections($course, $coursenode);\n+                    }\n+                    break;\n+            }\n         }\n \n         $limit = 20;\n"], "label": 0, "cve": "CVE-2012-0801", "rank": 44, "commit": "c6a3aa720d33b058fbf8d199418cd8d120165b65", "cve_attention_tokens": []}
{"cve_desc": "OpenThread before 2019-12-13 has a stack-based buffer overflow in MeshCoP::Commissioner::GeneratePskc.", "commit_msg": "[ncp] ensure JOINER_STATE is not limited to FTD only (#5129)\n\nThis commit fixes the entry for getter in `ncp_dispacther` for spinel\n`SPINEL_PROP_MESHCOP_JOINER_STATE` ensuring it is available in MTD\nbuild as well as FTD when joiner feature is enabled.\n", "diff": ["diff --git a/src/ncp/ncp_base_dispatcher.cpp b/src/ncp/ncp_base_dispatcher.cpp\nindex 640bd247e..74714edf7 100644\n--- a/src/ncp/ncp_base_dispatcher.cpp\n+++ b/src/ncp/ncp_base_dispatcher.cpp\n@@ -129,10 +129,10 @@ NcpBase::PropertyHandler NcpBase::FindGetPropertyHandler(spinel_prop_key_t aKey)\n         OT_NCP_GET_HANDLER_ENTRY(SPINEL_PROP_IPV6_ICMP_PING_OFFLOAD),\n         OT_NCP_GET_HANDLER_ENTRY(SPINEL_PROP_IPV6_MULTICAST_ADDRESS_TABLE),\n         OT_NCP_GET_HANDLER_ENTRY(SPINEL_PROP_IPV6_ICMP_PING_OFFLOAD_MODE),\n-#if OPENTHREAD_FTD\n #if OPENTHREAD_CONFIG_JOINER_ENABLE\n         OT_NCP_GET_HANDLER_ENTRY(SPINEL_PROP_MESHCOP_JOINER_STATE),\n #endif\n+#if OPENTHREAD_FTD\n #if OPENTHREAD_CONFIG_COMMISSIONER_ENABLE\n         OT_NCP_GET_HANDLER_ENTRY(SPINEL_PROP_MESHCOP_COMMISSIONER_STATE),\n         OT_NCP_GET_HANDLER_ENTRY(SPINEL_PROP_MESHCOP_COMMISSIONER_PROVISIONING_URL),\n"], "label": 0, "cve": "CVE-2019-20791", "rank": 61, "commit": "d6f2a155fc0dfc3daf7ff8fc2b36b8fef1763c9b", "cve_attention_tokens": []}
{"cve_desc": "esigate.org esigate version 5.2 and earlier contains a CWE-74: Improper Neutralization of Special Elements in Output Used by a Downstream Component ('Injection') vulnerability in ESI directive with user specified XSLT that can result in Remote Code Execution. This attack appear to be exploitable via Use of another weakness in backend application to reflect ESI directives. This vulnerability appears to have been fixed in 5.3.", "commit_msg": "[maven-release-plugin] prepare release esigate-5.3\n\n", "diff": ["diff --git a/esigate-app-aggregated1/pom.xml b/esigate-app-aggregated1/pom.xml\nindex 1557edc6..6a253c25 100644\n--- a/esigate-app-aggregated1/pom.xml\n+++ b/esigate-app-aggregated1/pom.xml\n@@ -6,7 +6,7 @@\n \t<parent>\n \t\t<artifactId>esigate</artifactId>\n \t\t<groupId>org.esigate</groupId>\n-\t\t<version>5.3-SNAPSHOT</version>\n+\t\t<version>5.3</version>\n \t</parent>\n \t<build>\n \t\t<finalName>esigate-app-aggregated1</finalName>\n", "diff --git a/esigate-app-aggregated2/pom.xml b/esigate-app-aggregated2/pom.xml\nindex 72993256..b895184c 100644\n--- a/esigate-app-aggregated2/pom.xml\n+++ b/esigate-app-aggregated2/pom.xml\n@@ -6,7 +6,7 @@\n \t<parent>\n \t\t<artifactId>esigate</artifactId>\n \t\t<groupId>org.esigate</groupId>\n-\t\t<version>5.3-SNAPSHOT</version>\n+\t\t<version>5.3</version>\n \t</parent>\n \t<build>\n \t\t<finalName>esigate-app-aggregated2</finalName>\n", "diff --git a/esigate-app-aggregator/pom.xml b/esigate-app-aggregator/pom.xml\nindex 6224c121..ff02da4b 100644\n--- a/esigate-app-aggregator/pom.xml\n+++ b/esigate-app-aggregator/pom.xml\n@@ -6,7 +6,7 @@\n \t<parent>\n \t\t<artifactId>esigate</artifactId>\n \t\t<groupId>org.esigate</groupId>\n-\t\t<version>5.3-SNAPSHOT</version>\n+\t\t<version>5.3</version>\n \t</parent>\n \t<dependencies>\n \t\t<dependency>\n", "diff --git a/esigate-app-cas/pom.xml b/esigate-app-cas/pom.xml\nindex 01022174..a533d866 100644\n--- a/esigate-app-cas/pom.xml\n+++ b/esigate-app-cas/pom.xml\n@@ -6,7 +6,7 @@\n \t<parent>\n \t\t<artifactId>esigate</artifactId>\n \t\t<groupId>org.esigate</groupId>\n-\t\t<version>5.3-SNAPSHOT</version>\n+\t\t<version>5.3</version>\n \t</parent>\n \t<build>\n \t\t<finalName>esigate-app-cas</finalName>\n", "diff --git a/esigate-app-casified-aggregated1/pom.xml b/esigate-app-casified-aggregated1/pom.xml\nindex ea6435c2..86111177 100644\n--- a/esigate-app-casified-aggregated1/pom.xml\n+++ b/esigate-app-casified-aggregated1/pom.xml\n@@ -6,7 +6,7 @@\n \t<parent>\n \t\t<artifactId>esigate</artifactId>\n \t\t<groupId>org.esigate</groupId>\n-\t\t<version>5.3-SNAPSHOT</version>\n+\t\t<version>5.3</version>\n \t</parent>\n \t<build>\n \t\t<finalName>esigate-app-casified-aggregated1</finalName>\n", "diff --git a/esigate-app-casified-aggregated2/pom.xml b/esigate-app-casified-aggregated2/pom.xml\nindex 42d0ef47..4266c40a 100644\n--- a/esigate-app-casified-aggregated2/pom.xml\n+++ b/esigate-app-casified-aggregated2/pom.xml\n@@ -6,7 +6,7 @@\n \t<parent>\n \t\t<artifactId>esigate</artifactId>\n \t\t<groupId>org.esigate</groupId>\n-\t\t<version>5.3-SNAPSHOT</version>\n+\t\t<version>5.3</version>\n \t</parent>\n \t<build>\n \t\t<finalName>esigate-app-casified-aggregated2</finalName>\n", "diff --git a/esigate-app-casified-aggregator/pom.xml b/esigate-app-casified-aggregator/pom.xml\nindex 762e931d..90ae15c4 100644\n--- a/esigate-app-casified-aggregator/pom.xml\n+++ b/esigate-app-casified-aggregator/pom.xml\n@@ -6,7 +6,7 @@\n \t<parent>\n \t\t<artifactId>esigate</artifactId>\n \t\t<groupId>org.esigate</groupId>\n-\t\t<version>5.3-SNAPSHOT</version>\n+\t\t<version>5.3</version>\n \t</parent>\n \t<dependencies>\n \t\t<dependency>\n", "diff --git a/esigate-app-master/pom.xml b/esigate-app-master/pom.xml\nindex 30e819db..ca4976e1 100644\n--- a/esigate-app-master/pom.xml\n+++ b/esigate-app-master/pom.xml\n@@ -6,7 +6,7 @@\n \t<parent>\n \t\t<artifactId>esigate</artifactId>\n \t\t<groupId>org.esigate</groupId>\n-\t\t<version>5.3-SNAPSHOT</version>\n+\t\t<version>5.3</version>\n \t</parent>\n \t<dependencies>\n \t\t<dependency>\n", "diff --git a/esigate-app-provider/pom.xml b/esigate-app-provider/pom.xml\nindex f5634d5c..ff70f901 100644\n--- a/esigate-app-provider/pom.xml\n+++ b/esigate-app-provider/pom.xml\n@@ -6,7 +6,7 @@\n \t<parent>\n \t\t<artifactId>esigate</artifactId>\n \t\t<groupId>org.esigate</groupId>\n-\t\t<version>5.3-SNAPSHOT</version>\n+\t\t<version>5.3</version>\n \t</parent>\n \t<build>\n \t\t<finalName>esigate-app-provider</finalName>\n", "diff --git a/esigate-cas/pom.xml b/esigate-cas/pom.xml\nindex 0c2bc3b5..129de395 100644\n--- a/esigate-cas/pom.xml\n+++ b/esigate-cas/pom.xml\n@@ -5,7 +5,7 @@\n \t<parent>\n \t\t<artifactId>esigate</artifactId>\n \t\t<groupId>org.esigate</groupId>\n-\t\t<version>5.3-SNAPSHOT</version>\n+\t\t<version>5.3</version>\n \t</parent>\n \t<dependencies>\n \t\t<dependency>\n", "diff --git a/esigate-core/pom.xml b/esigate-core/pom.xml\nindex 16c0cc18..a0aa9199 100644\n--- a/esigate-core/pom.xml\n+++ b/esigate-core/pom.xml\n@@ -5,7 +5,7 @@\n \t<parent>\n \t\t<artifactId>esigate</artifactId>\n \t\t<groupId>org.esigate</groupId>\n-\t\t<version>5.3-SNAPSHOT</version>\n+\t\t<version>5.3</version>\n \t</parent>\n \t<dependencies>\n \t\t<dependency>\n", "diff --git a/esigate-distribution/pom.xml b/esigate-distribution/pom.xml\nindex 1120b05f..bf274f42 100644\n--- a/esigate-distribution/pom.xml\n+++ b/esigate-distribution/pom.xml\n@@ -6,7 +6,7 @@\n \t<parent>\n \t\t<artifactId>esigate</artifactId>\n \t\t<groupId>org.esigate</groupId>\n-\t\t<version>5.3-SNAPSHOT</version>\n+\t\t<version>5.3</version>\n \t</parent>\n \t<dependencies>\n \t\t<dependency>\n", "diff --git a/esigate-server/pom.xml b/esigate-server/pom.xml\nindex 3e2d047a..0668fd08 100644\n--- a/esigate-server/pom.xml\n+++ b/esigate-server/pom.xml\n@@ -4,7 +4,7 @@\n \t<parent>\n \t\t<artifactId>esigate</artifactId>\n \t\t<groupId>org.esigate</groupId>\n-\t\t<version>5.3-SNAPSHOT</version>\n+\t\t<version>5.3</version>\n \t</parent>\n \t<name>ESIGate server</name>\n \t<description>Standalone server for development. Can be run using java -jar esigate-server-&lt;version&gt;.jar -Desigate.config=&lt;config file&gt;</description>\n", "diff --git a/esigate-servlet/pom.xml b/esigate-servlet/pom.xml\nindex 2dfff976..38d9210e 100644\n--- a/esigate-servlet/pom.xml\n+++ b/esigate-servlet/pom.xml\n@@ -5,7 +5,7 @@\n \t<parent>\n \t\t<artifactId>esigate</artifactId>\n \t\t<groupId>org.esigate</groupId>\n-\t\t<version>5.3-SNAPSHOT</version>\n+\t\t<version>5.3</version>\n \t</parent>\n \t<dependencies>\n \t\t<dependency>\n", "diff --git a/esigate-war/pom.xml b/esigate-war/pom.xml\nindex 6063ea58..2c8333a7 100644\n--- a/esigate-war/pom.xml\n+++ b/esigate-war/pom.xml\n@@ -5,7 +5,7 @@\n \t<parent>\n \t\t<artifactId>esigate</artifactId>\n \t\t<groupId>org.esigate</groupId>\n-\t\t<version>5.3-SNAPSHOT</version>\n+\t\t<version>5.3</version>\n \t</parent>\n \t<name>ESIGate web application</name>\n \t<description>ESIGate war application which can be deployed \"as-is\" or customized for your needs.</description>\n", "diff --git a/pom.xml b/pom.xml\nindex 7917047f..34ac6ead 100644\n--- a/pom.xml\n+++ b/pom.xml\n@@ -12,7 +12,7 @@\n \t<artifactId>esigate</artifactId>\n \t<packaging>pom</packaging>\n \t<name>esigate</name>\n-\t<version>5.3-SNAPSHOT</version>\n+\t<version>5.3</version>\n \t<inceptionYear>2008</inceptionYear>\n \t<mailingLists>\n \t\t<mailingList>\n@@ -97,7 +97,7 @@\n \t\t<connection>scm:git:https://github.com/esigate/esigate.git</connection>\n \t\t<developerConnection>scm:git:https://github.com/esigate/esigate.git</developerConnection>\n \t\t<url>https://github.com/esigate/esigate</url>\n-\t\t<tag>HEAD</tag>\n+\t\t<tag>esigate-5.3</tag>\n \t</scm>\n \t<build>\n \t\t<pluginManagement>\n"], "label": 0, "cve": "CVE-2018-1000854", "rank": 24, "commit": "a06f743d4ac5ccb5988ebf5b870e546d6236977a", "cve_attention_tokens": []}
{"cve_desc": "libqpdf.a in QPDF through 8.0.2 mishandles certain \"expected dictionary key but found non-name object\" cases, allowing remote attackers to cause a denial of service (stack exhaustion), related to the QPDFObjectHandle and QPDF_Dictionary classes, because nesting in direct objects is not restricted.", "commit_msg": "Update website for \u017darko Gaji\u0107\n\n", "diff": ["diff --git a/TODO b/TODO\nindex 6a27acb0..03c784a8 100644\n--- a/TODO\n+++ b/TODO\n@@ -1,6 +1,9 @@\n Soon\n ====\n \n+ * Figure out how to render Gaji\u0107 correctly in the PDF version of the\n+   qpdf manual.\n+\n  * Add method to push inheritable resources to a single page by\n    walking up and copying without overwrite.  Above logic will also be\n    sufficient to fix the limitation in\n", "diff --git a/manual/qpdf-manual.xml b/manual/qpdf-manual.xml\nindex f0be343e..7f9404c6 100644\n--- a/manual/qpdf-manual.xml\n+++ b/manual/qpdf-manual.xml\n@@ -4613,11 +4613,11 @@ print \"\\n\";\n       <listitem>\n        <para>\n         This is the first version of qpdf to include Windows support.\n-        On Windows, it is possible to build a DLL.  Additionally, a\n+        On Windows, it is possible to build a DLL. Additionally, a\n         partial C-language API has been introduced, which makes it\n-        possible to call qpdf functions from non-C++ environments.  I\n-        am very grateful to <!-- \u017darko Gaji\u0107 --> Zarko Gagic (<ulink\n-        url=\"http://delphi.about.com/\">http://delphi.about.com/</ulink>)\n+        possible to call qpdf functions from non-C++ environments. I\n+        am very grateful to \u017darko <!-- Gaji\u0107 --> Gajic (<ulink\n+        url=\"http://zarko-gajic.iz.hr/\">http://zarko-gajic.iz.hr/</ulink>)\n         for tirelessly testing numerous pre-release versions of this\n         DLL and providing many excellent suggestions on improving the\n         interface.\n@@ -4630,13 +4630,13 @@ print \"\\n\";\n       </listitem>\n       <listitem>\n        <para>\n-        Zarko Gajic has written a Delphi wrapper for qpdf, which can\n-        be downloaded from qpdf's download side.  Zarko's Delphi\n+        \u017darko Gajic has written a Delphi wrapper for qpdf, which can\n+        be downloaded from qpdf's download side.  \u017darko's Delphi\n         wrapper is released with the same licensing terms as qpdf\n         itself and comes with this disclaimer: &ldquo;Delphi wrapper\n-        unit <filename>qpdf.pas</filename> created by Zarko Gajic\n+        unit <filename>qpdf.pas</filename> created by \u017darko Gajic\n         (<ulink\n-        url=\"http://delphi.about.com/\">http://delphi.about.com/</ulink>).\n+        url=\"http://zarko-gajic.iz.hr/\">http://zarko-gajic.iz.hr/</ulink>).\n         Use at your own risk and for whatever purpose you want.  No\n         support is provided.  Sample code is provided.&rdquo;\n        </para>\n"], "label": 0, "cve": "CVE-2018-9918", "rank": 30, "commit": "fa76d817c69173f8764cf0fa6240884d56023796", "cve_attention_tokens": []}
{"cve_desc": "Multiple SQL injection vulnerabilities in recover.php in Pligg CMS 2.0.1 and earlier allow remote attackers to execute arbitrary SQL commands via the (1) id or (2) n parameter.", "commit_msg": "- Sidebar stories fix, with help from Redwine (http://pligg.com/support/question/solution-fro-the-sidebar-saved-stories-to-display-only-those-belonging-to-the-logged-in-user/#question). This fixes an issue where the sidebar saved stories module would not display content until you saved something else on the page. I also made some cosmetic (CSS) adjustments to improve the display.\n\n", "diff": ["diff --git a/libs/smartyvariables.php b/libs/smartyvariables.php\nindex a8594bb..6c63685 100644\n--- a/libs/smartyvariables.php\n+++ b/libs/smartyvariables.php\n@@ -42,6 +42,7 @@ $main_smarty->assign('votes_per_ip', votes_per_ip);\n $main_smarty->assign('dblang', $dblang);\n $main_smarty->assign('pligg_language', pligg_language);\n $main_smarty->assign('user_logged_in', $current_user->user_login);\n+$main_smarty->assign('user_id', $current_user->user_id);\n $main_smarty->assign('user_level', $current_user->user_level);\n $main_smarty->assign('user_authenticated', $current_user->authenticated);\n $main_smarty->assign('Enable_Tags', Enable_Tags);\n", "diff --git a/modules/sidebar_saved/templates/sidebar_saved_index.tpl b/modules/sidebar_saved/templates/sidebar_saved_index.tpl\nindex 14f103f..cad69b3 100644\n--- a/modules/sidebar_saved/templates/sidebar_saved_index.tpl\n+++ b/modules/sidebar_saved/templates/sidebar_saved_index.tpl\n@@ -19,7 +19,9 @@\n \t\t\t// -------------------------------------------------------------------------------------\n \n \t\t\tglobal $the_template, $main_smarty, $db;\n-\t\t\t$res = \"select link_id,link_title,saved_id,saved_user_id,saved_link_id from \".table_links.\",\".table_saved_links.\" WHERE saved_link_id = link_id AND link_author = \".$userid.\" ORDER BY saved_id DESC limit 5\";\n+\t\t\t$user_id = $main_smarty->get_template_vars('user_id');\n+\t\t\t$res = \"select link_id,link_title,saved_id,saved_user_id,saved_link_id from \".table_links.\",\".table_saved_links.\" WHERE saved_user_id =$user_id and link_id = saved_link_id  ORDER BY saved_id DESC limit 5\";\n+\n \t\t\t$list_savedlinks = $db->get_results($res);\n \t\t\tif($list_savedlinks)\n \t\t\t{\n", "diff --git a/templates/bootstrap/css/style.css b/templates/bootstrap/css/style.css\nindex e0ea979..c6c36bc 100644\n--- a/templates/bootstrap/css/style.css\n+++ b/templates/bootstrap/css/style.css\n@@ -596,9 +596,9 @@ padding:0 5px 0 5px;\n list-style-type:none;\n }\n .sidebar-stories  li{\n-\tfont-size:0.8em;\n-\tline-height:0.8em;\n-\tpadding:2px 0 8px 0;\n+\tfont-size: 0.8em;\n+\tline-height: 1.2em;\n+\tpadding: 6px 0 6px 0;\n \tborder-bottom:1px dotted #eee;\n }\n .sidebar-vote-number {\n"], "label": 0, "cve": "CVE-2014-9096", "rank": 12, "commit": "17fb083ce61356dd506dec8ad359eafe2d2dc759", "cve_attention_tokens": []}
{"cve_desc": "badges/external.php in Moodle 2.5.x before 2.5.2 does not properly handle an object obtained by unserializing a description of an external badge, which allows remote attackers to conduct PHP object injection attacks via unspecified vectors, as demonstrated by overwriting the value of the userid parameter.", "commit_msg": "MDL-40189 - Theme/Clean - Right align form labels and left align form input elements on admin pages, system wide (when in RTL mode)\n\nConflicts:\n\ttheme/bootstrapbase/style/moodle.css\n\n", "diff": ["diff --git a/theme/bootstrapbase/less/moodle/admin.less b/theme/bootstrapbase/less/moodle/admin.less\nindex c1e79cb466f..b442dd215d1 100644\n--- a/theme/bootstrapbase/less/moodle/admin.less\n+++ b/theme/bootstrapbase/less/moodle/admin.less\n@@ -418,7 +418,10 @@ img.iconsmall {\n     margin-right: 0.5em;\n     display: inline;\n }\n-\n+.dir-rtl .form-item .form-setting .defaultsnext {\n+    margin-left: 0.5em;\n+    margin-right: 0;\n+}\n .form-item .form-setting .locked-checkbox {\n     margin-right: 0.2em;\n     margin-left: 0.5em;\n", "diff --git a/theme/bootstrapbase/less/moodle/forms.less b/theme/bootstrapbase/less/moodle/forms.less\nindex d37529d6e6d..f10b841c211 100644\n--- a/theme/bootstrapbase/less/moodle/forms.less\n+++ b/theme/bootstrapbase/less/moodle/forms.less\n@@ -150,6 +150,12 @@ input#id_externalurl {\n .mform .fitem div.fitemtitle {\n     .form-horizontal .control-label\n }\n+.dir-rtl {\n+    .form-item .form-label,\n+    .mform .fitem div.fitemtitle {\n+        float:right;\n+    }\n+}\n .form-defaultinfo,\n .form-label .form-shortname {\n     .muted;\n@@ -341,6 +347,9 @@ input[type=\"checkbox\"] {\n .form-item .form-label label {\n     margin-bottom: 0;\n }\n+.dir-rtl .form-item .form-label label {\n+     text-align:left;\n+}\n .felement.ffilepicker {\n     margin-top: 5px;\n }\n", "diff --git a/theme/bootstrapbase/less/moodle/responsive.less b/theme/bootstrapbase/less/moodle/responsive.less\nindex 8ec01847b29..839a0347be4 100644\n--- a/theme/bootstrapbase/less/moodle/responsive.less\n+++ b/theme/bootstrapbase/less/moodle/responsive.less\n@@ -33,6 +33,19 @@\n     .form-horizontal .controls {\n         margin-left: @horizontalComponentOffset980;\n     }\n+    .dir-rtl {\n+        .form-item .form-setting,\n+        .form-item .form-description,\n+        .mform .fitem .felement,\n+        .mform .fdescription.required,\n+        .userprofile dl.list dd,\n+        .form-horizontal .controls {\n+            margin-right: @horizontalComponentOffset980;\n+        }\n+    }\n+    #page-mod-forum-search.dir-lrt .c1 {\n+        margin-right: @horizontalComponentOffset980;\n+    }\n     .path-admin .buttons,\n     .form-buttons {\n         padding-left: @horizontalComponentOffset980;\n@@ -66,10 +79,29 @@\n     .form-horizontal .controls {\n         margin-left: @horizontalComponentOffset1200;\n     }\n+    .dir-rtl {\n+        .form-item .form-setting,\n+        .form-item .form-description,\n+        .mform .fitem .felement,\n+        .mform .fdescription.required,\n+        .userprofile dl.list dd,\n+        .form-horizontal .controls {\n+            margin-right: @horizontalComponentOffset1200;\n+        }\n+        #page-mod-forum-search .c1 {\n+            margin-right: @horizontalComponentOffset1200;\n+        }\n+    }\n     .path-admin .buttons,\n     .form-buttons {\n         padding-left: @horizontalComponentOffset1200;\n     }\n+    .dir-rtl {\n+        .path-admin .buttons,\n+        .form-buttons {\n+            padding-right: @horizontalComponentOffset1200;\n+        }\n+    }\n \n }\n \n", "diff --git a/theme/bootstrapbase/style/moodle.css b/theme/bootstrapbase/style/moodle.css\nindex 890277a99ea..a52b1e90926 100644\n--- a/theme/bootstrapbase/style/moodle.css\n+++ b/theme/bootstrapbase/style/moodle.css\n@@ -1,4 +1,4 @@\n-.layout-option-noheader #page-header,.layout-option-nonavbar #page-navbar,.layout-option-nofooter #page-footer,.layout-option-nocourseheader .course-content-header,.layout-option-nocoursefooter .course-content-footer{display:none}.empty-region-side-pre #block-region-side-pre,.empty-region-side-post #block-region-side-post{display:none}.empty-region-side-post #region-bs-main-and-pre.span9{width:100%}.empty-region-side-pre #region-main{float:none;width:100%}.empty-region-side-post.used-region-side-pre #region-main.span8{width:74.46808510638297%;*width:74.41489361702126%}.empty-region-side-post.used-region-side-pre #block-region-side-pre.span4{width:23.404255319148934%;*width:23.351063829787233%}.empty-region-side-post #region-bs-main-and-post.span9 #region-main.span8{width:100%}.dir-ltr,.mdl-left,.dir-rtl .mdl-right{text-align:left}.dir-rtl,.mdl-right,.dir-rtl .mdl-left{text-align:right}#add,#remove,.centerpara,.mdl-align{text-align:center}a.dimmed,a.dimmed:link,a.dimmed:visited,a.dimmed_text,a.dimmed_text:link,a.dimmed_text:visited,.dimmed_text,.dimmed_text a,.dimmed_text a:link,.dimmed_text a:visited,.usersuspended,.usersuspended a,.usersuspended a:link,.usersuspended a:visited,.dimmed_category,.dimmed_category a{color:#999}.activity.label .dimmed_text{opacity:.5;filter:alpha(opacity=50)}.unlist,.unlist li,.inline-list,.inline-list li,.block .list,.block .list li,.section li.activity,.section li.movehere,.tabtree li{padding:0;margin:0;list-style:none}.inline,.inline-list li{display:inline}.notifytiny{font-size:10.5px}.notifytiny li,.notifytiny td{font-size:100%}.red,.notifyproblem{color:#b94a48}.green,.notifysuccess{color:#468847}.reportlink{text-align:right}a.autolink.glossary:hover{cursor:help}.collapsibleregioncaption{white-space:nowrap}.collapsibleregioncaption img{vertical-align:middle}.jsenabled .hiddenifjs{display:none}.visibleifjs{display:none}.jsenabled .visibleifjs{display:inline}.jsenabled .collapsibleregion{overflow:hidden}.jsenabled .collapsed .collapsibleregioninner{visibility:hidden}.yui-overlay .yui-widget-bd{position:relative;top:0;left:0;z-index:1;padding:2px 5px;color:#000;background-color:#ffee69;border:1px solid #a6982b;border-top-color:#d4c237}.clearer{display:block;height:1px;padding:0;margin:0;clear:both;background:transparent;border-width:0}.bold,.warning,.errorbox .title,.pagingbar .title,.pagingbar .thispage,.headingblock{font-weight:bold}img.resize{width:1em;height:1em}.block img.resize,.breadcrumb img.resize{width:.8em;height:.9em}img.icon{width:16px;height:16px;padding-right:6px;vertical-align:text-bottom}.dir-rtl img.icon{padding-right:0;padding-left:6px}img.iconsmall{width:12px;height:12px;margin-right:3px;vertical-align:middle}img.iconhelp,.helplink img{width:16px;height:16px;padding-left:3px;vertical-align:text-bottom}.dir-rtl img.iconhelp,.dir-rtl .helplink img{padding-right:3px;padding-left:0}img.iconlarge{width:24px;height:24px;vertical-align:middle}img.iconsort{padding-left:.3em;margin-bottom:.15em;vertical-align:text-bottom}.dir-rtl img.iconsort{padding-right:.3em;padding-left:0}img.icontoggle{width:50px;height:17px;vertical-align:middle}img.iconkbhelp{width:49px;height:17px}img.icon-pre,.dir-rtl img.icon-post{padding-right:3px;padding-left:0}img.icon-post,.dir-rtl img.icon-pre{padding-right:0;padding-left:3px}.boxaligncenter{margin-right:auto;margin-left:auto}.boxalignright{margin-right:0;margin-left:auto}.boxalignleft{margin-right:auto;margin-left:0}.boxwidthnarrow{width:30%}.boxwidthnormal{width:50%}.boxwidthwide{width:80%}.headermain{font-weight:bold}#maincontent{display:block;height:1px;overflow:hidden}img.uihint{cursor:help}#addmembersform table{margin-right:auto;margin-left:auto}.flexible th{white-space:nowrap}img.emoticon{width:15px;height:15px;vertical-align:middle}form.popupform,form.popupform div{display:inline}.arrow_button input{overflow:hidden}.action-icon img.smallicon{margin:0 .3em;vertical-align:text-bottom}.main img{vertical-align:middle}.no-overflow{padding-bottom:1px;overflow:auto}.pagelayout-report .no-overflow{overflow:visible}.no-overflow>.generaltable{margin-bottom:0}.accesshide{position:absolute;left:-10000px;font-size:1em;font-weight:normal}.dir-rtl .accesshide{top:-30000px;left:auto}span.hide,div.hide{display:none}a.skip-block,a.skip{position:absolute;top:-1000em;font-size:.85em;text-decoration:none}a.skip-block:focus,a.skip-block:active,a.skip:focus,a.skip:active{position:static;display:block}.skip-block-to{display:block;height:1px;overflow:hidden}.addbloglink{text-align:center}.blog_entry .audience{padding-right:4px;text-align:right}.blog_entry .tags{margin-top:15px}.blog_entry .tags .action-icon img.smallicon{width:16px;height:16px}.blog_entry .content{margin-left:43px}#page-group-index #groupeditform{text-align:center}#doc-contents h1{margin:1em 0 0 0}#doc-contents ul{width:90%;padding:0;margin:0}#doc-contents ul li{list-style-type:none}.groupmanagementtable td{vertical-align:top}.groupmanagementtable #existingcell,.groupmanagementtable #potentialcell{width:42%}.groupmanagementtable #buttonscell{width:16%}.groupmanagementtable #removeselect_wrapper,.groupmanagementtable #addselect_wrapper{width:100%}.groupmanagementtable #removeselect_wrapper label,.groupmanagementtable #addselect_wrapper label{font-weight:normal}.dir-rtl .groupmanagementtable p{text-align:right}#group-usersummary{width:14em}.groupselector{margin-top:3px;margin-bottom:3px}.loginbox{margin:15px;overflow:visible}.loginbox.twocolumns{margin:15px}.loginbox h2,.loginbox .subcontent{padding:10px;margin:5px;text-align:center}.loginbox .loginpanel .desc{padding:0;margin:0;margin-bottom:5px}.loginbox .signuppanel .subcontent{text-align:left}.dir-rtl .loginbox .signuppanel .subcontent{text-align:right}.loginbox .loginsub{margin-right:0;margin-left:0}.loginbox .guestsub,.loginbox .forgotsub,.loginbox .potentialidps{margin:5px 12%}.loginbox .potentialidps .potentialidplist{margin-left:40%}.loginbox .potentialidps .potentialidplist div{text-align:left}.loginbox .loginform{margin-top:1em;text-align:left}.loginbox .loginform .form-label{float:left;width:44%;text-align:right;white-space:nowrap;direction:rtl}.dir-rtl .loginbox .loginform .form-label{float:left;width:44%;text-align:right;white-space:nowrap;direction:ltr}.loginbox .loginform .form-input{float:right;width:55%}.loginbox .loginform .form-input input{width:6em}.loginbox .signupform{margin-top:1em;text-align:center}.loginbox.twocolumns .loginpanel,.loginbox.twocolumns .signuppanel{display:block;float:left;width:48%;min-height:30px;padding:0;padding-bottom:2000px;margin:0;margin-bottom:-2000px;margin-left:2.76243%;border:0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.loginbox .potentialidp .smallicon{margin:0 .3em;vertical-align:text-bottom}.notepost{margin-bottom:1em}.notepost .userpicture{float:left;margin-right:5px}.notepost .content,.notepost .footer{clear:both}.notesgroup{margin-left:20px}.path-my .coursebox .overview{margin:15px 30px 10px 30px}.path-my .coursebox .info{float:none;margin:0}.mod_introbox{padding:10px}table.mod_index{width:100%}.comment-ctrl{display:none;padding:0;margin:0;font-size:12px}.comment-ctrl h5{padding:5px;margin:0}.comment-area{max-width:400px;padding:5px}.comment-area textarea{width:100%;overflow:auto}.comment-area .fd{text-align:right}.comment-meta span{color:gray}.comment-link img{vertical-align:text-bottom}.comment-list{padding:0;margin:0;overflow:auto;font-size:11px;list-style:none}.comment-list li{position:relative;padding:.3em;margin:2px;margin-bottom:5px;clear:both;list-style:none}.comment-list li.first{display:none}.comment-paging{text-align:center}.comment-paging .pageno{padding:2px}.comment-paging .curpage{border:1px solid #CCC}.comment-message .picture{float:left;width:20px}.dir-rtl .comment-message .picture{float:right}.comment-message .text{padding:0;margin:0}.comment-message .text p{padding:0;margin:0 18px 0 0}.comment-delete{position:absolute;top:0;right:0;margin:.3em}.dir-rtl .comment-delete{position:absolute;right:auto;left:0;margin:.3em}.comment-delete-confirm{width:5em;padding:2px;text-align:center;background:#eee}.comment-container{float:left;margin:4px}.comment-report-selectall{display:none}.comment-link{display:none}.jsenabled .comment-link{display:block}.jsenabled .showcommentsnonjs{display:none}.jsenabled .comment-report-selectall{display:inline}.completion-expired{background:#f2dede}.completion-expected{font-size:10.5px}.completion-sortchoice,.completion-identifyfield{font-size:10.5px;vertical-align:bottom}.completion-progresscell{text-align:right}.completion-expired .completion-expected{font-weight:bold}#page-tag-coursetags_edit .coursetag_edit_centered{position:relative;width:600px;margin:20px auto}#page-tag-coursetags_edit .coursetag_edit_row{clear:both}#page-tag-coursetags_edit .coursetag_edit_row .coursetag_edit_left{float:left;width:50%;text-align:right}#page-tag-coursetags_edit .coursetag_edit_row .coursetag_edit_right{margin-left:50%}#page-tag-coursetags_edit .coursetag_edit_input3{display:none}#page-tag-coursetags_more .coursetag_more_large{font-size:120%}#page-tag-coursetags_more .coursetag_more_small{font-size:80%}#page-tag-coursetags_more .coursetag_more_link{font-size:80%}#tag-description,#tag-blogs{width:100%}#tag-management-box{margin-bottom:10px;line-height:20px}#tag-user-table{width:100%;padding:3px;clear:both}#tag-user-table{*zoom:1}#tag-user-table:before,#tag-user-table:after{display:table;line-height:0;content:\"\"}#tag-user-table:after{clear:both}img.user-image{width:100px;height:100px}#small-tag-cloud-box{width:300px;margin:0 auto}#big-tag-cloud-box{float:none;width:600px;margin:0 auto}ul#tag-cloud-list{padding:5px;margin:0;list-style:none}ul#tag-cloud-list li{display:inline;margin:0;list-style-type:none}#tag-search-box{margin:10px auto;text-align:center}#tag-search-results-container{width:100%;padding:0}#tag-search-results{display:block;float:left;width:60%;padding:0;margin:15px 20% 0 20%}#tag-search-results li{float:left;width:30%;padding-right:1%;padding-left:1%;line-height:20px;text-align:left;list-style:none}span.flagged-tag,span.flagged-tag a{color:#b94a48}table#tag-management-list{width:100%;text-align:left}table#tag-management-list td,table#tag-management-list th{padding:4px;text-align:left;vertical-align:middle}.tag-management-form{text-align:center}#relatedtags-autocomplete-container{width:100%;min-height:4.6em;margin-right:auto;margin-left:auto}#relatedtags-autocomplete{position:relative;display:block;width:60%;margin-right:auto;margin-left:auto}#relatedtags-autocomplete .yui-ac-content{position:absolute;left:20%;z-index:9050;width:420px;overflow:hidden;background:#fff;border:1px solid #404040}#relatedtags-autocomplete .ysearchquery{position:absolute;right:10px;z-index:10;color:#808080}#relatedtags-autocomplete .yui-ac-shadow{position:absolute;z-index:9049;width:100%;margin:.3em;background:#a0a0a0}#relatedtags-autocomplete ul{width:100%;padding:0;margin:0;list-style-type:none}#relatedtags-autocomplete li{padding:0 5px;white-space:nowrap;cursor:default}#relatedtags-autocomplete li.yui-ac-highlight{background:#ffc}h2.tag-heading,div#tag-description,div#tag-blogs,body.tag .managelink{padding:5px}.tag_cloud .s20{font-size:1.5em;font-weight:bold}.tag_cloud .s19{font-size:1.5em}.tag_cloud .s18{font-size:1.4em;font-weight:bold}.tag_cloud .s17{font-size:1.4em}.tag_cloud .s16{font-size:1.3em;font-weight:bold}.tag_cloud .s15{font-size:1.3em}.tag_cloud .s14{font-size:1.2em;font-weight:bold}.tag_cloud .s13{font-size:1.2em}.tag_cloud .s12,.tag_cloud .s11{font-size:1.1em;font-weight:bold}.tag_cloud .s10,.tag_cloud .s9{font-size:1.1em}.tag_cloud .s8,.tag_cloud .s7{font-size:1em;font-weight:bold}.tag_cloud .s6,.tag_cloud .s5{font-size:1em}.tag_cloud .s4,.tag_cloud .s3{font-size:.9em;font-weight:bold}.tag_cloud .s2,.tag_cloud .s1{font-size:.9em}.tag_cloud .s0{font-size:.8em}#webservice-doc-generator td{text-align:left;border:0 solid black}.smartselect{position:absolute}.smartselect .smartselect_mask{background-color:#fff}.smartselect ul{padding:0;margin:0}.smartselect ul li{list-style:none}.smartselect .smartselect_menu{margin-right:5px}.safari .smartselect .smartselect_menu{margin-left:2px}.smartselect .smartselect_menu,.smartselect .smartselect_submenu{display:none;background-color:#FFF;border:1px solid #000}.smartselect .smartselect_menu.visible,.smartselect .smartselect_submenu.visible{display:block}.smartselect .smartselect_menu_content ul li{position:relative;padding:2px 5px}.smartselect .smartselect_menu_content ul li a{color:#333;text-decoration:none}.smartselect .smartselect_menu_content ul li a.selectable{color:inherit}.smartselect .smartselect_submenuitem{background-image:url([[pix:moodle|t/collapsed]]);background-position:100%;background-repeat:no-repeat}.smartselect.spanningmenu .smartselect_submenu{position:absolute;top:-1px;left:100%}.smartselect.spanningmenu .smartselect_submenu a{padding-right:16px;white-space:nowrap}.smartselect.spanningmenu .smartselect_menu_content ul li a.selectable:hover{text-decoration:underline}.smartselect.compactmenu .smartselect_submenu{position:relative;z-index:1010;display:none;margin:2px -3px;margin-left:10px;border-width:0}.smartselect.compactmenu .smartselect_submenu.visible{display:block}.smartselect.compactmenu .smartselect_menu{z-index:1000;overflow:hidden}.smartselect.compactmenu .smartselect_submenu .smartselect_submenu{z-index:1020}.smartselect.compactmenu .smartselect_submenuitem:hover>.smartselect_menuitem_label{font-weight:bold}#page-admin-registration-register .registration_textfield{width:300px}.userenrolment{width:100%;border-collapse:collapse}.userenrolment td{height:41px;padding:0}.userenrolment .subfield{margin-right:5px}.userenrolment .col_userdetails .subfield_picture{float:left}.userenrolment .col_lastseen{width:150px}.userenrolment .col_role{width:262px}.userenrolment .col_role .roles{margin-right:30px}.userenrolment .col_role .role{float:left;padding:3px;margin:3px}.dir-rtl .userenrolment .col_role .role{float:right}.userenrolment .col_role .role a{margin-left:3px;cursor:pointer}.userenrolment .col_role .addrole{float:right;width:18px;height:18px;margin:3px;text-align:center;background-color:#dff0d8;border:1px solid #d6e9c6}.userenrolment .col_role .addrole img{vertical-align:baseline}.userenrolment .hasAllRoles .col_role .addrole{display:none}.userenrolment .col_group .groups{margin-right:30px}.userenrolment .col_group .group{float:left;padding:3px;margin:3px;white-space:nowrap}.userenrolment .col_group .group a{margin-left:3px;cursor:pointer}.userenrolment .col_group .addgroup{float:right;width:18px;height:18px;margin:3px;text-align:center}.userenrolment .col_group .addgroup a img{vertical-align:bottom}.userenrolment .col_enrol .enrolment{float:left;padding:3px;margin:3px}.userenrolment .col_enrol .enrolment a{float:right;margin-left:3px}#page-enrol-users .enrol_user_buttons{float:right}#page-enrol-users .enrol_user_buttons .enrolusersbutton{display:inline;margin-left:1em}#page-enrol-users .enrol_user_buttons .enrolusersbutton div,#page-enrol-users .enrol_user_buttons .enrolusersbutton form{display:inline}#page-enrol-users .enrol_user_buttons .enrolusersbutton input{padding-right:6px;padding-left:6px}#page-enrol-users.dir-rtl .col_userdetails .subfield_picture{float:right}#page-enrol-users .user-enroller-panel .uep-search-results .user .details{width:237px}.dir-rtl .headermain{float:right}.dir-rtl .headermenu{float:left}.dir-rtl .loginbox .loginform .form-label{float:right;text-align:left}.dir-rtl .loginbox .loginform .form-input{text-align:right}.dir-rtl .yui3-menu-hidden{left:0}#page-admin-roles-define.dir-rtl #rolesform .felement{margin-right:180px}#page-message-edit.dir-rtl table.generaltable th.c0{text-align:right}.corelightbox{position:absolute;top:0;left:0;width:100%;height:100%;text-align:center;background-color:#CCC}.corelightbox img{position:fixed;top:50%;left:50%}.mod-indent-1{margin-left:30px}.mod-indent-2{margin-left:60px}.mod-indent-3{margin-left:90px}.mod-indent-4{margin-left:120px}.mod-indent-5{margin-left:150px}.mod-indent-6{margin-left:180px}.mod-indent-7{margin-left:210px}.mod-indent-8{margin-left:240px}.mod-indent-9{margin-left:270px}.mod-indent-10{margin-left:300px}.mod-indent-11{margin-left:330px}.mod-indent-12{margin-left:360px}.mod-indent-13{margin-left:390px}.mod-indent-14{margin-left:420px}.mod-indent-15,.mod-indent-huge{margin-left:420px}.dir-rtl .mod-indent-1{margin-right:30px;margin-left:0}.dir-rtl .mod-indent-2{margin-right:60px;margin-left:0}.dir-rtl .mod-indent-3{margin-right:90px;margin-left:0}.dir-rtl .mod-indent-4{margin-right:120px;margin-left:0}.dir-rtl .mod-indent-5{margin-right:150px;margin-left:0}.dir-rtl .mod-indent-6{margin-right:180px;margin-left:0}.dir-rtl .mod-indent-7{margin-right:210px;margin-left:0}.dir-rtl .mod-indent-8{margin-right:240px;margin-left:0}.dir-rtl .mod-indent-9{margin-right:270px;margin-left:0}.dir-rtl .mod-indent-10{margin-right:300px;margin-left:0}.dir-rtl .mod-indent-11{margin-right:330px;margin-left:0}.dir-rtl .mod-indent-12{margin-right:360px;margin-left:0}.dir-rtl .mod-indent-13{margin-right:390px;margin-left:0}.dir-rtl .mod-indent-14{margin-right:420px;margin-left:0}.dir-rtl .mod-indent-15,.dir-rtl .mod-indent-huge{margin-right:420px;margin-left:0}.resourcecontent .mediaplugin_mp3 object{width:600px;height:25px}.resourcecontent audio.mediaplugin_html5audio{width:600px}.resourceimage{max-width:100%}.mediaplugin_mp3 object{width:300px;height:15px}audio.mediaplugin_html5audio{width:300px}.core_media_preview.pagelayout-embedded #content{padding:0}.core_media_preview.pagelayout-embedded #maincontent{height:0}.core_media_preview.pagelayout-embedded .mediaplugin{margin:0}.dir-rtl .ygtvtn,.dir-rtl .ygtvtm,.dir-rtl .ygtvtmh,.dir-rtl .ygtvtmhh,.dir-rtl .ygtvtp,.dir-rtl .ygtvtph,.dir-rtl .ygtvtphh,.dir-rtl .ygtvln,.dir-rtl .ygtvlm,.dir-rtl .ygtvlmh,.dir-rtl .ygtvlmhh,.dir-rtl .ygtvlp,.dir-rtl .ygtvlph,.dir-rtl .ygtvlphh,.dir-rtl .ygtvdepthcell,.dir-rtl .ygtvok,.dir-rtl .ygtvok:hover,.dir-rtl .ygtvcancel,.dir-rtl .ygtvcancel:hover{width:18px;height:22px;cursor:pointer;background-image:url([[pix:theme|yui2-treeview-sprite-rtl]]);background-repeat:no-repeat}.dir-rtl .ygtvtn{background-position:0 -5600px}.dir-rtl .ygtvtm{background-position:0 -4000px}.dir-rtl .ygtvtmh,.dir-rtl .ygtvtmhh{background-position:0 -4800px}.dir-rtl .ygtvtp{background-position:0 -6400px}.dir-rtl .ygtvtph,.dir-rtl .ygtvtphh{background-position:0 -7200px}.dir-rtl .ygtvln{background-position:0 -1600px}.dir-rtl .ygtvlm{background-position:0 0}.dir-rtl .ygtvlmh,.dir-rtl .ygtvlmhh{background-position:0 -800px}.dir-rtl .ygtvlp{background-position:0 -2400px}.dir-rtl .ygtvlph,.dir-rtl .ygtvlphh{background-position:0 -3200px}.dir-rtl .ygtvdepthcell{background-position:0 -8000px}.dir-rtl .ygtvok{background-position:0 -8800px}.dir-rtl .ygtvok:hover{background-position:0 -8844px}.dir-rtl .ygtvcancel{background-position:0 -8822px}.dir-rtl .ygtvcancel:hover{background-position:0 -8866px}.dir-rtl.yui-skin-sam .yui-panel .hd{text-align:right}.dir-rtl .yui-skin-sam .yui-layout .yui-layout-unit div.yui-layout-bd{text-align:right}.dir-rtl .clearlooks2.ie9 .mceAlert .mceMiddle span,.dir-rtl .clearlooks2 .mceConfirm .mceMiddle span{top:44px}.dir-rtl .o2k7Skin table,.dir-rtl .o2k7Skin tbody,.dir-rtl .o2k7Skin a,.dir-rtl .o2k7Skin img,.dir-rtl .o2k7Skin tr,.dir-rtl .o2k7Skin div,.dir-rtl .o2k7Skin td,.dir-rtl .o2k7Skin iframe,.dir-rtl .o2k7Skin span,.dir-rtl .o2k7Skin *,.dir-rtl .o2k7Skin .mceText,.dir-rtl .o2k7Skin .mceListBox .mceText{text-align:right}.path-rating .ratingtable{width:100%;margin-bottom:1em}.path-rating .ratingtable th.rating{width:100%}.path-rating .ratingtable td.rating,.path-rating .ratingtable td.time{text-align:center;white-space:nowrap}.initialbar a{padding-right:2px}.moodle-dialogue-base .moodle-dialogue-lightbox{background-color:#AAA}.moodle-dialogue-base .hidden,.moodle-dialogue-base .moodle-dialogue-hidden{display:none}.moodle-dialogue-base .moodle-dialogue{z-index:600;padding:0;margin:0;background:0;border:0}.moodle-dialogue-base .moodle-dialogue-wrap{margin-top:-3px;margin-left:-3px;background-color:#fff;border:1px solid #ccc;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;-webkit-box-shadow:5px 5px 20px 0 #666;-moz-box-shadow:5px 5px 20px 0 #666;box-shadow:5px 5px 20px 0 #666}.moodle-dialogue-base .moodle-dialogue-wrap .moodle-dialogue-hd{padding:5px;margin:0;font-size:12px;font-weight:normal;letter-spacing:1px;color:#333;text-align:center;text-shadow:1px 1px 1px #fff;background:#ccc;background-color:#ebebeb;background-image:-moz-linear-gradient(top,#fff,#ccc);background-image:-webkit-gradient(linear,0 0,0 100%,from(#fff),to(#ccc));background-image:-webkit-linear-gradient(top,#fff,#ccc);background-image:-o-linear-gradient(top,#fff,#ccc);background-image:linear-gradient(to bottom,#fff,#ccc);background-repeat:repeat-x;border-bottom:1px solid #bbb;-webkit-border-radius:10px 10px 0 0;-moz-border-radius:10px 10px 0 0;border-radius:10px 10px 0 0;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffffff',endColorstr='#ffcccccc',GradientType=0);filter:dropshadow(color=#ffffff,offx=1,offy=1)}.moodle-dialogue-base .moodle-dialogue-wrap .moodle-dialogue-hd h1{display:inline;padding:0;margin:0;font-size:100%;font-weight:bold}.moodle-dialogue-base .moodle-dialogue-wrap .moodle-dialogue-hd .yui3-widget-buttons{padding:5px}.moodle-dialogue-base .closebutton{display:inline-block;float:right;width:25px;height:15px;padding:0;vertical-align:middle;cursor:pointer;background-image:url([[pix:theme|sprite]]);background-repeat:no-repeat;border-style:none}.dir-rtl .moodle-dialogue-base .moodle-dialogue-wrap .moodle-dialogue-hd .yui3-widget-buttons{right:auto;left:0}.moodle-dialogue-base .moodle-dialogue .moodle-dialogue-bd{padding:1em;overflow:auto;font-size:12px;line-height:2em;color:#555}.moodle-dialogue-base .moodle-dialogue-wrap .moodle-dialogue-content{padding:0;background:#FFF}.moodle-dialogue-confirm .confirmation-dialogue{text-align:center}.moodle-dialogue-confirm .confirmation-dialogue input{text-align:center}.moodle-dialogue-exception .moodle-exception-message{text-align:center}.moodle-dialogue-exception .moodle-exception-param label{font-weight:bold}.moodle-dialogue-exception .param-stacktrace label{background-color:#EEE;border:1px solid #ccc;border-bottom-width:0}.moodle-dialogue-exception .param-stacktrace pre{background-color:#fff;border:1px solid #ccc}.moodle-dialogue-exception .param-stacktrace .stacktrace-file{font-size:11.9px;color:navy}.moodle-dialogue-exception .param-stacktrace .stacktrace-line{font-size:11.9px;color:#b94a48}.moodle-dialogue-exception .param-stacktrace .stacktrace-call{font-size:90%;color:#333;border-bottom:1px solid #eee}.moodle-dialogue-base .moodle-dialogue .moodle-dialogue-content .moodle-dialogue-ft{padding:0;margin:.7em 1em;font-size:12px;text-align:right;background-color:#FFF}.moodle-dialogue-confirm .confirmation-message{margin:.5em 1em}.moodle-dialogue-confirm .confirmation-dialogue input{min-width:80px}.moodle-dialogue-exception .moodle-exception-message{margin:1em}.moodle-dialogue-exception .moodle-exception-param{margin-bottom:.5em}.moodle-dialogue-exception .moodle-exception-param label{width:150px}.moodle-dialogue-exception .param-stacktrace label{display:block;padding:4px 1em;margin:0}.moodle-dialogue-exception .param-stacktrace pre{display:block;height:200px;overflow:auto}.moodle-dialogue-exception .param-stacktrace .stacktrace-file{display:inline-block;margin:4px 0}.moodle-dialogue-exception .param-stacktrace .stacktrace-line{display:inline-block;width:50px;margin:4px 1em}.moodle-dialogue-exception .param-stacktrace .stacktrace-call{padding-bottom:4px;padding-left:25px;margin-bottom:4px}.moodle-dialogue .moodle-dialogue-bd .content-lightbox{top:0;left:0;width:100%;height:100%;padding:10% 0;text-align:center;background-color:white;opacity:.75;filter:alpha(opacity=75)}.moodle-dialogue .tooltiptext{max-height:300px}.moodle-dialogue-base .moodle-dialogue.moodle-dialogue-tooltip{z-index:3001}#page-question-edit.dir-rtl a.container-close{right:auto;left:6px}.chooserdialoguebody,.choosertitle{display:none}.moodle-dialogue.chooserdialogue .moodle-dialogue-content .moodle-dialogue-ft{margin:0}.chooserdialogue .moodle-dialogue-wrap .moodle-dialogue-bd{padding:0;background:#f2f2f2;-webkit-border-bottom-right-radius:10px;border-bottom-right-radius:10px;-webkit-border-bottom-left-radius:10px;border-bottom-left-radius:10px;-moz-border-radius-bottomright:10px;-moz-border-radius-bottomleft:10px}.choosercontainer #chooseform .submitbuttons{margin:.7em 0;text-align:center}.choosercontainer #chooseform .submitbuttons input{min-width:100px;margin:0 .5em}.choosercontainer #chooseform .options{position:relative;border-bottom:1px solid #bbb}.jsenabled .choosercontainer #chooseform .alloptions{max-width:20.3em;overflow-x:hidden;overflow-y:auto;-webkit-box-shadow:inset 0 0 30px 0 #ccc;-moz-box-shadow:inset 0 0 30px 0 #ccc;box-shadow:inset 0 0 30px 0 #ccc}.dir-rtl.jsenabled .choosercontainer #chooseform .alloptions{max-width:18.3em}.choosercontainer #chooseform .moduletypetitle,.choosercontainer #chooseform .option,.choosercontainer #chooseform .nonoption{padding:0 1.6em 0 1.6em;margin-bottom:0}.choosercontainer #chooseform .moduletypetitle{padding-top:1.2em;padding-bottom:.4em;text-transform:uppercase}.choosercontainer #chooseform .option .typename,.choosercontainer #chooseform .option span.modicon img.icon,.choosercontainer #chooseform .nonoption .typename,.choosercontainer #chooseform .nonoption span.modicon img.icon{padding:0 0 0 .5em}.dir-rtl .choosercontainer #chooseform .option .typename,.dir-rtl .choosercontainer #chooseform .option span.modicon img.icon,.dir-rtl .choosercontainer #chooseform .nonoption .typename,.dir-rtl .choosercontainer #chooseform .nonoption span.modicon img.icon{padding:0 .5em 0 0}.choosercontainer #chooseform .option span.modicon img.icon,.choosercontainer #chooseform .nonoption span.modicon img.icon{width:24px;height:24px}.choosercontainer #chooseform .option input[type=radio],.choosercontainer #chooseform .option span.typename,.choosercontainer #chooseform .option span.modicon{vertical-align:middle}.choosercontainer #chooseform .option label{display:block;padding:.3em 0 .1em 0;border-bottom:1px solid #fff}.choosercontainer #chooseform .nonoption{padding-top:.3em;padding-bottom:.1em;padding-left:2.7em}.dir-rtl .choosercontainer #chooseform .nonoption{padding-right:2.7em;padding-left:0}.choosercontainer #chooseform .subtype{padding:0 1.6em 0 3.2em;margin-bottom:0}.dir-rtl .choosercontainer #chooseform .subtype{padding:0 3.2em 0 1.6em}.choosercontainer #chooseform .subtype .typename{margin:0 0 0 .2em}.dir-rtl .choosercontainer #chooseform .subtype .typename{margin:0 .2em 0 0}.jsenabled .choosercontainer #chooseform .instruction,.jsenabled .choosercontainer #chooseform .typesummary{position:absolute;top:0;right:0;bottom:0;left:20.3em;display:none;padding:1.6em;margin:0;overflow-x:hidden;overflow-y:auto;line-height:2em;background-color:#fff}.dir-rtl.jsenabled .choosercontainer #chooseform .instruction,.dir-rtl.jsenabled .choosercontainer #chooseform .typesummary{right:18.5em;left:0;border-right:1px solid grey}.jsenabled .choosercontainer #chooseform .instruction,.choosercontainer #chooseform .selected .typesummary{display:block}.choosercontainer #chooseform .selected{background-color:#fff;-webkit-box-shadow:0 0 10px 0 #ccc;-moz-box-shadow:0 0 10px 0 #ccc;box-shadow:0 0 10px 0 #ccc}.section-modchooser-link img.smallicon{padding:3px}.formlistingradio{padding-right:10px;padding-bottom:25px}.formlistinginputradio{float:left}.formlistingmain{min-height:225px}.formlisting{position:relative;padding:1px 19px 14px;margin:15px 0;background-color:white;border:1px solid #DDD;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px}.formlistingmore{position:absolute;right:-1px;bottom:-1px;padding:3px 7px;font-size:12px;font-weight:bold;color:#9da0a4;cursor:pointer;background-color:whiteSmoke;border:1px solid #ddd;-webkit-border-radius:4px 0 4px 0;-moz-border-radius:4px 0 4px 0;border-radius:4px 0 4px 0}.formlistingall{padding:0;margin:15px 0;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px}.formlistingrow{top:50%;left:50%;float:left;width:150px;min-height:34px;padding:6px;cursor:pointer;background-color:#f7f7f9;border-right:1px solid #e1e1e8;border-bottom:1px solid;border-left:1px solid #e1e1e8;border-color:#e1e1e8;-webkit-border-radius:0 0 4px 4px;-moz-border-radius:0 0 4px 4px;border-radius:0 0 4px 4px}body.jsenabled .formlistingradio{display:none}body.jsenabled .formlisting{display:block}table.collection{width:100%;margin-bottom:20px;border:1px solid #ddd;border-collapse:separate;*border-collapse:collapse;border-left:0;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px}table.collection th,table.collection td{padding:8px;line-height:20px;text-align:left;vertical-align:top;border-top:1px solid #ddd}table.collection th{font-weight:bold}table.collection thead th{vertical-align:bottom}table.collection caption+thead tr:first-child th,table.collection caption+thead tr:first-child td,table.collection colgroup+thead tr:first-child th,table.collection colgroup+thead tr:first-child td,table.collection thead:first-child tr:first-child th,table.collection thead:first-child tr:first-child td{border-top:0}table.collection tbody+tbody{border-top:2px solid #ddd}table.collection .table{background-color:#fff}table.collection th,table.collection td{border-left:1px solid #ddd}table.collection caption+thead tr:first-child th,table.collection caption+tbody tr:first-child th,table.collection caption+tbody tr:first-child td,table.collection colgroup+thead tr:first-child th,table.collection colgroup+tbody tr:first-child th,table.collection colgroup+tbody tr:first-child td,table.collection thead:first-child tr:first-child th,table.collection tbody:first-child tr:first-child th,table.collection tbody:first-child tr:first-child td{border-top:0}table.collection thead:first-child tr:first-child>th:first-child,table.collection tbody:first-child tr:first-child>td:first-child,table.collection tbody:first-child tr:first-child>th:first-child{-webkit-border-top-left-radius:4px;border-top-left-radius:4px;-moz-border-radius-topleft:4px}table.collection thead:first-child tr:first-child>th:last-child,table.collection tbody:first-child tr:first-child>td:last-child,table.collection tbody:first-child tr:first-child>th:last-child{-webkit-border-top-right-radius:4px;border-top-right-radius:4px;-moz-border-radius-topright:4px}table.collection thead:last-child tr:last-child>th:first-child,table.collection tbody:last-child tr:last-child>td:first-child,table.collection tbody:last-child tr:last-child>th:first-child,table.collection tfoot:last-child tr:last-child>td:first-child,table.collection tfoot:last-child tr:last-child>th:first-child{-webkit-border-bottom-left-radius:4px;border-bottom-left-radius:4px;-moz-border-radius-bottomleft:4px}table.collection thead:last-child tr:last-child>th:last-child,table.collection tbody:last-child tr:last-child>td:last-child,table.collection tbody:last-child tr:last-child>th:last-child,table.collection tfoot:last-child tr:last-child>td:last-child,table.collection tfoot:last-child tr:last-child>th:last-child{-webkit-border-bottom-right-radius:4px;border-bottom-right-radius:4px;-moz-border-radius-bottomright:4px}table.collection tfoot+tbody:last-child tr:last-child td:first-child{-webkit-border-bottom-left-radius:0;border-bottom-left-radius:0;-moz-border-radius-bottomleft:0}table.collection tfoot+tbody:last-child tr:last-child td:last-child{-webkit-border-bottom-right-radius:0;border-bottom-right-radius:0;-moz-border-radius-bottomright:0}table.collection caption+thead tr:first-child th:first-child,table.collection caption+tbody tr:first-child td:first-child,table.collection colgroup+thead tr:first-child th:first-child,table.collection colgroup+tbody tr:first-child td:first-child{-webkit-border-top-left-radius:4px;border-top-left-radius:4px;-moz-border-radius-topleft:4px}table.collection caption+thead tr:first-child th:last-child,table.collection caption+tbody tr:first-child td:last-child,table.collection colgroup+thead tr:first-child th:last-child,table.collection colgroup+tbody tr:first-child td:last-child{-webkit-border-top-right-radius:4px;border-top-right-radius:4px;-moz-border-radius-topright:4px}table.collection tbody>tr:nth-child(odd)>td,table.collection tbody>tr:nth-child(odd)>th{background-color:#f9f9f9}table.collection .name{text-align:left;vertical-align:middle}table.collection .awards{width:10%;text-align:center;vertical-align:middle}table.collection .criteria{width:40%;text-align:left;vertical-align:top}table.collection .badgeimage,table.collection .status{width:15%;text-align:center;vertical-align:middle}table.collection .description{width:25%;text-align:left}table.collection .actions{width:11em;text-align:center;vertical-align:middle}a.criteria-action{float:right;padding:0 3px}table.issuedbadgebox{width:750px;background-color:#fff}table.badgeissuedimage{width:150px;text-align:center}table.badgeissuedinfo{width:600px}table.badgeissuedinfo .bvalue{text-align:left;vertical-align:middle}table.badgeissuedinfo .bfield{width:125px;font-style:italic;text-align:left}ul.badges{margin:0;list-style:none}.badges li{position:relative;display:inline-block;width:150px;padding-bottom:2em;text-align:center;vertical-align:top}.badges li .badge-name{display:block;padding:5px}.badges li>img{position:absolute}.badges li .badge-image{top:0;left:10px;z-index:1;width:90px;height:90px}.badges li .badge-actions{position:relative}div.badge{position:relative;display:block}div.badge .expireimage{top:0;left:20px;width:100px;height:100px}.expireimage{position:absolute;top:0;left:30px;z-index:10;width:90px;height:90px;opacity:.85;filter:alpha(opacity=85)}.badge-profile{vertical-align:top}.connected{color:#468847}.notconnected{color:#b94a48}#page-badges-award .recipienttable tr td{vertical-align:top}#page-badges-award .recipienttable tr td.actions .actionbutton{width:100%;padding:.5em 0;margin:.3em 0}#page-badges-award .recipienttable tr td.existing,#page-badges-award .recipienttable tr td.potential{width:42%}.statustable{margin-bottom:0}.statusbox.active{background-color:#dff0d8}.statusbox.inactive{background-color:#fcf8e3}.activatebadge{margin:0;text-align:left;vertical-align:middle}.addcourse{float:right}.invisiblefieldset{display:inline;padding:0;margin:0;border-width:0}.breadcrumb-nav{float:left;margin-bottom:10px}.breadcrumb-button .singlebutton div{margin-right:0}.breadcrumb-nav .breadcrumb{margin:0}.formtable tbody th{font-weight:normal;text-align:right}.path-admin #assignrole{width:60%;margin-right:auto;margin-left:auto}.path-admin .admintable .leftalign{text-align:left}.environmenttable p.warn{color:#c09853;background-color:#fcf8e3}.environmenttable .error,.environmenttable span.warn,.environmenttable .ok{display:inline-block;padding:2px 4px;font-size:11.844px;font-weight:bold;line-height:14px;color:#fff;text-shadow:0 -1px 0 rgba(0,0,0,0.25);white-space:nowrap;vertical-align:baseline;background-color:#999;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px}.environmenttable .error:empty,.environmenttable span.warn:empty,.environmenttable .ok:empty{display:none}.environmenttable .error-important,.environmenttable span.warn-important,.environmenttable .ok-important{background-color:#b94a48}.environmenttable .error-important[href],.environmenttable span.warn-important[href],.environmenttable .ok-important[href]{background-color:#953b39}.environmenttable .error-warning,.environmenttable span.warn-warning,.environmenttable .ok-warning{background-color:#f89406}.environmenttable .error-warning[href],.environmenttable span.warn-warning[href],.environmenttable .ok-warning[href]{background-color:#c67605}.environmenttable .error-success,.environmenttable span.warn-success,.environmenttable .ok-success{background-color:#468847}.environmenttable .error-success[href],.environmenttable span.warn-success[href],.environmenttable .ok-success[href]{background-color:#356635}.environmenttable .error-info,.environmenttable span.warn-info,.environmenttable .ok-info{background-color:#3a87ad}.environmenttable .error-info[href],.environmenttable span.warn-info[href],.environmenttable .ok-info[href]{background-color:#2d6987}.environmenttable .error-inverse,.environmenttable span.warn-inverse,.environmenttable .ok-inverse{background-color:#333}.environmenttable .error-inverse[href],.environmenttable span.warn-inverse[href],.environmenttable .ok-inverse[href]{background-color:#1a1a1a}.environmenttable .error{background-color:#b94a48}.environmenttable span.warn{background-color:#f89406}.environmenttable .ok{background-color:#468847}.path-admin .admintable.environmenttable .name,.path-admin .admintable.environmenttable .info,.path-admin #assignrole .admintable .role,.path-admin #assignrole .admintable .userrole,.path-admin #assignrole .admintable .roleholder{white-space:nowrap}.path-admin .incompatibleblockstable td.c0{font-weight:bold}#page-admin-course-category .addcategory{padding:10px}#page-admin-course-index .editcourse{margin:20px auto}#page-admin-course-index .editcourse th,#page-admin-course-index .editcourse td{padding-right:10px;padding-left:10px}.timewarninghidden{display:none}.statusok,.statuswarning,.statusserious,.statuscritical{display:inline-block;padding:2px 4px;font-size:11.844px;font-weight:bold;line-height:14px;color:#fff;text-shadow:0 -1px 0 rgba(0,0,0,0.25);white-space:nowrap;vertical-align:baseline;background-color:#999;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px}.statusok:empty,.statuswarning:empty,.statusserious:empty,.statuscritical:empty{display:none}.statusok-important,.statuswarning-important,.statusserious-important,.statuscritical-important{background-color:#b94a48}.statusok-important[href],.statuswarning-important[href],.statusserious-important[href],.statuscritical-important[href]{background-color:#953b39}.statusok-warning,.statuswarning-warning,.statusserious-warning,.statuscritical-warning{background-color:#f89406}.statusok-warning[href],.statuswarning-warning[href],.statusserious-warning[href],.statuscritical-warning[href]{background-color:#c67605}.statusok-success,.statuswarning-success,.statusserious-success,.statuscritical-success{background-color:#468847}.statusok-success[href],.statuswarning-success[href],.statusserious-success[href],.statuscritical-success[href]{background-color:#356635}.statusok-info,.statuswarning-info,.statusserious-info,.statuscritical-info{background-color:#3a87ad}.statusok-info[href],.statuswarning-info[href],.statusserious-info[href],.statuscritical-info[href]{background-color:#2d6987}.statusok-inverse,.statuswarning-inverse,.statusserious-inverse,.statuscritical-inverse{background-color:#333}.statusok-inverse[href],.statuswarning-inverse[href],.statusserious-inverse[href],.statuscritical-inverse[href]{background-color:#1a1a1a}.statusok{background-color:#468847}.statuswarning{background-color:#c09853}.statusserious{background-color:#f89406}.statuscritical{background-color:#b94a48}#page-admin-report-capability-index #capabilitysearch{width:30em}#page-admin-report-backups-index .backup-error,#page-admin-report-backups-index .backup-unfinished{color:#b94a48}#page-admin-report-backups-index .backup-skipped,#page-admin-report-backups-index .backup-ok{color:#468847}#page-admin-report-backups-index .backup-warning{color:#c09853}#page-admin-qtypes .disabled,#page-admin-qbehaviours .disabled{color:#999}#page-admin-qtypes #qtypes div,#page-admin-qtypes #qtypes form,#page-admin-qbehaviours #qbehaviours div,#page-admin-qbehaviours #qbehaviours form{display:inline}#page-admin-qtypes #qtypes img.spacer,#page-admin-qbehaviours #qbehaviours img.spacer{width:16px}img.iconsmall{padding:.3em;margin:0}#page-admin-qbehaviours .cell.c3,#page-admin-qtypes .cell.c3{font-size:10.5px}#page-admin-lang .generalbox,#page-admin-course-index .singlebutton,#page-admin-course-index .addcategory,#page-course-index .buttons,#page-course-index-category .buttons,#page-admin-course-category .addcategory,#page-admin-stickyblocks .generalbox,#page-admin-maintenance .buttons,#page-admin-course-index .buttons,#page-admin-course-category .buttons,#page-admin-index .copyright,#page-admin-index .copyrightnotice,#page-admin-index .adminerror,#page-admin-index .availableupdatesinfo,#page-admin-index .adminerror .singlebutton,#page-admin-index .adminwarning .singlebutton,#page-admin-index #layout-table .singlebutton{margin-bottom:1em;text-align:center}.path-admin-roles .capabilitysearchui{margin-right:auto;margin-left:auto;text-align:left}#page-admin-roles-define .topfields{margin:1em 0 2em}#page-admin-roles-define .capdefault{background-color:#eee;border:1px solid #cecece}#page-filter-manage .backlink,.path-admin-roles .backlink{margin-top:1em}#page-admin-roles-explain #chooseuser h3,#page-admin-roles-usersroles .contextname{margin-top:0}#page-admin-roles-explain #chooseusersubmit{margin-top:0;text-align:center}#page-admin-roles-usersroles p{margin:0}#page-admin-roles-override .cell.c1,#page-admin-roles-assign .cell.c3,#page-admin-roles-assign .cell.c1{padding-top:.75em}#page-admin-roles-override .overridenotice,#page-admin-roles-define .definenotice{margin:1em 10% 2em 10%;text-align:left}#notice{width:60%;min-width:220px;margin:auto}#page-admin-index .releasenoteslink,#page-admin-index .adminwarning,#page-admin-index .maturitywarning,#page-admin-index .maturityinfo{width:60%;min-width:220px;padding:8px 35px 8px 14px;margin:auto;margin-bottom:20px;color:#c09853;text-shadow:0 1px 0 rgba(255,255,255,0.5);background-color:#fcf8e3;border:1px solid #fbeed5;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px}#page-admin-index .maturitywarning,#page-admin-index .adminwarning.maturityinfo.maturity50{color:#b94a48;background-color:#f2dede;border-color:#eed3d7}#page-admin-index .adminwarning.availableupdatesinfo,#page-admin-index .releasenoteslink{color:#3a87ad;background-color:#d9edf7;border-color:#bce8f1}#page-admin-index .adminwarning.availableupdatesinfo .moodleupdateinfo span{display:block}#page-admin-index .updateplugin div,#page-admin-plugins .updateplugin div{margin-bottom:.5em}#page-admin-index .updateplugin .updatepluginconfirmexternal,#page-admin-plugins .updateplugin .updatepluginconfirmexternal{padding:1em;background-color:#f2dede;border:1px solid #eed3d7}#page-admin-user-user_bulk #users .fgroup{white-space:nowrap}#page-admin-report-stats-index .graph{margin-bottom:1em;text-align:center}#page-admin-report-courseoverview-index .graph{margin-bottom:1em;text-align:center}#page-admin-lang .translator{border-style:solid;border-width:1px}.path-admin .roleassigntable{width:100%}.path-admin .roleassigntable td{padding:.2em .3em;vertical-align:top}.path-admin .roleassigntable p{margin:.2em 0;text-align:left}.path-admin .roleassigntable #existingcell,.path-admin .roleassigntable #potentialcell{width:42%}.path-admin .roleassigntable #existingcell p>label:first-child,.path-admin .roleassigntable #potentialcell p>label:first-child{font-weight:bold}.path-admin .roleassigntable #buttonscell{width:16%}.path-admin .roleassigntable #buttonscell #assignoptions{font-size:10.5px}.path-admin .roleassigntable #removeselect_wrapper,.path-admin .roleassigntable #addselect_wrapper{width:100%}.path-admin table.rolecap tr.rolecap th{font-weight:normal;text-align:left}.path-admin.dir-rtl table.rolecap tr.rolecap th{text-align:right}.path-admin .rolecap .hiddenrow{display:none}.path-admin #defineroletable .rolecap .inherit,.path-admin #defineroletable .rolecap .allow,.path-admin #defineroletable .rolecap .prevent,.path-admin #defineroletable .rolecap .prohibit{min-width:3.5em;padding:0;text-align:center}.path-admin .rolecap .cap-name,.path-admin .rolecap .note{display:block;font-size:10.5px;font-weight:normal;white-space:nowrap}.path-admin .rolecap label{display:block;padding:.5em;margin:0;text-align:center}.plugincheckwrapper{width:100%}.environmentbox{margin-top:1em}#mnetconfig table{margin-right:auto;margin-left:auto}.environmenttable .cell{padding:.15em .5em}.environmenttable img.iconhelp{padding-right:.3em}.dir-rtl .environmenttable img.iconhelp{padding-right:0;padding-left:.3em}#trustedhosts .generaltable{width:500px;margin-right:auto;margin-left:auto}#trustedhosts .standard{width:auto}#adminsettings legend{display:none}#adminsettings fieldset.error{margin:.2em 0 .5em 0}#adminsettings fieldset.error legend{display:block}.dir-rtl #admin-spelllanguagelist textarea,#page-admin-setting-editorsettingstinymce.dir-rtl .form-textarea textarea{text-align:left;direction:ltr}.form-item .form-setting .form-htmlarea{display:inline;width:640px}.form-item .form-setting .form-htmlarea .htmlarea{display:block;width:640px}.form-item .form-setting .form-multicheckbox ul{padding:0;margin:7px 0 0 0;list-style:none}.form-item .form-setting .defaultsnext{display:inline;margin-right:.5em}.form-item .form-setting .locked-checkbox{display:inline;margin-right:.2em;margin-left:.5em}.dir-rtl .form-item .form-setting .locked-checkbox{display:inline;margin-right:.5em;margin-left:.2em}.form-item .form-setting .form-password .unmask,.form-item .form-setting .form-defaultinfo{display:inline-block}.form-item .pathok,.form-item .patherror{margin-left:.5em}#admin-devicedetectregex table{border:0}#admin-emoticons td input{width:8em}#admin-emoticons td.c0 input{width:4em}#adminthemeselector .selectedtheme td.c0{border:1px solid;border-right-width:0}#adminthemeselector .selectedtheme td.c1{border:1px solid;border-left-width:0}.admin_colourpicker,.admin_colourpicker_preview{display:none}.jsenabled .admin_colourpicker_preview{display:inline}.jsenabled .admin_colourpicker{display:block;width:410px;height:102px;margin-bottom:10px}.admin_colourpicker .loadingicon{margin-left:auto;vertical-align:middle}.admin_colourpicker .colourdialogue{float:left;border:1px solid #000}.admin_colourpicker .previewcolour{margin-left:301px;border:1px solid #000}.admin_colourpicker .currentcolour{margin-left:301px;border:1px solid #000;border-top-width:0}.dir-rtl .form-item .form-setting,.dir-rtl .form-item .form-label,.dir-rtl .form-item .form-description,.dir-rtl.path-admin .roleassigntable p{text-align:right}#page-admin-index #notice .checkforupdates{text-align:center}#plugins-check-info{margin:1em;text-align:center}#plugins-check .displayname .pluginicon{width:16px}#plugins-check .status-new .status{background-color:#dff0d8}#page-admin-index .adminwarning.availableupdatesinfo .moodleupdateinfo.maturity200 .info.release,#plugins-check .status-upgrade .status,#plugins-check .status-delete .status{background-color:#d9edf7}#plugins-control-panel .extension .source,#page-admin-index .adminwarning.availableupdatesinfo .moodleupdateinfo.maturity100 .info.release,#page-admin-index .adminwarning.availableupdatesinfo .moodleupdateinfo.maturity150 .info.release,.pluginupdateinfo.maturity100,.pluginupdateinfo.maturity150,#plugins-check .extension .source{background-color:#fcf8e3}#page-admin-index .adminwarning.availableupdatesinfo .moodleupdateinfo.maturity50 .info.release,.pluginupdateinfo.maturity50,#plugins-check .requires-failed,#plugins-check .missingfromdisk .displayname,#plugins-check .status-missing .status,#plugins-check .status-downgrade .status{background-color:#f2dede}#plugins-control-panel .statusmsg{padding:3px;background-color:#eee;-webkit-border-radius:5px;-moz-border-radius:5px;border-radius:5px}#plugins-control-panel .status-missing .pluginname{background-color:#f2dede}#plugins-control-panel .status-missing .statusmsg{color:#b94a48}#plugins-control-panel .status-new .pluginname{background-color:#dff0d8}#plugins-control-panel .status-new .statusmsg{color:#468847}#plugins-control-panel .disabled .availability{background-color:#eee}#plugins-check .standard .source,#plugins-check .status-nodb .status,#plugins-check .status-uptodate .status,#plugins-check .requires-ok{color:#999}#plugins-check .requires ul{margin:0;font-size:10.5px}#plugins-check .status .pluginupdateinfo{padding:5px 10px;margin:10px;background-color:#d9edf7;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px}#plugins-check .status .pluginupdateinfo span,#plugins-check .status .pluginupdateinfo a{padding-right:1em}#page-admin-index .upgradepluginsinfo{text-align:center}#page-admin-plugins .checkforupdates{margin:0 auto 1em;text-align:center}#plugins-control-panel .requiredby,#plugins-control-panel .pluginname .componentname{font-size:11.9px;color:#999}#plugins-control-panel .pluginname .componentname{margin-left:22px}#plugins-overview-filter .filter-item,#plugins-overview-panel .info{padding:0 10px}#page-admin-index .adminwarning.availableupdatesinfo .moodleupdateinfo .separator,#plugins-check .status .pluginupdateinfo .separator,#page-admin-plugins .separator{border-left:1px dotted #999}#plugins-control-panel .msg td{text-align:center}#plugins-overview-filter,#plugins-overview-panel{margin:1em auto;text-align:center}#plugins-overview-panel .info.updatable{margin-left:10px;font-weight:bold;background-color:#d9edf7;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px}#plugins-overview-filter .filter-item.active{font-weight:bold}#plugins-control-panel .displayname img.icon{padding-top:0;padding-bottom:0}#plugins-control-panel .uninstall a{color:#b94a48}#plugins-control-panel .notes .pluginupdateinfo{padding:5px 10px;margin:10px;background-color:#d9edf7;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px}#plugins-control-panel .notes .pluginupdateinfo span,#plugins-control-panel .notes .pluginupdateinfo a{padding-right:1em}.dir-rtl #plugins-check .pluginupdateinfo{text-align:center;direction:ltr}.dir-rtl #plugins-check .rootdir,.dir-rtl #plugins-check .requires-ok{text-align:left;direction:ltr}#page-admin-mnet-peers .box.deletedhosts{margin-bottom:1em;font-size:11.9px}#page-admin-mnet-peers .mform .certdetails{background-color:white}#page-admin-mnet-peers .mform .deletedhostinfo{padding:4px;margin-bottom:5px;background-color:#f2dede;border:2px solid #eed3d7}#core-cache-plugin-summaries table,#core-cache-store-summaries table{width:100%}#core-cache-lock-summary table,#core-cache-definition-summaries table,#core-cache-mode-mappings table{margin:0 auto}#core-cache-store-summaries .default-store td{font-style:italic;color:#333}#core-cache-rescan-definitions,#core-cache-mode-mappings .edit-link,#core-cache-lock-summary .new-instance{margin-top:.5em;text-align:center}.tinymcesubplugins img.icon{padding-top:0;padding-bottom:0}#page-admin-roles-assign div.box.generalbox{padding:8px 35px 8px 14px;margin-bottom:20px;color:#c09853;color:#b94a48;text-shadow:0 1px 0 rgba(255,255,255,0.5);background-color:#fcf8e3;background-color:#f2dede;border:1px solid #fbeed5;border-color:#eed3d7;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px}.calendartable{width:100%}.calendartable th,.calendartable td{width:14%;text-align:center;vertical-align:top;border:0}.calendar_event_course{background-color:#ffd3bd}.calendar_event_global{background-color:#d6f8cd}.calendar_event_group{background-color:#fee7ae}.calendar_event_user{background-color:#dce7ec}.path-calendar .calendar-controls .previous,.path-calendar .calendar-controls .next,.path-calendar .calendar-controls .current{display:block;float:left;width:12%}.path-calendar .calendar-controls .previous{text-align:left}.path-calendar .calendar-controls .current{width:76%;text-align:center}.path-calendar .calendar-controls .next{text-align:right}.path-calendar .maincalendar{padding:0;vertical-align:top}.path-calendar .maincalendar .bottom{padding:5px 0 0 0;text-align:center}.path-calendar .maincalendar .heightcontainer{position:relative;height:100%}.path-calendar .maincalendar .calendarmonth{width:98%;margin:10px auto}.path-calendar .maincalendar .calendarmonth ul{margin:0}.path-calendar .maincalendar .calendarmonth ul li{margin-top:4px;list-style-type:none}.path-calendar .maincalendar .calendarmonth td{height:5em}.path-calendar .maincalendar .calendar-controls .previous,.path-calendar .maincalendar .calendar-controls .next{width:30%}.path-calendar .maincalendar .calendar-controls .current{width:39.95%}.path-calendar .maincalendar .controls{width:98%;margin:10px auto}.path-calendar .maincalendar .eventlist .event{width:100%;margin-bottom:10px;border-collapse:separate;border-spacing:0;border-style:solid;border-width:1px}.path-calendar .maincalendar .eventlist .event .topic .name{float:left}.dir-rtl.path-calendar .maincalendar .eventlist .event .topic .name,.path-calendar .maincalendar .eventlist .event .topic .date{float:right}.dir-rtl.path-calendar .maincalendar .eventlist .event .topic .date{float:left}.path-calendar .maincalendar .eventlist .event .subscription,.path-calendar .maincalendar .eventlist .event .course{float:left;clear:left}.dir-rtl.path-calendar .maincalendar .eventlist .event .subscription,.dir-rtl.path-calendar .maincalendar .eventlist .event .course{float:right;clear:right}.path-calendar .maincalendar .eventlist .event .side{width:32px}.path-calendar .maincalendar .eventlist .event .commands a{margin:0 3px}.path-calendar .maincalendar .header{overflow:hidden}.path-calendar .maincalendar .header .buttons{float:right}.dir-rtl.path-calendar .maincalendar .header .buttons{float:left}.path-calendar .filters table{width:100%;border-collapse:separate;border-spacing:2px}#page-calendar-export .indent{padding-left:20px}.path-calendar .cal_courses_flt label{margin-right:.45em}.dir-rtl.path-calendar .cal_courses_flt label{margin-right:0;margin-left:.45em}.block .minicalendar th,.block .minicalendar td{padding:2px;font-size:.8em}.block .minicalendar{max-width:280px;margin-right:auto;margin-left:auto}.block .minicalendar td.weekend{color:#A00}.block .calendar-controls .previous{display:block;float:left;width:12%;text-align:left}.block .calendar-controls .current{display:block;float:left;width:76%;text-align:center}.block .calendar-controls .next{display:block;float:left;width:12%;text-align:right}.block .calendar_filters ul{margin:0;list-style:none}.block .calendar_filters li{margin-bottom:.2em}.block .calendar_filters li span img{padding:0 .2em}.block .calendar_filters .eventname{padding-left:.2em}.dir-rtl .block .calendar_filters .eventname{padding-right:.2em;padding-left:0}.block .content h3.eventskey{margin-top:.5em}@media(min-width:768px){#page-calender-view .container fluid{min-width:1024px}}.section_add_menus{text-align:right}.dir-rtl .section_add_menus{text-align:left}.section_add_menus .horizontal div,.section_add_menus .horizontal form{display:inline}.section_add_menus optgroup{font-style:italic;font-weight:normal}.section_add_menus .urlselect{margin-left:.4em}.dir-rtl .section_add_menus .urlselect{margin-right:.4em;margin-left:0}.section_add_menus .urlselect select{margin-left:.2em}.dir-rtl .section_add_menus .urlselect select{margin-right:.2em;margin-left:0}.section_add_menus .urlselect img.iconhelp{padding:0;margin:0;vertical-align:text-bottom}.site-topic ul.section,.course-content ul.section{margin:1em}.section .activity img.activityicon{margin-right:6px;vertical-align:text-bottom}.dir-rtl .section .activity img.activityicon{margin-right:0;margin-left:6px}.section .activity .activityinstance,.section .activity .activityinstance div{display:inline-block}.editing .section .activity .activityinstance{min-width:40%}.section .activity .activityinstance>a{display:block}.editing_show+.editing_assign,.editing_hide+.editing_assign{margin-left:20px}.section .activity .commands{display:inline;white-space:nowrap}.section .activity.modtype_label .commands{padding-left:22px;margin-left:40%}.section .activity.modtype_label.label{font-weight:normal}.section li.activity{padding:.2em;clear:both}.section .activity .activityinstance .groupinglabel{padding-left:30px}.dir-rtl .section .activity .activityinstance .groupinglabel{padding-right:30px}.section .activity .availabilityinfo,.section .activity .contentafterlink{margin-top:.5em;margin-left:30px}.dir-rtl .section .activity .availabilityinfo,.dir-rtl .section .activity .contentafterlink{margin-right:30px;margin-left:0}.section .activity .contentafterlink p{margin:.5em 0}.editing .section .activity:hover{background-color:#eee}.course-content .current{background-color:#d9edf7}.course-content .section-summary{margin-top:5px;list-style:none;border:1px solid #DDD}.course-content .section-summary .section-title{margin:2px 5px 10px 5px}.course-content .section-summary .summarytext{margin:2px 5px 2px 5px}.course-content .section-summary .section-summary-activities .activity-count{display:inline-block;margin:3px;font-size:11.9px;color:#999;white-space:nowrap}.course-content .section-summary .summary{margin-top:5px}.course-content .single-section{margin-top:1em}.course-content .single-section .section-navigation{display:block;padding:.5em;margin-bottom:-0.5em}.course-content .single-section .section-navigation .title{clear:both;font-size:108%;font-weight:bold}.course-content .single-section .section-navigation .mdl-left{float:left;margin-right:1em;font-weight:normal}.dir-rtl .course-content .single-section .section-navigation .mdl-left{float:right}.course-content .single-section .section-navigation .mdl-left .larrow{margin-right:.1em}.course-content .single-section .section-navigation .mdl-right{float:right;margin-left:1em;font-weight:normal}.dir-rtl .course-content .single-section .section-navigation .mdl-right{float:left}.course-content .single-section .section-navigation .mdl-right .rarrow{margin-left:.1em}.course-content .single-section .section-navigation .mdl-bottom{margin-top:0}.course-content ul li.section.main{margin-top:0;border-bottom:2px solid #eee}.course-content ul li.section.hidden{opacity:.5}.course-content ul.topics li.section .content,.course-content ul.weeks li.section .content{padding:0;margin-right:20px;margin-left:20px}.course-content{margin-top:0}.course-content ul.topics li.section{padding-bottom:20px}.course-content ul.topics li.section .summary{margin-left:25px}.path-course-view .completionprogress{margin-left:25px}.path-course-view .completionprogress{position:relative;z-index:1000;display:block;float:right;height:20px}#page-site-index .subscribelink{text-align:right}#page-site-index .headingblock{margin-bottom:9px}.path-course-view a.reduce-sections{padding-left:.2em}.path-course-view .headingblock{margin-bottom:9px}.path-course-view .subscribelink{text-align:right}.path-course-view .unread{margin-left:30px}.dir-rtl.path-course-view .unread{margin-right:30px}.path-course-view .block.drag .header{cursor:move}.path-course-view .completionprogress{text-align:right}.dir-rtl.path-course-view .completionprogress{text-align:left}.path-course-view .single-section .completionprogress{margin-right:5px}.path-course-view .section .summary{line-height:normal}.path-site li.activity>div,.path-course-view li.activity>div{position:relative}.path-course-view li.activity span.autocompletion,.path-course-view li.activity form.togglecompletion{float:right}.path-course-view li.activity form.togglecompletion .ajaxworking{width:16px;height:16px;background:url([[pix:i/ajaxloader]]) no-repeat}.dir-rtl.path-course-view li.activity form.togglecompletion,.dir-rtl.path-course-view li.activity span.autocompletion{float:left}.dir-rtl.path-course-view .completionprogress{float:none}.dir-rtl.path-course-view li.activity form.togglecompletion .ajaxworking{right:-22px}li.section.hidden span.commands a.editing_hide,li.section.hidden span.commands a.editing_show{cursor:default}ul.weeks h3.sectionname{white-space:nowrap}.editing ul.weeks h3.sectionname{white-space:normal}.section img.movetarget{width:80px;height:16px}input.titleeditor{width:330px;vertical-align:text-bottom}span.editinstructions{position:absolute;top:0;left:0;z-index:9999;padding:.1em .4em;margin-top:-22px;margin-left:30px;font-size:11.9px;line-height:16px;color:#3a87ad;text-decoration:none;background-color:#d9edf7;border:1px solid #bce8f1;-webkit-box-shadow:2px 2px 5px 1px #ccc;-moz-box-shadow:2px 2px 5px 1px #ccc;box-shadow:2px 2px 5px 1px #ccc}.dir-rtl span.editinstructions{right:32px;left:auto}#dndupload-status{position:absolute;z-index:9999;z-index:0;width:40%;padding:6px;margin:0 30%;color:#3a87ad;text-align:center;background:#d9edf7;border:1px solid #bce8f1;-webkit-border-bottom-right-radius:8px;border-bottom-right-radius:8px;-webkit-border-bottom-left-radius:8px;border-bottom-left-radius:8px;-moz-border-radius-bottomright:8px;-moz-border-radius-bottomleft:8px;-webkit-box-shadow:2px 2px 5px 1px #ccc;-moz-box-shadow:2px 2px 5px 1px #ccc;box-shadow:2px 2px 5px 1px #ccc}.dndupload-preview{padding:.3em;margin-top:.2em;color:#909090;list-style:none;border:1px dashed #909090}.dndupload-preview img.icon{padding:0;vertical-align:text-bottom}.dndupload-progress-outer{height:20px;margin-bottom:20px;overflow:hidden;background-color:#f7f7f7;background-image:-moz-linear-gradient(top,#f5f5f5,#f9f9f9);background-image:-webkit-gradient(linear,0 0,0 100%,from(#f5f5f5),to(#f9f9f9));background-image:-webkit-linear-gradient(top,#f5f5f5,#f9f9f9);background-image:-o-linear-gradient(top,#f5f5f5,#f9f9f9);background-image:linear-gradient(to bottom,#f5f5f5,#f9f9f9);background-repeat:repeat-x;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#fff5f5f5',endColorstr='#fff9f9f9',GradientType=0);-webkit-box-shadow:inset 0 1px 2px rgba(0,0,0,0.1);-moz-box-shadow:inset 0 1px 2px rgba(0,0,0,0.1);box-shadow:inset 0 1px 2px rgba(0,0,0,0.1)}.dndupload-progress-inner{float:left;width:0;height:100%;font-size:12px;color:#fff;text-align:center;text-shadow:0 -1px 0 rgba(0,0,0,0.25);background-color:#0e90d2;background-image:-moz-linear-gradient(top,#149bdf,#0480be);background-image:-webkit-gradient(linear,0 0,0 100%,from(#149bdf),to(#0480be));background-image:-webkit-linear-gradient(top,#149bdf,#0480be);background-image:-o-linear-gradient(top,#149bdf,#0480be);background-image:linear-gradient(to bottom,#149bdf,#0480be);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ff149bdf',endColorstr='#ff0480be',GradientType=0);-webkit-box-shadow:inset 0 -1px 0 rgba(0,0,0,0.15);-moz-box-shadow:inset 0 -1px 0 rgba(0,0,0,0.15);box-shadow:inset 0 -1px 0 rgba(0,0,0,0.15);-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;-webkit-transition:width .6s ease;-moz-transition:width .6s ease;-o-transition:width .6s ease;transition:width .6s ease}.dndupload-hidden{display:none}#page-course-pending .singlebutton,#page-course-index .singlebutton,#page-course-index-category .singlebutton,#page-course-editsection .singlebutton{text-align:center}#page-admin-course-manage #movecourses td img{margin:0 .22em;vertical-align:text-bottom}#page-admin-course-manage #movecourses td img.icon{padding:0}#coursesearch{margin-top:1em;text-align:center}#page-course-pending .pendingcourserequests{margin-bottom:1em}#page-course-pending .pendingcourserequests .singlebutton{display:inline}#page-course-pending .pendingcourserequests .cell{padding:0 5px}#page-course-pending .pendingcourserequests .cell.c6{white-space:nowrap}.coursebox{padding:5px;margin-bottom:15px;border:1px dotted #ddd;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px}.coursebox>.info>.name a{display:block;padding-left:21px;background-image:url([[pix:moodle|i/course]]);background-position:center left;background-repeat:no-repeat}.coursebox.remotehost>.info>.name a{background-image:url([[pix:moodle|i/mnethost]])}.coursebox>.info>.name,.coursebox .content .teachers,.coursebox .content .courseimage,.coursebox .content .coursefile{float:left;width:40%;clear:left}.coursebox>.info>h3.name{margin:5px}.coursebox>.info>.name{padding:0;margin:5px}.coursebox .content .teachers li{padding:0;margin:0;list-style-type:none}.coursebox .enrolmenticons{float:right;padding:3px 0}.coursebox .moreinfo{float:right;padding:3px 0}.coursebox .enrolmenticons img,.coursebox .moreinfo img{margin:0 .2em}.coursebox .content{clear:both}.coursebox .content .summary,.coursebox .content .coursecat{float:right;width:55%}.coursebox .content .coursecat{clear:right;text-align:right}.coursebox.remotecoursebox .remotecourseinfo{float:left;width:40%}.coursebox .content .courseimage img{max-width:100px;max-height:100px}.coursebox .content .coursecat,.coursebox .content .summary,.coursebox .content .courseimage,.coursebox .content .coursefile,.coursebox .content .teachers,.coursebox.remotecoursebox .remotecourseinfo{padding:0;margin:3px 5px}.dir-rtl .coursebox>.info>.name a{padding-right:21px;padding-left:0;background-position:center right}.dir-rtl .coursebox>.info>.name,.dir-rtl .coursebox .teachers,.dir-rtl .coursebox .content .courseimage,.dir-rtl .coursebox .content .coursefile{float:right;clear:right}.dir-rtl .coursebox .enrolmenticons,.dir-rtl .coursebox .moreinfo{float:left}.dir-rtl .coursebox .summary,.dir-rtl .coursebox .coursecat{float:left}.dir-rtl .coursebox .coursecat{clear:left;text-align:left}.coursebox.collapsed{margin-bottom:0}.coursebox.collapsed>.content{display:none}.courses .coursebox.collapsed{padding:3px 0;border:1px solid #eee}.courses .coursebox.even{background-color:#f6f6f6}.courses .coursebox:hover,.course_category_tree .courses>.paging.paging-morelink:hover{background-color:#eee}.course_category_tree .category .numberofcourse{font-size:11.9px}.course_category_tree .controls{visibility:hidden}.course_category_tree .controls div{display:inline;cursor:pointer}.jsenabled .course_category_tree .controls{visibility:visible}.course_category_tree .controls{float:right;margin-bottom:5px;text-align:right}.course_category_tree .controls div{padding-right:2em;font-size:75%}.course_category_tree .category>.info .name{padding:2px 18px;margin:3px;background-image:url([[pix:moodle|t/collapsed_empty]]);background-position:center left;background-repeat:no-repeat}.dir-rtl .course_category_tree .category>.info .name{background-image:url([[pix:moodle|t/collapsed_empty_rtl]]);background-position:center right}.course_category_tree .category.with_children>.info .name{background-image:url([[pix:moodle|t/expanded]])}.course_category_tree .category.with_children.collapsed>.info .name{background-image:url([[pix:moodle|t/collapsed]])}.dir-rtl .course_category_tree .category.with_children.collapsed>.info .name{background-image:url([[pix:moodle|t/collapsed_rtl]])}.course_category_tree .category.collapsed>.content{display:none}.course_category_tree .category>.info{min-height:20px;min-height:0;padding:19px;padding:0;margin:3px 0;margin-bottom:20px;margin-bottom:3px;background-color:#f5f5f5;border:1px solid #e3e3e3;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,0.05);-moz-box-shadow:inset 0 1px 1px rgba(0,0,0,0.05);box-shadow:inset 0 1px 1px rgba(0,0,0,0.05)}.course_category_tree .category>.info blockquote{border-color:#ddd;border-color:rgba(0,0,0,0.15)}.course_category_tree.frontpage-category-names .category>.info{margin:0;background:0;border:0}.course_category_tree .category>.content{padding-left:16px}.dir-rtl .course_category_tree .category>.content{padding-right:16px;padding-left:0}.course_category_tree .subcategories>.paging,.courses>.paging{padding:5px;margin:0;text-align:center}.courses>.paging.paging-morelink,.course_category_tree .subcategories>.paging.paging-morelink{text-align:left}.course_category_tree .paging.paging-morelink a{font-size:11.9px}.dir-rtl .courses>.paging.paging-morelink,.dir-rtl .course_category_tree .paging.paging-morelink{text-align:right}#page-course-index-category .generalbox.info{padding:5px;margin-bottom:15px;border:1px dotted #ddd;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px}#page-course-index-category .categorypicker{margin:10px 0 20px;text-align:center}.filemanager,.filepicker,.file-picker{font-size:11px}.filemanager a,.file-picker a,.filemanager a:hover,.file-picker a:hover{color:#555;text-decoration:none}.filemanager input[type=\"text\"],.file-picker input[type=\"text\"]{width:265px}.fp-content-center{display:table-cell;width:100%;height:100%;vertical-align:middle}.fp-content-hidden{visibility:hidden}.yui3-panel-focused{outline:0}#filesskin .yui3-panel-content{display:inline-block;*display:inline;padding-bottom:20px;background:#f2f2f2;border:1px solid #fff;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;*zoom:1;-webkit-box-shadow:5px 5px 20px 0 #666;-moz-box-shadow:5px 5px 20px 0 #666;box-shadow:5px 5px 20px 0 #666}#filesskin .yui3-widget-hd{padding:5px;font-size:12px;letter-spacing:1px;color:#333;text-align:center;text-shadow:1px 1px 1px #fff;background-color:#ebebeb;background-image:-moz-linear-gradient(top,#fff,#ccc);background-image:-webkit-gradient(linear,0 0,0 100%,from(#fff),to(#ccc));background-image:-webkit-linear-gradient(top,#fff,#ccc);background-image:-o-linear-gradient(top,#fff,#ccc);background-image:linear-gradient(to bottom,#fff,#ccc);background-repeat:repeat-x;border-bottom:1px solid #bbb;-webkit-border-radius:10px 10px 0 0;-moz-border-radius:10px 10px 0 0;border-radius:10px 10px 0 0;filter:dropshadow(color=#ffffff,offx=1,offy=1);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffffff',endColorstr='#ffcccccc',GradientType=0)}.fp-panel-button{display:inline-block;*display:inline;padding:3px 20px 2px 20px;margin:10px;text-align:center;background:#fff;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;*zoom:1;-webkit-box-shadow:2px 2px 3px .1px #999;-moz-box-shadow:2px 2px 3px .1px #999;box-shadow:2px 2px 3px .1px #999}#filesskin .file-picker.fp-generallayout{position:relative;width:859px;background:#fff;border:1px solid #ccc;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px}.file-picker .fp-repo-area{position:absolute;top:26px;bottom:1px;display:inline-block;*display:inline;width:180px;overflow:auto;border-right:1px solid #bbb;*zoom:1}.dir-rtl .file-picker .fp-repo-area{border-right:0;border-left:1px solid #bbb}.file-picker .fp-repo-items{display:inline-block;*display:inline;margin-left:181px;vertical-align:top;*zoom:1}.file-picker .fp-navbar{min-height:22px;padding:5px 8px;background:#f2f2f2;border-bottom:1px solid #bbb}.file-picker .fp-content{width:678px;height:477px;margin-bottom:-14px;overflow:auto;clear:both;background:#fff}.dir-rtl .file-picker .fp-repo-items{margin-right:181px}.file-picker .fp-content-loading{display:table;width:100%;height:100%;text-align:center}.file-picker .fp-content .fp-object-container{width:98%;height:98%}.dir-rtl .file-picker .fp-list{text-align:right}.dir-rtl .file-picker .fp-toolbar{padding:0}.dir-rtl .file-picker .fp-list{text-align:right}.dir-rtl .file-picker .fp-repo-name{display:inline}.dir-rtl .file-picker .fp-pathbar{display:block;text-align:right;border-top:0}.dir-rtl .file-picker div.bd{text-align:right}.dir-rtl #filemenu .yuimenuitemlabel{text-align:right}.dir-rtl .filepicker .yui-layout-unit-left{left:500px}.dir-rtl .filepicker .yui-layout-unit-center{left:0}.dir-rtl .filemanager-toolbar a{padding:0}.file-picker .fp-list{float:left;width:100%;padding:0;margin:0;list-style-type:none}.dir-rtl .file-picker .fp-list{float:left;text-align:right}.file-picker .fp-list .fp-repo a{display:block;padding:.5em .7em}.file-picker .fp-list .fp-repo.active{background:#f2f2f2}.file-picker .fp-list .fp-repo-icon{padding:0 7px 0 5px}.fp-toolbar{display:table-row;float:left;line-height:22px}.dir-rtl .fp-toolbar{float:right}.fp-toolbar.empty{display:none}.fp-toolbar .disabled{display:none}.fp-toolbar div{display:inline-block;*display:inline;padding:0 2px;padding-right:10px;*zoom:1}.dir-rtl .fp-toolbar div{width:100px}.fp-toolbar img{margin-right:5px;vertical-align:-15%}.fp-toolbar .fp-tb-search{width:228px;height:14px}.fp-toolbar .fp-tb-search input{width:200px;height:16px;padding:2px 6px 1px 20px;background:#fff url('[[pix:a/search]]') no-repeat 3px 3px;border:1px solid #bbb}.fp-viewbar{float:right;width:69px;height:22px;margin-right:8px}.dir-rtl .fp-toolbar img{vertical-align:-35%}.dir-rtl .fp-viewbar{float:left;width:100px}.fp-vb-icons{display:inline-block;*display:inline;width:22px;height:22px;background:url('[[pix:theme|fp/view_icon_active]]') no-repeat 0 0;*zoom:1}.dir-rtl .fp-vb-icons{display:block;float:left;margin-right:4px;background:url('[[pix:theme|fp/view_icon_active]]') no-repeat 0 0}.fp-vb-icons.checked{background:url('[[pix:theme|fp/view_icon_selected]]')}.dir-rtl .fp-vb-icons.checked{display:block;float:left;margin-right:4px;background:url('[[pix:theme|fp/view_icon_selected]]')}.fp-viewbar.disabled .fp-vb-icons{background:url('[[pix:theme|fp/view_icon_inactive]]')}.fp-vb-details{display:inline-block;*display:inline;width:23px;height:22px;margin-left:-4px;background:url('[[pix:theme|fp/view_list_active]]') no-repeat 0 0;*zoom:1}.dir-rtl .fp-vb-details{display:block;float:left;margin-right:4px;background:url('[[pix:theme|fp/view_list_active]]') no-repeat 0 0}.fp-vb-details.checked{background:url('[[pix:theme|fp/view_list_selected]]')}.dir-rtl .fp-vb-details.checked{display:block;float:left;margin-right:4px;background:url('[[pix:theme|fp/view_list_selected]]')}.fp-viewbar.disabled .fp-vb-details{background:url('[[pix:theme|fp/view_list_inactive]]')}.fp-vb-tree{display:inline-block;*display:inline;width:23px;height:22px;margin-left:-4px;background:url('[[pix:theme|fp/view_tree_active]]') no-repeat 0 0;*zoom:1}.dir-rtl .fp-vb-tree{display:block;float:left;margin-right:4px;background:url('[[pix:theme|fp/view_tree_active]]') no-repeat 0 0}.fp-vb-tree.checked{background:url('[[pix:theme|fp/view_tree_selected]]')}.dir-rtl .fp-vb-tree.checked{display:block;float:left;margin-right:4px;background:url('[[pix:theme|fp/view_tree_selected]]')}.fp-viewbar.disabled .fp-vb-tree{background:url('[[pix:theme|fp/view_tree_inactive]]')}.file-picker .fp-clear-left{clear:left}.dir-rtl .filemanager-toolbar .fp-vb-icons a:hover{background:url('[[pix:theme|fp/view_icon_selected]]')}.dir-rtl .filemanager-toolbar .fp-vb-icons.checked a:hover{background:url('[[pix:theme|fp/view_icon_active]]') no-repeat 0 0}.dir-rtl .fp-vb-details a:hover{background:0;border:20px solid black}.dir-rtl .fp-vb-details.checked a:hover{background:0;border:40px solid black}.dir-rtl .fp-vb-tree a:hover{background:0;border:30px solid black}.dir-rtl .fp-vb-tree.checked a:hover{background:0;border:50px solid black}.file-picker .fp-pathbar{display:table-row}.fp-pathbar.empty{display:none}.fp-pathbar .fp-path-folder{width:27px;height:12px;margin-left:4px;background:url('[[pix:theme|fp/path_folder]]') no-repeat 0 0}.dir-rtl .fp-pathbar .fp-path-folder{width:auto;height:12px;margin-left:4px;background:url('[[pix:theme|fp/path_folder_rtl]]') no-repeat right top}.dir-rtl .fp-pathbar span{display:inline-block;*display:inline;float:right;margin-left:32px;*zoom:1}.fp-pathbar .fp-path-folder-name{margin-left:32px;line-height:20px}.dir-rtl .fp-pathbar .fp-path-folder-name{margin-right:32px;line-height:20px}.fp-iconview .fp-file{position:relative;float:left;margin:10px 10px 35px;text-align:center}.fp-iconview .fp-thumbnail{display:block;min-width:110px;min-height:110px;line-height:110px;text-align:center;border:1px solid #fff}.fp-iconview .fp-thumbnail img{padding:3px;vertical-align:middle;border:1px solid #ddd;-webkit-box-shadow:1px 1px 2px 0 #ccc;-moz-box-shadow:1px 1px 2px 0 #ccc;box-shadow:1px 1px 2px 0 #ccc}.fp-iconview .fp-thumbnail:hover{background:#fff;border:1px solid #ddd;-webkit-box-shadow:inset 0 0 10px 0 #ccc;-moz-box-shadow:inset 0 0 10px 0 #ccc;box-shadow:inset 0 0 10px 0 #ccc}.fp-iconview .fp-filename-field{position:absolute;height:33px;overflow:hidden;word-wrap:break-word}.fp-iconview .fp-filename-field:hover{z-index:1000;overflow:visible}.fp-iconview .fp-filename-field .fp-filename{min-width:112px;padding-top:5px;padding-bottom:12px;background:#fff}.dir-rtl .fp-iconview .fp-file{float:right}.file-picker .yui3-datatable table{width:100%;border:0 solid #bbb}#filesskin .file-picker .yui3-datatable-header{color:#555;background:#fff;border-bottom:1px solid #ccc;border-left:0 solid #fff}#filesskin .file-picker .yui3-datatable-odd .yui3-datatable-cell{background-color:#f6f6f6;border-left:0 solid #f6f6f6}#filesskin .file-picker .yui3-datatable-even .yui3-datatable-cell{background-color:#fff;border-left:0 solid #fff}.dir-rtl .file-picker .yui3-datatable-header{text-align:right}.file-picker .ygtvtn,.filemanager .ygtvtn{width:17px;height:22px;background:url('[[pix:moodle|y/tn]]') 0 0 no-repeat}.dir-rtl .file-picker .ygtvtn{width:17px;height:22px;background:url('[[pix:moodle|y/tn_rtl]]') 0 0 no-repeat}.file-picker .ygtvtm,.filemanager .ygtvtm{width:13px;height:12px;cursor:pointer;background:url('[[pix:moodle|y/tm]]') 0 10px no-repeat}.file-picker .ygtvtmh,.filemanager .ygtvtmh{width:13px;height:12px;cursor:pointer;background:url('[[pix:moodle|y/tm]]') 0 10px no-repeat}.file-picker .ygtvtp,.filemanager .ygtvtp{width:13px;height:12px;cursor:pointer;background:url('[[pix:moodle|y/tp]]') 0 10px no-repeat}.dir-rtl .file-picker .ygtvtp,.dir-rtl .filemanager .ygtvtp{background:url('[[pix:moodle|y/tp_rtl]]') 0 10px no-repeat}.file-picker .ygtvtph,.filemanager .ygtvtph{width:13px;height:22px;cursor:pointer;background:url('[[pix:moodle|y/tp]]') 0 10px no-repeat}.dir-rtl .file-picker .ygtvtph,.dir-rtl .filemanager .ygtvtph{background:url('[[pix:moodle|y/tp_rtl]]') 0 10px no-repeat}.file-picker .ygtvln,.filemanager .ygtvln{width:17px;height:22px;background:url('[[pix:moodle|y/ln]]') 0 0 no-repeat}.dir-rtl .file-picker .ygtvln,.dir-rtl .filemanager .ygtvln{background:url('[[pix:moodle|y/ln_rtl]]') 0 0 no-repeat}.file-picker .ygtvlm,.filemanager .ygtvlm{width:13px;height:12px;cursor:pointer;background:url('[[pix:moodle|y/lm]]') 0 10px no-repeat}.file-picker .ygtvlmh,.filemanager .ygtvlmh{width:13px;height:12px;cursor:pointer;background:url('[[pix:moodle|y/lm]]') 0 10px no-repeat}.file-picker .ygtvlp,.filemanager .ygtvlp{width:13px;height:12px;cursor:pointer;background:url('[[pix:moodle|y/lp]]') 0 10px no-repeat}.dir-rtl .file-picker .ygtvlp,.dir-rtl .filemanager .ygtvlp{background:url('[[pix:moodle|y/lp_rtl]]') 0 10px no-repeat}.file-picker .ygtvlph,.filemanager .ygtvlph{width:13px;height:12px;cursor:pointer;background:url('[[pix:moodle|y/lp]]') 0 10px no-repeat}.dir-rtl .file-picker .ygtvlph,.dir-rtl .filemanager .ygtvlph{background:url('[[pix:moodle|y/lp_rtl]]') 0 10px no-repeat}.file-picker .ygtvloading,.filemanager .ygtvloading{width:16px;height:22px;background:transparent url('[[pix:moodle|y/loading]]') 0 0 no-repeat}.file-picker .ygtvdepthcell,.filemanager .ygtvdepthcell{width:17px;height:32px;background:url('[[pix:moodle|y/vline]]') 0 0 no-repeat}.file-picker .ygtvblankdepthcell,.filemanager .ygtvblankdepthcell{width:17px;height:22px}a.ygtvspacer:hover{color:transparent;text-decoration:none}.ygtvlabel,.ygtvlabel:link,.ygtvlabel:visited,.ygtvlabel:hover{margin-left:2px;text-decoration:none;cursor:pointer;background-color:transparent}.file-picker .ygtvfocus,.filemanager .ygtvfocus{background-color:#eee}.fp-filename-icon{position:relative;display:block;margin-top:10px}.fp-icon{float:left;width:24px;height:24px;margin-top:-7px;margin-right:10px;line-height:24px;text-align:center}.dir-rtl .fp-icon{float:right;margin-right:0;margin-left:10px}.fp-icon img{max-width:24px;max-height:24px;vertical-align:middle}.fp-filename{padding-right:10px}.dir-rtl .fp-filename{padding-right:0;padding-left:10px}.file-picker .fp-login-form{display:table;width:100%;height:100%}.file-picker .fp-login-form table{margin:0 auto}.file-picker .fp-login-form p{margin-top:3em;text-align:center}.file-picker .fp-login-form .fp-login-input label{display:block;text-align:right}.file-picker .fp-login-form .fp-login-input .input{text-align:left}.file-picker .fp-login-form input[type=\"checkbox\"]{width:15px;height:15px}.file-picker .fp-upload-form{display:table;width:100%;height:100%}.file-picker .fp-upload-form table{margin:0 auto}.file-picker.fp-dlg{text-align:center}.file-picker.fp-dlg .fp-dlg-text{padding:30px 20px 10px;font-size:12px}.file-picker.fp-dlg .fp-dlg-buttons{margin:0 20px}.file-picker.fp-msg{text-align:center}.file-picker.fp-msg .fp-msg-text{max-width:500px;max-height:300px;min-width:200px;padding:40px 20px 10px 20px;overflow:auto;font-size:12px}.file-picker.fp-msg.fp-msg-error .fp-msg-text{padding:40px 20px 10px 20px;font-size:12px}.file-picker .fp-content-error{display:table;width:100%;height:100%;text-align:center}.file-picker .fp-content-error .fp-error{display:table-cell;width:100%;height:100%;padding:40px 20px 10px 20px;font-size:12px;vertical-align:middle}.file-picker .fp-nextpage{clear:both}.file-picker .fp-nextpage .fp-nextpage-loading{display:none}.file-picker .fp-nextpage.loading .fp-nextpage-link{display:none}.file-picker .fp-nextpage.loading .fp-nextpage-loading{display:block;height:100px;padding-top:50px;text-align:center}.file-picker.fp-select{width:420px}.fp-select form{padding:20px 20px 0}.fp-select .fp-select-loading{margin-top:20px;text-align:center}.fp-select .fp-hr{width:auto;height:1px;margin:10px 0;clear:both;background-color:#fff;border-bottom:1px solid #bbb}.fp-select table{padding:0 0 10px}.fp-select table .mdl-right{min-width:84px}.fp-select .fp-reflist .mdl-right{vertical-align:top}.fp-select .fp-select-buttons{float:right}.fp-select .fp-info{display:block;padding:1px 20px 0;clear:both}.fp-select .fp-thumbnail{float:left;min-width:110px;min-height:110px;margin:10px 20px 0 0;line-height:110px;text-align:center;background:#fff;border:1px solid #ddd;-webkit-box-shadow:inset 0 0 10px 0 #ccc;-moz-box-shadow:inset 0 0 10px 0 #ccc;box-shadow:inset 0 0 10px 0 #ccc}.fp-select .fp-thumbnail img{padding:3px;margin:10px;vertical-align:middle;border:1px solid #ddd}.fp-select .fp-fileinfo{display:inline-block;*display:inline;margin-top:10px;*zoom:1}.file-picker.fp-select .fp-fileinfo{max-width:240px}.fp-select .fp-fileinfo div{padding-bottom:5px}.file-picker.fp-select .uneditable{display:none}.file-picker.fp-select .fp-select-loading{display:none}.file-picker.fp-select.loading .fp-select-loading{display:block}.file-picker.fp-select.loading form{display:none}.fp-select .fp-dimensions.fp-unknown{display:none}.filemanager-loading{display:none}.jsenabled .filemanager-loading{display:block;margin-top:100px}.filemanager.fm-loading .filemanager-toolbar,.filemanager.fm-loading .fp-pathbar,.filemanager.fm-loading .filemanager-container,.filemanager.fm-loaded .filemanager-loading,.filemanager.fm-maxfiles .fp-btn-add,.filemanager.fm-maxfiles .dndupload-message,.filemanager.fm-noitems .fp-btn-download,.filemanager .fm-empty-container,.filemanager.fm-noitems .filemanager-container .fp-content{display:none}.filemanager .filemanager-updating{display:none;text-align:center}.filemanager.fm-updating .filemanager-updating{display:block;margin-top:37px}.filemanager.fm-updating .fm-content-wrapper,.filemanager.fm-nomkdir .fp-btn-mkdir,.fitem.disabled .filemanager .filemanager-toolbar,.fitem.disabled .filemanager .fp-pathbar,.fitem.disabled .filemanager .fp-restrictions,.fitem.disabled .filemanager .fm-content-wrapper{display:none}.fp-restrictions{text-align:right}.filemanager .fp-navbar{background:#f2f2f2;border:1px solid #bbb;border-bottom:0}.filemanager-toolbar{min-height:22px;padding:5px 8px;overflow:hidden}.fp-pathbar{min-height:20px;padding:5px 8px 1px;border-top:1px solid #bbb}.filemanager .fp-pathbar.empty{display:none}.filepicker-filelist,.filemanager-container{position:relative;min-height:140px;overflow:auto;clear:both;background:#fff;border:1px solid #bbb}.filemanager .fp-content{max-height:472px;min-height:157px;overflow:auto}.filemanager-container,.filepicker-filelist{overflow:hidden}.fitem.disabled .filepicker-filelist,.fitem.disabled .filemanager-container{background-color:#ebebe4}.fitem.disabled .fp-btn-choose{color:#999}.fitem.disabled .filepicker-filelist .filepicker-filename{display:none}.fp-iconview .fp-reficons1{position:absolute;top:0;left:0;z-index:1000;width:100%;height:100%}.fp-iconview .fp-reficons2{position:absolute;top:0;left:0;z-index:1001;width:100%;height:100%}.fp-iconview .fp-file.fp-hasreferences .fp-reficons1{background:url('[[pix:theme|fp/link]]') no-repeat;background-position:bottom right}.fp-iconview .fp-file.fp-isreference .fp-reficons2{background:url('[[pix:theme|fp/alias]]') no-repeat;background-position:bottom left}.filemanager .fp-iconview .fp-file.fp-originalmissing .fp-thumbnail img{display:none}.filemanager .fp-iconview .fp-file.fp-originalmissing .fp-thumbnail{background:url([[pix:s/dead]]) no-repeat;background-position:center center}.filemanager .yui3-datatable table{width:100%;border:0 solid #bbb}.filemanager .yui3-datatable-header{color:#555!important;background:#fff!important;border-bottom:1px solid #ccc!important;border-left:0 solid #fff!important}.filemanager .yui3-datatable-odd .yui3-datatable-cell{background-color:#f6f6f6!important;border-left:0 solid #f6f6f6}.filemanager .yui3-datatable-even .yui3-datatable-cell{background-color:#fff!important;border-left:0 solid #fff}.filemanager .fp-filename-icon.fp-hasreferences .fp-reficons1{position:absolute;top:8px;left:17px;z-index:1000;width:100%;height:100%;background:url('[[pix:theme|fp/link_sm]]') no-repeat 0 0}.filemanager .fp-filename-icon.fp-isreference .fp-reficons2{position:absolute;top:9px;left:-6px;z-index:1001;width:100%;height:100%;background:url('[[pix:theme|fp/alias_sm]]') no-repeat 0 0}.filemanager .fp-contextmenu{display:none}.filemanager .fp-iconview .fp-folder.fp-hascontextmenu .fp-contextmenu{position:absolute;right:7px;bottom:5px;z-index:2000;display:block}.filemanager .fp-treeview .fp-folder.fp-hascontextmenu .fp-contextmenu,.filemanager .fp-tableview .fp-folder.fp-hascontextmenu .fp-contextmenu{position:absolute;top:6px;left:14px;display:inline;margin-right:-20px}.dir-rtl .filemanager .fp-iconview .fp-folder.fp-hascontextmenu .fp-contextmenu{right:inherit;left:7px}.dir-rtl .filemanager .fp-treeview .fp-folder.fp-hascontextmenu .fp-contextmenu,.dir-rtl .filemanager .fp-tableview .fp-folder.fp-hascontextmenu .fp-contextmenu{right:16px;left:inherit;margin-right:0}.filepicker-filelist .filepicker-container,.filemanager.fm-noitems .fm-empty-container{position:absolute;top:10px;right:10px;bottom:10px;left:10px;z-index:3000;display:block;padding-top:85px;text-align:center;border:2px dashed #bbb}.filepicker-filelist .dndupload-target,.filemanager-container .dndupload-target{position:absolute;top:10px;right:10px;bottom:10px;left:10px;z-index:3000;padding-top:85px;text-align:center;background:#fff;border:2px dashed #fb7979;-webkit-box-shadow:0 0 0 10px #fff;-moz-box-shadow:0 0 0 10px #fff;box-shadow:0 0 0 10px #fff}.filepicker-filelist.dndupload-over .dndupload-target,.filemanager-container.dndupload-over .dndupload-target{position:absolute;top:10px;right:10px;bottom:10px;left:10px;z-index:3000;padding-top:85px;text-align:center;background:#fff;border:2px dashed #6c8cd3}.dndupload-message{display:none}.dndsupported .dndupload-message{display:inline}.dnduploadnotsupported-message{display:none}.dndnotsupported .dnduploadnotsupported-message{display:inline}.dndupload-target{display:none}.dndsupported .dndupload-ready .dndupload-target{display:block}.dndupload-uploadinprogress{display:none;text-align:center}.dndupload-uploading .dndupload-uploadinprogress{display:block}.dndupload-arrow{position:absolute;top:5px;width:100%;height:80px;margin-left:-28px;background:url([[pix:theme|fp/dnd_arrow]]) center no-repeat}.fitem.disabled .filepicker-container,.fitem.disabled .fm-empty-container{display:none}.dndupload-progressbars{display:none;padding:10px}.dndupload-inprogress .dndupload-progressbars{display:block}.dndupload-inprogress .fp-content{display:none}.filemanager.fm-noitems .dndupload-inprogress .fm-empty-container{display:none}.filepicker-filelist.dndupload-inprogress .filepicker-container{display:none}.filepicker-filelist.dndupload-inprogress a{display:none}.filemanager.fp-select .fp-select-loading{display:none}.filemanager.fp-select.loading .fp-select-loading{display:block}.filemanager.fp-select.loading form{display:none}.filemanager.fp-select.fp-folder .fp-license,.filemanager.fp-select.fp-folder .fp-author,.filemanager.fp-select.fp-file .fp-file-unzip,.filemanager.fp-select.fp-folder .fp-file-unzip,.filemanager.fp-select.fp-file .fp-file-zip,.filemanager.fp-select.fp-zip .fp-file-zip{display:none}.filemanager.fp-select .fp-file-setmain{display:none}.filemanager.fp-select.fp-cansetmain .fp-file-setmain{display:inline-block;*display:inline;*zoom:1}.filemanager .fp-mainfile .fp-filename{font-weight:bold}.filemanager.fp-select.fp-folder .fp-file-download{display:none}.fm-operation{font-weight:bold}.filemanager.fp-select .fp-original.fp-unknown,.filemanager.fp-select .fp-original .fp-originloading{display:none}.filemanager.fp-select .fp-original.fp-loading .fp-originloading{display:inline}.filemanager.fp-select .fp-reflist.fp-unknown,.filemanager.fp-select .fp-reflist .fp-reflistloading{display:none}.filemanager.fp-select .fp-refcount{max-width:265px}.filemanager.fp-select .fp-reflist.fp-loading .fp-reflistloading{display:inline}.filemanager.fp-select .fp-reflist .fp-value{max-width:265px;max-height:75px;padding:8px 7px;margin:0;overflow:auto;background:#f9f9f9;border:1px solid #bbb}.filemanager.fp-select .fp-reflist .fp-value li{padding-bottom:7px}.filemanager.fp-mkdir-dlg{text-align:center}.filemanager.fp-mkdir-dlg .fp-mkdir-dlg-text{margin:20px;text-align:left}.dir-rtl .filemanager .fp-mkdir-dlg p{text-align:right}.filemanager.fp-dlg{text-align:center}.filemanager.fp-dlg .fp-dlg-text{max-width:340px;max-height:300px;min-width:200px;padding:0 10px;margin:40px 20px 20px;overflow:auto;font-size:12px;line-height:22px}.file-picker div.bd{text-align:left}.dir-rtl .file-picker div.bd,.dir-rtl .file-picker .fp-pathbar,.dir-rtl .file-picker .fp-list,.dir-rtl #filemenu .yuimenuitemlabel,.dir-rtl .filemanager-container .yui3-skin-sam .yui3-datatable-header{text-align:right}.dir-rtl .filepicker .yui-layout-unit-left{left:500px}.dir-rtl .filepicker .yui-layout-unit-center{left:0}.allcoursegrades{width:100%;padding:4px 0 5px 0;text-align:right}.path-grade-edit .buttons{text-align:center}.path-grade-edit-tree .idnumber{margin-left:15px}.path-grade-edit-tree .movetarget{position:relative;width:80px;height:16px}.path-grade-edit-tree ul#grade_tree{width:auto}.path-grade-edit-tree ul#grade_tree li{list-style:none}.path-grade-edit-tree ul#grade_tree li.category{margin-bottom:6px}.path-grade-edit-tree .iconsmall{margin-left:4px}#grade-report-toggles{text-align:center}#grade-aggregation-help dt{margin-top:15px}#grade-aggregation-help dd.example{margin-top:7px}#grade-aggregation-help code{display:block;margin-top:7px}.gradeexportlink{padding:2em;text-align:center}.gradetreebox{margin-top:10px;overflow-x:auto;overflow-y:hidden}.gradetreebox table{width:100%;font-size:.8em}.gradetreebox td.colspan,.gradetreebox tr.category .cell{background-color:#DDD}.gradetreebox th.actions{width:105px;white-space:nowrap}.gradetreebox td.name{white-space:nowrap}.gradetreebox td.name h4{display:inline}.gradetreebox td.range{white-space:nowrap}.gradetreebox span.actionlink{color:blue}.gradetreebox span.actionlink:hover{text-decoration:underline;cursor:pointer}.gradetreebox img.iconsmall{margin-left:4px}.gradetreebox img.icon{margin-right:5px}.gradetreebox #gradetreesubmit{margin-bottom:1em;text-align:center}.gradetreebox .hidden{display:none}#page-grade-grading-manage #activemethodselector{margin-bottom:1em;text-align:center}#page-grade-grading-manage #activemethodselector select{margin:0 1em}#page-grade-grading-manage .actions{text-align:center}#page-grade-grading-manage .action{display:inline-block;width:150px;padding:.5em;margin:.5em;text-align:center;background-color:#eee;border:2px solid #ccc;-webkit-border-radius:5px;-moz-border-radius:5px;border-radius:5px}#page-grade-grading-manage .action:hover{text-decoration:none;background-color:#f6f6f6}#page-grade-grading-manage #actionresultmessagebox{position:relative;width:60%;padding:.5em;margin:1em auto;text-align:center;background-color:#d2ebff;border:2px solid #CCC;-webkit-border-radius:5px;-moz-border-radius:5px;border-radius:5px}#page-grade-grading-manage #actionresultmessagebox span{position:absolute;top:-1.2em;right:0;font-size:80%;color:#666}#page-grade-grading-manage .definition-name .status{padding:.25em;font-size:60%;font-weight:normal;text-transform:uppercase;border:1px solid #EEE;-webkit-border-radius:5px;-moz-border-radius:5px;border-radius:5px}#page-grade-grading-manage .definition-name .status.ready{background-color:#e7f1c3;border-color:#aea}#page-grade-grading-manage .definition-name .status.draft{background-color:#f3f2aa;border-color:#ee2}#page-grade-grading-manage .definition-preview{width:50%;padding:1em;margin:1em auto;border:1px solid #EEE}#page-grade-grading-pick .template-name{padding:3px;clear:both;background-color:#f6f6f6}#page-grade-grading-pick .template-name .type{padding:.25em;font-size:60%;font-weight:normal;text-transform:uppercase;border:1px solid #eee;-webkit-border-radius:5px;-moz-border-radius:5px;border-radius:5px}#page-grade-grading-pick .template-name .type.shared{background-color:#e7f1c3;border-color:#aea}#page-grade-grading-pick .template-name .type.ownform{background-color:#d2ebff;border-color:#ace}#page-grade-grading-pick .template-description{padding:0 2em 0 0;margin-right:51%;margin-bottom:1em}#page-grade-grading-pick .template-preview{float:right;width:50%;padding:1em;margin-bottom:1em;border:1px solid #EEE}#page-grade-grading-pick .template-actions{padding:0 2em 0 0;margin-right:51%;margin-bottom:1em}#page-grade-grading-pick .template-actions .action{display:inline-block;padding:.25em;margin:.25em;border:2px solid transparent}#page-grade-grading-pick .template-actions .action.pick{background-color:#EEE;border:2px solid #CCC;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px}#page-grade-grading-pick .template-actions .action:hover{text-decoration:none;background-color:#f6f6f6;border:2px solid #CCC;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px}#page-grade-grading-pick .template-actions .action .action-text{display:inline}#page-grade-grading-pick .template-actions .action .action-icon{margin:0 3px}#page-grade-grading-pick .template-preview-confirm{width:50%;padding:1em;margin:1em auto;border:1px solid #EEE}#page-grade-grading-pick .singlebutton{clear:both}table#user-grades tr.avg td.cell{font-weight:700;color:#00008b;background-color:#efefff}table#user-grades tr td.overridden{background-color:#f3e4c0}table#user-grades tr.odd td.overridden{background-color:#efd9a4}table#user-grades tr td.ajaxoverridden{background-color:#ffe3a0}table#user-grades tr.odd td.ajaxoverridden{background-color:#ffda83}table#user-grades tr.even td.excluded{background-color:#eabfff}table#user-grades tr.odd td.excluded{background-color:#e5afff}table#user-grades tr.groupavg td.cell{font-weight:700;color:#006400;background-color:#efffef}table#user-grades td.cat,table#user-grades td.course{font-weight:700}.path-grade-report-grader #overDiv table{margin:0}.path-grade-report-grader #overDiv table td.feedback{border:0}.path-grade-report-grader #overDiv .feedback{font-size:10.5px;font-weight:400;background-color:#ABF}.path-grade-report-grader #overDiv .caption{font-size:10.5px;font-weight:700;color:#CCF;background-color:#56C}.path-grade-report-grader #overDiv .intersection{font-size:10.5px;font-weight:400;color:#000;background-color:#ABF}.path-grade-report-grader #overDiv .intersectioncaption{font-weight:700;color:#CCF;background-color:#56C}.path-grade-report-grader div.gradeparent,table#user-grades td.ajax{text-align:left}.path-grade-report-grader.dir-rtl div.gradeparent,.dir-rtl table#user-grades td.ajax{text-align:right}table#user-grades td,table#user-grades th{text-align:right}table#user-grades .courseitem{text-align:right;white-space:nowrap}table#user-grades th.category,table#user-grades th#studentheader,table#user-grades th.user{text-align:left}.dir-rtl table#user-grades th.category,.dir-rtl table#user-grades th#studentheader,.dir-rtl table#user-grades th.user{text-align:right}div.gradertoggle{display:inline;margin-left:20px}table#user-grades .userpic{margin-right:10px}table#user-grades .quickfeedback{margin-left:10px;border:1px dashed #000}.dir-rtl table#user-grades .quickfeedback{margin-right:10px;margin-left:0}.path-grade-report-grader #siteconfiglink{text-align:right}table#user-grades .datesubmitted{font-size:10.5px}.path-grade-report-grader span.inclusion-links{margin:0 5px 0 10px}.path-grade-report-grader th.user img.userpicture{margin-right:.5em}.path-grade-report-grader.dir-rtl th.user img.userpicture{margin-left:.5em}.path-grade-report-grader a.quickedit{display:block;float:right;margin:.1em 0 0;clear:none;font-size:9px;line-height:1em;background-color:transparent}.path-grade-report-grader a.quickedit2{display:block;float:right;margin:1.3em 0 0;clear:none;background-color:transparent}.path-grade-report-grader table#quick_edit{margin:0 auto;border:1px solid #cecece}.path-grade-report-grader table#quick_edit td{padding:5px;margin:0;text-align:left;vertical-align:middle;border:1px solid #cecece}.path-grade-report-grader table#quick_edit td img{padding:0;vertical-align:middle;border:3px double #cecece}.path-grade-report-grader table#quick_edit td.fullname{padding-left:5px;border-left:0}.path-grade-report-grader table#quick_edit td.picture{border-right:0}.path-grade-report-grader table#quick_edit td.finalgrade input{width:5em}.path-grade-report-grader h1{clear:both;text-align:center}.path-grade-report-grader input.center{margin:10px auto 0}.path-grade-report-grader .lefttbody{width:auto;vertical-align:middle}.path-grade-report-grader .left_scroller{float:left;clear:none}.path-grade-report-grader .left_scroller #fixed_column .heading th.header,.path-grade-report-grader .left_scroller #fixed_column td,.path-grade-report-grader .left_scroller #fixed_column th{height:4em}.path-grade-report-grader .left_scroller #fixed_column td.controls{height:2em}.path-grade-report-grader.dir-rtl .left_scroller{float:right}.path-grade-report-grader .right_scroller{width:auto;overflow-x:scroll;clear:none}.path-grade-report-grader .right_scroller tr.heading_name_row th,.path-grade-report-grader .right_scroller table#user-grades td.grade{height:4em}.path-grade-report-grader .right_scroller .path-grade-report-grader .left_scroller .topleft,.path-grade-report-grader .right_scroller tr.avg td,.path-grade-report-grader .right_scroller tr.groupavg,.path-grade-report-grader .right_scroller tr.controls_row,.path-grade-report-grader .right_scroller div.right_scroller tr{height:2em}table#fixed_column,table#user-grades,table#fixed_column th,table#fixed_column td,table#user-grades td,table#user-grades th,table#user-grades input{padding:0 2px;margin:0;font-size:10px;vertical-align:middle}.path-grade-report-grader form td.excluded{color:#b94a48}.path-grade-report-grader .excludedfloater{float:left;font-size:9px;font-weight:700;color:#b94a48}.path-grade-report-grader span.gradepass{color:#298721}.path-grade-report-grader span.gradefail{color:#890d0d}.path-grade-report-grader .gradeweight{font-weight:700;color:#461d7c}.path-grade-report-grader td select{padding:0;font-size:100%}.path-grade-report-grader .right_scroller td select{font-size:11.9px}.path-grade-report-grader .grade_icons img.ajax{float:right}.path-grade-report-grader .gradestable th.user,.path-grade-report-grader .gradestable th.range,.path-grade-report-grader .flexible th,.path-grade-report-grader .flexible td,.path-grade-report-grader .flexible th a,.path-grade-report-grader .flexible td a,.path-grade-report-grader .gradestable th.range,.path-grade-report-grader th,.path-grade-report-grader td{white-space:nowrap}table#user-grades td.vmarked{background-color:#fc3}table#user-grades td.hmarked{background-color:#ff9}table#user-grades td.hmarked.vmarked{background-color:#fc9}.path-grade-report-grader .gradeparent{overflow:auto}table#fixed_column tr.controls td,table#user-grades tr.controls td,.path-grade-report-grader table tr.avg,.path-grade-report-grader table tr.avg:hover{background-color:#d9edf7}.path-grade-report-grader table th.user,.path-grade-report-grader table td.userfield{text-align:left}.path-grade-report-grader.dir-rtl table th.user,.path-grade-report-grader.dir-rtl table td.userfield{text-align:right}.path-grade-report-grader .usersuspended a:link,.path-grade-report-grader .usersuspended a:visited{color:#999}.path-grade-report-grader table th.usersuspended img.usersuspendedicon{margin-left:.45em;vertical-align:text-bottom}.path-grade-report-grader .yui3-overlay{left:0;padding:2px 5px;font-size:.7em;background-color:#ffee69;border-color:#d4c237 #a6982b #a6982b;border-style:solid;border-width:1px}.path-grade-report-grader .yui3-overlay .fullname{font-weight:bold;color:#5f3e00}.path-grade-report-grader .yui3-overlay .itemname{font-weight:bold;color:#194f3e}.path-grade-report-grader .yui3-overlay .feedback{color:#5f595e}.path-grade-report-grader #tooltipPanel{text-align:left}.path-grade-report-grader .yui3-overlay a.container-close{margin-top:-3px}.path-grade-report-grader #hiddentooltiproot,.tooltipDiv{display:none}.gradingform_rubric.editor .criteria .definition textarea,.gradingform_rubric.editor .criteria .scorevalue input{display:block;width:auto}.gradingform_rubric.editor .criteria .scorevalue input{float:left}.message-discussion-noframes h1{font-size:1em}.message-discussion-noframes #userinfo .commands,.message .noframesjslink,.message .link{font-size:11.9px}.message .heading{font-size:1em;font-weight:bold}.message .author{font-weight:bold}.message .time{font-style:italic}#page-message-user .commands span{font-size:.7em}#page-message-user .name{font-size:1.1em;font-weight:bold}table.message_search_results td{border-color:#ddd}.message .time,.message.me .author{color:#999}.message.other .author{color:#88c}#page-message-messages{padding:10px}#page-message-send .notifysuccess{padding:1px}#page-message-send td.fixeditor{text-align:center}.message .note{padding:10px}table.message .searchresults td{padding:5px}.message .contactselector{float:left;width:24%}.message .contactselector .contact{text-align:left}.message .contactselector .messageselecteduser{font-weight:bold}.message .contactselector .paging{position:relative;z-index:1}.message .messagearea{float:right;width:74%;min-height:200px;padding-left:1%;border-left:1px solid #d3d3d3}.message .messagearea .messagehistorytype{padding-bottom:20px;clear:both}.message .messagearea .messagehistory .message_user_pictures{margin-right:auto;margin-left:auto}.message .messagearea .messagehistory .message_user_pictures #user1{width:200px;vertical-align:top}.message .messagearea .messagehistory .message_user_pictures #user2{width:200px;vertical-align:top}.message .messagearea .messagehistory .message_user_pictures .useractionlinks{font-size:.9em}.message .messagearea .messagehistory .heading{width:100%;clear:both}.message .messagearea .messagehistory .left{float:left;width:50%;padding-bottom:10px;clear:both}.message .messagearea .messagehistory .right{float:right;width:50%;padding-bottom:10px;clear:both}.message .messagearea .messagehistory .notification{padding:10px;margin-top:5px;background-color:#eee}.message .messagearea .messagesend{padding-top:20px;clear:both}.message .messagearea .messagesend .messagesendbox{width:100%}.message .messagearea .messagesend fieldset{padding:0;margin:0}.message .messagearea .messagerecent{width:100%;text-align:left}.message .messagearea .messagerecent .singlemessage{padding:10px;border-bottom:1px solid #d3d3d3}.message .messagearea .messagerecent .singlemessage .otheruser span{padding:5px}.message .messagearea .messagerecent .singlemessage .messagedate{float:right}.message .hiddenelement{display:none}.message .visible{display:inline}.message #usergroupselector.fieldset,.message #viewing{width:100%}.messagesearchresults{margin-bottom:40px}.messagesearchresults td{padding:0 10px 0 20px}.messagesearchresults td span{white-space:nowrap}.messagesearchresults td img.userpicture{padding-right:.45em;vertical-align:text-bottom}.dir-rtl .messagesearchresults td img.userpicture{padding-right:0;padding-left:.45em}.messagesearchresults td span img{padding:0 0 0 .45em;vertical-align:text-bottom}.dir-rtl .messagesearchresults td span img{padding:0 .45em 0 0}#newmessageoverlay{position:fixed;right:0;bottom:0;padding:20px;background-color:#d3d3d3;border:1px solid black}#newmessageoverlay #usermessage{padding:10px}.questionbank h2{margin-top:0}.questioncategories h3{margin-top:0}#chooseqtypebox{margin-top:1em}#chooseqtype h3{margin:0 0 .3em}#chooseqtype .instruction{display:none}#chooseqtype .fakeqtypes{border-top:1px solid silver}#chooseqtype .qtypeoption{margin-bottom:.5em}#chooseqtype label{display:block}#chooseqtype .qtypename img{padding:0 .3em}#chooseqtype .qtypename{display:inline-table;width:16em}#chooseqtype .qtypesummary{display:block;margin:0 2em}#chooseqtype .submitbuttons{margin:.7em 0;text-align:center}#qtypechoicecontainer{display:none}#qtypechoicecontainer_c.yui-panel-container.shadow .underlay{background:0}#qtypechoicecontainer.yui-panel .hd{letter-spacing:1px;color:#333;text-shadow:1px 1px 1px #fff;background-color:#ebebeb;background-image:-moz-linear-gradient(top,#fff,#ccc);background-image:-webkit-gradient(linear,0 0,0 100%,from(#fff),to(#ccc));background-image:-webkit-linear-gradient(top,#fff,#ccc);background-image:-o-linear-gradient(top,#fff,#ccc);background-image:linear-gradient(to bottom,#fff,#ccc);background-repeat:repeat-x;border:1px solid #ccc;border-bottom:1px solid #bbb;-webkit-border-top-right-radius:10px;border-top-right-radius:10px;-webkit-border-top-left-radius:10px;border-top-left-radius:10px;-moz-border-radius-topright:10px;-moz-border-radius-topleft:10px;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffffff',endColorstr='#ffcccccc',GradientType=0)}#qtypechoicecontainer{font-size:12px;color:#333;background:#f2f2f2;border:1px solid #ccc;border-top:0 none;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;-webkit-box-shadow:5px 5px 20px 0 #666;-moz-box-shadow:5px 5px 20px 0 #666;box-shadow:5px 5px 20px 0 #666}#chooseqtype{width:40em}#chooseqtypehead h3{margin:0;font-weight:normal}#chooseqtype .qtypes{position:relative;padding:.24em 0;border-bottom:1px solid #bbb}#chooseqtype .qtypeoption{padding:.3em .3em .3em 1.6em;margin-bottom:0}#chooseqtype .qtypeoption img{padding-right:.5em;padding-left:1em;vertical-align:text-bottom}#chooseqtype .selected{background-color:#fff;-webkit-box-shadow:0 0 10px 0 #ccc;-moz-box-shadow:0 0 10px 0 #ccc;box-shadow:0 0 10px 0 #ccc}#chooseqtype .instruction,#chooseqtype .qtypesummary{position:absolute;top:0;right:0;bottom:0;left:60%;display:none;padding:1.5em 1.6em;margin:0;overflow-y:auto;background-color:#fff}#chooseqtype .instruction,#chooseqtype .selected .qtypesummary{display:block}#categoryquestions{margin:0}#categoryquestions td,#categoryquestions th{padding:0 .2em}#categoryquestions th{font-weight:normal;text-align:left}#categoryquestions .checkbox{padding-left:20px}.dir-rtl #categoryquestions th{text-align:right}.questionbank .singleselect{margin:0}#combinedfeedbackhdr div.fhtmleditor{padding:0}#combinedfeedbackhdr div.fcheckbox{margin-bottom:1em}#multitriesheader div.fitem_feditor{margin-top:1em}#multitriesheader div.fitem_fgroup{margin-bottom:1em}#multitriesheader div.fitem_fgroup fieldset.felement label{margin-right:.3em;margin-left:.3em}.que{margin:0 auto 1.8em auto;clear:left;text-align:left}.dir-rtl .que{text-align:right}.que .info{float:left;width:7em;padding:.5em;margin-bottom:1.8em;background-color:#eee;border:1px solid #dcdcdc;-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px}.que h2.no{margin:0;font-size:.8em;line-height:1}.que span.qno{font-size:1.5em;font-weight:bold}.que .info>div{margin-top:.7em;font-size:.8em}.que .info .questionflag.editable{cursor:pointer}.que .info .editquestion img,.que .info .questionflag img,.que .info .questionflag input{vertical-align:bottom}.que .content{margin:0 0 0 8.5em}.que .formulation,.que .outcome,.que .comment{padding:8px 35px 8px 14px;margin-bottom:20px;color:#c09853;text-shadow:0 1px 0 rgba(255,255,255,0.5);background-color:#fcf8e3;border:1px solid #fbeed5;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px}.que .formulation{color:#3a87ad;color:#333;background-color:#d9edf7;border-color:#bce8f1}.formulation input[type=\"text\"],.formulation select{width:auto}.path-mod-quiz input[size]{width:auto}.que .comment{color:#468847;background-color:#dff0d8;border-color:#d6e9c6}.que .history{min-height:20px;padding:19px;margin-bottom:20px;background-color:#f5f5f5;border:1px solid #e3e3e3;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,0.05);-moz-box-shadow:inset 0 1px 1px rgba(0,0,0,0.05);box-shadow:inset 0 1px 1px rgba(0,0,0,0.05)}.que .history blockquote{border-color:#ddd;border-color:rgba(0,0,0,0.15)}.que .ablock{margin:.7em 0 .3em 0}.que .im-controls{margin-top:.5em;text-align:left}.dir-rtl .que .im-controls{text-align:right}.que .specificfeedback,.que .generalfeedback,.que .rightanswer,.que .im-feedback,.que .feedback,.que p{margin:0 0 .5em}.que .qtext{margin-bottom:1.5em}.que .correctness{display:inline-block;padding:2px 4px;font-size:11.844px;font-weight:bold;line-height:14px;color:#fff;text-shadow:0 -1px 0 rgba(0,0,0,0.25);white-space:nowrap;vertical-align:baseline;background-color:#999;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px}.que .correctness:empty{display:none}.que .correctness-important{background-color:#b94a48}.que .correctness-important[href]{background-color:#953b39}.que .correctness-warning{background-color:#f89406}.que .correctness-warning[href]{background-color:#c67605}.que .correctness-success{background-color:#468847}.que .correctness-success[href]{background-color:#356635}.que .correctness-info{background-color:#3a87ad}.que .correctness-info[href]{background-color:#2d6987}.que .correctness-inverse{background-color:#333}.que .correctness-inverse[href]{background-color:#1a1a1a}.que .correctness.correct{background-color:#468847}.que .correctness.partiallycorrect{background-color:#f89406}.que .correctness.notanswered,.que .correctness.incorrect{background-color:#b94a48}.que .validationerror{color:#b94a48}.formulation .correct{background-color:#dff0d8}.formulation .partiallycorrect{background-color:#fcf8e3}.formulation .incorrect{background-color:#f2dede}.formulation select.correct,.formulation input.correct{color:#468847;background-color:#dff0d8;border-color:#468847;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075);-moz-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075);box-shadow:inset 0 1px 1px rgba(0,0,0,0.075)}.formulation select.correct:focus,.formulation input.correct:focus{border-color:#356635;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075),0 0 6px #7aba7b;-moz-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075),0 0 6px #7aba7b;box-shadow:inset 0 1px 1px rgba(0,0,0,0.075),0 0 6px #7aba7b}.formulation select.partiallycorrect,.formulation input.partiallycorrect{color:#c09853;background-color:#fcf8e3;border-color:#c09853;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075);-moz-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075);box-shadow:inset 0 1px 1px rgba(0,0,0,0.075)}.formulation select.partiallycorrect:focus,.formulation input.partiallycorrect:focus{border-color:#a47e3c;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075),0 0 6px #dbc59e;-moz-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075),0 0 6px #dbc59e;box-shadow:inset 0 1px 1px rgba(0,0,0,0.075),0 0 6px #dbc59e}.formulation select.incorrect,.formulation input.incorrect{color:#b94a48;background-color:#f2dede;border-color:#b94a48;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075);-moz-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075);box-shadow:inset 0 1px 1px rgba(0,0,0,0.075)}.formulation select.incorrect:focus,.formulation input.incorrect:focus{border-color:#953b39;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075),0 0 6px #d59392;-moz-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075),0 0 6px #d59392;box-shadow:inset 0 1px 1px rgba(0,0,0,0.075),0 0 6px #d59392}.que .grading,.que .comment,.que .commentlink,.que .history{margin-top:.5em}.que .history h3{margin:0 0 .2em;font-size:1em}.que .history table{width:100%;margin:0}.que .history .current{font-weight:bold}.que .questioncorrectnessicon{vertical-align:text-bottom}.que input.questionflagimage{padding-right:3px}.dir-rtl .que input.questionflagimage{padding-right:0;padding-left:3px}.importerror{margin-top:10px;border-bottom:1px solid #555}.mform .que.comment .fitemtitle{width:20%}#page-question-preview #techinfo{margin:1em 0}.dir-rtl #chooseqtype .instruction,.dir-rtl #chooseqtype .qtypesummary{right:60%;left:0;border-right:1px solid grey;border-left:0}#page-mod-quiz-edit .questionbankwindow div.header{padding:3px;padding:2px 10px 2px 10px;margin:0 -10px 0 -10px;color:#444;text-shadow:none;background:transparent;-webkit-border-top-right-radius:4px;border-top-right-radius:4px;-webkit-border-top-left-radius:4px;border-top-left-radius:4px;-moz-border-radius-topright:4px;-moz-border-radius-topleft:4px}#page-mod-quiz-edit .questionbankwindow div.header a:link,#page-mod-quiz-edit .questionbankwindow div.header a:visited{color:#08c}#page-mod-quiz-edit .questionbankwindow div.header a:hover{color:#005580}#page-mod-quiz-edit .questionbankwindow div.header .title{color:#333}#page-mod-quiz-edit div.container div.generalbox{padding:1.5em;background-color:transparent}#page-mod-quiz-edit .categoryinfo{background-color:#fff;border-bottom:0}#page-mod-quiz-edit div.questionbank .categoryquestionscontainer,#page-mod-quiz-edit div.questionbank .categorysortopotionscontainer,#page-mod-quiz-edit div.questionbank .categorypagingbarcontainer,#page-mod-quiz-edit div.questionbank .categoryselectallcontainer{padding:0 0 1.5em 0}#page-mod-quiz-edit div.questionbank .categorypagingbarcontainer{padding:1em;margin:0 -1.2em;background-color:transparent;border-top:0;border-bottom:0}#page-mod-quiz-edit div.questionbank .categoryquestionscontainer{margin:0 -1.2em -1em -1.2em}#page-mod-quiz-edit div.question div.content div.questioncontrols{background-color:#fff}#page-mod-quiz-edit div.question div.content div.points{padding-bottom:.5em;margin-top:-0.5em;background-color:#fff;border:0}#page-mod-quiz-edit div.question div.content div.points label{display:inline-block}#page-mod-quiz-edit div.quizpage .pagecontent .pagestatus{background-color:#fff}#page-mod-quiz-edit .quizpagedelete,#page-mod-quiz-edit .quizpagedelete img{background-color:transparent}#page-mod-quiz-edit div.quizpage .pagecontent{overflow:hidden;border:1px solid #ddd;-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px}#page-mod-quiz-edit .modulespecificbuttonscontainer{width:220px}.questionbankwindow .module{width:auto}#page-mod-quiz-edit div.editq div.question div.content{overflow:hidden;background-color:#fff;border:1px solid #ddd;-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px}.path-mod-quiz .statedetails{display:block;font-size:.9em}a#hidebankcmd{color:#08c}.que.shortanswer .answer{padding:0}.que label{display:inline}.userprofile .fullprofilelink{margin:10px;text-align:center}.userprofile .description{margin-bottom:20px}.userprofile dl.list{*zoom:1}.userprofile dl.list:before,.userprofile dl.list:after{display:table;line-height:0;content:\"\"}.userprofile dl.list:after{clear:both}.userprofile dl.list dt{float:left;width:180px;overflow:hidden;clear:left;text-align:right;text-overflow:ellipsis;white-space:nowrap}.userprofile dl.list dd{margin-left:200px}.user-box{float:left;width:115px;height:160px;margin:8px;clear:none;text-align:center}.userlist .main .action-icon img{vertical-align:middle}.userlist #showall{margin:10px 0}.userlist .buttons{text-align:center}.userlist .buttons label{padding:0 3px}.userlist table#participants{text-align:center}.userlist table#participants td,.userlist table#participants th{padding:4px;text-align:left;vertical-align:middle}.userlist table.controls{width:100%}.userlist table.controls tr{vertical-align:top}.userlist table.controls td.right,.userlist table.controls td.left{padding:4px}.userlist table.controls .right{text-align:right}.userinfobox{width:100%;padding:10px;border:1px solid;border-collapse:separate}.userinfobox .left,.userinfobox .side{width:100px;vertical-align:top}.userinfobox .userpicture{width:100px;height:100px}.userinfobox .content{vertical-align:top}.userinfobox .links{width:100px;padding:5px;vertical-align:bottom}.userinfobox .links a{display:block}.userinfobox .list td{padding:3px}.userinfobox .username{padding-bottom:20px;font-weight:bold}.userinfobox td.label{font-weight:bold;text-align:right;white-space:nowrap;vertical-align:top}.groupinfobox{border:1px solid}.groupinfobox .left{width:100px;padding:10px;vertical-align:top}.course-participation #showall{margin:10px 0;text-align:center}#user-policy .noticebox{width:80%;height:250px;margin-right:auto;margin-bottom:10px;margin-left:auto;text-align:center}#user-policy #policyframe{width:100%;height:100%}.iplookup #map{margin:auto}.userselector select{width:100%}.userselector div{margin-top:.2em}.userselector div label{margin-right:.3em}.userselector .userselector-infobelow{font-size:.8em}#userselector_options{padding:.3em 0}#userselector_options .collapsibleregioncaption{font-weight:bold}#userselector_options p{margin:.2em 0;text-align:left}.dir-rtl #userselector_options p{text-align:right}#page-user-profile .messagebox{margin-right:auto;margin-left:auto;text-align:center}#page-course-view-weeks .messagebox{margin-right:auto;margin-left:auto;text-align:center}.dir-rtl .descriptionbox{margin-right:110px;margin-left:0}.dir-rtl .userlist table#participants td,.dir-rtl .userlist table#participants th{text-align:right}.dir-rtl .userlist table#participants{margin:0 auto}#page-my-index.dir-rtl .block h3.main{text-align:right}/*!\n+.layout-option-noheader #page-header,.layout-option-nonavbar #page-navbar,.layout-option-nofooter #page-footer,.layout-option-nocourseheader .course-content-header,.layout-option-nocoursefooter .course-content-footer{display:none}.empty-region-side-pre #block-region-side-pre,.empty-region-side-post #block-region-side-post{display:none}.empty-region-side-post #region-bs-main-and-pre.span9{width:100%}.empty-region-side-pre #region-main{float:none;width:100%}.empty-region-side-post.used-region-side-pre #region-main.span8{width:74.46808510638297%;*width:74.41489361702126%}.empty-region-side-post.used-region-side-pre #block-region-side-pre.span4{width:23.404255319148934%;*width:23.351063829787233%}.empty-region-side-post #region-bs-main-and-post.span9 #region-main.span8{width:100%}.dir-ltr,.mdl-left,.dir-rtl .mdl-right{text-align:left}.dir-rtl,.mdl-right,.dir-rtl .mdl-left{text-align:right}#add,#remove,.centerpara,.mdl-align{text-align:center}a.dimmed,a.dimmed:link,a.dimmed:visited,a.dimmed_text,a.dimmed_text:link,a.dimmed_text:visited,.dimmed_text,.dimmed_text a,.dimmed_text a:link,.dimmed_text a:visited,.usersuspended,.usersuspended a,.usersuspended a:link,.usersuspended a:visited,.dimmed_category,.dimmed_category a{color:#999}.activity.label .dimmed_text{opacity:.5;filter:alpha(opacity=50)}.unlist,.unlist li,.inline-list,.inline-list li,.block .list,.block .list li,.section li.activity,.section li.movehere,.tabtree li{padding:0;margin:0;list-style:none}.inline,.inline-list li{display:inline}.notifytiny{font-size:10.5px}.notifytiny li,.notifytiny td{font-size:100%}.red,.notifyproblem{color:#b94a48}.green,.notifysuccess{color:#468847}.reportlink{text-align:right}a.autolink.glossary:hover{cursor:help}.collapsibleregioncaption{white-space:nowrap}.collapsibleregioncaption img{vertical-align:middle}.jsenabled .hiddenifjs{display:none}.visibleifjs{display:none}.jsenabled .visibleifjs{display:inline}.jsenabled .collapsibleregion{overflow:hidden}.jsenabled .collapsed .collapsibleregioninner{visibility:hidden}.yui-overlay .yui-widget-bd{position:relative;top:0;left:0;z-index:1;padding:2px 5px;color:#000;background-color:#ffee69;border:1px solid #a6982b;border-top-color:#d4c237}.clearer{display:block;height:1px;padding:0;margin:0;clear:both;background:transparent;border-width:0}.bold,.warning,.errorbox .title,.pagingbar .title,.pagingbar .thispage,.headingblock{font-weight:bold}img.resize{width:1em;height:1em}.block img.resize,.breadcrumb img.resize{width:.8em;height:.9em}img.icon{width:16px;height:16px;padding-right:6px;vertical-align:text-bottom}.dir-rtl img.icon{padding-right:0;padding-left:6px}img.iconsmall{width:12px;height:12px;margin-right:3px;vertical-align:middle}img.iconhelp,.helplink img{width:16px;height:16px;padding-left:3px;vertical-align:text-bottom}.dir-rtl img.iconhelp,.dir-rtl .helplink img{padding-right:3px;padding-left:0}img.iconlarge{width:24px;height:24px;vertical-align:middle}img.iconsort{padding-left:.3em;margin-bottom:.15em;vertical-align:text-bottom}.dir-rtl img.iconsort{padding-right:.3em;padding-left:0}img.icontoggle{width:50px;height:17px;vertical-align:middle}img.iconkbhelp{width:49px;height:17px}img.icon-pre,.dir-rtl img.icon-post{padding-right:3px;padding-left:0}img.icon-post,.dir-rtl img.icon-pre{padding-right:0;padding-left:3px}.boxaligncenter{margin-right:auto;margin-left:auto}.boxalignright{margin-right:0;margin-left:auto}.boxalignleft{margin-right:auto;margin-left:0}.boxwidthnarrow{width:30%}.boxwidthnormal{width:50%}.boxwidthwide{width:80%}.headermain{font-weight:bold}#maincontent{display:block;height:1px;overflow:hidden}img.uihint{cursor:help}#addmembersform table{margin-right:auto;margin-left:auto}.flexible th{white-space:nowrap}img.emoticon{width:15px;height:15px;vertical-align:middle}form.popupform,form.popupform div{display:inline}.arrow_button input{overflow:hidden}.action-icon img.smallicon{margin:0 .3em;vertical-align:text-bottom}.main img{vertical-align:middle}.no-overflow{padding-bottom:1px;overflow:auto}.pagelayout-report .no-overflow{overflow:visible}.no-overflow>.generaltable{margin-bottom:0}.accesshide{position:absolute;left:-10000px;font-size:1em;font-weight:normal}.dir-rtl .accesshide{top:-30000px;left:auto}span.hide,div.hide{display:none}a.skip-block,a.skip{position:absolute;top:-1000em;font-size:.85em;text-decoration:none}a.skip-block:focus,a.skip-block:active,a.skip:focus,a.skip:active{position:static;display:block}.skip-block-to{display:block;height:1px;overflow:hidden}.addbloglink{text-align:center}.blog_entry .audience{padding-right:4px;text-align:right}.blog_entry .tags{margin-top:15px}.blog_entry .tags .action-icon img.smallicon{width:16px;height:16px}.blog_entry .content{margin-left:43px}#page-group-index #groupeditform{text-align:center}#doc-contents h1{margin:1em 0 0 0}#doc-contents ul{width:90%;padding:0;margin:0}#doc-contents ul li{list-style-type:none}.groupmanagementtable td{vertical-align:top}.groupmanagementtable #existingcell,.groupmanagementtable #potentialcell{width:42%}.groupmanagementtable #buttonscell{width:16%}.groupmanagementtable #removeselect_wrapper,.groupmanagementtable #addselect_wrapper{width:100%}.groupmanagementtable #removeselect_wrapper label,.groupmanagementtable #addselect_wrapper label{font-weight:normal}.dir-rtl .groupmanagementtable p{text-align:right}#group-usersummary{width:14em}.groupselector{margin-top:3px;margin-bottom:3px}.loginbox{margin:15px;overflow:visible}.loginbox.twocolumns{margin:15px}.loginbox h2,.loginbox .subcontent{padding:10px;margin:5px;text-align:center}.loginbox .loginpanel .desc{padding:0;margin:0;margin-bottom:5px}.loginbox .signuppanel .subcontent{text-align:left}.dir-rtl .loginbox .signuppanel .subcontent{text-align:right}.loginbox .loginsub{margin-right:0;margin-left:0}.loginbox .guestsub,.loginbox .forgotsub,.loginbox .potentialidps{margin:5px 12%}.loginbox .potentialidps .potentialidplist{margin-left:40%}.loginbox .potentialidps .potentialidplist div{text-align:left}.loginbox .loginform{margin-top:1em;text-align:left}.loginbox .loginform .form-label{float:left;width:44%;text-align:right;white-space:nowrap;direction:rtl}.dir-rtl .loginbox .loginform .form-label{float:left;width:44%;text-align:right;white-space:nowrap;direction:ltr}.loginbox .loginform .form-input{float:right;width:55%}.loginbox .loginform .form-input input{width:6em}.loginbox .signupform{margin-top:1em;text-align:center}.loginbox.twocolumns .loginpanel,.loginbox.twocolumns .signuppanel{display:block;float:left;width:48%;min-height:30px;padding:0;padding-bottom:2000px;margin:0;margin-bottom:-2000px;margin-left:2.76243%;border:0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.loginbox .potentialidp .smallicon{margin:0 .3em;vertical-align:text-bottom}.notepost{margin-bottom:1em}.notepost .userpicture{float:left;margin-right:5px}.notepost .content,.notepost .footer{clear:both}.notesgroup{margin-left:20px}.path-my .coursebox .overview{margin:15px 30px 10px 30px}.path-my .coursebox .info{float:none;margin:0}.mod_introbox{padding:10px}table.mod_index{width:100%}.comment-ctrl{display:none;padding:0;margin:0;font-size:12px}.comment-ctrl h5{padding:5px;margin:0}.comment-area{max-width:400px;padding:5px}.comment-area textarea{width:100%;overflow:auto}.comment-area .fd{text-align:right}.comment-meta span{color:gray}.comment-link img{vertical-align:text-bottom}.comment-list{padding:0;margin:0;overflow:auto;font-size:11px;list-style:none}.comment-list li{position:relative;padding:.3em;margin:2px;margin-bottom:5px;clear:both;list-style:none}.comment-list li.first{display:none}.comment-paging{text-align:center}.comment-paging .pageno{padding:2px}.comment-paging .curpage{border:1px solid #CCC}.comment-message .picture{float:left;width:20px}.dir-rtl .comment-message .picture{float:right}.comment-message .text{padding:0;margin:0}.comment-message .text p{padding:0;margin:0 18px 0 0}.comment-delete{position:absolute;top:0;right:0;margin:.3em}.dir-rtl .comment-delete{position:absolute;right:auto;left:0;margin:.3em}.comment-delete-confirm{width:5em;padding:2px;text-align:center;background:#eee}.comment-container{float:left;margin:4px}.comment-report-selectall{display:none}.comment-link{display:none}.jsenabled .comment-link{display:block}.jsenabled .showcommentsnonjs{display:none}.jsenabled .comment-report-selectall{display:inline}.completion-expired{background:#f2dede}.completion-expected{font-size:10.5px}.completion-sortchoice,.completion-identifyfield{font-size:10.5px;vertical-align:bottom}.completion-progresscell{text-align:right}.completion-expired .completion-expected{font-weight:bold}#page-tag-coursetags_edit .coursetag_edit_centered{position:relative;width:600px;margin:20px auto}#page-tag-coursetags_edit .coursetag_edit_row{clear:both}#page-tag-coursetags_edit .coursetag_edit_row .coursetag_edit_left{float:left;width:50%;text-align:right}#page-tag-coursetags_edit .coursetag_edit_row .coursetag_edit_right{margin-left:50%}#page-tag-coursetags_edit .coursetag_edit_input3{display:none}#page-tag-coursetags_more .coursetag_more_large{font-size:120%}#page-tag-coursetags_more .coursetag_more_small{font-size:80%}#page-tag-coursetags_more .coursetag_more_link{font-size:80%}#tag-description,#tag-blogs{width:100%}#tag-management-box{margin-bottom:10px;line-height:20px}#tag-user-table{width:100%;padding:3px;clear:both}#tag-user-table{*zoom:1}#tag-user-table:before,#tag-user-table:after{display:table;line-height:0;content:\"\"}#tag-user-table:after{clear:both}img.user-image{width:100px;height:100px}#small-tag-cloud-box{width:300px;margin:0 auto}#big-tag-cloud-box{float:none;width:600px;margin:0 auto}ul#tag-cloud-list{padding:5px;margin:0;list-style:none}ul#tag-cloud-list li{display:inline;margin:0;list-style-type:none}#tag-search-box{margin:10px auto;text-align:center}#tag-search-results-container{width:100%;padding:0}#tag-search-results{display:block;float:left;width:60%;padding:0;margin:15px 20% 0 20%}#tag-search-results li{float:left;width:30%;padding-right:1%;padding-left:1%;line-height:20px;text-align:left;list-style:none}span.flagged-tag,span.flagged-tag a{color:#b94a48}table#tag-management-list{width:100%;text-align:left}table#tag-management-list td,table#tag-management-list th{padding:4px;text-align:left;vertical-align:middle}.tag-management-form{text-align:center}#relatedtags-autocomplete-container{width:100%;min-height:4.6em;margin-right:auto;margin-left:auto}#relatedtags-autocomplete{position:relative;display:block;width:60%;margin-right:auto;margin-left:auto}#relatedtags-autocomplete .yui-ac-content{position:absolute;left:20%;z-index:9050;width:420px;overflow:hidden;background:#fff;border:1px solid #404040}#relatedtags-autocomplete .ysearchquery{position:absolute;right:10px;z-index:10;color:#808080}#relatedtags-autocomplete .yui-ac-shadow{position:absolute;z-index:9049;width:100%;margin:.3em;background:#a0a0a0}#relatedtags-autocomplete ul{width:100%;padding:0;margin:0;list-style-type:none}#relatedtags-autocomplete li{padding:0 5px;white-space:nowrap;cursor:default}#relatedtags-autocomplete li.yui-ac-highlight{background:#ffc}h2.tag-heading,div#tag-description,div#tag-blogs,body.tag .managelink{padding:5px}.tag_cloud .s20{font-size:1.5em;font-weight:bold}.tag_cloud .s19{font-size:1.5em}.tag_cloud .s18{font-size:1.4em;font-weight:bold}.tag_cloud .s17{font-size:1.4em}.tag_cloud .s16{font-size:1.3em;font-weight:bold}.tag_cloud .s15{font-size:1.3em}.tag_cloud .s14{font-size:1.2em;font-weight:bold}.tag_cloud .s13{font-size:1.2em}.tag_cloud .s12,.tag_cloud .s11{font-size:1.1em;font-weight:bold}.tag_cloud .s10,.tag_cloud .s9{font-size:1.1em}.tag_cloud .s8,.tag_cloud .s7{font-size:1em;font-weight:bold}.tag_cloud .s6,.tag_cloud .s5{font-size:1em}.tag_cloud .s4,.tag_cloud .s3{font-size:.9em;font-weight:bold}.tag_cloud .s2,.tag_cloud .s1{font-size:.9em}.tag_cloud .s0{font-size:.8em}#webservice-doc-generator td{text-align:left;border:0 solid black}.smartselect{position:absolute}.smartselect .smartselect_mask{background-color:#fff}.smartselect ul{padding:0;margin:0}.smartselect ul li{list-style:none}.smartselect .smartselect_menu{margin-right:5px}.safari .smartselect .smartselect_menu{margin-left:2px}.smartselect .smartselect_menu,.smartselect .smartselect_submenu{display:none;background-color:#FFF;border:1px solid #000}.smartselect .smartselect_menu.visible,.smartselect .smartselect_submenu.visible{display:block}.smartselect .smartselect_menu_content ul li{position:relative;padding:2px 5px}.smartselect .smartselect_menu_content ul li a{color:#333;text-decoration:none}.smartselect .smartselect_menu_content ul li a.selectable{color:inherit}.smartselect .smartselect_submenuitem{background-image:url([[pix:moodle|t/collapsed]]);background-position:100%;background-repeat:no-repeat}.smartselect.spanningmenu .smartselect_submenu{position:absolute;top:-1px;left:100%}.smartselect.spanningmenu .smartselect_submenu a{padding-right:16px;white-space:nowrap}.smartselect.spanningmenu .smartselect_menu_content ul li a.selectable:hover{text-decoration:underline}.smartselect.compactmenu .smartselect_submenu{position:relative;z-index:1010;display:none;margin:2px -3px;margin-left:10px;border-width:0}.smartselect.compactmenu .smartselect_submenu.visible{display:block}.smartselect.compactmenu .smartselect_menu{z-index:1000;overflow:hidden}.smartselect.compactmenu .smartselect_submenu .smartselect_submenu{z-index:1020}.smartselect.compactmenu .smartselect_submenuitem:hover>.smartselect_menuitem_label{font-weight:bold}#page-admin-registration-register .registration_textfield{width:300px}.userenrolment{width:100%;border-collapse:collapse}.userenrolment td{height:41px;padding:0}.userenrolment .subfield{margin-right:5px}.userenrolment .col_userdetails .subfield_picture{float:left}.userenrolment .col_lastseen{width:150px}.userenrolment .col_role{width:262px}.userenrolment .col_role .roles{margin-right:30px}.userenrolment .col_role .role{float:left;padding:3px;margin:3px}.dir-rtl .userenrolment .col_role .role{float:right}.userenrolment .col_role .role a{margin-left:3px;cursor:pointer}.userenrolment .col_role .addrole{float:right;width:18px;height:18px;margin:3px;text-align:center;background-color:#dff0d8;border:1px solid #d6e9c6}.userenrolment .col_role .addrole img{vertical-align:baseline}.userenrolment .hasAllRoles .col_role .addrole{display:none}.userenrolment .col_group .groups{margin-right:30px}.userenrolment .col_group .group{float:left;padding:3px;margin:3px;white-space:nowrap}.userenrolment .col_group .group a{margin-left:3px;cursor:pointer}.userenrolment .col_group .addgroup{float:right;width:18px;height:18px;margin:3px;text-align:center}.userenrolment .col_group .addgroup a img{vertical-align:bottom}.userenrolment .col_enrol .enrolment{float:left;padding:3px;margin:3px}.userenrolment .col_enrol .enrolment a{float:right;margin-left:3px}#page-enrol-users .enrol_user_buttons{float:right}#page-enrol-users .enrol_user_buttons .enrolusersbutton{display:inline;margin-left:1em}#page-enrol-users .enrol_user_buttons .enrolusersbutton div,#page-enrol-users .enrol_user_buttons .enrolusersbutton form{display:inline}#page-enrol-users .enrol_user_buttons .enrolusersbutton input{padding-right:6px;padding-left:6px}#page-enrol-users.dir-rtl .col_userdetails .subfield_picture{float:right}#page-enrol-users .user-enroller-panel .uep-search-results .user .details{width:237px}.dir-rtl .headermain{float:right}.dir-rtl .headermenu{float:left}.dir-rtl .loginbox .loginform .form-label{float:right;text-align:left}.dir-rtl .loginbox .loginform .form-input{text-align:right}.dir-rtl .yui3-menu-hidden{left:0}#page-admin-roles-define.dir-rtl #rolesform .felement{margin-right:180px}#page-message-edit.dir-rtl table.generaltable th.c0{text-align:right}.corelightbox{position:absolute;top:0;left:0;width:100%;height:100%;text-align:center;background-color:#CCC}.corelightbox img{position:fixed;top:50%;left:50%}.mod-indent-1{margin-left:30px}.mod-indent-2{margin-left:60px}.mod-indent-3{margin-left:90px}.mod-indent-4{margin-left:120px}.mod-indent-5{margin-left:150px}.mod-indent-6{margin-left:180px}.mod-indent-7{margin-left:210px}.mod-indent-8{margin-left:240px}.mod-indent-9{margin-left:270px}.mod-indent-10{margin-left:300px}.mod-indent-11{margin-left:330px}.mod-indent-12{margin-left:360px}.mod-indent-13{margin-left:390px}.mod-indent-14{margin-left:420px}.mod-indent-15,.mod-indent-huge{margin-left:420px}.dir-rtl .mod-indent-1{margin-right:30px;margin-left:0}.dir-rtl .mod-indent-2{margin-right:60px;margin-left:0}.dir-rtl .mod-indent-3{margin-right:90px;margin-left:0}.dir-rtl .mod-indent-4{margin-right:120px;margin-left:0}.dir-rtl .mod-indent-5{margin-right:150px;margin-left:0}.dir-rtl .mod-indent-6{margin-right:180px;margin-left:0}.dir-rtl .mod-indent-7{margin-right:210px;margin-left:0}.dir-rtl .mod-indent-8{margin-right:240px;margin-left:0}.dir-rtl .mod-indent-9{margin-right:270px;margin-left:0}.dir-rtl .mod-indent-10{margin-right:300px;margin-left:0}.dir-rtl .mod-indent-11{margin-right:330px;margin-left:0}.dir-rtl .mod-indent-12{margin-right:360px;margin-left:0}.dir-rtl .mod-indent-13{margin-right:390px;margin-left:0}.dir-rtl .mod-indent-14{margin-right:420px;margin-left:0}.dir-rtl .mod-indent-15,.dir-rtl .mod-indent-huge{margin-right:420px;margin-left:0}.resourcecontent .mediaplugin_mp3 object{width:600px;height:25px}.resourcecontent audio.mediaplugin_html5audio{width:600px}.resourceimage{max-width:100%}.mediaplugin_mp3 object{width:300px;height:15px}audio.mediaplugin_html5audio{width:300px}.core_media_preview.pagelayout-embedded #content{padding:0}.core_media_preview.pagelayout-embedded #maincontent{height:0}.core_media_preview.pagelayout-embedded .mediaplugin{margin:0}.dir-rtl .ygtvtn,.dir-rtl .ygtvtm,.dir-rtl .ygtvtmh,.dir-rtl .ygtvtmhh,.dir-rtl .ygtvtp,.dir-rtl .ygtvtph,.dir-rtl .ygtvtphh,.dir-rtl .ygtvln,.dir-rtl .ygtvlm,.dir-rtl .ygtvlmh,.dir-rtl .ygtvlmhh,.dir-rtl .ygtvlp,.dir-rtl .ygtvlph,.dir-rtl .ygtvlphh,.dir-rtl .ygtvdepthcell,.dir-rtl .ygtvok,.dir-rtl .ygtvok:hover,.dir-rtl .ygtvcancel,.dir-rtl .ygtvcancel:hover{width:18px;height:22px;cursor:pointer;background-image:url([[pix:theme|yui2-treeview-sprite-rtl]]);background-repeat:no-repeat}.dir-rtl .ygtvtn{background-position:0 -5600px}.dir-rtl .ygtvtm{background-position:0 -4000px}.dir-rtl .ygtvtmh,.dir-rtl .ygtvtmhh{background-position:0 -4800px}.dir-rtl .ygtvtp{background-position:0 -6400px}.dir-rtl .ygtvtph,.dir-rtl .ygtvtphh{background-position:0 -7200px}.dir-rtl .ygtvln{background-position:0 -1600px}.dir-rtl .ygtvlm{background-position:0 0}.dir-rtl .ygtvlmh,.dir-rtl .ygtvlmhh{background-position:0 -800px}.dir-rtl .ygtvlp{background-position:0 -2400px}.dir-rtl .ygtvlph,.dir-rtl .ygtvlphh{background-position:0 -3200px}.dir-rtl .ygtvdepthcell{background-position:0 -8000px}.dir-rtl .ygtvok{background-position:0 -8800px}.dir-rtl .ygtvok:hover{background-position:0 -8844px}.dir-rtl .ygtvcancel{background-position:0 -8822px}.dir-rtl .ygtvcancel:hover{background-position:0 -8866px}.dir-rtl.yui-skin-sam .yui-panel .hd{text-align:right}.dir-rtl .yui-skin-sam .yui-layout .yui-layout-unit div.yui-layout-bd{text-align:right}.dir-rtl .clearlooks2.ie9 .mceAlert .mceMiddle span,.dir-rtl .clearlooks2 .mceConfirm .mceMiddle span{top:44px}.dir-rtl .o2k7Skin table,.dir-rtl .o2k7Skin tbody,.dir-rtl .o2k7Skin a,.dir-rtl .o2k7Skin img,.dir-rtl .o2k7Skin tr,.dir-rtl .o2k7Skin div,.dir-rtl .o2k7Skin td,.dir-rtl .o2k7Skin iframe,.dir-rtl .o2k7Skin span,.dir-rtl .o2k7Skin *,.dir-rtl .o2k7Skin .mceText,.dir-rtl .o2k7Skin .mceListBox .mceText{text-align:right}.path-rating .ratingtable{width:100%;margin-bottom:1em}.path-rating .ratingtable th.rating{width:100%}.path-rating .ratingtable td.rating,.path-rating .ratingtable td.time{text-align:center;white-space:nowrap}.initialbar a{padding-right:2px}.moodle-dialogue-base .moodle-dialogue-lightbox{background-color:#AAA}.moodle-dialogue-base .hidden,.moodle-dialogue-base .moodle-dialogue-hidden{display:none}.moodle-dialogue-base .moodle-dialogue{z-index:600;padding:0;margin:0;background:0;border:0}.moodle-dialogue-base .moodle-dialogue-wrap{margin-top:-3px;margin-left:-3px;background-color:#fff;border:1px solid #ccc;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;-webkit-box-shadow:5px 5px 20px 0 #666;-moz-box-shadow:5px 5px 20px 0 #666;box-shadow:5px 5px 20px 0 #666}.moodle-dialogue-base .moodle-dialogue-wrap .moodle-dialogue-hd{padding:5px;margin:0;font-size:12px;font-weight:normal;letter-spacing:1px;color:#333;text-align:center;text-shadow:1px 1px 1px #fff;background:#ccc;background-color:#ebebeb;background-image:-moz-linear-gradient(top,#fff,#ccc);background-image:-webkit-gradient(linear,0 0,0 100%,from(#fff),to(#ccc));background-image:-webkit-linear-gradient(top,#fff,#ccc);background-image:-o-linear-gradient(top,#fff,#ccc);background-image:linear-gradient(to bottom,#fff,#ccc);background-repeat:repeat-x;border-bottom:1px solid #bbb;-webkit-border-radius:10px 10px 0 0;-moz-border-radius:10px 10px 0 0;border-radius:10px 10px 0 0;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffffff',endColorstr='#ffcccccc',GradientType=0);filter:dropshadow(color=#ffffff,offx=1,offy=1)}.moodle-dialogue-base .moodle-dialogue-wrap .moodle-dialogue-hd h1{display:inline;padding:0;margin:0;font-size:100%;font-weight:bold}.moodle-dialogue-base .moodle-dialogue-wrap .moodle-dialogue-hd .yui3-widget-buttons{padding:5px}.moodle-dialogue-base .closebutton{display:inline-block;float:right;width:25px;height:15px;padding:0;vertical-align:middle;cursor:pointer;background-image:url([[pix:theme|sprite]]);background-repeat:no-repeat;border-style:none}.dir-rtl .moodle-dialogue-base .moodle-dialogue-wrap .moodle-dialogue-hd .yui3-widget-buttons{right:auto;left:0}.moodle-dialogue-base .moodle-dialogue .moodle-dialogue-bd{padding:1em;overflow:auto;font-size:12px;line-height:2em;color:#555}.moodle-dialogue-base .moodle-dialogue-wrap .moodle-dialogue-content{padding:0;background:#FFF}.moodle-dialogue-confirm .confirmation-dialogue{text-align:center}.moodle-dialogue-confirm .confirmation-dialogue input{text-align:center}.moodle-dialogue-exception .moodle-exception-message{text-align:center}.moodle-dialogue-exception .moodle-exception-param label{font-weight:bold}.moodle-dialogue-exception .param-stacktrace label{background-color:#EEE;border:1px solid #ccc;border-bottom-width:0}.moodle-dialogue-exception .param-stacktrace pre{background-color:#fff;border:1px solid #ccc}.moodle-dialogue-exception .param-stacktrace .stacktrace-file{font-size:11.9px;color:navy}.moodle-dialogue-exception .param-stacktrace .stacktrace-line{font-size:11.9px;color:#b94a48}.moodle-dialogue-exception .param-stacktrace .stacktrace-call{font-size:90%;color:#333;border-bottom:1px solid #eee}.moodle-dialogue-base .moodle-dialogue .moodle-dialogue-content .moodle-dialogue-ft{padding:0;margin:.7em 1em;font-size:12px;text-align:right;background-color:#FFF}.moodle-dialogue-confirm .confirmation-message{margin:.5em 1em}.moodle-dialogue-confirm .confirmation-dialogue input{min-width:80px}.moodle-dialogue-exception .moodle-exception-message{margin:1em}.moodle-dialogue-exception .moodle-exception-param{margin-bottom:.5em}.moodle-dialogue-exception .moodle-exception-param label{width:150px}.moodle-dialogue-exception .param-stacktrace label{display:block;padding:4px 1em;margin:0}.moodle-dialogue-exception .param-stacktrace pre{display:block;height:200px;overflow:auto}.moodle-dialogue-exception .param-stacktrace .stacktrace-file{display:inline-block;margin:4px 0}.moodle-dialogue-exception .param-stacktrace .stacktrace-line{display:inline-block;width:50px;margin:4px 1em}.moodle-dialogue-exception .param-stacktrace .stacktrace-call{padding-bottom:4px;padding-left:25px;margin-bottom:4px}.moodle-dialogue .moodle-dialogue-bd .content-lightbox{top:0;left:0;width:100%;height:100%;padding:10% 0;text-align:center;background-color:white;opacity:.75;filter:alpha(opacity=75)}.moodle-dialogue .tooltiptext{max-height:300px}.moodle-dialogue-base .moodle-dialogue.moodle-dialogue-tooltip{z-index:3001}#page-question-edit.dir-rtl a.container-close{right:auto;left:6px}.chooserdialoguebody,.choosertitle{display:none}.moodle-dialogue.chooserdialogue .moodle-dialogue-content .moodle-dialogue-ft{margin:0}.chooserdialogue .moodle-dialogue-wrap .moodle-dialogue-bd{padding:0;background:#f2f2f2;-webkit-border-bottom-right-radius:10px;border-bottom-right-radius:10px;-webkit-border-bottom-left-radius:10px;border-bottom-left-radius:10px;-moz-border-radius-bottomright:10px;-moz-border-radius-bottomleft:10px}.choosercontainer #chooseform .submitbuttons{margin:.7em 0;text-align:center}.choosercontainer #chooseform .submitbuttons input{min-width:100px;margin:0 .5em}.choosercontainer #chooseform .options{position:relative;border-bottom:1px solid #bbb}.jsenabled .choosercontainer #chooseform .alloptions{max-width:20.3em;overflow-x:hidden;overflow-y:auto;-webkit-box-shadow:inset 0 0 30px 0 #ccc;-moz-box-shadow:inset 0 0 30px 0 #ccc;box-shadow:inset 0 0 30px 0 #ccc}.dir-rtl.jsenabled .choosercontainer #chooseform .alloptions{max-width:18.3em}.choosercontainer #chooseform .moduletypetitle,.choosercontainer #chooseform .option,.choosercontainer #chooseform .nonoption{padding:0 1.6em 0 1.6em;margin-bottom:0}.choosercontainer #chooseform .moduletypetitle{padding-top:1.2em;padding-bottom:.4em;text-transform:uppercase}.choosercontainer #chooseform .option .typename,.choosercontainer #chooseform .option span.modicon img.icon,.choosercontainer #chooseform .nonoption .typename,.choosercontainer #chooseform .nonoption span.modicon img.icon{padding:0 0 0 .5em}.dir-rtl .choosercontainer #chooseform .option .typename,.dir-rtl .choosercontainer #chooseform .option span.modicon img.icon,.dir-rtl .choosercontainer #chooseform .nonoption .typename,.dir-rtl .choosercontainer #chooseform .nonoption span.modicon img.icon{padding:0 .5em 0 0}.choosercontainer #chooseform .option span.modicon img.icon,.choosercontainer #chooseform .nonoption span.modicon img.icon{width:24px;height:24px}.choosercontainer #chooseform .option input[type=radio],.choosercontainer #chooseform .option span.typename,.choosercontainer #chooseform .option span.modicon{vertical-align:middle}.choosercontainer #chooseform .option label{display:block;padding:.3em 0 .1em 0;border-bottom:1px solid #fff}.choosercontainer #chooseform .nonoption{padding-top:.3em;padding-bottom:.1em;padding-left:2.7em}.dir-rtl .choosercontainer #chooseform .nonoption{padding-right:2.7em;padding-left:0}.choosercontainer #chooseform .subtype{padding:0 1.6em 0 3.2em;margin-bottom:0}.dir-rtl .choosercontainer #chooseform .subtype{padding:0 3.2em 0 1.6em}.choosercontainer #chooseform .subtype .typename{margin:0 0 0 .2em}.dir-rtl .choosercontainer #chooseform .subtype .typename{margin:0 .2em 0 0}.jsenabled .choosercontainer #chooseform .instruction,.jsenabled .choosercontainer #chooseform .typesummary{position:absolute;top:0;right:0;bottom:0;left:20.3em;display:none;padding:1.6em;margin:0;overflow-x:hidden;overflow-y:auto;line-height:2em;background-color:#fff}.dir-rtl.jsenabled .choosercontainer #chooseform .instruction,.dir-rtl.jsenabled .choosercontainer #chooseform .typesummary{right:18.5em;left:0;border-right:1px solid grey}.jsenabled .choosercontainer #chooseform .instruction,.choosercontainer #chooseform .selected .typesummary{display:block}.choosercontainer #chooseform .selected{background-color:#fff;-webkit-box-shadow:0 0 10px 0 #ccc;-moz-box-shadow:0 0 10px 0 #ccc;box-shadow:0 0 10px 0 #ccc}.section-modchooser-link img.smallicon{padding:3px}.formlistingradio{padding-right:10px;padding-bottom:25px}.formlistinginputradio{float:left}.formlistingmain{min-height:225px}.formlisting{position:relative;padding:1px 19px 14px;margin:15px 0;background-color:white;border:1px solid #DDD;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px}.formlistingmore{position:absolute;right:-1px;bottom:-1px;padding:3px 7px;font-size:12px;font-weight:bold;color:#9da0a4;cursor:pointer;background-color:whiteSmoke;border:1px solid #ddd;-webkit-border-radius:4px 0 4px 0;-moz-border-radius:4px 0 4px 0;border-radius:4px 0 4px 0}.formlistingall{padding:0;margin:15px 0;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px}.formlistingrow{top:50%;left:50%;float:left;width:150px;min-height:34px;padding:6px;cursor:pointer;background-color:#f7f7f9;border-right:1px solid #e1e1e8;border-bottom:1px solid;border-left:1px solid #e1e1e8;border-color:#e1e1e8;-webkit-border-radius:0 0 4px 4px;-moz-border-radius:0 0 4px 4px;border-radius:0 0 4px 4px}body.jsenabled .formlistingradio{display:none}body.jsenabled .formlisting{display:block}table.collection{width:100%;margin-bottom:20px;border:1px solid #ddd;border-collapse:separate;*border-collapse:collapse;border-left:0;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px}table.collection th,table.collection td{padding:8px;line-height:20px;text-align:left;vertical-align:top;border-top:1px solid #ddd}table.collection th{font-weight:bold}table.collection thead th{vertical-align:bottom}table.collection caption+thead tr:first-child th,table.collection caption+thead tr:first-child td,table.collection colgroup+thead tr:first-child th,table.collection colgroup+thead tr:first-child td,table.collection thead:first-child tr:first-child th,table.collection thead:first-child tr:first-child td{border-top:0}table.collection tbody+tbody{border-top:2px solid #ddd}table.collection .table{background-color:#fff}table.collection th,table.collection td{border-left:1px solid #ddd}table.collection caption+thead tr:first-child th,table.collection caption+tbody tr:first-child th,table.collection caption+tbody tr:first-child td,table.collection colgroup+thead tr:first-child th,table.collection colgroup+tbody tr:first-child th,table.collection colgroup+tbody tr:first-child td,table.collection thead:first-child tr:first-child th,table.collection tbody:first-child tr:first-child th,table.collection tbody:first-child tr:first-child td{border-top:0}table.collection thead:first-child tr:first-child>th:first-child,table.collection tbody:first-child tr:first-child>td:first-child,table.collection tbody:first-child tr:first-child>th:first-child{-webkit-border-top-left-radius:4px;border-top-left-radius:4px;-moz-border-radius-topleft:4px}table.collection thead:first-child tr:first-child>th:last-child,table.collection tbody:first-child tr:first-child>td:last-child,table.collection tbody:first-child tr:first-child>th:last-child{-webkit-border-top-right-radius:4px;border-top-right-radius:4px;-moz-border-radius-topright:4px}table.collection thead:last-child tr:last-child>th:first-child,table.collection tbody:last-child tr:last-child>td:first-child,table.collection tbody:last-child tr:last-child>th:first-child,table.collection tfoot:last-child tr:last-child>td:first-child,table.collection tfoot:last-child tr:last-child>th:first-child{-webkit-border-bottom-left-radius:4px;border-bottom-left-radius:4px;-moz-border-radius-bottomleft:4px}table.collection thead:last-child tr:last-child>th:last-child,table.collection tbody:last-child tr:last-child>td:last-child,table.collection tbody:last-child tr:last-child>th:last-child,table.collection tfoot:last-child tr:last-child>td:last-child,table.collection tfoot:last-child tr:last-child>th:last-child{-webkit-border-bottom-right-radius:4px;border-bottom-right-radius:4px;-moz-border-radius-bottomright:4px}table.collection tfoot+tbody:last-child tr:last-child td:first-child{-webkit-border-bottom-left-radius:0;border-bottom-left-radius:0;-moz-border-radius-bottomleft:0}table.collection tfoot+tbody:last-child tr:last-child td:last-child{-webkit-border-bottom-right-radius:0;border-bottom-right-radius:0;-moz-border-radius-bottomright:0}table.collection caption+thead tr:first-child th:first-child,table.collection caption+tbody tr:first-child td:first-child,table.collection colgroup+thead tr:first-child th:first-child,table.collection colgroup+tbody tr:first-child td:first-child{-webkit-border-top-left-radius:4px;border-top-left-radius:4px;-moz-border-radius-topleft:4px}table.collection caption+thead tr:first-child th:last-child,table.collection caption+tbody tr:first-child td:last-child,table.collection colgroup+thead tr:first-child th:last-child,table.collection colgroup+tbody tr:first-child td:last-child{-webkit-border-top-right-radius:4px;border-top-right-radius:4px;-moz-border-radius-topright:4px}table.collection tbody>tr:nth-child(odd)>td,table.collection tbody>tr:nth-child(odd)>th{background-color:#f9f9f9}table.collection .name{text-align:left;vertical-align:middle}table.collection .awards{width:10%;text-align:center;vertical-align:middle}table.collection .criteria{width:40%;text-align:left;vertical-align:top}table.collection .badgeimage,table.collection .status{width:15%;text-align:center;vertical-align:middle}table.collection .description{width:25%;text-align:left}table.collection .actions{width:11em;text-align:center;vertical-align:middle}a.criteria-action{float:right;padding:0 3px}table.issuedbadgebox{width:750px;background-color:#fff}table.badgeissuedimage{width:150px;text-align:center}table.badgeissuedinfo{width:600px}table.badgeissuedinfo .bvalue{text-align:left;vertical-align:middle}table.badgeissuedinfo .bfield{width:125px;font-style:italic;text-align:left}ul.badges{margin:0;list-style:none}.badges li{position:relative;display:inline-block;width:150px;padding-bottom:2em;text-align:center;vertical-align:top}.badges li .badge-name{display:block;padding:5px}.badges li>img{position:absolute}.badges li .badge-image{top:0;left:10px;z-index:1;width:90px;height:90px}.badges li .badge-actions{position:relative}div.badge{position:relative;display:block}div.badge .expireimage{top:0;left:20px;width:100px;height:100px}.expireimage{position:absolute;top:0;left:30px;z-index:10;width:90px;height:90px;opacity:.85;filter:alpha(opacity=85)}.badge-profile{vertical-align:top}.connected{color:#468847}.notconnected{color:#b94a48}#page-badges-award .recipienttable tr td{vertical-align:top}#page-badges-award .recipienttable tr td.actions .actionbutton{width:100%;padding:.5em 0;margin:.3em 0}#page-badges-award .recipienttable tr td.existing,#page-badges-award .recipienttable tr td.potential{width:42%}.statustable{margin-bottom:0}.statusbox.active{background-color:#dff0d8}.statusbox.inactive{background-color:#fcf8e3}.activatebadge{margin:0;text-align:left;vertical-align:middle}.addcourse{float:right}.invisiblefieldset{display:inline;padding:0;margin:0;border-width:0}.breadcrumb-nav{float:left;margin-bottom:10px}.breadcrumb-button .singlebutton div{margin-right:0}.breadcrumb-nav .breadcrumb{margin:0}.formtable tbody th{font-weight:normal;text-align:right}.path-admin #assignrole{width:60%;margin-right:auto;margin-left:auto}.path-admin .admintable .leftalign{text-align:left}.environmenttable p.warn{color:#c09853;background-color:#fcf8e3}.environmenttable .error,.environmenttable span.warn,.environmenttable .ok{display:inline-block;padding:2px 4px;font-size:11.844px;font-weight:bold;line-height:14px;color:#fff;text-shadow:0 -1px 0 rgba(0,0,0,0.25);white-space:nowrap;vertical-align:baseline;background-color:#999;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px}.environmenttable .error:empty,.environmenttable span.warn:empty,.environmenttable .ok:empty{display:none}.environmenttable .error-important,.environmenttable span.warn-important,.environmenttable .ok-important{background-color:#b94a48}.environmenttable .error-important[href],.environmenttable span.warn-important[href],.environmenttable .ok-important[href]{background-color:#953b39}.environmenttable .error-warning,.environmenttable span.warn-warning,.environmenttable .ok-warning{background-color:#f89406}.environmenttable .error-warning[href],.environmenttable span.warn-warning[href],.environmenttable .ok-warning[href]{background-color:#c67605}.environmenttable .error-success,.environmenttable span.warn-success,.environmenttable .ok-success{background-color:#468847}.environmenttable .error-success[href],.environmenttable span.warn-success[href],.environmenttable .ok-success[href]{background-color:#356635}.environmenttable .error-info,.environmenttable span.warn-info,.environmenttable .ok-info{background-color:#3a87ad}.environmenttable .error-info[href],.environmenttable span.warn-info[href],.environmenttable .ok-info[href]{background-color:#2d6987}.environmenttable .error-inverse,.environmenttable span.warn-inverse,.environmenttable .ok-inverse{background-color:#333}.environmenttable .error-inverse[href],.environmenttable span.warn-inverse[href],.environmenttable .ok-inverse[href]{background-color:#1a1a1a}.environmenttable .error{background-color:#b94a48}.environmenttable span.warn{background-color:#f89406}.environmenttable .ok{background-color:#468847}.path-admin .admintable.environmenttable .name,.path-admin .admintable.environmenttable .info,.path-admin #assignrole .admintable .role,.path-admin #assignrole .admintable .userrole,.path-admin #assignrole .admintable .roleholder{white-space:nowrap}.path-admin .incompatibleblockstable td.c0{font-weight:bold}#page-admin-course-category .addcategory{padding:10px}#page-admin-course-index .editcourse{margin:20px auto}#page-admin-course-index .editcourse th,#page-admin-course-index .editcourse td{padding-right:10px;padding-left:10px}.timewarninghidden{display:none}.statusok,.statuswarning,.statusserious,.statuscritical{display:inline-block;padding:2px 4px;font-size:11.844px;font-weight:bold;line-height:14px;color:#fff;text-shadow:0 -1px 0 rgba(0,0,0,0.25);white-space:nowrap;vertical-align:baseline;background-color:#999;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px}.statusok:empty,.statuswarning:empty,.statusserious:empty,.statuscritical:empty{display:none}.statusok-important,.statuswarning-important,.statusserious-important,.statuscritical-important{background-color:#b94a48}.statusok-important[href],.statuswarning-important[href],.statusserious-important[href],.statuscritical-important[href]{background-color:#953b39}.statusok-warning,.statuswarning-warning,.statusserious-warning,.statuscritical-warning{background-color:#f89406}.statusok-warning[href],.statuswarning-warning[href],.statusserious-warning[href],.statuscritical-warning[href]{background-color:#c67605}.statusok-success,.statuswarning-success,.statusserious-success,.statuscritical-success{background-color:#468847}.statusok-success[href],.statuswarning-success[href],.statusserious-success[href],.statuscritical-success[href]{background-color:#356635}.statusok-info,.statuswarning-info,.statusserious-info,.statuscritical-info{background-color:#3a87ad}.statusok-info[href],.statuswarning-info[href],.statusserious-info[href],.statuscritical-info[href]{background-color:#2d6987}.statusok-inverse,.statuswarning-inverse,.statusserious-inverse,.statuscritical-inverse{background-color:#333}.statusok-inverse[href],.statuswarning-inverse[href],.statusserious-inverse[href],.statuscritical-inverse[href]{background-color:#1a1a1a}.statusok{background-color:#468847}.statuswarning{background-color:#c09853}.statusserious{background-color:#f89406}.statuscritical{background-color:#b94a48}#page-admin-report-capability-index #capabilitysearch{width:30em}#page-admin-report-backups-index .backup-error,#page-admin-report-backups-index .backup-unfinished{color:#b94a48}#page-admin-report-backups-index .backup-skipped,#page-admin-report-backups-index .backup-ok{color:#468847}#page-admin-report-backups-index .backup-warning{color:#c09853}#page-admin-qtypes .disabled,#page-admin-qbehaviours .disabled{color:#999}#page-admin-qtypes #qtypes div,#page-admin-qtypes #qtypes form,#page-admin-qbehaviours #qbehaviours div,#page-admin-qbehaviours #qbehaviours form{display:inline}#page-admin-qtypes #qtypes img.spacer,#page-admin-qbehaviours #qbehaviours img.spacer{width:16px}img.iconsmall{padding:.3em;margin:0}#page-admin-qbehaviours .cell.c3,#page-admin-qtypes .cell.c3{font-size:10.5px}#page-admin-lang .generalbox,#page-admin-course-index .singlebutton,#page-admin-course-index .addcategory,#page-course-index .buttons,#page-course-index-category .buttons,#page-admin-course-category .addcategory,#page-admin-stickyblocks .generalbox,#page-admin-maintenance .buttons,#page-admin-course-index .buttons,#page-admin-course-category .buttons,#page-admin-index .copyright,#page-admin-index .copyrightnotice,#page-admin-index .adminerror,#page-admin-index .availableupdatesinfo,#page-admin-index .adminerror .singlebutton,#page-admin-index .adminwarning .singlebutton,#page-admin-index #layout-table .singlebutton{margin-bottom:1em;text-align:center}.path-admin-roles .capabilitysearchui{margin-right:auto;margin-left:auto;text-align:left}#page-admin-roles-define .topfields{margin:1em 0 2em}#page-admin-roles-define .capdefault{background-color:#eee;border:1px solid #cecece}#page-filter-manage .backlink,.path-admin-roles .backlink{margin-top:1em}#page-admin-roles-explain #chooseuser h3,#page-admin-roles-usersroles .contextname{margin-top:0}#page-admin-roles-explain #chooseusersubmit{margin-top:0;text-align:center}#page-admin-roles-usersroles p{margin:0}#page-admin-roles-override .cell.c1,#page-admin-roles-assign .cell.c3,#page-admin-roles-assign .cell.c1{padding-top:.75em}#page-admin-roles-override .overridenotice,#page-admin-roles-define .definenotice{margin:1em 10% 2em 10%;text-align:left}#notice{width:60%;min-width:220px;margin:auto}#page-admin-index .releasenoteslink,#page-admin-index .adminwarning,#page-admin-index .maturitywarning,#page-admin-index .maturityinfo{width:60%;min-width:220px;padding:8px 35px 8px 14px;margin:auto;margin-bottom:20px;color:#c09853;text-shadow:0 1px 0 rgba(255,255,255,0.5);background-color:#fcf8e3;border:1px solid #fbeed5;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px}#page-admin-index .maturitywarning,#page-admin-index .adminwarning.maturityinfo.maturity50{color:#b94a48;background-color:#f2dede;border-color:#eed3d7}#page-admin-index .adminwarning.availableupdatesinfo,#page-admin-index .releasenoteslink{color:#3a87ad;background-color:#d9edf7;border-color:#bce8f1}#page-admin-index .adminwarning.availableupdatesinfo .moodleupdateinfo span{display:block}#page-admin-index .updateplugin div,#page-admin-plugins .updateplugin div{margin-bottom:.5em}#page-admin-index .updateplugin .updatepluginconfirmexternal,#page-admin-plugins .updateplugin .updatepluginconfirmexternal{padding:1em;background-color:#f2dede;border:1px solid #eed3d7}#page-admin-user-user_bulk #users .fgroup{white-space:nowrap}#page-admin-report-stats-index .graph{margin-bottom:1em;text-align:center}#page-admin-report-courseoverview-index .graph{margin-bottom:1em;text-align:center}#page-admin-lang .translator{border-style:solid;border-width:1px}.path-admin .roleassigntable{width:100%}.path-admin .roleassigntable td{padding:.2em .3em;vertical-align:top}.path-admin .roleassigntable p{margin:.2em 0;text-align:left}.path-admin .roleassigntable #existingcell,.path-admin .roleassigntable #potentialcell{width:42%}.path-admin .roleassigntable #existingcell p>label:first-child,.path-admin .roleassigntable #potentialcell p>label:first-child{font-weight:bold}.path-admin .roleassigntable #buttonscell{width:16%}.path-admin .roleassigntable #buttonscell #assignoptions{font-size:10.5px}.path-admin .roleassigntable #removeselect_wrapper,.path-admin .roleassigntable #addselect_wrapper{width:100%}.path-admin table.rolecap tr.rolecap th{font-weight:normal;text-align:left}.path-admin.dir-rtl table.rolecap tr.rolecap th{text-align:right}.path-admin .rolecap .hiddenrow{display:none}.path-admin #defineroletable .rolecap .inherit,.path-admin #defineroletable .rolecap .allow,.path-admin #defineroletable .rolecap .prevent,.path-admin #defineroletable .rolecap .prohibit{min-width:3.5em;padding:0;text-align:center}.path-admin .rolecap .cap-name,.path-admin .rolecap .note{display:block;font-size:10.5px;font-weight:normal;white-space:nowrap}.path-admin .rolecap label{display:block;padding:.5em;margin:0;text-align:center}.plugincheckwrapper{width:100%}.environmentbox{margin-top:1em}#mnetconfig table{margin-right:auto;margin-left:auto}.environmenttable .cell{padding:.15em .5em}.environmenttable img.iconhelp{padding-right:.3em}.dir-rtl .environmenttable img.iconhelp{padding-right:0;padding-left:.3em}#trustedhosts .generaltable{width:500px;margin-right:auto;margin-left:auto}#trustedhosts .standard{width:auto}#adminsettings legend{display:none}#adminsettings fieldset.error{margin:.2em 0 .5em 0}#adminsettings fieldset.error legend{display:block}.dir-rtl #admin-spelllanguagelist textarea,#page-admin-setting-editorsettingstinymce.dir-rtl .form-textarea textarea{text-align:left;direction:ltr}.form-item .form-setting .form-htmlarea{display:inline;width:640px}.form-item .form-setting .form-htmlarea .htmlarea{display:block;width:640px}.form-item .form-setting .form-multicheckbox ul{padding:0;margin:7px 0 0 0;list-style:none}.form-item .form-setting .defaultsnext{display:inline;margin-right:.5em}.dir-rtl .form-item .form-setting .defaultsnext{margin-right:0;margin-left:.5em}.form-item .form-setting .locked-checkbox{display:inline;margin-right:.2em;margin-left:.5em}.dir-rtl .form-item .form-setting .locked-checkbox{display:inline;margin-right:.5em;margin-left:.2em}.form-item .form-setting .form-password .unmask,.form-item .form-setting .form-defaultinfo{display:inline-block}.form-item .pathok,.form-item .patherror{margin-left:.5em}#admin-devicedetectregex table{border:0}#admin-emoticons td input{width:8em}#admin-emoticons td.c0 input{width:4em}#adminthemeselector .selectedtheme td.c0{border:1px solid;border-right-width:0}#adminthemeselector .selectedtheme td.c1{border:1px solid;border-left-width:0}.admin_colourpicker,.admin_colourpicker_preview{display:none}.jsenabled .admin_colourpicker_preview{display:inline}.jsenabled .admin_colourpicker{display:block;width:410px;height:102px;margin-bottom:10px}.admin_colourpicker .loadingicon{margin-left:auto;vertical-align:middle}.admin_colourpicker .colourdialogue{float:left;border:1px solid #000}.admin_colourpicker .previewcolour{margin-left:301px;border:1px solid #000}.admin_colourpicker .currentcolour{margin-left:301px;border:1px solid #000;border-top-width:0}.dir-rtl .form-item .form-setting,.dir-rtl .form-item .form-label,.dir-rtl .form-item .form-description,.dir-rtl.path-admin .roleassigntable p{text-align:right}#page-admin-index #notice .checkforupdates{text-align:center}#plugins-check-info{margin:1em;text-align:center}#plugins-check .displayname .pluginicon{width:16px}#plugins-check .status-new .status{background-color:#dff0d8}#page-admin-index .adminwarning.availableupdatesinfo .moodleupdateinfo.maturity200 .info.release,#plugins-check .status-upgrade .status,#plugins-check .status-delete .status{background-color:#d9edf7}#plugins-control-panel .extension .source,#page-admin-index .adminwarning.availableupdatesinfo .moodleupdateinfo.maturity100 .info.release,#page-admin-index .adminwarning.availableupdatesinfo .moodleupdateinfo.maturity150 .info.release,.pluginupdateinfo.maturity100,.pluginupdateinfo.maturity150,#plugins-check .extension .source{background-color:#fcf8e3}#page-admin-index .adminwarning.availableupdatesinfo .moodleupdateinfo.maturity50 .info.release,.pluginupdateinfo.maturity50,#plugins-check .requires-failed,#plugins-check .missingfromdisk .displayname,#plugins-check .status-missing .status,#plugins-check .status-downgrade .status{background-color:#f2dede}#plugins-control-panel .statusmsg{padding:3px;background-color:#eee;-webkit-border-radius:5px;-moz-border-radius:5px;border-radius:5px}#plugins-control-panel .status-missing .pluginname{background-color:#f2dede}#plugins-control-panel .status-missing .statusmsg{color:#b94a48}#plugins-control-panel .status-new .pluginname{background-color:#dff0d8}#plugins-control-panel .status-new .statusmsg{color:#468847}#plugins-control-panel .disabled .availability{background-color:#eee}#plugins-check .standard .source,#plugins-check .status-nodb .status,#plugins-check .status-uptodate .status,#plugins-check .requires-ok{color:#999}#plugins-check .requires ul{margin:0;font-size:10.5px}#plugins-check .status .pluginupdateinfo{padding:5px 10px;margin:10px;background-color:#d9edf7;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px}#plugins-check .status .pluginupdateinfo span,#plugins-check .status .pluginupdateinfo a{padding-right:1em}#page-admin-index .upgradepluginsinfo{text-align:center}#page-admin-plugins .checkforupdates{margin:0 auto 1em;text-align:center}#plugins-control-panel .requiredby,#plugins-control-panel .pluginname .componentname{font-size:11.9px;color:#999}#plugins-control-panel .pluginname .componentname{margin-left:22px}#plugins-overview-filter .filter-item,#plugins-overview-panel .info{padding:0 10px}#page-admin-index .adminwarning.availableupdatesinfo .moodleupdateinfo .separator,#plugins-check .status .pluginupdateinfo .separator,#page-admin-plugins .separator{border-left:1px dotted #999}#plugins-control-panel .msg td{text-align:center}#plugins-overview-filter,#plugins-overview-panel{margin:1em auto;text-align:center}#plugins-overview-panel .info.updatable{margin-left:10px;font-weight:bold;background-color:#d9edf7;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px}#plugins-overview-filter .filter-item.active{font-weight:bold}#plugins-control-panel .displayname img.icon{padding-top:0;padding-bottom:0}#plugins-control-panel .uninstall a{color:#b94a48}#plugins-control-panel .notes .pluginupdateinfo{padding:5px 10px;margin:10px;background-color:#d9edf7;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px}#plugins-control-panel .notes .pluginupdateinfo span,#plugins-control-panel .notes .pluginupdateinfo a{padding-right:1em}.dir-rtl #plugins-check .pluginupdateinfo{text-align:center;direction:ltr}.dir-rtl #plugins-check .rootdir,.dir-rtl #plugins-check .requires-ok{text-align:left;direction:ltr}#page-admin-mnet-peers .box.deletedhosts{margin-bottom:1em;font-size:11.9px}#page-admin-mnet-peers .mform .certdetails{background-color:white}#page-admin-mnet-peers .mform .deletedhostinfo{padding:4px;margin-bottom:5px;background-color:#f2dede;border:2px solid #eed3d7}#core-cache-plugin-summaries table,#core-cache-store-summaries table{width:100%}#core-cache-lock-summary table,#core-cache-definition-summaries table,#core-cache-mode-mappings table{margin:0 auto}#core-cache-store-summaries .default-store td{font-style:italic;color:#333}#core-cache-rescan-definitions,#core-cache-mode-mappings .edit-link,#core-cache-lock-summary .new-instance{margin-top:.5em;text-align:center}.tinymcesubplugins img.icon{padding-top:0;padding-bottom:0}#page-admin-roles-assign div.box.generalbox{padding:8px 35px 8px 14px;margin-bottom:20px;color:#c09853;color:#b94a48;text-shadow:0 1px 0 rgba(255,255,255,0.5);background-color:#fcf8e3;background-color:#f2dede;border:1px solid #fbeed5;border-color:#eed3d7;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px}.calendartable{width:100%}.calendartable th,.calendartable td{width:14%;text-align:center;vertical-align:top;border:0}.calendar_event_course{background-color:#ffd3bd}.calendar_event_global{background-color:#d6f8cd}.calendar_event_group{background-color:#fee7ae}.calendar_event_user{background-color:#dce7ec}.path-calendar .calendar-controls .previous,.path-calendar .calendar-controls .next,.path-calendar .calendar-controls .current{display:block;float:left;width:12%}.path-calendar .calendar-controls .previous{text-align:left}.path-calendar .calendar-controls .current{width:76%;text-align:center}.path-calendar .calendar-controls .next{text-align:right}.path-calendar .maincalendar{padding:0;vertical-align:top}.path-calendar .maincalendar .bottom{padding:5px 0 0 0;text-align:center}.path-calendar .maincalendar .heightcontainer{position:relative;height:100%}.path-calendar .maincalendar .calendarmonth{width:98%;margin:10px auto}.path-calendar .maincalendar .calendarmonth ul{margin:0}.path-calendar .maincalendar .calendarmonth ul li{margin-top:4px;list-style-type:none}.path-calendar .maincalendar .calendarmonth td{height:5em}.path-calendar .maincalendar .calendar-controls .previous,.path-calendar .maincalendar .calendar-controls .next{width:30%}.path-calendar .maincalendar .calendar-controls .current{width:39.95%}.path-calendar .maincalendar .controls{width:98%;margin:10px auto}.path-calendar .maincalendar .eventlist .event{width:100%;margin-bottom:10px;border-collapse:separate;border-spacing:0;border-style:solid;border-width:1px}.path-calendar .maincalendar .eventlist .event .topic .name{float:left}.dir-rtl.path-calendar .maincalendar .eventlist .event .topic .name,.path-calendar .maincalendar .eventlist .event .topic .date{float:right}.dir-rtl.path-calendar .maincalendar .eventlist .event .topic .date{float:left}.path-calendar .maincalendar .eventlist .event .subscription,.path-calendar .maincalendar .eventlist .event .course{float:left;clear:left}.dir-rtl.path-calendar .maincalendar .eventlist .event .subscription,.dir-rtl.path-calendar .maincalendar .eventlist .event .course{float:right;clear:right}.path-calendar .maincalendar .eventlist .event .side{width:32px}.path-calendar .maincalendar .eventlist .event .commands a{margin:0 3px}.path-calendar .maincalendar .header{overflow:hidden}.path-calendar .maincalendar .header .buttons{float:right}.dir-rtl.path-calendar .maincalendar .header .buttons{float:left}.path-calendar .filters table{width:100%;border-collapse:separate;border-spacing:2px}#page-calendar-export .indent{padding-left:20px}.path-calendar .cal_courses_flt label{margin-right:.45em}.dir-rtl.path-calendar .cal_courses_flt label{margin-right:0;margin-left:.45em}.block .minicalendar th,.block .minicalendar td{padding:2px;font-size:.8em}.block .minicalendar{max-width:280px;margin-right:auto;margin-left:auto}.block .minicalendar td.weekend{color:#A00}.block .calendar-controls .previous{display:block;float:left;width:12%;text-align:left}.block .calendar-controls .current{display:block;float:left;width:76%;text-align:center}.block .calendar-controls .next{display:block;float:left;width:12%;text-align:right}.block .calendar_filters ul{margin:0;list-style:none}.block .calendar_filters li{margin-bottom:.2em}.block .calendar_filters li span img{padding:0 .2em}.block .calendar_filters .eventname{padding-left:.2em}.dir-rtl .block .calendar_filters .eventname{padding-right:.2em;padding-left:0}.block .content h3.eventskey{margin-top:.5em}@media(min-width:768px){#page-calender-view .container fluid{min-width:1024px}}.section_add_menus{text-align:right}.dir-rtl .section_add_menus{text-align:left}.section_add_menus .horizontal div,.section_add_menus .horizontal form{display:inline}.section_add_menus optgroup{font-style:italic;font-weight:normal}.section_add_menus .urlselect{margin-left:.4em}.dir-rtl .section_add_menus .urlselect{margin-right:.4em;margin-left:0}.section_add_menus .urlselect select{margin-left:.2em}.dir-rtl .section_add_menus .urlselect select{margin-right:.2em;margin-left:0}.section_add_menus .urlselect img.iconhelp{padding:0;margin:0;vertical-align:text-bottom}.site-topic ul.section,.course-content ul.section{margin:1em}.section .activity img.activityicon{margin-right:6px;vertical-align:text-bottom}.dir-rtl .section .activity img.activityicon{margin-right:0;margin-left:6px}.section .activity .activityinstance,.section .activity .activityinstance div{display:inline-block}.editing .section .activity .activityinstance{min-width:40%}.section .activity .activityinstance>a{display:block}.editing_show+.editing_assign,.editing_hide+.editing_assign{margin-left:20px}.section .activity .commands{display:inline;white-space:nowrap}.section .activity.modtype_label .commands{padding-left:22px;margin-left:40%}.section .activity.modtype_label.label{font-weight:normal}.section li.activity{padding:.2em;clear:both}.section .activity .activityinstance .groupinglabel{padding-left:30px}.dir-rtl .section .activity .activityinstance .groupinglabel{padding-right:30px}.section .activity .availabilityinfo,.section .activity .contentafterlink{margin-top:.5em;margin-left:30px}.dir-rtl .section .activity .availabilityinfo,.dir-rtl .section .activity .contentafterlink{margin-right:30px;margin-left:0}.section .activity .contentafterlink p{margin:.5em 0}.editing .section .activity:hover{background-color:#eee}.course-content .current{background-color:#d9edf7}.course-content .section-summary{margin-top:5px;list-style:none;border:1px solid #DDD}.course-content .section-summary .section-title{margin:2px 5px 10px 5px}.course-content .section-summary .summarytext{margin:2px 5px 2px 5px}.course-content .section-summary .section-summary-activities .activity-count{display:inline-block;margin:3px;font-size:11.9px;color:#999;white-space:nowrap}.course-content .section-summary .summary{margin-top:5px}.course-content .single-section{margin-top:1em}.course-content .single-section .section-navigation{display:block;padding:.5em;margin-bottom:-0.5em}.course-content .single-section .section-navigation .title{clear:both;font-size:108%;font-weight:bold}.course-content .single-section .section-navigation .mdl-left{float:left;margin-right:1em;font-weight:normal}.dir-rtl .course-content .single-section .section-navigation .mdl-left{float:right}.course-content .single-section .section-navigation .mdl-left .larrow{margin-right:.1em}.course-content .single-section .section-navigation .mdl-right{float:right;margin-left:1em;font-weight:normal}.dir-rtl .course-content .single-section .section-navigation .mdl-right{float:left}.course-content .single-section .section-navigation .mdl-right .rarrow{margin-left:.1em}.course-content .single-section .section-navigation .mdl-bottom{margin-top:0}.course-content ul li.section.main{margin-top:0;border-bottom:2px solid #eee}.course-content ul li.section.hidden{opacity:.5}.course-content ul.topics li.section .content,.course-content ul.weeks li.section .content{padding:0;margin-right:20px;margin-left:20px}.course-content{margin-top:0}.course-content ul.topics li.section{padding-bottom:20px}.course-content ul.topics li.section .summary{margin-left:25px}.path-course-view .completionprogress{margin-left:25px}.path-course-view .completionprogress{position:relative;z-index:1000;display:block;float:right;height:20px}#page-site-index .subscribelink{text-align:right}#page-site-index .headingblock{margin-bottom:9px}.path-course-view a.reduce-sections{padding-left:.2em}.path-course-view .headingblock{margin-bottom:9px}.path-course-view .subscribelink{text-align:right}.path-course-view .unread{margin-left:30px}.dir-rtl.path-course-view .unread{margin-right:30px}.path-course-view .block.drag .header{cursor:move}.path-course-view .completionprogress{text-align:right}.dir-rtl.path-course-view .completionprogress{text-align:left}.path-course-view .single-section .completionprogress{margin-right:5px}.path-course-view .section .summary{line-height:normal}.path-site li.activity>div,.path-course-view li.activity>div{position:relative}.path-course-view li.activity span.autocompletion,.path-course-view li.activity form.togglecompletion{float:right}.path-course-view li.activity form.togglecompletion .ajaxworking{width:16px;height:16px;background:url([[pix:i/ajaxloader]]) no-repeat}.dir-rtl.path-course-view li.activity form.togglecompletion,.dir-rtl.path-course-view li.activity span.autocompletion{float:left}.dir-rtl.path-course-view .completionprogress{float:none}.dir-rtl.path-course-view li.activity form.togglecompletion .ajaxworking{right:-22px}li.section.hidden span.commands a.editing_hide,li.section.hidden span.commands a.editing_show{cursor:default}ul.weeks h3.sectionname{white-space:nowrap}.editing ul.weeks h3.sectionname{white-space:normal}.section img.movetarget{width:80px;height:16px}input.titleeditor{width:330px;vertical-align:text-bottom}span.editinstructions{position:absolute;top:0;left:0;z-index:9999;padding:.1em .4em;margin-top:-22px;margin-left:30px;font-size:11.9px;line-height:16px;color:#3a87ad;text-decoration:none;background-color:#d9edf7;border:1px solid #bce8f1;-webkit-box-shadow:2px 2px 5px 1px #ccc;-moz-box-shadow:2px 2px 5px 1px #ccc;box-shadow:2px 2px 5px 1px #ccc}.dir-rtl span.editinstructions{right:32px;left:auto}#dndupload-status{position:absolute;z-index:9999;z-index:0;width:40%;padding:6px;margin:0 30%;color:#3a87ad;text-align:center;background:#d9edf7;border:1px solid #bce8f1;-webkit-border-bottom-right-radius:8px;border-bottom-right-radius:8px;-webkit-border-bottom-left-radius:8px;border-bottom-left-radius:8px;-moz-border-radius-bottomright:8px;-moz-border-radius-bottomleft:8px;-webkit-box-shadow:2px 2px 5px 1px #ccc;-moz-box-shadow:2px 2px 5px 1px #ccc;box-shadow:2px 2px 5px 1px #ccc}.dndupload-preview{padding:.3em;margin-top:.2em;color:#909090;list-style:none;border:1px dashed #909090}.dndupload-preview img.icon{padding:0;vertical-align:text-bottom}.dndupload-progress-outer{height:20px;margin-bottom:20px;overflow:hidden;background-color:#f7f7f7;background-image:-moz-linear-gradient(top,#f5f5f5,#f9f9f9);background-image:-webkit-gradient(linear,0 0,0 100%,from(#f5f5f5),to(#f9f9f9));background-image:-webkit-linear-gradient(top,#f5f5f5,#f9f9f9);background-image:-o-linear-gradient(top,#f5f5f5,#f9f9f9);background-image:linear-gradient(to bottom,#f5f5f5,#f9f9f9);background-repeat:repeat-x;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#fff5f5f5',endColorstr='#fff9f9f9',GradientType=0);-webkit-box-shadow:inset 0 1px 2px rgba(0,0,0,0.1);-moz-box-shadow:inset 0 1px 2px rgba(0,0,0,0.1);box-shadow:inset 0 1px 2px rgba(0,0,0,0.1)}.dndupload-progress-inner{float:left;width:0;height:100%;font-size:12px;color:#fff;text-align:center;text-shadow:0 -1px 0 rgba(0,0,0,0.25);background-color:#0e90d2;background-image:-moz-linear-gradient(top,#149bdf,#0480be);background-image:-webkit-gradient(linear,0 0,0 100%,from(#149bdf),to(#0480be));background-image:-webkit-linear-gradient(top,#149bdf,#0480be);background-image:-o-linear-gradient(top,#149bdf,#0480be);background-image:linear-gradient(to bottom,#149bdf,#0480be);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ff149bdf',endColorstr='#ff0480be',GradientType=0);-webkit-box-shadow:inset 0 -1px 0 rgba(0,0,0,0.15);-moz-box-shadow:inset 0 -1px 0 rgba(0,0,0,0.15);box-shadow:inset 0 -1px 0 rgba(0,0,0,0.15);-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;-webkit-transition:width .6s ease;-moz-transition:width .6s ease;-o-transition:width .6s ease;transition:width .6s ease}.dndupload-hidden{display:none}#page-course-pending .singlebutton,#page-course-index .singlebutton,#page-course-index-category .singlebutton,#page-course-editsection .singlebutton{text-align:center}#page-admin-course-manage #movecourses td img{margin:0 .22em;vertical-align:text-bottom}#page-admin-course-manage #movecourses td img.icon{padding:0}#coursesearch{margin-top:1em;text-align:center}#page-course-pending .pendingcourserequests{margin-bottom:1em}#page-course-pending .pendingcourserequests .singlebutton{display:inline}#page-course-pending .pendingcourserequests .cell{padding:0 5px}#page-course-pending .pendingcourserequests .cell.c6{white-space:nowrap}.coursebox{padding:5px;margin-bottom:15px;border:1px dotted #ddd;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px}.coursebox>.info>.name a{display:block;padding-left:21px;background-image:url([[pix:moodle|i/course]]);background-position:center left;background-repeat:no-repeat}.coursebox.remotehost>.info>.name a{background-image:url([[pix:moodle|i/mnethost]])}.coursebox>.info>.name,.coursebox .content .teachers,.coursebox .content .courseimage,.coursebox .content .coursefile{float:left;width:40%;clear:left}.coursebox>.info>h3.name{margin:5px}.coursebox>.info>.name{padding:0;margin:5px}.coursebox .content .teachers li{padding:0;margin:0;list-style-type:none}.coursebox .enrolmenticons{float:right;padding:3px 0}.coursebox .moreinfo{float:right;padding:3px 0}.coursebox .enrolmenticons img,.coursebox .moreinfo img{margin:0 .2em}.coursebox .content{clear:both}.coursebox .content .summary,.coursebox .content .coursecat{float:right;width:55%}.coursebox .content .coursecat{clear:right;text-align:right}.coursebox.remotecoursebox .remotecourseinfo{float:left;width:40%}.coursebox .content .courseimage img{max-width:100px;max-height:100px}.coursebox .content .coursecat,.coursebox .content .summary,.coursebox .content .courseimage,.coursebox .content .coursefile,.coursebox .content .teachers,.coursebox.remotecoursebox .remotecourseinfo{padding:0;margin:3px 5px}.dir-rtl .coursebox>.info>.name a{padding-right:21px;padding-left:0;background-position:center right}.dir-rtl .coursebox>.info>.name,.dir-rtl .coursebox .teachers,.dir-rtl .coursebox .content .courseimage,.dir-rtl .coursebox .content .coursefile{float:right;clear:right}.dir-rtl .coursebox .enrolmenticons,.dir-rtl .coursebox .moreinfo{float:left}.dir-rtl .coursebox .summary,.dir-rtl .coursebox .coursecat{float:left}.dir-rtl .coursebox .coursecat{clear:left;text-align:left}.coursebox.collapsed{margin-bottom:0}.coursebox.collapsed>.content{display:none}.courses .coursebox.collapsed{padding:3px 0;border:1px solid #eee}.courses .coursebox.even{background-color:#f6f6f6}.courses .coursebox:hover,.course_category_tree .courses>.paging.paging-morelink:hover{background-color:#eee}.course_category_tree .category .numberofcourse{font-size:11.9px}.course_category_tree .controls{visibility:hidden}.course_category_tree .controls div{display:inline;cursor:pointer}.jsenabled .course_category_tree .controls{visibility:visible}.course_category_tree .controls{float:right;margin-bottom:5px;text-align:right}.course_category_tree .controls div{padding-right:2em;font-size:75%}.course_category_tree .category>.info .name{padding:2px 18px;margin:3px;background-image:url([[pix:moodle|t/collapsed_empty]]);background-position:center left;background-repeat:no-repeat}.dir-rtl .course_category_tree .category>.info .name{background-image:url([[pix:moodle|t/collapsed_empty_rtl]]);background-position:center right}.course_category_tree .category.with_children>.info .name{background-image:url([[pix:moodle|t/expanded]])}.course_category_tree .category.with_children.collapsed>.info .name{background-image:url([[pix:moodle|t/collapsed]])}.dir-rtl .course_category_tree .category.with_children.collapsed>.info .name{background-image:url([[pix:moodle|t/collapsed_rtl]])}.course_category_tree .category.collapsed>.content{display:none}.course_category_tree .category>.info{min-height:20px;min-height:0;padding:19px;padding:0;margin:3px 0;margin-bottom:20px;margin-bottom:3px;background-color:#f5f5f5;border:1px solid #e3e3e3;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,0.05);-moz-box-shadow:inset 0 1px 1px rgba(0,0,0,0.05);box-shadow:inset 0 1px 1px rgba(0,0,0,0.05)}.course_category_tree .category>.info blockquote{border-color:#ddd;border-color:rgba(0,0,0,0.15)}.course_category_tree.frontpage-category-names .category>.info{margin:0;background:0;border:0}.course_category_tree .category>.content{padding-left:16px}.dir-rtl .course_category_tree .category>.content{padding-right:16px;padding-left:0}.course_category_tree .subcategories>.paging,.courses>.paging{padding:5px;margin:0;text-align:center}.courses>.paging.paging-morelink,.course_category_tree .subcategories>.paging.paging-morelink{text-align:left}.course_category_tree .paging.paging-morelink a{font-size:11.9px}.dir-rtl .courses>.paging.paging-morelink,.dir-rtl .course_category_tree .paging.paging-morelink{text-align:right}#page-course-index-category .generalbox.info{padding:5px;margin-bottom:15px;border:1px dotted #ddd;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px}#page-course-index-category .categorypicker{margin:10px 0 20px;text-align:center}.filemanager,.filepicker,.file-picker{font-size:11px}.filemanager a,.file-picker a,.filemanager a:hover,.file-picker a:hover{color:#555;text-decoration:none}.filemanager input[type=\"text\"],.file-picker input[type=\"text\"]{width:265px}.fp-content-center{display:table-cell;width:100%;height:100%;vertical-align:middle}.fp-content-hidden{visibility:hidden}.yui3-panel-focused{outline:0}#filesskin .yui3-panel-content{display:inline-block;*display:inline;padding-bottom:20px;background:#f2f2f2;border:1px solid #fff;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;*zoom:1;-webkit-box-shadow:5px 5px 20px 0 #666;-moz-box-shadow:5px 5px 20px 0 #666;box-shadow:5px 5px 20px 0 #666}#filesskin .yui3-widget-hd{padding:5px;font-size:12px;letter-spacing:1px;color:#333;text-align:center;text-shadow:1px 1px 1px #fff;background-color:#ebebeb;background-image:-moz-linear-gradient(top,#fff,#ccc);background-image:-webkit-gradient(linear,0 0,0 100%,from(#fff),to(#ccc));background-image:-webkit-linear-gradient(top,#fff,#ccc);background-image:-o-linear-gradient(top,#fff,#ccc);background-image:linear-gradient(to bottom,#fff,#ccc);background-repeat:repeat-x;border-bottom:1px solid #bbb;-webkit-border-radius:10px 10px 0 0;-moz-border-radius:10px 10px 0 0;border-radius:10px 10px 0 0;filter:dropshadow(color=#ffffff,offx=1,offy=1);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffffff',endColorstr='#ffcccccc',GradientType=0)}.fp-panel-button{display:inline-block;*display:inline;padding:3px 20px 2px 20px;margin:10px;text-align:center;background:#fff;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;*zoom:1;-webkit-box-shadow:2px 2px 3px .1px #999;-moz-box-shadow:2px 2px 3px .1px #999;box-shadow:2px 2px 3px .1px #999}#filesskin .file-picker.fp-generallayout{position:relative;width:859px;background:#fff;border:1px solid #ccc;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px}.file-picker .fp-repo-area{position:absolute;top:26px;bottom:1px;display:inline-block;*display:inline;width:180px;overflow:auto;border-right:1px solid #bbb;*zoom:1}.dir-rtl .file-picker .fp-repo-area{border-right:0;border-left:1px solid #bbb}.file-picker .fp-repo-items{display:inline-block;*display:inline;margin-left:181px;vertical-align:top;*zoom:1}.file-picker .fp-navbar{min-height:22px;padding:5px 8px;background:#f2f2f2;border-bottom:1px solid #bbb}.file-picker .fp-content{width:678px;height:477px;margin-bottom:-14px;overflow:auto;clear:both;background:#fff}.dir-rtl .file-picker .fp-repo-items{margin-right:181px}.file-picker .fp-content-loading{display:table;width:100%;height:100%;text-align:center}.file-picker .fp-content .fp-object-container{width:98%;height:98%}.dir-rtl .file-picker .fp-list{text-align:right}.dir-rtl .file-picker .fp-toolbar{padding:0}.dir-rtl .file-picker .fp-list{text-align:right}.dir-rtl .file-picker .fp-repo-name{display:inline}.dir-rtl .file-picker .fp-pathbar{display:block;text-align:right;border-top:0}.dir-rtl .file-picker div.bd{text-align:right}.dir-rtl #filemenu .yuimenuitemlabel{text-align:right}.dir-rtl .filepicker .yui-layout-unit-left{left:500px}.dir-rtl .filepicker .yui-layout-unit-center{left:0}.dir-rtl .filemanager-toolbar a{padding:0}.file-picker .fp-list{float:left;width:100%;padding:0;margin:0;list-style-type:none}.dir-rtl .file-picker .fp-list{float:left;text-align:right}.file-picker .fp-list .fp-repo a{display:block;padding:.5em .7em}.file-picker .fp-list .fp-repo.active{background:#f2f2f2}.file-picker .fp-list .fp-repo-icon{padding:0 7px 0 5px}.fp-toolbar{display:table-row;float:left;line-height:22px}.dir-rtl .fp-toolbar{float:right}.fp-toolbar.empty{display:none}.fp-toolbar .disabled{display:none}.fp-toolbar div{display:inline-block;*display:inline;padding:0 2px;padding-right:10px;*zoom:1}.dir-rtl .fp-toolbar div{width:100px}.fp-toolbar img{margin-right:5px;vertical-align:-15%}.fp-toolbar .fp-tb-search{width:228px;height:14px}.fp-toolbar .fp-tb-search input{width:200px;height:16px;padding:2px 6px 1px 20px;background:#fff url('[[pix:a/search]]') no-repeat 3px 3px;border:1px solid #bbb}.fp-viewbar{float:right;width:69px;height:22px;margin-right:8px}.dir-rtl .fp-toolbar img{vertical-align:-35%}.dir-rtl .fp-viewbar{float:left;width:100px}.fp-vb-icons{display:inline-block;*display:inline;width:22px;height:22px;background:url('[[pix:theme|fp/view_icon_active]]') no-repeat 0 0;*zoom:1}.dir-rtl .fp-vb-icons{display:block;float:left;margin-right:4px;background:url('[[pix:theme|fp/view_icon_active]]') no-repeat 0 0}.fp-vb-icons.checked{background:url('[[pix:theme|fp/view_icon_selected]]')}.dir-rtl .fp-vb-icons.checked{display:block;float:left;margin-right:4px;background:url('[[pix:theme|fp/view_icon_selected]]')}.fp-viewbar.disabled .fp-vb-icons{background:url('[[pix:theme|fp/view_icon_inactive]]')}.fp-vb-details{display:inline-block;*display:inline;width:23px;height:22px;margin-left:-4px;background:url('[[pix:theme|fp/view_list_active]]') no-repeat 0 0;*zoom:1}.dir-rtl .fp-vb-details{display:block;float:left;margin-right:4px;background:url('[[pix:theme|fp/view_list_active]]') no-repeat 0 0}.fp-vb-details.checked{background:url('[[pix:theme|fp/view_list_selected]]')}.dir-rtl .fp-vb-details.checked{display:block;float:left;margin-right:4px;background:url('[[pix:theme|fp/view_list_selected]]')}.fp-viewbar.disabled .fp-vb-details{background:url('[[pix:theme|fp/view_list_inactive]]')}.fp-vb-tree{display:inline-block;*display:inline;width:23px;height:22px;margin-left:-4px;background:url('[[pix:theme|fp/view_tree_active]]') no-repeat 0 0;*zoom:1}.dir-rtl .fp-vb-tree{display:block;float:left;margin-right:4px;background:url('[[pix:theme|fp/view_tree_active]]') no-repeat 0 0}.fp-vb-tree.checked{background:url('[[pix:theme|fp/view_tree_selected]]')}.dir-rtl .fp-vb-tree.checked{display:block;float:left;margin-right:4px;background:url('[[pix:theme|fp/view_tree_selected]]')}.fp-viewbar.disabled .fp-vb-tree{background:url('[[pix:theme|fp/view_tree_inactive]]')}.file-picker .fp-clear-left{clear:left}.dir-rtl .filemanager-toolbar .fp-vb-icons a:hover{background:url('[[pix:theme|fp/view_icon_selected]]')}.dir-rtl .filemanager-toolbar .fp-vb-icons.checked a:hover{background:url('[[pix:theme|fp/view_icon_active]]') no-repeat 0 0}.dir-rtl .fp-vb-details a:hover{background:0;border:20px solid black}.dir-rtl .fp-vb-details.checked a:hover{background:0;border:40px solid black}.dir-rtl .fp-vb-tree a:hover{background:0;border:30px solid black}.dir-rtl .fp-vb-tree.checked a:hover{background:0;border:50px solid black}.file-picker .fp-pathbar{display:table-row}.fp-pathbar.empty{display:none}.fp-pathbar .fp-path-folder{width:27px;height:12px;margin-left:4px;background:url('[[pix:theme|fp/path_folder]]') no-repeat 0 0}.dir-rtl .fp-pathbar .fp-path-folder{width:auto;height:12px;margin-left:4px;background:url('[[pix:theme|fp/path_folder_rtl]]') no-repeat right top}.dir-rtl .fp-pathbar span{display:inline-block;*display:inline;float:right;margin-left:32px;*zoom:1}.fp-pathbar .fp-path-folder-name{margin-left:32px;line-height:20px}.dir-rtl .fp-pathbar .fp-path-folder-name{margin-right:32px;line-height:20px}.fp-iconview .fp-file{position:relative;float:left;margin:10px 10px 35px;text-align:center}.fp-iconview .fp-thumbnail{display:block;min-width:110px;min-height:110px;line-height:110px;text-align:center;border:1px solid #fff}.fp-iconview .fp-thumbnail img{padding:3px;vertical-align:middle;border:1px solid #ddd;-webkit-box-shadow:1px 1px 2px 0 #ccc;-moz-box-shadow:1px 1px 2px 0 #ccc;box-shadow:1px 1px 2px 0 #ccc}.fp-iconview .fp-thumbnail:hover{background:#fff;border:1px solid #ddd;-webkit-box-shadow:inset 0 0 10px 0 #ccc;-moz-box-shadow:inset 0 0 10px 0 #ccc;box-shadow:inset 0 0 10px 0 #ccc}.fp-iconview .fp-filename-field{position:absolute;height:33px;overflow:hidden;word-wrap:break-word}.fp-iconview .fp-filename-field:hover{z-index:1000;overflow:visible}.fp-iconview .fp-filename-field .fp-filename{min-width:112px;padding-top:5px;padding-bottom:12px;background:#fff}.dir-rtl .fp-iconview .fp-file{float:right}.file-picker .yui3-datatable table{width:100%;border:0 solid #bbb}#filesskin .file-picker .yui3-datatable-header{color:#555;background:#fff;border-bottom:1px solid #ccc;border-left:0 solid #fff}#filesskin .file-picker .yui3-datatable-odd .yui3-datatable-cell{background-color:#f6f6f6;border-left:0 solid #f6f6f6}#filesskin .file-picker .yui3-datatable-even .yui3-datatable-cell{background-color:#fff;border-left:0 solid #fff}.dir-rtl .file-picker .yui3-datatable-header{text-align:right}.file-picker .ygtvtn,.filemanager .ygtvtn{width:17px;height:22px;background:url('[[pix:moodle|y/tn]]') 0 0 no-repeat}.dir-rtl .file-picker .ygtvtn{width:17px;height:22px;background:url('[[pix:moodle|y/tn_rtl]]') 0 0 no-repeat}.file-picker .ygtvtm,.filemanager .ygtvtm{width:13px;height:12px;cursor:pointer;background:url('[[pix:moodle|y/tm]]') 0 10px no-repeat}.file-picker .ygtvtmh,.filemanager .ygtvtmh{width:13px;height:12px;cursor:pointer;background:url('[[pix:moodle|y/tm]]') 0 10px no-repeat}.file-picker .ygtvtp,.filemanager .ygtvtp{width:13px;height:12px;cursor:pointer;background:url('[[pix:moodle|y/tp]]') 0 10px no-repeat}.dir-rtl .file-picker .ygtvtp,.dir-rtl .filemanager .ygtvtp{background:url('[[pix:moodle|y/tp_rtl]]') 0 10px no-repeat}.file-picker .ygtvtph,.filemanager .ygtvtph{width:13px;height:22px;cursor:pointer;background:url('[[pix:moodle|y/tp]]') 0 10px no-repeat}.dir-rtl .file-picker .ygtvtph,.dir-rtl .filemanager .ygtvtph{background:url('[[pix:moodle|y/tp_rtl]]') 0 10px no-repeat}.file-picker .ygtvln,.filemanager .ygtvln{width:17px;height:22px;background:url('[[pix:moodle|y/ln]]') 0 0 no-repeat}.dir-rtl .file-picker .ygtvln,.dir-rtl .filemanager .ygtvln{background:url('[[pix:moodle|y/ln_rtl]]') 0 0 no-repeat}.file-picker .ygtvlm,.filemanager .ygtvlm{width:13px;height:12px;cursor:pointer;background:url('[[pix:moodle|y/lm]]') 0 10px no-repeat}.file-picker .ygtvlmh,.filemanager .ygtvlmh{width:13px;height:12px;cursor:pointer;background:url('[[pix:moodle|y/lm]]') 0 10px no-repeat}.file-picker .ygtvlp,.filemanager .ygtvlp{width:13px;height:12px;cursor:pointer;background:url('[[pix:moodle|y/lp]]') 0 10px no-repeat}.dir-rtl .file-picker .ygtvlp,.dir-rtl .filemanager .ygtvlp{background:url('[[pix:moodle|y/lp_rtl]]') 0 10px no-repeat}.file-picker .ygtvlph,.filemanager .ygtvlph{width:13px;height:12px;cursor:pointer;background:url('[[pix:moodle|y/lp]]') 0 10px no-repeat}.dir-rtl .file-picker .ygtvlph,.dir-rtl .filemanager .ygtvlph{background:url('[[pix:moodle|y/lp_rtl]]') 0 10px no-repeat}.file-picker .ygtvloading,.filemanager .ygtvloading{width:16px;height:22px;background:transparent url('[[pix:moodle|y/loading]]') 0 0 no-repeat}.file-picker .ygtvdepthcell,.filemanager .ygtvdepthcell{width:17px;height:32px;background:url('[[pix:moodle|y/vline]]') 0 0 no-repeat}.file-picker .ygtvblankdepthcell,.filemanager .ygtvblankdepthcell{width:17px;height:22px}a.ygtvspacer:hover{color:transparent;text-decoration:none}.ygtvlabel,.ygtvlabel:link,.ygtvlabel:visited,.ygtvlabel:hover{margin-left:2px;text-decoration:none;cursor:pointer;background-color:transparent}.file-picker .ygtvfocus,.filemanager .ygtvfocus{background-color:#eee}.fp-filename-icon{position:relative;display:block;margin-top:10px}.fp-icon{float:left;width:24px;height:24px;margin-top:-7px;margin-right:10px;line-height:24px;text-align:center}.dir-rtl .fp-icon{float:right;margin-right:0;margin-left:10px}.fp-icon img{max-width:24px;max-height:24px;vertical-align:middle}.fp-filename{padding-right:10px}.dir-rtl .fp-filename{padding-right:0;padding-left:10px}.file-picker .fp-login-form{display:table;width:100%;height:100%}.file-picker .fp-login-form table{margin:0 auto}.file-picker .fp-login-form p{margin-top:3em;text-align:center}.file-picker .fp-login-form .fp-login-input label{display:block;text-align:right}.file-picker .fp-login-form .fp-login-input .input{text-align:left}.file-picker .fp-login-form input[type=\"checkbox\"]{width:15px;height:15px}.file-picker .fp-upload-form{display:table;width:100%;height:100%}.file-picker .fp-upload-form table{margin:0 auto}.file-picker.fp-dlg{text-align:center}.file-picker.fp-dlg .fp-dlg-text{padding:30px 20px 10px;font-size:12px}.file-picker.fp-dlg .fp-dlg-buttons{margin:0 20px}.file-picker.fp-msg{text-align:center}.file-picker.fp-msg .fp-msg-text{max-width:500px;max-height:300px;min-width:200px;padding:40px 20px 10px 20px;overflow:auto;font-size:12px}.file-picker.fp-msg.fp-msg-error .fp-msg-text{padding:40px 20px 10px 20px;font-size:12px}.file-picker .fp-content-error{display:table;width:100%;height:100%;text-align:center}.file-picker .fp-content-error .fp-error{display:table-cell;width:100%;height:100%;padding:40px 20px 10px 20px;font-size:12px;vertical-align:middle}.file-picker .fp-nextpage{clear:both}.file-picker .fp-nextpage .fp-nextpage-loading{display:none}.file-picker .fp-nextpage.loading .fp-nextpage-link{display:none}.file-picker .fp-nextpage.loading .fp-nextpage-loading{display:block;height:100px;padding-top:50px;text-align:center}.file-picker.fp-select{width:420px}.fp-select form{padding:20px 20px 0}.fp-select .fp-select-loading{margin-top:20px;text-align:center}.fp-select .fp-hr{width:auto;height:1px;margin:10px 0;clear:both;background-color:#fff;border-bottom:1px solid #bbb}.fp-select table{padding:0 0 10px}.fp-select table .mdl-right{min-width:84px}.fp-select .fp-reflist .mdl-right{vertical-align:top}.fp-select .fp-select-buttons{float:right}.fp-select .fp-info{display:block;padding:1px 20px 0;clear:both}.fp-select .fp-thumbnail{float:left;min-width:110px;min-height:110px;margin:10px 20px 0 0;line-height:110px;text-align:center;background:#fff;border:1px solid #ddd;-webkit-box-shadow:inset 0 0 10px 0 #ccc;-moz-box-shadow:inset 0 0 10px 0 #ccc;box-shadow:inset 0 0 10px 0 #ccc}.fp-select .fp-thumbnail img{padding:3px;margin:10px;vertical-align:middle;border:1px solid #ddd}.fp-select .fp-fileinfo{display:inline-block;*display:inline;margin-top:10px;*zoom:1}.file-picker.fp-select .fp-fileinfo{max-width:240px}.fp-select .fp-fileinfo div{padding-bottom:5px}.file-picker.fp-select .uneditable{display:none}.file-picker.fp-select .fp-select-loading{display:none}.file-picker.fp-select.loading .fp-select-loading{display:block}.file-picker.fp-select.loading form{display:none}.fp-select .fp-dimensions.fp-unknown{display:none}.filemanager-loading{display:none}.jsenabled .filemanager-loading{display:block;margin-top:100px}.filemanager.fm-loading .filemanager-toolbar,.filemanager.fm-loading .fp-pathbar,.filemanager.fm-loading .filemanager-container,.filemanager.fm-loaded .filemanager-loading,.filemanager.fm-maxfiles .fp-btn-add,.filemanager.fm-maxfiles .dndupload-message,.filemanager.fm-noitems .fp-btn-download,.filemanager .fm-empty-container,.filemanager.fm-noitems .filemanager-container .fp-content{display:none}.filemanager .filemanager-updating{display:none;text-align:center}.filemanager.fm-updating .filemanager-updating{display:block;margin-top:37px}.filemanager.fm-updating .fm-content-wrapper,.filemanager.fm-nomkdir .fp-btn-mkdir,.fitem.disabled .filemanager .filemanager-toolbar,.fitem.disabled .filemanager .fp-pathbar,.fitem.disabled .filemanager .fp-restrictions,.fitem.disabled .filemanager .fm-content-wrapper{display:none}.fp-restrictions{text-align:right}.filemanager .fp-navbar{background:#f2f2f2;border:1px solid #bbb;border-bottom:0}.filemanager-toolbar{min-height:22px;padding:5px 8px;overflow:hidden}.fp-pathbar{min-height:20px;padding:5px 8px 1px;border-top:1px solid #bbb}.filemanager .fp-pathbar.empty{display:none}.filepicker-filelist,.filemanager-container{position:relative;min-height:140px;overflow:auto;clear:both;background:#fff;border:1px solid #bbb}.filemanager .fp-content{max-height:472px;min-height:157px;overflow:auto}.filemanager-container,.filepicker-filelist{overflow:hidden}.fitem.disabled .filepicker-filelist,.fitem.disabled .filemanager-container{background-color:#ebebe4}.fitem.disabled .fp-btn-choose{color:#999}.fitem.disabled .filepicker-filelist .filepicker-filename{display:none}.fp-iconview .fp-reficons1{position:absolute;top:0;left:0;z-index:1000;width:100%;height:100%}.fp-iconview .fp-reficons2{position:absolute;top:0;left:0;z-index:1001;width:100%;height:100%}.fp-iconview .fp-file.fp-hasreferences .fp-reficons1{background:url('[[pix:theme|fp/link]]') no-repeat;background-position:bottom right}.fp-iconview .fp-file.fp-isreference .fp-reficons2{background:url('[[pix:theme|fp/alias]]') no-repeat;background-position:bottom left}.filemanager .fp-iconview .fp-file.fp-originalmissing .fp-thumbnail img{display:none}.filemanager .fp-iconview .fp-file.fp-originalmissing .fp-thumbnail{background:url([[pix:s/dead]]) no-repeat;background-position:center center}.filemanager .yui3-datatable table{width:100%;border:0 solid #bbb}.filemanager .yui3-datatable-header{color:#555!important;background:#fff!important;border-bottom:1px solid #ccc!important;border-left:0 solid #fff!important}.filemanager .yui3-datatable-odd .yui3-datatable-cell{background-color:#f6f6f6!important;border-left:0 solid #f6f6f6}.filemanager .yui3-datatable-even .yui3-datatable-cell{background-color:#fff!important;border-left:0 solid #fff}.filemanager .fp-filename-icon.fp-hasreferences .fp-reficons1{position:absolute;top:8px;left:17px;z-index:1000;width:100%;height:100%;background:url('[[pix:theme|fp/link_sm]]') no-repeat 0 0}.filemanager .fp-filename-icon.fp-isreference .fp-reficons2{position:absolute;top:9px;left:-6px;z-index:1001;width:100%;height:100%;background:url('[[pix:theme|fp/alias_sm]]') no-repeat 0 0}.filemanager .fp-contextmenu{display:none}.filemanager .fp-iconview .fp-folder.fp-hascontextmenu .fp-contextmenu{position:absolute;right:7px;bottom:5px;z-index:2000;display:block}.filemanager .fp-treeview .fp-folder.fp-hascontextmenu .fp-contextmenu,.filemanager .fp-tableview .fp-folder.fp-hascontextmenu .fp-contextmenu{position:absolute;top:6px;left:14px;display:inline;margin-right:-20px}.dir-rtl .filemanager .fp-iconview .fp-folder.fp-hascontextmenu .fp-contextmenu{right:inherit;left:7px}.dir-rtl .filemanager .fp-treeview .fp-folder.fp-hascontextmenu .fp-contextmenu,.dir-rtl .filemanager .fp-tableview .fp-folder.fp-hascontextmenu .fp-contextmenu{right:16px;left:inherit;margin-right:0}.filepicker-filelist .filepicker-container,.filemanager.fm-noitems .fm-empty-container{position:absolute;top:10px;right:10px;bottom:10px;left:10px;z-index:3000;display:block;padding-top:85px;text-align:center;border:2px dashed #bbb}.filepicker-filelist .dndupload-target,.filemanager-container .dndupload-target{position:absolute;top:10px;right:10px;bottom:10px;left:10px;z-index:3000;padding-top:85px;text-align:center;background:#fff;border:2px dashed #fb7979;-webkit-box-shadow:0 0 0 10px #fff;-moz-box-shadow:0 0 0 10px #fff;box-shadow:0 0 0 10px #fff}.filepicker-filelist.dndupload-over .dndupload-target,.filemanager-container.dndupload-over .dndupload-target{position:absolute;top:10px;right:10px;bottom:10px;left:10px;z-index:3000;padding-top:85px;text-align:center;background:#fff;border:2px dashed #6c8cd3}.dndupload-message{display:none}.dndsupported .dndupload-message{display:inline}.dnduploadnotsupported-message{display:none}.dndnotsupported .dnduploadnotsupported-message{display:inline}.dndupload-target{display:none}.dndsupported .dndupload-ready .dndupload-target{display:block}.dndupload-uploadinprogress{display:none;text-align:center}.dndupload-uploading .dndupload-uploadinprogress{display:block}.dndupload-arrow{position:absolute;top:5px;width:100%;height:80px;margin-left:-28px;background:url([[pix:theme|fp/dnd_arrow]]) center no-repeat}.fitem.disabled .filepicker-container,.fitem.disabled .fm-empty-container{display:none}.dndupload-progressbars{display:none;padding:10px}.dndupload-inprogress .dndupload-progressbars{display:block}.dndupload-inprogress .fp-content{display:none}.filemanager.fm-noitems .dndupload-inprogress .fm-empty-container{display:none}.filepicker-filelist.dndupload-inprogress .filepicker-container{display:none}.filepicker-filelist.dndupload-inprogress a{display:none}.filemanager.fp-select .fp-select-loading{display:none}.filemanager.fp-select.loading .fp-select-loading{display:block}.filemanager.fp-select.loading form{display:none}.filemanager.fp-select.fp-folder .fp-license,.filemanager.fp-select.fp-folder .fp-author,.filemanager.fp-select.fp-file .fp-file-unzip,.filemanager.fp-select.fp-folder .fp-file-unzip,.filemanager.fp-select.fp-file .fp-file-zip,.filemanager.fp-select.fp-zip .fp-file-zip{display:none}.filemanager.fp-select .fp-file-setmain{display:none}.filemanager.fp-select.fp-cansetmain .fp-file-setmain{display:inline-block;*display:inline;*zoom:1}.filemanager .fp-mainfile .fp-filename{font-weight:bold}.filemanager.fp-select.fp-folder .fp-file-download{display:none}.fm-operation{font-weight:bold}.filemanager.fp-select .fp-original.fp-unknown,.filemanager.fp-select .fp-original .fp-originloading{display:none}.filemanager.fp-select .fp-original.fp-loading .fp-originloading{display:inline}.filemanager.fp-select .fp-reflist.fp-unknown,.filemanager.fp-select .fp-reflist .fp-reflistloading{display:none}.filemanager.fp-select .fp-refcount{max-width:265px}.filemanager.fp-select .fp-reflist.fp-loading .fp-reflistloading{display:inline}.filemanager.fp-select .fp-reflist .fp-value{max-width:265px;max-height:75px;padding:8px 7px;margin:0;overflow:auto;background:#f9f9f9;border:1px solid #bbb}.filemanager.fp-select .fp-reflist .fp-value li{padding-bottom:7px}.filemanager.fp-mkdir-dlg{text-align:center}.filemanager.fp-mkdir-dlg .fp-mkdir-dlg-text{margin:20px;text-align:left}.dir-rtl .filemanager .fp-mkdir-dlg p{text-align:right}.filemanager.fp-dlg{text-align:center}.filemanager.fp-dlg .fp-dlg-text{max-width:340px;max-height:300px;min-width:200px;padding:0 10px;margin:40px 20px 20px;overflow:auto;font-size:12px;line-height:22px}.file-picker div.bd{text-align:left}.dir-rtl .file-picker div.bd,.dir-rtl .file-picker .fp-pathbar,.dir-rtl .file-picker .fp-list,.dir-rtl #filemenu .yuimenuitemlabel,.dir-rtl .filemanager-container .yui3-skin-sam .yui3-datatable-header{text-align:right}.dir-rtl .filepicker .yui-layout-unit-left{left:500px}.dir-rtl .filepicker .yui-layout-unit-center{left:0}.allcoursegrades{width:100%;padding:4px 0 5px 0;text-align:right}.path-grade-edit .buttons{text-align:center}.path-grade-edit-tree .idnumber{margin-left:15px}.path-grade-edit-tree .movetarget{position:relative;width:80px;height:16px}.path-grade-edit-tree ul#grade_tree{width:auto}.path-grade-edit-tree ul#grade_tree li{list-style:none}.path-grade-edit-tree ul#grade_tree li.category{margin-bottom:6px}.path-grade-edit-tree .iconsmall{margin-left:4px}#grade-report-toggles{text-align:center}#grade-aggregation-help dt{margin-top:15px}#grade-aggregation-help dd.example{margin-top:7px}#grade-aggregation-help code{display:block;margin-top:7px}.gradeexportlink{padding:2em;text-align:center}.gradetreebox{margin-top:10px;overflow-x:auto;overflow-y:hidden}.gradetreebox table{width:100%;font-size:.8em}.gradetreebox td.colspan,.gradetreebox tr.category .cell{background-color:#DDD}.gradetreebox th.actions{width:105px;white-space:nowrap}.gradetreebox td.name{white-space:nowrap}.gradetreebox td.name h4{display:inline}.gradetreebox td.range{white-space:nowrap}.gradetreebox span.actionlink{color:blue}.gradetreebox span.actionlink:hover{text-decoration:underline;cursor:pointer}.gradetreebox img.iconsmall{margin-left:4px}.gradetreebox img.icon{margin-right:5px}.gradetreebox #gradetreesubmit{margin-bottom:1em;text-align:center}.gradetreebox .hidden{display:none}#page-grade-grading-manage #activemethodselector{margin-bottom:1em;text-align:center}#page-grade-grading-manage #activemethodselector select{margin:0 1em}#page-grade-grading-manage .actions{text-align:center}#page-grade-grading-manage .action{display:inline-block;width:150px;padding:.5em;margin:.5em;text-align:center;background-color:#eee;border:2px solid #ccc;-webkit-border-radius:5px;-moz-border-radius:5px;border-radius:5px}#page-grade-grading-manage .action:hover{text-decoration:none;background-color:#f6f6f6}#page-grade-grading-manage #actionresultmessagebox{position:relative;width:60%;padding:.5em;margin:1em auto;text-align:center;background-color:#d2ebff;border:2px solid #CCC;-webkit-border-radius:5px;-moz-border-radius:5px;border-radius:5px}#page-grade-grading-manage #actionresultmessagebox span{position:absolute;top:-1.2em;right:0;font-size:80%;color:#666}#page-grade-grading-manage .definition-name .status{padding:.25em;font-size:60%;font-weight:normal;text-transform:uppercase;border:1px solid #EEE;-webkit-border-radius:5px;-moz-border-radius:5px;border-radius:5px}#page-grade-grading-manage .definition-name .status.ready{background-color:#e7f1c3;border-color:#aea}#page-grade-grading-manage .definition-name .status.draft{background-color:#f3f2aa;border-color:#ee2}#page-grade-grading-manage .definition-preview{width:50%;padding:1em;margin:1em auto;border:1px solid #EEE}#page-grade-grading-pick .template-name{padding:3px;clear:both;background-color:#f6f6f6}#page-grade-grading-pick .template-name .type{padding:.25em;font-size:60%;font-weight:normal;text-transform:uppercase;border:1px solid #eee;-webkit-border-radius:5px;-moz-border-radius:5px;border-radius:5px}#page-grade-grading-pick .template-name .type.shared{background-color:#e7f1c3;border-color:#aea}#page-grade-grading-pick .template-name .type.ownform{background-color:#d2ebff;border-color:#ace}#page-grade-grading-pick .template-description{padding:0 2em 0 0;margin-right:51%;margin-bottom:1em}#page-grade-grading-pick .template-preview{float:right;width:50%;padding:1em;margin-bottom:1em;border:1px solid #EEE}#page-grade-grading-pick .template-actions{padding:0 2em 0 0;margin-right:51%;margin-bottom:1em}#page-grade-grading-pick .template-actions .action{display:inline-block;padding:.25em;margin:.25em;border:2px solid transparent}#page-grade-grading-pick .template-actions .action.pick{background-color:#EEE;border:2px solid #CCC;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px}#page-grade-grading-pick .template-actions .action:hover{text-decoration:none;background-color:#f6f6f6;border:2px solid #CCC;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px}#page-grade-grading-pick .template-actions .action .action-text{display:inline}#page-grade-grading-pick .template-actions .action .action-icon{margin:0 3px}#page-grade-grading-pick .template-preview-confirm{width:50%;padding:1em;margin:1em auto;border:1px solid #EEE}#page-grade-grading-pick .singlebutton{clear:both}table#user-grades tr.avg td.cell{font-weight:700;color:#00008b;background-color:#efefff}table#user-grades tr td.overridden{background-color:#f3e4c0}table#user-grades tr.odd td.overridden{background-color:#efd9a4}table#user-grades tr td.ajaxoverridden{background-color:#ffe3a0}table#user-grades tr.odd td.ajaxoverridden{background-color:#ffda83}table#user-grades tr.even td.excluded{background-color:#eabfff}table#user-grades tr.odd td.excluded{background-color:#e5afff}table#user-grades tr.groupavg td.cell{font-weight:700;color:#006400;background-color:#efffef}table#user-grades td.cat,table#user-grades td.course{font-weight:700}.path-grade-report-grader #overDiv table{margin:0}.path-grade-report-grader #overDiv table td.feedback{border:0}.path-grade-report-grader #overDiv .feedback{font-size:10.5px;font-weight:400;background-color:#ABF}.path-grade-report-grader #overDiv .caption{font-size:10.5px;font-weight:700;color:#CCF;background-color:#56C}.path-grade-report-grader #overDiv .intersection{font-size:10.5px;font-weight:400;color:#000;background-color:#ABF}.path-grade-report-grader #overDiv .intersectioncaption{font-weight:700;color:#CCF;background-color:#56C}.path-grade-report-grader div.gradeparent,table#user-grades td.ajax{text-align:left}.path-grade-report-grader.dir-rtl div.gradeparent,.dir-rtl table#user-grades td.ajax{text-align:right}table#user-grades td,table#user-grades th{text-align:right}table#user-grades .courseitem{text-align:right;white-space:nowrap}table#user-grades th.category,table#user-grades th#studentheader,table#user-grades th.user{text-align:left}.dir-rtl table#user-grades th.category,.dir-rtl table#user-grades th#studentheader,.dir-rtl table#user-grades th.user{text-align:right}div.gradertoggle{display:inline;margin-left:20px}table#user-grades .userpic{margin-right:10px}table#user-grades .quickfeedback{margin-left:10px;border:1px dashed #000}.dir-rtl table#user-grades .quickfeedback{margin-right:10px;margin-left:0}.path-grade-report-grader #siteconfiglink{text-align:right}table#user-grades .datesubmitted{font-size:10.5px}.path-grade-report-grader span.inclusion-links{margin:0 5px 0 10px}.path-grade-report-grader th.user img.userpicture{margin-right:.5em}.path-grade-report-grader.dir-rtl th.user img.userpicture{margin-left:.5em}.path-grade-report-grader a.quickedit{display:block;float:right;margin:.1em 0 0;clear:none;font-size:9px;line-height:1em;background-color:transparent}.path-grade-report-grader a.quickedit2{display:block;float:right;margin:1.3em 0 0;clear:none;background-color:transparent}.path-grade-report-grader table#quick_edit{margin:0 auto;border:1px solid #cecece}.path-grade-report-grader table#quick_edit td{padding:5px;margin:0;text-align:left;vertical-align:middle;border:1px solid #cecece}.path-grade-report-grader table#quick_edit td img{padding:0;vertical-align:middle;border:3px double #cecece}.path-grade-report-grader table#quick_edit td.fullname{padding-left:5px;border-left:0}.path-grade-report-grader table#quick_edit td.picture{border-right:0}.path-grade-report-grader table#quick_edit td.finalgrade input{width:5em}.path-grade-report-grader h1{clear:both;text-align:center}.path-grade-report-grader input.center{margin:10px auto 0}.path-grade-report-grader .lefttbody{width:auto;vertical-align:middle}.path-grade-report-grader .left_scroller{float:left;clear:none}.path-grade-report-grader .left_scroller #fixed_column .heading th.header,.path-grade-report-grader .left_scroller #fixed_column td,.path-grade-report-grader .left_scroller #fixed_column th{height:4em}.path-grade-report-grader .left_scroller #fixed_column td.controls{height:2em}.path-grade-report-grader.dir-rtl .left_scroller{float:right}.path-grade-report-grader .right_scroller{width:auto;overflow-x:scroll;clear:none}.path-grade-report-grader .right_scroller tr.heading_name_row th,.path-grade-report-grader .right_scroller table#user-grades td.grade{height:4em}.path-grade-report-grader .right_scroller .path-grade-report-grader .left_scroller .topleft,.path-grade-report-grader .right_scroller tr.avg td,.path-grade-report-grader .right_scroller tr.groupavg,.path-grade-report-grader .right_scroller tr.controls_row,.path-grade-report-grader .right_scroller div.right_scroller tr{height:2em}table#fixed_column,table#user-grades,table#fixed_column th,table#fixed_column td,table#user-grades td,table#user-grades th,table#user-grades input{padding:0 2px;margin:0;font-size:10px;vertical-align:middle}.path-grade-report-grader form td.excluded{color:#b94a48}.path-grade-report-grader .excludedfloater{float:left;font-size:9px;font-weight:700;color:#b94a48}.path-grade-report-grader span.gradepass{color:#298721}.path-grade-report-grader span.gradefail{color:#890d0d}.path-grade-report-grader .gradeweight{font-weight:700;color:#461d7c}.path-grade-report-grader td select{padding:0;font-size:100%}.path-grade-report-grader .right_scroller td select{font-size:11.9px}.path-grade-report-grader .grade_icons img.ajax{float:right}.path-grade-report-grader .gradestable th.user,.path-grade-report-grader .gradestable th.range,.path-grade-report-grader .flexible th,.path-grade-report-grader .flexible td,.path-grade-report-grader .flexible th a,.path-grade-report-grader .flexible td a,.path-grade-report-grader .gradestable th.range,.path-grade-report-grader th,.path-grade-report-grader td{white-space:nowrap}table#user-grades td.vmarked{background-color:#fc3}table#user-grades td.hmarked{background-color:#ff9}table#user-grades td.hmarked.vmarked{background-color:#fc9}.path-grade-report-grader .gradeparent{overflow:auto}table#fixed_column tr.controls td,table#user-grades tr.controls td,.path-grade-report-grader table tr.avg,.path-grade-report-grader table tr.avg:hover{background-color:#d9edf7}.path-grade-report-grader table th.user,.path-grade-report-grader table td.userfield{text-align:left}.path-grade-report-grader.dir-rtl table th.user,.path-grade-report-grader.dir-rtl table td.userfield{text-align:right}.path-grade-report-grader .usersuspended a:link,.path-grade-report-grader .usersuspended a:visited{color:#999}.path-grade-report-grader table th.usersuspended img.usersuspendedicon{margin-left:.45em;vertical-align:text-bottom}.path-grade-report-grader .yui3-overlay{left:0;padding:2px 5px;font-size:.7em;background-color:#ffee69;border-color:#d4c237 #a6982b #a6982b;border-style:solid;border-width:1px}.path-grade-report-grader .yui3-overlay .fullname{font-weight:bold;color:#5f3e00}.path-grade-report-grader .yui3-overlay .itemname{font-weight:bold;color:#194f3e}.path-grade-report-grader .yui3-overlay .feedback{color:#5f595e}.path-grade-report-grader #tooltipPanel{text-align:left}.path-grade-report-grader .yui3-overlay a.container-close{margin-top:-3px}.path-grade-report-grader #hiddentooltiproot,.tooltipDiv{display:none}.gradingform_rubric.editor .criteria .definition textarea,.gradingform_rubric.editor .criteria .scorevalue input{display:block;width:auto}.gradingform_rubric.editor .criteria .scorevalue input{float:left}.message-discussion-noframes h1{font-size:1em}.message-discussion-noframes #userinfo .commands,.message .noframesjslink,.message .link{font-size:11.9px}.message .heading{font-size:1em;font-weight:bold}.message .author{font-weight:bold}.message .time{font-style:italic}#page-message-user .commands span{font-size:.7em}#page-message-user .name{font-size:1.1em;font-weight:bold}table.message_search_results td{border-color:#ddd}.message .time,.message.me .author{color:#999}.message.other .author{color:#88c}#page-message-messages{padding:10px}#page-message-send .notifysuccess{padding:1px}#page-message-send td.fixeditor{text-align:center}.message .note{padding:10px}table.message .searchresults td{padding:5px}.message .contactselector{float:left;width:24%}.message .contactselector .contact{text-align:left}.message .contactselector .messageselecteduser{font-weight:bold}.message .contactselector .paging{position:relative;z-index:1}.message .messagearea{float:right;width:74%;min-height:200px;padding-left:1%;border-left:1px solid #d3d3d3}.message .messagearea .messagehistorytype{padding-bottom:20px;clear:both}.message .messagearea .messagehistory .message_user_pictures{margin-right:auto;margin-left:auto}.message .messagearea .messagehistory .message_user_pictures #user1{width:200px;vertical-align:top}.message .messagearea .messagehistory .message_user_pictures #user2{width:200px;vertical-align:top}.message .messagearea .messagehistory .message_user_pictures .useractionlinks{font-size:.9em}.message .messagearea .messagehistory .heading{width:100%;clear:both}.message .messagearea .messagehistory .left{float:left;width:50%;padding-bottom:10px;clear:both}.message .messagearea .messagehistory .right{float:right;width:50%;padding-bottom:10px;clear:both}.message .messagearea .messagehistory .notification{padding:10px;margin-top:5px;background-color:#eee}.message .messagearea .messagesend{padding-top:20px;clear:both}.message .messagearea .messagesend .messagesendbox{width:100%}.message .messagearea .messagesend fieldset{padding:0;margin:0}.message .messagearea .messagerecent{width:100%;text-align:left}.message .messagearea .messagerecent .singlemessage{padding:10px;border-bottom:1px solid #d3d3d3}.message .messagearea .messagerecent .singlemessage .otheruser span{padding:5px}.message .messagearea .messagerecent .singlemessage .messagedate{float:right}.message .hiddenelement{display:none}.message .visible{display:inline}.message #usergroupselector.fieldset,.message #viewing{width:100%}.messagesearchresults{margin-bottom:40px}.messagesearchresults td{padding:0 10px 0 20px}.messagesearchresults td span{white-space:nowrap}.messagesearchresults td img.userpicture{padding-right:.45em;vertical-align:text-bottom}.dir-rtl .messagesearchresults td img.userpicture{padding-right:0;padding-left:.45em}.messagesearchresults td span img{padding:0 0 0 .45em;vertical-align:text-bottom}.dir-rtl .messagesearchresults td span img{padding:0 .45em 0 0}#newmessageoverlay{position:fixed;right:0;bottom:0;padding:20px;background-color:#d3d3d3;border:1px solid black}#newmessageoverlay #usermessage{padding:10px}.questionbank h2{margin-top:0}.questioncategories h3{margin-top:0}#chooseqtypebox{margin-top:1em}#chooseqtype h3{margin:0 0 .3em}#chooseqtype .instruction{display:none}#chooseqtype .fakeqtypes{border-top:1px solid silver}#chooseqtype .qtypeoption{margin-bottom:.5em}#chooseqtype label{display:block}#chooseqtype .qtypename img{padding:0 .3em}#chooseqtype .qtypename{display:inline-table;width:16em}#chooseqtype .qtypesummary{display:block;margin:0 2em}#chooseqtype .submitbuttons{margin:.7em 0;text-align:center}#qtypechoicecontainer{display:none}#qtypechoicecontainer_c.yui-panel-container.shadow .underlay{background:0}#qtypechoicecontainer.yui-panel .hd{letter-spacing:1px;color:#333;text-shadow:1px 1px 1px #fff;background-color:#ebebeb;background-image:-moz-linear-gradient(top,#fff,#ccc);background-image:-webkit-gradient(linear,0 0,0 100%,from(#fff),to(#ccc));background-image:-webkit-linear-gradient(top,#fff,#ccc);background-image:-o-linear-gradient(top,#fff,#ccc);background-image:linear-gradient(to bottom,#fff,#ccc);background-repeat:repeat-x;border:1px solid #ccc;border-bottom:1px solid #bbb;-webkit-border-top-right-radius:10px;border-top-right-radius:10px;-webkit-border-top-left-radius:10px;border-top-left-radius:10px;-moz-border-radius-topright:10px;-moz-border-radius-topleft:10px;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffffff',endColorstr='#ffcccccc',GradientType=0)}#qtypechoicecontainer{font-size:12px;color:#333;background:#f2f2f2;border:1px solid #ccc;border-top:0 none;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;-webkit-box-shadow:5px 5px 20px 0 #666;-moz-box-shadow:5px 5px 20px 0 #666;box-shadow:5px 5px 20px 0 #666}#chooseqtype{width:40em}#chooseqtypehead h3{margin:0;font-weight:normal}#chooseqtype .qtypes{position:relative;padding:.24em 0;border-bottom:1px solid #bbb}#chooseqtype .qtypeoption{padding:.3em .3em .3em 1.6em;margin-bottom:0}#chooseqtype .qtypeoption img{padding-right:.5em;padding-left:1em;vertical-align:text-bottom}#chooseqtype .selected{background-color:#fff;-webkit-box-shadow:0 0 10px 0 #ccc;-moz-box-shadow:0 0 10px 0 #ccc;box-shadow:0 0 10px 0 #ccc}#chooseqtype .instruction,#chooseqtype .qtypesummary{position:absolute;top:0;right:0;bottom:0;left:60%;display:none;padding:1.5em 1.6em;margin:0;overflow-y:auto;background-color:#fff}#chooseqtype .instruction,#chooseqtype .selected .qtypesummary{display:block}#categoryquestions{margin:0}#categoryquestions td,#categoryquestions th{padding:0 .2em}#categoryquestions th{font-weight:normal;text-align:left}#categoryquestions .checkbox{padding-left:20px}.dir-rtl #categoryquestions th{text-align:right}.questionbank .singleselect{margin:0}#combinedfeedbackhdr div.fhtmleditor{padding:0}#combinedfeedbackhdr div.fcheckbox{margin-bottom:1em}#multitriesheader div.fitem_feditor{margin-top:1em}#multitriesheader div.fitem_fgroup{margin-bottom:1em}#multitriesheader div.fitem_fgroup fieldset.felement label{margin-right:.3em;margin-left:.3em}.que{margin:0 auto 1.8em auto;clear:left;text-align:left}.dir-rtl .que{text-align:right}.que .info{float:left;width:7em;padding:.5em;margin-bottom:1.8em;background-color:#eee;border:1px solid #dcdcdc;-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px}.que h2.no{margin:0;font-size:.8em;line-height:1}.que span.qno{font-size:1.5em;font-weight:bold}.que .info>div{margin-top:.7em;font-size:.8em}.que .info .questionflag.editable{cursor:pointer}.que .info .editquestion img,.que .info .questionflag img,.que .info .questionflag input{vertical-align:bottom}.que .content{margin:0 0 0 8.5em}.que .formulation,.que .outcome,.que .comment{padding:8px 35px 8px 14px;margin-bottom:20px;color:#c09853;text-shadow:0 1px 0 rgba(255,255,255,0.5);background-color:#fcf8e3;border:1px solid #fbeed5;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px}.que .formulation{color:#3a87ad;color:#333;background-color:#d9edf7;border-color:#bce8f1}.formulation input[type=\"text\"],.formulation select{width:auto}.path-mod-quiz input[size]{width:auto}.que .comment{color:#468847;background-color:#dff0d8;border-color:#d6e9c6}.que .history{min-height:20px;padding:19px;margin-bottom:20px;background-color:#f5f5f5;border:1px solid #e3e3e3;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,0.05);-moz-box-shadow:inset 0 1px 1px rgba(0,0,0,0.05);box-shadow:inset 0 1px 1px rgba(0,0,0,0.05)}.que .history blockquote{border-color:#ddd;border-color:rgba(0,0,0,0.15)}.que .ablock{margin:.7em 0 .3em 0}.que .im-controls{margin-top:.5em;text-align:left}.dir-rtl .que .im-controls{text-align:right}.que .specificfeedback,.que .generalfeedback,.que .rightanswer,.que .im-feedback,.que .feedback,.que p{margin:0 0 .5em}.que .qtext{margin-bottom:1.5em}.que .correctness{display:inline-block;padding:2px 4px;font-size:11.844px;font-weight:bold;line-height:14px;color:#fff;text-shadow:0 -1px 0 rgba(0,0,0,0.25);white-space:nowrap;vertical-align:baseline;background-color:#999;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px}.que .correctness:empty{display:none}.que .correctness-important{background-color:#b94a48}.que .correctness-important[href]{background-color:#953b39}.que .correctness-warning{background-color:#f89406}.que .correctness-warning[href]{background-color:#c67605}.que .correctness-success{background-color:#468847}.que .correctness-success[href]{background-color:#356635}.que .correctness-info{background-color:#3a87ad}.que .correctness-info[href]{background-color:#2d6987}.que .correctness-inverse{background-color:#333}.que .correctness-inverse[href]{background-color:#1a1a1a}.que .correctness.correct{background-color:#468847}.que .correctness.partiallycorrect{background-color:#f89406}.que .correctness.notanswered,.que .correctness.incorrect{background-color:#b94a48}.que .validationerror{color:#b94a48}.formulation .correct{background-color:#dff0d8}.formulation .partiallycorrect{background-color:#fcf8e3}.formulation .incorrect{background-color:#f2dede}.formulation select.correct,.formulation input.correct{color:#468847;background-color:#dff0d8;border-color:#468847;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075);-moz-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075);box-shadow:inset 0 1px 1px rgba(0,0,0,0.075)}.formulation select.correct:focus,.formulation input.correct:focus{border-color:#356635;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075),0 0 6px #7aba7b;-moz-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075),0 0 6px #7aba7b;box-shadow:inset 0 1px 1px rgba(0,0,0,0.075),0 0 6px #7aba7b}.formulation select.partiallycorrect,.formulation input.partiallycorrect{color:#c09853;background-color:#fcf8e3;border-color:#c09853;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075);-moz-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075);box-shadow:inset 0 1px 1px rgba(0,0,0,0.075)}.formulation select.partiallycorrect:focus,.formulation input.partiallycorrect:focus{border-color:#a47e3c;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075),0 0 6px #dbc59e;-moz-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075),0 0 6px #dbc59e;box-shadow:inset 0 1px 1px rgba(0,0,0,0.075),0 0 6px #dbc59e}.formulation select.incorrect,.formulation input.incorrect{color:#b94a48;background-color:#f2dede;border-color:#b94a48;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075);-moz-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075);box-shadow:inset 0 1px 1px rgba(0,0,0,0.075)}.formulation select.incorrect:focus,.formulation input.incorrect:focus{border-color:#953b39;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075),0 0 6px #d59392;-moz-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075),0 0 6px #d59392;box-shadow:inset 0 1px 1px rgba(0,0,0,0.075),0 0 6px #d59392}.que .grading,.que .comment,.que .commentlink,.que .history{margin-top:.5em}.que .history h3{margin:0 0 .2em;font-size:1em}.que .history table{width:100%;margin:0}.que .history .current{font-weight:bold}.que .questioncorrectnessicon{vertical-align:text-bottom}.que input.questionflagimage{padding-right:3px}.dir-rtl .que input.questionflagimage{padding-right:0;padding-left:3px}.importerror{margin-top:10px;border-bottom:1px solid #555}.mform .que.comment .fitemtitle{width:20%}#page-question-preview #techinfo{margin:1em 0}.dir-rtl #chooseqtype .instruction,.dir-rtl #chooseqtype .qtypesummary{right:60%;left:0;border-right:1px solid grey;border-left:0}#page-mod-quiz-edit .questionbankwindow div.header{padding:3px;padding:2px 10px 2px 10px;margin:0 -10px 0 -10px;color:#444;text-shadow:none;background:transparent;-webkit-border-top-right-radius:4px;border-top-right-radius:4px;-webkit-border-top-left-radius:4px;border-top-left-radius:4px;-moz-border-radius-topright:4px;-moz-border-radius-topleft:4px}#page-mod-quiz-edit .questionbankwindow div.header a:link,#page-mod-quiz-edit .questionbankwindow div.header a:visited{color:#08c}#page-mod-quiz-edit .questionbankwindow div.header a:hover{color:#005580}#page-mod-quiz-edit .questionbankwindow div.header .title{color:#333}#page-mod-quiz-edit div.container div.generalbox{padding:1.5em;background-color:transparent}#page-mod-quiz-edit .categoryinfo{background-color:#fff;border-bottom:0}#page-mod-quiz-edit div.questionbank .categoryquestionscontainer,#page-mod-quiz-edit div.questionbank .categorysortopotionscontainer,#page-mod-quiz-edit div.questionbank .categorypagingbarcontainer,#page-mod-quiz-edit div.questionbank .categoryselectallcontainer{padding:0 0 1.5em 0}#page-mod-quiz-edit div.questionbank .categorypagingbarcontainer{padding:1em;margin:0 -1.2em;background-color:transparent;border-top:0;border-bottom:0}#page-mod-quiz-edit div.questionbank .categoryquestionscontainer{margin:0 -1.2em -1em -1.2em}#page-mod-quiz-edit div.question div.content div.questioncontrols{background-color:#fff}#page-mod-quiz-edit div.question div.content div.points{padding-bottom:.5em;margin-top:-0.5em;background-color:#fff;border:0}#page-mod-quiz-edit div.question div.content div.points label{display:inline-block}#page-mod-quiz-edit div.quizpage .pagecontent .pagestatus{background-color:#fff}#page-mod-quiz-edit .quizpagedelete,#page-mod-quiz-edit .quizpagedelete img{background-color:transparent}#page-mod-quiz-edit div.quizpage .pagecontent{overflow:hidden;border:1px solid #ddd;-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px}#page-mod-quiz-edit .modulespecificbuttonscontainer{width:220px}.questionbankwindow .module{width:auto}#page-mod-quiz-edit div.editq div.question div.content{overflow:hidden;background-color:#fff;border:1px solid #ddd;-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px}.path-mod-quiz .statedetails{display:block;font-size:.9em}a#hidebankcmd{color:#08c}.que.shortanswer .answer{padding:0}.que label{display:inline}.userprofile .fullprofilelink{margin:10px;text-align:center}.userprofile .description{margin-bottom:20px}.userprofile dl.list{*zoom:1}.userprofile dl.list:before,.userprofile dl.list:after{display:table;line-height:0;content:\"\"}.userprofile dl.list:after{clear:both}.userprofile dl.list dt{float:left;width:180px;overflow:hidden;clear:left;text-align:right;text-overflow:ellipsis;white-space:nowrap}.userprofile dl.list dd{margin-left:200px}.user-box{float:left;width:115px;height:160px;margin:8px;clear:none;text-align:center}.userlist .main .action-icon img{vertical-align:middle}.userlist #showall{margin:10px 0}.userlist .buttons{text-align:center}.userlist .buttons label{padding:0 3px}.userlist table#participants{text-align:center}.userlist table#participants td,.userlist table#participants th{padding:4px;text-align:left;vertical-align:middle}.userlist table.controls{width:100%}.userlist table.controls tr{vertical-align:top}.userlist table.controls td.right,.userlist table.controls td.left{padding:4px}.userlist table.controls .right{text-align:right}.userinfobox{width:100%;padding:10px;border:1px solid;border-collapse:separate}.userinfobox .left,.userinfobox .side{width:100px;vertical-align:top}.userinfobox .userpicture{width:100px;height:100px}.userinfobox .content{vertical-align:top}.userinfobox .links{width:100px;padding:5px;vertical-align:bottom}.userinfobox .links a{display:block}.userinfobox .list td{padding:3px}.userinfobox .username{padding-bottom:20px;font-weight:bold}.userinfobox td.label{font-weight:bold;text-align:right;white-space:nowrap;vertical-align:top}.groupinfobox{border:1px solid}.groupinfobox .left{width:100px;padding:10px;vertical-align:top}.course-participation #showall{margin:10px 0;text-align:center}#user-policy .noticebox{width:80%;height:250px;margin-right:auto;margin-bottom:10px;margin-left:auto;text-align:center}#user-policy #policyframe{width:100%;height:100%}.iplookup #map{margin:auto}.userselector select{width:100%}.userselector div{margin-top:.2em}.userselector div label{margin-right:.3em}.userselector .userselector-infobelow{font-size:.8em}#userselector_options{padding:.3em 0}#userselector_options .collapsibleregioncaption{font-weight:bold}#userselector_options p{margin:.2em 0;text-align:left}.dir-rtl #userselector_options p{text-align:right}#page-user-profile .messagebox{margin-right:auto;margin-left:auto;text-align:center}#page-course-view-weeks .messagebox{margin-right:auto;margin-left:auto;text-align:center}.dir-rtl .descriptionbox{margin-right:110px;margin-left:0}.dir-rtl .userlist table#participants td,.dir-rtl .userlist table#participants th{text-align:right}.dir-rtl .userlist table#participants{margin:0 auto}#page-my-index.dir-rtl .block h3.main{text-align:right}/*!\n  * Bootstrap v2.3.0\n  *\n  * Copyright 2012 Twitter, Inc\n@@ -6,4 +6,4 @@\n  * http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Designed and built with all the love in the world @twitter by @mdo and @fat.\n- */.clearfix{*zoom:1}.clearfix:before,.clearfix:after{display:table;line-height:0;content:\"\"}.clearfix:after{clear:both}.hide-text{font:0/0 a;color:transparent;text-shadow:none;background-color:transparent;border:0}.input-block-level{display:block;width:100%;min-height:30px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}article,aside,details,figcaption,figure,footer,header,hgroup,nav,section{display:block}audio,canvas,video{display:inline-block;*display:inline;*zoom:1}audio:not([controls]){display:none}html{font-size:100%;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%}a:focus{outline:thin dotted #333;outline:5px auto -webkit-focus-ring-color;outline-offset:-2px}a:hover,a:active{outline:0}sub,sup{position:relative;font-size:75%;line-height:0;vertical-align:baseline}sup{top:-0.5em}sub{bottom:-0.25em}img{width:auto\\9;height:auto;max-width:100%;vertical-align:middle;border:0;-ms-interpolation-mode:bicubic}#map_canvas img,.google-maps img{max-width:none}button,input,select,textarea{margin:0;font-size:100%;vertical-align:middle}button,input{*overflow:visible;line-height:normal}button::-moz-focus-inner,input::-moz-focus-inner{padding:0;border:0}button,html input[type=\"button\"],input[type=\"reset\"],input[type=\"submit\"]{cursor:pointer;-webkit-appearance:button}label,select,button,input[type=\"button\"],input[type=\"reset\"],input[type=\"submit\"],input[type=\"radio\"],input[type=\"checkbox\"]{cursor:pointer}input[type=\"search\"]{-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;-webkit-appearance:textfield}input[type=\"search\"]::-webkit-search-decoration,input[type=\"search\"]::-webkit-search-cancel-button{-webkit-appearance:none}textarea{overflow:auto;vertical-align:top}@media print{*{color:#000!important;text-shadow:none!important;background:transparent!important;box-shadow:none!important}a,a:visited{text-decoration:underline}a[href]:after{content:\" (\" attr(href) \")\"}abbr[title]:after{content:\" (\" attr(title) \")\"}.ir a:after,a[href^=\"javascript:\"]:after,a[href^=\"#\"]:after{content:\"\"}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100%!important}@page{margin:.5cm}p,h2,h3{orphans:3;widows:3}h2,h3{page-break-after:avoid}}body{margin:0;font-family:\"Helvetica Neue\",Helvetica,Arial,sans-serif;font-size:14px;line-height:20px;color:#333;background-color:#fff}a{color:#08c;text-decoration:none}a:hover,a:focus{color:#005580;text-decoration:underline}.img-rounded{-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px}.img-polaroid{padding:4px;background-color:#fff;border:1px solid #ccc;border:1px solid rgba(0,0,0,0.2);-webkit-box-shadow:0 1px 3px rgba(0,0,0,0.1);-moz-box-shadow:0 1px 3px rgba(0,0,0,0.1);box-shadow:0 1px 3px rgba(0,0,0,0.1)}.img-circle{-webkit-border-radius:500px;-moz-border-radius:500px;border-radius:500px}.row{margin-left:-20px;*zoom:1}.row:before,.row:after{display:table;line-height:0;content:\"\"}.row:after{clear:both}[class*=\"span\"]{float:left;min-height:1px;margin-left:20px}.container,.navbar-static-top .container,.navbar-fixed-top .container,.navbar-fixed-bottom .container{width:940px}.span12{width:940px}.span11{width:860px}.span10{width:780px}.span9{width:700px}.span8{width:620px}.span7{width:540px}.span6{width:460px}.span5{width:380px}.span4{width:300px}.span3{width:220px}.span2{width:140px}.span1{width:60px}.offset12{margin-left:980px}.offset11{margin-left:900px}.offset10{margin-left:820px}.offset9{margin-left:740px}.offset8{margin-left:660px}.offset7{margin-left:580px}.offset6{margin-left:500px}.offset5{margin-left:420px}.offset4{margin-left:340px}.offset3{margin-left:260px}.offset2{margin-left:180px}.offset1{margin-left:100px}.row-fluid{width:100%;*zoom:1}.row-fluid:before,.row-fluid:after{display:table;line-height:0;content:\"\"}.row-fluid:after{clear:both}.row-fluid [class*=\"span\"]{display:block;float:left;width:100%;min-height:30px;margin-left:2.127659574468085%;*margin-left:2.074468085106383%;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.row-fluid [class*=\"span\"]:first-child{margin-left:0}.row-fluid .controls-row [class*=\"span\"]+[class*=\"span\"]{margin-left:2.127659574468085%}.row-fluid .span12{width:100%;*width:99.94680851063829%}.row-fluid .span11{width:91.48936170212765%;*width:91.43617021276594%}.row-fluid .span10{width:82.97872340425532%;*width:82.92553191489361%}.row-fluid .span9{width:74.46808510638297%;*width:74.41489361702126%}.row-fluid .span8{width:65.95744680851064%;*width:65.90425531914893%}.row-fluid .span7{width:57.44680851063829%;*width:57.39361702127659%}.row-fluid .span6{width:48.93617021276595%;*width:48.88297872340425%}.row-fluid .span5{width:40.42553191489362%;*width:40.37234042553192%}.row-fluid .span4{width:31.914893617021278%;*width:31.861702127659576%}.row-fluid .span3{width:23.404255319148934%;*width:23.351063829787233%}.row-fluid .span2{width:14.893617021276595%;*width:14.840425531914894%}.row-fluid .span1{width:6.382978723404255%;*width:6.329787234042553%}.row-fluid .offset12{margin-left:104.25531914893617%;*margin-left:104.14893617021275%}.row-fluid .offset12:first-child{margin-left:102.12765957446808%;*margin-left:102.02127659574467%}.row-fluid .offset11{margin-left:95.74468085106382%;*margin-left:95.6382978723404%}.row-fluid .offset11:first-child{margin-left:93.61702127659574%;*margin-left:93.51063829787232%}.row-fluid .offset10{margin-left:87.23404255319149%;*margin-left:87.12765957446807%}.row-fluid .offset10:first-child{margin-left:85.1063829787234%;*margin-left:84.99999999999999%}.row-fluid .offset9{margin-left:78.72340425531914%;*margin-left:78.61702127659572%}.row-fluid .offset9:first-child{margin-left:76.59574468085106%;*margin-left:76.48936170212764%}.row-fluid .offset8{margin-left:70.2127659574468%;*margin-left:70.10638297872339%}.row-fluid .offset8:first-child{margin-left:68.08510638297872%;*margin-left:67.9787234042553%}.row-fluid .offset7{margin-left:61.70212765957446%;*margin-left:61.59574468085106%}.row-fluid .offset7:first-child{margin-left:59.574468085106375%;*margin-left:59.46808510638297%}.row-fluid .offset6{margin-left:53.191489361702125%;*margin-left:53.085106382978715%}.row-fluid .offset6:first-child{margin-left:51.063829787234035%;*margin-left:50.95744680851063%}.row-fluid .offset5{margin-left:44.68085106382979%;*margin-left:44.57446808510638%}.row-fluid .offset5:first-child{margin-left:42.5531914893617%;*margin-left:42.4468085106383%}.row-fluid .offset4{margin-left:36.170212765957444%;*margin-left:36.06382978723405%}.row-fluid .offset4:first-child{margin-left:34.04255319148936%;*margin-left:33.93617021276596%}.row-fluid .offset3{margin-left:27.659574468085104%;*margin-left:27.5531914893617%}.row-fluid .offset3:first-child{margin-left:25.53191489361702%;*margin-left:25.425531914893618%}.row-fluid .offset2{margin-left:19.148936170212764%;*margin-left:19.04255319148936%}.row-fluid .offset2:first-child{margin-left:17.02127659574468%;*margin-left:16.914893617021278%}.row-fluid .offset1{margin-left:10.638297872340425%;*margin-left:10.53191489361702%}.row-fluid .offset1:first-child{margin-left:8.51063829787234%;*margin-left:8.404255319148938%}[class*=\"span\"].hide,.row-fluid [class*=\"span\"].hide{display:none}[class*=\"span\"].pull-right,.row-fluid [class*=\"span\"].pull-right{float:right}.container{margin-right:auto;margin-left:auto;*zoom:1}.container:before,.container:after{display:table;line-height:0;content:\"\"}.container:after{clear:both}.container-fluid{padding-right:20px;padding-left:20px;*zoom:1}.container-fluid:before,.container-fluid:after{display:table;line-height:0;content:\"\"}.container-fluid:after{clear:both}p{margin:0 0 10px}.lead{margin-bottom:20px;font-size:21px;font-weight:200;line-height:30px}small{font-size:85%}strong{font-weight:bold}em{font-style:italic}cite{font-style:normal}.muted{color:#999}a.muted:hover,a.muted:focus{color:#808080}.text-warning{color:#c09853}a.text-warning:hover,a.text-warning:focus{color:#a47e3c}.text-error{color:#b94a48}a.text-error:hover,a.text-error:focus{color:#953b39}.text-info{color:#3a87ad}a.text-info:hover,a.text-info:focus{color:#2d6987}.text-success{color:#468847}a.text-success:hover,a.text-success:focus{color:#356635}.text-left{text-align:left}.text-right{text-align:right}.text-center{text-align:center}h1,h2,h3,h4,h5,h6{margin:10px 0;font-family:inherit;font-weight:bold;line-height:20px;color:inherit;text-rendering:optimizelegibility}h1 small,h2 small,h3 small,h4 small,h5 small,h6 small{font-weight:normal;line-height:1;color:#999}h1,h2,h3{line-height:40px}h1{font-size:38.5px}h2{font-size:31.5px}h3{font-size:24.5px}h4{font-size:17.5px}h5{font-size:14px}h6{font-size:11.9px}h1 small{font-size:24.5px}h2 small{font-size:17.5px}h3 small{font-size:14px}h4 small{font-size:14px}.page-header{padding-bottom:9px;margin:20px 0 30px;border-bottom:1px solid #eee}ul,ol{padding:0;margin:0 0 10px 25px}ul ul,ul ol,ol ol,ol ul{margin-bottom:0}li{line-height:20px}ul.unstyled,ol.unstyled{margin-left:0;list-style:none}ul.inline,ol.inline{margin-left:0;list-style:none}ul.inline>li,ol.inline>li{display:inline-block;*display:inline;padding-right:5px;padding-left:5px;*zoom:1}dl{margin-bottom:20px}dt,dd{line-height:20px}dt{font-weight:bold}dd{margin-left:10px}.dl-horizontal{*zoom:1}.dl-horizontal:before,.dl-horizontal:after{display:table;line-height:0;content:\"\"}.dl-horizontal:after{clear:both}.dl-horizontal dt{float:left;width:180px;overflow:hidden;clear:left;text-align:right;text-overflow:ellipsis;white-space:nowrap}.dl-horizontal dd{margin-left:200px}hr{margin:20px 0;border:0;border-top:1px solid #eee;border-bottom:1px solid #fff}abbr[title],abbr[data-original-title]{cursor:help;border-bottom:1px dotted #999}abbr.initialism{font-size:90%;text-transform:uppercase}blockquote{padding:0 0 0 15px;margin:0 0 20px;border-left:5px solid #eee}blockquote p{margin-bottom:0;font-size:17.5px;font-weight:300;line-height:1.25}blockquote small{display:block;line-height:20px;color:#999}blockquote small:before{content:'\\2014 \\00A0'}blockquote.pull-right{float:right;padding-right:15px;padding-left:0;border-right:5px solid #eee;border-left:0}blockquote.pull-right p,blockquote.pull-right small{text-align:right}blockquote.pull-right small:before{content:''}blockquote.pull-right small:after{content:'\\00A0 \\2014'}q:before,q:after,blockquote:before,blockquote:after{content:\"\"}address{display:block;margin-bottom:20px;font-style:normal;line-height:20px}code,pre{padding:0 3px 2px;font-family:Monaco,Menlo,Consolas,\"Courier New\",monospace;font-size:12px;color:#333;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px}code{padding:2px 4px;color:#d14;white-space:nowrap;background-color:#f7f7f9;border:1px solid #e1e1e8}pre{display:block;padding:9.5px;margin:0 0 10px;font-size:13px;line-height:20px;word-break:break-all;word-wrap:break-word;white-space:pre;white-space:pre-wrap;background-color:#f5f5f5;border:1px solid #ccc;border:1px solid rgba(0,0,0,0.15);-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px}pre.prettyprint{margin-bottom:20px}pre code{padding:0;color:inherit;white-space:pre;white-space:pre-wrap;background-color:transparent;border:0}.pre-scrollable{max-height:340px;overflow-y:scroll}form{margin:0 0 20px}fieldset{padding:0;margin:0;border:0}legend{display:block;width:100%;padding:0;margin-bottom:20px;font-size:21px;line-height:40px;color:#333;border:0;border-bottom:1px solid #e5e5e5}legend small{font-size:15px;color:#999}label,input,button,select,textarea{font-size:14px;font-weight:normal;line-height:20px}input,button,select,textarea{font-family:\"Helvetica Neue\",Helvetica,Arial,sans-serif}label{display:block;margin-bottom:5px}select,textarea,input[type=\"text\"],input[type=\"password\"],input[type=\"datetime\"],input[type=\"datetime-local\"],input[type=\"date\"],input[type=\"month\"],input[type=\"time\"],input[type=\"week\"],input[type=\"number\"],input[type=\"email\"],input[type=\"url\"],input[type=\"search\"],input[type=\"tel\"],input[type=\"color\"],.uneditable-input{display:inline-block;height:20px;padding:4px 6px;margin-bottom:10px;font-size:14px;line-height:20px;color:#555;vertical-align:middle;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px}input,textarea,.uneditable-input{width:206px}textarea{height:auto}textarea,input[type=\"text\"],input[type=\"password\"],input[type=\"datetime\"],input[type=\"datetime-local\"],input[type=\"date\"],input[type=\"month\"],input[type=\"time\"],input[type=\"week\"],input[type=\"number\"],input[type=\"email\"],input[type=\"url\"],input[type=\"search\"],input[type=\"tel\"],input[type=\"color\"],.uneditable-input{background-color:#fff;border:1px solid #ccc;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075);-moz-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075);box-shadow:inset 0 1px 1px rgba(0,0,0,0.075);-webkit-transition:border linear .2s,box-shadow linear .2s;-moz-transition:border linear .2s,box-shadow linear .2s;-o-transition:border linear .2s,box-shadow linear .2s;transition:border linear .2s,box-shadow linear .2s}textarea:focus,input[type=\"text\"]:focus,input[type=\"password\"]:focus,input[type=\"datetime\"]:focus,input[type=\"datetime-local\"]:focus,input[type=\"date\"]:focus,input[type=\"month\"]:focus,input[type=\"time\"]:focus,input[type=\"week\"]:focus,input[type=\"number\"]:focus,input[type=\"email\"]:focus,input[type=\"url\"]:focus,input[type=\"search\"]:focus,input[type=\"tel\"]:focus,input[type=\"color\"]:focus,.uneditable-input:focus{border-color:rgba(82,168,236,0.8);outline:0;outline:thin dotted \\9;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075),0 0 8px rgba(82,168,236,0.6);-moz-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075),0 0 8px rgba(82,168,236,0.6);box-shadow:inset 0 1px 1px rgba(0,0,0,0.075),0 0 8px rgba(82,168,236,0.6)}input[type=\"radio\"],input[type=\"checkbox\"]{margin:4px 0 0;margin-top:1px \\9;*margin-top:0;line-height:normal}input[type=\"file\"],input[type=\"image\"],input[type=\"submit\"],input[type=\"reset\"],input[type=\"button\"],input[type=\"radio\"],input[type=\"checkbox\"]{width:auto}select,input[type=\"file\"]{height:30px;*margin-top:4px;line-height:30px}select{width:220px;background-color:#fff;border:1px solid #ccc}select[multiple],select[size]{height:auto}select:focus,input[type=\"file\"]:focus,input[type=\"radio\"]:focus,input[type=\"checkbox\"]:focus{outline:thin dotted #333;outline:5px auto -webkit-focus-ring-color;outline-offset:-2px}.uneditable-input,.uneditable-textarea{color:#999;cursor:not-allowed;background-color:#fcfcfc;border-color:#ccc;-webkit-box-shadow:inset 0 1px 2px rgba(0,0,0,0.025);-moz-box-shadow:inset 0 1px 2px rgba(0,0,0,0.025);box-shadow:inset 0 1px 2px rgba(0,0,0,0.025)}.uneditable-input{overflow:hidden;white-space:nowrap}.uneditable-textarea{width:auto;height:auto}input:-moz-placeholder,textarea:-moz-placeholder{color:#999}input:-ms-input-placeholder,textarea:-ms-input-placeholder{color:#999}input::-webkit-input-placeholder,textarea::-webkit-input-placeholder{color:#999}.radio,.checkbox{min-height:20px;padding-left:20px}.radio input[type=\"radio\"],.checkbox input[type=\"checkbox\"]{float:left;margin-left:-20px}.controls>.radio:first-child,.controls>.checkbox:first-child{padding-top:5px}.radio.inline,.checkbox.inline{display:inline-block;padding-top:5px;margin-bottom:0;vertical-align:middle}.radio.inline+.radio.inline,.checkbox.inline+.checkbox.inline{margin-left:10px}.input-mini{width:60px}.input-small{width:90px}.input-medium{width:150px}.input-large{width:210px}.input-xlarge{width:270px}.input-xxlarge{width:530px}input[class*=\"span\"],select[class*=\"span\"],textarea[class*=\"span\"],.uneditable-input[class*=\"span\"],.row-fluid input[class*=\"span\"],.row-fluid select[class*=\"span\"],.row-fluid textarea[class*=\"span\"],.row-fluid .uneditable-input[class*=\"span\"]{float:none;margin-left:0}.input-append input[class*=\"span\"],.input-append .uneditable-input[class*=\"span\"],.input-prepend input[class*=\"span\"],.input-prepend .uneditable-input[class*=\"span\"],.row-fluid input[class*=\"span\"],.row-fluid select[class*=\"span\"],.row-fluid textarea[class*=\"span\"],.row-fluid .uneditable-input[class*=\"span\"],.row-fluid .input-prepend [class*=\"span\"],.row-fluid .input-append [class*=\"span\"]{display:inline-block}input,textarea,.uneditable-input{margin-left:0}.controls-row [class*=\"span\"]+[class*=\"span\"]{margin-left:20px}input.span12,textarea.span12,.uneditable-input.span12{width:926px}input.span11,textarea.span11,.uneditable-input.span11{width:846px}input.span10,textarea.span10,.uneditable-input.span10{width:766px}input.span9,textarea.span9,.uneditable-input.span9{width:686px}input.span8,textarea.span8,.uneditable-input.span8{width:606px}input.span7,textarea.span7,.uneditable-input.span7{width:526px}input.span6,textarea.span6,.uneditable-input.span6{width:446px}input.span5,textarea.span5,.uneditable-input.span5{width:366px}input.span4,textarea.span4,.uneditable-input.span4{width:286px}input.span3,textarea.span3,.uneditable-input.span3{width:206px}input.span2,textarea.span2,.uneditable-input.span2{width:126px}input.span1,textarea.span1,.uneditable-input.span1{width:46px}.controls-row{*zoom:1}.controls-row:before,.controls-row:after{display:table;line-height:0;content:\"\"}.controls-row:after{clear:both}.controls-row [class*=\"span\"],.row-fluid .controls-row [class*=\"span\"]{float:left}.controls-row .checkbox[class*=\"span\"],.controls-row .radio[class*=\"span\"]{padding-top:5px}input[disabled],select[disabled],textarea[disabled],input[readonly],select[readonly],textarea[readonly]{cursor:not-allowed;background-color:#eee}input[type=\"radio\"][disabled],input[type=\"checkbox\"][disabled],input[type=\"radio\"][readonly],input[type=\"checkbox\"][readonly]{background-color:transparent}.control-group.warning .control-label,.control-group.warning .help-block,.control-group.warning .help-inline{color:#c09853}.control-group.warning .checkbox,.control-group.warning .radio,.control-group.warning input,.control-group.warning select,.control-group.warning textarea{color:#c09853}.control-group.warning input,.control-group.warning select,.control-group.warning textarea{border-color:#c09853;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075);-moz-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075);box-shadow:inset 0 1px 1px rgba(0,0,0,0.075)}.control-group.warning input:focus,.control-group.warning select:focus,.control-group.warning textarea:focus{border-color:#a47e3c;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075),0 0 6px #dbc59e;-moz-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075),0 0 6px #dbc59e;box-shadow:inset 0 1px 1px rgba(0,0,0,0.075),0 0 6px #dbc59e}.control-group.warning .input-prepend .add-on,.control-group.warning .input-append .add-on{color:#c09853;background-color:#fcf8e3;border-color:#c09853}.control-group.error .control-label,.control-group.error .help-block,.control-group.error .help-inline{color:#b94a48}.control-group.error .checkbox,.control-group.error .radio,.control-group.error input,.control-group.error select,.control-group.error textarea{color:#b94a48}.control-group.error input,.control-group.error select,.control-group.error textarea{border-color:#b94a48;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075);-moz-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075);box-shadow:inset 0 1px 1px rgba(0,0,0,0.075)}.control-group.error input:focus,.control-group.error select:focus,.control-group.error textarea:focus{border-color:#953b39;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075),0 0 6px #d59392;-moz-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075),0 0 6px #d59392;box-shadow:inset 0 1px 1px rgba(0,0,0,0.075),0 0 6px #d59392}.control-group.error .input-prepend .add-on,.control-group.error .input-append .add-on{color:#b94a48;background-color:#f2dede;border-color:#b94a48}.control-group.success .control-label,.control-group.success .help-block,.control-group.success .help-inline{color:#468847}.control-group.success .checkbox,.control-group.success .radio,.control-group.success input,.control-group.success select,.control-group.success textarea{color:#468847}.control-group.success input,.control-group.success select,.control-group.success textarea{border-color:#468847;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075);-moz-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075);box-shadow:inset 0 1px 1px rgba(0,0,0,0.075)}.control-group.success input:focus,.control-group.success select:focus,.control-group.success textarea:focus{border-color:#356635;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075),0 0 6px #7aba7b;-moz-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075),0 0 6px #7aba7b;box-shadow:inset 0 1px 1px rgba(0,0,0,0.075),0 0 6px #7aba7b}.control-group.success .input-prepend .add-on,.control-group.success .input-append .add-on{color:#468847;background-color:#dff0d8;border-color:#468847}.control-group.info .control-label,.control-group.info .help-block,.control-group.info .help-inline{color:#3a87ad}.control-group.info .checkbox,.control-group.info .radio,.control-group.info input,.control-group.info select,.control-group.info textarea{color:#3a87ad}.control-group.info input,.control-group.info select,.control-group.info textarea{border-color:#3a87ad;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075);-moz-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075);box-shadow:inset 0 1px 1px rgba(0,0,0,0.075)}.control-group.info input:focus,.control-group.info select:focus,.control-group.info textarea:focus{border-color:#2d6987;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075),0 0 6px #7ab5d3;-moz-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075),0 0 6px #7ab5d3;box-shadow:inset 0 1px 1px rgba(0,0,0,0.075),0 0 6px #7ab5d3}.control-group.info .input-prepend .add-on,.control-group.info .input-append .add-on{color:#3a87ad;background-color:#d9edf7;border-color:#3a87ad}input:focus:invalid,textarea:focus:invalid,select:focus:invalid{color:#b94a48;border-color:#ee5f5b}input:focus:invalid:focus,textarea:focus:invalid:focus,select:focus:invalid:focus{border-color:#e9322d;-webkit-box-shadow:0 0 6px #f8b9b7;-moz-box-shadow:0 0 6px #f8b9b7;box-shadow:0 0 6px #f8b9b7}.form-actions{padding:19px 20px 20px;margin-top:20px;margin-bottom:20px;background-color:#f5f5f5;border-top:1px solid #e5e5e5;*zoom:1}.form-actions:before,.form-actions:after{display:table;line-height:0;content:\"\"}.form-actions:after{clear:both}.help-block,.help-inline{color:#595959}.help-block{display:block;margin-bottom:10px}.help-inline{display:inline-block;*display:inline;padding-left:5px;vertical-align:middle;*zoom:1}.input-append,.input-prepend{display:inline-block;margin-bottom:10px;font-size:0;white-space:nowrap;vertical-align:middle}.input-append input,.input-prepend input,.input-append select,.input-prepend select,.input-append .uneditable-input,.input-prepend .uneditable-input,.input-append .dropdown-menu,.input-prepend .dropdown-menu,.input-append .popover,.input-prepend .popover{font-size:14px}.input-append input,.input-prepend input,.input-append select,.input-prepend select,.input-append .uneditable-input,.input-prepend .uneditable-input{position:relative;margin-bottom:0;*margin-left:0;vertical-align:top;-webkit-border-radius:0 4px 4px 0;-moz-border-radius:0 4px 4px 0;border-radius:0 4px 4px 0}.input-append input:focus,.input-prepend input:focus,.input-append select:focus,.input-prepend select:focus,.input-append .uneditable-input:focus,.input-prepend .uneditable-input:focus{z-index:2}.input-append .add-on,.input-prepend .add-on{display:inline-block;width:auto;height:20px;min-width:16px;padding:4px 5px;font-size:14px;font-weight:normal;line-height:20px;text-align:center;text-shadow:0 1px 0 #fff;background-color:#eee;border:1px solid #ccc}.input-append .add-on,.input-prepend .add-on,.input-append .btn,.input-prepend .btn,.input-append .btn-group>.dropdown-toggle,.input-prepend .btn-group>.dropdown-toggle{vertical-align:top;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.input-append .active,.input-prepend .active{background-color:#a9dba9;border-color:#46a546}.input-prepend .add-on,.input-prepend .btn{margin-right:-1px}.input-prepend .add-on:first-child,.input-prepend .btn:first-child{-webkit-border-radius:4px 0 0 4px;-moz-border-radius:4px 0 0 4px;border-radius:4px 0 0 4px}.input-append input,.input-append select,.input-append .uneditable-input{-webkit-border-radius:4px 0 0 4px;-moz-border-radius:4px 0 0 4px;border-radius:4px 0 0 4px}.input-append input+.btn-group .btn:last-child,.input-append select+.btn-group .btn:last-child,.input-append .uneditable-input+.btn-group .btn:last-child{-webkit-border-radius:0 4px 4px 0;-moz-border-radius:0 4px 4px 0;border-radius:0 4px 4px 0}.input-append .add-on,.input-append .btn,.input-append .btn-group{margin-left:-1px}.input-append .add-on:last-child,.input-append .btn:last-child,.input-append .btn-group:last-child>.dropdown-toggle{-webkit-border-radius:0 4px 4px 0;-moz-border-radius:0 4px 4px 0;border-radius:0 4px 4px 0}.input-prepend.input-append input,.input-prepend.input-append select,.input-prepend.input-append .uneditable-input{-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.input-prepend.input-append input+.btn-group .btn,.input-prepend.input-append select+.btn-group .btn,.input-prepend.input-append .uneditable-input+.btn-group .btn{-webkit-border-radius:0 4px 4px 0;-moz-border-radius:0 4px 4px 0;border-radius:0 4px 4px 0}.input-prepend.input-append .add-on:first-child,.input-prepend.input-append .btn:first-child{margin-right:-1px;-webkit-border-radius:4px 0 0 4px;-moz-border-radius:4px 0 0 4px;border-radius:4px 0 0 4px}.input-prepend.input-append .add-on:last-child,.input-prepend.input-append .btn:last-child{margin-left:-1px;-webkit-border-radius:0 4px 4px 0;-moz-border-radius:0 4px 4px 0;border-radius:0 4px 4px 0}.input-prepend.input-append .btn-group:first-child{margin-left:0}input.search-query{padding-right:14px;padding-right:4px \\9;padding-left:14px;padding-left:4px \\9;margin-bottom:0;-webkit-border-radius:15px;-moz-border-radius:15px;border-radius:15px}.form-search .input-append .search-query,.form-search .input-prepend .search-query{-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.form-search .input-append .search-query{-webkit-border-radius:14px 0 0 14px;-moz-border-radius:14px 0 0 14px;border-radius:14px 0 0 14px}.form-search .input-append .btn{-webkit-border-radius:0 14px 14px 0;-moz-border-radius:0 14px 14px 0;border-radius:0 14px 14px 0}.form-search .input-prepend .search-query{-webkit-border-radius:0 14px 14px 0;-moz-border-radius:0 14px 14px 0;border-radius:0 14px 14px 0}.form-search .input-prepend .btn{-webkit-border-radius:14px 0 0 14px;-moz-border-radius:14px 0 0 14px;border-radius:14px 0 0 14px}.form-search input,.form-inline input,.form-horizontal input,.form-search textarea,.form-inline textarea,.form-horizontal textarea,.form-search select,.form-inline select,.form-horizontal select,.form-search .help-inline,.form-inline .help-inline,.form-horizontal .help-inline,.form-search .uneditable-input,.form-inline .uneditable-input,.form-horizontal .uneditable-input,.form-search .input-prepend,.form-inline .input-prepend,.form-horizontal .input-prepend,.form-search .input-append,.form-inline .input-append,.form-horizontal .input-append{display:inline-block;*display:inline;margin-bottom:0;vertical-align:middle;*zoom:1}.form-search .hide,.form-inline .hide,.form-horizontal .hide{display:none}.form-search label,.form-inline label,.form-search .btn-group,.form-inline .btn-group{display:inline-block}.form-search .input-append,.form-inline .input-append,.form-search .input-prepend,.form-inline .input-prepend{margin-bottom:0}.form-search .radio,.form-search .checkbox,.form-inline .radio,.form-inline .checkbox{padding-left:0;margin-bottom:0;vertical-align:middle}.form-search .radio input[type=\"radio\"],.form-search .checkbox input[type=\"checkbox\"],.form-inline .radio input[type=\"radio\"],.form-inline .checkbox input[type=\"checkbox\"]{float:left;margin-right:3px;margin-left:0}.control-group{margin-bottom:10px}legend+.control-group{margin-top:20px;-webkit-margin-top-collapse:separate}.form-horizontal .control-group{margin-bottom:20px;*zoom:1}.form-horizontal .control-group:before,.form-horizontal .control-group:after{display:table;line-height:0;content:\"\"}.form-horizontal .control-group:after{clear:both}.form-horizontal .control-label{float:left;width:180px;padding-top:5px;text-align:right}.form-horizontal .controls{*display:inline-block;*padding-left:20px;margin-left:200px;*margin-left:0}.form-horizontal .controls:first-child{*padding-left:200px}.form-horizontal .help-block{margin-bottom:0}.form-horizontal input+.help-block,.form-horizontal select+.help-block,.form-horizontal textarea+.help-block,.form-horizontal .uneditable-input+.help-block,.form-horizontal .input-prepend+.help-block,.form-horizontal .input-append+.help-block{margin-top:10px}.form-horizontal .form-actions{padding-left:200px}table{max-width:100%;background-color:transparent;border-collapse:collapse;border-spacing:0}.table{width:100%;margin-bottom:20px}.table th,.table td{padding:8px;line-height:20px;text-align:left;vertical-align:top;border-top:1px solid #ddd}.table th{font-weight:bold}.table thead th{vertical-align:bottom}.table caption+thead tr:first-child th,.table caption+thead tr:first-child td,.table colgroup+thead tr:first-child th,.table colgroup+thead tr:first-child td,.table thead:first-child tr:first-child th,.table thead:first-child tr:first-child td{border-top:0}.table tbody+tbody{border-top:2px solid #ddd}.table .table{background-color:#fff}.table-condensed th,.table-condensed td{padding:4px 5px}.table-bordered{border:1px solid #ddd;border-collapse:separate;*border-collapse:collapse;border-left:0;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px}.table-bordered th,.table-bordered td{border-left:1px solid #ddd}.table-bordered caption+thead tr:first-child th,.table-bordered caption+tbody tr:first-child th,.table-bordered caption+tbody tr:first-child td,.table-bordered colgroup+thead tr:first-child th,.table-bordered colgroup+tbody tr:first-child th,.table-bordered colgroup+tbody tr:first-child td,.table-bordered thead:first-child tr:first-child th,.table-bordered tbody:first-child tr:first-child th,.table-bordered tbody:first-child tr:first-child td{border-top:0}.table-bordered thead:first-child tr:first-child>th:first-child,.table-bordered tbody:first-child tr:first-child>td:first-child,.table-bordered tbody:first-child tr:first-child>th:first-child{-webkit-border-top-left-radius:4px;border-top-left-radius:4px;-moz-border-radius-topleft:4px}.table-bordered thead:first-child tr:first-child>th:last-child,.table-bordered tbody:first-child tr:first-child>td:last-child,.table-bordered tbody:first-child tr:first-child>th:last-child{-webkit-border-top-right-radius:4px;border-top-right-radius:4px;-moz-border-radius-topright:4px}.table-bordered thead:last-child tr:last-child>th:first-child,.table-bordered tbody:last-child tr:last-child>td:first-child,.table-bordered tbody:last-child tr:last-child>th:first-child,.table-bordered tfoot:last-child tr:last-child>td:first-child,.table-bordered tfoot:last-child tr:last-child>th:first-child{-webkit-border-bottom-left-radius:4px;border-bottom-left-radius:4px;-moz-border-radius-bottomleft:4px}.table-bordered thead:last-child tr:last-child>th:last-child,.table-bordered tbody:last-child tr:last-child>td:last-child,.table-bordered tbody:last-child tr:last-child>th:last-child,.table-bordered tfoot:last-child tr:last-child>td:last-child,.table-bordered tfoot:last-child tr:last-child>th:last-child{-webkit-border-bottom-right-radius:4px;border-bottom-right-radius:4px;-moz-border-radius-bottomright:4px}.table-bordered tfoot+tbody:last-child tr:last-child td:first-child{-webkit-border-bottom-left-radius:0;border-bottom-left-radius:0;-moz-border-radius-bottomleft:0}.table-bordered tfoot+tbody:last-child tr:last-child td:last-child{-webkit-border-bottom-right-radius:0;border-bottom-right-radius:0;-moz-border-radius-bottomright:0}.table-bordered caption+thead tr:first-child th:first-child,.table-bordered caption+tbody tr:first-child td:first-child,.table-bordered colgroup+thead tr:first-child th:first-child,.table-bordered colgroup+tbody tr:first-child td:first-child{-webkit-border-top-left-radius:4px;border-top-left-radius:4px;-moz-border-radius-topleft:4px}.table-bordered caption+thead tr:first-child th:last-child,.table-bordered caption+tbody tr:first-child td:last-child,.table-bordered colgroup+thead tr:first-child th:last-child,.table-bordered colgroup+tbody tr:first-child td:last-child{-webkit-border-top-right-radius:4px;border-top-right-radius:4px;-moz-border-radius-topright:4px}.table-striped tbody>tr:nth-child(odd)>td,.table-striped tbody>tr:nth-child(odd)>th{background-color:#f9f9f9}.table-hover tbody tr:hover>td,.table-hover tbody tr:hover>th{background-color:#f5f5f5}table td[class*=\"span\"],table th[class*=\"span\"],.row-fluid table td[class*=\"span\"],.row-fluid table th[class*=\"span\"]{display:table-cell;float:none;margin-left:0}.table td.span1,.table th.span1{float:none;width:44px;margin-left:0}.table td.span2,.table th.span2{float:none;width:124px;margin-left:0}.table td.span3,.table th.span3{float:none;width:204px;margin-left:0}.table td.span4,.table th.span4{float:none;width:284px;margin-left:0}.table td.span5,.table th.span5{float:none;width:364px;margin-left:0}.table td.span6,.table th.span6{float:none;width:444px;margin-left:0}.table td.span7,.table th.span7{float:none;width:524px;margin-left:0}.table td.span8,.table th.span8{float:none;width:604px;margin-left:0}.table td.span9,.table th.span9{float:none;width:684px;margin-left:0}.table td.span10,.table th.span10{float:none;width:764px;margin-left:0}.table td.span11,.table th.span11{float:none;width:844px;margin-left:0}.table td.span12,.table th.span12{float:none;width:924px;margin-left:0}.table tbody tr.success>td{background-color:#dff0d8}.table tbody tr.error>td{background-color:#f2dede}.table tbody tr.warning>td{background-color:#fcf8e3}.table tbody tr.info>td{background-color:#d9edf7}.table-hover tbody tr.success:hover>td{background-color:#d0e9c6}.table-hover tbody tr.error:hover>td{background-color:#ebcccc}.table-hover tbody tr.warning:hover>td{background-color:#faf2cc}.table-hover tbody tr.info:hover>td{background-color:#c4e3f3}[class^=\"icon-\"],[class*=\" icon-\"]{display:inline-block;width:14px;height:14px;margin-top:1px;*margin-right:.3em;line-height:14px;vertical-align:text-top;background-image:url(\"[[pix:theme|glyphicons-halflings]]\");background-position:14px 14px;background-repeat:no-repeat}.icon-white,.nav-pills>.active>a>[class^=\"icon-\"],.nav-pills>.active>a>[class*=\" icon-\"],.nav-list>.active>a>[class^=\"icon-\"],.nav-list>.active>a>[class*=\" icon-\"],.navbar-inverse .nav>.active>a>[class^=\"icon-\"],.navbar-inverse .nav>.active>a>[class*=\" icon-\"],.dropdown-menu>li>a:hover>[class^=\"icon-\"],.dropdown-menu>li>a:focus>[class^=\"icon-\"],.dropdown-menu>li>a:hover>[class*=\" icon-\"],.dropdown-menu>li>a:focus>[class*=\" icon-\"],.dropdown-menu>.active>a>[class^=\"icon-\"],.dropdown-menu>.active>a>[class*=\" icon-\"],.dropdown-submenu:hover>a>[class^=\"icon-\"],.dropdown-submenu:focus>a>[class^=\"icon-\"],.dropdown-submenu:hover>a>[class*=\" icon-\"],.dropdown-submenu:focus>a>[class*=\" icon-\"]{background-image:url(\"[[pix:theme|glyphicons-halflings-white]]\")}.icon-glass{background-position:0 0}.icon-music{background-position:-24px 0}.icon-search{background-position:-48px 0}.icon-envelope{background-position:-72px 0}.icon-heart{background-position:-96px 0}.icon-star{background-position:-120px 0}.icon-star-empty{background-position:-144px 0}.icon-user{background-position:-168px 0}.icon-film{background-position:-192px 0}.icon-th-large{background-position:-216px 0}.icon-th{background-position:-240px 0}.icon-th-list{background-position:-264px 0}.icon-ok{background-position:-288px 0}.icon-remove{background-position:-312px 0}.icon-zoom-in{background-position:-336px 0}.icon-zoom-out{background-position:-360px 0}.icon-off{background-position:-384px 0}.icon-signal{background-position:-408px 0}.icon-cog{background-position:-432px 0}.icon-trash{background-position:-456px 0}.icon-home{background-position:0 -24px}.icon-file{background-position:-24px -24px}.icon-time{background-position:-48px -24px}.icon-road{background-position:-72px -24px}.icon-download-alt{background-position:-96px -24px}.icon-download{background-position:-120px -24px}.icon-upload{background-position:-144px -24px}.icon-inbox{background-position:-168px -24px}.icon-play-circle{background-position:-192px -24px}.icon-repeat{background-position:-216px -24px}.icon-refresh{background-position:-240px -24px}.icon-list-alt{background-position:-264px -24px}.icon-lock{background-position:-287px -24px}.icon-flag{background-position:-312px -24px}.icon-headphones{background-position:-336px -24px}.icon-volume-off{background-position:-360px -24px}.icon-volume-down{background-position:-384px -24px}.icon-volume-up{background-position:-408px -24px}.icon-qrcode{background-position:-432px -24px}.icon-barcode{background-position:-456px -24px}.icon-tag{background-position:0 -48px}.icon-tags{background-position:-25px -48px}.icon-book{background-position:-48px -48px}.icon-bookmark{background-position:-72px -48px}.icon-print{background-position:-96px -48px}.icon-camera{background-position:-120px -48px}.icon-font{background-position:-144px -48px}.icon-bold{background-position:-167px -48px}.icon-italic{background-position:-192px -48px}.icon-text-height{background-position:-216px -48px}.icon-text-width{background-position:-240px -48px}.icon-align-left{background-position:-264px -48px}.icon-align-center{background-position:-288px -48px}.icon-align-right{background-position:-312px -48px}.icon-align-justify{background-position:-336px -48px}.icon-list{background-position:-360px -48px}.icon-indent-left{background-position:-384px -48px}.icon-indent-right{background-position:-408px -48px}.icon-facetime-video{background-position:-432px -48px}.icon-picture{background-position:-456px -48px}.icon-pencil{background-position:0 -72px}.icon-map-marker{background-position:-24px -72px}.icon-adjust{background-position:-48px -72px}.icon-tint{background-position:-72px -72px}.icon-edit{background-position:-96px -72px}.icon-share{background-position:-120px -72px}.icon-check{background-position:-144px -72px}.icon-move{background-position:-168px -72px}.icon-step-backward{background-position:-192px -72px}.icon-fast-backward{background-position:-216px -72px}.icon-backward{background-position:-240px -72px}.icon-play{background-position:-264px -72px}.icon-pause{background-position:-288px -72px}.icon-stop{background-position:-312px -72px}.icon-forward{background-position:-336px -72px}.icon-fast-forward{background-position:-360px -72px}.icon-step-forward{background-position:-384px -72px}.icon-eject{background-position:-408px -72px}.icon-chevron-left{background-position:-432px -72px}.icon-chevron-right{background-position:-456px -72px}.icon-plus-sign{background-position:0 -96px}.icon-minus-sign{background-position:-24px -96px}.icon-remove-sign{background-position:-48px -96px}.icon-ok-sign{background-position:-72px -96px}.icon-question-sign{background-position:-96px -96px}.icon-info-sign{background-position:-120px -96px}.icon-screenshot{background-position:-144px -96px}.icon-remove-circle{background-position:-168px -96px}.icon-ok-circle{background-position:-192px -96px}.icon-ban-circle{background-position:-216px -96px}.icon-arrow-left{background-position:-240px -96px}.icon-arrow-right{background-position:-264px -96px}.icon-arrow-up{background-position:-289px -96px}.icon-arrow-down{background-position:-312px -96px}.icon-share-alt{background-position:-336px -96px}.icon-resize-full{background-position:-360px -96px}.icon-resize-small{background-position:-384px -96px}.icon-plus{background-position:-408px -96px}.icon-minus{background-position:-433px -96px}.icon-asterisk{background-position:-456px -96px}.icon-exclamation-sign{background-position:0 -120px}.icon-gift{background-position:-24px -120px}.icon-leaf{background-position:-48px -120px}.icon-fire{background-position:-72px -120px}.icon-eye-open{background-position:-96px -120px}.icon-eye-close{background-position:-120px -120px}.icon-warning-sign{background-position:-144px -120px}.icon-plane{background-position:-168px -120px}.icon-calendar{background-position:-192px -120px}.icon-random{width:16px;background-position:-216px -120px}.icon-comment{background-position:-240px -120px}.icon-magnet{background-position:-264px -120px}.icon-chevron-up{background-position:-288px -120px}.icon-chevron-down{background-position:-313px -119px}.icon-retweet{background-position:-336px -120px}.icon-shopping-cart{background-position:-360px -120px}.icon-folder-close{width:16px;background-position:-384px -120px}.icon-folder-open{width:16px;background-position:-408px -120px}.icon-resize-vertical{background-position:-432px -119px}.icon-resize-horizontal{background-position:-456px -118px}.icon-hdd{background-position:0 -144px}.icon-bullhorn{background-position:-24px -144px}.icon-bell{background-position:-48px -144px}.icon-certificate{background-position:-72px -144px}.icon-thumbs-up{background-position:-96px -144px}.icon-thumbs-down{background-position:-120px -144px}.icon-hand-right{background-position:-144px -144px}.icon-hand-left{background-position:-168px -144px}.icon-hand-up{background-position:-192px -144px}.icon-hand-down{background-position:-216px -144px}.icon-circle-arrow-right{background-position:-240px -144px}.icon-circle-arrow-left{background-position:-264px -144px}.icon-circle-arrow-up{background-position:-288px -144px}.icon-circle-arrow-down{background-position:-312px -144px}.icon-globe{background-position:-336px -144px}.icon-wrench{background-position:-360px -144px}.icon-tasks{background-position:-384px -144px}.icon-filter{background-position:-408px -144px}.icon-briefcase{background-position:-432px -144px}.icon-fullscreen{background-position:-456px -144px}.dropup,.dropdown{position:relative}.dropdown-toggle{*margin-bottom:-3px}.dropdown-toggle:active,.open .dropdown-toggle{outline:0}.caret{display:inline-block;width:0;height:0;vertical-align:top;border-top:4px solid #000;border-right:4px solid transparent;border-left:4px solid transparent;content:\"\"}.dropdown .caret{margin-top:8px;margin-left:2px}.dropdown-menu{position:absolute;top:100%;left:0;z-index:1000;display:none;float:left;min-width:160px;padding:5px 0;margin:2px 0 0;list-style:none;background-color:#fff;border:1px solid #ccc;border:1px solid rgba(0,0,0,0.2);*border-right-width:2px;*border-bottom-width:2px;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;-webkit-box-shadow:0 5px 10px rgba(0,0,0,0.2);-moz-box-shadow:0 5px 10px rgba(0,0,0,0.2);box-shadow:0 5px 10px rgba(0,0,0,0.2);-webkit-background-clip:padding-box;-moz-background-clip:padding;background-clip:padding-box}.dropdown-menu.pull-right{right:0;left:auto}.dropdown-menu .divider{*width:100%;height:1px;margin:9px 1px;*margin:-5px 0 5px;overflow:hidden;background-color:#e5e5e5;border-bottom:1px solid #fff}.dropdown-menu>li>a{display:block;padding:3px 20px;clear:both;font-weight:normal;line-height:20px;color:#333;white-space:nowrap}.dropdown-menu>li>a:hover,.dropdown-menu>li>a:focus,.dropdown-submenu:hover>a,.dropdown-submenu:focus>a{color:#fff;text-decoration:none;background-color:#0081c2;background-image:-moz-linear-gradient(top,#08c,#0077b3);background-image:-webkit-gradient(linear,0 0,0 100%,from(#08c),to(#0077b3));background-image:-webkit-linear-gradient(top,#08c,#0077b3);background-image:-o-linear-gradient(top,#08c,#0077b3);background-image:linear-gradient(to bottom,#08c,#0077b3);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ff0088cc',endColorstr='#ff0077b3',GradientType=0)}.dropdown-menu>.active>a,.dropdown-menu>.active>a:hover,.dropdown-menu>.active>a:focus{color:#fff;text-decoration:none;background-color:#0081c2;background-image:-moz-linear-gradient(top,#08c,#0077b3);background-image:-webkit-gradient(linear,0 0,0 100%,from(#08c),to(#0077b3));background-image:-webkit-linear-gradient(top,#08c,#0077b3);background-image:-o-linear-gradient(top,#08c,#0077b3);background-image:linear-gradient(to bottom,#08c,#0077b3);background-repeat:repeat-x;outline:0;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ff0088cc',endColorstr='#ff0077b3',GradientType=0)}.dropdown-menu>.disabled>a,.dropdown-menu>.disabled>a:hover,.dropdown-menu>.disabled>a:focus{color:#999}.dropdown-menu>.disabled>a:hover,.dropdown-menu>.disabled>a:focus{text-decoration:none;cursor:default;background-color:transparent;background-image:none;filter:progid:DXImageTransform.Microsoft.gradient(enabled=false)}.open{*z-index:1000}.open>.dropdown-menu{display:block}.pull-right>.dropdown-menu{right:0;left:auto}.dropup .caret,.navbar-fixed-bottom .dropdown .caret{border-top:0;border-bottom:4px solid #000;content:\"\"}.dropup .dropdown-menu,.navbar-fixed-bottom .dropdown .dropdown-menu{top:auto;bottom:100%;margin-bottom:1px}.dropdown-submenu{position:relative}.dropdown-submenu>.dropdown-menu{top:0;left:100%;margin-top:-6px;margin-left:-1px;-webkit-border-radius:0 6px 6px 6px;-moz-border-radius:0 6px 6px 6px;border-radius:0 6px 6px 6px}.dropdown-submenu:hover>.dropdown-menu{display:block}.dropup .dropdown-submenu>.dropdown-menu{top:auto;bottom:0;margin-top:0;margin-bottom:-2px;-webkit-border-radius:5px 5px 5px 0;-moz-border-radius:5px 5px 5px 0;border-radius:5px 5px 5px 0}.dropdown-submenu>a:after{display:block;float:right;width:0;height:0;margin-top:5px;margin-right:-10px;border-color:transparent;border-left-color:#ccc;border-style:solid;border-width:5px 0 5px 5px;content:\" \"}.dropdown-submenu:hover>a:after{border-left-color:#fff}.dropdown-submenu.pull-left{float:none}.dropdown-submenu.pull-left>.dropdown-menu{left:-100%;margin-left:10px;-webkit-border-radius:6px 0 6px 6px;-moz-border-radius:6px 0 6px 6px;border-radius:6px 0 6px 6px}.dropdown .dropdown-menu .nav-header{padding-right:20px;padding-left:20px}.typeahead{z-index:1051;margin-top:2px;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px}.well{min-height:20px;padding:19px;margin-bottom:20px;background-color:#f5f5f5;border:1px solid #e3e3e3;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,0.05);-moz-box-shadow:inset 0 1px 1px rgba(0,0,0,0.05);box-shadow:inset 0 1px 1px rgba(0,0,0,0.05)}.well blockquote{border-color:#ddd;border-color:rgba(0,0,0,0.15)}.well-large{padding:24px;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px}.well-small{padding:9px;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px}.fade{opacity:0;-webkit-transition:opacity .15s linear;-moz-transition:opacity .15s linear;-o-transition:opacity .15s linear;transition:opacity .15s linear}.fade.in{opacity:1}.collapse{position:relative;height:0;overflow:hidden;-webkit-transition:height .35s ease;-moz-transition:height .35s ease;-o-transition:height .35s ease;transition:height .35s ease}.collapse.in{height:auto}.close{float:right;font-size:20px;font-weight:bold;line-height:20px;color:#000;text-shadow:0 1px 0 #fff;opacity:.2;filter:alpha(opacity=20)}.close:hover,.close:focus{color:#000;text-decoration:none;cursor:pointer;opacity:.4;filter:alpha(opacity=40)}button.close{padding:0;cursor:pointer;background:transparent;border:0;-webkit-appearance:none}.btn{display:inline-block;*display:inline;padding:4px 12px;margin-bottom:0;*margin-left:.3em;font-size:14px;line-height:20px;color:#333;text-align:center;text-shadow:0 1px 1px rgba(255,255,255,0.75);vertical-align:middle;cursor:pointer;background-color:#f5f5f5;*background-color:#e6e6e6;background-image:-moz-linear-gradient(top,#fff,#e6e6e6);background-image:-webkit-gradient(linear,0 0,0 100%,from(#fff),to(#e6e6e6));background-image:-webkit-linear-gradient(top,#fff,#e6e6e6);background-image:-o-linear-gradient(top,#fff,#e6e6e6);background-image:linear-gradient(to bottom,#fff,#e6e6e6);background-repeat:repeat-x;border:1px solid #ccc;*border:0;border-color:#e6e6e6 #e6e6e6 #bfbfbf;border-color:rgba(0,0,0,0.1) rgba(0,0,0,0.1) rgba(0,0,0,0.25);border-bottom-color:#b3b3b3;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffffff',endColorstr='#ffe6e6e6',GradientType=0);filter:progid:DXImageTransform.Microsoft.gradient(enabled=false);*zoom:1;-webkit-box-shadow:inset 0 1px 0 rgba(255,255,255,0.2),0 1px 2px rgba(0,0,0,0.05);-moz-box-shadow:inset 0 1px 0 rgba(255,255,255,0.2),0 1px 2px rgba(0,0,0,0.05);box-shadow:inset 0 1px 0 rgba(255,255,255,0.2),0 1px 2px rgba(0,0,0,0.05)}.btn:hover,.btn:focus,.btn:active,.btn.active,.btn.disabled,.btn[disabled]{color:#333;background-color:#e6e6e6;*background-color:#d9d9d9}.btn:active,.btn.active{background-color:#ccc \\9}.btn:first-child{*margin-left:0}.btn:hover,.btn:focus{color:#333;text-decoration:none;background-position:0 -15px;-webkit-transition:background-position .1s linear;-moz-transition:background-position .1s linear;-o-transition:background-position .1s linear;transition:background-position .1s linear}.btn:focus{outline:thin dotted #333;outline:5px auto -webkit-focus-ring-color;outline-offset:-2px}.btn.active,.btn:active{background-image:none;outline:0;-webkit-box-shadow:inset 0 2px 4px rgba(0,0,0,0.15),0 1px 2px rgba(0,0,0,0.05);-moz-box-shadow:inset 0 2px 4px rgba(0,0,0,0.15),0 1px 2px rgba(0,0,0,0.05);box-shadow:inset 0 2px 4px rgba(0,0,0,0.15),0 1px 2px rgba(0,0,0,0.05)}.btn.disabled,.btn[disabled]{cursor:default;background-image:none;opacity:.65;filter:alpha(opacity=65);-webkit-box-shadow:none;-moz-box-shadow:none;box-shadow:none}.btn-large{padding:11px 19px;font-size:17.5px;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px}.btn-large [class^=\"icon-\"],.btn-large [class*=\" icon-\"]{margin-top:4px}.btn-small{padding:2px 10px;font-size:11.9px;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px}.btn-small [class^=\"icon-\"],.btn-small [class*=\" icon-\"]{margin-top:0}.btn-mini [class^=\"icon-\"],.btn-mini [class*=\" icon-\"]{margin-top:-1px}.btn-mini{padding:0 6px;font-size:10.5px;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px}.btn-block{display:block;width:100%;padding-right:0;padding-left:0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.btn-block+.btn-block{margin-top:5px}input[type=\"submit\"].btn-block,input[type=\"reset\"].btn-block,input[type=\"button\"].btn-block{width:100%}.btn-primary.active,.btn-warning.active,.btn-danger.active,.btn-success.active,.btn-info.active,.btn-inverse.active{color:rgba(255,255,255,0.75)}.btn-primary{color:#fff;text-shadow:0 -1px 0 rgba(0,0,0,0.25);background-color:#006dcc;*background-color:#04c;background-image:-moz-linear-gradient(top,#08c,#04c);background-image:-webkit-gradient(linear,0 0,0 100%,from(#08c),to(#04c));background-image:-webkit-linear-gradient(top,#08c,#04c);background-image:-o-linear-gradient(top,#08c,#04c);background-image:linear-gradient(to bottom,#08c,#04c);background-repeat:repeat-x;border-color:#04c #04c #002a80;border-color:rgba(0,0,0,0.1) rgba(0,0,0,0.1) rgba(0,0,0,0.25);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ff0088cc',endColorstr='#ff0044cc',GradientType=0);filter:progid:DXImageTransform.Microsoft.gradient(enabled=false)}.btn-primary:hover,.btn-primary:focus,.btn-primary:active,.btn-primary.active,.btn-primary.disabled,.btn-primary[disabled]{color:#fff;background-color:#04c;*background-color:#003bb3}.btn-primary:active,.btn-primary.active{background-color:#039 \\9}.btn-warning{color:#fff;text-shadow:0 -1px 0 rgba(0,0,0,0.25);background-color:#faa732;*background-color:#f89406;background-image:-moz-linear-gradient(top,#fbb450,#f89406);background-image:-webkit-gradient(linear,0 0,0 100%,from(#fbb450),to(#f89406));background-image:-webkit-linear-gradient(top,#fbb450,#f89406);background-image:-o-linear-gradient(top,#fbb450,#f89406);background-image:linear-gradient(to bottom,#fbb450,#f89406);background-repeat:repeat-x;border-color:#f89406 #f89406 #ad6704;border-color:rgba(0,0,0,0.1) rgba(0,0,0,0.1) rgba(0,0,0,0.25);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#fffbb450',endColorstr='#fff89406',GradientType=0);filter:progid:DXImageTransform.Microsoft.gradient(enabled=false)}.btn-warning:hover,.btn-warning:focus,.btn-warning:active,.btn-warning.active,.btn-warning.disabled,.btn-warning[disabled]{color:#fff;background-color:#f89406;*background-color:#df8505}.btn-warning:active,.btn-warning.active{background-color:#c67605 \\9}.btn-danger{color:#fff;text-shadow:0 -1px 0 rgba(0,0,0,0.25);background-color:#da4f49;*background-color:#bd362f;background-image:-moz-linear-gradient(top,#ee5f5b,#bd362f);background-image:-webkit-gradient(linear,0 0,0 100%,from(#ee5f5b),to(#bd362f));background-image:-webkit-linear-gradient(top,#ee5f5b,#bd362f);background-image:-o-linear-gradient(top,#ee5f5b,#bd362f);background-image:linear-gradient(to bottom,#ee5f5b,#bd362f);background-repeat:repeat-x;border-color:#bd362f #bd362f #802420;border-color:rgba(0,0,0,0.1) rgba(0,0,0,0.1) rgba(0,0,0,0.25);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffee5f5b',endColorstr='#ffbd362f',GradientType=0);filter:progid:DXImageTransform.Microsoft.gradient(enabled=false)}.btn-danger:hover,.btn-danger:focus,.btn-danger:active,.btn-danger.active,.btn-danger.disabled,.btn-danger[disabled]{color:#fff;background-color:#bd362f;*background-color:#a9302a}.btn-danger:active,.btn-danger.active{background-color:#942a25 \\9}.btn-success{color:#fff;text-shadow:0 -1px 0 rgba(0,0,0,0.25);background-color:#5bb75b;*background-color:#51a351;background-image:-moz-linear-gradient(top,#62c462,#51a351);background-image:-webkit-gradient(linear,0 0,0 100%,from(#62c462),to(#51a351));background-image:-webkit-linear-gradient(top,#62c462,#51a351);background-image:-o-linear-gradient(top,#62c462,#51a351);background-image:linear-gradient(to bottom,#62c462,#51a351);background-repeat:repeat-x;border-color:#51a351 #51a351 #387038;border-color:rgba(0,0,0,0.1) rgba(0,0,0,0.1) rgba(0,0,0,0.25);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ff62c462',endColorstr='#ff51a351',GradientType=0);filter:progid:DXImageTransform.Microsoft.gradient(enabled=false)}.btn-success:hover,.btn-success:focus,.btn-success:active,.btn-success.active,.btn-success.disabled,.btn-success[disabled]{color:#fff;background-color:#51a351;*background-color:#499249}.btn-success:active,.btn-success.active{background-color:#408140 \\9}.btn-info{color:#fff;text-shadow:0 -1px 0 rgba(0,0,0,0.25);background-color:#49afcd;*background-color:#2f96b4;background-image:-moz-linear-gradient(top,#5bc0de,#2f96b4);background-image:-webkit-gradient(linear,0 0,0 100%,from(#5bc0de),to(#2f96b4));background-image:-webkit-linear-gradient(top,#5bc0de,#2f96b4);background-image:-o-linear-gradient(top,#5bc0de,#2f96b4);background-image:linear-gradient(to bottom,#5bc0de,#2f96b4);background-repeat:repeat-x;border-color:#2f96b4 #2f96b4 #1f6377;border-color:rgba(0,0,0,0.1) rgba(0,0,0,0.1) rgba(0,0,0,0.25);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ff5bc0de',endColorstr='#ff2f96b4',GradientType=0);filter:progid:DXImageTransform.Microsoft.gradient(enabled=false)}.btn-info:hover,.btn-info:focus,.btn-info:active,.btn-info.active,.btn-info.disabled,.btn-info[disabled]{color:#fff;background-color:#2f96b4;*background-color:#2a85a0}.btn-info:active,.btn-info.active{background-color:#24748c \\9}.btn-inverse{color:#fff;text-shadow:0 -1px 0 rgba(0,0,0,0.25);background-color:#363636;*background-color:#222;background-image:-moz-linear-gradient(top,#444,#222);background-image:-webkit-gradient(linear,0 0,0 100%,from(#444),to(#222));background-image:-webkit-linear-gradient(top,#444,#222);background-image:-o-linear-gradient(top,#444,#222);background-image:linear-gradient(to bottom,#444,#222);background-repeat:repeat-x;border-color:#222 #222 #000;border-color:rgba(0,0,0,0.1) rgba(0,0,0,0.1) rgba(0,0,0,0.25);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ff444444',endColorstr='#ff222222',GradientType=0);filter:progid:DXImageTransform.Microsoft.gradient(enabled=false)}.btn-inverse:hover,.btn-inverse:focus,.btn-inverse:active,.btn-inverse.active,.btn-inverse.disabled,.btn-inverse[disabled]{color:#fff;background-color:#222;*background-color:#151515}.btn-inverse:active,.btn-inverse.active{background-color:#080808 \\9}button.btn,input[type=\"submit\"].btn{*padding-top:3px;*padding-bottom:3px}button.btn::-moz-focus-inner,input[type=\"submit\"].btn::-moz-focus-inner{padding:0;border:0}button.btn.btn-large,input[type=\"submit\"].btn.btn-large{*padding-top:7px;*padding-bottom:7px}button.btn.btn-small,input[type=\"submit\"].btn.btn-small{*padding-top:3px;*padding-bottom:3px}button.btn.btn-mini,input[type=\"submit\"].btn.btn-mini{*padding-top:1px;*padding-bottom:1px}.btn-link,.btn-link:active,.btn-link[disabled]{background-color:transparent;background-image:none;-webkit-box-shadow:none;-moz-box-shadow:none;box-shadow:none}.btn-link{color:#08c;cursor:pointer;border-color:transparent;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.btn-link:hover,.btn-link:focus{color:#005580;text-decoration:underline;background-color:transparent}.btn-link[disabled]:hover,.btn-link[disabled]:focus{color:#333;text-decoration:none}.btn-group{position:relative;display:inline-block;*display:inline;*margin-left:.3em;font-size:0;white-space:nowrap;vertical-align:middle;*zoom:1}.btn-group:first-child{*margin-left:0}.btn-group+.btn-group{margin-left:5px}.btn-toolbar{margin-top:10px;margin-bottom:10px;font-size:0}.btn-toolbar>.btn+.btn,.btn-toolbar>.btn-group+.btn,.btn-toolbar>.btn+.btn-group{margin-left:5px}.btn-group>.btn{position:relative;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.btn-group>.btn+.btn{margin-left:-1px}.btn-group>.btn,.btn-group>.dropdown-menu,.btn-group>.popover{font-size:14px}.btn-group>.btn-mini{font-size:10.5px}.btn-group>.btn-small{font-size:11.9px}.btn-group>.btn-large{font-size:17.5px}.btn-group>.btn:first-child{margin-left:0;-webkit-border-bottom-left-radius:4px;border-bottom-left-radius:4px;-webkit-border-top-left-radius:4px;border-top-left-radius:4px;-moz-border-radius-bottomleft:4px;-moz-border-radius-topleft:4px}.btn-group>.btn:last-child,.btn-group>.dropdown-toggle{-webkit-border-top-right-radius:4px;border-top-right-radius:4px;-webkit-border-bottom-right-radius:4px;border-bottom-right-radius:4px;-moz-border-radius-topright:4px;-moz-border-radius-bottomright:4px}.btn-group>.btn.large:first-child{margin-left:0;-webkit-border-bottom-left-radius:6px;border-bottom-left-radius:6px;-webkit-border-top-left-radius:6px;border-top-left-radius:6px;-moz-border-radius-bottomleft:6px;-moz-border-radius-topleft:6px}.btn-group>.btn.large:last-child,.btn-group>.large.dropdown-toggle{-webkit-border-top-right-radius:6px;border-top-right-radius:6px;-webkit-border-bottom-right-radius:6px;border-bottom-right-radius:6px;-moz-border-radius-topright:6px;-moz-border-radius-bottomright:6px}.btn-group>.btn:hover,.btn-group>.btn:focus,.btn-group>.btn:active,.btn-group>.btn.active{z-index:2}.btn-group .dropdown-toggle:active,.btn-group.open .dropdown-toggle{outline:0}.btn-group>.btn+.dropdown-toggle{*padding-top:5px;padding-right:8px;*padding-bottom:5px;padding-left:8px;-webkit-box-shadow:inset 1px 0 0 rgba(255,255,255,0.125),inset 0 1px 0 rgba(255,255,255,0.2),0 1px 2px rgba(0,0,0,0.05);-moz-box-shadow:inset 1px 0 0 rgba(255,255,255,0.125),inset 0 1px 0 rgba(255,255,255,0.2),0 1px 2px rgba(0,0,0,0.05);box-shadow:inset 1px 0 0 rgba(255,255,255,0.125),inset 0 1px 0 rgba(255,255,255,0.2),0 1px 2px rgba(0,0,0,0.05)}.btn-group>.btn-mini+.dropdown-toggle{*padding-top:2px;padding-right:5px;*padding-bottom:2px;padding-left:5px}.btn-group>.btn-small+.dropdown-toggle{*padding-top:5px;*padding-bottom:4px}.btn-group>.btn-large+.dropdown-toggle{*padding-top:7px;padding-right:12px;*padding-bottom:7px;padding-left:12px}.btn-group.open .dropdown-toggle{background-image:none;-webkit-box-shadow:inset 0 2px 4px rgba(0,0,0,0.15),0 1px 2px rgba(0,0,0,0.05);-moz-box-shadow:inset 0 2px 4px rgba(0,0,0,0.15),0 1px 2px rgba(0,0,0,0.05);box-shadow:inset 0 2px 4px rgba(0,0,0,0.15),0 1px 2px rgba(0,0,0,0.05)}.btn-group.open .btn.dropdown-toggle{background-color:#e6e6e6}.btn-group.open .btn-primary.dropdown-toggle{background-color:#04c}.btn-group.open .btn-warning.dropdown-toggle{background-color:#f89406}.btn-group.open .btn-danger.dropdown-toggle{background-color:#bd362f}.btn-group.open .btn-success.dropdown-toggle{background-color:#51a351}.btn-group.open .btn-info.dropdown-toggle{background-color:#2f96b4}.btn-group.open .btn-inverse.dropdown-toggle{background-color:#222}.btn .caret{margin-top:8px;margin-left:0}.btn-large .caret{margin-top:6px}.btn-large .caret{border-top-width:5px;border-right-width:5px;border-left-width:5px}.btn-mini .caret,.btn-small .caret{margin-top:8px}.dropup .btn-large .caret{border-bottom-width:5px}.btn-primary .caret,.btn-warning .caret,.btn-danger .caret,.btn-info .caret,.btn-success .caret,.btn-inverse .caret{border-top-color:#fff;border-bottom-color:#fff}.btn-group-vertical{display:inline-block;*display:inline;*zoom:1}.btn-group-vertical>.btn{display:block;float:none;max-width:100%;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.btn-group-vertical>.btn+.btn{margin-top:-1px;margin-left:0}.btn-group-vertical>.btn:first-child{-webkit-border-radius:4px 4px 0 0;-moz-border-radius:4px 4px 0 0;border-radius:4px 4px 0 0}.btn-group-vertical>.btn:last-child{-webkit-border-radius:0 0 4px 4px;-moz-border-radius:0 0 4px 4px;border-radius:0 0 4px 4px}.btn-group-vertical>.btn-large:first-child{-webkit-border-radius:6px 6px 0 0;-moz-border-radius:6px 6px 0 0;border-radius:6px 6px 0 0}.btn-group-vertical>.btn-large:last-child{-webkit-border-radius:0 0 6px 6px;-moz-border-radius:0 0 6px 6px;border-radius:0 0 6px 6px}.alert{padding:8px 35px 8px 14px;margin-bottom:20px;text-shadow:0 1px 0 rgba(255,255,255,0.5);background-color:#fcf8e3;border:1px solid #fbeed5;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px}.alert,.alert h4{color:#c09853}.alert h4{margin:0}.alert .close{position:relative;top:-2px;right:-21px;line-height:20px}.alert-success{color:#468847;background-color:#dff0d8;border-color:#d6e9c6}.alert-success h4{color:#468847}.alert-danger,.alert-error{color:#b94a48;background-color:#f2dede;border-color:#eed3d7}.alert-danger h4,.alert-error h4{color:#b94a48}.alert-info{color:#3a87ad;background-color:#d9edf7;border-color:#bce8f1}.alert-info h4{color:#3a87ad}.alert-block{padding-top:14px;padding-bottom:14px}.alert-block>p,.alert-block>ul{margin-bottom:0}.alert-block p+p{margin-top:5px}.nav{margin-bottom:20px;margin-left:0;list-style:none}.nav>li>a{display:block}.nav>li>a:hover,.nav>li>a:focus{text-decoration:none;background-color:#eee}.nav>li>a>img{max-width:none}.nav>.pull-right{float:right}.nav-header{display:block;padding:3px 15px;font-size:11px;font-weight:bold;line-height:20px;color:#999;text-shadow:0 1px 0 rgba(255,255,255,0.5);text-transform:uppercase}.nav li+.nav-header{margin-top:9px}.nav-list{padding-right:15px;padding-left:15px;margin-bottom:0}.nav-list>li>a,.nav-list .nav-header{margin-right:-15px;margin-left:-15px;text-shadow:0 1px 0 rgba(255,255,255,0.5)}.nav-list>li>a{padding:3px 15px}.nav-list>.active>a,.nav-list>.active>a:hover,.nav-list>.active>a:focus{color:#fff;text-shadow:0 -1px 0 rgba(0,0,0,0.2);background-color:#08c}.nav-list [class^=\"icon-\"],.nav-list [class*=\" icon-\"]{margin-right:2px}.nav-list .divider{*width:100%;height:1px;margin:9px 1px;*margin:-5px 0 5px;overflow:hidden;background-color:#e5e5e5;border-bottom:1px solid #fff}.nav-tabs,.nav-pills{*zoom:1}.nav-tabs:before,.nav-pills:before,.nav-tabs:after,.nav-pills:after{display:table;line-height:0;content:\"\"}.nav-tabs:after,.nav-pills:after{clear:both}.nav-tabs>li,.nav-pills>li{float:left}.nav-tabs>li>a,.nav-pills>li>a{padding-right:12px;padding-left:12px;margin-right:2px;line-height:14px}.nav-tabs{border-bottom:1px solid #ddd}.nav-tabs>li{margin-bottom:-1px}.nav-tabs>li>a{padding-top:8px;padding-bottom:8px;line-height:20px;border:1px solid transparent;-webkit-border-radius:4px 4px 0 0;-moz-border-radius:4px 4px 0 0;border-radius:4px 4px 0 0}.nav-tabs>li>a:hover,.nav-tabs>li>a:focus{border-color:#eee #eee #ddd}.nav-tabs>.active>a,.nav-tabs>.active>a:hover,.nav-tabs>.active>a:focus{color:#555;cursor:default;background-color:#fff;border:1px solid #ddd;border-bottom-color:transparent}.nav-pills>li>a{padding-top:8px;padding-bottom:8px;margin-top:2px;margin-bottom:2px;-webkit-border-radius:5px;-moz-border-radius:5px;border-radius:5px}.nav-pills>.active>a,.nav-pills>.active>a:hover,.nav-pills>.active>a:focus{color:#fff;background-color:#08c}.nav-stacked>li{float:none}.nav-stacked>li>a{margin-right:0}.nav-tabs.nav-stacked{border-bottom:0}.nav-tabs.nav-stacked>li>a{border:1px solid #ddd;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.nav-tabs.nav-stacked>li:first-child>a{-webkit-border-top-right-radius:4px;border-top-right-radius:4px;-webkit-border-top-left-radius:4px;border-top-left-radius:4px;-moz-border-radius-topright:4px;-moz-border-radius-topleft:4px}.nav-tabs.nav-stacked>li:last-child>a{-webkit-border-bottom-right-radius:4px;border-bottom-right-radius:4px;-webkit-border-bottom-left-radius:4px;border-bottom-left-radius:4px;-moz-border-radius-bottomright:4px;-moz-border-radius-bottomleft:4px}.nav-tabs.nav-stacked>li>a:hover,.nav-tabs.nav-stacked>li>a:focus{z-index:2;border-color:#ddd}.nav-pills.nav-stacked>li>a{margin-bottom:3px}.nav-pills.nav-stacked>li:last-child>a{margin-bottom:1px}.nav-tabs .dropdown-menu{-webkit-border-radius:0 0 6px 6px;-moz-border-radius:0 0 6px 6px;border-radius:0 0 6px 6px}.nav-pills .dropdown-menu{-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px}.nav .dropdown-toggle .caret{margin-top:6px;border-top-color:#08c;border-bottom-color:#08c}.nav .dropdown-toggle:hover .caret,.nav .dropdown-toggle:focus .caret{border-top-color:#005580;border-bottom-color:#005580}.nav-tabs .dropdown-toggle .caret{margin-top:8px}.nav .active .dropdown-toggle .caret{border-top-color:#fff;border-bottom-color:#fff}.nav-tabs .active .dropdown-toggle .caret{border-top-color:#555;border-bottom-color:#555}.nav>.dropdown.active>a:hover,.nav>.dropdown.active>a:focus{cursor:pointer}.nav-tabs .open .dropdown-toggle,.nav-pills .open .dropdown-toggle,.nav>li.dropdown.open.active>a:hover,.nav>li.dropdown.open.active>a:focus{color:#fff;background-color:#999;border-color:#999}.nav li.dropdown.open .caret,.nav li.dropdown.open.active .caret,.nav li.dropdown.open a:hover .caret,.nav li.dropdown.open a:focus .caret{border-top-color:#fff;border-bottom-color:#fff;opacity:1;filter:alpha(opacity=100)}.tabs-stacked .open>a:hover,.tabs-stacked .open>a:focus{border-color:#999}.tabbable{*zoom:1}.tabbable:before,.tabbable:after{display:table;line-height:0;content:\"\"}.tabbable:after{clear:both}.tab-content{overflow:auto}.tabs-below>.nav-tabs,.tabs-right>.nav-tabs,.tabs-left>.nav-tabs{border-bottom:0}.tab-content>.tab-pane,.pill-content>.pill-pane{display:none}.tab-content>.active,.pill-content>.active{display:block}.tabs-below>.nav-tabs{border-top:1px solid #ddd}.tabs-below>.nav-tabs>li{margin-top:-1px;margin-bottom:0}.tabs-below>.nav-tabs>li>a{-webkit-border-radius:0 0 4px 4px;-moz-border-radius:0 0 4px 4px;border-radius:0 0 4px 4px}.tabs-below>.nav-tabs>li>a:hover,.tabs-below>.nav-tabs>li>a:focus{border-top-color:#ddd;border-bottom-color:transparent}.tabs-below>.nav-tabs>.active>a,.tabs-below>.nav-tabs>.active>a:hover,.tabs-below>.nav-tabs>.active>a:focus{border-color:transparent #ddd #ddd #ddd}.tabs-left>.nav-tabs>li,.tabs-right>.nav-tabs>li{float:none}.tabs-left>.nav-tabs>li>a,.tabs-right>.nav-tabs>li>a{min-width:74px;margin-right:0;margin-bottom:3px}.tabs-left>.nav-tabs{float:left;margin-right:19px;border-right:1px solid #ddd}.tabs-left>.nav-tabs>li>a{margin-right:-1px;-webkit-border-radius:4px 0 0 4px;-moz-border-radius:4px 0 0 4px;border-radius:4px 0 0 4px}.tabs-left>.nav-tabs>li>a:hover,.tabs-left>.nav-tabs>li>a:focus{border-color:#eee #ddd #eee #eee}.tabs-left>.nav-tabs .active>a,.tabs-left>.nav-tabs .active>a:hover,.tabs-left>.nav-tabs .active>a:focus{border-color:#ddd transparent #ddd #ddd;*border-right-color:#fff}.tabs-right>.nav-tabs{float:right;margin-left:19px;border-left:1px solid #ddd}.tabs-right>.nav-tabs>li>a{margin-left:-1px;-webkit-border-radius:0 4px 4px 0;-moz-border-radius:0 4px 4px 0;border-radius:0 4px 4px 0}.tabs-right>.nav-tabs>li>a:hover,.tabs-right>.nav-tabs>li>a:focus{border-color:#eee #eee #eee #ddd}.tabs-right>.nav-tabs .active>a,.tabs-right>.nav-tabs .active>a:hover,.tabs-right>.nav-tabs .active>a:focus{border-color:#ddd #ddd #ddd transparent;*border-left-color:#fff}.nav>.disabled>a{color:#999}.nav>.disabled>a:hover,.nav>.disabled>a:focus{text-decoration:none;cursor:default;background-color:transparent}.navbar{*position:relative;*z-index:2;margin-bottom:20px;overflow:visible}.navbar-inner{min-height:40px;padding-right:20px;padding-left:20px;background-color:#fafafa;background-image:-moz-linear-gradient(top,#fff,#f2f2f2);background-image:-webkit-gradient(linear,0 0,0 100%,from(#fff),to(#f2f2f2));background-image:-webkit-linear-gradient(top,#fff,#f2f2f2);background-image:-o-linear-gradient(top,#fff,#f2f2f2);background-image:linear-gradient(to bottom,#fff,#f2f2f2);background-repeat:repeat-x;border:1px solid #d4d4d4;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffffff',endColorstr='#fff2f2f2',GradientType=0);*zoom:1;-webkit-box-shadow:0 1px 4px rgba(0,0,0,0.065);-moz-box-shadow:0 1px 4px rgba(0,0,0,0.065);box-shadow:0 1px 4px rgba(0,0,0,0.065)}.navbar-inner:before,.navbar-inner:after{display:table;line-height:0;content:\"\"}.navbar-inner:after{clear:both}.navbar .container{width:auto}.nav-collapse.collapse{height:auto;overflow:visible}.navbar .brand{display:block;float:left;padding:10px 20px 10px;margin-left:-20px;font-size:20px;font-weight:200;color:#777;text-shadow:0 1px 0 #fff}.navbar .brand:hover,.navbar .brand:focus{text-decoration:none}.navbar-text{margin-bottom:0;line-height:40px;color:#777}.navbar-link{color:#777}.navbar-link:hover,.navbar-link:focus{color:#333}.navbar .divider-vertical{height:40px;margin:0 9px;border-right:1px solid #fff;border-left:1px solid #f2f2f2}.navbar .btn,.navbar .btn-group{margin-top:5px}.navbar .btn-group .btn,.navbar .input-prepend .btn,.navbar .input-append .btn,.navbar .input-prepend .btn-group,.navbar .input-append .btn-group{margin-top:0}.navbar-form{margin-bottom:0;*zoom:1}.navbar-form:before,.navbar-form:after{display:table;line-height:0;content:\"\"}.navbar-form:after{clear:both}.navbar-form input,.navbar-form select,.navbar-form .radio,.navbar-form .checkbox{margin-top:5px}.navbar-form input,.navbar-form select,.navbar-form .btn{display:inline-block;margin-bottom:0}.navbar-form input[type=\"image\"],.navbar-form input[type=\"checkbox\"],.navbar-form input[type=\"radio\"]{margin-top:3px}.navbar-form .input-append,.navbar-form .input-prepend{margin-top:5px;white-space:nowrap}.navbar-form .input-append input,.navbar-form .input-prepend input{margin-top:0}.navbar-search{position:relative;float:left;margin-top:5px;margin-bottom:0}.navbar-search .search-query{padding:4px 14px;margin-bottom:0;font-family:\"Helvetica Neue\",Helvetica,Arial,sans-serif;font-size:13px;font-weight:normal;line-height:1;-webkit-border-radius:15px;-moz-border-radius:15px;border-radius:15px}.navbar-static-top{position:static;margin-bottom:0}.navbar-static-top .navbar-inner{-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.navbar-fixed-top,.navbar-fixed-bottom{position:fixed;right:0;left:0;z-index:1030;margin-bottom:0}.navbar-fixed-top .navbar-inner,.navbar-static-top .navbar-inner{border-width:0 0 1px}.navbar-fixed-bottom .navbar-inner{border-width:1px 0 0}.navbar-fixed-top .navbar-inner,.navbar-fixed-bottom .navbar-inner{padding-right:0;padding-left:0;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.navbar-static-top .container,.navbar-fixed-top .container,.navbar-fixed-bottom .container{width:940px}.navbar-fixed-top{top:0}.navbar-fixed-top .navbar-inner,.navbar-static-top .navbar-inner{-webkit-box-shadow:0 1px 10px rgba(0,0,0,0.1);-moz-box-shadow:0 1px 10px rgba(0,0,0,0.1);box-shadow:0 1px 10px rgba(0,0,0,0.1)}.navbar-fixed-bottom{bottom:0}.navbar-fixed-bottom .navbar-inner{-webkit-box-shadow:0 -1px 10px rgba(0,0,0,0.1);-moz-box-shadow:0 -1px 10px rgba(0,0,0,0.1);box-shadow:0 -1px 10px rgba(0,0,0,0.1)}.navbar .nav{position:relative;left:0;display:block;float:left;margin:0 10px 0 0}.navbar .nav.pull-right{float:right;margin-right:0}.navbar .nav>li{float:left}.navbar .nav>li>a{float:none;padding:10px 15px 10px;color:#777;text-decoration:none;text-shadow:0 1px 0 #fff}.navbar .nav .dropdown-toggle .caret{margin-top:8px}.navbar .nav>li>a:focus,.navbar .nav>li>a:hover{color:#333;text-decoration:none;background-color:transparent}.navbar .nav>.active>a,.navbar .nav>.active>a:hover,.navbar .nav>.active>a:focus{color:#555;text-decoration:none;background-color:#e5e5e5;-webkit-box-shadow:inset 0 3px 8px rgba(0,0,0,0.125);-moz-box-shadow:inset 0 3px 8px rgba(0,0,0,0.125);box-shadow:inset 0 3px 8px rgba(0,0,0,0.125)}.navbar .btn-navbar{display:none;float:right;padding:7px 10px;margin-right:5px;margin-left:5px;color:#fff;text-shadow:0 -1px 0 rgba(0,0,0,0.25);background-color:#ededed;*background-color:#e5e5e5;background-image:-moz-linear-gradient(top,#f2f2f2,#e5e5e5);background-image:-webkit-gradient(linear,0 0,0 100%,from(#f2f2f2),to(#e5e5e5));background-image:-webkit-linear-gradient(top,#f2f2f2,#e5e5e5);background-image:-o-linear-gradient(top,#f2f2f2,#e5e5e5);background-image:linear-gradient(to bottom,#f2f2f2,#e5e5e5);background-repeat:repeat-x;border-color:#e5e5e5 #e5e5e5 #bfbfbf;border-color:rgba(0,0,0,0.1) rgba(0,0,0,0.1) rgba(0,0,0,0.25);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#fff2f2f2',endColorstr='#ffe5e5e5',GradientType=0);filter:progid:DXImageTransform.Microsoft.gradient(enabled=false);-webkit-box-shadow:inset 0 1px 0 rgba(255,255,255,0.1),0 1px 0 rgba(255,255,255,0.075);-moz-box-shadow:inset 0 1px 0 rgba(255,255,255,0.1),0 1px 0 rgba(255,255,255,0.075);box-shadow:inset 0 1px 0 rgba(255,255,255,0.1),0 1px 0 rgba(255,255,255,0.075)}.navbar .btn-navbar:hover,.navbar .btn-navbar:focus,.navbar .btn-navbar:active,.navbar .btn-navbar.active,.navbar .btn-navbar.disabled,.navbar .btn-navbar[disabled]{color:#fff;background-color:#e5e5e5;*background-color:#d9d9d9}.navbar .btn-navbar:active,.navbar .btn-navbar.active{background-color:#ccc \\9}.navbar .btn-navbar .icon-bar{display:block;width:18px;height:2px;background-color:#f5f5f5;-webkit-border-radius:1px;-moz-border-radius:1px;border-radius:1px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,0.25);-moz-box-shadow:0 1px 0 rgba(0,0,0,0.25);box-shadow:0 1px 0 rgba(0,0,0,0.25)}.btn-navbar .icon-bar+.icon-bar{margin-top:3px}.navbar .nav>li>.dropdown-menu:before{position:absolute;top:-7px;left:9px;display:inline-block;border-right:7px solid transparent;border-bottom:7px solid #ccc;border-left:7px solid transparent;border-bottom-color:rgba(0,0,0,0.2);content:''}.navbar .nav>li>.dropdown-menu:after{position:absolute;top:-6px;left:10px;display:inline-block;border-right:6px solid transparent;border-bottom:6px solid #fff;border-left:6px solid transparent;content:''}.navbar-fixed-bottom .nav>li>.dropdown-menu:before{top:auto;bottom:-7px;border-top:7px solid #ccc;border-bottom:0;border-top-color:rgba(0,0,0,0.2)}.navbar-fixed-bottom .nav>li>.dropdown-menu:after{top:auto;bottom:-6px;border-top:6px solid #fff;border-bottom:0}.navbar .nav li.dropdown>a:hover .caret,.navbar .nav li.dropdown>a:focus .caret{border-top-color:#333;border-bottom-color:#333}.navbar .nav li.dropdown.open>.dropdown-toggle,.navbar .nav li.dropdown.active>.dropdown-toggle,.navbar .nav li.dropdown.open.active>.dropdown-toggle{color:#555;background-color:#e5e5e5}.navbar .nav li.dropdown>.dropdown-toggle .caret{border-top-color:#777;border-bottom-color:#777}.navbar .nav li.dropdown.open>.dropdown-toggle .caret,.navbar .nav li.dropdown.active>.dropdown-toggle .caret,.navbar .nav li.dropdown.open.active>.dropdown-toggle .caret{border-top-color:#555;border-bottom-color:#555}.navbar .pull-right>li>.dropdown-menu,.navbar .nav>li>.dropdown-menu.pull-right{right:0;left:auto}.navbar .pull-right>li>.dropdown-menu:before,.navbar .nav>li>.dropdown-menu.pull-right:before{right:12px;left:auto}.navbar .pull-right>li>.dropdown-menu:after,.navbar .nav>li>.dropdown-menu.pull-right:after{right:13px;left:auto}.navbar .pull-right>li>.dropdown-menu .dropdown-menu,.navbar .nav>li>.dropdown-menu.pull-right .dropdown-menu{right:100%;left:auto;margin-right:-1px;margin-left:0;-webkit-border-radius:6px 0 6px 6px;-moz-border-radius:6px 0 6px 6px;border-radius:6px 0 6px 6px}.navbar-inverse .navbar-inner{background-color:#1b1b1b;background-image:-moz-linear-gradient(top,#222,#111);background-image:-webkit-gradient(linear,0 0,0 100%,from(#222),to(#111));background-image:-webkit-linear-gradient(top,#222,#111);background-image:-o-linear-gradient(top,#222,#111);background-image:linear-gradient(to bottom,#222,#111);background-repeat:repeat-x;border-color:#252525;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ff222222',endColorstr='#ff111111',GradientType=0)}.navbar-inverse .brand,.navbar-inverse .nav>li>a{color:#999;text-shadow:0 -1px 0 rgba(0,0,0,0.25)}.navbar-inverse .brand:hover,.navbar-inverse .nav>li>a:hover,.navbar-inverse .brand:focus,.navbar-inverse .nav>li>a:focus{color:#fff}.navbar-inverse .brand{color:#999}.navbar-inverse .navbar-text{color:#999}.navbar-inverse .nav>li>a:focus,.navbar-inverse .nav>li>a:hover{color:#fff;background-color:transparent}.navbar-inverse .nav .active>a,.navbar-inverse .nav .active>a:hover,.navbar-inverse .nav .active>a:focus{color:#fff;background-color:#111}.navbar-inverse .navbar-link{color:#999}.navbar-inverse .navbar-link:hover,.navbar-inverse .navbar-link:focus{color:#fff}.navbar-inverse .divider-vertical{border-right-color:#222;border-left-color:#111}.navbar-inverse .nav li.dropdown.open>.dropdown-toggle,.navbar-inverse .nav li.dropdown.active>.dropdown-toggle,.navbar-inverse .nav li.dropdown.open.active>.dropdown-toggle{color:#fff;background-color:#111}.navbar-inverse .nav li.dropdown>a:hover .caret,.navbar-inverse .nav li.dropdown>a:focus .caret{border-top-color:#fff;border-bottom-color:#fff}.navbar-inverse .nav li.dropdown>.dropdown-toggle .caret{border-top-color:#999;border-bottom-color:#999}.navbar-inverse .nav li.dropdown.open>.dropdown-toggle .caret,.navbar-inverse .nav li.dropdown.active>.dropdown-toggle .caret,.navbar-inverse .nav li.dropdown.open.active>.dropdown-toggle .caret{border-top-color:#fff;border-bottom-color:#fff}.navbar-inverse .navbar-search .search-query{color:#fff;background-color:#515151;border-color:#111;-webkit-box-shadow:inset 0 1px 2px rgba(0,0,0,0.1),0 1px 0 rgba(255,255,255,0.15);-moz-box-shadow:inset 0 1px 2px rgba(0,0,0,0.1),0 1px 0 rgba(255,255,255,0.15);box-shadow:inset 0 1px 2px rgba(0,0,0,0.1),0 1px 0 rgba(255,255,255,0.15);-webkit-transition:none;-moz-transition:none;-o-transition:none;transition:none}.navbar-inverse .navbar-search .search-query:-moz-placeholder{color:#ccc}.navbar-inverse .navbar-search .search-query:-ms-input-placeholder{color:#ccc}.navbar-inverse .navbar-search .search-query::-webkit-input-placeholder{color:#ccc}.navbar-inverse .navbar-search .search-query:focus,.navbar-inverse .navbar-search .search-query.focused{padding:5px 15px;color:#333;text-shadow:0 1px 0 #fff;background-color:#fff;border:0;outline:0;-webkit-box-shadow:0 0 3px rgba(0,0,0,0.15);-moz-box-shadow:0 0 3px rgba(0,0,0,0.15);box-shadow:0 0 3px rgba(0,0,0,0.15)}.navbar-inverse .btn-navbar{color:#fff;text-shadow:0 -1px 0 rgba(0,0,0,0.25);background-color:#0e0e0e;*background-color:#040404;background-image:-moz-linear-gradient(top,#151515,#040404);background-image:-webkit-gradient(linear,0 0,0 100%,from(#151515),to(#040404));background-image:-webkit-linear-gradient(top,#151515,#040404);background-image:-o-linear-gradient(top,#151515,#040404);background-image:linear-gradient(to bottom,#151515,#040404);background-repeat:repeat-x;border-color:#040404 #040404 #000;border-color:rgba(0,0,0,0.1) rgba(0,0,0,0.1) rgba(0,0,0,0.25);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ff151515',endColorstr='#ff040404',GradientType=0);filter:progid:DXImageTransform.Microsoft.gradient(enabled=false)}.navbar-inverse .btn-navbar:hover,.navbar-inverse .btn-navbar:focus,.navbar-inverse .btn-navbar:active,.navbar-inverse .btn-navbar.active,.navbar-inverse .btn-navbar.disabled,.navbar-inverse .btn-navbar[disabled]{color:#fff;background-color:#040404;*background-color:#000}.navbar-inverse .btn-navbar:active,.navbar-inverse .btn-navbar.active{background-color:#000 \\9}.breadcrumb{padding:8px 15px;margin:0 0 20px;list-style:none;background-color:#f5f5f5;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px}.breadcrumb>li{display:inline-block;*display:inline;text-shadow:0 1px 0 #fff;*zoom:1}.breadcrumb>li>.divider{padding:0 5px;color:#ccc}.breadcrumb>.active{color:#999}.pagination{margin:20px 0}.pagination ul{display:inline-block;*display:inline;margin-bottom:0;margin-left:0;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;*zoom:1;-webkit-box-shadow:0 1px 2px rgba(0,0,0,0.05);-moz-box-shadow:0 1px 2px rgba(0,0,0,0.05);box-shadow:0 1px 2px rgba(0,0,0,0.05)}.pagination ul>li{display:inline}.pagination ul>li>a,.pagination ul>li>span{float:left;padding:4px 12px;line-height:20px;text-decoration:none;background-color:#fff;border:1px solid #ddd;border-left-width:0}.pagination ul>li>a:hover,.pagination ul>li>a:focus,.pagination ul>.active>a,.pagination ul>.active>span{background-color:#f5f5f5}.pagination ul>.active>a,.pagination ul>.active>span{color:#999;cursor:default}.pagination ul>.disabled>span,.pagination ul>.disabled>a,.pagination ul>.disabled>a:hover,.pagination ul>.disabled>a:focus{color:#999;cursor:default;background-color:transparent}.pagination ul>li:first-child>a,.pagination ul>li:first-child>span{border-left-width:1px;-webkit-border-bottom-left-radius:4px;border-bottom-left-radius:4px;-webkit-border-top-left-radius:4px;border-top-left-radius:4px;-moz-border-radius-bottomleft:4px;-moz-border-radius-topleft:4px}.pagination ul>li:last-child>a,.pagination ul>li:last-child>span{-webkit-border-top-right-radius:4px;border-top-right-radius:4px;-webkit-border-bottom-right-radius:4px;border-bottom-right-radius:4px;-moz-border-radius-topright:4px;-moz-border-radius-bottomright:4px}.pagination-centered{text-align:center}.pagination-right{text-align:right}.pagination-large ul>li>a,.pagination-large ul>li>span{padding:11px 19px;font-size:17.5px}.pagination-large ul>li:first-child>a,.pagination-large ul>li:first-child>span{-webkit-border-bottom-left-radius:6px;border-bottom-left-radius:6px;-webkit-border-top-left-radius:6px;border-top-left-radius:6px;-moz-border-radius-bottomleft:6px;-moz-border-radius-topleft:6px}.pagination-large ul>li:last-child>a,.pagination-large ul>li:last-child>span{-webkit-border-top-right-radius:6px;border-top-right-radius:6px;-webkit-border-bottom-right-radius:6px;border-bottom-right-radius:6px;-moz-border-radius-topright:6px;-moz-border-radius-bottomright:6px}.pagination-mini ul>li:first-child>a,.pagination-small ul>li:first-child>a,.pagination-mini ul>li:first-child>span,.pagination-small ul>li:first-child>span{-webkit-border-bottom-left-radius:3px;border-bottom-left-radius:3px;-webkit-border-top-left-radius:3px;border-top-left-radius:3px;-moz-border-radius-bottomleft:3px;-moz-border-radius-topleft:3px}.pagination-mini ul>li:last-child>a,.pagination-small ul>li:last-child>a,.pagination-mini ul>li:last-child>span,.pagination-small ul>li:last-child>span{-webkit-border-top-right-radius:3px;border-top-right-radius:3px;-webkit-border-bottom-right-radius:3px;border-bottom-right-radius:3px;-moz-border-radius-topright:3px;-moz-border-radius-bottomright:3px}.pagination-small ul>li>a,.pagination-small ul>li>span{padding:2px 10px;font-size:11.9px}.pagination-mini ul>li>a,.pagination-mini ul>li>span{padding:0 6px;font-size:10.5px}.pager{margin:20px 0;text-align:center;list-style:none;*zoom:1}.pager:before,.pager:after{display:table;line-height:0;content:\"\"}.pager:after{clear:both}.pager li{display:inline}.pager li>a,.pager li>span{display:inline-block;padding:5px 14px;background-color:#fff;border:1px solid #ddd;-webkit-border-radius:15px;-moz-border-radius:15px;border-radius:15px}.pager li>a:hover,.pager li>a:focus{text-decoration:none;background-color:#f5f5f5}.pager .next>a,.pager .next>span{float:right}.pager .previous>a,.pager .previous>span{float:left}.pager .disabled>a,.pager .disabled>a:hover,.pager .disabled>a:focus,.pager .disabled>span{color:#999;cursor:default;background-color:#fff}.modal-backdrop{position:fixed;top:0;right:0;bottom:0;left:0;z-index:1040;background-color:#000}.modal-backdrop.fade{opacity:0}.modal-backdrop,.modal-backdrop.fade.in{opacity:.8;filter:alpha(opacity=80)}.modal{position:fixed;top:10%;left:50%;z-index:1050;width:560px;margin-left:-280px;background-color:#fff;border:1px solid #999;border:1px solid rgba(0,0,0,0.3);*border:1px solid #999;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;outline:0;-webkit-box-shadow:0 3px 7px rgba(0,0,0,0.3);-moz-box-shadow:0 3px 7px rgba(0,0,0,0.3);box-shadow:0 3px 7px rgba(0,0,0,0.3);-webkit-background-clip:padding-box;-moz-background-clip:padding-box;background-clip:padding-box}.modal.fade{top:-25%;-webkit-transition:opacity .3s linear,top .3s ease-out;-moz-transition:opacity .3s linear,top .3s ease-out;-o-transition:opacity .3s linear,top .3s ease-out;transition:opacity .3s linear,top .3s ease-out}.modal.fade.in{top:10%}.modal-header{padding:9px 15px;border-bottom:1px solid #eee}.modal-header .close{margin-top:2px}.modal-header h3{margin:0;line-height:30px}.modal-body{position:relative;max-height:400px;padding:15px;overflow-y:auto}.modal-form{margin-bottom:0}.modal-footer{padding:14px 15px 15px;margin-bottom:0;text-align:right;background-color:#f5f5f5;border-top:1px solid #ddd;-webkit-border-radius:0 0 6px 6px;-moz-border-radius:0 0 6px 6px;border-radius:0 0 6px 6px;*zoom:1;-webkit-box-shadow:inset 0 1px 0 #fff;-moz-box-shadow:inset 0 1px 0 #fff;box-shadow:inset 0 1px 0 #fff}.modal-footer:before,.modal-footer:after{display:table;line-height:0;content:\"\"}.modal-footer:after{clear:both}.modal-footer .btn+.btn{margin-bottom:0;margin-left:5px}.modal-footer .btn-group .btn+.btn{margin-left:-1px}.modal-footer .btn-block+.btn-block{margin-left:0}.tooltip{position:absolute;z-index:1030;display:block;font-size:11px;line-height:1.4;opacity:0;filter:alpha(opacity=0);visibility:visible}.tooltip.in{opacity:.8;filter:alpha(opacity=80)}.tooltip.top{padding:5px 0;margin-top:-3px}.tooltip.right{padding:0 5px;margin-left:3px}.tooltip.bottom{padding:5px 0;margin-top:3px}.tooltip.left{padding:0 5px;margin-left:-3px}.tooltip-inner{max-width:200px;padding:8px;color:#fff;text-align:center;text-decoration:none;background-color:#000;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px}.tooltip-arrow{position:absolute;width:0;height:0;border-color:transparent;border-style:solid}.tooltip.top .tooltip-arrow{bottom:0;left:50%;margin-left:-5px;border-top-color:#000;border-width:5px 5px 0}.tooltip.right .tooltip-arrow{top:50%;left:0;margin-top:-5px;border-right-color:#000;border-width:5px 5px 5px 0}.tooltip.left .tooltip-arrow{top:50%;right:0;margin-top:-5px;border-left-color:#000;border-width:5px 0 5px 5px}.tooltip.bottom .tooltip-arrow{top:0;left:50%;margin-left:-5px;border-bottom-color:#000;border-width:0 5px 5px}.popover{position:absolute;top:0;left:0;z-index:1010;display:none;max-width:276px;padding:1px;text-align:left;white-space:normal;background-color:#fff;border:1px solid #ccc;border:1px solid rgba(0,0,0,0.2);-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;-webkit-box-shadow:0 5px 10px rgba(0,0,0,0.2);-moz-box-shadow:0 5px 10px rgba(0,0,0,0.2);box-shadow:0 5px 10px rgba(0,0,0,0.2);-webkit-background-clip:padding-box;-moz-background-clip:padding;background-clip:padding-box}.popover.top{margin-top:-10px}.popover.right{margin-left:10px}.popover.bottom{margin-top:10px}.popover.left{margin-left:-10px}.popover-title{padding:8px 14px;margin:0;font-size:14px;font-weight:normal;line-height:18px;background-color:#f7f7f7;border-bottom:1px solid #ebebeb;-webkit-border-radius:5px 5px 0 0;-moz-border-radius:5px 5px 0 0;border-radius:5px 5px 0 0}.popover-title:empty{display:none}.popover-content{padding:9px 14px}.popover .arrow,.popover .arrow:after{position:absolute;display:block;width:0;height:0;border-color:transparent;border-style:solid}.popover .arrow{border-width:11px}.popover .arrow:after{border-width:10px;content:\"\"}.popover.top .arrow{bottom:-11px;left:50%;margin-left:-11px;border-top-color:#999;border-top-color:rgba(0,0,0,0.25);border-bottom-width:0}.popover.top .arrow:after{bottom:1px;margin-left:-10px;border-top-color:#fff;border-bottom-width:0}.popover.right .arrow{top:50%;left:-11px;margin-top:-11px;border-right-color:#999;border-right-color:rgba(0,0,0,0.25);border-left-width:0}.popover.right .arrow:after{bottom:-10px;left:1px;border-right-color:#fff;border-left-width:0}.popover.bottom .arrow{top:-11px;left:50%;margin-left:-11px;border-bottom-color:#999;border-bottom-color:rgba(0,0,0,0.25);border-top-width:0}.popover.bottom .arrow:after{top:1px;margin-left:-10px;border-bottom-color:#fff;border-top-width:0}.popover.left .arrow{top:50%;right:-11px;margin-top:-11px;border-left-color:#999;border-left-color:rgba(0,0,0,0.25);border-right-width:0}.popover.left .arrow:after{right:1px;bottom:-10px;border-left-color:#fff;border-right-width:0}.thumbnails{margin-left:-20px;list-style:none;*zoom:1}.thumbnails:before,.thumbnails:after{display:table;line-height:0;content:\"\"}.thumbnails:after{clear:both}.row-fluid .thumbnails{margin-left:0}.thumbnails>li{float:left;margin-bottom:20px;margin-left:20px}.thumbnail{display:block;padding:4px;line-height:20px;border:1px solid #ddd;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;-webkit-box-shadow:0 1px 3px rgba(0,0,0,0.055);-moz-box-shadow:0 1px 3px rgba(0,0,0,0.055);box-shadow:0 1px 3px rgba(0,0,0,0.055);-webkit-transition:all .2s ease-in-out;-moz-transition:all .2s ease-in-out;-o-transition:all .2s ease-in-out;transition:all .2s ease-in-out}a.thumbnail:hover,a.thumbnail:focus{border-color:#08c;-webkit-box-shadow:0 1px 4px rgba(0,105,214,0.25);-moz-box-shadow:0 1px 4px rgba(0,105,214,0.25);box-shadow:0 1px 4px rgba(0,105,214,0.25)}.thumbnail>img{display:block;max-width:100%;margin-right:auto;margin-left:auto}.thumbnail .caption{padding:9px;color:#555}.media,.media-body{overflow:hidden;*overflow:visible;zoom:1}.media,.media .media{margin-top:15px}.media:first-child{margin-top:0}.media-object{display:block}.media-heading{margin:0 0 5px}.media>.pull-left{margin-right:10px}.media>.pull-right{margin-left:10px}.media-list{margin-left:0;list-style:none}.label,.badge{display:inline-block;padding:2px 4px;font-size:11.844px;font-weight:bold;line-height:14px;color:#fff;text-shadow:0 -1px 0 rgba(0,0,0,0.25);white-space:nowrap;vertical-align:baseline;background-color:#999}.label{-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px}.badge{padding-right:9px;padding-left:9px;-webkit-border-radius:9px;-moz-border-radius:9px;border-radius:9px}.label:empty,.badge:empty{display:none}a.label:hover,a.label:focus,a.badge:hover,a.badge:focus{color:#fff;text-decoration:none;cursor:pointer}.label-important,.badge-important{background-color:#b94a48}.label-important[href],.badge-important[href]{background-color:#953b39}.label-warning,.badge-warning{background-color:#f89406}.label-warning[href],.badge-warning[href]{background-color:#c67605}.label-success,.badge-success{background-color:#468847}.label-success[href],.badge-success[href]{background-color:#356635}.label-info,.badge-info{background-color:#3a87ad}.label-info[href],.badge-info[href]{background-color:#2d6987}.label-inverse,.badge-inverse{background-color:#333}.label-inverse[href],.badge-inverse[href]{background-color:#1a1a1a}.btn .label,.btn .badge{position:relative;top:-1px}.btn-mini .label,.btn-mini .badge{top:0}@-webkit-keyframes progress-bar-stripes{from{background-position:40px 0}to{background-position:0 0}}@-moz-keyframes progress-bar-stripes{from{background-position:40px 0}to{background-position:0 0}}@-ms-keyframes progress-bar-stripes{from{background-position:40px 0}to{background-position:0 0}}@-o-keyframes progress-bar-stripes{from{background-position:0 0}to{background-position:40px 0}}@keyframes progress-bar-stripes{from{background-position:40px 0}to{background-position:0 0}}.progress{height:20px;margin-bottom:20px;overflow:hidden;background-color:#f7f7f7;background-image:-moz-linear-gradient(top,#f5f5f5,#f9f9f9);background-image:-webkit-gradient(linear,0 0,0 100%,from(#f5f5f5),to(#f9f9f9));background-image:-webkit-linear-gradient(top,#f5f5f5,#f9f9f9);background-image:-o-linear-gradient(top,#f5f5f5,#f9f9f9);background-image:linear-gradient(to bottom,#f5f5f5,#f9f9f9);background-repeat:repeat-x;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#fff5f5f5',endColorstr='#fff9f9f9',GradientType=0);-webkit-box-shadow:inset 0 1px 2px rgba(0,0,0,0.1);-moz-box-shadow:inset 0 1px 2px rgba(0,0,0,0.1);box-shadow:inset 0 1px 2px rgba(0,0,0,0.1)}.progress .bar{float:left;width:0;height:100%;font-size:12px;color:#fff;text-align:center;text-shadow:0 -1px 0 rgba(0,0,0,0.25);background-color:#0e90d2;background-image:-moz-linear-gradient(top,#149bdf,#0480be);background-image:-webkit-gradient(linear,0 0,0 100%,from(#149bdf),to(#0480be));background-image:-webkit-linear-gradient(top,#149bdf,#0480be);background-image:-o-linear-gradient(top,#149bdf,#0480be);background-image:linear-gradient(to bottom,#149bdf,#0480be);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ff149bdf',endColorstr='#ff0480be',GradientType=0);-webkit-box-shadow:inset 0 -1px 0 rgba(0,0,0,0.15);-moz-box-shadow:inset 0 -1px 0 rgba(0,0,0,0.15);box-shadow:inset 0 -1px 0 rgba(0,0,0,0.15);-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;-webkit-transition:width .6s ease;-moz-transition:width .6s ease;-o-transition:width .6s ease;transition:width .6s ease}.progress .bar+.bar{-webkit-box-shadow:inset 1px 0 0 rgba(0,0,0,0.15),inset 0 -1px 0 rgba(0,0,0,0.15);-moz-box-shadow:inset 1px 0 0 rgba(0,0,0,0.15),inset 0 -1px 0 rgba(0,0,0,0.15);box-shadow:inset 1px 0 0 rgba(0,0,0,0.15),inset 0 -1px 0 rgba(0,0,0,0.15)}.progress-striped .bar{background-color:#149bdf;background-image:-webkit-gradient(linear,0 100%,100% 0,color-stop(0.25,rgba(255,255,255,0.15)),color-stop(0.25,transparent),color-stop(0.5,transparent),color-stop(0.5,rgba(255,255,255,0.15)),color-stop(0.75,rgba(255,255,255,0.15)),color-stop(0.75,transparent),to(transparent));background-image:-webkit-linear-gradient(45deg,rgba(255,255,255,0.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,0.15) 50%,rgba(255,255,255,0.15) 75%,transparent 75%,transparent);background-image:-moz-linear-gradient(45deg,rgba(255,255,255,0.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,0.15) 50%,rgba(255,255,255,0.15) 75%,transparent 75%,transparent);background-image:-o-linear-gradient(45deg,rgba(255,255,255,0.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,0.15) 50%,rgba(255,255,255,0.15) 75%,transparent 75%,transparent);background-image:linear-gradient(45deg,rgba(255,255,255,0.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,0.15) 50%,rgba(255,255,255,0.15) 75%,transparent 75%,transparent);-webkit-background-size:40px 40px;-moz-background-size:40px 40px;-o-background-size:40px 40px;background-size:40px 40px}.progress.active .bar{-webkit-animation:progress-bar-stripes 2s linear infinite;-moz-animation:progress-bar-stripes 2s linear infinite;-ms-animation:progress-bar-stripes 2s linear infinite;-o-animation:progress-bar-stripes 2s linear infinite;animation:progress-bar-stripes 2s linear infinite}.progress-danger .bar,.progress .bar-danger{background-color:#dd514c;background-image:-moz-linear-gradient(top,#ee5f5b,#c43c35);background-image:-webkit-gradient(linear,0 0,0 100%,from(#ee5f5b),to(#c43c35));background-image:-webkit-linear-gradient(top,#ee5f5b,#c43c35);background-image:-o-linear-gradient(top,#ee5f5b,#c43c35);background-image:linear-gradient(to bottom,#ee5f5b,#c43c35);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffee5f5b',endColorstr='#ffc43c35',GradientType=0)}.progress-danger.progress-striped .bar,.progress-striped .bar-danger{background-color:#ee5f5b;background-image:-webkit-gradient(linear,0 100%,100% 0,color-stop(0.25,rgba(255,255,255,0.15)),color-stop(0.25,transparent),color-stop(0.5,transparent),color-stop(0.5,rgba(255,255,255,0.15)),color-stop(0.75,rgba(255,255,255,0.15)),color-stop(0.75,transparent),to(transparent));background-image:-webkit-linear-gradient(45deg,rgba(255,255,255,0.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,0.15) 50%,rgba(255,255,255,0.15) 75%,transparent 75%,transparent);background-image:-moz-linear-gradient(45deg,rgba(255,255,255,0.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,0.15) 50%,rgba(255,255,255,0.15) 75%,transparent 75%,transparent);background-image:-o-linear-gradient(45deg,rgba(255,255,255,0.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,0.15) 50%,rgba(255,255,255,0.15) 75%,transparent 75%,transparent);background-image:linear-gradient(45deg,rgba(255,255,255,0.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,0.15) 50%,rgba(255,255,255,0.15) 75%,transparent 75%,transparent)}.progress-success .bar,.progress .bar-success{background-color:#5eb95e;background-image:-moz-linear-gradient(top,#62c462,#57a957);background-image:-webkit-gradient(linear,0 0,0 100%,from(#62c462),to(#57a957));background-image:-webkit-linear-gradient(top,#62c462,#57a957);background-image:-o-linear-gradient(top,#62c462,#57a957);background-image:linear-gradient(to bottom,#62c462,#57a957);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ff62c462',endColorstr='#ff57a957',GradientType=0)}.progress-success.progress-striped .bar,.progress-striped .bar-success{background-color:#62c462;background-image:-webkit-gradient(linear,0 100%,100% 0,color-stop(0.25,rgba(255,255,255,0.15)),color-stop(0.25,transparent),color-stop(0.5,transparent),color-stop(0.5,rgba(255,255,255,0.15)),color-stop(0.75,rgba(255,255,255,0.15)),color-stop(0.75,transparent),to(transparent));background-image:-webkit-linear-gradient(45deg,rgba(255,255,255,0.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,0.15) 50%,rgba(255,255,255,0.15) 75%,transparent 75%,transparent);background-image:-moz-linear-gradient(45deg,rgba(255,255,255,0.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,0.15) 50%,rgba(255,255,255,0.15) 75%,transparent 75%,transparent);background-image:-o-linear-gradient(45deg,rgba(255,255,255,0.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,0.15) 50%,rgba(255,255,255,0.15) 75%,transparent 75%,transparent);background-image:linear-gradient(45deg,rgba(255,255,255,0.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,0.15) 50%,rgba(255,255,255,0.15) 75%,transparent 75%,transparent)}.progress-info .bar,.progress .bar-info{background-color:#4bb1cf;background-image:-moz-linear-gradient(top,#5bc0de,#339bb9);background-image:-webkit-gradient(linear,0 0,0 100%,from(#5bc0de),to(#339bb9));background-image:-webkit-linear-gradient(top,#5bc0de,#339bb9);background-image:-o-linear-gradient(top,#5bc0de,#339bb9);background-image:linear-gradient(to bottom,#5bc0de,#339bb9);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ff5bc0de',endColorstr='#ff339bb9',GradientType=0)}.progress-info.progress-striped .bar,.progress-striped .bar-info{background-color:#5bc0de;background-image:-webkit-gradient(linear,0 100%,100% 0,color-stop(0.25,rgba(255,255,255,0.15)),color-stop(0.25,transparent),color-stop(0.5,transparent),color-stop(0.5,rgba(255,255,255,0.15)),color-stop(0.75,rgba(255,255,255,0.15)),color-stop(0.75,transparent),to(transparent));background-image:-webkit-linear-gradient(45deg,rgba(255,255,255,0.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,0.15) 50%,rgba(255,255,255,0.15) 75%,transparent 75%,transparent);background-image:-moz-linear-gradient(45deg,rgba(255,255,255,0.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,0.15) 50%,rgba(255,255,255,0.15) 75%,transparent 75%,transparent);background-image:-o-linear-gradient(45deg,rgba(255,255,255,0.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,0.15) 50%,rgba(255,255,255,0.15) 75%,transparent 75%,transparent);background-image:linear-gradient(45deg,rgba(255,255,255,0.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,0.15) 50%,rgba(255,255,255,0.15) 75%,transparent 75%,transparent)}.progress-warning .bar,.progress .bar-warning{background-color:#faa732;background-image:-moz-linear-gradient(top,#fbb450,#f89406);background-image:-webkit-gradient(linear,0 0,0 100%,from(#fbb450),to(#f89406));background-image:-webkit-linear-gradient(top,#fbb450,#f89406);background-image:-o-linear-gradient(top,#fbb450,#f89406);background-image:linear-gradient(to bottom,#fbb450,#f89406);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#fffbb450',endColorstr='#fff89406',GradientType=0)}.progress-warning.progress-striped .bar,.progress-striped .bar-warning{background-color:#fbb450;background-image:-webkit-gradient(linear,0 100%,100% 0,color-stop(0.25,rgba(255,255,255,0.15)),color-stop(0.25,transparent),color-stop(0.5,transparent),color-stop(0.5,rgba(255,255,255,0.15)),color-stop(0.75,rgba(255,255,255,0.15)),color-stop(0.75,transparent),to(transparent));background-image:-webkit-linear-gradient(45deg,rgba(255,255,255,0.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,0.15) 50%,rgba(255,255,255,0.15) 75%,transparent 75%,transparent);background-image:-moz-linear-gradient(45deg,rgba(255,255,255,0.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,0.15) 50%,rgba(255,255,255,0.15) 75%,transparent 75%,transparent);background-image:-o-linear-gradient(45deg,rgba(255,255,255,0.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,0.15) 50%,rgba(255,255,255,0.15) 75%,transparent 75%,transparent);background-image:linear-gradient(45deg,rgba(255,255,255,0.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,0.15) 50%,rgba(255,255,255,0.15) 75%,transparent 75%,transparent)}.accordion{margin-bottom:20px}.accordion-group{margin-bottom:2px;border:1px solid #e5e5e5;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px}.accordion-heading{border-bottom:0}.accordion-heading .accordion-toggle{display:block;padding:8px 15px}.accordion-toggle{cursor:pointer}.accordion-inner{padding:9px 15px;border-top:1px solid #e5e5e5}.carousel{position:relative;margin-bottom:20px;line-height:1}.carousel-inner{position:relative;width:100%;overflow:hidden}.carousel-inner>.item{position:relative;display:none;-webkit-transition:.6s ease-in-out left;-moz-transition:.6s ease-in-out left;-o-transition:.6s ease-in-out left;transition:.6s ease-in-out left}.carousel-inner>.item>img,.carousel-inner>.item>a>img{display:block;line-height:1}.carousel-inner>.active,.carousel-inner>.next,.carousel-inner>.prev{display:block}.carousel-inner>.active{left:0}.carousel-inner>.next,.carousel-inner>.prev{position:absolute;top:0;width:100%}.carousel-inner>.next{left:100%}.carousel-inner>.prev{left:-100%}.carousel-inner>.next.left,.carousel-inner>.prev.right{left:0}.carousel-inner>.active.left{left:-100%}.carousel-inner>.active.right{left:100%}.carousel-control{position:absolute;top:40%;left:15px;width:40px;height:40px;margin-top:-20px;font-size:60px;font-weight:100;line-height:30px;color:#fff;text-align:center;background:#222;border:3px solid #fff;-webkit-border-radius:23px;-moz-border-radius:23px;border-radius:23px;opacity:.5;filter:alpha(opacity=50)}.carousel-control.right{right:15px;left:auto}.carousel-control:hover,.carousel-control:focus{color:#fff;text-decoration:none;opacity:.9;filter:alpha(opacity=90)}.carousel-indicators{position:absolute;top:15px;right:15px;z-index:5;margin:0;list-style:none}.carousel-indicators li{display:block;float:left;width:10px;height:10px;margin-left:5px;text-indent:-999px;background-color:#ccc;background-color:rgba(255,255,255,0.25);border-radius:5px}.carousel-indicators .active{background-color:#fff}.carousel-caption{position:absolute;right:0;bottom:0;left:0;padding:15px;background:#333;background:rgba(0,0,0,0.75)}.carousel-caption h4,.carousel-caption p{line-height:20px;color:#fff}.carousel-caption h4{margin:0 0 5px}.carousel-caption p{margin-bottom:0}.hero-unit{padding:60px;margin-bottom:30px;font-size:18px;font-weight:200;line-height:30px;color:inherit;background-color:#eee;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px}.hero-unit h1{margin-bottom:0;font-size:60px;line-height:1;letter-spacing:-1px;color:inherit}.hero-unit li{line-height:30px}.pull-right{float:right}.pull-left{float:left}.hide{display:none}.show{display:block}.invisible{visibility:hidden}.affix{position:fixed}li.activity.label,.file-picker td.label{display:block;padding:8px;font-size:inherit;line-height:inherit;color:inherit;text-shadow:none;white-space:normal;background:inherit;border:inherit}.file-picker td.label{display:table-cell;text-align:right}.choosercontainer #chooseform .option label{font-size:12px}li.section.hidden,.block.hidden,.block.invisible{display:block;visibility:visible}#turnitintool_style .row,.forumpost .row{margin-left:0!important}#turnitintool_style .row:before,#turnitintool_style .row:after,.forumpost .row:before,.forumpost .row:after{content:none}fieldset.hidden{display:inherit;visibility:inherit}div.c1.btn{display:block;padding:0;margin-bottom:0;font-size:inherit;line-height:inherit;color:inherit;text-align:inherit;text-shadow:inherit;vertical-align:inherit;cursor:default;background-color:inherit;background-image:none;background-repeat:none;border:0;border-radius:none;box-shadow:none}#questionbank+.container{width:auto}img.hide{display:inherit}.icon-bar,img.icon-post,img.icon-info,img.icon-warn,img.icon-pre{background-image:none}.loginbox.twocolumns .signuppanel,.loginbox.twocolumns .signuppanel,.loginbox.twocolumns .loginpanel,.loginbox.twocolumns .loginpanel{padding:0;margin:0}.tooltip{display:inline;opacity:1;filter:alpha(opacity=100)}body{padding-top:60px}.block{min-height:20px;padding:19px;padding:8px 0;margin-bottom:20px;background-color:#f5f5f5;border:1px solid #e3e3e3;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,0.05);-moz-box-shadow:inset 0 1px 1px rgba(0,0,0,0.05);box-shadow:inset 0 1px 1px rgba(0,0,0,0.05)}.block blockquote{border-color:#ddd;border-color:rgba(0,0,0,0.15)}.block .header h2{padding:.2em 0 0 .2em;margin:0}.block .header .title h2,.block h3.main{display:block;padding:3px 15px;font-size:11px;font-size:1.1em;font-weight:bold;line-height:20px;color:#999;text-shadow:0 1px 0 rgba(255,255,255,0.5);text-transform:uppercase}.block .header .title .commands,.block_adminblock .content,.block .footer{display:block;padding:3px 15px}.block .header .block_action{float:right}.block .header .commands{clear:both;text-align:right}.block .header .commands>a{margin:0 3px}.block .header .commands .icon img{width:12px;height:12px}.block .content{padding:4px 14px}.block .content hr{margin:5px 0}.block.hidden .content{display:none}.block .content .userpicture{width:16px;height:16px;margin-right:6px}.block .content .list li.listentry{clear:both}.block .content .list .c0{display:inline}.block .content .list .c1{display:inline;margin-left:5px}.block .footer{margin-bottom:4px}.block .blockannotation{margin:-1em 0 1em;font-size:.75em}.block.list_block .unlist>li>.column{display:inline-block;*display:inline;*zoom:1}.blockmovetarget,.block.beingmoved{border-style:dashed;border-width:2px}.blockmovetarget{display:block;height:1em;margin-bottom:1em}.block.invisible{opacity:.5;filter:alpha(opacity=50)}.block .block-hider-show,.block .block-hider-hide{padding-right:5px;padding-left:5px;cursor:pointer}.block .block-hider-show,.block.hidden .block-hider-hide{display:none}.block.hidden .block-hider-show{display:inline}.block_calendar_upcoming .footer{margin-top:.5em}#adminsearchquery,#blogsearchquery,#searchform_search,.block_adminblock select{max-width:92%}.block_adminblock .singleselect{display:block}#searchform_search{width:auto}.dir-rtl .block .header,.dir-rtl .block h2.header{text-align:right}.dir-rtl .block .header .commands{text-align:left}.dir-rtl .block .header .block_action{float:left}form{margin:0}.mform fieldset .advancedbutton{text-align:right}.jsenabled .mform .containsadvancedelements .advanced{display:none}.mform .containsadvancedelements .advanced.show{display:block}.mform fieldset.group{margin-bottom:0}.mform fieldset.error{border:1px solid #b94a48}.mform fieldset.collapsible legend a.fheader{padding:0 5px 0 20px;margin-left:-20px;background:url([[pix:t/expanded]]) 2px center no-repeat}.dir-rtl .mform fieldset.collapsible legend a.fheader{padding:0 20px 0 5px;margin-right:-20px;margin-left:0;background-position:right center}.mform fieldset.collapsed legend a.fheader{background-image:url([[pix:t/collapsed]])}.dir-rtl .mform fieldset.collapsed legend a.fheader{background-image:url([[pix:t/collapsed_rtl]])}.jsenabled .mform .collapsed .fcontainer{display:none}.mform .collapsible-actions{display:none;text-align:right}.dir-rtl .mform .collapsible-actions{text-align:left}.jsenabled .mform .collapsible-actions{display:block}.mform .collapsible-actions .collapseexpand{padding-left:20px;background:url([[pix:t/collapsed]]) 2px center no-repeat}.dir-rtl .mform .collapsible-actions .collapseexpand{padding-right:20px;padding-left:0;background:url([[pix:t/collapsed_rtl]]) right center no-repeat}.mform .collapsible-actions .collapse-all,.dir-rtl .mform .collapsible-actions .collapse-all{background-image:url([[pix:t/expanded]])}.mform .fitem .fitemtitle div{display:inline}.loginpanel .error,.mform .error{color:#b94a48}.mform .fdescription.required{margin-left:200px}.mform .fpassword .unmask{display:inline-block;margin-left:.5em}.mform .fpassword .unmask>input{margin:0}.mform .fpassword .unmask>label{display:inline-block}.mform .ftextarea #id_alltext{width:100%}.mform ul.file-list{padding:0;margin:0;list-style:none}.mform label .req,.mform label .adv{cursor:help}.mform .fcheckbox input{margin-top:5px;margin-left:0}.mform .fitem fieldset.fgroup label,.mform fieldset.fdate_selector label{display:inline;float:none;width:auto}.mform .ftags label.accesshide{position:static;display:block}.mform .ftags select{min-width:22em;margin-bottom:.7em}.mform .helplink img{padding:0;margin:0 .45em}.mform legend .helplink img{margin:0 .2em}.singleselect label{margin-right:.3em}.dir-rtl .singleselect label{margin-right:0;margin-left:.3em}input#id_externalurl{direction:ltr}#portfolio-add-button{display:inline}.form-item,.mform .fitem{margin-bottom:20px;margin-bottom:10px;*zoom:1}.form-item:before,.mform .fitem:before,.form-item:after,.mform .fitem:after{display:table;line-height:0;content:\"\"}.form-item:after,.mform .fitem:after{clear:both}.form-item .form-label,.mform .fitem div.fitemtitle{float:left;width:180px;padding-top:5px;text-align:right}.form-defaultinfo,.form-label .form-shortname{color:#999}.form-label .form-shortname{display:block;font-size:10.5px}.dir-rtl .form-label .form-shortname{text-align:left}.form-item .form-setting,.form-item .form-description,.mform .fitem .felement,#page-mod-forum-search .c1{*display:inline-block;*padding-left:20px;margin-left:200px;*margin-left:0}.form-item .form-setting:first-child,.form-item .form-description:first-child,.mform .fitem .felement:first-child,#page-mod-forum-search .c1:first-child{*padding-left:200px}.formsettingheading{margin-bottom:0}.form-item .form-description,.felement.fstatic{display:block;padding-top:5px;margin-bottom:10px;color:#595959}.form-item .form-description{padding-top:0}table#form td.submit,.form-buttons,.path-admin .buttons,#fitem_id_submitbutton,.fp-content-center form+div,div.backup-section+form,#fgroup_id_buttonar{padding:19px 20px 20px;padding-left:0;margin-top:20px;margin-bottom:20px;background-color:#f5f5f5;border-top:1px solid #e5e5e5;*zoom:1}table#form td.submit:before,.form-buttons:before,.path-admin .buttons:before,#fitem_id_submitbutton:before,.fp-content-center form+div:before,div.backup-section+form:before,#fgroup_id_buttonar:before,table#form td.submit:after,.form-buttons:after,.path-admin .buttons:after,#fitem_id_submitbutton:after,.fp-content-center form+div:after,div.backup-section+form:after,#fgroup_id_buttonar:after{display:table;line-height:0;content:\"\"}table#form td.submit:after,.form-buttons:after,.path-admin .buttons:after,#fitem_id_submitbutton:after,.fp-content-center form+div:after,div.backup-section+form:after,#fgroup_id_buttonar:after{clear:both}.path-admin .buttons,.form-buttons{padding-left:200px}.form-item .form-setting .form-checkbox.defaultsnext{display:inline-block;margin-top:5px}#adminsettings h3.main{display:block;width:100%;padding:0;margin-bottom:20px;font-size:21px;line-height:40px;color:#333;border:0;border-bottom:1px solid #e5e5e5}.mform legend a,.mform legend a:hover{color:#333;text-decoration:none}.dir-rtl .mform .fitem .fitemtitle{float:right}.dir-rtl .mform .fitem .felement{margin-right:16%;margin-left:auto;text-align:right}.dir-rtl .mform .fitem .felement input[name=email],.dir-rtl .mform .fitem .felement input[name=email2],.dir-rtl .mform .fitem .felement input[name=url],.dir-rtl .mform .fitem .felement input[name=idnumber],.dir-rtl .mform .fitem .felement input[name=phone1],.dir-rtl .mform .fitem .felement input[name=phone2]{text-align:left;direction:ltr}.dir-rtl #id_s__pathtodu,.dir-rtl #id_s__aspellpath,.dir-rtl #id_s__pathtodot,.dir-rtl #id_s__supportemail,.dir-rtl #id_s__supportpage,.dir-rtl #id_s__sessioncookie,.dir-rtl #id_s__sessioncookiepath,.dir-rtl #id_s__sessioncookiedomain,.dir-rtl #id_s__proxyhost,.dir-rtl #id_s__proxyuser,.dir-rtl #id_s__proxypassword,.dir-rtl #id_s__proxybypass,.dir-rtl #id_s__jabberhost,.dir-rtl #id_s__jabberserver,.dir-rtl #id_s__jabberusername,.dir-rtl #id_s__jabberpassword,.dir-rtl #id_s__additionalhtmlhead,.dir-rtl #id_s__additionalhtmltopofbody,.dir-rtl #id_s__additionalhtmlfooter,.dir-rtl #id_s__docroot,.dir-rtl #id_s__filter_tex_latexpreamble,.dir-rtl #id_s__filter_tex_latexbackground,.dir-rtl #id_s__filter_tex_pathlatex,.dir-rtl #id_s__filter_tex_pathdvips,.dir-rtl #id_s__filter_tex_pathconvert,.dir-rtl #id_s__blockedip,.dir-rtl #id_s__pathtoclam,.dir-rtl #id_s__quarantinedir,.dir-rtl #id_s__sitepolicy,.dir-rtl #id_s__sitepolicyguest,.dir-rtl #id_s__cronremotepassword,.dir-rtl #id_s__allowedip,.dir-rtl #id_s__blockedip,.dir-rtl #id_s_enrol_meta_nosyncroleids,.dir-rtl #id_s_enrol_ldap_host_url,.dir-rtl #id_s_enrol_ldap_ldapencoding,.dir-rtl #id_s_enrol_ldap_bind_dn,.dir-rtl #id_s_enrol_ldap_bind_pw,.dir-rtl #admin-emoticons .form-text,.dir-rtl #admin-role_mapping input[type=text],.dir-rtl #id_s_enrol_paypal_paypalbusiness,.dir-rtl #id_s_enrol_flatfile_location,#page-admin-setting-enrolsettingsflatfile.dir-rtl input[type=text],#page-admin-setting-enrolsettingsdatabase.dir-rtl input[type=text],#page-admin-auth-db.dir-rtl input[type=text]{direction:ltr}#page-admin-setting-enrolsettingsflatfile.dir-rtl .informationbox{text-align:left;direction:ltr}#page-admin-grade-edit-scale-edit.dir-rtl .error input#id_name{margin-right:170px}#installform #id_wwwroot,#installform #id_dirroot,#installform #id_dataroot,#installform #id_dbhost,#installform #id_dbname,#installform #id_dbuser,#installform #id_dbpass,#installform #id_prefix{direction:ltr}.mdl-right>label{display:inline-block}input[type=\"radio\"]+label,input[type=\"checkbox\"]+label{display:inline;padding-left:.2em}input[type=\"radio\"],input[type=\"checkbox\"]{margin-top:-4px;margin-right:7px}.singleselect{display:inline-block}.singleselect form,.singleselect select{margin:0}.form-item .form-label label{margin-bottom:0}.felement.ffilepicker{margin-top:5px}div#dateselector-calendar-panel{z-index:3100}fieldset.coursesearchbox label{display:inline}select{width:auto}.path-mod-forum .forumheaderlist,.path-mod-forum .forumheaderlist td{border:0}.forumpost{min-height:20px;padding:19px;padding:6px;margin-bottom:20px;background-color:#f5f5f5;border:1px solid #e3e3e3;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,0.05);-moz-box-shadow:inset 0 1px 1px rgba(0,0,0,0.05);box-shadow:inset 0 1px 1px rgba(0,0,0,0.05)}.forumpost blockquote{border-color:#ddd;border-color:rgba(0,0,0,0.15)}.forumpost .row .left{width:auto}.forumpost .options .commands{margin-left:0}.forumpost .subject{font-weight:bold}.forumsearch input[type=text]{margin-bottom:0!important}#page-mod-forum-discuss .discussioncontrol.displaymode{text-align:left}#page-mod-forum-discuss .discussioncontrols .discussioncontrol{float:left}#page-footer{padding:1em 0;margin-top:1em;border-top:2px solid #eee}.maincalendar .calendarmonth td,.maincalendar .calendarmonth th{border:1px dotted #ddd}.path-grade-report-grader h1{text-align:inherit}#page-mod-chat-gui_basic input#message{max-width:100%}#page-mod-data-view #singleimage{width:auto}.path-mod-data form{margin-top:10px}.template_heading{margin-top:10px}.breadcrumb-button{float:right;margin-top:4px}.dir-rtl .navbar .brand{float:right}.navbar-inverse .logininfo a{color:#999}.navbar-inverse .logininfo a:hover{color:#fff;background-color:transparent}.navbar-fixed-top,.navbar-fixed-bottom{z-index:4030}.dir-rtl .breadcrumb-button,.dir-rtl .navbar .btn-navbar{float:left}.ie .row-fluid .desktop-first-column{margin-left:0}.langmenu form{margin:0}.container-fluid{max-width:1680px;margin:0 auto}canvas{-ms-touch-action:auto}div#dock{display:none}.path-mod-choice .horizontal .choices{margin:0}.path-mod-choice .horizontal .choices .option{display:inline-block;padding:10px}.path-mod-lesson .firstpageoptions{width:60%;min-width:280px;margin:auto}.path-mod-lesson .centerpadded{padding:5px;text-align:center}#page-report-participation-index .participationselectform div label{display:inline;margin:0 5px}#page-report-participation-index.dir-ltr .participationselectform div label[for=menuinstanceid]{margin-left:0}#page-report-participation-index.dir-rtl .participationselectform div label[for=menuinstanceid]{margin-right:0}.path-backup .mform .grouped_settings.section_level{min-height:20px;padding:19px;padding:10px 0 0 0;margin-bottom:20px;clear:both;background-color:#f5f5f5;border:1px solid #e3e3e3;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,0.05);-moz-box-shadow:inset 0 1px 1px rgba(0,0,0,0.05);box-shadow:inset 0 1px 1px rgba(0,0,0,0.05)}.path-backup .mform .grouped_settings.section_level blockquote{border-color:#ddd;border-color:rgba(0,0,0,0.15)}.path-backup .mform .grouped_settings{overflow:hidden;clear:both}.path-backup .include_setting,.path-backup .grouped_settings .normal_setting{display:inline-block}.path-backup .include_setting.section_level label{font-weight:bold}.path-backup .mform .fitem .fitemtitle{width:260px}.path-backup .mform .fitem .felement{margin-left:280px}.path-backup .notification.dependencies_enforced{font-weight:bold;color:#b94a48;text-align:center}.path-backup .backup_progress{text-align:center}.path-backup .backup_progress .backup_stage{color:#999}.path-backup .backup_progress .backup_stage.backup_stage_current{font-weight:bold;color:inherit}.path-backup .backup_progress span.backup_stage.backup_stage_complete{color:inherit}#page-backup-restore .filealiasesfailures{background-color:#f2dede}#page-backup-restore .filealiasesfailures .aliaseslist{width:90%;margin:.8em auto;background-color:#fff;border:1px dotted #666}.path-backup .fitem .smallicon{vertical-align:text-bottom}.backup-restore .backup-section>h2.header,.backup-restore .backup-section .backup-sub-section h3{display:block;width:100%;padding:0;margin-bottom:20px;font-size:21px;line-height:40px;color:#333;border:0;border-bottom:1px solid #e5e5e5}.backup-restore .backup-section .noticebox{width:60%;margin:1em auto;text-align:center}.backup-restore .backup-section.settings-section .detail-pair{display:inline-block;*display:inline;width:50%;*zoom:1}.backup-restore .backup-section.settings-section .detail-pair-label{width:65%}.backup-restore .backup-section.settings-section .detail-pair-value{width:25%}.backup-restore .activitytable{min-width:500px}.backup-restore .activitytable .modulename{width:100px}.backup-restore .activitytable .moduleincluded{width:50px}.backup-restore .activitytable .userinfoincluded{width:50px}.backup-restore .detail-pair-label{display:inline-block;*display:inline;width:25%;padding:8px;margin:0;font-weight:bold;text-align:right;vertical-align:top;*zoom:1}.backup-restore .detail-pair-value{display:inline-block;*display:inline;width:65%;padding:8px;margin:0;*zoom:1}.backup-restore .detail-pair-value>.sub-detail{display:block;font-size:11.9px;color:#999}.backup-restore>.singlebutton{text-align:right}.path-backup .mform .fgroup .proceedbutton{float:right;margin-right:5%}.restore-course-search .rcs-results{width:70%;min-width:400px}.restore-course-search .rcs-results table{width:100%;margin:0;border-width:0}.restore-course-search .rcs-results table .no-overflow{max-width:600px}.restore-course-search .rcs-results .paging{padding:3px;margin:0;text-align:left;background-color:#eee}.restore-course-category .rcs-results{width:70%;min-width:400px;margin:5px 0;border:1px solid #ddd}.restore-course-category .rcs-results table{width:100%;margin:0;border-width:0}.restore-course-category .rcs-results table .no-overflow{max-width:600px}.restore-course-category .rcs-results .paging{padding:3px;margin:0;text-align:left;background-color:#eee}table.flexible,.generaltable{width:100%;margin-bottom:20px}table.flexible th,.generaltable th,table.flexible td,.generaltable td{padding:8px;line-height:20px;text-align:left;vertical-align:top;border-top:1px solid #ddd}table.flexible th,.generaltable th{font-weight:bold}table.flexible thead th,.generaltable thead th{vertical-align:bottom}table.flexible caption+thead tr:first-child th,.generaltable caption+thead tr:first-child th,table.flexible caption+thead tr:first-child td,.generaltable caption+thead tr:first-child td,table.flexible colgroup+thead tr:first-child th,.generaltable colgroup+thead tr:first-child th,table.flexible colgroup+thead tr:first-child td,.generaltable colgroup+thead tr:first-child td,table.flexible thead:first-child tr:first-child th,.generaltable thead:first-child tr:first-child th,table.flexible thead:first-child tr:first-child td,.generaltable thead:first-child tr:first-child td{border-top:0}table.flexible tbody+tbody,.generaltable tbody+tbody{border-top:2px solid #ddd}table.flexible .table,.generaltable .table{background-color:#fff}.singlebutton div{display:inline-block;margin-right:5px;margin-bottom:5px;margin-left:5px}#notice .buttons .singlebutton{display:inline-block}.continuebutton{text-align:center}.btn-lineup{margin:0 0 10px 5px}input[name=\"searchwikicontent\"]+input[type=\"submit\"],select+input[type=\"submit\"],input[type=\"text\"]+input[type=\"button\"],input[type=\"password\"]+input[type=\"submit\"],input[type=\"text\"]+button,input[type=\"text\"]+input[type=\"submit\"]{margin:0 0 10px 5px}p.arrow_button{margin-top:5em;text-align:center}p.arrow_button #remove{margin:3em auto 5em}p.arrow_button input{display:block;width:100%;padding-right:0;padding-left:0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}#addcontrols{margin-top:5em;margin-bottom:3em;text-align:center}#addcontrols input,#removecontrols input{display:block;width:100%;padding-right:0;padding-left:0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}button,input.form-submit,input[type=\"button\"],input[type=\"submit\"],input[type=\"reset\"]{display:inline-block;*display:inline;padding:4px 12px;margin-bottom:0;*margin-left:.3em;font-size:14px;line-height:20px;color:#333;text-align:center;text-shadow:0 1px 1px rgba(255,255,255,0.75);vertical-align:middle;cursor:pointer;background-color:#f5f5f5;*background-color:#e6e6e6;background-image:-moz-linear-gradient(top,#fff,#e6e6e6);background-image:-webkit-gradient(linear,0 0,0 100%,from(#fff),to(#e6e6e6));background-image:-webkit-linear-gradient(top,#fff,#e6e6e6);background-image:-o-linear-gradient(top,#fff,#e6e6e6);background-image:linear-gradient(to bottom,#fff,#e6e6e6);background-repeat:repeat-x;border:1px solid #ccc;*border:0;border-color:#e6e6e6 #e6e6e6 #bfbfbf;border-color:rgba(0,0,0,0.1) rgba(0,0,0,0.1) rgba(0,0,0,0.25);border-bottom-color:#b3b3b3;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffffff',endColorstr='#ffe6e6e6',GradientType=0);filter:progid:DXImageTransform.Microsoft.gradient(enabled=false);*zoom:1;-webkit-box-shadow:inset 0 1px 0 rgba(255,255,255,0.2),0 1px 2px rgba(0,0,0,0.05);-moz-box-shadow:inset 0 1px 0 rgba(255,255,255,0.2),0 1px 2px rgba(0,0,0,0.05);box-shadow:inset 0 1px 0 rgba(255,255,255,0.2),0 1px 2px rgba(0,0,0,0.05)}button:hover,input.form-submit:hover,input[type=\"button\"]:hover,input[type=\"submit\"]:hover,input[type=\"reset\"]:hover,button:focus,input.form-submit:focus,input[type=\"button\"]:focus,input[type=\"submit\"]:focus,input[type=\"reset\"]:focus,button:active,input.form-submit:active,input[type=\"button\"]:active,input[type=\"submit\"]:active,input[type=\"reset\"]:active,button.active,input.form-submit.active,input[type=\"button\"].active,input[type=\"submit\"].active,input[type=\"reset\"].active,button.disabled,input.form-submit.disabled,input[type=\"button\"].disabled,input[type=\"submit\"].disabled,input[type=\"reset\"].disabled,button[disabled],input.form-submit[disabled],input[type=\"button\"][disabled],input[type=\"submit\"][disabled],input[type=\"reset\"][disabled]{color:#333;background-color:#e6e6e6;*background-color:#d9d9d9}button:active,input.form-submit:active,input[type=\"button\"]:active,input[type=\"submit\"]:active,input[type=\"reset\"]:active,button.active,input.form-submit.active,input[type=\"button\"].active,input[type=\"submit\"].active,input[type=\"reset\"].active{background-color:#ccc \\9}button:first-child,input.form-submit:first-child,input[type=\"button\"]:first-child,input[type=\"submit\"]:first-child,input[type=\"reset\"]:first-child{*margin-left:0}button:hover,input.form-submit:hover,input[type=\"button\"]:hover,input[type=\"submit\"]:hover,input[type=\"reset\"]:hover,button:focus,input.form-submit:focus,input[type=\"button\"]:focus,input[type=\"submit\"]:focus,input[type=\"reset\"]:focus{color:#333;text-decoration:none;background-position:0 -15px;-webkit-transition:background-position .1s linear;-moz-transition:background-position .1s linear;-o-transition:background-position .1s linear;transition:background-position .1s linear}button:focus,input.form-submit:focus,input[type=\"button\"]:focus,input[type=\"submit\"]:focus,input[type=\"reset\"]:focus{outline:thin dotted #333;outline:5px auto -webkit-focus-ring-color;outline-offset:-2px}button.active,input.form-submit.active,input[type=\"button\"].active,input[type=\"submit\"].active,input[type=\"reset\"].active,button:active,input.form-submit:active,input[type=\"button\"]:active,input[type=\"submit\"]:active,input[type=\"reset\"]:active{background-image:none;outline:0;-webkit-box-shadow:inset 0 2px 4px rgba(0,0,0,0.15),0 1px 2px rgba(0,0,0,0.05);-moz-box-shadow:inset 0 2px 4px rgba(0,0,0,0.15),0 1px 2px rgba(0,0,0,0.05);box-shadow:inset 0 2px 4px rgba(0,0,0,0.15),0 1px 2px rgba(0,0,0,0.05)}button.disabled,input.form-submit.disabled,input[type=\"button\"].disabled,input[type=\"submit\"].disabled,input[type=\"reset\"].disabled,button[disabled],input.form-submit[disabled],input[type=\"button\"][disabled],input[type=\"submit\"][disabled],input[type=\"reset\"][disabled]{cursor:default;background-image:none;opacity:.65;filter:alpha(opacity=65);-webkit-box-shadow:none;-moz-box-shadow:none;box-shadow:none}button .label,input.form-submit .label,input[type=\"button\"] .label,input[type=\"submit\"] .label,input[type=\"reset\"] .label,button .badge,input.form-submit .badge,input[type=\"button\"] .badge,input[type=\"submit\"] .badge,input[type=\"reset\"] .badge{position:relative;top:-1px}button,input.form-submit,input[type=\"button\"],input[type=\"submit\"],input[type=\"reset\"]{margin:0 0 10px 5px}button.yui3-button.closebutton,button.yui3-button.closebutton:hover{background-position:0 0}input.fp-btn-choose{padding:2px 10px;font-size:11.9px;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px}.user-enroller-panel .uep-search-results .user .options .enrol{padding:0 6px;font-size:10.5px;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px}.user-enroller-panel .uep-search-results .user .options .enrol .label,.user-enroller-panel .uep-search-results .user .options .enrol .badge{top:0}@-ms-viewport{width:device-width}.hidden{display:none;visibility:hidden}.visible-phone{display:none!important}.visible-tablet{display:none!important}.hidden-desktop{display:none!important}.visible-desktop{display:inherit!important}@media(min-width:768px) and (max-width:979px){.hidden-desktop{display:inherit!important}.visible-desktop{display:none!important}.visible-tablet{display:inherit!important}.hidden-tablet{display:none!important}}@media(max-width:767px){.hidden-desktop{display:inherit!important}.visible-desktop{display:none!important}.visible-phone{display:inherit!important}.hidden-phone{display:none!important}}.visible-print{display:none!important}@media print{.visible-print{display:inherit!important}.hidden-print{display:none!important}}@media(min-width:1200px){.row{margin-left:-30px;*zoom:1}.row:before,.row:after{display:table;line-height:0;content:\"\"}.row:after{clear:both}[class*=\"span\"]{float:left;min-height:1px;margin-left:30px}.container,.navbar-static-top .container,.navbar-fixed-top .container,.navbar-fixed-bottom .container{width:1170px}.span12{width:1170px}.span11{width:1070px}.span10{width:970px}.span9{width:870px}.span8{width:770px}.span7{width:670px}.span6{width:570px}.span5{width:470px}.span4{width:370px}.span3{width:270px}.span2{width:170px}.span1{width:70px}.offset12{margin-left:1230px}.offset11{margin-left:1130px}.offset10{margin-left:1030px}.offset9{margin-left:930px}.offset8{margin-left:830px}.offset7{margin-left:730px}.offset6{margin-left:630px}.offset5{margin-left:530px}.offset4{margin-left:430px}.offset3{margin-left:330px}.offset2{margin-left:230px}.offset1{margin-left:130px}.row-fluid{width:100%;*zoom:1}.row-fluid:before,.row-fluid:after{display:table;line-height:0;content:\"\"}.row-fluid:after{clear:both}.row-fluid [class*=\"span\"]{display:block;float:left;width:100%;min-height:30px;margin-left:2.564102564102564%;*margin-left:2.5109110747408616%;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.row-fluid [class*=\"span\"]:first-child{margin-left:0}.row-fluid .controls-row [class*=\"span\"]+[class*=\"span\"]{margin-left:2.564102564102564%}.row-fluid .span12{width:100%;*width:99.94680851063829%}.row-fluid .span11{width:91.45299145299145%;*width:91.39979996362975%}.row-fluid .span10{width:82.90598290598291%;*width:82.8527914166212%}.row-fluid .span9{width:74.35897435897436%;*width:74.30578286961266%}.row-fluid .span8{width:65.81196581196582%;*width:65.75877432260411%}.row-fluid .span7{width:57.26495726495726%;*width:57.21176577559556%}.row-fluid .span6{width:48.717948717948715%;*width:48.664757228587014%}.row-fluid .span5{width:40.17094017094017%;*width:40.11774868157847%}.row-fluid .span4{width:31.623931623931625%;*width:31.570740134569924%}.row-fluid .span3{width:23.076923076923077%;*width:23.023731587561375%}.row-fluid .span2{width:14.52991452991453%;*width:14.476723040552828%}.row-fluid .span1{width:5.982905982905983%;*width:5.929714493544281%}.row-fluid .offset12{margin-left:105.12820512820512%;*margin-left:105.02182214948171%}.row-fluid .offset12:first-child{margin-left:102.56410256410257%;*margin-left:102.45771958537915%}.row-fluid .offset11{margin-left:96.58119658119658%;*margin-left:96.47481360247316%}.row-fluid .offset11:first-child{margin-left:94.01709401709402%;*margin-left:93.91071103837061%}.row-fluid .offset10{margin-left:88.03418803418803%;*margin-left:87.92780505546462%}.row-fluid .offset10:first-child{margin-left:85.47008547008548%;*margin-left:85.36370249136206%}.row-fluid .offset9{margin-left:79.48717948717949%;*margin-left:79.38079650845607%}.row-fluid .offset9:first-child{margin-left:76.92307692307693%;*margin-left:76.81669394435352%}.row-fluid .offset8{margin-left:70.94017094017094%;*margin-left:70.83378796144753%}.row-fluid .offset8:first-child{margin-left:68.37606837606839%;*margin-left:68.26968539734497%}.row-fluid .offset7{margin-left:62.393162393162385%;*margin-left:62.28677941443899%}.row-fluid .offset7:first-child{margin-left:59.82905982905982%;*margin-left:59.72267685033642%}.row-fluid .offset6{margin-left:53.84615384615384%;*margin-left:53.739770867430444%}.row-fluid .offset6:first-child{margin-left:51.28205128205128%;*margin-left:51.175668303327875%}.row-fluid .offset5{margin-left:45.299145299145295%;*margin-left:45.1927623204219%}.row-fluid .offset5:first-child{margin-left:42.73504273504273%;*margin-left:42.62865975631933%}.row-fluid .offset4{margin-left:36.75213675213675%;*margin-left:36.645753773413354%}.row-fluid .offset4:first-child{margin-left:34.18803418803419%;*margin-left:34.081651209310785%}.row-fluid .offset3{margin-left:28.205128205128204%;*margin-left:28.0987452264048%}.row-fluid .offset3:first-child{margin-left:25.641025641025642%;*margin-left:25.53464266230224%}.row-fluid .offset2{margin-left:19.65811965811966%;*margin-left:19.551736679396257%}.row-fluid .offset2:first-child{margin-left:17.094017094017094%;*margin-left:16.98763411529369%}.row-fluid .offset1{margin-left:11.11111111111111%;*margin-left:11.004728132387708%}.row-fluid .offset1:first-child{margin-left:8.547008547008547%;*margin-left:8.440625568285142%}input,textarea,.uneditable-input{margin-left:0}.controls-row [class*=\"span\"]+[class*=\"span\"]{margin-left:30px}input.span12,textarea.span12,.uneditable-input.span12{width:1156px}input.span11,textarea.span11,.uneditable-input.span11{width:1056px}input.span10,textarea.span10,.uneditable-input.span10{width:956px}input.span9,textarea.span9,.uneditable-input.span9{width:856px}input.span8,textarea.span8,.uneditable-input.span8{width:756px}input.span7,textarea.span7,.uneditable-input.span7{width:656px}input.span6,textarea.span6,.uneditable-input.span6{width:556px}input.span5,textarea.span5,.uneditable-input.span5{width:456px}input.span4,textarea.span4,.uneditable-input.span4{width:356px}input.span3,textarea.span3,.uneditable-input.span3{width:256px}input.span2,textarea.span2,.uneditable-input.span2{width:156px}input.span1,textarea.span1,.uneditable-input.span1{width:56px}.thumbnails{margin-left:-30px}.thumbnails>li{margin-left:30px}.row-fluid .thumbnails{margin-left:0}}@media(min-width:768px) and (max-width:979px){.row{margin-left:-20px;*zoom:1}.row:before,.row:after{display:table;line-height:0;content:\"\"}.row:after{clear:both}[class*=\"span\"]{float:left;min-height:1px;margin-left:20px}.container,.navbar-static-top .container,.navbar-fixed-top .container,.navbar-fixed-bottom .container{width:724px}.span12{width:724px}.span11{width:662px}.span10{width:600px}.span9{width:538px}.span8{width:476px}.span7{width:414px}.span6{width:352px}.span5{width:290px}.span4{width:228px}.span3{width:166px}.span2{width:104px}.span1{width:42px}.offset12{margin-left:764px}.offset11{margin-left:702px}.offset10{margin-left:640px}.offset9{margin-left:578px}.offset8{margin-left:516px}.offset7{margin-left:454px}.offset6{margin-left:392px}.offset5{margin-left:330px}.offset4{margin-left:268px}.offset3{margin-left:206px}.offset2{margin-left:144px}.offset1{margin-left:82px}.row-fluid{width:100%;*zoom:1}.row-fluid:before,.row-fluid:after{display:table;line-height:0;content:\"\"}.row-fluid:after{clear:both}.row-fluid [class*=\"span\"]{display:block;float:left;width:100%;min-height:30px;margin-left:2.7624309392265194%;*margin-left:2.709239449864817%;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.row-fluid [class*=\"span\"]:first-child{margin-left:0}.row-fluid .controls-row [class*=\"span\"]+[class*=\"span\"]{margin-left:2.7624309392265194%}.row-fluid .span12{width:100%;*width:99.94680851063829%}.row-fluid .span11{width:91.43646408839778%;*width:91.38327259903608%}.row-fluid .span10{width:82.87292817679558%;*width:82.81973668743387%}.row-fluid .span9{width:74.30939226519337%;*width:74.25620077583166%}.row-fluid .span8{width:65.74585635359117%;*width:65.69266486422946%}.row-fluid .span7{width:57.18232044198895%;*width:57.12912895262725%}.row-fluid .span6{width:48.61878453038674%;*width:48.56559304102504%}.row-fluid .span5{width:40.05524861878453%;*width:40.00205712942283%}.row-fluid .span4{width:31.491712707182323%;*width:31.43852121782062%}.row-fluid .span3{width:22.92817679558011%;*width:22.87498530621841%}.row-fluid .span2{width:14.3646408839779%;*width:14.311449394616199%}.row-fluid .span1{width:5.801104972375691%;*width:5.747913483013988%}.row-fluid .offset12{margin-left:105.52486187845304%;*margin-left:105.41847889972962%}.row-fluid .offset12:first-child{margin-left:102.76243093922652%;*margin-left:102.6560479605031%}.row-fluid .offset11{margin-left:96.96132596685082%;*margin-left:96.8549429881274%}.row-fluid .offset11:first-child{margin-left:94.1988950276243%;*margin-left:94.09251204890089%}.row-fluid .offset10{margin-left:88.39779005524862%;*margin-left:88.2914070765252%}.row-fluid .offset10:first-child{margin-left:85.6353591160221%;*margin-left:85.52897613729868%}.row-fluid .offset9{margin-left:79.8342541436464%;*margin-left:79.72787116492299%}.row-fluid .offset9:first-child{margin-left:77.07182320441989%;*margin-left:76.96544022569647%}.row-fluid .offset8{margin-left:71.2707182320442%;*margin-left:71.16433525332079%}.row-fluid .offset8:first-child{margin-left:68.50828729281768%;*margin-left:68.40190431409427%}.row-fluid .offset7{margin-left:62.70718232044199%;*margin-left:62.600799341718584%}.row-fluid .offset7:first-child{margin-left:59.94475138121547%;*margin-left:59.838368402492065%}.row-fluid .offset6{margin-left:54.14364640883978%;*margin-left:54.037263430116376%}.row-fluid .offset6:first-child{margin-left:51.38121546961326%;*margin-left:51.27483249088986%}.row-fluid .offset5{margin-left:45.58011049723757%;*margin-left:45.47372751851417%}.row-fluid .offset5:first-child{margin-left:42.81767955801105%;*margin-left:42.71129657928765%}.row-fluid .offset4{margin-left:37.01657458563536%;*margin-left:36.91019160691196%}.row-fluid .offset4:first-child{margin-left:34.25414364640884%;*margin-left:34.14776066768544%}.row-fluid .offset3{margin-left:28.45303867403315%;*margin-left:28.346655695309746%}.row-fluid .offset3:first-child{margin-left:25.69060773480663%;*margin-left:25.584224756083227%}.row-fluid .offset2{margin-left:19.88950276243094%;*margin-left:19.783119783707537%}.row-fluid .offset2:first-child{margin-left:17.12707182320442%;*margin-left:17.02068884448102%}.row-fluid .offset1{margin-left:11.32596685082873%;*margin-left:11.219583872105325%}.row-fluid .offset1:first-child{margin-left:8.56353591160221%;*margin-left:8.457152932878806%}input,textarea,.uneditable-input{margin-left:0}.controls-row [class*=\"span\"]+[class*=\"span\"]{margin-left:20px}input.span12,textarea.span12,.uneditable-input.span12{width:710px}input.span11,textarea.span11,.uneditable-input.span11{width:648px}input.span10,textarea.span10,.uneditable-input.span10{width:586px}input.span9,textarea.span9,.uneditable-input.span9{width:524px}input.span8,textarea.span8,.uneditable-input.span8{width:462px}input.span7,textarea.span7,.uneditable-input.span7{width:400px}input.span6,textarea.span6,.uneditable-input.span6{width:338px}input.span5,textarea.span5,.uneditable-input.span5{width:276px}input.span4,textarea.span4,.uneditable-input.span4{width:214px}input.span3,textarea.span3,.uneditable-input.span3{width:152px}input.span2,textarea.span2,.uneditable-input.span2{width:90px}input.span1,textarea.span1,.uneditable-input.span1{width:28px}}@media(max-width:767px){body{padding-right:20px;padding-left:20px}.navbar-fixed-top,.navbar-fixed-bottom,.navbar-static-top{margin-right:-20px;margin-left:-20px}.container-fluid{padding:0}.dl-horizontal dt{float:none;width:auto;clear:none;text-align:left}.dl-horizontal dd{margin-left:0}.container{width:auto}.row-fluid{width:100%}.row,.thumbnails{margin-left:0}.thumbnails>li{float:none;margin-left:0}[class*=\"span\"],.uneditable-input[class*=\"span\"],.row-fluid [class*=\"span\"]{display:block;float:none;width:100%;margin-left:0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.span12,.row-fluid .span12{width:100%;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.row-fluid [class*=\"offset\"]:first-child{margin-left:0}.input-large,.input-xlarge,.input-xxlarge,input[class*=\"span\"],select[class*=\"span\"],textarea[class*=\"span\"],.uneditable-input{display:block;width:100%;min-height:30px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.input-prepend input,.input-append input,.input-prepend input[class*=\"span\"],.input-append input[class*=\"span\"]{display:inline-block;width:auto}.controls-row [class*=\"span\"]+[class*=\"span\"]{margin-left:0}.modal{position:fixed;top:20px;right:20px;left:20px;width:auto;margin:0}.modal.fade{top:-100px}.modal.fade.in{top:20px}}@media(max-width:480px){.nav-collapse{-webkit-transform:translate3d(0,0,0)}.page-header h1 small{display:block;line-height:20px}input[type=\"checkbox\"],input[type=\"radio\"]{border:1px solid #ccc}.form-horizontal .control-label{float:none;width:auto;padding-top:0;text-align:left}.form-horizontal .controls{margin-left:0}.form-horizontal .control-list{padding-top:0}.form-horizontal .form-actions{padding-right:10px;padding-left:10px}.media .pull-left,.media .pull-right{display:block;float:none;margin-bottom:10px}.media-object{margin-right:0;margin-left:0}.modal{top:10px;right:10px;left:10px}.modal-header .close{padding:10px;margin:-10px}.carousel-caption{position:static}}@media(max-width:979px){body{padding-top:0}.navbar-fixed-top,.navbar-fixed-bottom{position:static}.navbar-fixed-top{margin-bottom:20px}.navbar-fixed-bottom{margin-top:20px}.navbar-fixed-top .navbar-inner,.navbar-fixed-bottom .navbar-inner{padding:5px}.navbar .container{width:auto;padding:0}.navbar .brand{padding-right:10px;padding-left:10px;margin:0 0 0 -5px}.nav-collapse{clear:both}.nav-collapse .nav{float:none;margin:0 0 10px}.nav-collapse .nav>li{float:none}.nav-collapse .nav>li>a{margin-bottom:2px}.nav-collapse .nav>.divider-vertical{display:none}.nav-collapse .nav .nav-header{color:#777;text-shadow:none}.nav-collapse .nav>li>a,.nav-collapse .dropdown-menu a{padding:9px 15px;font-weight:bold;color:#777;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px}.nav-collapse .btn{padding:4px 10px 4px;font-weight:normal;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px}.nav-collapse .dropdown-menu li+li a{margin-bottom:2px}.nav-collapse .nav>li>a:hover,.nav-collapse .nav>li>a:focus,.nav-collapse .dropdown-menu a:hover,.nav-collapse .dropdown-menu a:focus{background-color:#f2f2f2}.navbar-inverse .nav-collapse .nav>li>a,.navbar-inverse .nav-collapse .dropdown-menu a{color:#999}.navbar-inverse .nav-collapse .nav>li>a:hover,.navbar-inverse .nav-collapse .nav>li>a:focus,.navbar-inverse .nav-collapse .dropdown-menu a:hover,.navbar-inverse .nav-collapse .dropdown-menu a:focus{background-color:#111}.nav-collapse.in .btn-group{padding:0;margin-top:5px}.nav-collapse .dropdown-menu{position:static;top:auto;left:auto;display:none;float:none;max-width:none;padding:0;margin:0 15px;background-color:transparent;border:0;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;-webkit-box-shadow:none;-moz-box-shadow:none;box-shadow:none}.nav-collapse .open>.dropdown-menu{display:block}.nav-collapse .dropdown-menu:before,.nav-collapse .dropdown-menu:after{display:none}.nav-collapse .dropdown-menu .divider{display:none}.nav-collapse .nav>li>.dropdown-menu:before,.nav-collapse .nav>li>.dropdown-menu:after{display:none}.nav-collapse .navbar-form,.nav-collapse .navbar-search{float:none;padding:10px 15px;margin:10px 0;border-top:1px solid #f2f2f2;border-bottom:1px solid #f2f2f2;-webkit-box-shadow:inset 0 1px 0 rgba(255,255,255,0.1),0 1px 0 rgba(255,255,255,0.1);-moz-box-shadow:inset 0 1px 0 rgba(255,255,255,0.1),0 1px 0 rgba(255,255,255,0.1);box-shadow:inset 0 1px 0 rgba(255,255,255,0.1),0 1px 0 rgba(255,255,255,0.1)}.navbar-inverse .nav-collapse .navbar-form,.navbar-inverse .nav-collapse .navbar-search{border-top-color:#111;border-bottom-color:#111}.navbar .nav-collapse .nav.pull-right{float:none;margin-left:0}.nav-collapse,.nav-collapse.collapse{height:0;overflow:hidden}.navbar .btn-navbar{display:block}.navbar-static .navbar-inner{padding-right:10px;padding-left:10px}}@media(min-width:980px){.nav-collapse.collapse{height:auto!important;overflow:visible!important}}@media(min-width:980px){.dir-rtl .navbar .nav.pull-right,.dir-rtl .navbar .logininfo{float:left}.dir-rtl .navbar .nav{float:right}.dir-rtl .navbar .nav>li{float:right}}@media(min-width:980px) and (max-width:1199px){.form-item .form-label,.mform .fitem div.fitemtitle,.userprofile dl.list dt,.form-horizontal .control-label{width:200px}.form-item .form-setting,.form-item .form-description,.mform .fitem .felement,#page-mod-forum-search .c1,.mform .fdescription.required,.userprofile dl.list dd,.form-horizontal .controls{margin-left:220px}.path-admin .buttons,.form-buttons{padding-left:220px}}@media(min-width:1200px){.loginbox.twocolumns .loginpanel{margin-left:0}.loginbox.twocolumns .loginpanel,.loginbox.twocolumns .signuppanel{width:48.717948717948715%;*width:48.664757228587014%}.form-item .form-label,.mform .fitem div.fitemtitle,.userprofile dl.list dt,.form-horizontal .control-label{width:245px}.form-item .form-setting,.form-item .form-description,.mform .fitem .felement,#page-mod-forum-search .c1,.mform .fdescription.required,.userprofile dl.list dd,.form-horizontal .controls{margin-left:265px}.path-admin .buttons,.form-buttons{padding-left:265px}}@media(min-width:980px){.loginbox.twocolumns .loginpanel{margin-left:0}.loginbox.twocolumns .loginpanel,.loginbox.twocolumns .signuppanel{width:48.617948717948715%;*width:48.664757228587014%}}@media(min-width:768px) and (max-width:979px){.loginbox.twocolumns .loginpanel{margin-left:0}.loginbox.twocolumns .loginpanel,.loginbox.twocolumns .signuppanel{width:48.61878453038674%;*width:48.56559304102504%}}@media(max-width:767px){.loginbox.twocolumns .loginpanel,.loginbox.twocolumns .signuppanel{display:block;float:none;width:100%;margin-left:0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}}@media(max-width:480px){.nav-tabs>li{float:none}.nav-tabs>li>a{margin-right:0}.nav-tabs{border-bottom:0}.nav-tabs>li>a{border:1px solid #ddd;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.nav-tabs>.active>a,.nav-tabs>.active>a:hover{border:1px solid #ddd}.nav-tabs>li:first-child>a{-webkit-border-top-right-radius:4px;border-top-right-radius:4px;-webkit-border-top-left-radius:4px;border-top-left-radius:4px;-moz-border-radius-topright:4px;-moz-border-radius-topleft:4px}.nav-tabs>li:last-child>a{-webkit-border-bottom-right-radius:4px;border-bottom-right-radius:4px;-webkit-border-bottom-left-radius:4px;border-bottom-left-radius:4px;-moz-border-radius-bottomright:4px;-moz-border-radius-bottomleft:4px}.nav-tabs>li>a:hover,.nav-tabs>li>a:focus{z-index:2;border-color:#ddd}.file-picker .fp-repo-items,.file-picker .fp-repo-area{position:relative;top:0;bottom:0;display:block;width:auto;margin:0;border:0}.file-picker .fp-content{width:100%;height:100%}.fp-content-center{display:block;vertical-align:top}.fp-upload-form td.mdl-right,.fp-upload-form td.mdl-left,.fp-login-form .input,.file-picker .fp-login-form .fp-login-input label,.file-picker td.label{display:block;text-align:left}.file-picker .fp-login-form table,.file-picker td,.file-picker td.label,.file-picker .fp-upload-form table{padding:0;margin:0}.course-content ul.topics li.section,.course-content ul.topics li.section .content,.course-content ul.weeks li.section .content,.course-content ul.weeks li.section,.course-content ul.section{padding:0;margin-right:0;margin-left:0}.activityinstance{display:block}.editing .course-content .section .activity{padding-bottom:.2em;margin-bottom:.2em;border-bottom:thin solid #eee}.course-content .section .activity .commands{display:block;text-align:right}.jsenabled .visibleifjs.addresourcemodchooser{display:none}.jsenabled .hiddenifjs.addresourcedropdown{display:block}.jsenabled .hiddenifjs.addresourcedropdown .iconhelp{display:inline-block;padding:6px;vertical-align:top}.jsenabled .hiddenifjs.addresourcedropdown div.urlselect{display:block}.jsenabled .hiddenifjs.addresourcedropdown div.urlselect form{margin:0}.que .info{float:none;width:auto}.que .content{margin:0}.path-mod-choice .horizontal .choices .option{display:block}.path-mod-forum .forumsearch #search{width:120px}.path-mod-forum .forumheaderlist .picture{display:none}}@media(min-width:768px){.row-fluid .desktop-first-column{margin-left:0}#page-navbar .breadcrumb-button{display:inline}}@media(max-width:767px){.row-fluid .desktop-first-column{clear:right}}@media(max-width:767px){.form-item .form-label,.mform .fitem div.fitemtitle{float:none;width:auto;padding-top:0;text-align:left}.form-item .form-label label{display:inline-block;margin-right:.5em}.form-item .form-setting .form-checkbox{margin-top:0}.form-label span.form-shortname{display:inline-block}.form-item .form-setting,.mform .fitem .felement,.path-backup .mform .fitem .felement,.mform .fdescription.required,.form-item .form-description{margin-left:0}table#form td.submit,.form-buttons,#fitem_id_submitbutton,.fp-content-center form+div,#fgroup_id_buttonar,.form-horizontal .form-actions,.fitem_fsubmit .felement.fsubmit{padding-right:10px;padding-left:10px}#helppopupbox{left:0!important;width:auto!important}}@media(min-width:768px) and (max-width:979px){.block_calendar_month .content,.block .minicalendar td{padding-right:0;padding-left:0}}@media(max-width:979px){.nav-collapse{height:0}.nav-collapse .nav>li>a{color:#333}.nav-collapse .nav>li>a:hover,.nav-collapse .nav>li>a:focus,.nav-collapse .dropdown-menu a:hover,.nav-collapse .dropdown-menu a:focus,.nav-collapse .dropdown-submenu a:focus,.nav-collapse .dropdown-submenu a:hover,.nav-collapse .dropdown-submenu a:active,.nav-collapse .dropdown-menu>li>a:hover,.nav-collapse .dropdown-menu>li>a:focus{color:#333;background-image:none}.nav-collapse.active{height:auto}}@media(max-width:768px){#filesskin .yui3-panel,#filesskin .file-picker.fp-generallayout{left:0;width:100%}.userprofile dl.list dt{float:none;width:auto;clear:none;text-align:left}.userprofile dl.list dd{margin-left:0}#page-mod-wiki-create .mform .fitem div.fitemtitle{float:left}.section .side,.editing_move{display:none}.activityinstance>a{display:block}.container{width:auto}.row-fluid{width:100%}.row-fluid .span8.pull-right,.row-fluid .span9.pull-right{float:none}.row{margin-left:0}[class*=\"span\"],.row-fluid [class*=\"span\"]{display:block;float:none;width:100%;margin-left:0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.row-fluid .span12{width:100%;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.row-fluid [class*=\"offset\"]:first-child{margin-left:0}div[role=main]{margin-bottom:2em}}.phpinfo table,.phpinfo th,.phpinfo h2{margin:auto;text-align:left}.phpinfo h2{width:600px}.phpinfo .e,.phpinfo .v,.phpinfo .h{font-size:.8em;color:#000;vertical-align:baseline;background-color:#ccc;border:1px solid #000}.phpinfo .e{font-weight:bold;background-color:#ccf}.phpinfo .h{font-weight:bold;background-color:#99c}#page-footer .performanceinfo{margin:10px 20%}#page-footer .performanceinfo span{display:block}#page-footer .validators{padding-top:5px;margin-top:40px;border-top:1px dotted gray}#page-footer .validators ul{padding:0;margin:0;list-style-type:none}#page-footer .validators ul li{display:inline;margin-right:10px;margin-left:10px}.performanceinfo .cachesused{margin-top:1em}.performanceinfo .cachesused .cache-stats-heading,.performanceinfo .cachesused .cache-total-stats{margin-top:.3em;font-size:110%;font-weight:bold}#page-footer .performanceinfo .cachesused .cache-definition-stats{display:inline-block;margin:.3em;vertical-align:top;background-color:#f5f5f5}.cache-store-stats{padding:0 1.3em}.cache-store-stats.nohits{background-color:#f2dede}.cache-store-stats.lowhits{background-color:#fcf8e3}.cache-store-stats.hihits{background-color:#dff0d8}#page-footer,#page-footer .validators,#page-footer .purgecaches,#page-footer .performanceinfo{text-align:center}table#explaincaps tbody>tr:nth-child(odd)>td,table#defineroletable tbody>tr:nth-child(odd)>td,table.grading-report tbody>tr:nth-child(odd)>td,table#listdirectories tbody>tr:nth-child(odd)>td,table.rolecaps tbody>tr:nth-child(odd)>td,table.userenrolment tbody>tr:nth-child(odd)>td,table#form tbody>tr:nth-child(odd)>td,form#movecourses table tbody>tr:nth-child(odd)>td,#page-admin-course-index .editcourse tbody>tr:nth-child(odd)>td,.forumheaderlist tbody>tr:nth-child(odd)>td,table.flexible tbody>tr:nth-child(odd)>td,.generaltable tbody>tr:nth-child(odd)>td,table#explaincaps tbody>tr:nth-child(odd)>th,table#defineroletable tbody>tr:nth-child(odd)>th,table.grading-report tbody>tr:nth-child(odd)>th,table#listdirectories tbody>tr:nth-child(odd)>th,table.rolecaps tbody>tr:nth-child(odd)>th,table.userenrolment tbody>tr:nth-child(odd)>th,table#form tbody>tr:nth-child(odd)>th,form#movecourses table tbody>tr:nth-child(odd)>th,#page-admin-course-index .editcourse tbody>tr:nth-child(odd)>th,.forumheaderlist tbody>tr:nth-child(odd)>th,table.flexible tbody>tr:nth-child(odd)>th,.generaltable tbody>tr:nth-child(odd)>th{background-color:#f9f9f9}#page-report-loglive-index .generaltable th,#page-admin-report-log-index .generaltable th,#page-report-log-user .generaltable th,#page-admin-user table th,.environmenttable th,.category_subcategories th,.rcs-results th,table#listdirectories th,#page-report-loglive-index .generaltable td,#page-admin-report-log-index .generaltable td,#page-report-log-user .generaltable td,#page-admin-user table td,.environmenttable td,.category_subcategories td,.rcs-results td,table#listdirectories td{padding:4px 5px}.user-enroller-panel .uep-search-results .users tbody tr:hover>td,table.grading-report tbody tr:hover>td,.forumheaderlist tbody tr:hover>td,.generaltable tbody tr:hover>td,table.flexible tbody tr:hover>td,.category_subcategories tbody tr:hover>td,table#modules tbody tr:hover>td,table#permissions tbody tr:hover>td,.user-enroller-panel .uep-search-results .users tbody tr:hover>th,table.grading-report tbody tr:hover>th,.forumheaderlist tbody tr:hover>th,.generaltable tbody tr:hover>th,table.flexible tbody tr:hover>th,.category_subcategories tbody tr:hover>th,table#modules tbody tr:hover>th,table#permissions tbody tr:hover>th{background-color:#f5f5f5}div[id^=\"bar_pbar_\"]{height:20px!important;margin-bottom:20px!important;overflow:hidden!important;background-color:#f7f7f7!important;background-image:-moz-linear-gradient(top,#f5f5f5,#f9f9f9)!important;background-image:-webkit-gradient(linear,0 0,0 100%,from(#f5f5f5),to(#f9f9f9))!important;background-image:-webkit-linear-gradient(top,#f5f5f5,#f9f9f9)!important;background-image:-o-linear-gradient(top,#f5f5f5,#f9f9f9)!important;background-image:linear-gradient(to bottom,#f5f5f5,#f9f9f9)!important;background-repeat:repeat-x!important;border:none!important;-webkit-border-radius:4px!important;-moz-border-radius:4px!important;border-radius:4px!important;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#fff5f5f5',endColorstr='#fff9f9f9',GradientType=0)!important;-webkit-box-shadow:inset 0 1px 2px rgba(0,0,0,0.1)!important;-moz-box-shadow:inset 0 1px 2px rgba(0,0,0,0.1)!important;box-shadow:inset 0 1px 2px rgba(0,0,0,0.1)!important}div[id^=\"progress_pbar_\"]{float:left!important;height:100%!important;padding-top:0!important;font-size:12px!important;color:#fff!important;text-align:center!important;text-shadow:0 -1px 0 rgba(0,0,0,0.25)!important;background-color:#0e90d2!important;background-image:-moz-linear-gradient(top,#149bdf,#0480be)!important;background-image:-webkit-gradient(linear,0 0,0 100%,from(#149bdf),to(#0480be))!important;background-image:-webkit-linear-gradient(top,#149bdf,#0480be)!important;background-image:-o-linear-gradient(top,#149bdf,#0480be)!important;background-image:linear-gradient(to bottom,#149bdf,#0480be)!important;background-repeat:repeat-x!important;border:none!important;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ff149bdf',endColorstr='#ff0480be',GradientType=0)!important;-webkit-box-shadow:inset 0 -1px 0 rgba(0,0,0,0.15)!important;-moz-box-shadow:inset 0 -1px 0 rgba(0,0,0,0.15)!important;box-shadow:inset 0 -1px 0 rgba(0,0,0,0.15)!important;-webkit-box-sizing:border-box!important;-moz-box-sizing:border-box!important;box-sizing:border-box!important;-webkit-transition:width .6s ease!important;-moz-transition:width .6s ease!important;-o-transition:width .6s ease!important;transition:width .6s ease!important}input.form-submit,input#id_submitbutton,input#id_submitbutton2,.path-admin .buttons input[type=\"submit\"],td.submit input{color:#fff;text-shadow:0 -1px 0 rgba(0,0,0,0.25);background-color:#006dcc;*background-color:#04c;background-image:-moz-linear-gradient(top,#08c,#04c);background-image:-webkit-gradient(linear,0 0,0 100%,from(#08c),to(#04c));background-image:-webkit-linear-gradient(top,#08c,#04c);background-image:-o-linear-gradient(top,#08c,#04c);background-image:linear-gradient(to bottom,#08c,#04c);background-repeat:repeat-x;border-color:#04c #04c #002a80;border-color:rgba(0,0,0,0.1) rgba(0,0,0,0.1) rgba(0,0,0,0.25);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ff0088cc',endColorstr='#ff0044cc',GradientType=0);filter:progid:DXImageTransform.Microsoft.gradient(enabled=false)}input.form-submit:hover,input#id_submitbutton:hover,input#id_submitbutton2:hover,.path-admin .buttons input[type=\"submit\"]:hover,td.submit input:hover,input.form-submit:focus,input#id_submitbutton:focus,input#id_submitbutton2:focus,.path-admin .buttons input[type=\"submit\"]:focus,td.submit input:focus,input.form-submit:active,input#id_submitbutton:active,input#id_submitbutton2:active,.path-admin .buttons input[type=\"submit\"]:active,td.submit input:active,input.form-submit.active,input#id_submitbutton.active,input#id_submitbutton2.active,.path-admin .buttons input[type=\"submit\"].active,td.submit input.active,input.form-submit.disabled,input#id_submitbutton.disabled,input#id_submitbutton2.disabled,.path-admin .buttons input[type=\"submit\"].disabled,td.submit input.disabled,input.form-submit[disabled],input#id_submitbutton[disabled],input#id_submitbutton2[disabled],.path-admin .buttons input[type=\"submit\"][disabled],td.submit input[disabled]{color:#fff;background-color:#04c;*background-color:#003bb3}input.form-submit:active,input#id_submitbutton:active,input#id_submitbutton2:active,.path-admin .buttons input[type=\"submit\"]:active,td.submit input:active,input.form-submit.active,input#id_submitbutton.active,input#id_submitbutton2.active,.path-admin .buttons input[type=\"submit\"].active,td.submit input.active{background-color:#039 \\9}input.form-submit .caret,input#id_submitbutton .caret,input#id_submitbutton2 .caret,.path-admin .buttons input[type=\"submit\"] .caret,td.submit input .caret{border-top-color:#fff;border-bottom-color:#fff}#notice .singlebutton+.singlebutton input,.submit.buttons input[name=\"cancel\"]{display:inline-block;*display:inline;padding:4px 12px;margin-bottom:0;*margin-left:.3em;font-size:14px;line-height:20px;color:#333;text-align:center;text-shadow:0 1px 1px rgba(255,255,255,0.75);vertical-align:middle;cursor:pointer;background-color:#f5f5f5;*background-color:#e6e6e6;background-image:-moz-linear-gradient(top,#fff,#e6e6e6);background-image:-webkit-gradient(linear,0 0,0 100%,from(#fff),to(#e6e6e6));background-image:-webkit-linear-gradient(top,#fff,#e6e6e6);background-image:-o-linear-gradient(top,#fff,#e6e6e6);background-image:linear-gradient(to bottom,#fff,#e6e6e6);background-repeat:repeat-x;border:1px solid #ccc;*border:0;border-color:#e6e6e6 #e6e6e6 #bfbfbf;border-color:rgba(0,0,0,0.1) rgba(0,0,0,0.1) rgba(0,0,0,0.25);border-bottom-color:#b3b3b3;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffffff',endColorstr='#ffe6e6e6',GradientType=0);filter:progid:DXImageTransform.Microsoft.gradient(enabled=false);*zoom:1;-webkit-box-shadow:inset 0 1px 0 rgba(255,255,255,0.2),0 1px 2px rgba(0,0,0,0.05);-moz-box-shadow:inset 0 1px 0 rgba(255,255,255,0.2),0 1px 2px rgba(0,0,0,0.05);box-shadow:inset 0 1px 0 rgba(255,255,255,0.2),0 1px 2px rgba(0,0,0,0.05)}#notice .singlebutton+.singlebutton input:hover,.submit.buttons input[name=\"cancel\"]:hover,#notice .singlebutton+.singlebutton input:focus,.submit.buttons input[name=\"cancel\"]:focus,#notice .singlebutton+.singlebutton input:active,.submit.buttons input[name=\"cancel\"]:active,#notice .singlebutton+.singlebutton input.active,.submit.buttons input[name=\"cancel\"].active,#notice .singlebutton+.singlebutton input.disabled,.submit.buttons input[name=\"cancel\"].disabled,#notice .singlebutton+.singlebutton input[disabled],.submit.buttons input[name=\"cancel\"][disabled]{color:#333;background-color:#e6e6e6;*background-color:#d9d9d9}#notice .singlebutton+.singlebutton input:active,.submit.buttons input[name=\"cancel\"]:active,#notice .singlebutton+.singlebutton input.active,.submit.buttons input[name=\"cancel\"].active{background-color:#ccc \\9}#notice .singlebutton+.singlebutton input:first-child,.submit.buttons input[name=\"cancel\"]:first-child{*margin-left:0}#notice .singlebutton+.singlebutton input:hover,.submit.buttons input[name=\"cancel\"]:hover,#notice .singlebutton+.singlebutton input:focus,.submit.buttons input[name=\"cancel\"]:focus{color:#333;text-decoration:none;background-position:0 -15px;-webkit-transition:background-position .1s linear;-moz-transition:background-position .1s linear;-o-transition:background-position .1s linear;transition:background-position .1s linear}#notice .singlebutton+.singlebutton input:focus,.submit.buttons input[name=\"cancel\"]:focus{outline:thin dotted #333;outline:5px auto -webkit-focus-ring-color;outline-offset:-2px}#notice .singlebutton+.singlebutton input.active,.submit.buttons input[name=\"cancel\"].active,#notice .singlebutton+.singlebutton input:active,.submit.buttons input[name=\"cancel\"]:active{background-image:none;outline:0;-webkit-box-shadow:inset 0 2px 4px rgba(0,0,0,0.15),0 1px 2px rgba(0,0,0,0.05);-moz-box-shadow:inset 0 2px 4px rgba(0,0,0,0.15),0 1px 2px rgba(0,0,0,0.05);box-shadow:inset 0 2px 4px rgba(0,0,0,0.15),0 1px 2px rgba(0,0,0,0.05)}#notice .singlebutton+.singlebutton input.disabled,.submit.buttons input[name=\"cancel\"].disabled,#notice .singlebutton+.singlebutton input[disabled],.submit.buttons input[name=\"cancel\"][disabled]{cursor:default;background-image:none;opacity:.65;filter:alpha(opacity=65);-webkit-box-shadow:none;-moz-box-shadow:none;box-shadow:none}#notice .singlebutton+.singlebutton input .label,.submit.buttons input[name=\"cancel\"] .label,#notice .singlebutton+.singlebutton input .badge,.submit.buttons input[name=\"cancel\"] .badge{position:relative;top:-1px}#notice .singlebutton+.singlebutton input,.submit.buttons input[name=\"cancel\"]{margin:0 0 10px 5px}input[id$=\"_clearbutton\"],input[type=\"reset\"]{color:#fff;text-shadow:0 -1px 0 rgba(0,0,0,0.25);background-color:#faa732;*background-color:#f89406;background-image:-moz-linear-gradient(top,#fbb450,#f89406);background-image:-webkit-gradient(linear,0 0,0 100%,from(#fbb450),to(#f89406));background-image:-webkit-linear-gradient(top,#fbb450,#f89406);background-image:-o-linear-gradient(top,#fbb450,#f89406);background-image:linear-gradient(to bottom,#fbb450,#f89406);background-repeat:repeat-x;border-color:#f89406 #f89406 #ad6704;border-color:rgba(0,0,0,0.1) rgba(0,0,0,0.1) rgba(0,0,0,0.25);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#fffbb450',endColorstr='#fff89406',GradientType=0);filter:progid:DXImageTransform.Microsoft.gradient(enabled=false)}input[id$=\"_clearbutton\"]:hover,input[type=\"reset\"]:hover,input[id$=\"_clearbutton\"]:focus,input[type=\"reset\"]:focus,input[id$=\"_clearbutton\"]:active,input[type=\"reset\"]:active,input[id$=\"_clearbutton\"].active,input[type=\"reset\"].active,input[id$=\"_clearbutton\"].disabled,input[type=\"reset\"].disabled,input[id$=\"_clearbutton\"][disabled],input[type=\"reset\"][disabled]{color:#fff;background-color:#f89406;*background-color:#df8505}input[id$=\"_clearbutton\"]:active,input[type=\"reset\"]:active,input[id$=\"_clearbutton\"].active,input[type=\"reset\"].active{background-color:#c67605 \\9}input[id$=\"_clearbutton\"] .caret,input[type=\"reset\"] .caret{border-top-color:#fff;border-bottom-color:#fff}\n+ */.clearfix{*zoom:1}.clearfix:before,.clearfix:after{display:table;line-height:0;content:\"\"}.clearfix:after{clear:both}.hide-text{font:0/0 a;color:transparent;text-shadow:none;background-color:transparent;border:0}.input-block-level{display:block;width:100%;min-height:30px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}article,aside,details,figcaption,figure,footer,header,hgroup,nav,section{display:block}audio,canvas,video{display:inline-block;*display:inline;*zoom:1}audio:not([controls]){display:none}html{font-size:100%;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%}a:focus{outline:thin dotted #333;outline:5px auto -webkit-focus-ring-color;outline-offset:-2px}a:hover,a:active{outline:0}sub,sup{position:relative;font-size:75%;line-height:0;vertical-align:baseline}sup{top:-0.5em}sub{bottom:-0.25em}img{width:auto\\9;height:auto;max-width:100%;vertical-align:middle;border:0;-ms-interpolation-mode:bicubic}#map_canvas img,.google-maps img{max-width:none}button,input,select,textarea{margin:0;font-size:100%;vertical-align:middle}button,input{*overflow:visible;line-height:normal}button::-moz-focus-inner,input::-moz-focus-inner{padding:0;border:0}button,html input[type=\"button\"],input[type=\"reset\"],input[type=\"submit\"]{cursor:pointer;-webkit-appearance:button}label,select,button,input[type=\"button\"],input[type=\"reset\"],input[type=\"submit\"],input[type=\"radio\"],input[type=\"checkbox\"]{cursor:pointer}input[type=\"search\"]{-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;-webkit-appearance:textfield}input[type=\"search\"]::-webkit-search-decoration,input[type=\"search\"]::-webkit-search-cancel-button{-webkit-appearance:none}textarea{overflow:auto;vertical-align:top}@media print{*{color:#000!important;text-shadow:none!important;background:transparent!important;box-shadow:none!important}a,a:visited{text-decoration:underline}a[href]:after{content:\" (\" attr(href) \")\"}abbr[title]:after{content:\" (\" attr(title) \")\"}.ir a:after,a[href^=\"javascript:\"]:after,a[href^=\"#\"]:after{content:\"\"}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100%!important}@page{margin:.5cm}p,h2,h3{orphans:3;widows:3}h2,h3{page-break-after:avoid}}body{margin:0;font-family:\"Helvetica Neue\",Helvetica,Arial,sans-serif;font-size:14px;line-height:20px;color:#333;background-color:#fff}a{color:#08c;text-decoration:none}a:hover,a:focus{color:#005580;text-decoration:underline}.img-rounded{-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px}.img-polaroid{padding:4px;background-color:#fff;border:1px solid #ccc;border:1px solid rgba(0,0,0,0.2);-webkit-box-shadow:0 1px 3px rgba(0,0,0,0.1);-moz-box-shadow:0 1px 3px rgba(0,0,0,0.1);box-shadow:0 1px 3px rgba(0,0,0,0.1)}.img-circle{-webkit-border-radius:500px;-moz-border-radius:500px;border-radius:500px}.row{margin-left:-20px;*zoom:1}.row:before,.row:after{display:table;line-height:0;content:\"\"}.row:after{clear:both}[class*=\"span\"]{float:left;min-height:1px;margin-left:20px}.container,.navbar-static-top .container,.navbar-fixed-top .container,.navbar-fixed-bottom .container{width:940px}.span12{width:940px}.span11{width:860px}.span10{width:780px}.span9{width:700px}.span8{width:620px}.span7{width:540px}.span6{width:460px}.span5{width:380px}.span4{width:300px}.span3{width:220px}.span2{width:140px}.span1{width:60px}.offset12{margin-left:980px}.offset11{margin-left:900px}.offset10{margin-left:820px}.offset9{margin-left:740px}.offset8{margin-left:660px}.offset7{margin-left:580px}.offset6{margin-left:500px}.offset5{margin-left:420px}.offset4{margin-left:340px}.offset3{margin-left:260px}.offset2{margin-left:180px}.offset1{margin-left:100px}.row-fluid{width:100%;*zoom:1}.row-fluid:before,.row-fluid:after{display:table;line-height:0;content:\"\"}.row-fluid:after{clear:both}.row-fluid [class*=\"span\"]{display:block;float:left;width:100%;min-height:30px;margin-left:2.127659574468085%;*margin-left:2.074468085106383%;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.row-fluid [class*=\"span\"]:first-child{margin-left:0}.row-fluid .controls-row [class*=\"span\"]+[class*=\"span\"]{margin-left:2.127659574468085%}.row-fluid .span12{width:100%;*width:99.94680851063829%}.row-fluid .span11{width:91.48936170212765%;*width:91.43617021276594%}.row-fluid .span10{width:82.97872340425532%;*width:82.92553191489361%}.row-fluid .span9{width:74.46808510638297%;*width:74.41489361702126%}.row-fluid .span8{width:65.95744680851064%;*width:65.90425531914893%}.row-fluid .span7{width:57.44680851063829%;*width:57.39361702127659%}.row-fluid .span6{width:48.93617021276595%;*width:48.88297872340425%}.row-fluid .span5{width:40.42553191489362%;*width:40.37234042553192%}.row-fluid .span4{width:31.914893617021278%;*width:31.861702127659576%}.row-fluid .span3{width:23.404255319148934%;*width:23.351063829787233%}.row-fluid .span2{width:14.893617021276595%;*width:14.840425531914894%}.row-fluid .span1{width:6.382978723404255%;*width:6.329787234042553%}.row-fluid .offset12{margin-left:104.25531914893617%;*margin-left:104.14893617021275%}.row-fluid .offset12:first-child{margin-left:102.12765957446808%;*margin-left:102.02127659574467%}.row-fluid .offset11{margin-left:95.74468085106382%;*margin-left:95.6382978723404%}.row-fluid .offset11:first-child{margin-left:93.61702127659574%;*margin-left:93.51063829787232%}.row-fluid .offset10{margin-left:87.23404255319149%;*margin-left:87.12765957446807%}.row-fluid .offset10:first-child{margin-left:85.1063829787234%;*margin-left:84.99999999999999%}.row-fluid .offset9{margin-left:78.72340425531914%;*margin-left:78.61702127659572%}.row-fluid .offset9:first-child{margin-left:76.59574468085106%;*margin-left:76.48936170212764%}.row-fluid .offset8{margin-left:70.2127659574468%;*margin-left:70.10638297872339%}.row-fluid .offset8:first-child{margin-left:68.08510638297872%;*margin-left:67.9787234042553%}.row-fluid .offset7{margin-left:61.70212765957446%;*margin-left:61.59574468085106%}.row-fluid .offset7:first-child{margin-left:59.574468085106375%;*margin-left:59.46808510638297%}.row-fluid .offset6{margin-left:53.191489361702125%;*margin-left:53.085106382978715%}.row-fluid .offset6:first-child{margin-left:51.063829787234035%;*margin-left:50.95744680851063%}.row-fluid .offset5{margin-left:44.68085106382979%;*margin-left:44.57446808510638%}.row-fluid .offset5:first-child{margin-left:42.5531914893617%;*margin-left:42.4468085106383%}.row-fluid .offset4{margin-left:36.170212765957444%;*margin-left:36.06382978723405%}.row-fluid .offset4:first-child{margin-left:34.04255319148936%;*margin-left:33.93617021276596%}.row-fluid .offset3{margin-left:27.659574468085104%;*margin-left:27.5531914893617%}.row-fluid .offset3:first-child{margin-left:25.53191489361702%;*margin-left:25.425531914893618%}.row-fluid .offset2{margin-left:19.148936170212764%;*margin-left:19.04255319148936%}.row-fluid .offset2:first-child{margin-left:17.02127659574468%;*margin-left:16.914893617021278%}.row-fluid .offset1{margin-left:10.638297872340425%;*margin-left:10.53191489361702%}.row-fluid .offset1:first-child{margin-left:8.51063829787234%;*margin-left:8.404255319148938%}[class*=\"span\"].hide,.row-fluid [class*=\"span\"].hide{display:none}[class*=\"span\"].pull-right,.row-fluid [class*=\"span\"].pull-right{float:right}.container{margin-right:auto;margin-left:auto;*zoom:1}.container:before,.container:after{display:table;line-height:0;content:\"\"}.container:after{clear:both}.container-fluid{padding-right:20px;padding-left:20px;*zoom:1}.container-fluid:before,.container-fluid:after{display:table;line-height:0;content:\"\"}.container-fluid:after{clear:both}p{margin:0 0 10px}.lead{margin-bottom:20px;font-size:21px;font-weight:200;line-height:30px}small{font-size:85%}strong{font-weight:bold}em{font-style:italic}cite{font-style:normal}.muted{color:#999}a.muted:hover,a.muted:focus{color:#808080}.text-warning{color:#c09853}a.text-warning:hover,a.text-warning:focus{color:#a47e3c}.text-error{color:#b94a48}a.text-error:hover,a.text-error:focus{color:#953b39}.text-info{color:#3a87ad}a.text-info:hover,a.text-info:focus{color:#2d6987}.text-success{color:#468847}a.text-success:hover,a.text-success:focus{color:#356635}.text-left{text-align:left}.text-right{text-align:right}.text-center{text-align:center}h1,h2,h3,h4,h5,h6{margin:10px 0;font-family:inherit;font-weight:bold;line-height:20px;color:inherit;text-rendering:optimizelegibility}h1 small,h2 small,h3 small,h4 small,h5 small,h6 small{font-weight:normal;line-height:1;color:#999}h1,h2,h3{line-height:40px}h1{font-size:38.5px}h2{font-size:31.5px}h3{font-size:24.5px}h4{font-size:17.5px}h5{font-size:14px}h6{font-size:11.9px}h1 small{font-size:24.5px}h2 small{font-size:17.5px}h3 small{font-size:14px}h4 small{font-size:14px}.page-header{padding-bottom:9px;margin:20px 0 30px;border-bottom:1px solid #eee}ul,ol{padding:0;margin:0 0 10px 25px}ul ul,ul ol,ol ol,ol ul{margin-bottom:0}li{line-height:20px}ul.unstyled,ol.unstyled{margin-left:0;list-style:none}ul.inline,ol.inline{margin-left:0;list-style:none}ul.inline>li,ol.inline>li{display:inline-block;*display:inline;padding-right:5px;padding-left:5px;*zoom:1}dl{margin-bottom:20px}dt,dd{line-height:20px}dt{font-weight:bold}dd{margin-left:10px}.dl-horizontal{*zoom:1}.dl-horizontal:before,.dl-horizontal:after{display:table;line-height:0;content:\"\"}.dl-horizontal:after{clear:both}.dl-horizontal dt{float:left;width:180px;overflow:hidden;clear:left;text-align:right;text-overflow:ellipsis;white-space:nowrap}.dl-horizontal dd{margin-left:200px}hr{margin:20px 0;border:0;border-top:1px solid #eee;border-bottom:1px solid #fff}abbr[title],abbr[data-original-title]{cursor:help;border-bottom:1px dotted #999}abbr.initialism{font-size:90%;text-transform:uppercase}blockquote{padding:0 0 0 15px;margin:0 0 20px;border-left:5px solid #eee}blockquote p{margin-bottom:0;font-size:17.5px;font-weight:300;line-height:1.25}blockquote small{display:block;line-height:20px;color:#999}blockquote small:before{content:'\\2014 \\00A0'}blockquote.pull-right{float:right;padding-right:15px;padding-left:0;border-right:5px solid #eee;border-left:0}blockquote.pull-right p,blockquote.pull-right small{text-align:right}blockquote.pull-right small:before{content:''}blockquote.pull-right small:after{content:'\\00A0 \\2014'}q:before,q:after,blockquote:before,blockquote:after{content:\"\"}address{display:block;margin-bottom:20px;font-style:normal;line-height:20px}code,pre{padding:0 3px 2px;font-family:Monaco,Menlo,Consolas,\"Courier New\",monospace;font-size:12px;color:#333;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px}code{padding:2px 4px;color:#d14;white-space:nowrap;background-color:#f7f7f9;border:1px solid #e1e1e8}pre{display:block;padding:9.5px;margin:0 0 10px;font-size:13px;line-height:20px;word-break:break-all;word-wrap:break-word;white-space:pre;white-space:pre-wrap;background-color:#f5f5f5;border:1px solid #ccc;border:1px solid rgba(0,0,0,0.15);-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px}pre.prettyprint{margin-bottom:20px}pre code{padding:0;color:inherit;white-space:pre;white-space:pre-wrap;background-color:transparent;border:0}.pre-scrollable{max-height:340px;overflow-y:scroll}form{margin:0 0 20px}fieldset{padding:0;margin:0;border:0}legend{display:block;width:100%;padding:0;margin-bottom:20px;font-size:21px;line-height:40px;color:#333;border:0;border-bottom:1px solid #e5e5e5}legend small{font-size:15px;color:#999}label,input,button,select,textarea{font-size:14px;font-weight:normal;line-height:20px}input,button,select,textarea{font-family:\"Helvetica Neue\",Helvetica,Arial,sans-serif}label{display:block;margin-bottom:5px}select,textarea,input[type=\"text\"],input[type=\"password\"],input[type=\"datetime\"],input[type=\"datetime-local\"],input[type=\"date\"],input[type=\"month\"],input[type=\"time\"],input[type=\"week\"],input[type=\"number\"],input[type=\"email\"],input[type=\"url\"],input[type=\"search\"],input[type=\"tel\"],input[type=\"color\"],.uneditable-input{display:inline-block;height:20px;padding:4px 6px;margin-bottom:10px;font-size:14px;line-height:20px;color:#555;vertical-align:middle;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px}input,textarea,.uneditable-input{width:206px}textarea{height:auto}textarea,input[type=\"text\"],input[type=\"password\"],input[type=\"datetime\"],input[type=\"datetime-local\"],input[type=\"date\"],input[type=\"month\"],input[type=\"time\"],input[type=\"week\"],input[type=\"number\"],input[type=\"email\"],input[type=\"url\"],input[type=\"search\"],input[type=\"tel\"],input[type=\"color\"],.uneditable-input{background-color:#fff;border:1px solid #ccc;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075);-moz-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075);box-shadow:inset 0 1px 1px rgba(0,0,0,0.075);-webkit-transition:border linear .2s,box-shadow linear .2s;-moz-transition:border linear .2s,box-shadow linear .2s;-o-transition:border linear .2s,box-shadow linear .2s;transition:border linear .2s,box-shadow linear .2s}textarea:focus,input[type=\"text\"]:focus,input[type=\"password\"]:focus,input[type=\"datetime\"]:focus,input[type=\"datetime-local\"]:focus,input[type=\"date\"]:focus,input[type=\"month\"]:focus,input[type=\"time\"]:focus,input[type=\"week\"]:focus,input[type=\"number\"]:focus,input[type=\"email\"]:focus,input[type=\"url\"]:focus,input[type=\"search\"]:focus,input[type=\"tel\"]:focus,input[type=\"color\"]:focus,.uneditable-input:focus{border-color:rgba(82,168,236,0.8);outline:0;outline:thin dotted \\9;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075),0 0 8px rgba(82,168,236,0.6);-moz-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075),0 0 8px rgba(82,168,236,0.6);box-shadow:inset 0 1px 1px rgba(0,0,0,0.075),0 0 8px rgba(82,168,236,0.6)}input[type=\"radio\"],input[type=\"checkbox\"]{margin:4px 0 0;margin-top:1px \\9;*margin-top:0;line-height:normal}input[type=\"file\"],input[type=\"image\"],input[type=\"submit\"],input[type=\"reset\"],input[type=\"button\"],input[type=\"radio\"],input[type=\"checkbox\"]{width:auto}select,input[type=\"file\"]{height:30px;*margin-top:4px;line-height:30px}select{width:220px;background-color:#fff;border:1px solid #ccc}select[multiple],select[size]{height:auto}select:focus,input[type=\"file\"]:focus,input[type=\"radio\"]:focus,input[type=\"checkbox\"]:focus{outline:thin dotted #333;outline:5px auto -webkit-focus-ring-color;outline-offset:-2px}.uneditable-input,.uneditable-textarea{color:#999;cursor:not-allowed;background-color:#fcfcfc;border-color:#ccc;-webkit-box-shadow:inset 0 1px 2px rgba(0,0,0,0.025);-moz-box-shadow:inset 0 1px 2px rgba(0,0,0,0.025);box-shadow:inset 0 1px 2px rgba(0,0,0,0.025)}.uneditable-input{overflow:hidden;white-space:nowrap}.uneditable-textarea{width:auto;height:auto}input:-moz-placeholder,textarea:-moz-placeholder{color:#999}input:-ms-input-placeholder,textarea:-ms-input-placeholder{color:#999}input::-webkit-input-placeholder,textarea::-webkit-input-placeholder{color:#999}.radio,.checkbox{min-height:20px;padding-left:20px}.radio input[type=\"radio\"],.checkbox input[type=\"checkbox\"]{float:left;margin-left:-20px}.controls>.radio:first-child,.controls>.checkbox:first-child{padding-top:5px}.radio.inline,.checkbox.inline{display:inline-block;padding-top:5px;margin-bottom:0;vertical-align:middle}.radio.inline+.radio.inline,.checkbox.inline+.checkbox.inline{margin-left:10px}.input-mini{width:60px}.input-small{width:90px}.input-medium{width:150px}.input-large{width:210px}.input-xlarge{width:270px}.input-xxlarge{width:530px}input[class*=\"span\"],select[class*=\"span\"],textarea[class*=\"span\"],.uneditable-input[class*=\"span\"],.row-fluid input[class*=\"span\"],.row-fluid select[class*=\"span\"],.row-fluid textarea[class*=\"span\"],.row-fluid .uneditable-input[class*=\"span\"]{float:none;margin-left:0}.input-append input[class*=\"span\"],.input-append .uneditable-input[class*=\"span\"],.input-prepend input[class*=\"span\"],.input-prepend .uneditable-input[class*=\"span\"],.row-fluid input[class*=\"span\"],.row-fluid select[class*=\"span\"],.row-fluid textarea[class*=\"span\"],.row-fluid .uneditable-input[class*=\"span\"],.row-fluid .input-prepend [class*=\"span\"],.row-fluid .input-append [class*=\"span\"]{display:inline-block}input,textarea,.uneditable-input{margin-left:0}.controls-row [class*=\"span\"]+[class*=\"span\"]{margin-left:20px}input.span12,textarea.span12,.uneditable-input.span12{width:926px}input.span11,textarea.span11,.uneditable-input.span11{width:846px}input.span10,textarea.span10,.uneditable-input.span10{width:766px}input.span9,textarea.span9,.uneditable-input.span9{width:686px}input.span8,textarea.span8,.uneditable-input.span8{width:606px}input.span7,textarea.span7,.uneditable-input.span7{width:526px}input.span6,textarea.span6,.uneditable-input.span6{width:446px}input.span5,textarea.span5,.uneditable-input.span5{width:366px}input.span4,textarea.span4,.uneditable-input.span4{width:286px}input.span3,textarea.span3,.uneditable-input.span3{width:206px}input.span2,textarea.span2,.uneditable-input.span2{width:126px}input.span1,textarea.span1,.uneditable-input.span1{width:46px}.controls-row{*zoom:1}.controls-row:before,.controls-row:after{display:table;line-height:0;content:\"\"}.controls-row:after{clear:both}.controls-row [class*=\"span\"],.row-fluid .controls-row [class*=\"span\"]{float:left}.controls-row .checkbox[class*=\"span\"],.controls-row .radio[class*=\"span\"]{padding-top:5px}input[disabled],select[disabled],textarea[disabled],input[readonly],select[readonly],textarea[readonly]{cursor:not-allowed;background-color:#eee}input[type=\"radio\"][disabled],input[type=\"checkbox\"][disabled],input[type=\"radio\"][readonly],input[type=\"checkbox\"][readonly]{background-color:transparent}.control-group.warning .control-label,.control-group.warning .help-block,.control-group.warning .help-inline{color:#c09853}.control-group.warning .checkbox,.control-group.warning .radio,.control-group.warning input,.control-group.warning select,.control-group.warning textarea{color:#c09853}.control-group.warning input,.control-group.warning select,.control-group.warning textarea{border-color:#c09853;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075);-moz-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075);box-shadow:inset 0 1px 1px rgba(0,0,0,0.075)}.control-group.warning input:focus,.control-group.warning select:focus,.control-group.warning textarea:focus{border-color:#a47e3c;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075),0 0 6px #dbc59e;-moz-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075),0 0 6px #dbc59e;box-shadow:inset 0 1px 1px rgba(0,0,0,0.075),0 0 6px #dbc59e}.control-group.warning .input-prepend .add-on,.control-group.warning .input-append .add-on{color:#c09853;background-color:#fcf8e3;border-color:#c09853}.control-group.error .control-label,.control-group.error .help-block,.control-group.error .help-inline{color:#b94a48}.control-group.error .checkbox,.control-group.error .radio,.control-group.error input,.control-group.error select,.control-group.error textarea{color:#b94a48}.control-group.error input,.control-group.error select,.control-group.error textarea{border-color:#b94a48;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075);-moz-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075);box-shadow:inset 0 1px 1px rgba(0,0,0,0.075)}.control-group.error input:focus,.control-group.error select:focus,.control-group.error textarea:focus{border-color:#953b39;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075),0 0 6px #d59392;-moz-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075),0 0 6px #d59392;box-shadow:inset 0 1px 1px rgba(0,0,0,0.075),0 0 6px #d59392}.control-group.error .input-prepend .add-on,.control-group.error .input-append .add-on{color:#b94a48;background-color:#f2dede;border-color:#b94a48}.control-group.success .control-label,.control-group.success .help-block,.control-group.success .help-inline{color:#468847}.control-group.success .checkbox,.control-group.success .radio,.control-group.success input,.control-group.success select,.control-group.success textarea{color:#468847}.control-group.success input,.control-group.success select,.control-group.success textarea{border-color:#468847;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075);-moz-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075);box-shadow:inset 0 1px 1px rgba(0,0,0,0.075)}.control-group.success input:focus,.control-group.success select:focus,.control-group.success textarea:focus{border-color:#356635;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075),0 0 6px #7aba7b;-moz-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075),0 0 6px #7aba7b;box-shadow:inset 0 1px 1px rgba(0,0,0,0.075),0 0 6px #7aba7b}.control-group.success .input-prepend .add-on,.control-group.success .input-append .add-on{color:#468847;background-color:#dff0d8;border-color:#468847}.control-group.info .control-label,.control-group.info .help-block,.control-group.info .help-inline{color:#3a87ad}.control-group.info .checkbox,.control-group.info .radio,.control-group.info input,.control-group.info select,.control-group.info textarea{color:#3a87ad}.control-group.info input,.control-group.info select,.control-group.info textarea{border-color:#3a87ad;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075);-moz-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075);box-shadow:inset 0 1px 1px rgba(0,0,0,0.075)}.control-group.info input:focus,.control-group.info select:focus,.control-group.info textarea:focus{border-color:#2d6987;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075),0 0 6px #7ab5d3;-moz-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075),0 0 6px #7ab5d3;box-shadow:inset 0 1px 1px rgba(0,0,0,0.075),0 0 6px #7ab5d3}.control-group.info .input-prepend .add-on,.control-group.info .input-append .add-on{color:#3a87ad;background-color:#d9edf7;border-color:#3a87ad}input:focus:invalid,textarea:focus:invalid,select:focus:invalid{color:#b94a48;border-color:#ee5f5b}input:focus:invalid:focus,textarea:focus:invalid:focus,select:focus:invalid:focus{border-color:#e9322d;-webkit-box-shadow:0 0 6px #f8b9b7;-moz-box-shadow:0 0 6px #f8b9b7;box-shadow:0 0 6px #f8b9b7}.form-actions{padding:19px 20px 20px;margin-top:20px;margin-bottom:20px;background-color:#f5f5f5;border-top:1px solid #e5e5e5;*zoom:1}.form-actions:before,.form-actions:after{display:table;line-height:0;content:\"\"}.form-actions:after{clear:both}.help-block,.help-inline{color:#595959}.help-block{display:block;margin-bottom:10px}.help-inline{display:inline-block;*display:inline;padding-left:5px;vertical-align:middle;*zoom:1}.input-append,.input-prepend{display:inline-block;margin-bottom:10px;font-size:0;white-space:nowrap;vertical-align:middle}.input-append input,.input-prepend input,.input-append select,.input-prepend select,.input-append .uneditable-input,.input-prepend .uneditable-input,.input-append .dropdown-menu,.input-prepend .dropdown-menu,.input-append .popover,.input-prepend .popover{font-size:14px}.input-append input,.input-prepend input,.input-append select,.input-prepend select,.input-append .uneditable-input,.input-prepend .uneditable-input{position:relative;margin-bottom:0;*margin-left:0;vertical-align:top;-webkit-border-radius:0 4px 4px 0;-moz-border-radius:0 4px 4px 0;border-radius:0 4px 4px 0}.input-append input:focus,.input-prepend input:focus,.input-append select:focus,.input-prepend select:focus,.input-append .uneditable-input:focus,.input-prepend .uneditable-input:focus{z-index:2}.input-append .add-on,.input-prepend .add-on{display:inline-block;width:auto;height:20px;min-width:16px;padding:4px 5px;font-size:14px;font-weight:normal;line-height:20px;text-align:center;text-shadow:0 1px 0 #fff;background-color:#eee;border:1px solid #ccc}.input-append .add-on,.input-prepend .add-on,.input-append .btn,.input-prepend .btn,.input-append .btn-group>.dropdown-toggle,.input-prepend .btn-group>.dropdown-toggle{vertical-align:top;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.input-append .active,.input-prepend .active{background-color:#a9dba9;border-color:#46a546}.input-prepend .add-on,.input-prepend .btn{margin-right:-1px}.input-prepend .add-on:first-child,.input-prepend .btn:first-child{-webkit-border-radius:4px 0 0 4px;-moz-border-radius:4px 0 0 4px;border-radius:4px 0 0 4px}.input-append input,.input-append select,.input-append .uneditable-input{-webkit-border-radius:4px 0 0 4px;-moz-border-radius:4px 0 0 4px;border-radius:4px 0 0 4px}.input-append input+.btn-group .btn:last-child,.input-append select+.btn-group .btn:last-child,.input-append .uneditable-input+.btn-group .btn:last-child{-webkit-border-radius:0 4px 4px 0;-moz-border-radius:0 4px 4px 0;border-radius:0 4px 4px 0}.input-append .add-on,.input-append .btn,.input-append .btn-group{margin-left:-1px}.input-append .add-on:last-child,.input-append .btn:last-child,.input-append .btn-group:last-child>.dropdown-toggle{-webkit-border-radius:0 4px 4px 0;-moz-border-radius:0 4px 4px 0;border-radius:0 4px 4px 0}.input-prepend.input-append input,.input-prepend.input-append select,.input-prepend.input-append .uneditable-input{-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.input-prepend.input-append input+.btn-group .btn,.input-prepend.input-append select+.btn-group .btn,.input-prepend.input-append .uneditable-input+.btn-group .btn{-webkit-border-radius:0 4px 4px 0;-moz-border-radius:0 4px 4px 0;border-radius:0 4px 4px 0}.input-prepend.input-append .add-on:first-child,.input-prepend.input-append .btn:first-child{margin-right:-1px;-webkit-border-radius:4px 0 0 4px;-moz-border-radius:4px 0 0 4px;border-radius:4px 0 0 4px}.input-prepend.input-append .add-on:last-child,.input-prepend.input-append .btn:last-child{margin-left:-1px;-webkit-border-radius:0 4px 4px 0;-moz-border-radius:0 4px 4px 0;border-radius:0 4px 4px 0}.input-prepend.input-append .btn-group:first-child{margin-left:0}input.search-query{padding-right:14px;padding-right:4px \\9;padding-left:14px;padding-left:4px \\9;margin-bottom:0;-webkit-border-radius:15px;-moz-border-radius:15px;border-radius:15px}.form-search .input-append .search-query,.form-search .input-prepend .search-query{-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.form-search .input-append .search-query{-webkit-border-radius:14px 0 0 14px;-moz-border-radius:14px 0 0 14px;border-radius:14px 0 0 14px}.form-search .input-append .btn{-webkit-border-radius:0 14px 14px 0;-moz-border-radius:0 14px 14px 0;border-radius:0 14px 14px 0}.form-search .input-prepend .search-query{-webkit-border-radius:0 14px 14px 0;-moz-border-radius:0 14px 14px 0;border-radius:0 14px 14px 0}.form-search .input-prepend .btn{-webkit-border-radius:14px 0 0 14px;-moz-border-radius:14px 0 0 14px;border-radius:14px 0 0 14px}.form-search input,.form-inline input,.form-horizontal input,.form-search textarea,.form-inline textarea,.form-horizontal textarea,.form-search select,.form-inline select,.form-horizontal select,.form-search .help-inline,.form-inline .help-inline,.form-horizontal .help-inline,.form-search .uneditable-input,.form-inline .uneditable-input,.form-horizontal .uneditable-input,.form-search .input-prepend,.form-inline .input-prepend,.form-horizontal .input-prepend,.form-search .input-append,.form-inline .input-append,.form-horizontal .input-append{display:inline-block;*display:inline;margin-bottom:0;vertical-align:middle;*zoom:1}.form-search .hide,.form-inline .hide,.form-horizontal .hide{display:none}.form-search label,.form-inline label,.form-search .btn-group,.form-inline .btn-group{display:inline-block}.form-search .input-append,.form-inline .input-append,.form-search .input-prepend,.form-inline .input-prepend{margin-bottom:0}.form-search .radio,.form-search .checkbox,.form-inline .radio,.form-inline .checkbox{padding-left:0;margin-bottom:0;vertical-align:middle}.form-search .radio input[type=\"radio\"],.form-search .checkbox input[type=\"checkbox\"],.form-inline .radio input[type=\"radio\"],.form-inline .checkbox input[type=\"checkbox\"]{float:left;margin-right:3px;margin-left:0}.control-group{margin-bottom:10px}legend+.control-group{margin-top:20px;-webkit-margin-top-collapse:separate}.form-horizontal .control-group{margin-bottom:20px;*zoom:1}.form-horizontal .control-group:before,.form-horizontal .control-group:after{display:table;line-height:0;content:\"\"}.form-horizontal .control-group:after{clear:both}.form-horizontal .control-label{float:left;width:180px;padding-top:5px;text-align:right}.form-horizontal .controls{*display:inline-block;*padding-left:20px;margin-left:200px;*margin-left:0}.form-horizontal .controls:first-child{*padding-left:200px}.form-horizontal .help-block{margin-bottom:0}.form-horizontal input+.help-block,.form-horizontal select+.help-block,.form-horizontal textarea+.help-block,.form-horizontal .uneditable-input+.help-block,.form-horizontal .input-prepend+.help-block,.form-horizontal .input-append+.help-block{margin-top:10px}.form-horizontal .form-actions{padding-left:200px}table{max-width:100%;background-color:transparent;border-collapse:collapse;border-spacing:0}.table{width:100%;margin-bottom:20px}.table th,.table td{padding:8px;line-height:20px;text-align:left;vertical-align:top;border-top:1px solid #ddd}.table th{font-weight:bold}.table thead th{vertical-align:bottom}.table caption+thead tr:first-child th,.table caption+thead tr:first-child td,.table colgroup+thead tr:first-child th,.table colgroup+thead tr:first-child td,.table thead:first-child tr:first-child th,.table thead:first-child tr:first-child td{border-top:0}.table tbody+tbody{border-top:2px solid #ddd}.table .table{background-color:#fff}.table-condensed th,.table-condensed td{padding:4px 5px}.table-bordered{border:1px solid #ddd;border-collapse:separate;*border-collapse:collapse;border-left:0;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px}.table-bordered th,.table-bordered td{border-left:1px solid #ddd}.table-bordered caption+thead tr:first-child th,.table-bordered caption+tbody tr:first-child th,.table-bordered caption+tbody tr:first-child td,.table-bordered colgroup+thead tr:first-child th,.table-bordered colgroup+tbody tr:first-child th,.table-bordered colgroup+tbody tr:first-child td,.table-bordered thead:first-child tr:first-child th,.table-bordered tbody:first-child tr:first-child th,.table-bordered tbody:first-child tr:first-child td{border-top:0}.table-bordered thead:first-child tr:first-child>th:first-child,.table-bordered tbody:first-child tr:first-child>td:first-child,.table-bordered tbody:first-child tr:first-child>th:first-child{-webkit-border-top-left-radius:4px;border-top-left-radius:4px;-moz-border-radius-topleft:4px}.table-bordered thead:first-child tr:first-child>th:last-child,.table-bordered tbody:first-child tr:first-child>td:last-child,.table-bordered tbody:first-child tr:first-child>th:last-child{-webkit-border-top-right-radius:4px;border-top-right-radius:4px;-moz-border-radius-topright:4px}.table-bordered thead:last-child tr:last-child>th:first-child,.table-bordered tbody:last-child tr:last-child>td:first-child,.table-bordered tbody:last-child tr:last-child>th:first-child,.table-bordered tfoot:last-child tr:last-child>td:first-child,.table-bordered tfoot:last-child tr:last-child>th:first-child{-webkit-border-bottom-left-radius:4px;border-bottom-left-radius:4px;-moz-border-radius-bottomleft:4px}.table-bordered thead:last-child tr:last-child>th:last-child,.table-bordered tbody:last-child tr:last-child>td:last-child,.table-bordered tbody:last-child tr:last-child>th:last-child,.table-bordered tfoot:last-child tr:last-child>td:last-child,.table-bordered tfoot:last-child tr:last-child>th:last-child{-webkit-border-bottom-right-radius:4px;border-bottom-right-radius:4px;-moz-border-radius-bottomright:4px}.table-bordered tfoot+tbody:last-child tr:last-child td:first-child{-webkit-border-bottom-left-radius:0;border-bottom-left-radius:0;-moz-border-radius-bottomleft:0}.table-bordered tfoot+tbody:last-child tr:last-child td:last-child{-webkit-border-bottom-right-radius:0;border-bottom-right-radius:0;-moz-border-radius-bottomright:0}.table-bordered caption+thead tr:first-child th:first-child,.table-bordered caption+tbody tr:first-child td:first-child,.table-bordered colgroup+thead tr:first-child th:first-child,.table-bordered colgroup+tbody tr:first-child td:first-child{-webkit-border-top-left-radius:4px;border-top-left-radius:4px;-moz-border-radius-topleft:4px}.table-bordered caption+thead tr:first-child th:last-child,.table-bordered caption+tbody tr:first-child td:last-child,.table-bordered colgroup+thead tr:first-child th:last-child,.table-bordered colgroup+tbody tr:first-child td:last-child{-webkit-border-top-right-radius:4px;border-top-right-radius:4px;-moz-border-radius-topright:4px}.table-striped tbody>tr:nth-child(odd)>td,.table-striped tbody>tr:nth-child(odd)>th{background-color:#f9f9f9}.table-hover tbody tr:hover>td,.table-hover tbody tr:hover>th{background-color:#f5f5f5}table td[class*=\"span\"],table th[class*=\"span\"],.row-fluid table td[class*=\"span\"],.row-fluid table th[class*=\"span\"]{display:table-cell;float:none;margin-left:0}.table td.span1,.table th.span1{float:none;width:44px;margin-left:0}.table td.span2,.table th.span2{float:none;width:124px;margin-left:0}.table td.span3,.table th.span3{float:none;width:204px;margin-left:0}.table td.span4,.table th.span4{float:none;width:284px;margin-left:0}.table td.span5,.table th.span5{float:none;width:364px;margin-left:0}.table td.span6,.table th.span6{float:none;width:444px;margin-left:0}.table td.span7,.table th.span7{float:none;width:524px;margin-left:0}.table td.span8,.table th.span8{float:none;width:604px;margin-left:0}.table td.span9,.table th.span9{float:none;width:684px;margin-left:0}.table td.span10,.table th.span10{float:none;width:764px;margin-left:0}.table td.span11,.table th.span11{float:none;width:844px;margin-left:0}.table td.span12,.table th.span12{float:none;width:924px;margin-left:0}.table tbody tr.success>td{background-color:#dff0d8}.table tbody tr.error>td{background-color:#f2dede}.table tbody tr.warning>td{background-color:#fcf8e3}.table tbody tr.info>td{background-color:#d9edf7}.table-hover tbody tr.success:hover>td{background-color:#d0e9c6}.table-hover tbody tr.error:hover>td{background-color:#ebcccc}.table-hover tbody tr.warning:hover>td{background-color:#faf2cc}.table-hover tbody tr.info:hover>td{background-color:#c4e3f3}[class^=\"icon-\"],[class*=\" icon-\"]{display:inline-block;width:14px;height:14px;margin-top:1px;*margin-right:.3em;line-height:14px;vertical-align:text-top;background-image:url(\"[[pix:theme|glyphicons-halflings]]\");background-position:14px 14px;background-repeat:no-repeat}.icon-white,.nav-pills>.active>a>[class^=\"icon-\"],.nav-pills>.active>a>[class*=\" icon-\"],.nav-list>.active>a>[class^=\"icon-\"],.nav-list>.active>a>[class*=\" icon-\"],.navbar-inverse .nav>.active>a>[class^=\"icon-\"],.navbar-inverse .nav>.active>a>[class*=\" icon-\"],.dropdown-menu>li>a:hover>[class^=\"icon-\"],.dropdown-menu>li>a:focus>[class^=\"icon-\"],.dropdown-menu>li>a:hover>[class*=\" icon-\"],.dropdown-menu>li>a:focus>[class*=\" icon-\"],.dropdown-menu>.active>a>[class^=\"icon-\"],.dropdown-menu>.active>a>[class*=\" icon-\"],.dropdown-submenu:hover>a>[class^=\"icon-\"],.dropdown-submenu:focus>a>[class^=\"icon-\"],.dropdown-submenu:hover>a>[class*=\" icon-\"],.dropdown-submenu:focus>a>[class*=\" icon-\"]{background-image:url(\"[[pix:theme|glyphicons-halflings-white]]\")}.icon-glass{background-position:0 0}.icon-music{background-position:-24px 0}.icon-search{background-position:-48px 0}.icon-envelope{background-position:-72px 0}.icon-heart{background-position:-96px 0}.icon-star{background-position:-120px 0}.icon-star-empty{background-position:-144px 0}.icon-user{background-position:-168px 0}.icon-film{background-position:-192px 0}.icon-th-large{background-position:-216px 0}.icon-th{background-position:-240px 0}.icon-th-list{background-position:-264px 0}.icon-ok{background-position:-288px 0}.icon-remove{background-position:-312px 0}.icon-zoom-in{background-position:-336px 0}.icon-zoom-out{background-position:-360px 0}.icon-off{background-position:-384px 0}.icon-signal{background-position:-408px 0}.icon-cog{background-position:-432px 0}.icon-trash{background-position:-456px 0}.icon-home{background-position:0 -24px}.icon-file{background-position:-24px -24px}.icon-time{background-position:-48px -24px}.icon-road{background-position:-72px -24px}.icon-download-alt{background-position:-96px -24px}.icon-download{background-position:-120px -24px}.icon-upload{background-position:-144px -24px}.icon-inbox{background-position:-168px -24px}.icon-play-circle{background-position:-192px -24px}.icon-repeat{background-position:-216px -24px}.icon-refresh{background-position:-240px -24px}.icon-list-alt{background-position:-264px -24px}.icon-lock{background-position:-287px -24px}.icon-flag{background-position:-312px -24px}.icon-headphones{background-position:-336px -24px}.icon-volume-off{background-position:-360px -24px}.icon-volume-down{background-position:-384px -24px}.icon-volume-up{background-position:-408px -24px}.icon-qrcode{background-position:-432px -24px}.icon-barcode{background-position:-456px -24px}.icon-tag{background-position:0 -48px}.icon-tags{background-position:-25px -48px}.icon-book{background-position:-48px -48px}.icon-bookmark{background-position:-72px -48px}.icon-print{background-position:-96px -48px}.icon-camera{background-position:-120px -48px}.icon-font{background-position:-144px -48px}.icon-bold{background-position:-167px -48px}.icon-italic{background-position:-192px -48px}.icon-text-height{background-position:-216px -48px}.icon-text-width{background-position:-240px -48px}.icon-align-left{background-position:-264px -48px}.icon-align-center{background-position:-288px -48px}.icon-align-right{background-position:-312px -48px}.icon-align-justify{background-position:-336px -48px}.icon-list{background-position:-360px -48px}.icon-indent-left{background-position:-384px -48px}.icon-indent-right{background-position:-408px -48px}.icon-facetime-video{background-position:-432px -48px}.icon-picture{background-position:-456px -48px}.icon-pencil{background-position:0 -72px}.icon-map-marker{background-position:-24px -72px}.icon-adjust{background-position:-48px -72px}.icon-tint{background-position:-72px -72px}.icon-edit{background-position:-96px -72px}.icon-share{background-position:-120px -72px}.icon-check{background-position:-144px -72px}.icon-move{background-position:-168px -72px}.icon-step-backward{background-position:-192px -72px}.icon-fast-backward{background-position:-216px -72px}.icon-backward{background-position:-240px -72px}.icon-play{background-position:-264px -72px}.icon-pause{background-position:-288px -72px}.icon-stop{background-position:-312px -72px}.icon-forward{background-position:-336px -72px}.icon-fast-forward{background-position:-360px -72px}.icon-step-forward{background-position:-384px -72px}.icon-eject{background-position:-408px -72px}.icon-chevron-left{background-position:-432px -72px}.icon-chevron-right{background-position:-456px -72px}.icon-plus-sign{background-position:0 -96px}.icon-minus-sign{background-position:-24px -96px}.icon-remove-sign{background-position:-48px -96px}.icon-ok-sign{background-position:-72px -96px}.icon-question-sign{background-position:-96px -96px}.icon-info-sign{background-position:-120px -96px}.icon-screenshot{background-position:-144px -96px}.icon-remove-circle{background-position:-168px -96px}.icon-ok-circle{background-position:-192px -96px}.icon-ban-circle{background-position:-216px -96px}.icon-arrow-left{background-position:-240px -96px}.icon-arrow-right{background-position:-264px -96px}.icon-arrow-up{background-position:-289px -96px}.icon-arrow-down{background-position:-312px -96px}.icon-share-alt{background-position:-336px -96px}.icon-resize-full{background-position:-360px -96px}.icon-resize-small{background-position:-384px -96px}.icon-plus{background-position:-408px -96px}.icon-minus{background-position:-433px -96px}.icon-asterisk{background-position:-456px -96px}.icon-exclamation-sign{background-position:0 -120px}.icon-gift{background-position:-24px -120px}.icon-leaf{background-position:-48px -120px}.icon-fire{background-position:-72px -120px}.icon-eye-open{background-position:-96px -120px}.icon-eye-close{background-position:-120px -120px}.icon-warning-sign{background-position:-144px -120px}.icon-plane{background-position:-168px -120px}.icon-calendar{background-position:-192px -120px}.icon-random{width:16px;background-position:-216px -120px}.icon-comment{background-position:-240px -120px}.icon-magnet{background-position:-264px -120px}.icon-chevron-up{background-position:-288px -120px}.icon-chevron-down{background-position:-313px -119px}.icon-retweet{background-position:-336px -120px}.icon-shopping-cart{background-position:-360px -120px}.icon-folder-close{width:16px;background-position:-384px -120px}.icon-folder-open{width:16px;background-position:-408px -120px}.icon-resize-vertical{background-position:-432px -119px}.icon-resize-horizontal{background-position:-456px -118px}.icon-hdd{background-position:0 -144px}.icon-bullhorn{background-position:-24px -144px}.icon-bell{background-position:-48px -144px}.icon-certificate{background-position:-72px -144px}.icon-thumbs-up{background-position:-96px -144px}.icon-thumbs-down{background-position:-120px -144px}.icon-hand-right{background-position:-144px -144px}.icon-hand-left{background-position:-168px -144px}.icon-hand-up{background-position:-192px -144px}.icon-hand-down{background-position:-216px -144px}.icon-circle-arrow-right{background-position:-240px -144px}.icon-circle-arrow-left{background-position:-264px -144px}.icon-circle-arrow-up{background-position:-288px -144px}.icon-circle-arrow-down{background-position:-312px -144px}.icon-globe{background-position:-336px -144px}.icon-wrench{background-position:-360px -144px}.icon-tasks{background-position:-384px -144px}.icon-filter{background-position:-408px -144px}.icon-briefcase{background-position:-432px -144px}.icon-fullscreen{background-position:-456px -144px}.dropup,.dropdown{position:relative}.dropdown-toggle{*margin-bottom:-3px}.dropdown-toggle:active,.open .dropdown-toggle{outline:0}.caret{display:inline-block;width:0;height:0;vertical-align:top;border-top:4px solid #000;border-right:4px solid transparent;border-left:4px solid transparent;content:\"\"}.dropdown .caret{margin-top:8px;margin-left:2px}.dropdown-menu{position:absolute;top:100%;left:0;z-index:1000;display:none;float:left;min-width:160px;padding:5px 0;margin:2px 0 0;list-style:none;background-color:#fff;border:1px solid #ccc;border:1px solid rgba(0,0,0,0.2);*border-right-width:2px;*border-bottom-width:2px;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;-webkit-box-shadow:0 5px 10px rgba(0,0,0,0.2);-moz-box-shadow:0 5px 10px rgba(0,0,0,0.2);box-shadow:0 5px 10px rgba(0,0,0,0.2);-webkit-background-clip:padding-box;-moz-background-clip:padding;background-clip:padding-box}.dropdown-menu.pull-right{right:0;left:auto}.dropdown-menu .divider{*width:100%;height:1px;margin:9px 1px;*margin:-5px 0 5px;overflow:hidden;background-color:#e5e5e5;border-bottom:1px solid #fff}.dropdown-menu>li>a{display:block;padding:3px 20px;clear:both;font-weight:normal;line-height:20px;color:#333;white-space:nowrap}.dropdown-menu>li>a:hover,.dropdown-menu>li>a:focus,.dropdown-submenu:hover>a,.dropdown-submenu:focus>a{color:#fff;text-decoration:none;background-color:#0081c2;background-image:-moz-linear-gradient(top,#08c,#0077b3);background-image:-webkit-gradient(linear,0 0,0 100%,from(#08c),to(#0077b3));background-image:-webkit-linear-gradient(top,#08c,#0077b3);background-image:-o-linear-gradient(top,#08c,#0077b3);background-image:linear-gradient(to bottom,#08c,#0077b3);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ff0088cc',endColorstr='#ff0077b3',GradientType=0)}.dropdown-menu>.active>a,.dropdown-menu>.active>a:hover,.dropdown-menu>.active>a:focus{color:#fff;text-decoration:none;background-color:#0081c2;background-image:-moz-linear-gradient(top,#08c,#0077b3);background-image:-webkit-gradient(linear,0 0,0 100%,from(#08c),to(#0077b3));background-image:-webkit-linear-gradient(top,#08c,#0077b3);background-image:-o-linear-gradient(top,#08c,#0077b3);background-image:linear-gradient(to bottom,#08c,#0077b3);background-repeat:repeat-x;outline:0;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ff0088cc',endColorstr='#ff0077b3',GradientType=0)}.dropdown-menu>.disabled>a,.dropdown-menu>.disabled>a:hover,.dropdown-menu>.disabled>a:focus{color:#999}.dropdown-menu>.disabled>a:hover,.dropdown-menu>.disabled>a:focus{text-decoration:none;cursor:default;background-color:transparent;background-image:none;filter:progid:DXImageTransform.Microsoft.gradient(enabled=false)}.open{*z-index:1000}.open>.dropdown-menu{display:block}.pull-right>.dropdown-menu{right:0;left:auto}.dropup .caret,.navbar-fixed-bottom .dropdown .caret{border-top:0;border-bottom:4px solid #000;content:\"\"}.dropup .dropdown-menu,.navbar-fixed-bottom .dropdown .dropdown-menu{top:auto;bottom:100%;margin-bottom:1px}.dropdown-submenu{position:relative}.dropdown-submenu>.dropdown-menu{top:0;left:100%;margin-top:-6px;margin-left:-1px;-webkit-border-radius:0 6px 6px 6px;-moz-border-radius:0 6px 6px 6px;border-radius:0 6px 6px 6px}.dropdown-submenu:hover>.dropdown-menu{display:block}.dropup .dropdown-submenu>.dropdown-menu{top:auto;bottom:0;margin-top:0;margin-bottom:-2px;-webkit-border-radius:5px 5px 5px 0;-moz-border-radius:5px 5px 5px 0;border-radius:5px 5px 5px 0}.dropdown-submenu>a:after{display:block;float:right;width:0;height:0;margin-top:5px;margin-right:-10px;border-color:transparent;border-left-color:#ccc;border-style:solid;border-width:5px 0 5px 5px;content:\" \"}.dropdown-submenu:hover>a:after{border-left-color:#fff}.dropdown-submenu.pull-left{float:none}.dropdown-submenu.pull-left>.dropdown-menu{left:-100%;margin-left:10px;-webkit-border-radius:6px 0 6px 6px;-moz-border-radius:6px 0 6px 6px;border-radius:6px 0 6px 6px}.dropdown .dropdown-menu .nav-header{padding-right:20px;padding-left:20px}.typeahead{z-index:1051;margin-top:2px;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px}.well{min-height:20px;padding:19px;margin-bottom:20px;background-color:#f5f5f5;border:1px solid #e3e3e3;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,0.05);-moz-box-shadow:inset 0 1px 1px rgba(0,0,0,0.05);box-shadow:inset 0 1px 1px rgba(0,0,0,0.05)}.well blockquote{border-color:#ddd;border-color:rgba(0,0,0,0.15)}.well-large{padding:24px;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px}.well-small{padding:9px;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px}.fade{opacity:0;-webkit-transition:opacity .15s linear;-moz-transition:opacity .15s linear;-o-transition:opacity .15s linear;transition:opacity .15s linear}.fade.in{opacity:1}.collapse{position:relative;height:0;overflow:hidden;-webkit-transition:height .35s ease;-moz-transition:height .35s ease;-o-transition:height .35s ease;transition:height .35s ease}.collapse.in{height:auto}.close{float:right;font-size:20px;font-weight:bold;line-height:20px;color:#000;text-shadow:0 1px 0 #fff;opacity:.2;filter:alpha(opacity=20)}.close:hover,.close:focus{color:#000;text-decoration:none;cursor:pointer;opacity:.4;filter:alpha(opacity=40)}button.close{padding:0;cursor:pointer;background:transparent;border:0;-webkit-appearance:none}.btn{display:inline-block;*display:inline;padding:4px 12px;margin-bottom:0;*margin-left:.3em;font-size:14px;line-height:20px;color:#333;text-align:center;text-shadow:0 1px 1px rgba(255,255,255,0.75);vertical-align:middle;cursor:pointer;background-color:#f5f5f5;*background-color:#e6e6e6;background-image:-moz-linear-gradient(top,#fff,#e6e6e6);background-image:-webkit-gradient(linear,0 0,0 100%,from(#fff),to(#e6e6e6));background-image:-webkit-linear-gradient(top,#fff,#e6e6e6);background-image:-o-linear-gradient(top,#fff,#e6e6e6);background-image:linear-gradient(to bottom,#fff,#e6e6e6);background-repeat:repeat-x;border:1px solid #ccc;*border:0;border-color:#e6e6e6 #e6e6e6 #bfbfbf;border-color:rgba(0,0,0,0.1) rgba(0,0,0,0.1) rgba(0,0,0,0.25);border-bottom-color:#b3b3b3;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffffff',endColorstr='#ffe6e6e6',GradientType=0);filter:progid:DXImageTransform.Microsoft.gradient(enabled=false);*zoom:1;-webkit-box-shadow:inset 0 1px 0 rgba(255,255,255,0.2),0 1px 2px rgba(0,0,0,0.05);-moz-box-shadow:inset 0 1px 0 rgba(255,255,255,0.2),0 1px 2px rgba(0,0,0,0.05);box-shadow:inset 0 1px 0 rgba(255,255,255,0.2),0 1px 2px rgba(0,0,0,0.05)}.btn:hover,.btn:focus,.btn:active,.btn.active,.btn.disabled,.btn[disabled]{color:#333;background-color:#e6e6e6;*background-color:#d9d9d9}.btn:active,.btn.active{background-color:#ccc \\9}.btn:first-child{*margin-left:0}.btn:hover,.btn:focus{color:#333;text-decoration:none;background-position:0 -15px;-webkit-transition:background-position .1s linear;-moz-transition:background-position .1s linear;-o-transition:background-position .1s linear;transition:background-position .1s linear}.btn:focus{outline:thin dotted #333;outline:5px auto -webkit-focus-ring-color;outline-offset:-2px}.btn.active,.btn:active{background-image:none;outline:0;-webkit-box-shadow:inset 0 2px 4px rgba(0,0,0,0.15),0 1px 2px rgba(0,0,0,0.05);-moz-box-shadow:inset 0 2px 4px rgba(0,0,0,0.15),0 1px 2px rgba(0,0,0,0.05);box-shadow:inset 0 2px 4px rgba(0,0,0,0.15),0 1px 2px rgba(0,0,0,0.05)}.btn.disabled,.btn[disabled]{cursor:default;background-image:none;opacity:.65;filter:alpha(opacity=65);-webkit-box-shadow:none;-moz-box-shadow:none;box-shadow:none}.btn-large{padding:11px 19px;font-size:17.5px;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px}.btn-large [class^=\"icon-\"],.btn-large [class*=\" icon-\"]{margin-top:4px}.btn-small{padding:2px 10px;font-size:11.9px;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px}.btn-small [class^=\"icon-\"],.btn-small [class*=\" icon-\"]{margin-top:0}.btn-mini [class^=\"icon-\"],.btn-mini [class*=\" icon-\"]{margin-top:-1px}.btn-mini{padding:0 6px;font-size:10.5px;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px}.btn-block{display:block;width:100%;padding-right:0;padding-left:0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.btn-block+.btn-block{margin-top:5px}input[type=\"submit\"].btn-block,input[type=\"reset\"].btn-block,input[type=\"button\"].btn-block{width:100%}.btn-primary.active,.btn-warning.active,.btn-danger.active,.btn-success.active,.btn-info.active,.btn-inverse.active{color:rgba(255,255,255,0.75)}.btn-primary{color:#fff;text-shadow:0 -1px 0 rgba(0,0,0,0.25);background-color:#006dcc;*background-color:#04c;background-image:-moz-linear-gradient(top,#08c,#04c);background-image:-webkit-gradient(linear,0 0,0 100%,from(#08c),to(#04c));background-image:-webkit-linear-gradient(top,#08c,#04c);background-image:-o-linear-gradient(top,#08c,#04c);background-image:linear-gradient(to bottom,#08c,#04c);background-repeat:repeat-x;border-color:#04c #04c #002a80;border-color:rgba(0,0,0,0.1) rgba(0,0,0,0.1) rgba(0,0,0,0.25);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ff0088cc',endColorstr='#ff0044cc',GradientType=0);filter:progid:DXImageTransform.Microsoft.gradient(enabled=false)}.btn-primary:hover,.btn-primary:focus,.btn-primary:active,.btn-primary.active,.btn-primary.disabled,.btn-primary[disabled]{color:#fff;background-color:#04c;*background-color:#003bb3}.btn-primary:active,.btn-primary.active{background-color:#039 \\9}.btn-warning{color:#fff;text-shadow:0 -1px 0 rgba(0,0,0,0.25);background-color:#faa732;*background-color:#f89406;background-image:-moz-linear-gradient(top,#fbb450,#f89406);background-image:-webkit-gradient(linear,0 0,0 100%,from(#fbb450),to(#f89406));background-image:-webkit-linear-gradient(top,#fbb450,#f89406);background-image:-o-linear-gradient(top,#fbb450,#f89406);background-image:linear-gradient(to bottom,#fbb450,#f89406);background-repeat:repeat-x;border-color:#f89406 #f89406 #ad6704;border-color:rgba(0,0,0,0.1) rgba(0,0,0,0.1) rgba(0,0,0,0.25);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#fffbb450',endColorstr='#fff89406',GradientType=0);filter:progid:DXImageTransform.Microsoft.gradient(enabled=false)}.btn-warning:hover,.btn-warning:focus,.btn-warning:active,.btn-warning.active,.btn-warning.disabled,.btn-warning[disabled]{color:#fff;background-color:#f89406;*background-color:#df8505}.btn-warning:active,.btn-warning.active{background-color:#c67605 \\9}.btn-danger{color:#fff;text-shadow:0 -1px 0 rgba(0,0,0,0.25);background-color:#da4f49;*background-color:#bd362f;background-image:-moz-linear-gradient(top,#ee5f5b,#bd362f);background-image:-webkit-gradient(linear,0 0,0 100%,from(#ee5f5b),to(#bd362f));background-image:-webkit-linear-gradient(top,#ee5f5b,#bd362f);background-image:-o-linear-gradient(top,#ee5f5b,#bd362f);background-image:linear-gradient(to bottom,#ee5f5b,#bd362f);background-repeat:repeat-x;border-color:#bd362f #bd362f #802420;border-color:rgba(0,0,0,0.1) rgba(0,0,0,0.1) rgba(0,0,0,0.25);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffee5f5b',endColorstr='#ffbd362f',GradientType=0);filter:progid:DXImageTransform.Microsoft.gradient(enabled=false)}.btn-danger:hover,.btn-danger:focus,.btn-danger:active,.btn-danger.active,.btn-danger.disabled,.btn-danger[disabled]{color:#fff;background-color:#bd362f;*background-color:#a9302a}.btn-danger:active,.btn-danger.active{background-color:#942a25 \\9}.btn-success{color:#fff;text-shadow:0 -1px 0 rgba(0,0,0,0.25);background-color:#5bb75b;*background-color:#51a351;background-image:-moz-linear-gradient(top,#62c462,#51a351);background-image:-webkit-gradient(linear,0 0,0 100%,from(#62c462),to(#51a351));background-image:-webkit-linear-gradient(top,#62c462,#51a351);background-image:-o-linear-gradient(top,#62c462,#51a351);background-image:linear-gradient(to bottom,#62c462,#51a351);background-repeat:repeat-x;border-color:#51a351 #51a351 #387038;border-color:rgba(0,0,0,0.1) rgba(0,0,0,0.1) rgba(0,0,0,0.25);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ff62c462',endColorstr='#ff51a351',GradientType=0);filter:progid:DXImageTransform.Microsoft.gradient(enabled=false)}.btn-success:hover,.btn-success:focus,.btn-success:active,.btn-success.active,.btn-success.disabled,.btn-success[disabled]{color:#fff;background-color:#51a351;*background-color:#499249}.btn-success:active,.btn-success.active{background-color:#408140 \\9}.btn-info{color:#fff;text-shadow:0 -1px 0 rgba(0,0,0,0.25);background-color:#49afcd;*background-color:#2f96b4;background-image:-moz-linear-gradient(top,#5bc0de,#2f96b4);background-image:-webkit-gradient(linear,0 0,0 100%,from(#5bc0de),to(#2f96b4));background-image:-webkit-linear-gradient(top,#5bc0de,#2f96b4);background-image:-o-linear-gradient(top,#5bc0de,#2f96b4);background-image:linear-gradient(to bottom,#5bc0de,#2f96b4);background-repeat:repeat-x;border-color:#2f96b4 #2f96b4 #1f6377;border-color:rgba(0,0,0,0.1) rgba(0,0,0,0.1) rgba(0,0,0,0.25);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ff5bc0de',endColorstr='#ff2f96b4',GradientType=0);filter:progid:DXImageTransform.Microsoft.gradient(enabled=false)}.btn-info:hover,.btn-info:focus,.btn-info:active,.btn-info.active,.btn-info.disabled,.btn-info[disabled]{color:#fff;background-color:#2f96b4;*background-color:#2a85a0}.btn-info:active,.btn-info.active{background-color:#24748c \\9}.btn-inverse{color:#fff;text-shadow:0 -1px 0 rgba(0,0,0,0.25);background-color:#363636;*background-color:#222;background-image:-moz-linear-gradient(top,#444,#222);background-image:-webkit-gradient(linear,0 0,0 100%,from(#444),to(#222));background-image:-webkit-linear-gradient(top,#444,#222);background-image:-o-linear-gradient(top,#444,#222);background-image:linear-gradient(to bottom,#444,#222);background-repeat:repeat-x;border-color:#222 #222 #000;border-color:rgba(0,0,0,0.1) rgba(0,0,0,0.1) rgba(0,0,0,0.25);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ff444444',endColorstr='#ff222222',GradientType=0);filter:progid:DXImageTransform.Microsoft.gradient(enabled=false)}.btn-inverse:hover,.btn-inverse:focus,.btn-inverse:active,.btn-inverse.active,.btn-inverse.disabled,.btn-inverse[disabled]{color:#fff;background-color:#222;*background-color:#151515}.btn-inverse:active,.btn-inverse.active{background-color:#080808 \\9}button.btn,input[type=\"submit\"].btn{*padding-top:3px;*padding-bottom:3px}button.btn::-moz-focus-inner,input[type=\"submit\"].btn::-moz-focus-inner{padding:0;border:0}button.btn.btn-large,input[type=\"submit\"].btn.btn-large{*padding-top:7px;*padding-bottom:7px}button.btn.btn-small,input[type=\"submit\"].btn.btn-small{*padding-top:3px;*padding-bottom:3px}button.btn.btn-mini,input[type=\"submit\"].btn.btn-mini{*padding-top:1px;*padding-bottom:1px}.btn-link,.btn-link:active,.btn-link[disabled]{background-color:transparent;background-image:none;-webkit-box-shadow:none;-moz-box-shadow:none;box-shadow:none}.btn-link{color:#08c;cursor:pointer;border-color:transparent;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.btn-link:hover,.btn-link:focus{color:#005580;text-decoration:underline;background-color:transparent}.btn-link[disabled]:hover,.btn-link[disabled]:focus{color:#333;text-decoration:none}.btn-group{position:relative;display:inline-block;*display:inline;*margin-left:.3em;font-size:0;white-space:nowrap;vertical-align:middle;*zoom:1}.btn-group:first-child{*margin-left:0}.btn-group+.btn-group{margin-left:5px}.btn-toolbar{margin-top:10px;margin-bottom:10px;font-size:0}.btn-toolbar>.btn+.btn,.btn-toolbar>.btn-group+.btn,.btn-toolbar>.btn+.btn-group{margin-left:5px}.btn-group>.btn{position:relative;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.btn-group>.btn+.btn{margin-left:-1px}.btn-group>.btn,.btn-group>.dropdown-menu,.btn-group>.popover{font-size:14px}.btn-group>.btn-mini{font-size:10.5px}.btn-group>.btn-small{font-size:11.9px}.btn-group>.btn-large{font-size:17.5px}.btn-group>.btn:first-child{margin-left:0;-webkit-border-bottom-left-radius:4px;border-bottom-left-radius:4px;-webkit-border-top-left-radius:4px;border-top-left-radius:4px;-moz-border-radius-bottomleft:4px;-moz-border-radius-topleft:4px}.btn-group>.btn:last-child,.btn-group>.dropdown-toggle{-webkit-border-top-right-radius:4px;border-top-right-radius:4px;-webkit-border-bottom-right-radius:4px;border-bottom-right-radius:4px;-moz-border-radius-topright:4px;-moz-border-radius-bottomright:4px}.btn-group>.btn.large:first-child{margin-left:0;-webkit-border-bottom-left-radius:6px;border-bottom-left-radius:6px;-webkit-border-top-left-radius:6px;border-top-left-radius:6px;-moz-border-radius-bottomleft:6px;-moz-border-radius-topleft:6px}.btn-group>.btn.large:last-child,.btn-group>.large.dropdown-toggle{-webkit-border-top-right-radius:6px;border-top-right-radius:6px;-webkit-border-bottom-right-radius:6px;border-bottom-right-radius:6px;-moz-border-radius-topright:6px;-moz-border-radius-bottomright:6px}.btn-group>.btn:hover,.btn-group>.btn:focus,.btn-group>.btn:active,.btn-group>.btn.active{z-index:2}.btn-group .dropdown-toggle:active,.btn-group.open .dropdown-toggle{outline:0}.btn-group>.btn+.dropdown-toggle{*padding-top:5px;padding-right:8px;*padding-bottom:5px;padding-left:8px;-webkit-box-shadow:inset 1px 0 0 rgba(255,255,255,0.125),inset 0 1px 0 rgba(255,255,255,0.2),0 1px 2px rgba(0,0,0,0.05);-moz-box-shadow:inset 1px 0 0 rgba(255,255,255,0.125),inset 0 1px 0 rgba(255,255,255,0.2),0 1px 2px rgba(0,0,0,0.05);box-shadow:inset 1px 0 0 rgba(255,255,255,0.125),inset 0 1px 0 rgba(255,255,255,0.2),0 1px 2px rgba(0,0,0,0.05)}.btn-group>.btn-mini+.dropdown-toggle{*padding-top:2px;padding-right:5px;*padding-bottom:2px;padding-left:5px}.btn-group>.btn-small+.dropdown-toggle{*padding-top:5px;*padding-bottom:4px}.btn-group>.btn-large+.dropdown-toggle{*padding-top:7px;padding-right:12px;*padding-bottom:7px;padding-left:12px}.btn-group.open .dropdown-toggle{background-image:none;-webkit-box-shadow:inset 0 2px 4px rgba(0,0,0,0.15),0 1px 2px rgba(0,0,0,0.05);-moz-box-shadow:inset 0 2px 4px rgba(0,0,0,0.15),0 1px 2px rgba(0,0,0,0.05);box-shadow:inset 0 2px 4px rgba(0,0,0,0.15),0 1px 2px rgba(0,0,0,0.05)}.btn-group.open .btn.dropdown-toggle{background-color:#e6e6e6}.btn-group.open .btn-primary.dropdown-toggle{background-color:#04c}.btn-group.open .btn-warning.dropdown-toggle{background-color:#f89406}.btn-group.open .btn-danger.dropdown-toggle{background-color:#bd362f}.btn-group.open .btn-success.dropdown-toggle{background-color:#51a351}.btn-group.open .btn-info.dropdown-toggle{background-color:#2f96b4}.btn-group.open .btn-inverse.dropdown-toggle{background-color:#222}.btn .caret{margin-top:8px;margin-left:0}.btn-large .caret{margin-top:6px}.btn-large .caret{border-top-width:5px;border-right-width:5px;border-left-width:5px}.btn-mini .caret,.btn-small .caret{margin-top:8px}.dropup .btn-large .caret{border-bottom-width:5px}.btn-primary .caret,.btn-warning .caret,.btn-danger .caret,.btn-info .caret,.btn-success .caret,.btn-inverse .caret{border-top-color:#fff;border-bottom-color:#fff}.btn-group-vertical{display:inline-block;*display:inline;*zoom:1}.btn-group-vertical>.btn{display:block;float:none;max-width:100%;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.btn-group-vertical>.btn+.btn{margin-top:-1px;margin-left:0}.btn-group-vertical>.btn:first-child{-webkit-border-radius:4px 4px 0 0;-moz-border-radius:4px 4px 0 0;border-radius:4px 4px 0 0}.btn-group-vertical>.btn:last-child{-webkit-border-radius:0 0 4px 4px;-moz-border-radius:0 0 4px 4px;border-radius:0 0 4px 4px}.btn-group-vertical>.btn-large:first-child{-webkit-border-radius:6px 6px 0 0;-moz-border-radius:6px 6px 0 0;border-radius:6px 6px 0 0}.btn-group-vertical>.btn-large:last-child{-webkit-border-radius:0 0 6px 6px;-moz-border-radius:0 0 6px 6px;border-radius:0 0 6px 6px}.alert{padding:8px 35px 8px 14px;margin-bottom:20px;text-shadow:0 1px 0 rgba(255,255,255,0.5);background-color:#fcf8e3;border:1px solid #fbeed5;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px}.alert,.alert h4{color:#c09853}.alert h4{margin:0}.alert .close{position:relative;top:-2px;right:-21px;line-height:20px}.alert-success{color:#468847;background-color:#dff0d8;border-color:#d6e9c6}.alert-success h4{color:#468847}.alert-danger,.alert-error{color:#b94a48;background-color:#f2dede;border-color:#eed3d7}.alert-danger h4,.alert-error h4{color:#b94a48}.alert-info{color:#3a87ad;background-color:#d9edf7;border-color:#bce8f1}.alert-info h4{color:#3a87ad}.alert-block{padding-top:14px;padding-bottom:14px}.alert-block>p,.alert-block>ul{margin-bottom:0}.alert-block p+p{margin-top:5px}.nav{margin-bottom:20px;margin-left:0;list-style:none}.nav>li>a{display:block}.nav>li>a:hover,.nav>li>a:focus{text-decoration:none;background-color:#eee}.nav>li>a>img{max-width:none}.nav>.pull-right{float:right}.nav-header{display:block;padding:3px 15px;font-size:11px;font-weight:bold;line-height:20px;color:#999;text-shadow:0 1px 0 rgba(255,255,255,0.5);text-transform:uppercase}.nav li+.nav-header{margin-top:9px}.nav-list{padding-right:15px;padding-left:15px;margin-bottom:0}.nav-list>li>a,.nav-list .nav-header{margin-right:-15px;margin-left:-15px;text-shadow:0 1px 0 rgba(255,255,255,0.5)}.nav-list>li>a{padding:3px 15px}.nav-list>.active>a,.nav-list>.active>a:hover,.nav-list>.active>a:focus{color:#fff;text-shadow:0 -1px 0 rgba(0,0,0,0.2);background-color:#08c}.nav-list [class^=\"icon-\"],.nav-list [class*=\" icon-\"]{margin-right:2px}.nav-list .divider{*width:100%;height:1px;margin:9px 1px;*margin:-5px 0 5px;overflow:hidden;background-color:#e5e5e5;border-bottom:1px solid #fff}.nav-tabs,.nav-pills{*zoom:1}.nav-tabs:before,.nav-pills:before,.nav-tabs:after,.nav-pills:after{display:table;line-height:0;content:\"\"}.nav-tabs:after,.nav-pills:after{clear:both}.nav-tabs>li,.nav-pills>li{float:left}.nav-tabs>li>a,.nav-pills>li>a{padding-right:12px;padding-left:12px;margin-right:2px;line-height:14px}.nav-tabs{border-bottom:1px solid #ddd}.nav-tabs>li{margin-bottom:-1px}.nav-tabs>li>a{padding-top:8px;padding-bottom:8px;line-height:20px;border:1px solid transparent;-webkit-border-radius:4px 4px 0 0;-moz-border-radius:4px 4px 0 0;border-radius:4px 4px 0 0}.nav-tabs>li>a:hover,.nav-tabs>li>a:focus{border-color:#eee #eee #ddd}.nav-tabs>.active>a,.nav-tabs>.active>a:hover,.nav-tabs>.active>a:focus{color:#555;cursor:default;background-color:#fff;border:1px solid #ddd;border-bottom-color:transparent}.nav-pills>li>a{padding-top:8px;padding-bottom:8px;margin-top:2px;margin-bottom:2px;-webkit-border-radius:5px;-moz-border-radius:5px;border-radius:5px}.nav-pills>.active>a,.nav-pills>.active>a:hover,.nav-pills>.active>a:focus{color:#fff;background-color:#08c}.nav-stacked>li{float:none}.nav-stacked>li>a{margin-right:0}.nav-tabs.nav-stacked{border-bottom:0}.nav-tabs.nav-stacked>li>a{border:1px solid #ddd;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.nav-tabs.nav-stacked>li:first-child>a{-webkit-border-top-right-radius:4px;border-top-right-radius:4px;-webkit-border-top-left-radius:4px;border-top-left-radius:4px;-moz-border-radius-topright:4px;-moz-border-radius-topleft:4px}.nav-tabs.nav-stacked>li:last-child>a{-webkit-border-bottom-right-radius:4px;border-bottom-right-radius:4px;-webkit-border-bottom-left-radius:4px;border-bottom-left-radius:4px;-moz-border-radius-bottomright:4px;-moz-border-radius-bottomleft:4px}.nav-tabs.nav-stacked>li>a:hover,.nav-tabs.nav-stacked>li>a:focus{z-index:2;border-color:#ddd}.nav-pills.nav-stacked>li>a{margin-bottom:3px}.nav-pills.nav-stacked>li:last-child>a{margin-bottom:1px}.nav-tabs .dropdown-menu{-webkit-border-radius:0 0 6px 6px;-moz-border-radius:0 0 6px 6px;border-radius:0 0 6px 6px}.nav-pills .dropdown-menu{-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px}.nav .dropdown-toggle .caret{margin-top:6px;border-top-color:#08c;border-bottom-color:#08c}.nav .dropdown-toggle:hover .caret,.nav .dropdown-toggle:focus .caret{border-top-color:#005580;border-bottom-color:#005580}.nav-tabs .dropdown-toggle .caret{margin-top:8px}.nav .active .dropdown-toggle .caret{border-top-color:#fff;border-bottom-color:#fff}.nav-tabs .active .dropdown-toggle .caret{border-top-color:#555;border-bottom-color:#555}.nav>.dropdown.active>a:hover,.nav>.dropdown.active>a:focus{cursor:pointer}.nav-tabs .open .dropdown-toggle,.nav-pills .open .dropdown-toggle,.nav>li.dropdown.open.active>a:hover,.nav>li.dropdown.open.active>a:focus{color:#fff;background-color:#999;border-color:#999}.nav li.dropdown.open .caret,.nav li.dropdown.open.active .caret,.nav li.dropdown.open a:hover .caret,.nav li.dropdown.open a:focus .caret{border-top-color:#fff;border-bottom-color:#fff;opacity:1;filter:alpha(opacity=100)}.tabs-stacked .open>a:hover,.tabs-stacked .open>a:focus{border-color:#999}.tabbable{*zoom:1}.tabbable:before,.tabbable:after{display:table;line-height:0;content:\"\"}.tabbable:after{clear:both}.tab-content{overflow:auto}.tabs-below>.nav-tabs,.tabs-right>.nav-tabs,.tabs-left>.nav-tabs{border-bottom:0}.tab-content>.tab-pane,.pill-content>.pill-pane{display:none}.tab-content>.active,.pill-content>.active{display:block}.tabs-below>.nav-tabs{border-top:1px solid #ddd}.tabs-below>.nav-tabs>li{margin-top:-1px;margin-bottom:0}.tabs-below>.nav-tabs>li>a{-webkit-border-radius:0 0 4px 4px;-moz-border-radius:0 0 4px 4px;border-radius:0 0 4px 4px}.tabs-below>.nav-tabs>li>a:hover,.tabs-below>.nav-tabs>li>a:focus{border-top-color:#ddd;border-bottom-color:transparent}.tabs-below>.nav-tabs>.active>a,.tabs-below>.nav-tabs>.active>a:hover,.tabs-below>.nav-tabs>.active>a:focus{border-color:transparent #ddd #ddd #ddd}.tabs-left>.nav-tabs>li,.tabs-right>.nav-tabs>li{float:none}.tabs-left>.nav-tabs>li>a,.tabs-right>.nav-tabs>li>a{min-width:74px;margin-right:0;margin-bottom:3px}.tabs-left>.nav-tabs{float:left;margin-right:19px;border-right:1px solid #ddd}.tabs-left>.nav-tabs>li>a{margin-right:-1px;-webkit-border-radius:4px 0 0 4px;-moz-border-radius:4px 0 0 4px;border-radius:4px 0 0 4px}.tabs-left>.nav-tabs>li>a:hover,.tabs-left>.nav-tabs>li>a:focus{border-color:#eee #ddd #eee #eee}.tabs-left>.nav-tabs .active>a,.tabs-left>.nav-tabs .active>a:hover,.tabs-left>.nav-tabs .active>a:focus{border-color:#ddd transparent #ddd #ddd;*border-right-color:#fff}.tabs-right>.nav-tabs{float:right;margin-left:19px;border-left:1px solid #ddd}.tabs-right>.nav-tabs>li>a{margin-left:-1px;-webkit-border-radius:0 4px 4px 0;-moz-border-radius:0 4px 4px 0;border-radius:0 4px 4px 0}.tabs-right>.nav-tabs>li>a:hover,.tabs-right>.nav-tabs>li>a:focus{border-color:#eee #eee #eee #ddd}.tabs-right>.nav-tabs .active>a,.tabs-right>.nav-tabs .active>a:hover,.tabs-right>.nav-tabs .active>a:focus{border-color:#ddd #ddd #ddd transparent;*border-left-color:#fff}.nav>.disabled>a{color:#999}.nav>.disabled>a:hover,.nav>.disabled>a:focus{text-decoration:none;cursor:default;background-color:transparent}.navbar{*position:relative;*z-index:2;margin-bottom:20px;overflow:visible}.navbar-inner{min-height:40px;padding-right:20px;padding-left:20px;background-color:#fafafa;background-image:-moz-linear-gradient(top,#fff,#f2f2f2);background-image:-webkit-gradient(linear,0 0,0 100%,from(#fff),to(#f2f2f2));background-image:-webkit-linear-gradient(top,#fff,#f2f2f2);background-image:-o-linear-gradient(top,#fff,#f2f2f2);background-image:linear-gradient(to bottom,#fff,#f2f2f2);background-repeat:repeat-x;border:1px solid #d4d4d4;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffffff',endColorstr='#fff2f2f2',GradientType=0);*zoom:1;-webkit-box-shadow:0 1px 4px rgba(0,0,0,0.065);-moz-box-shadow:0 1px 4px rgba(0,0,0,0.065);box-shadow:0 1px 4px rgba(0,0,0,0.065)}.navbar-inner:before,.navbar-inner:after{display:table;line-height:0;content:\"\"}.navbar-inner:after{clear:both}.navbar .container{width:auto}.nav-collapse.collapse{height:auto;overflow:visible}.navbar .brand{display:block;float:left;padding:10px 20px 10px;margin-left:-20px;font-size:20px;font-weight:200;color:#777;text-shadow:0 1px 0 #fff}.navbar .brand:hover,.navbar .brand:focus{text-decoration:none}.navbar-text{margin-bottom:0;line-height:40px;color:#777}.navbar-link{color:#777}.navbar-link:hover,.navbar-link:focus{color:#333}.navbar .divider-vertical{height:40px;margin:0 9px;border-right:1px solid #fff;border-left:1px solid #f2f2f2}.navbar .btn,.navbar .btn-group{margin-top:5px}.navbar .btn-group .btn,.navbar .input-prepend .btn,.navbar .input-append .btn,.navbar .input-prepend .btn-group,.navbar .input-append .btn-group{margin-top:0}.navbar-form{margin-bottom:0;*zoom:1}.navbar-form:before,.navbar-form:after{display:table;line-height:0;content:\"\"}.navbar-form:after{clear:both}.navbar-form input,.navbar-form select,.navbar-form .radio,.navbar-form .checkbox{margin-top:5px}.navbar-form input,.navbar-form select,.navbar-form .btn{display:inline-block;margin-bottom:0}.navbar-form input[type=\"image\"],.navbar-form input[type=\"checkbox\"],.navbar-form input[type=\"radio\"]{margin-top:3px}.navbar-form .input-append,.navbar-form .input-prepend{margin-top:5px;white-space:nowrap}.navbar-form .input-append input,.navbar-form .input-prepend input{margin-top:0}.navbar-search{position:relative;float:left;margin-top:5px;margin-bottom:0}.navbar-search .search-query{padding:4px 14px;margin-bottom:0;font-family:\"Helvetica Neue\",Helvetica,Arial,sans-serif;font-size:13px;font-weight:normal;line-height:1;-webkit-border-radius:15px;-moz-border-radius:15px;border-radius:15px}.navbar-static-top{position:static;margin-bottom:0}.navbar-static-top .navbar-inner{-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.navbar-fixed-top,.navbar-fixed-bottom{position:fixed;right:0;left:0;z-index:1030;margin-bottom:0}.navbar-fixed-top .navbar-inner,.navbar-static-top .navbar-inner{border-width:0 0 1px}.navbar-fixed-bottom .navbar-inner{border-width:1px 0 0}.navbar-fixed-top .navbar-inner,.navbar-fixed-bottom .navbar-inner{padding-right:0;padding-left:0;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.navbar-static-top .container,.navbar-fixed-top .container,.navbar-fixed-bottom .container{width:940px}.navbar-fixed-top{top:0}.navbar-fixed-top .navbar-inner,.navbar-static-top .navbar-inner{-webkit-box-shadow:0 1px 10px rgba(0,0,0,0.1);-moz-box-shadow:0 1px 10px rgba(0,0,0,0.1);box-shadow:0 1px 10px rgba(0,0,0,0.1)}.navbar-fixed-bottom{bottom:0}.navbar-fixed-bottom .navbar-inner{-webkit-box-shadow:0 -1px 10px rgba(0,0,0,0.1);-moz-box-shadow:0 -1px 10px rgba(0,0,0,0.1);box-shadow:0 -1px 10px rgba(0,0,0,0.1)}.navbar .nav{position:relative;left:0;display:block;float:left;margin:0 10px 0 0}.navbar .nav.pull-right{float:right;margin-right:0}.navbar .nav>li{float:left}.navbar .nav>li>a{float:none;padding:10px 15px 10px;color:#777;text-decoration:none;text-shadow:0 1px 0 #fff}.navbar .nav .dropdown-toggle .caret{margin-top:8px}.navbar .nav>li>a:focus,.navbar .nav>li>a:hover{color:#333;text-decoration:none;background-color:transparent}.navbar .nav>.active>a,.navbar .nav>.active>a:hover,.navbar .nav>.active>a:focus{color:#555;text-decoration:none;background-color:#e5e5e5;-webkit-box-shadow:inset 0 3px 8px rgba(0,0,0,0.125);-moz-box-shadow:inset 0 3px 8px rgba(0,0,0,0.125);box-shadow:inset 0 3px 8px rgba(0,0,0,0.125)}.navbar .btn-navbar{display:none;float:right;padding:7px 10px;margin-right:5px;margin-left:5px;color:#fff;text-shadow:0 -1px 0 rgba(0,0,0,0.25);background-color:#ededed;*background-color:#e5e5e5;background-image:-moz-linear-gradient(top,#f2f2f2,#e5e5e5);background-image:-webkit-gradient(linear,0 0,0 100%,from(#f2f2f2),to(#e5e5e5));background-image:-webkit-linear-gradient(top,#f2f2f2,#e5e5e5);background-image:-o-linear-gradient(top,#f2f2f2,#e5e5e5);background-image:linear-gradient(to bottom,#f2f2f2,#e5e5e5);background-repeat:repeat-x;border-color:#e5e5e5 #e5e5e5 #bfbfbf;border-color:rgba(0,0,0,0.1) rgba(0,0,0,0.1) rgba(0,0,0,0.25);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#fff2f2f2',endColorstr='#ffe5e5e5',GradientType=0);filter:progid:DXImageTransform.Microsoft.gradient(enabled=false);-webkit-box-shadow:inset 0 1px 0 rgba(255,255,255,0.1),0 1px 0 rgba(255,255,255,0.075);-moz-box-shadow:inset 0 1px 0 rgba(255,255,255,0.1),0 1px 0 rgba(255,255,255,0.075);box-shadow:inset 0 1px 0 rgba(255,255,255,0.1),0 1px 0 rgba(255,255,255,0.075)}.navbar .btn-navbar:hover,.navbar .btn-navbar:focus,.navbar .btn-navbar:active,.navbar .btn-navbar.active,.navbar .btn-navbar.disabled,.navbar .btn-navbar[disabled]{color:#fff;background-color:#e5e5e5;*background-color:#d9d9d9}.navbar .btn-navbar:active,.navbar .btn-navbar.active{background-color:#ccc \\9}.navbar .btn-navbar .icon-bar{display:block;width:18px;height:2px;background-color:#f5f5f5;-webkit-border-radius:1px;-moz-border-radius:1px;border-radius:1px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,0.25);-moz-box-shadow:0 1px 0 rgba(0,0,0,0.25);box-shadow:0 1px 0 rgba(0,0,0,0.25)}.btn-navbar .icon-bar+.icon-bar{margin-top:3px}.navbar .nav>li>.dropdown-menu:before{position:absolute;top:-7px;left:9px;display:inline-block;border-right:7px solid transparent;border-bottom:7px solid #ccc;border-left:7px solid transparent;border-bottom-color:rgba(0,0,0,0.2);content:''}.navbar .nav>li>.dropdown-menu:after{position:absolute;top:-6px;left:10px;display:inline-block;border-right:6px solid transparent;border-bottom:6px solid #fff;border-left:6px solid transparent;content:''}.navbar-fixed-bottom .nav>li>.dropdown-menu:before{top:auto;bottom:-7px;border-top:7px solid #ccc;border-bottom:0;border-top-color:rgba(0,0,0,0.2)}.navbar-fixed-bottom .nav>li>.dropdown-menu:after{top:auto;bottom:-6px;border-top:6px solid #fff;border-bottom:0}.navbar .nav li.dropdown>a:hover .caret,.navbar .nav li.dropdown>a:focus .caret{border-top-color:#333;border-bottom-color:#333}.navbar .nav li.dropdown.open>.dropdown-toggle,.navbar .nav li.dropdown.active>.dropdown-toggle,.navbar .nav li.dropdown.open.active>.dropdown-toggle{color:#555;background-color:#e5e5e5}.navbar .nav li.dropdown>.dropdown-toggle .caret{border-top-color:#777;border-bottom-color:#777}.navbar .nav li.dropdown.open>.dropdown-toggle .caret,.navbar .nav li.dropdown.active>.dropdown-toggle .caret,.navbar .nav li.dropdown.open.active>.dropdown-toggle .caret{border-top-color:#555;border-bottom-color:#555}.navbar .pull-right>li>.dropdown-menu,.navbar .nav>li>.dropdown-menu.pull-right{right:0;left:auto}.navbar .pull-right>li>.dropdown-menu:before,.navbar .nav>li>.dropdown-menu.pull-right:before{right:12px;left:auto}.navbar .pull-right>li>.dropdown-menu:after,.navbar .nav>li>.dropdown-menu.pull-right:after{right:13px;left:auto}.navbar .pull-right>li>.dropdown-menu .dropdown-menu,.navbar .nav>li>.dropdown-menu.pull-right .dropdown-menu{right:100%;left:auto;margin-right:-1px;margin-left:0;-webkit-border-radius:6px 0 6px 6px;-moz-border-radius:6px 0 6px 6px;border-radius:6px 0 6px 6px}.navbar-inverse .navbar-inner{background-color:#1b1b1b;background-image:-moz-linear-gradient(top,#222,#111);background-image:-webkit-gradient(linear,0 0,0 100%,from(#222),to(#111));background-image:-webkit-linear-gradient(top,#222,#111);background-image:-o-linear-gradient(top,#222,#111);background-image:linear-gradient(to bottom,#222,#111);background-repeat:repeat-x;border-color:#252525;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ff222222',endColorstr='#ff111111',GradientType=0)}.navbar-inverse .brand,.navbar-inverse .nav>li>a{color:#999;text-shadow:0 -1px 0 rgba(0,0,0,0.25)}.navbar-inverse .brand:hover,.navbar-inverse .nav>li>a:hover,.navbar-inverse .brand:focus,.navbar-inverse .nav>li>a:focus{color:#fff}.navbar-inverse .brand{color:#999}.navbar-inverse .navbar-text{color:#999}.navbar-inverse .nav>li>a:focus,.navbar-inverse .nav>li>a:hover{color:#fff;background-color:transparent}.navbar-inverse .nav .active>a,.navbar-inverse .nav .active>a:hover,.navbar-inverse .nav .active>a:focus{color:#fff;background-color:#111}.navbar-inverse .navbar-link{color:#999}.navbar-inverse .navbar-link:hover,.navbar-inverse .navbar-link:focus{color:#fff}.navbar-inverse .divider-vertical{border-right-color:#222;border-left-color:#111}.navbar-inverse .nav li.dropdown.open>.dropdown-toggle,.navbar-inverse .nav li.dropdown.active>.dropdown-toggle,.navbar-inverse .nav li.dropdown.open.active>.dropdown-toggle{color:#fff;background-color:#111}.navbar-inverse .nav li.dropdown>a:hover .caret,.navbar-inverse .nav li.dropdown>a:focus .caret{border-top-color:#fff;border-bottom-color:#fff}.navbar-inverse .nav li.dropdown>.dropdown-toggle .caret{border-top-color:#999;border-bottom-color:#999}.navbar-inverse .nav li.dropdown.open>.dropdown-toggle .caret,.navbar-inverse .nav li.dropdown.active>.dropdown-toggle .caret,.navbar-inverse .nav li.dropdown.open.active>.dropdown-toggle .caret{border-top-color:#fff;border-bottom-color:#fff}.navbar-inverse .navbar-search .search-query{color:#fff;background-color:#515151;border-color:#111;-webkit-box-shadow:inset 0 1px 2px rgba(0,0,0,0.1),0 1px 0 rgba(255,255,255,0.15);-moz-box-shadow:inset 0 1px 2px rgba(0,0,0,0.1),0 1px 0 rgba(255,255,255,0.15);box-shadow:inset 0 1px 2px rgba(0,0,0,0.1),0 1px 0 rgba(255,255,255,0.15);-webkit-transition:none;-moz-transition:none;-o-transition:none;transition:none}.navbar-inverse .navbar-search .search-query:-moz-placeholder{color:#ccc}.navbar-inverse .navbar-search .search-query:-ms-input-placeholder{color:#ccc}.navbar-inverse .navbar-search .search-query::-webkit-input-placeholder{color:#ccc}.navbar-inverse .navbar-search .search-query:focus,.navbar-inverse .navbar-search .search-query.focused{padding:5px 15px;color:#333;text-shadow:0 1px 0 #fff;background-color:#fff;border:0;outline:0;-webkit-box-shadow:0 0 3px rgba(0,0,0,0.15);-moz-box-shadow:0 0 3px rgba(0,0,0,0.15);box-shadow:0 0 3px rgba(0,0,0,0.15)}.navbar-inverse .btn-navbar{color:#fff;text-shadow:0 -1px 0 rgba(0,0,0,0.25);background-color:#0e0e0e;*background-color:#040404;background-image:-moz-linear-gradient(top,#151515,#040404);background-image:-webkit-gradient(linear,0 0,0 100%,from(#151515),to(#040404));background-image:-webkit-linear-gradient(top,#151515,#040404);background-image:-o-linear-gradient(top,#151515,#040404);background-image:linear-gradient(to bottom,#151515,#040404);background-repeat:repeat-x;border-color:#040404 #040404 #000;border-color:rgba(0,0,0,0.1) rgba(0,0,0,0.1) rgba(0,0,0,0.25);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ff151515',endColorstr='#ff040404',GradientType=0);filter:progid:DXImageTransform.Microsoft.gradient(enabled=false)}.navbar-inverse .btn-navbar:hover,.navbar-inverse .btn-navbar:focus,.navbar-inverse .btn-navbar:active,.navbar-inverse .btn-navbar.active,.navbar-inverse .btn-navbar.disabled,.navbar-inverse .btn-navbar[disabled]{color:#fff;background-color:#040404;*background-color:#000}.navbar-inverse .btn-navbar:active,.navbar-inverse .btn-navbar.active{background-color:#000 \\9}.breadcrumb{padding:8px 15px;margin:0 0 20px;list-style:none;background-color:#f5f5f5;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px}.breadcrumb>li{display:inline-block;*display:inline;text-shadow:0 1px 0 #fff;*zoom:1}.breadcrumb>li>.divider{padding:0 5px;color:#ccc}.breadcrumb>.active{color:#999}.pagination{margin:20px 0}.pagination ul{display:inline-block;*display:inline;margin-bottom:0;margin-left:0;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;*zoom:1;-webkit-box-shadow:0 1px 2px rgba(0,0,0,0.05);-moz-box-shadow:0 1px 2px rgba(0,0,0,0.05);box-shadow:0 1px 2px rgba(0,0,0,0.05)}.pagination ul>li{display:inline}.pagination ul>li>a,.pagination ul>li>span{float:left;padding:4px 12px;line-height:20px;text-decoration:none;background-color:#fff;border:1px solid #ddd;border-left-width:0}.pagination ul>li>a:hover,.pagination ul>li>a:focus,.pagination ul>.active>a,.pagination ul>.active>span{background-color:#f5f5f5}.pagination ul>.active>a,.pagination ul>.active>span{color:#999;cursor:default}.pagination ul>.disabled>span,.pagination ul>.disabled>a,.pagination ul>.disabled>a:hover,.pagination ul>.disabled>a:focus{color:#999;cursor:default;background-color:transparent}.pagination ul>li:first-child>a,.pagination ul>li:first-child>span{border-left-width:1px;-webkit-border-bottom-left-radius:4px;border-bottom-left-radius:4px;-webkit-border-top-left-radius:4px;border-top-left-radius:4px;-moz-border-radius-bottomleft:4px;-moz-border-radius-topleft:4px}.pagination ul>li:last-child>a,.pagination ul>li:last-child>span{-webkit-border-top-right-radius:4px;border-top-right-radius:4px;-webkit-border-bottom-right-radius:4px;border-bottom-right-radius:4px;-moz-border-radius-topright:4px;-moz-border-radius-bottomright:4px}.pagination-centered{text-align:center}.pagination-right{text-align:right}.pagination-large ul>li>a,.pagination-large ul>li>span{padding:11px 19px;font-size:17.5px}.pagination-large ul>li:first-child>a,.pagination-large ul>li:first-child>span{-webkit-border-bottom-left-radius:6px;border-bottom-left-radius:6px;-webkit-border-top-left-radius:6px;border-top-left-radius:6px;-moz-border-radius-bottomleft:6px;-moz-border-radius-topleft:6px}.pagination-large ul>li:last-child>a,.pagination-large ul>li:last-child>span{-webkit-border-top-right-radius:6px;border-top-right-radius:6px;-webkit-border-bottom-right-radius:6px;border-bottom-right-radius:6px;-moz-border-radius-topright:6px;-moz-border-radius-bottomright:6px}.pagination-mini ul>li:first-child>a,.pagination-small ul>li:first-child>a,.pagination-mini ul>li:first-child>span,.pagination-small ul>li:first-child>span{-webkit-border-bottom-left-radius:3px;border-bottom-left-radius:3px;-webkit-border-top-left-radius:3px;border-top-left-radius:3px;-moz-border-radius-bottomleft:3px;-moz-border-radius-topleft:3px}.pagination-mini ul>li:last-child>a,.pagination-small ul>li:last-child>a,.pagination-mini ul>li:last-child>span,.pagination-small ul>li:last-child>span{-webkit-border-top-right-radius:3px;border-top-right-radius:3px;-webkit-border-bottom-right-radius:3px;border-bottom-right-radius:3px;-moz-border-radius-topright:3px;-moz-border-radius-bottomright:3px}.pagination-small ul>li>a,.pagination-small ul>li>span{padding:2px 10px;font-size:11.9px}.pagination-mini ul>li>a,.pagination-mini ul>li>span{padding:0 6px;font-size:10.5px}.pager{margin:20px 0;text-align:center;list-style:none;*zoom:1}.pager:before,.pager:after{display:table;line-height:0;content:\"\"}.pager:after{clear:both}.pager li{display:inline}.pager li>a,.pager li>span{display:inline-block;padding:5px 14px;background-color:#fff;border:1px solid #ddd;-webkit-border-radius:15px;-moz-border-radius:15px;border-radius:15px}.pager li>a:hover,.pager li>a:focus{text-decoration:none;background-color:#f5f5f5}.pager .next>a,.pager .next>span{float:right}.pager .previous>a,.pager .previous>span{float:left}.pager .disabled>a,.pager .disabled>a:hover,.pager .disabled>a:focus,.pager .disabled>span{color:#999;cursor:default;background-color:#fff}.modal-backdrop{position:fixed;top:0;right:0;bottom:0;left:0;z-index:1040;background-color:#000}.modal-backdrop.fade{opacity:0}.modal-backdrop,.modal-backdrop.fade.in{opacity:.8;filter:alpha(opacity=80)}.modal{position:fixed;top:10%;left:50%;z-index:1050;width:560px;margin-left:-280px;background-color:#fff;border:1px solid #999;border:1px solid rgba(0,0,0,0.3);*border:1px solid #999;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;outline:0;-webkit-box-shadow:0 3px 7px rgba(0,0,0,0.3);-moz-box-shadow:0 3px 7px rgba(0,0,0,0.3);box-shadow:0 3px 7px rgba(0,0,0,0.3);-webkit-background-clip:padding-box;-moz-background-clip:padding-box;background-clip:padding-box}.modal.fade{top:-25%;-webkit-transition:opacity .3s linear,top .3s ease-out;-moz-transition:opacity .3s linear,top .3s ease-out;-o-transition:opacity .3s linear,top .3s ease-out;transition:opacity .3s linear,top .3s ease-out}.modal.fade.in{top:10%}.modal-header{padding:9px 15px;border-bottom:1px solid #eee}.modal-header .close{margin-top:2px}.modal-header h3{margin:0;line-height:30px}.modal-body{position:relative;max-height:400px;padding:15px;overflow-y:auto}.modal-form{margin-bottom:0}.modal-footer{padding:14px 15px 15px;margin-bottom:0;text-align:right;background-color:#f5f5f5;border-top:1px solid #ddd;-webkit-border-radius:0 0 6px 6px;-moz-border-radius:0 0 6px 6px;border-radius:0 0 6px 6px;*zoom:1;-webkit-box-shadow:inset 0 1px 0 #fff;-moz-box-shadow:inset 0 1px 0 #fff;box-shadow:inset 0 1px 0 #fff}.modal-footer:before,.modal-footer:after{display:table;line-height:0;content:\"\"}.modal-footer:after{clear:both}.modal-footer .btn+.btn{margin-bottom:0;margin-left:5px}.modal-footer .btn-group .btn+.btn{margin-left:-1px}.modal-footer .btn-block+.btn-block{margin-left:0}.tooltip{position:absolute;z-index:1030;display:block;font-size:11px;line-height:1.4;opacity:0;filter:alpha(opacity=0);visibility:visible}.tooltip.in{opacity:.8;filter:alpha(opacity=80)}.tooltip.top{padding:5px 0;margin-top:-3px}.tooltip.right{padding:0 5px;margin-left:3px}.tooltip.bottom{padding:5px 0;margin-top:3px}.tooltip.left{padding:0 5px;margin-left:-3px}.tooltip-inner{max-width:200px;padding:8px;color:#fff;text-align:center;text-decoration:none;background-color:#000;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px}.tooltip-arrow{position:absolute;width:0;height:0;border-color:transparent;border-style:solid}.tooltip.top .tooltip-arrow{bottom:0;left:50%;margin-left:-5px;border-top-color:#000;border-width:5px 5px 0}.tooltip.right .tooltip-arrow{top:50%;left:0;margin-top:-5px;border-right-color:#000;border-width:5px 5px 5px 0}.tooltip.left .tooltip-arrow{top:50%;right:0;margin-top:-5px;border-left-color:#000;border-width:5px 0 5px 5px}.tooltip.bottom .tooltip-arrow{top:0;left:50%;margin-left:-5px;border-bottom-color:#000;border-width:0 5px 5px}.popover{position:absolute;top:0;left:0;z-index:1010;display:none;max-width:276px;padding:1px;text-align:left;white-space:normal;background-color:#fff;border:1px solid #ccc;border:1px solid rgba(0,0,0,0.2);-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;-webkit-box-shadow:0 5px 10px rgba(0,0,0,0.2);-moz-box-shadow:0 5px 10px rgba(0,0,0,0.2);box-shadow:0 5px 10px rgba(0,0,0,0.2);-webkit-background-clip:padding-box;-moz-background-clip:padding;background-clip:padding-box}.popover.top{margin-top:-10px}.popover.right{margin-left:10px}.popover.bottom{margin-top:10px}.popover.left{margin-left:-10px}.popover-title{padding:8px 14px;margin:0;font-size:14px;font-weight:normal;line-height:18px;background-color:#f7f7f7;border-bottom:1px solid #ebebeb;-webkit-border-radius:5px 5px 0 0;-moz-border-radius:5px 5px 0 0;border-radius:5px 5px 0 0}.popover-title:empty{display:none}.popover-content{padding:9px 14px}.popover .arrow,.popover .arrow:after{position:absolute;display:block;width:0;height:0;border-color:transparent;border-style:solid}.popover .arrow{border-width:11px}.popover .arrow:after{border-width:10px;content:\"\"}.popover.top .arrow{bottom:-11px;left:50%;margin-left:-11px;border-top-color:#999;border-top-color:rgba(0,0,0,0.25);border-bottom-width:0}.popover.top .arrow:after{bottom:1px;margin-left:-10px;border-top-color:#fff;border-bottom-width:0}.popover.right .arrow{top:50%;left:-11px;margin-top:-11px;border-right-color:#999;border-right-color:rgba(0,0,0,0.25);border-left-width:0}.popover.right .arrow:after{bottom:-10px;left:1px;border-right-color:#fff;border-left-width:0}.popover.bottom .arrow{top:-11px;left:50%;margin-left:-11px;border-bottom-color:#999;border-bottom-color:rgba(0,0,0,0.25);border-top-width:0}.popover.bottom .arrow:after{top:1px;margin-left:-10px;border-bottom-color:#fff;border-top-width:0}.popover.left .arrow{top:50%;right:-11px;margin-top:-11px;border-left-color:#999;border-left-color:rgba(0,0,0,0.25);border-right-width:0}.popover.left .arrow:after{right:1px;bottom:-10px;border-left-color:#fff;border-right-width:0}.thumbnails{margin-left:-20px;list-style:none;*zoom:1}.thumbnails:before,.thumbnails:after{display:table;line-height:0;content:\"\"}.thumbnails:after{clear:both}.row-fluid .thumbnails{margin-left:0}.thumbnails>li{float:left;margin-bottom:20px;margin-left:20px}.thumbnail{display:block;padding:4px;line-height:20px;border:1px solid #ddd;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;-webkit-box-shadow:0 1px 3px rgba(0,0,0,0.055);-moz-box-shadow:0 1px 3px rgba(0,0,0,0.055);box-shadow:0 1px 3px rgba(0,0,0,0.055);-webkit-transition:all .2s ease-in-out;-moz-transition:all .2s ease-in-out;-o-transition:all .2s ease-in-out;transition:all .2s ease-in-out}a.thumbnail:hover,a.thumbnail:focus{border-color:#08c;-webkit-box-shadow:0 1px 4px rgba(0,105,214,0.25);-moz-box-shadow:0 1px 4px rgba(0,105,214,0.25);box-shadow:0 1px 4px rgba(0,105,214,0.25)}.thumbnail>img{display:block;max-width:100%;margin-right:auto;margin-left:auto}.thumbnail .caption{padding:9px;color:#555}.media,.media-body{overflow:hidden;*overflow:visible;zoom:1}.media,.media .media{margin-top:15px}.media:first-child{margin-top:0}.media-object{display:block}.media-heading{margin:0 0 5px}.media>.pull-left{margin-right:10px}.media>.pull-right{margin-left:10px}.media-list{margin-left:0;list-style:none}.label,.badge{display:inline-block;padding:2px 4px;font-size:11.844px;font-weight:bold;line-height:14px;color:#fff;text-shadow:0 -1px 0 rgba(0,0,0,0.25);white-space:nowrap;vertical-align:baseline;background-color:#999}.label{-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px}.badge{padding-right:9px;padding-left:9px;-webkit-border-radius:9px;-moz-border-radius:9px;border-radius:9px}.label:empty,.badge:empty{display:none}a.label:hover,a.label:focus,a.badge:hover,a.badge:focus{color:#fff;text-decoration:none;cursor:pointer}.label-important,.badge-important{background-color:#b94a48}.label-important[href],.badge-important[href]{background-color:#953b39}.label-warning,.badge-warning{background-color:#f89406}.label-warning[href],.badge-warning[href]{background-color:#c67605}.label-success,.badge-success{background-color:#468847}.label-success[href],.badge-success[href]{background-color:#356635}.label-info,.badge-info{background-color:#3a87ad}.label-info[href],.badge-info[href]{background-color:#2d6987}.label-inverse,.badge-inverse{background-color:#333}.label-inverse[href],.badge-inverse[href]{background-color:#1a1a1a}.btn .label,.btn .badge{position:relative;top:-1px}.btn-mini .label,.btn-mini .badge{top:0}@-webkit-keyframes progress-bar-stripes{from{background-position:40px 0}to{background-position:0 0}}@-moz-keyframes progress-bar-stripes{from{background-position:40px 0}to{background-position:0 0}}@-ms-keyframes progress-bar-stripes{from{background-position:40px 0}to{background-position:0 0}}@-o-keyframes progress-bar-stripes{from{background-position:0 0}to{background-position:40px 0}}@keyframes progress-bar-stripes{from{background-position:40px 0}to{background-position:0 0}}.progress{height:20px;margin-bottom:20px;overflow:hidden;background-color:#f7f7f7;background-image:-moz-linear-gradient(top,#f5f5f5,#f9f9f9);background-image:-webkit-gradient(linear,0 0,0 100%,from(#f5f5f5),to(#f9f9f9));background-image:-webkit-linear-gradient(top,#f5f5f5,#f9f9f9);background-image:-o-linear-gradient(top,#f5f5f5,#f9f9f9);background-image:linear-gradient(to bottom,#f5f5f5,#f9f9f9);background-repeat:repeat-x;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#fff5f5f5',endColorstr='#fff9f9f9',GradientType=0);-webkit-box-shadow:inset 0 1px 2px rgba(0,0,0,0.1);-moz-box-shadow:inset 0 1px 2px rgba(0,0,0,0.1);box-shadow:inset 0 1px 2px rgba(0,0,0,0.1)}.progress .bar{float:left;width:0;height:100%;font-size:12px;color:#fff;text-align:center;text-shadow:0 -1px 0 rgba(0,0,0,0.25);background-color:#0e90d2;background-image:-moz-linear-gradient(top,#149bdf,#0480be);background-image:-webkit-gradient(linear,0 0,0 100%,from(#149bdf),to(#0480be));background-image:-webkit-linear-gradient(top,#149bdf,#0480be);background-image:-o-linear-gradient(top,#149bdf,#0480be);background-image:linear-gradient(to bottom,#149bdf,#0480be);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ff149bdf',endColorstr='#ff0480be',GradientType=0);-webkit-box-shadow:inset 0 -1px 0 rgba(0,0,0,0.15);-moz-box-shadow:inset 0 -1px 0 rgba(0,0,0,0.15);box-shadow:inset 0 -1px 0 rgba(0,0,0,0.15);-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;-webkit-transition:width .6s ease;-moz-transition:width .6s ease;-o-transition:width .6s ease;transition:width .6s ease}.progress .bar+.bar{-webkit-box-shadow:inset 1px 0 0 rgba(0,0,0,0.15),inset 0 -1px 0 rgba(0,0,0,0.15);-moz-box-shadow:inset 1px 0 0 rgba(0,0,0,0.15),inset 0 -1px 0 rgba(0,0,0,0.15);box-shadow:inset 1px 0 0 rgba(0,0,0,0.15),inset 0 -1px 0 rgba(0,0,0,0.15)}.progress-striped .bar{background-color:#149bdf;background-image:-webkit-gradient(linear,0 100%,100% 0,color-stop(0.25,rgba(255,255,255,0.15)),color-stop(0.25,transparent),color-stop(0.5,transparent),color-stop(0.5,rgba(255,255,255,0.15)),color-stop(0.75,rgba(255,255,255,0.15)),color-stop(0.75,transparent),to(transparent));background-image:-webkit-linear-gradient(45deg,rgba(255,255,255,0.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,0.15) 50%,rgba(255,255,255,0.15) 75%,transparent 75%,transparent);background-image:-moz-linear-gradient(45deg,rgba(255,255,255,0.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,0.15) 50%,rgba(255,255,255,0.15) 75%,transparent 75%,transparent);background-image:-o-linear-gradient(45deg,rgba(255,255,255,0.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,0.15) 50%,rgba(255,255,255,0.15) 75%,transparent 75%,transparent);background-image:linear-gradient(45deg,rgba(255,255,255,0.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,0.15) 50%,rgba(255,255,255,0.15) 75%,transparent 75%,transparent);-webkit-background-size:40px 40px;-moz-background-size:40px 40px;-o-background-size:40px 40px;background-size:40px 40px}.progress.active .bar{-webkit-animation:progress-bar-stripes 2s linear infinite;-moz-animation:progress-bar-stripes 2s linear infinite;-ms-animation:progress-bar-stripes 2s linear infinite;-o-animation:progress-bar-stripes 2s linear infinite;animation:progress-bar-stripes 2s linear infinite}.progress-danger .bar,.progress .bar-danger{background-color:#dd514c;background-image:-moz-linear-gradient(top,#ee5f5b,#c43c35);background-image:-webkit-gradient(linear,0 0,0 100%,from(#ee5f5b),to(#c43c35));background-image:-webkit-linear-gradient(top,#ee5f5b,#c43c35);background-image:-o-linear-gradient(top,#ee5f5b,#c43c35);background-image:linear-gradient(to bottom,#ee5f5b,#c43c35);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffee5f5b',endColorstr='#ffc43c35',GradientType=0)}.progress-danger.progress-striped .bar,.progress-striped .bar-danger{background-color:#ee5f5b;background-image:-webkit-gradient(linear,0 100%,100% 0,color-stop(0.25,rgba(255,255,255,0.15)),color-stop(0.25,transparent),color-stop(0.5,transparent),color-stop(0.5,rgba(255,255,255,0.15)),color-stop(0.75,rgba(255,255,255,0.15)),color-stop(0.75,transparent),to(transparent));background-image:-webkit-linear-gradient(45deg,rgba(255,255,255,0.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,0.15) 50%,rgba(255,255,255,0.15) 75%,transparent 75%,transparent);background-image:-moz-linear-gradient(45deg,rgba(255,255,255,0.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,0.15) 50%,rgba(255,255,255,0.15) 75%,transparent 75%,transparent);background-image:-o-linear-gradient(45deg,rgba(255,255,255,0.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,0.15) 50%,rgba(255,255,255,0.15) 75%,transparent 75%,transparent);background-image:linear-gradient(45deg,rgba(255,255,255,0.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,0.15) 50%,rgba(255,255,255,0.15) 75%,transparent 75%,transparent)}.progress-success .bar,.progress .bar-success{background-color:#5eb95e;background-image:-moz-linear-gradient(top,#62c462,#57a957);background-image:-webkit-gradient(linear,0 0,0 100%,from(#62c462),to(#57a957));background-image:-webkit-linear-gradient(top,#62c462,#57a957);background-image:-o-linear-gradient(top,#62c462,#57a957);background-image:linear-gradient(to bottom,#62c462,#57a957);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ff62c462',endColorstr='#ff57a957',GradientType=0)}.progress-success.progress-striped .bar,.progress-striped .bar-success{background-color:#62c462;background-image:-webkit-gradient(linear,0 100%,100% 0,color-stop(0.25,rgba(255,255,255,0.15)),color-stop(0.25,transparent),color-stop(0.5,transparent),color-stop(0.5,rgba(255,255,255,0.15)),color-stop(0.75,rgba(255,255,255,0.15)),color-stop(0.75,transparent),to(transparent));background-image:-webkit-linear-gradient(45deg,rgba(255,255,255,0.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,0.15) 50%,rgba(255,255,255,0.15) 75%,transparent 75%,transparent);background-image:-moz-linear-gradient(45deg,rgba(255,255,255,0.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,0.15) 50%,rgba(255,255,255,0.15) 75%,transparent 75%,transparent);background-image:-o-linear-gradient(45deg,rgba(255,255,255,0.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,0.15) 50%,rgba(255,255,255,0.15) 75%,transparent 75%,transparent);background-image:linear-gradient(45deg,rgba(255,255,255,0.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,0.15) 50%,rgba(255,255,255,0.15) 75%,transparent 75%,transparent)}.progress-info .bar,.progress .bar-info{background-color:#4bb1cf;background-image:-moz-linear-gradient(top,#5bc0de,#339bb9);background-image:-webkit-gradient(linear,0 0,0 100%,from(#5bc0de),to(#339bb9));background-image:-webkit-linear-gradient(top,#5bc0de,#339bb9);background-image:-o-linear-gradient(top,#5bc0de,#339bb9);background-image:linear-gradient(to bottom,#5bc0de,#339bb9);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ff5bc0de',endColorstr='#ff339bb9',GradientType=0)}.progress-info.progress-striped .bar,.progress-striped .bar-info{background-color:#5bc0de;background-image:-webkit-gradient(linear,0 100%,100% 0,color-stop(0.25,rgba(255,255,255,0.15)),color-stop(0.25,transparent),color-stop(0.5,transparent),color-stop(0.5,rgba(255,255,255,0.15)),color-stop(0.75,rgba(255,255,255,0.15)),color-stop(0.75,transparent),to(transparent));background-image:-webkit-linear-gradient(45deg,rgba(255,255,255,0.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,0.15) 50%,rgba(255,255,255,0.15) 75%,transparent 75%,transparent);background-image:-moz-linear-gradient(45deg,rgba(255,255,255,0.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,0.15) 50%,rgba(255,255,255,0.15) 75%,transparent 75%,transparent);background-image:-o-linear-gradient(45deg,rgba(255,255,255,0.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,0.15) 50%,rgba(255,255,255,0.15) 75%,transparent 75%,transparent);background-image:linear-gradient(45deg,rgba(255,255,255,0.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,0.15) 50%,rgba(255,255,255,0.15) 75%,transparent 75%,transparent)}.progress-warning .bar,.progress .bar-warning{background-color:#faa732;background-image:-moz-linear-gradient(top,#fbb450,#f89406);background-image:-webkit-gradient(linear,0 0,0 100%,from(#fbb450),to(#f89406));background-image:-webkit-linear-gradient(top,#fbb450,#f89406);background-image:-o-linear-gradient(top,#fbb450,#f89406);background-image:linear-gradient(to bottom,#fbb450,#f89406);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#fffbb450',endColorstr='#fff89406',GradientType=0)}.progress-warning.progress-striped .bar,.progress-striped .bar-warning{background-color:#fbb450;background-image:-webkit-gradient(linear,0 100%,100% 0,color-stop(0.25,rgba(255,255,255,0.15)),color-stop(0.25,transparent),color-stop(0.5,transparent),color-stop(0.5,rgba(255,255,255,0.15)),color-stop(0.75,rgba(255,255,255,0.15)),color-stop(0.75,transparent),to(transparent));background-image:-webkit-linear-gradient(45deg,rgba(255,255,255,0.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,0.15) 50%,rgba(255,255,255,0.15) 75%,transparent 75%,transparent);background-image:-moz-linear-gradient(45deg,rgba(255,255,255,0.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,0.15) 50%,rgba(255,255,255,0.15) 75%,transparent 75%,transparent);background-image:-o-linear-gradient(45deg,rgba(255,255,255,0.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,0.15) 50%,rgba(255,255,255,0.15) 75%,transparent 75%,transparent);background-image:linear-gradient(45deg,rgba(255,255,255,0.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,0.15) 50%,rgba(255,255,255,0.15) 75%,transparent 75%,transparent)}.accordion{margin-bottom:20px}.accordion-group{margin-bottom:2px;border:1px solid #e5e5e5;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px}.accordion-heading{border-bottom:0}.accordion-heading .accordion-toggle{display:block;padding:8px 15px}.accordion-toggle{cursor:pointer}.accordion-inner{padding:9px 15px;border-top:1px solid #e5e5e5}.carousel{position:relative;margin-bottom:20px;line-height:1}.carousel-inner{position:relative;width:100%;overflow:hidden}.carousel-inner>.item{position:relative;display:none;-webkit-transition:.6s ease-in-out left;-moz-transition:.6s ease-in-out left;-o-transition:.6s ease-in-out left;transition:.6s ease-in-out left}.carousel-inner>.item>img,.carousel-inner>.item>a>img{display:block;line-height:1}.carousel-inner>.active,.carousel-inner>.next,.carousel-inner>.prev{display:block}.carousel-inner>.active{left:0}.carousel-inner>.next,.carousel-inner>.prev{position:absolute;top:0;width:100%}.carousel-inner>.next{left:100%}.carousel-inner>.prev{left:-100%}.carousel-inner>.next.left,.carousel-inner>.prev.right{left:0}.carousel-inner>.active.left{left:-100%}.carousel-inner>.active.right{left:100%}.carousel-control{position:absolute;top:40%;left:15px;width:40px;height:40px;margin-top:-20px;font-size:60px;font-weight:100;line-height:30px;color:#fff;text-align:center;background:#222;border:3px solid #fff;-webkit-border-radius:23px;-moz-border-radius:23px;border-radius:23px;opacity:.5;filter:alpha(opacity=50)}.carousel-control.right{right:15px;left:auto}.carousel-control:hover,.carousel-control:focus{color:#fff;text-decoration:none;opacity:.9;filter:alpha(opacity=90)}.carousel-indicators{position:absolute;top:15px;right:15px;z-index:5;margin:0;list-style:none}.carousel-indicators li{display:block;float:left;width:10px;height:10px;margin-left:5px;text-indent:-999px;background-color:#ccc;background-color:rgba(255,255,255,0.25);border-radius:5px}.carousel-indicators .active{background-color:#fff}.carousel-caption{position:absolute;right:0;bottom:0;left:0;padding:15px;background:#333;background:rgba(0,0,0,0.75)}.carousel-caption h4,.carousel-caption p{line-height:20px;color:#fff}.carousel-caption h4{margin:0 0 5px}.carousel-caption p{margin-bottom:0}.hero-unit{padding:60px;margin-bottom:30px;font-size:18px;font-weight:200;line-height:30px;color:inherit;background-color:#eee;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px}.hero-unit h1{margin-bottom:0;font-size:60px;line-height:1;letter-spacing:-1px;color:inherit}.hero-unit li{line-height:30px}.pull-right{float:right}.pull-left{float:left}.hide{display:none}.show{display:block}.invisible{visibility:hidden}.affix{position:fixed}li.activity.label,.file-picker td.label{display:block;padding:8px;font-size:inherit;line-height:inherit;color:inherit;text-shadow:none;white-space:normal;background:inherit;border:inherit}.file-picker td.label{display:table-cell;text-align:right}.choosercontainer #chooseform .option label{font-size:12px}li.section.hidden,.block.hidden,.block.invisible{display:block;visibility:visible}#turnitintool_style .row,.forumpost .row{margin-left:0!important}#turnitintool_style .row:before,#turnitintool_style .row:after,.forumpost .row:before,.forumpost .row:after{content:none}fieldset.hidden{display:inherit;visibility:inherit}div.c1.btn{display:block;padding:0;margin-bottom:0;font-size:inherit;line-height:inherit;color:inherit;text-align:inherit;text-shadow:inherit;vertical-align:inherit;cursor:default;background-color:inherit;background-image:none;background-repeat:none;border:0;border-radius:none;box-shadow:none}#questionbank+.container{width:auto}img.hide{display:inherit}.icon-bar,img.icon-post,img.icon-info,img.icon-warn,img.icon-pre{background-image:none}.loginbox.twocolumns .signuppanel,.loginbox.twocolumns .signuppanel,.loginbox.twocolumns .loginpanel,.loginbox.twocolumns .loginpanel{padding:0;margin:0}.tooltip{display:inline;opacity:1;filter:alpha(opacity=100)}body{padding-top:60px}.block{min-height:20px;padding:19px;padding:8px 0;margin-bottom:20px;background-color:#f5f5f5;border:1px solid #e3e3e3;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,0.05);-moz-box-shadow:inset 0 1px 1px rgba(0,0,0,0.05);box-shadow:inset 0 1px 1px rgba(0,0,0,0.05)}.block blockquote{border-color:#ddd;border-color:rgba(0,0,0,0.15)}.block .header h2{padding:.2em 0 0 .2em;margin:0}.block .header .title h2,.block h3.main{display:block;padding:3px 15px;font-size:11px;font-size:1.1em;font-weight:bold;line-height:20px;color:#999;text-shadow:0 1px 0 rgba(255,255,255,0.5);text-transform:uppercase}.block .header .title .commands,.block_adminblock .content,.block .footer{display:block;padding:3px 15px}.block .header .block_action{float:right}.block .header .commands{clear:both;text-align:right}.block .header .commands>a{margin:0 3px}.block .header .commands .icon img{width:12px;height:12px}.block .content{padding:4px 14px}.block .content hr{margin:5px 0}.block.hidden .content{display:none}.block .content .userpicture{width:16px;height:16px;margin-right:6px}.block .content .list li.listentry{clear:both}.block .content .list .c0{display:inline}.block .content .list .c1{display:inline;margin-left:5px}.block .footer{margin-bottom:4px}.block .blockannotation{margin:-1em 0 1em;font-size:.75em}.block.list_block .unlist>li>.column{display:inline-block;*display:inline;*zoom:1}.blockmovetarget,.block.beingmoved{border-style:dashed;border-width:2px}.blockmovetarget{display:block;height:1em;margin-bottom:1em}.block.invisible{opacity:.5;filter:alpha(opacity=50)}.block .block-hider-show,.block .block-hider-hide{padding-right:5px;padding-left:5px;cursor:pointer}.block .block-hider-show,.block.hidden .block-hider-hide{display:none}.block.hidden .block-hider-show{display:inline}.block_calendar_upcoming .footer{margin-top:.5em}#adminsearchquery,#blogsearchquery,#searchform_search,.block_adminblock select{max-width:92%}.block_adminblock .singleselect{display:block}#searchform_search{width:auto}.dir-rtl .block .header,.dir-rtl .block h2.header{text-align:right}.dir-rtl .block .header .commands{text-align:left}.dir-rtl .block .header .block_action{float:left}form{margin:0}.mform fieldset .advancedbutton{text-align:right}.jsenabled .mform .containsadvancedelements .advanced{display:none}.mform .containsadvancedelements .advanced.show{display:block}.mform fieldset.group{margin-bottom:0}.mform fieldset.error{border:1px solid #b94a48}.mform fieldset.collapsible legend a.fheader{padding:0 5px 0 20px;margin-left:-20px;background:url([[pix:t/expanded]]) 2px center no-repeat}.dir-rtl .mform fieldset.collapsible legend a.fheader{padding:0 20px 0 5px;margin-right:-20px;margin-left:0;background-position:right center}.mform fieldset.collapsed legend a.fheader{background-image:url([[pix:t/collapsed]])}.dir-rtl .mform fieldset.collapsed legend a.fheader{background-image:url([[pix:t/collapsed_rtl]])}.jsenabled .mform .collapsed .fcontainer{display:none}.mform .collapsible-actions{display:none;text-align:right}.dir-rtl .mform .collapsible-actions{text-align:left}.jsenabled .mform .collapsible-actions{display:block}.mform .collapsible-actions .collapseexpand{padding-left:20px;background:url([[pix:t/collapsed]]) 2px center no-repeat}.dir-rtl .mform .collapsible-actions .collapseexpand{padding-right:20px;padding-left:0;background:url([[pix:t/collapsed_rtl]]) right center no-repeat}.mform .collapsible-actions .collapse-all,.dir-rtl .mform .collapsible-actions .collapse-all{background-image:url([[pix:t/expanded]])}.mform .fitem .fitemtitle div{display:inline}.loginpanel .error,.mform .error{color:#b94a48}.mform .fdescription.required{margin-left:200px}.mform .fpassword .unmask{display:inline-block;margin-left:.5em}.mform .fpassword .unmask>input{margin:0}.mform .fpassword .unmask>label{display:inline-block}.mform .ftextarea #id_alltext{width:100%}.mform ul.file-list{padding:0;margin:0;list-style:none}.mform label .req,.mform label .adv{cursor:help}.mform .fcheckbox input{margin-top:5px;margin-left:0}.mform .fitem fieldset.fgroup label,.mform fieldset.fdate_selector label{display:inline;float:none;width:auto}.mform .ftags label.accesshide{position:static;display:block}.mform .ftags select{min-width:22em;margin-bottom:.7em}.mform .helplink img{padding:0;margin:0 .45em}.mform legend .helplink img{margin:0 .2em}.singleselect label{margin-right:.3em}.dir-rtl .singleselect label{margin-right:0;margin-left:.3em}input#id_externalurl{direction:ltr}#portfolio-add-button{display:inline}.form-item,.mform .fitem{margin-bottom:20px;margin-bottom:10px;*zoom:1}.form-item:before,.mform .fitem:before,.form-item:after,.mform .fitem:after{display:table;line-height:0;content:\"\"}.form-item:after,.mform .fitem:after{clear:both}.form-item .form-label,.mform .fitem div.fitemtitle{float:left;width:180px;padding-top:5px;text-align:right}.dir-rtl .form-item .form-label,.dir-rtl .mform .fitem div.fitemtitle{float:right}.form-defaultinfo,.form-label .form-shortname{color:#999}.form-label .form-shortname{display:block;font-size:10.5px}.dir-rtl .form-label .form-shortname{text-align:left}.form-item .form-setting,.form-item .form-description,.mform .fitem .felement,#page-mod-forum-search .c1{*display:inline-block;*padding-left:20px;margin-left:200px;*margin-left:0}.form-item .form-setting:first-child,.form-item .form-description:first-child,.mform .fitem .felement:first-child,#page-mod-forum-search .c1:first-child{*padding-left:200px}.formsettingheading{margin-bottom:0}.form-item .form-description,.felement.fstatic{display:block;padding-top:5px;margin-bottom:10px;color:#595959}.form-item .form-description{padding-top:0}table#form td.submit,.form-buttons,.path-admin .buttons,#fitem_id_submitbutton,.fp-content-center form+div,div.backup-section+form,#fgroup_id_buttonar{padding:19px 20px 20px;padding-left:0;margin-top:20px;margin-bottom:20px;background-color:#f5f5f5;border-top:1px solid #e5e5e5;*zoom:1}table#form td.submit:before,.form-buttons:before,.path-admin .buttons:before,#fitem_id_submitbutton:before,.fp-content-center form+div:before,div.backup-section+form:before,#fgroup_id_buttonar:before,table#form td.submit:after,.form-buttons:after,.path-admin .buttons:after,#fitem_id_submitbutton:after,.fp-content-center form+div:after,div.backup-section+form:after,#fgroup_id_buttonar:after{display:table;line-height:0;content:\"\"}table#form td.submit:after,.form-buttons:after,.path-admin .buttons:after,#fitem_id_submitbutton:after,.fp-content-center form+div:after,div.backup-section+form:after,#fgroup_id_buttonar:after{clear:both}.path-admin .buttons,.form-buttons{padding-left:200px}.form-item .form-setting .form-checkbox.defaultsnext{display:inline-block;margin-top:5px}#adminsettings h3.main{display:block;width:100%;padding:0;margin-bottom:20px;font-size:21px;line-height:40px;color:#333;border:0;border-bottom:1px solid #e5e5e5}.mform legend a,.mform legend a:hover{color:#333;text-decoration:none}.dir-rtl .mform .fitem .fitemtitle{float:right}.dir-rtl .mform .fitem .felement{margin-right:16%;margin-left:auto;text-align:right}.dir-rtl .mform .fitem .felement input[name=email],.dir-rtl .mform .fitem .felement input[name=email2],.dir-rtl .mform .fitem .felement input[name=url],.dir-rtl .mform .fitem .felement input[name=idnumber],.dir-rtl .mform .fitem .felement input[name=phone1],.dir-rtl .mform .fitem .felement input[name=phone2]{text-align:left;direction:ltr}.dir-rtl #id_s__pathtodu,.dir-rtl #id_s__aspellpath,.dir-rtl #id_s__pathtodot,.dir-rtl #id_s__supportemail,.dir-rtl #id_s__supportpage,.dir-rtl #id_s__sessioncookie,.dir-rtl #id_s__sessioncookiepath,.dir-rtl #id_s__sessioncookiedomain,.dir-rtl #id_s__proxyhost,.dir-rtl #id_s__proxyuser,.dir-rtl #id_s__proxypassword,.dir-rtl #id_s__proxybypass,.dir-rtl #id_s__jabberhost,.dir-rtl #id_s__jabberserver,.dir-rtl #id_s__jabberusername,.dir-rtl #id_s__jabberpassword,.dir-rtl #id_s__additionalhtmlhead,.dir-rtl #id_s__additionalhtmltopofbody,.dir-rtl #id_s__additionalhtmlfooter,.dir-rtl #id_s__docroot,.dir-rtl #id_s__filter_tex_latexpreamble,.dir-rtl #id_s__filter_tex_latexbackground,.dir-rtl #id_s__filter_tex_pathlatex,.dir-rtl #id_s__filter_tex_pathdvips,.dir-rtl #id_s__filter_tex_pathconvert,.dir-rtl #id_s__blockedip,.dir-rtl #id_s__pathtoclam,.dir-rtl #id_s__quarantinedir,.dir-rtl #id_s__sitepolicy,.dir-rtl #id_s__sitepolicyguest,.dir-rtl #id_s__cronremotepassword,.dir-rtl #id_s__allowedip,.dir-rtl #id_s__blockedip,.dir-rtl #id_s_enrol_meta_nosyncroleids,.dir-rtl #id_s_enrol_ldap_host_url,.dir-rtl #id_s_enrol_ldap_ldapencoding,.dir-rtl #id_s_enrol_ldap_bind_dn,.dir-rtl #id_s_enrol_ldap_bind_pw,.dir-rtl #admin-emoticons .form-text,.dir-rtl #admin-role_mapping input[type=text],.dir-rtl #id_s_enrol_paypal_paypalbusiness,.dir-rtl #id_s_enrol_flatfile_location,#page-admin-setting-enrolsettingsflatfile.dir-rtl input[type=text],#page-admin-setting-enrolsettingsdatabase.dir-rtl input[type=text],#page-admin-auth-db.dir-rtl input[type=text]{direction:ltr}#page-admin-setting-enrolsettingsflatfile.dir-rtl .informationbox{text-align:left;direction:ltr}#page-admin-grade-edit-scale-edit.dir-rtl .error input#id_name{margin-right:170px}#installform #id_wwwroot,#installform #id_dirroot,#installform #id_dataroot,#installform #id_dbhost,#installform #id_dbname,#installform #id_dbuser,#installform #id_dbpass,#installform #id_prefix{direction:ltr}.mdl-right>label{display:inline-block}input[type=\"radio\"]+label,input[type=\"checkbox\"]+label{display:inline;padding-left:.2em}input[type=\"radio\"],input[type=\"checkbox\"]{margin-top:-4px;margin-right:7px}.singleselect{display:inline-block}.singleselect form,.singleselect select{margin:0}.form-item .form-label label{margin-bottom:0}.dir-rtl .form-item .form-label label{text-align:left}.felement.ffilepicker{margin-top:5px}div#dateselector-calendar-panel{z-index:3100}fieldset.coursesearchbox label{display:inline}select{width:auto}.path-mod-forum .forumheaderlist,.path-mod-forum .forumheaderlist td{border:0}.forumpost{min-height:20px;padding:19px;padding:6px;margin-bottom:20px;background-color:#f5f5f5;border:1px solid #e3e3e3;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,0.05);-moz-box-shadow:inset 0 1px 1px rgba(0,0,0,0.05);box-shadow:inset 0 1px 1px rgba(0,0,0,0.05)}.forumpost blockquote{border-color:#ddd;border-color:rgba(0,0,0,0.15)}.forumpost .row .left{width:auto}.forumpost .options .commands{margin-left:0}.forumpost .subject{font-weight:bold}.forumsearch input[type=text]{margin-bottom:0!important}#page-mod-forum-discuss .discussioncontrol.displaymode{text-align:left}#page-mod-forum-discuss .discussioncontrols .discussioncontrol{float:left}#page-footer{padding:1em 0;margin-top:1em;border-top:2px solid #eee}.maincalendar .calendarmonth td,.maincalendar .calendarmonth th{border:1px dotted #ddd}.path-grade-report-grader h1{text-align:inherit}#page-mod-chat-gui_basic input#message{max-width:100%}#page-mod-data-view #singleimage{width:auto}.path-mod-data form{margin-top:10px}.template_heading{margin-top:10px}.breadcrumb-button{float:right;margin-top:4px}.dir-rtl .navbar .brand{float:right}.navbar-inverse .logininfo a{color:#999}.navbar-inverse .logininfo a:hover{color:#fff;background-color:transparent}.navbar-fixed-top,.navbar-fixed-bottom{z-index:4030}.dir-rtl .breadcrumb-button,.dir-rtl .navbar .btn-navbar{float:left}.ie .row-fluid .desktop-first-column{margin-left:0}.langmenu form{margin:0}.container-fluid{max-width:1680px;margin:0 auto}canvas{-ms-touch-action:auto}div#dock{display:none}.path-mod-choice .horizontal .choices{margin:0}.path-mod-choice .horizontal .choices .option{display:inline-block;padding:10px}.path-mod-lesson .firstpageoptions{width:60%;min-width:280px;margin:auto}.path-mod-lesson .centerpadded{padding:5px;text-align:center}#page-report-participation-index .participationselectform div label{display:inline;margin:0 5px}#page-report-participation-index.dir-ltr .participationselectform div label[for=menuinstanceid]{margin-left:0}#page-report-participation-index.dir-rtl .participationselectform div label[for=menuinstanceid]{margin-right:0}.path-backup .mform .grouped_settings.section_level{min-height:20px;padding:19px;padding:10px 0 0 0;margin-bottom:20px;clear:both;background-color:#f5f5f5;border:1px solid #e3e3e3;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,0.05);-moz-box-shadow:inset 0 1px 1px rgba(0,0,0,0.05);box-shadow:inset 0 1px 1px rgba(0,0,0,0.05)}.path-backup .mform .grouped_settings.section_level blockquote{border-color:#ddd;border-color:rgba(0,0,0,0.15)}.path-backup .mform .grouped_settings{overflow:hidden;clear:both}.path-backup .include_setting,.path-backup .grouped_settings .normal_setting{display:inline-block}.path-backup .include_setting.section_level label{font-weight:bold}.path-backup .mform .fitem .fitemtitle{width:260px}.path-backup .mform .fitem .felement{margin-left:280px}.path-backup .notification.dependencies_enforced{font-weight:bold;color:#b94a48;text-align:center}.path-backup .backup_progress{text-align:center}.path-backup .backup_progress .backup_stage{color:#999}.path-backup .backup_progress .backup_stage.backup_stage_current{font-weight:bold;color:inherit}.path-backup .backup_progress span.backup_stage.backup_stage_complete{color:inherit}#page-backup-restore .filealiasesfailures{background-color:#f2dede}#page-backup-restore .filealiasesfailures .aliaseslist{width:90%;margin:.8em auto;background-color:#fff;border:1px dotted #666}.path-backup .fitem .smallicon{vertical-align:text-bottom}.backup-restore .backup-section>h2.header,.backup-restore .backup-section .backup-sub-section h3{display:block;width:100%;padding:0;margin-bottom:20px;font-size:21px;line-height:40px;color:#333;border:0;border-bottom:1px solid #e5e5e5}.backup-restore .backup-section .noticebox{width:60%;margin:1em auto;text-align:center}.backup-restore .backup-section.settings-section .detail-pair{display:inline-block;*display:inline;width:50%;*zoom:1}.backup-restore .backup-section.settings-section .detail-pair-label{width:65%}.backup-restore .backup-section.settings-section .detail-pair-value{width:25%}.backup-restore .activitytable{min-width:500px}.backup-restore .activitytable .modulename{width:100px}.backup-restore .activitytable .moduleincluded{width:50px}.backup-restore .activitytable .userinfoincluded{width:50px}.backup-restore .detail-pair-label{display:inline-block;*display:inline;width:25%;padding:8px;margin:0;font-weight:bold;text-align:right;vertical-align:top;*zoom:1}.backup-restore .detail-pair-value{display:inline-block;*display:inline;width:65%;padding:8px;margin:0;*zoom:1}.backup-restore .detail-pair-value>.sub-detail{display:block;font-size:11.9px;color:#999}.backup-restore>.singlebutton{text-align:right}.path-backup .mform .fgroup .proceedbutton{float:right;margin-right:5%}.restore-course-search .rcs-results{width:70%;min-width:400px}.restore-course-search .rcs-results table{width:100%;margin:0;border-width:0}.restore-course-search .rcs-results table .no-overflow{max-width:600px}.restore-course-search .rcs-results .paging{padding:3px;margin:0;text-align:left;background-color:#eee}.restore-course-category .rcs-results{width:70%;min-width:400px;margin:5px 0;border:1px solid #ddd}.restore-course-category .rcs-results table{width:100%;margin:0;border-width:0}.restore-course-category .rcs-results table .no-overflow{max-width:600px}.restore-course-category .rcs-results .paging{padding:3px;margin:0;text-align:left;background-color:#eee}table.flexible,.generaltable{width:100%;margin-bottom:20px}table.flexible th,.generaltable th,table.flexible td,.generaltable td{padding:8px;line-height:20px;text-align:left;vertical-align:top;border-top:1px solid #ddd}table.flexible th,.generaltable th{font-weight:bold}table.flexible thead th,.generaltable thead th{vertical-align:bottom}table.flexible caption+thead tr:first-child th,.generaltable caption+thead tr:first-child th,table.flexible caption+thead tr:first-child td,.generaltable caption+thead tr:first-child td,table.flexible colgroup+thead tr:first-child th,.generaltable colgroup+thead tr:first-child th,table.flexible colgroup+thead tr:first-child td,.generaltable colgroup+thead tr:first-child td,table.flexible thead:first-child tr:first-child th,.generaltable thead:first-child tr:first-child th,table.flexible thead:first-child tr:first-child td,.generaltable thead:first-child tr:first-child td{border-top:0}table.flexible tbody+tbody,.generaltable tbody+tbody{border-top:2px solid #ddd}table.flexible .table,.generaltable .table{background-color:#fff}.singlebutton div{display:inline-block;margin-right:5px;margin-bottom:5px;margin-left:5px}#notice .buttons .singlebutton{display:inline-block}.continuebutton{text-align:center}.btn-lineup{margin:0 0 10px 5px}input[name=\"searchwikicontent\"]+input[type=\"submit\"],select+input[type=\"submit\"],input[type=\"text\"]+input[type=\"button\"],input[type=\"password\"]+input[type=\"submit\"],input[type=\"text\"]+button,input[type=\"text\"]+input[type=\"submit\"]{margin:0 0 10px 5px}p.arrow_button{margin-top:5em;text-align:center}p.arrow_button #remove{margin:3em auto 5em}p.arrow_button input{display:block;width:100%;padding-right:0;padding-left:0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}#addcontrols{margin-top:5em;margin-bottom:3em;text-align:center}#addcontrols input,#removecontrols input{display:block;width:100%;padding-right:0;padding-left:0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}button,input.form-submit,input[type=\"button\"],input[type=\"submit\"],input[type=\"reset\"]{display:inline-block;*display:inline;padding:4px 12px;margin-bottom:0;*margin-left:.3em;font-size:14px;line-height:20px;color:#333;text-align:center;text-shadow:0 1px 1px rgba(255,255,255,0.75);vertical-align:middle;cursor:pointer;background-color:#f5f5f5;*background-color:#e6e6e6;background-image:-moz-linear-gradient(top,#fff,#e6e6e6);background-image:-webkit-gradient(linear,0 0,0 100%,from(#fff),to(#e6e6e6));background-image:-webkit-linear-gradient(top,#fff,#e6e6e6);background-image:-o-linear-gradient(top,#fff,#e6e6e6);background-image:linear-gradient(to bottom,#fff,#e6e6e6);background-repeat:repeat-x;border:1px solid #ccc;*border:0;border-color:#e6e6e6 #e6e6e6 #bfbfbf;border-color:rgba(0,0,0,0.1) rgba(0,0,0,0.1) rgba(0,0,0,0.25);border-bottom-color:#b3b3b3;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffffff',endColorstr='#ffe6e6e6',GradientType=0);filter:progid:DXImageTransform.Microsoft.gradient(enabled=false);*zoom:1;-webkit-box-shadow:inset 0 1px 0 rgba(255,255,255,0.2),0 1px 2px rgba(0,0,0,0.05);-moz-box-shadow:inset 0 1px 0 rgba(255,255,255,0.2),0 1px 2px rgba(0,0,0,0.05);box-shadow:inset 0 1px 0 rgba(255,255,255,0.2),0 1px 2px rgba(0,0,0,0.05)}button:hover,input.form-submit:hover,input[type=\"button\"]:hover,input[type=\"submit\"]:hover,input[type=\"reset\"]:hover,button:focus,input.form-submit:focus,input[type=\"button\"]:focus,input[type=\"submit\"]:focus,input[type=\"reset\"]:focus,button:active,input.form-submit:active,input[type=\"button\"]:active,input[type=\"submit\"]:active,input[type=\"reset\"]:active,button.active,input.form-submit.active,input[type=\"button\"].active,input[type=\"submit\"].active,input[type=\"reset\"].active,button.disabled,input.form-submit.disabled,input[type=\"button\"].disabled,input[type=\"submit\"].disabled,input[type=\"reset\"].disabled,button[disabled],input.form-submit[disabled],input[type=\"button\"][disabled],input[type=\"submit\"][disabled],input[type=\"reset\"][disabled]{color:#333;background-color:#e6e6e6;*background-color:#d9d9d9}button:active,input.form-submit:active,input[type=\"button\"]:active,input[type=\"submit\"]:active,input[type=\"reset\"]:active,button.active,input.form-submit.active,input[type=\"button\"].active,input[type=\"submit\"].active,input[type=\"reset\"].active{background-color:#ccc \\9}button:first-child,input.form-submit:first-child,input[type=\"button\"]:first-child,input[type=\"submit\"]:first-child,input[type=\"reset\"]:first-child{*margin-left:0}button:hover,input.form-submit:hover,input[type=\"button\"]:hover,input[type=\"submit\"]:hover,input[type=\"reset\"]:hover,button:focus,input.form-submit:focus,input[type=\"button\"]:focus,input[type=\"submit\"]:focus,input[type=\"reset\"]:focus{color:#333;text-decoration:none;background-position:0 -15px;-webkit-transition:background-position .1s linear;-moz-transition:background-position .1s linear;-o-transition:background-position .1s linear;transition:background-position .1s linear}button:focus,input.form-submit:focus,input[type=\"button\"]:focus,input[type=\"submit\"]:focus,input[type=\"reset\"]:focus{outline:thin dotted #333;outline:5px auto -webkit-focus-ring-color;outline-offset:-2px}button.active,input.form-submit.active,input[type=\"button\"].active,input[type=\"submit\"].active,input[type=\"reset\"].active,button:active,input.form-submit:active,input[type=\"button\"]:active,input[type=\"submit\"]:active,input[type=\"reset\"]:active{background-image:none;outline:0;-webkit-box-shadow:inset 0 2px 4px rgba(0,0,0,0.15),0 1px 2px rgba(0,0,0,0.05);-moz-box-shadow:inset 0 2px 4px rgba(0,0,0,0.15),0 1px 2px rgba(0,0,0,0.05);box-shadow:inset 0 2px 4px rgba(0,0,0,0.15),0 1px 2px rgba(0,0,0,0.05)}button.disabled,input.form-submit.disabled,input[type=\"button\"].disabled,input[type=\"submit\"].disabled,input[type=\"reset\"].disabled,button[disabled],input.form-submit[disabled],input[type=\"button\"][disabled],input[type=\"submit\"][disabled],input[type=\"reset\"][disabled]{cursor:default;background-image:none;opacity:.65;filter:alpha(opacity=65);-webkit-box-shadow:none;-moz-box-shadow:none;box-shadow:none}button .label,input.form-submit .label,input[type=\"button\"] .label,input[type=\"submit\"] .label,input[type=\"reset\"] .label,button .badge,input.form-submit .badge,input[type=\"button\"] .badge,input[type=\"submit\"] .badge,input[type=\"reset\"] .badge{position:relative;top:-1px}button,input.form-submit,input[type=\"button\"],input[type=\"submit\"],input[type=\"reset\"]{margin:0 0 10px 5px}button.yui3-button.closebutton,button.yui3-button.closebutton:hover{background-position:0 0}input.fp-btn-choose{padding:2px 10px;font-size:11.9px;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px}.user-enroller-panel .uep-search-results .user .options .enrol{padding:0 6px;font-size:10.5px;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px}.user-enroller-panel .uep-search-results .user .options .enrol .label,.user-enroller-panel .uep-search-results .user .options .enrol .badge{top:0}@-ms-viewport{width:device-width}.hidden{display:none;visibility:hidden}.visible-phone{display:none!important}.visible-tablet{display:none!important}.hidden-desktop{display:none!important}.visible-desktop{display:inherit!important}@media(min-width:768px) and (max-width:979px){.hidden-desktop{display:inherit!important}.visible-desktop{display:none!important}.visible-tablet{display:inherit!important}.hidden-tablet{display:none!important}}@media(max-width:767px){.hidden-desktop{display:inherit!important}.visible-desktop{display:none!important}.visible-phone{display:inherit!important}.hidden-phone{display:none!important}}.visible-print{display:none!important}@media print{.visible-print{display:inherit!important}.hidden-print{display:none!important}}@media(min-width:1200px){.row{margin-left:-30px;*zoom:1}.row:before,.row:after{display:table;line-height:0;content:\"\"}.row:after{clear:both}[class*=\"span\"]{float:left;min-height:1px;margin-left:30px}.container,.navbar-static-top .container,.navbar-fixed-top .container,.navbar-fixed-bottom .container{width:1170px}.span12{width:1170px}.span11{width:1070px}.span10{width:970px}.span9{width:870px}.span8{width:770px}.span7{width:670px}.span6{width:570px}.span5{width:470px}.span4{width:370px}.span3{width:270px}.span2{width:170px}.span1{width:70px}.offset12{margin-left:1230px}.offset11{margin-left:1130px}.offset10{margin-left:1030px}.offset9{margin-left:930px}.offset8{margin-left:830px}.offset7{margin-left:730px}.offset6{margin-left:630px}.offset5{margin-left:530px}.offset4{margin-left:430px}.offset3{margin-left:330px}.offset2{margin-left:230px}.offset1{margin-left:130px}.row-fluid{width:100%;*zoom:1}.row-fluid:before,.row-fluid:after{display:table;line-height:0;content:\"\"}.row-fluid:after{clear:both}.row-fluid [class*=\"span\"]{display:block;float:left;width:100%;min-height:30px;margin-left:2.564102564102564%;*margin-left:2.5109110747408616%;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.row-fluid [class*=\"span\"]:first-child{margin-left:0}.row-fluid .controls-row [class*=\"span\"]+[class*=\"span\"]{margin-left:2.564102564102564%}.row-fluid .span12{width:100%;*width:99.94680851063829%}.row-fluid .span11{width:91.45299145299145%;*width:91.39979996362975%}.row-fluid .span10{width:82.90598290598291%;*width:82.8527914166212%}.row-fluid .span9{width:74.35897435897436%;*width:74.30578286961266%}.row-fluid .span8{width:65.81196581196582%;*width:65.75877432260411%}.row-fluid .span7{width:57.26495726495726%;*width:57.21176577559556%}.row-fluid .span6{width:48.717948717948715%;*width:48.664757228587014%}.row-fluid .span5{width:40.17094017094017%;*width:40.11774868157847%}.row-fluid .span4{width:31.623931623931625%;*width:31.570740134569924%}.row-fluid .span3{width:23.076923076923077%;*width:23.023731587561375%}.row-fluid .span2{width:14.52991452991453%;*width:14.476723040552828%}.row-fluid .span1{width:5.982905982905983%;*width:5.929714493544281%}.row-fluid .offset12{margin-left:105.12820512820512%;*margin-left:105.02182214948171%}.row-fluid .offset12:first-child{margin-left:102.56410256410257%;*margin-left:102.45771958537915%}.row-fluid .offset11{margin-left:96.58119658119658%;*margin-left:96.47481360247316%}.row-fluid .offset11:first-child{margin-left:94.01709401709402%;*margin-left:93.91071103837061%}.row-fluid .offset10{margin-left:88.03418803418803%;*margin-left:87.92780505546462%}.row-fluid .offset10:first-child{margin-left:85.47008547008548%;*margin-left:85.36370249136206%}.row-fluid .offset9{margin-left:79.48717948717949%;*margin-left:79.38079650845607%}.row-fluid .offset9:first-child{margin-left:76.92307692307693%;*margin-left:76.81669394435352%}.row-fluid .offset8{margin-left:70.94017094017094%;*margin-left:70.83378796144753%}.row-fluid .offset8:first-child{margin-left:68.37606837606839%;*margin-left:68.26968539734497%}.row-fluid .offset7{margin-left:62.393162393162385%;*margin-left:62.28677941443899%}.row-fluid .offset7:first-child{margin-left:59.82905982905982%;*margin-left:59.72267685033642%}.row-fluid .offset6{margin-left:53.84615384615384%;*margin-left:53.739770867430444%}.row-fluid .offset6:first-child{margin-left:51.28205128205128%;*margin-left:51.175668303327875%}.row-fluid .offset5{margin-left:45.299145299145295%;*margin-left:45.1927623204219%}.row-fluid .offset5:first-child{margin-left:42.73504273504273%;*margin-left:42.62865975631933%}.row-fluid .offset4{margin-left:36.75213675213675%;*margin-left:36.645753773413354%}.row-fluid .offset4:first-child{margin-left:34.18803418803419%;*margin-left:34.081651209310785%}.row-fluid .offset3{margin-left:28.205128205128204%;*margin-left:28.0987452264048%}.row-fluid .offset3:first-child{margin-left:25.641025641025642%;*margin-left:25.53464266230224%}.row-fluid .offset2{margin-left:19.65811965811966%;*margin-left:19.551736679396257%}.row-fluid .offset2:first-child{margin-left:17.094017094017094%;*margin-left:16.98763411529369%}.row-fluid .offset1{margin-left:11.11111111111111%;*margin-left:11.004728132387708%}.row-fluid .offset1:first-child{margin-left:8.547008547008547%;*margin-left:8.440625568285142%}input,textarea,.uneditable-input{margin-left:0}.controls-row [class*=\"span\"]+[class*=\"span\"]{margin-left:30px}input.span12,textarea.span12,.uneditable-input.span12{width:1156px}input.span11,textarea.span11,.uneditable-input.span11{width:1056px}input.span10,textarea.span10,.uneditable-input.span10{width:956px}input.span9,textarea.span9,.uneditable-input.span9{width:856px}input.span8,textarea.span8,.uneditable-input.span8{width:756px}input.span7,textarea.span7,.uneditable-input.span7{width:656px}input.span6,textarea.span6,.uneditable-input.span6{width:556px}input.span5,textarea.span5,.uneditable-input.span5{width:456px}input.span4,textarea.span4,.uneditable-input.span4{width:356px}input.span3,textarea.span3,.uneditable-input.span3{width:256px}input.span2,textarea.span2,.uneditable-input.span2{width:156px}input.span1,textarea.span1,.uneditable-input.span1{width:56px}.thumbnails{margin-left:-30px}.thumbnails>li{margin-left:30px}.row-fluid .thumbnails{margin-left:0}}@media(min-width:768px) and (max-width:979px){.row{margin-left:-20px;*zoom:1}.row:before,.row:after{display:table;line-height:0;content:\"\"}.row:after{clear:both}[class*=\"span\"]{float:left;min-height:1px;margin-left:20px}.container,.navbar-static-top .container,.navbar-fixed-top .container,.navbar-fixed-bottom .container{width:724px}.span12{width:724px}.span11{width:662px}.span10{width:600px}.span9{width:538px}.span8{width:476px}.span7{width:414px}.span6{width:352px}.span5{width:290px}.span4{width:228px}.span3{width:166px}.span2{width:104px}.span1{width:42px}.offset12{margin-left:764px}.offset11{margin-left:702px}.offset10{margin-left:640px}.offset9{margin-left:578px}.offset8{margin-left:516px}.offset7{margin-left:454px}.offset6{margin-left:392px}.offset5{margin-left:330px}.offset4{margin-left:268px}.offset3{margin-left:206px}.offset2{margin-left:144px}.offset1{margin-left:82px}.row-fluid{width:100%;*zoom:1}.row-fluid:before,.row-fluid:after{display:table;line-height:0;content:\"\"}.row-fluid:after{clear:both}.row-fluid [class*=\"span\"]{display:block;float:left;width:100%;min-height:30px;margin-left:2.7624309392265194%;*margin-left:2.709239449864817%;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.row-fluid [class*=\"span\"]:first-child{margin-left:0}.row-fluid .controls-row [class*=\"span\"]+[class*=\"span\"]{margin-left:2.7624309392265194%}.row-fluid .span12{width:100%;*width:99.94680851063829%}.row-fluid .span11{width:91.43646408839778%;*width:91.38327259903608%}.row-fluid .span10{width:82.87292817679558%;*width:82.81973668743387%}.row-fluid .span9{width:74.30939226519337%;*width:74.25620077583166%}.row-fluid .span8{width:65.74585635359117%;*width:65.69266486422946%}.row-fluid .span7{width:57.18232044198895%;*width:57.12912895262725%}.row-fluid .span6{width:48.61878453038674%;*width:48.56559304102504%}.row-fluid .span5{width:40.05524861878453%;*width:40.00205712942283%}.row-fluid .span4{width:31.491712707182323%;*width:31.43852121782062%}.row-fluid .span3{width:22.92817679558011%;*width:22.87498530621841%}.row-fluid .span2{width:14.3646408839779%;*width:14.311449394616199%}.row-fluid .span1{width:5.801104972375691%;*width:5.747913483013988%}.row-fluid .offset12{margin-left:105.52486187845304%;*margin-left:105.41847889972962%}.row-fluid .offset12:first-child{margin-left:102.76243093922652%;*margin-left:102.6560479605031%}.row-fluid .offset11{margin-left:96.96132596685082%;*margin-left:96.8549429881274%}.row-fluid .offset11:first-child{margin-left:94.1988950276243%;*margin-left:94.09251204890089%}.row-fluid .offset10{margin-left:88.39779005524862%;*margin-left:88.2914070765252%}.row-fluid .offset10:first-child{margin-left:85.6353591160221%;*margin-left:85.52897613729868%}.row-fluid .offset9{margin-left:79.8342541436464%;*margin-left:79.72787116492299%}.row-fluid .offset9:first-child{margin-left:77.07182320441989%;*margin-left:76.96544022569647%}.row-fluid .offset8{margin-left:71.2707182320442%;*margin-left:71.16433525332079%}.row-fluid .offset8:first-child{margin-left:68.50828729281768%;*margin-left:68.40190431409427%}.row-fluid .offset7{margin-left:62.70718232044199%;*margin-left:62.600799341718584%}.row-fluid .offset7:first-child{margin-left:59.94475138121547%;*margin-left:59.838368402492065%}.row-fluid .offset6{margin-left:54.14364640883978%;*margin-left:54.037263430116376%}.row-fluid .offset6:first-child{margin-left:51.38121546961326%;*margin-left:51.27483249088986%}.row-fluid .offset5{margin-left:45.58011049723757%;*margin-left:45.47372751851417%}.row-fluid .offset5:first-child{margin-left:42.81767955801105%;*margin-left:42.71129657928765%}.row-fluid .offset4{margin-left:37.01657458563536%;*margin-left:36.91019160691196%}.row-fluid .offset4:first-child{margin-left:34.25414364640884%;*margin-left:34.14776066768544%}.row-fluid .offset3{margin-left:28.45303867403315%;*margin-left:28.346655695309746%}.row-fluid .offset3:first-child{margin-left:25.69060773480663%;*margin-left:25.584224756083227%}.row-fluid .offset2{margin-left:19.88950276243094%;*margin-left:19.783119783707537%}.row-fluid .offset2:first-child{margin-left:17.12707182320442%;*margin-left:17.02068884448102%}.row-fluid .offset1{margin-left:11.32596685082873%;*margin-left:11.219583872105325%}.row-fluid .offset1:first-child{margin-left:8.56353591160221%;*margin-left:8.457152932878806%}input,textarea,.uneditable-input{margin-left:0}.controls-row [class*=\"span\"]+[class*=\"span\"]{margin-left:20px}input.span12,textarea.span12,.uneditable-input.span12{width:710px}input.span11,textarea.span11,.uneditable-input.span11{width:648px}input.span10,textarea.span10,.uneditable-input.span10{width:586px}input.span9,textarea.span9,.uneditable-input.span9{width:524px}input.span8,textarea.span8,.uneditable-input.span8{width:462px}input.span7,textarea.span7,.uneditable-input.span7{width:400px}input.span6,textarea.span6,.uneditable-input.span6{width:338px}input.span5,textarea.span5,.uneditable-input.span5{width:276px}input.span4,textarea.span4,.uneditable-input.span4{width:214px}input.span3,textarea.span3,.uneditable-input.span3{width:152px}input.span2,textarea.span2,.uneditable-input.span2{width:90px}input.span1,textarea.span1,.uneditable-input.span1{width:28px}}@media(max-width:767px){body{padding-right:20px;padding-left:20px}.navbar-fixed-top,.navbar-fixed-bottom,.navbar-static-top{margin-right:-20px;margin-left:-20px}.container-fluid{padding:0}.dl-horizontal dt{float:none;width:auto;clear:none;text-align:left}.dl-horizontal dd{margin-left:0}.container{width:auto}.row-fluid{width:100%}.row,.thumbnails{margin-left:0}.thumbnails>li{float:none;margin-left:0}[class*=\"span\"],.uneditable-input[class*=\"span\"],.row-fluid [class*=\"span\"]{display:block;float:none;width:100%;margin-left:0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.span12,.row-fluid .span12{width:100%;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.row-fluid [class*=\"offset\"]:first-child{margin-left:0}.input-large,.input-xlarge,.input-xxlarge,input[class*=\"span\"],select[class*=\"span\"],textarea[class*=\"span\"],.uneditable-input{display:block;width:100%;min-height:30px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.input-prepend input,.input-append input,.input-prepend input[class*=\"span\"],.input-append input[class*=\"span\"]{display:inline-block;width:auto}.controls-row [class*=\"span\"]+[class*=\"span\"]{margin-left:0}.modal{position:fixed;top:20px;right:20px;left:20px;width:auto;margin:0}.modal.fade{top:-100px}.modal.fade.in{top:20px}}@media(max-width:480px){.nav-collapse{-webkit-transform:translate3d(0,0,0)}.page-header h1 small{display:block;line-height:20px}input[type=\"checkbox\"],input[type=\"radio\"]{border:1px solid #ccc}.form-horizontal .control-label{float:none;width:auto;padding-top:0;text-align:left}.form-horizontal .controls{margin-left:0}.form-horizontal .control-list{padding-top:0}.form-horizontal .form-actions{padding-right:10px;padding-left:10px}.media .pull-left,.media .pull-right{display:block;float:none;margin-bottom:10px}.media-object{margin-right:0;margin-left:0}.modal{top:10px;right:10px;left:10px}.modal-header .close{padding:10px;margin:-10px}.carousel-caption{position:static}}@media(max-width:979px){body{padding-top:0}.navbar-fixed-top,.navbar-fixed-bottom{position:static}.navbar-fixed-top{margin-bottom:20px}.navbar-fixed-bottom{margin-top:20px}.navbar-fixed-top .navbar-inner,.navbar-fixed-bottom .navbar-inner{padding:5px}.navbar .container{width:auto;padding:0}.navbar .brand{padding-right:10px;padding-left:10px;margin:0 0 0 -5px}.nav-collapse{clear:both}.nav-collapse .nav{float:none;margin:0 0 10px}.nav-collapse .nav>li{float:none}.nav-collapse .nav>li>a{margin-bottom:2px}.nav-collapse .nav>.divider-vertical{display:none}.nav-collapse .nav .nav-header{color:#777;text-shadow:none}.nav-collapse .nav>li>a,.nav-collapse .dropdown-menu a{padding:9px 15px;font-weight:bold;color:#777;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px}.nav-collapse .btn{padding:4px 10px 4px;font-weight:normal;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px}.nav-collapse .dropdown-menu li+li a{margin-bottom:2px}.nav-collapse .nav>li>a:hover,.nav-collapse .nav>li>a:focus,.nav-collapse .dropdown-menu a:hover,.nav-collapse .dropdown-menu a:focus{background-color:#f2f2f2}.navbar-inverse .nav-collapse .nav>li>a,.navbar-inverse .nav-collapse .dropdown-menu a{color:#999}.navbar-inverse .nav-collapse .nav>li>a:hover,.navbar-inverse .nav-collapse .nav>li>a:focus,.navbar-inverse .nav-collapse .dropdown-menu a:hover,.navbar-inverse .nav-collapse .dropdown-menu a:focus{background-color:#111}.nav-collapse.in .btn-group{padding:0;margin-top:5px}.nav-collapse .dropdown-menu{position:static;top:auto;left:auto;display:none;float:none;max-width:none;padding:0;margin:0 15px;background-color:transparent;border:0;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;-webkit-box-shadow:none;-moz-box-shadow:none;box-shadow:none}.nav-collapse .open>.dropdown-menu{display:block}.nav-collapse .dropdown-menu:before,.nav-collapse .dropdown-menu:after{display:none}.nav-collapse .dropdown-menu .divider{display:none}.nav-collapse .nav>li>.dropdown-menu:before,.nav-collapse .nav>li>.dropdown-menu:after{display:none}.nav-collapse .navbar-form,.nav-collapse .navbar-search{float:none;padding:10px 15px;margin:10px 0;border-top:1px solid #f2f2f2;border-bottom:1px solid #f2f2f2;-webkit-box-shadow:inset 0 1px 0 rgba(255,255,255,0.1),0 1px 0 rgba(255,255,255,0.1);-moz-box-shadow:inset 0 1px 0 rgba(255,255,255,0.1),0 1px 0 rgba(255,255,255,0.1);box-shadow:inset 0 1px 0 rgba(255,255,255,0.1),0 1px 0 rgba(255,255,255,0.1)}.navbar-inverse .nav-collapse .navbar-form,.navbar-inverse .nav-collapse .navbar-search{border-top-color:#111;border-bottom-color:#111}.navbar .nav-collapse .nav.pull-right{float:none;margin-left:0}.nav-collapse,.nav-collapse.collapse{height:0;overflow:hidden}.navbar .btn-navbar{display:block}.navbar-static .navbar-inner{padding-right:10px;padding-left:10px}}@media(min-width:980px){.nav-collapse.collapse{height:auto!important;overflow:visible!important}}@media(min-width:980px){.dir-rtl .navbar .nav.pull-right,.dir-rtl .navbar .logininfo{float:left}.dir-rtl .navbar .nav{float:right}.dir-rtl .navbar .nav>li{float:right}}@media(min-width:980px) and (max-width:1199px){.form-item .form-label,.mform .fitem div.fitemtitle,.userprofile dl.list dt,.form-horizontal .control-label{width:200px}.form-item .form-setting,.form-item .form-description,.mform .fitem .felement,#page-mod-forum-search .c1,.mform .fdescription.required,.userprofile dl.list dd,.form-horizontal .controls{margin-left:220px}.dir-rtl .form-item .form-setting,.dir-rtl .form-item .form-description,.dir-rtl .mform .fitem .felement,.dir-rtl .mform .fdescription.required,.dir-rtl .userprofile dl.list dd,.dir-rtl .form-horizontal .controls{margin-right:220px}#page-mod-forum-search.dir-lrt .c1{margin-right:220px}.path-admin .buttons,.form-buttons{padding-left:220px}}@media(min-width:1200px){.loginbox.twocolumns .loginpanel{margin-left:0}.loginbox.twocolumns .loginpanel,.loginbox.twocolumns .signuppanel{width:48.717948717948715%;*width:48.664757228587014%}.form-item .form-label,.mform .fitem div.fitemtitle,.userprofile dl.list dt,.form-horizontal .control-label{width:245px}.form-item .form-setting,.form-item .form-description,.mform .fitem .felement,#page-mod-forum-search .c1,.mform .fdescription.required,.userprofile dl.list dd,.form-horizontal .controls{margin-left:265px}.dir-rtl .form-item .form-setting,.dir-rtl .form-item .form-description,.dir-rtl .mform .fitem .felement,.dir-rtl .mform .fdescription.required,.dir-rtl .userprofile dl.list dd,.dir-rtl .form-horizontal .controls{margin-right:265px}.dir-rtl #page-mod-forum-search .c1{margin-right:265px}.path-admin .buttons,.form-buttons{padding-left:265px}.dir-rtl .path-admin .buttons,.dir-rtl .form-buttons{padding-right:265px}}@media(min-width:980px){.loginbox.twocolumns .loginpanel{margin-left:0}.loginbox.twocolumns .loginpanel,.loginbox.twocolumns .signuppanel{width:48.617948717948715%;*width:48.664757228587014%}}@media(min-width:768px) and (max-width:979px){.loginbox.twocolumns .loginpanel{margin-left:0}.loginbox.twocolumns .loginpanel,.loginbox.twocolumns .signuppanel{width:48.61878453038674%;*width:48.56559304102504%}}@media(max-width:767px){.loginbox.twocolumns .loginpanel,.loginbox.twocolumns .signuppanel{display:block;float:none;width:100%;margin-left:0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}}@media(max-width:480px){.nav-tabs>li{float:none}.nav-tabs>li>a{margin-right:0}.nav-tabs{border-bottom:0}.nav-tabs>li>a{border:1px solid #ddd;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.nav-tabs>.active>a,.nav-tabs>.active>a:hover{border:1px solid #ddd}.nav-tabs>li:first-child>a{-webkit-border-top-right-radius:4px;border-top-right-radius:4px;-webkit-border-top-left-radius:4px;border-top-left-radius:4px;-moz-border-radius-topright:4px;-moz-border-radius-topleft:4px}.nav-tabs>li:last-child>a{-webkit-border-bottom-right-radius:4px;border-bottom-right-radius:4px;-webkit-border-bottom-left-radius:4px;border-bottom-left-radius:4px;-moz-border-radius-bottomright:4px;-moz-border-radius-bottomleft:4px}.nav-tabs>li>a:hover,.nav-tabs>li>a:focus{z-index:2;border-color:#ddd}.file-picker .fp-repo-items,.file-picker .fp-repo-area{position:relative;top:0;bottom:0;display:block;width:auto;margin:0;border:0}.file-picker .fp-content{width:100%;height:100%}.fp-content-center{display:block;vertical-align:top}.fp-upload-form td.mdl-right,.fp-upload-form td.mdl-left,.fp-login-form .input,.file-picker .fp-login-form .fp-login-input label,.file-picker td.label{display:block;text-align:left}.file-picker .fp-login-form table,.file-picker td,.file-picker td.label,.file-picker .fp-upload-form table{padding:0;margin:0}.course-content ul.topics li.section,.course-content ul.topics li.section .content,.course-content ul.weeks li.section .content,.course-content ul.weeks li.section,.course-content ul.section{padding:0;margin-right:0;margin-left:0}.activityinstance{display:block}.editing .course-content .section .activity{padding-bottom:.2em;margin-bottom:.2em;border-bottom:thin solid #eee}.course-content .section .activity .commands{display:block;text-align:right}.jsenabled .visibleifjs.addresourcemodchooser{display:none}.jsenabled .hiddenifjs.addresourcedropdown{display:block}.jsenabled .hiddenifjs.addresourcedropdown .iconhelp{display:inline-block;padding:6px;vertical-align:top}.jsenabled .hiddenifjs.addresourcedropdown div.urlselect{display:block}.jsenabled .hiddenifjs.addresourcedropdown div.urlselect form{margin:0}.que .info{float:none;width:auto}.que .content{margin:0}.path-mod-choice .horizontal .choices .option{display:block}.path-mod-forum .forumsearch #search{width:120px}.path-mod-forum .forumheaderlist .picture{display:none}}@media(min-width:768px){.row-fluid .desktop-first-column{margin-left:0}#page-navbar .breadcrumb-button{display:inline}}@media(max-width:767px){.row-fluid .desktop-first-column{clear:right}}@media(max-width:767px){.form-item .form-label,.mform .fitem div.fitemtitle{float:none;width:auto;padding-top:0;text-align:left}.form-item .form-label label{display:inline-block;margin-right:.5em}.form-item .form-setting .form-checkbox{margin-top:0}.form-label span.form-shortname{display:inline-block}.form-item .form-setting,.mform .fitem .felement,.path-backup .mform .fitem .felement,.mform .fdescription.required,.form-item .form-description{margin-left:0}table#form td.submit,.form-buttons,#fitem_id_submitbutton,.fp-content-center form+div,#fgroup_id_buttonar,.form-horizontal .form-actions,.fitem_fsubmit .felement.fsubmit{padding-right:10px;padding-left:10px}#helppopupbox{left:0!important;width:auto!important}}@media(min-width:768px) and (max-width:979px){.block_calendar_month .content,.block .minicalendar td{padding-right:0;padding-left:0}}@media(max-width:979px){.nav-collapse{height:0}.nav-collapse .nav>li>a{color:#333}.nav-collapse .nav>li>a:hover,.nav-collapse .nav>li>a:focus,.nav-collapse .dropdown-menu a:hover,.nav-collapse .dropdown-menu a:focus,.nav-collapse .dropdown-submenu a:focus,.nav-collapse .dropdown-submenu a:hover,.nav-collapse .dropdown-submenu a:active,.nav-collapse .dropdown-menu>li>a:hover,.nav-collapse .dropdown-menu>li>a:focus{color:#333;background-image:none}.nav-collapse.active{height:auto}}@media(max-width:768px){#filesskin .yui3-panel,#filesskin .file-picker.fp-generallayout{left:0;width:100%}.userprofile dl.list dt{float:none;width:auto;clear:none;text-align:left}.userprofile dl.list dd{margin-left:0}#page-mod-wiki-create .mform .fitem div.fitemtitle{float:left}.section .side,.editing_move{display:none}.activityinstance>a{display:block}.container{width:auto}.row-fluid{width:100%}.row-fluid .span8.pull-right,.row-fluid .span9.pull-right{float:none}.row{margin-left:0}[class*=\"span\"],.row-fluid [class*=\"span\"]{display:block;float:none;width:100%;margin-left:0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.row-fluid .span12{width:100%;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.row-fluid [class*=\"offset\"]:first-child{margin-left:0}div[role=main]{margin-bottom:2em}}.phpinfo table,.phpinfo th,.phpinfo h2{margin:auto;text-align:left}.phpinfo h2{width:600px}.phpinfo .e,.phpinfo .v,.phpinfo .h{font-size:.8em;color:#000;vertical-align:baseline;background-color:#ccc;border:1px solid #000}.phpinfo .e{font-weight:bold;background-color:#ccf}.phpinfo .h{font-weight:bold;background-color:#99c}#page-footer .performanceinfo{margin:10px 20%}#page-footer .performanceinfo span{display:block}#page-footer .validators{padding-top:5px;margin-top:40px;border-top:1px dotted gray}#page-footer .validators ul{padding:0;margin:0;list-style-type:none}#page-footer .validators ul li{display:inline;margin-right:10px;margin-left:10px}.performanceinfo .cachesused{margin-top:1em}.performanceinfo .cachesused .cache-stats-heading,.performanceinfo .cachesused .cache-total-stats{margin-top:.3em;font-size:110%;font-weight:bold}#page-footer .performanceinfo .cachesused .cache-definition-stats{display:inline-block;margin:.3em;vertical-align:top;background-color:#f5f5f5}.cache-store-stats{padding:0 1.3em}.cache-store-stats.nohits{background-color:#f2dede}.cache-store-stats.lowhits{background-color:#fcf8e3}.cache-store-stats.hihits{background-color:#dff0d8}#page-footer,#page-footer .validators,#page-footer .purgecaches,#page-footer .performanceinfo{text-align:center}table#explaincaps tbody>tr:nth-child(odd)>td,table#defineroletable tbody>tr:nth-child(odd)>td,table.grading-report tbody>tr:nth-child(odd)>td,table#listdirectories tbody>tr:nth-child(odd)>td,table.rolecaps tbody>tr:nth-child(odd)>td,table.userenrolment tbody>tr:nth-child(odd)>td,table#form tbody>tr:nth-child(odd)>td,form#movecourses table tbody>tr:nth-child(odd)>td,#page-admin-course-index .editcourse tbody>tr:nth-child(odd)>td,.forumheaderlist tbody>tr:nth-child(odd)>td,table.flexible tbody>tr:nth-child(odd)>td,.generaltable tbody>tr:nth-child(odd)>td,table#explaincaps tbody>tr:nth-child(odd)>th,table#defineroletable tbody>tr:nth-child(odd)>th,table.grading-report tbody>tr:nth-child(odd)>th,table#listdirectories tbody>tr:nth-child(odd)>th,table.rolecaps tbody>tr:nth-child(odd)>th,table.userenrolment tbody>tr:nth-child(odd)>th,table#form tbody>tr:nth-child(odd)>th,form#movecourses table tbody>tr:nth-child(odd)>th,#page-admin-course-index .editcourse tbody>tr:nth-child(odd)>th,.forumheaderlist tbody>tr:nth-child(odd)>th,table.flexible tbody>tr:nth-child(odd)>th,.generaltable tbody>tr:nth-child(odd)>th{background-color:#f9f9f9}#page-report-loglive-index .generaltable th,#page-admin-report-log-index .generaltable th,#page-report-log-user .generaltable th,#page-admin-user table th,.environmenttable th,.category_subcategories th,.rcs-results th,table#listdirectories th,#page-report-loglive-index .generaltable td,#page-admin-report-log-index .generaltable td,#page-report-log-user .generaltable td,#page-admin-user table td,.environmenttable td,.category_subcategories td,.rcs-results td,table#listdirectories td{padding:4px 5px}.user-enroller-panel .uep-search-results .users tbody tr:hover>td,table.grading-report tbody tr:hover>td,.forumheaderlist tbody tr:hover>td,.generaltable tbody tr:hover>td,table.flexible tbody tr:hover>td,.category_subcategories tbody tr:hover>td,table#modules tbody tr:hover>td,table#permissions tbody tr:hover>td,.user-enroller-panel .uep-search-results .users tbody tr:hover>th,table.grading-report tbody tr:hover>th,.forumheaderlist tbody tr:hover>th,.generaltable tbody tr:hover>th,table.flexible tbody tr:hover>th,.category_subcategories tbody tr:hover>th,table#modules tbody tr:hover>th,table#permissions tbody tr:hover>th{background-color:#f5f5f5}div[id^=\"bar_pbar_\"]{height:20px!important;margin-bottom:20px!important;overflow:hidden!important;background-color:#f7f7f7!important;background-image:-moz-linear-gradient(top,#f5f5f5,#f9f9f9)!important;background-image:-webkit-gradient(linear,0 0,0 100%,from(#f5f5f5),to(#f9f9f9))!important;background-image:-webkit-linear-gradient(top,#f5f5f5,#f9f9f9)!important;background-image:-o-linear-gradient(top,#f5f5f5,#f9f9f9)!important;background-image:linear-gradient(to bottom,#f5f5f5,#f9f9f9)!important;background-repeat:repeat-x!important;border:none!important;-webkit-border-radius:4px!important;-moz-border-radius:4px!important;border-radius:4px!important;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#fff5f5f5',endColorstr='#fff9f9f9',GradientType=0)!important;-webkit-box-shadow:inset 0 1px 2px rgba(0,0,0,0.1)!important;-moz-box-shadow:inset 0 1px 2px rgba(0,0,0,0.1)!important;box-shadow:inset 0 1px 2px rgba(0,0,0,0.1)!important}div[id^=\"progress_pbar_\"]{float:left!important;height:100%!important;padding-top:0!important;font-size:12px!important;color:#fff!important;text-align:center!important;text-shadow:0 -1px 0 rgba(0,0,0,0.25)!important;background-color:#0e90d2!important;background-image:-moz-linear-gradient(top,#149bdf,#0480be)!important;background-image:-webkit-gradient(linear,0 0,0 100%,from(#149bdf),to(#0480be))!important;background-image:-webkit-linear-gradient(top,#149bdf,#0480be)!important;background-image:-o-linear-gradient(top,#149bdf,#0480be)!important;background-image:linear-gradient(to bottom,#149bdf,#0480be)!important;background-repeat:repeat-x!important;border:none!important;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ff149bdf',endColorstr='#ff0480be',GradientType=0)!important;-webkit-box-shadow:inset 0 -1px 0 rgba(0,0,0,0.15)!important;-moz-box-shadow:inset 0 -1px 0 rgba(0,0,0,0.15)!important;box-shadow:inset 0 -1px 0 rgba(0,0,0,0.15)!important;-webkit-box-sizing:border-box!important;-moz-box-sizing:border-box!important;box-sizing:border-box!important;-webkit-transition:width .6s ease!important;-moz-transition:width .6s ease!important;-o-transition:width .6s ease!important;transition:width .6s ease!important}input.form-submit,input#id_submitbutton,input#id_submitbutton2,.path-admin .buttons input[type=\"submit\"],td.submit input{color:#fff;text-shadow:0 -1px 0 rgba(0,0,0,0.25);background-color:#006dcc;*background-color:#04c;background-image:-moz-linear-gradient(top,#08c,#04c);background-image:-webkit-gradient(linear,0 0,0 100%,from(#08c),to(#04c));background-image:-webkit-linear-gradient(top,#08c,#04c);background-image:-o-linear-gradient(top,#08c,#04c);background-image:linear-gradient(to bottom,#08c,#04c);background-repeat:repeat-x;border-color:#04c #04c #002a80;border-color:rgba(0,0,0,0.1) rgba(0,0,0,0.1) rgba(0,0,0,0.25);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ff0088cc',endColorstr='#ff0044cc',GradientType=0);filter:progid:DXImageTransform.Microsoft.gradient(enabled=false)}input.form-submit:hover,input#id_submitbutton:hover,input#id_submitbutton2:hover,.path-admin .buttons input[type=\"submit\"]:hover,td.submit input:hover,input.form-submit:focus,input#id_submitbutton:focus,input#id_submitbutton2:focus,.path-admin .buttons input[type=\"submit\"]:focus,td.submit input:focus,input.form-submit:active,input#id_submitbutton:active,input#id_submitbutton2:active,.path-admin .buttons input[type=\"submit\"]:active,td.submit input:active,input.form-submit.active,input#id_submitbutton.active,input#id_submitbutton2.active,.path-admin .buttons input[type=\"submit\"].active,td.submit input.active,input.form-submit.disabled,input#id_submitbutton.disabled,input#id_submitbutton2.disabled,.path-admin .buttons input[type=\"submit\"].disabled,td.submit input.disabled,input.form-submit[disabled],input#id_submitbutton[disabled],input#id_submitbutton2[disabled],.path-admin .buttons input[type=\"submit\"][disabled],td.submit input[disabled]{color:#fff;background-color:#04c;*background-color:#003bb3}input.form-submit:active,input#id_submitbutton:active,input#id_submitbutton2:active,.path-admin .buttons input[type=\"submit\"]:active,td.submit input:active,input.form-submit.active,input#id_submitbutton.active,input#id_submitbutton2.active,.path-admin .buttons input[type=\"submit\"].active,td.submit input.active{background-color:#039 \\9}input.form-submit .caret,input#id_submitbutton .caret,input#id_submitbutton2 .caret,.path-admin .buttons input[type=\"submit\"] .caret,td.submit input .caret{border-top-color:#fff;border-bottom-color:#fff}#notice .singlebutton+.singlebutton input,.submit.buttons input[name=\"cancel\"]{display:inline-block;*display:inline;padding:4px 12px;margin-bottom:0;*margin-left:.3em;font-size:14px;line-height:20px;color:#333;text-align:center;text-shadow:0 1px 1px rgba(255,255,255,0.75);vertical-align:middle;cursor:pointer;background-color:#f5f5f5;*background-color:#e6e6e6;background-image:-moz-linear-gradient(top,#fff,#e6e6e6);background-image:-webkit-gradient(linear,0 0,0 100%,from(#fff),to(#e6e6e6));background-image:-webkit-linear-gradient(top,#fff,#e6e6e6);background-image:-o-linear-gradient(top,#fff,#e6e6e6);background-image:linear-gradient(to bottom,#fff,#e6e6e6);background-repeat:repeat-x;border:1px solid #ccc;*border:0;border-color:#e6e6e6 #e6e6e6 #bfbfbf;border-color:rgba(0,0,0,0.1) rgba(0,0,0,0.1) rgba(0,0,0,0.25);border-bottom-color:#b3b3b3;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffffff',endColorstr='#ffe6e6e6',GradientType=0);filter:progid:DXImageTransform.Microsoft.gradient(enabled=false);*zoom:1;-webkit-box-shadow:inset 0 1px 0 rgba(255,255,255,0.2),0 1px 2px rgba(0,0,0,0.05);-moz-box-shadow:inset 0 1px 0 rgba(255,255,255,0.2),0 1px 2px rgba(0,0,0,0.05);box-shadow:inset 0 1px 0 rgba(255,255,255,0.2),0 1px 2px rgba(0,0,0,0.05)}#notice .singlebutton+.singlebutton input:hover,.submit.buttons input[name=\"cancel\"]:hover,#notice .singlebutton+.singlebutton input:focus,.submit.buttons input[name=\"cancel\"]:focus,#notice .singlebutton+.singlebutton input:active,.submit.buttons input[name=\"cancel\"]:active,#notice .singlebutton+.singlebutton input.active,.submit.buttons input[name=\"cancel\"].active,#notice .singlebutton+.singlebutton input.disabled,.submit.buttons input[name=\"cancel\"].disabled,#notice .singlebutton+.singlebutton input[disabled],.submit.buttons input[name=\"cancel\"][disabled]{color:#333;background-color:#e6e6e6;*background-color:#d9d9d9}#notice .singlebutton+.singlebutton input:active,.submit.buttons input[name=\"cancel\"]:active,#notice .singlebutton+.singlebutton input.active,.submit.buttons input[name=\"cancel\"].active{background-color:#ccc \\9}#notice .singlebutton+.singlebutton input:first-child,.submit.buttons input[name=\"cancel\"]:first-child{*margin-left:0}#notice .singlebutton+.singlebutton input:hover,.submit.buttons input[name=\"cancel\"]:hover,#notice .singlebutton+.singlebutton input:focus,.submit.buttons input[name=\"cancel\"]:focus{color:#333;text-decoration:none;background-position:0 -15px;-webkit-transition:background-position .1s linear;-moz-transition:background-position .1s linear;-o-transition:background-position .1s linear;transition:background-position .1s linear}#notice .singlebutton+.singlebutton input:focus,.submit.buttons input[name=\"cancel\"]:focus{outline:thin dotted #333;outline:5px auto -webkit-focus-ring-color;outline-offset:-2px}#notice .singlebutton+.singlebutton input.active,.submit.buttons input[name=\"cancel\"].active,#notice .singlebutton+.singlebutton input:active,.submit.buttons input[name=\"cancel\"]:active{background-image:none;outline:0;-webkit-box-shadow:inset 0 2px 4px rgba(0,0,0,0.15),0 1px 2px rgba(0,0,0,0.05);-moz-box-shadow:inset 0 2px 4px rgba(0,0,0,0.15),0 1px 2px rgba(0,0,0,0.05);box-shadow:inset 0 2px 4px rgba(0,0,0,0.15),0 1px 2px rgba(0,0,0,0.05)}#notice .singlebutton+.singlebutton input.disabled,.submit.buttons input[name=\"cancel\"].disabled,#notice .singlebutton+.singlebutton input[disabled],.submit.buttons input[name=\"cancel\"][disabled]{cursor:default;background-image:none;opacity:.65;filter:alpha(opacity=65);-webkit-box-shadow:none;-moz-box-shadow:none;box-shadow:none}#notice .singlebutton+.singlebutton input .label,.submit.buttons input[name=\"cancel\"] .label,#notice .singlebutton+.singlebutton input .badge,.submit.buttons input[name=\"cancel\"] .badge{position:relative;top:-1px}#notice .singlebutton+.singlebutton input,.submit.buttons input[name=\"cancel\"]{margin:0 0 10px 5px}input[id$=\"_clearbutton\"],input[type=\"reset\"]{color:#fff;text-shadow:0 -1px 0 rgba(0,0,0,0.25);background-color:#faa732;*background-color:#f89406;background-image:-moz-linear-gradient(top,#fbb450,#f89406);background-image:-webkit-gradient(linear,0 0,0 100%,from(#fbb450),to(#f89406));background-image:-webkit-linear-gradient(top,#fbb450,#f89406);background-image:-o-linear-gradient(top,#fbb450,#f89406);background-image:linear-gradient(to bottom,#fbb450,#f89406);background-repeat:repeat-x;border-color:#f89406 #f89406 #ad6704;border-color:rgba(0,0,0,0.1) rgba(0,0,0,0.1) rgba(0,0,0,0.25);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#fffbb450',endColorstr='#fff89406',GradientType=0);filter:progid:DXImageTransform.Microsoft.gradient(enabled=false)}input[id$=\"_clearbutton\"]:hover,input[type=\"reset\"]:hover,input[id$=\"_clearbutton\"]:focus,input[type=\"reset\"]:focus,input[id$=\"_clearbutton\"]:active,input[type=\"reset\"]:active,input[id$=\"_clearbutton\"].active,input[type=\"reset\"].active,input[id$=\"_clearbutton\"].disabled,input[type=\"reset\"].disabled,input[id$=\"_clearbutton\"][disabled],input[type=\"reset\"][disabled]{color:#fff;background-color:#f89406;*background-color:#df8505}input[id$=\"_clearbutton\"]:active,input[type=\"reset\"]:active,input[id$=\"_clearbutton\"].active,input[type=\"reset\"].active{background-color:#c67605 \\9}input[id$=\"_clearbutton\"] .caret,input[type=\"reset\"] .caret{border-top-color:#fff;border-bottom-color:#fff}\n"], "label": 0, "cve": "CVE-2013-5674", "rank": 22, "commit": "4e0a41305d90ade72affa45fffbfed3d0d1fc012", "cve_attention_tokens": []}
{"cve_desc": "The package locutus before 2.0.15 are vulnerable to Regular Expression Denial of Service (ReDoS) via the gopher_parsedir function.", "commit_msg": "Update web sources\n\n", "diff": ["diff --git a/website/source/c/stdio/sprintf.html b/website/source/c/stdio/sprintf.html\nindex 98f5d40d9..0fd1b2755 100644\n--- a/website/source/c/stdio/sprintf.html\n+++ b/website/source/c/stdio/sprintf.html\n@@ -46,7 +46,7 @@ module.exports = function sprintf (format, ...args) {\n \n     // flag '0' is ignored when flag '-' is present\n     const padChar = leftJustify ? ' '\n-                      : flags.split('').reduce((pc, c) => [' ', '0'].includes(c) ? c : pc, ' ')\n+      : flags.split('').reduce((pc, c) => [' ', '0'].includes(c) ? c : pc, ' ')\n \n     const positiveSign = flags.includes('+') ? '+' : flags.includes(' ') ? ' ' : ''\n \n@@ -54,11 +54,11 @@ module.exports = function sprintf (format, ...args) {\n     let precision = prec === '*' ? args[index++] : +prec\n \n     if (param && !+param) {\n-      throw Error(`Param index must be greater than 0`)\n+      throw Error('Param index must be greater than 0')\n     }\n \n     if (param && +param > args.length) {\n-      throw Error(`Too few arguments`)\n+      throw Error('Too few arguments')\n     }\n \n     // compiling with default clang params, mixed positional and non-positional params\n@@ -109,7 +109,7 @@ module.exports = function sprintf (format, ...args) {\n \n         const isSpecial = isNaN(abs) || !isFinite(abs)\n \n-        let str = isSpecial ? abs.toString().substr(0, 3) : op.call(abs, precision)\n+        const str = isSpecial ? abs.toString().substr(0, 3) : op.call(abs, precision)\n \n         if (padChar === '0' && !isSpecial) {\n           return prefix + pad(tr.call(str), minWidth - prefix.length, padChar, leftJustify)\n", "diff --git a/website/source/golang/strings/Count.html b/website/source/golang/strings/Count.html\nindex 3d69af8e8..c4a688d16 100644\n--- a/website/source/golang/strings/Count.html\n+++ b/website/source/golang/strings/Count.html\n@@ -39,8 +39,8 @@ alias:\n   //   example 2: Count(\"five\", \"\") // before & after each rune\n   //   returns 2: 5\n \n-  var pos\n-  var n = 0\n+  let pos\n+  let n = 0\n \n   if ((sep.length === 0)) {\n     return s.split(sep).length + 1\n", "diff --git a/website/source/golang/strings/Index.html b/website/source/golang/strings/Index.html\nindex 9c724856d..89b3cf118 100644\n--- a/website/source/golang/strings/Index.html\n+++ b/website/source/golang/strings/Index.html\n@@ -1,8 +1,41 @@\n ---\n warning: 'This file is auto generated by `npm run web:inject`, do not edit by hand'\n-type: category\n-layout: category\n-language: golang\n+examples:\n+  - 'Index(''Kevin'', ''K'')'\n+  - 'Index(''Kevin'', ''Z'')'\n+estarget: es5\n+returns:\n+  - '0'\n+  - '-1'\n+dependencies: []\n+authors:\n+  original by:\n+    - 'Kevin van Zonneveld (https://kvz.io)'\n+notes: []\n+type: function\n+layout: function\n+title: Go's strings.Index in JavaScript\n+description: >-\n+  Here\u2019s what our current JavaScript equivalent to <a\n+  href=\"https://golang.org/pkg/strings/#Index\">Go's strings.Index</a> looks\n+  like.\n+function: Index\n category: strings\n-title: Go's strings package  in JavaScript\n+language: golang\n+permalink: golang/strings/Index/\n+alias:\n+  - /functions/golang/Index/\n+  - /functions/strings/Index/\n+  - /golang/Index/\n ---\n+{% codeblock lang:javascript %}module.exports = function Index (s, sep) {\n+  //  discuss at: https://locutus.io/golang/strings/Index\n+  // original by: Kevin van Zonneveld (https://kvz.io)\n+  //   example 1: Index('Kevin', 'K')\n+  //   returns 1: 0\n+  //   example 2: Index('Kevin', 'Z')\n+  //   returns 2: -1\n+\n+  return (s + '').indexOf(sep)\n+}\n+{% endcodeblock %}\n\\ No newline at end of file\n", "diff --git a/website/source/php/_helpers/_bc.html b/website/source/php/_helpers/_bc.html\nindex 3628c1415..e387ec00a 100644\n--- a/website/source/php/_helpers/_bc.html\n+++ b/website/source/php/_helpers/_bc.html\n@@ -98,11 +98,11 @@ alias:\n       this.n_sign = null // sign\n       this.n_len = null // (int) The number of digits before the decimal point.\n       this.n_scale = null // (int) The number of digits after the decimal point.\n-        // this.n_refs = null; // (int) The number of pointers to this number.\n-        // this.n_text = null; // ?? Linked list for available list.\n+      // this.n_refs = null; // (int) The number of pointers to this number.\n+      // this.n_text = null; // ?? Linked list for available list.\n       this.n_value = null // array as value, where 1.23 = [1,2,3]\n       this.toString = function () {\n-        var r, tmp\n+        let r, tmp\n         tmp = this.n_value.join('')\n \n         // add minus sign (if applicable) then add the integer part\n@@ -129,7 +129,7 @@ alias:\n      * @return bc_num\n      */\n     bc_add: function (n1, n2, scaleMin) {\n-      var sum, cmpRes, resScale\n+      let sum, cmpRes, resScale\n \n       if (n1.n_sign === n2.n_sign) {\n         sum = Libbcmath._bc_do_add(n1, n2, scaleMin)\n@@ -170,8 +170,8 @@ alias:\n     },\n \n     _one_mult: function (num, nPtr, size, digit, result, rPtr) {\n-      var carry, value // int\n-      var nptr, rptr // int pointers\n+      let carry, value // int\n+      let nptr, rptr // int pointers\n       if (digit === 0) {\n         Libbcmath.memset(result, 0, 0, size) // memset (result, 0, size);\n       } else {\n@@ -197,15 +197,15 @@ alias:\n \n     bc_divide: function (n1, n2, scale) {\n       // var quot // bc_num return\n-      var qval // bc_num\n-      var num1, num2 // string\n-      var ptr1, ptr2, n2ptr, qptr // int pointers\n-      var scale1, val // int\n-      var len1, len2, scale2, qdigits, extra, count // int\n-      var qdig, qguess, borrow, carry // int\n-      var mval // string\n-      var zero // char\n-      var norm // int\n+      let qval // bc_num\n+      let num1, num2 // string\n+      let ptr1, ptr2, n2ptr, qptr // int pointers\n+      let scale1, val // int\n+      let len1, len2, scale2, qdigits, extra, count // int\n+      let qdig, qguess, borrow, carry // int\n+      let mval // string\n+      let zero // char\n+      let norm // int\n       // var ptrs // return object from one_mul\n       // Test for divide by zero. (return failure)\n       if (Libbcmath.bc_is_zero(n2)) {\n@@ -305,7 +305,7 @@ alias:\n       qval = Libbcmath.bc_new_num(qdigits - scale, scale)\n       // memset (qval->n_value, 0, qdigits);\n       Libbcmath.memset(qval.n_value, 0, 0, qdigits)\n-        // Allocate storage for the temporary storage mval.\n+      // Allocate storage for the temporary storage mval.\n       // mval = (unsigned char *) safe_emalloc (1, len2, 1);\n       mval = Libbcmath.safe_emalloc(1, len2, 1)\n       if (mval === null) {\n@@ -451,10 +451,10 @@ alias:\n      * @param scale [int] optional\n      */\n     bc_multiply: function (n1, n2, scale) {\n-      var pval // bc_num\n-      var len1, len2 // int\n-      var fullScale, prodScale // int\n-        // Initialize things.\n+      let pval // bc_num\n+      let len1, len2 // int\n+      let fullScale, prodScale // int\n+      // Initialize things.\n       len1 = n1.n_len + n1.n_scale\n       len2 = n2.n_len + n2.n_scale\n       fullScale = n1.n_scale + n2.n_scale\n@@ -468,7 +468,7 @@ alias:\n \n       // Assign to prod and clean up the number.\n       pval.n_sign = (n1.n_sign === n2.n_sign ? Libbcmath.PLUS : Libbcmath.MINUS)\n-        // pval.n_value = pval.nPtr;\n+      // pval.n_value = pval.nPtr;\n       pval.n_len = len2 + len1 + 1 - fullScale\n       pval.n_scale = prodScale\n       Libbcmath._bc_rm_leading_zeros(pval)\n@@ -480,7 +480,7 @@ alias:\n     },\n \n     new_sub_num: function (length, scale, value, ptr = 0) {\n-      var temp = new Libbcmath.bc_num() // eslint-disable-line new-cap\n+      const temp = new Libbcmath.bc_num() // eslint-disable-line new-cap\n       temp.n_sign = Libbcmath.PLUS\n       temp.n_len = length\n       temp.n_scale = scale\n@@ -490,10 +490,10 @@ alias:\n     },\n \n     _bc_simp_mul: function (n1, n1len, n2, n2len, fullScale) {\n-      var prod // bc_num\n-      var n1ptr, n2ptr, pvptr // char *n1ptr, *n2ptr, *pvptr;\n-      var n1end, n2end // char *n1end, *n2end;        // To the end of n1 and n2.\n-      var indx, sum, prodlen // int indx, sum, prodlen;\n+      let prod // bc_num\n+      let n1ptr, n2ptr, pvptr // char *n1ptr, *n2ptr, *pvptr;\n+      let n1end, n2end // char *n1end, *n2end;        // To the end of n1 and n2.\n+      let indx, sum, prodlen // int indx, sum, prodlen;\n       prodlen = n1len + n2len + 1\n \n       prod = Libbcmath.bc_new_num(prodlen, 0)\n@@ -526,8 +526,8 @@ alias:\n        be larger that what is being subtracted.  Also, accum and val\n        must have n_scale = 0.  (e.g. they must look like integers. *) */\n     _bc_shift_addsub: function (accum, val, shift, sub) {\n-      var accp, valp // signed char *accp, *valp;\n-      var count, carry // int  count, carry;\n+      let accp, valp // signed char *accp, *valp;\n+      let count, carry // int  count, carry;\n       count = val.n_len\n       if (val.n_value[0] === 0) {\n         count--\n@@ -596,14 +596,14 @@ alias:\n        B is the base of storage, number of digits in u1,u0 close to equal.\n     */\n     _bc_rec_mul: function (u, ulen, v, vlen, fullScale) {\n-      var prod // @return\n-      var u0, u1, v0, v1 // bc_num\n+      let prod // @return\n+      let u0, u1, v0, v1 // bc_num\n       // var u0len,\n       // var v0len // int\n-      var m1, m2, m3, d1, d2 // bc_num\n-      var n, prodlen, m1zero // int\n-      var d1len, d2len // int\n-        // Base case?\n+      let m1, m2, m3, d1, d2 // bc_num\n+      let n, prodlen, m1zero // int\n+      let d1len, d2len // int\n+      // Base case?\n       if ((ulen + vlen) < Libbcmath.MUL_BASE_DIGITS ||\n         ulen < Libbcmath.MUL_SMALL_DIGITS ||\n         vlen < Libbcmath.MUL_SMALL_DIGITS) {\n@@ -680,16 +680,16 @@ alias:\n       Libbcmath._bc_shift_addsub(prod, m2, n, d1.n_sign !== d2.n_sign)\n \n       return prod\n-        // Now clean up!\n-        // bc_free_num (&u1);\n-        // bc_free_num (&u0);\n-        // bc_free_num (&v1);\n-        // bc_free_num (&m1);\n-        // bc_free_num (&v0);\n-        // bc_free_num (&m2);\n-        // bc_free_num (&m3);\n-        // bc_free_num (&d1);\n-        // bc_free_num (&d2);\n+      // Now clean up!\n+      // bc_free_num (&u1);\n+      // bc_free_num (&u0);\n+      // bc_free_num (&v1);\n+      // bc_free_num (&m1);\n+      // bc_free_num (&v0);\n+      // bc_free_num (&m2);\n+      // bc_free_num (&m3);\n+      // bc_free_num (&d1);\n+      // bc_free_num (&d2);\n     },\n \n     /**\n@@ -701,9 +701,9 @@ alias:\n      * @return -1, 0, 1 (see bc_compare)\n      */\n     _bc_do_compare: function (n1, n2, useSign, ignoreLast) {\n-      var n1ptr, n2ptr // int\n-      var count // int\n-        // First, compare signs.\n+      let n1ptr, n2ptr // int\n+      let count // int\n+      // First, compare signs.\n       if (useSign && (n1.n_sign !== n2.n_sign)) {\n         if (n1.n_sign === Libbcmath.PLUS) {\n           return (1) // Positive N1 > Negative N2\n@@ -794,8 +794,8 @@ alias:\n    N2 is subtracted from N1 and the result placed in RESULT.  SCALE_MIN\n    is the minimum scale for the result. */\n     bc_sub: function (n1, n2, scaleMin) {\n-      var diff // bc_num\n-      var cmpRes, resScale // int\n+      let diff // bc_num\n+      let cmpRes, resScale // int\n       if (n1.n_sign !== n2.n_sign) {\n         diff = Libbcmath._bc_do_add(n1, n2, scaleMin)\n         diff.n_sign = n1.n_sign\n@@ -829,11 +829,11 @@ alias:\n     },\n \n     _bc_do_add: function (n1, n2, scaleMin) {\n-      var sum // bc_num\n-      var sumScale, sumDigits // int\n-      var n1ptr, n2ptr, sumptr // int\n-      var carry, n1bytes, n2bytes // int\n-      var tmp // int\n+      let sum // bc_num\n+      let sumScale, sumDigits // int\n+      let n1ptr, n2ptr, sumptr // int\n+      let carry, n1bytes, n2bytes // int\n+      let tmp // int\n \n       // Prepare sum.\n       sumScale = Libbcmath.MAX(n1.n_scale, n2.n_scale)\n@@ -854,14 +854,14 @@ alias:\n           // n1 has more dp then n2\n           while (n1bytes > n2bytes) {\n             sum.n_value[sumptr--] = n1.n_value[n1ptr--]\n-              // *sumptr-- = *n1ptr--;\n+            // *sumptr-- = *n1ptr--;\n             n1bytes--\n           }\n         } else {\n           // n2 has more dp then n1\n           while (n2bytes > n1bytes) {\n             sum.n_value[sumptr--] = n2.n_value[n2ptr--]\n-              // *sumptr-- = *n2ptr--;\n+            // *sumptr-- = *n2ptr--;\n             n2bytes--\n           }\n         }\n@@ -874,8 +874,8 @@ alias:\n       while ((n1bytes > 0) && (n2bytes > 0)) {\n         // add the two numbers together\n         tmp = n1.n_value[n1ptr--] + n2.n_value[n2ptr--] + carry\n-          // *sumptr = *n1ptr-- + *n2ptr-- + carry;\n-          // check if they are >= 10 (impossible to be more then 18)\n+        // *sumptr = *n1ptr-- + *n2ptr-- + carry;\n+        // check if they are >= 10 (impossible to be more then 18)\n         if (tmp >= Libbcmath.BASE) {\n           carry = 1\n           tmp -= Libbcmath.BASE // yep, subtract 10, add a carry\n@@ -893,7 +893,7 @@ alias:\n         // n2 is a bigger number then n1\n         while (n2bytes-- > 0) {\n           tmp = n2.n_value[n2ptr--] + carry\n-            // *sumptr = *n2ptr-- + carry;\n+          // *sumptr = *n2ptr-- + carry;\n           if (tmp >= Libbcmath.BASE) {\n             carry = 1\n             tmp -= Libbcmath.BASE\n@@ -906,7 +906,7 @@ alias:\n         // n1 is bigger then n2..\n         while (n1bytes-- > 0) {\n           tmp = n1.n_value[n1ptr--] + carry\n-            // *sumptr = *n1ptr-- + carry;\n+          // *sumptr = *n1ptr-- + carry;\n           if (tmp >= Libbcmath.BASE) {\n             carry = 1\n             tmp -= Libbcmath.BASE\n@@ -920,7 +920,7 @@ alias:\n       // Set final carry.\n       if (carry === 1) {\n         sum.n_value[sumptr] += 1\n-          // *sumptr += 1;\n+        // *sumptr += 1;\n       }\n \n       // Adjust sum and return.\n@@ -948,12 +948,12 @@ alias:\n      * @return bc_num\n      */\n     _bc_do_sub: function (n1, n2, scaleMin) {\n-      var diff // bc_num\n-      var diffScale, diffLen // int\n-      var minScale, minLen // int\n-      var n1ptr, n2ptr, diffptr // int\n-      var borrow, count, val // int\n-        // Allocate temporary storage.\n+      let diff // bc_num\n+      let diffScale, diffLen // int\n+      let minScale, minLen // int\n+      let n1ptr, n2ptr, diffptr // int\n+      let borrow, count, val // int\n+      // Allocate temporary storage.\n       diffLen = Libbcmath.MAX(n1.n_len, n2.n_len)\n       diffScale = Libbcmath.MAX(n1.n_scale, n2.n_scale)\n       minLen = Libbcmath.MIN(n1.n_len, n2.n_len)\n@@ -983,13 +983,13 @@ alias:\n         // n1 has the longer scale\n         for (count = n1.n_scale - minScale; count > 0; count--) {\n           diff.n_value[diffptr--] = n1.n_value[n1ptr--]\n-            // *diffptr-- = *n1ptr--;\n+          // *diffptr-- = *n1ptr--;\n         }\n       } else {\n         // n2 has the longer scale\n         for (count = n2.n_scale - minScale; count > 0; count--) {\n           val = 0 - n2.n_value[n2ptr--] - borrow\n-            // val = - *n2ptr-- - borrow;\n+          // val = - *n2ptr-- - borrow;\n           if (val < 0) {\n             val += Libbcmath.BASE\n             borrow = 1\n@@ -997,14 +997,14 @@ alias:\n             borrow = 0\n           }\n           diff.n_value[diffptr--] = val\n-            //* diffptr-- = val;\n+          //* diffptr-- = val;\n         }\n       }\n \n       // Now do the equal length scale and integer parts.\n       for (count = 0; count < minLen + minScale; count++) {\n         val = n1.n_value[n1ptr--] - n2.n_value[n2ptr--] - borrow\n-          // val = *n1ptr-- - *n2ptr-- - borrow;\n+        // val = *n1ptr-- - *n2ptr-- - borrow;\n         if (val < 0) {\n           val += Libbcmath.BASE\n           borrow = 1\n@@ -1012,14 +1012,14 @@ alias:\n           borrow = 0\n         }\n         diff.n_value[diffptr--] = val\n-          //* diffptr-- = val;\n+        //* diffptr-- = val;\n       }\n \n       // If n1 has more digits then n2, we now do that subtract.\n       if (diffLen !== minLen) {\n         for (count = diffLen - minLen; count > 0; count--) {\n           val = n1.n_value[n1ptr--] - borrow\n-            // val = *n1ptr-- - borrow;\n+          // val = *n1ptr-- - borrow;\n           if (val < 0) {\n             val += Libbcmath.BASE\n             borrow = 1\n@@ -1042,7 +1042,7 @@ alias:\n      * @return bc_num\n      */\n     bc_new_num: function (length, scale) {\n-      var temp // bc_num\n+      let temp // bc_num\n       temp = new Libbcmath.bc_num() // eslint-disable-line new-cap\n       temp.n_sign = Libbcmath.PLUS\n       temp.n_len = length\n@@ -1075,7 +1075,7 @@ alias:\n      * Convert to bc_num detecting scale\n      */\n     php_str2num: function (str) {\n-      var p\n+      let p\n       p = str.indexOf('.')\n       if (p === -1) {\n         return Libbcmath.bc_str2num(str, 0)\n@@ -1097,9 +1097,9 @@ alias:\n     },\n \n     bc_str2num: function (strIn, scale) {\n-      var str, num, ptr, digits, strscale, zeroInt, nptr\n-        // remove any non-expected characters\n-        // Check for valid number and count digits.\n+      let str, num, ptr, digits, strscale, zeroInt, nptr\n+      // remove any non-expected characters\n+      // Check for valid number and count digits.\n \n       str = strIn.split('') // convert to array\n       ptr = 0 // str\n@@ -1130,7 +1130,7 @@ alias:\n       if ((str[ptr]) || (digits + strscale === 0)) {\n         // invalid number, return 0\n         return Libbcmath.bc_init_num()\n-          //* num = bc_copy_num (BCG(_zero_));\n+        //* num = bc_copy_num (BCG(_zero_));\n       }\n \n       // Adjust numbers and allocate storage and initialize fields.\n@@ -1146,11 +1146,11 @@ alias:\n       ptr = 0 // str\n       if (str[ptr] === '-') {\n         num.n_sign = Libbcmath.MINUS\n-          // (*num)->n_sign = MINUS;\n+        // (*num)->n_sign = MINUS;\n         ptr++\n       } else {\n         num.n_sign = Libbcmath.PLUS\n-          // (*num)->n_sign = PLUS;\n+        // (*num)->n_sign = PLUS;\n         if (str[ptr] === '+') {\n           ptr++\n         }\n@@ -1166,7 +1166,7 @@ alias:\n       }\n       for (; digits > 0; digits--) {\n         num.n_value[nptr++] = Libbcmath.CH_VAL(str[ptr++])\n-          //* nptr++ = CH_VAL(*ptr++);\n+        //* nptr++ = CH_VAL(*ptr++);\n       }\n \n       // Build the fractional part.\n@@ -1184,7 +1184,7 @@ alias:\n       if (typeof v === 'undefined') {\n         v = 0\n       }\n-      var x = parseInt(v, 10)\n+      let x = parseInt(v, 10)\n       if (isNaN(x)) {\n         x = 0\n       }\n@@ -1225,7 +1225,7 @@ alias:\n      * @param {int} len       length to fill\n      */\n     memset: function (r, ptr, chr, len) {\n-      var i\n+      let i\n       for (i = 0; i < len; i++) {\n         r[ptr + i] = chr\n       }\n@@ -1238,7 +1238,7 @@ alias:\n      * Also only works on arrays\n      */\n     memcpy: function (dest, ptr, src, srcptr, len) {\n-      var i\n+      let i\n       for (i = 0; i < len; i++) {\n         dest[ptr + i] = src[srcptr + i]\n       }\n@@ -1251,8 +1251,8 @@ alias:\n      * @return boolean      true when zero, false when not zero.\n      */\n     bc_is_zero: function (num) {\n-      var count // int\n-      var nptr // int\n+      let count // int\n+      let nptr // int\n       // Quick check.\n       // if (num === BCG(_zero_)) return TRUE;\n       // Initialize\n", "diff --git a/website/source/php/_helpers/_phpCastString.html b/website/source/php/_helpers/_phpCastString.html\nindex 253279576..e0c1a9d3d 100644\n--- a/website/source/php/_helpers/_phpCastString.html\n+++ b/website/source/php/_helpers/_phpCastString.html\n@@ -80,7 +80,7 @@ alias:\n   //   example 13: _phpCastString(3.14)\n   //   returns 13: '3.14'\n \n-  var type = typeof value\n+  const type = typeof value\n \n   switch (type) {\n     case 'boolean':\n", "diff --git a/website/source/php/_helpers/_php_cast_float.html b/website/source/php/_helpers/_php_cast_float.html\nnew file mode 100644\nindex 000000000..2889812bc\n--- /dev/null\n+++ b/website/source/php/_helpers/_php_cast_float.html\n@@ -0,0 +1,102 @@\n+---\n+warning: 'This file is auto generated by `npm run web:inject`, do not edit by hand'\n+examples:\n+  - _php_cast_float(false)\n+  - _php_cast_float(true)\n+  - _php_cast_float(0)\n+  - _php_cast_float(1)\n+  - _php_cast_float(3.14)\n+  - _php_cast_float('')\n+  - _php_cast_float('0')\n+  - _php_cast_float('abc')\n+  - _php_cast_float(null)\n+  - _php_cast_float(undefined)\n+  - _php_cast_float('123abc')\n+  - _php_cast_float('123e4')\n+  - _php_cast_float(0x200000001)\n+  - _php_cast_float('3.14abc')\n+estarget: es5\n+returns:\n+  - '0'\n+  - '1'\n+  - '0'\n+  - '1'\n+  - '3.14'\n+  - '0'\n+  - '0'\n+  - '0'\n+  - '0'\n+  - '0'\n+  - '123'\n+  - '1230000'\n+  - '8589934593'\n+  - '3.14'\n+dependencies: []\n+authors:\n+  original by:\n+    - Rafa\u0142 Kukawski\n+notes: []\n+type: function\n+layout: function\n+title: PHP's _php_cast_float in JavaScript\n+description: >-\n+  Here\u2019s what our current JavaScript equivalent to <a\n+  href=\"https://php.net/manual/en/function.-php-cast-float.php\">PHP's\n+  _php_cast_float</a> looks like.\n+function: _php_cast_float\n+category: _helpers\n+language: php\n+permalink: php/_helpers/_php_cast_float/\n+alias:\n+  - /functions/php/_php_cast_float/\n+  - /functions/_helpers/_php_cast_float/\n+  - /php/_php_cast_float/\n+  - /functions/_php_cast_float/\n+---\n+{% codeblock lang:javascript %}module.exports = function _php_cast_float (value) { // eslint-disable-line camelcase\n+  // original by: Rafa\u0142 Kukawski\n+  //   example 1: _php_cast_float(false)\n+  //   returns 1: 0\n+  //   example 2: _php_cast_float(true)\n+  //   returns 2: 1\n+  //   example 3: _php_cast_float(0)\n+  //   returns 3: 0\n+  //   example 4: _php_cast_float(1)\n+  //   returns 4: 1\n+  //   example 5: _php_cast_float(3.14)\n+  //   returns 5: 3.14\n+  //   example 6: _php_cast_float('')\n+  //   returns 6: 0\n+  //   example 7: _php_cast_float('0')\n+  //   returns 7: 0\n+  //   example 8: _php_cast_float('abc')\n+  //   returns 8: 0\n+  //   example 9: _php_cast_float(null)\n+  //   returns 9: 0\n+  //  example 10: _php_cast_float(undefined)\n+  //  returns 10: 0\n+  //  example 11: _php_cast_float('123abc')\n+  //  returns 11: 123\n+  //  example 12: _php_cast_float('123e4')\n+  //  returns 12: 1230000\n+  //  example 13: _php_cast_float(0x200000001)\n+  //  returns 13: 8589934593\n+  //  example 14: _php_cast_float('3.14abc')\n+  //  returns 14: 3.14\n+\n+  const type = typeof value\n+\n+  switch (type) {\n+    case 'number':\n+      return value\n+    case 'string':\n+      return parseFloat(value) || 0\n+    case 'boolean':\n+      // fall through\n+    default:\n+      // PHP docs state, that for types other than string\n+      // conversion is {input type}->int->float\n+      return require('./_php_cast_int')(value)\n+  }\n+}\n+{% endcodeblock %}\n\\ No newline at end of file\n", "diff --git a/website/source/php/_helpers/_php_cast_int.html b/website/source/php/_helpers/_php_cast_int.html\nindex ddb774450..4b8ac6685 100644\n--- a/website/source/php/_helpers/_php_cast_int.html\n+++ b/website/source/php/_helpers/_php_cast_int.html\n@@ -80,7 +80,7 @@ alias:\n   //  example 13: _php_cast_int(0x200000001)\n   //  returns 13: 8589934593\n \n-  var type = typeof value\n+  const type = typeof value\n \n   switch (type) {\n     case 'number':\n", "diff --git a/website/source/php/array/array_change_key_case.html b/website/source/php/array/array_change_key_case.html\nindex 716f3e172..cfe0887b1 100644\n--- a/website/source/php/array/array_change_key_case.html\n+++ b/website/source/php/array/array_change_key_case.html\n@@ -58,9 +58,9 @@ alias:\n   //   example 6: array_change_key_case({ FuBaR: 42 }, 2)\n   //   returns 6: {\"FUBAR\": 42}\n \n-  var caseFnc\n-  var key\n-  var tmpArr = {}\n+  let caseFnc\n+  let key\n+  const tmpArr = {}\n \n   if (Object.prototype.toString.call(array) === '[object Array]') {\n     return array\n", "diff --git a/website/source/php/array/array_chunk.html b/website/source/php/array/array_chunk.html\nindex 800e0751e..20a51234e 100644\n--- a/website/source/php/array/array_chunk.html\n+++ b/website/source/php/array/array_chunk.html\n@@ -26,8 +26,8 @@ layout: function\n title: PHP's array_chunk in JavaScript\n description: >-\n   Here\u2019s what our current JavaScript equivalent to <a\n-  href=\"https://php.net/manual/en/function.array-chunk.php\">PHP's array_chunk</a>\n-  looks like.\n+  href=\"https://php.net/manual/en/function.array-chunk.php\">PHP's\n+  array_chunk</a> looks like.\n function: array_chunk\n category: array\n language: php\n@@ -53,12 +53,12 @@ alias:\n   //   example 4: array_chunk({1:'Kevin', 2:'van', 3:'Zonneveld'}, 2, true)\n   //   returns 4: [{1: 'Kevin', 2: 'van'}, {3: 'Zonneveld'}]\n \n-  var x\n-  var p = ''\n-  var i = 0\n-  var c = -1\n-  var l = input.length || 0\n-  var n = []\n+  let x\n+  let p = ''\n+  let i = 0\n+  let c = -1\n+  const l = input.length || 0\n+  const n = []\n \n   if (size < 1) {\n     return null\n", "diff --git a/website/source/php/array/array_column.html b/website/source/php/array/array_column.html\nnew file mode 100644\nindex 000000000..03739a292\n--- /dev/null\n+++ b/website/source/php/array/array_column.html\n@@ -0,0 +1,87 @@\n+---\n+warning: 'This file is auto generated by `npm run web:inject`, do not edit by hand'\n+examples:\n+  - >-\n+    array_column([{name: 'Alex', value: 1}, {name: 'Elvis', value: 2}, {name:\n+    'Michael', value: 3}], 'name')\n+  - >-\n+    array_column({0: {name: 'Alex', value: 1}, 1: {name: 'Elvis', value: 2}, 2:\n+    {name: 'Michael', value: 3}}, 'name')\n+  - >-\n+    array_column([{name: 'Alex', value: 1}, {name: 'Elvis', value: 2}, {name:\n+    'Michael', value: 3}], 'name', 'value')\n+  - >-\n+    array_column([{name: 'Alex', value: 1}, {name: 'Elvis', value: 2}, {name:\n+    'Michael', value: 3}], null, 'value')\n+estarget: es5\n+returns:\n+  - '{0: \"Alex\", 1: \"Elvis\", 2: \"Michael\"}'\n+  - '{0: \"Alex\", 1: \"Elvis\", 2: \"Michael\"}'\n+  - '{1: \"Alex\", 2: \"Elvis\", 3: \"Michael\"}'\n+  - >-\n+    {1: {name: 'Alex', value: 1}, 2: {name: 'Elvis', value: 2}, 3: {name:\n+    'Michael', value: 3}}\n+dependencies: []\n+authors:\n+  original by:\n+    - Enzo Da\u00f1obeyt\u00eda\n+notes: []\n+type: function\n+layout: function\n+title: PHP's array_column in JavaScript\n+description: >-\n+  Here\u2019s what our current JavaScript equivalent to <a\n+  href=\"https://php.net/manual/en/function.array-column.php\">PHP's\n+  array_column</a> looks like.\n+function: array_column\n+category: array\n+language: php\n+permalink: php/array/array_column/\n+alias:\n+  - /functions/php/array_column/\n+  - /functions/array/array_column/\n+  - /php/array_column/\n+  - /functions/array_column/\n+---\n+{% codeblock lang:javascript %}module.exports = function array_column (input, ColumnKey, IndexKey = null) { // eslint-disable-line camelcase\n+  //   discuss at: https://locutus.io/php/array_column/\n+  //   original by: Enzo Da\u00f1obeyt\u00eda\n+  //   example 1: array_column([{name: 'Alex', value: 1}, {name: 'Elvis', value: 2}, {name: 'Michael', value: 3}], 'name')\n+  //   returns 1: {0: \"Alex\", 1: \"Elvis\", 2: \"Michael\"}\n+  //   example 2: array_column({0: {name: 'Alex', value: 1}, 1: {name: 'Elvis', value: 2}, 2: {name: 'Michael', value: 3}}, 'name')\n+  //   returns 2: {0: \"Alex\", 1: \"Elvis\", 2: \"Michael\"}\n+  //   example 3: array_column([{name: 'Alex', value: 1}, {name: 'Elvis', value: 2}, {name: 'Michael', value: 3}], 'name', 'value')\n+  //   returns 3: {1: \"Alex\", 2: \"Elvis\", 3: \"Michael\"}\n+  //   example 4: array_column([{name: 'Alex', value: 1}, {name: 'Elvis', value: 2}, {name: 'Michael', value: 3}], null, 'value')\n+  //   returns 4: {1: {name: 'Alex', value: 1}, 2: {name: 'Elvis', value: 2}, 3: {name: 'Michael', value: 3}}\n+\n+  if (input !== null && (typeof input === 'object' || Array.isArray(input))) {\n+    const newarray = []\n+    if (typeof input === 'object') {\n+      const temparray = []\n+      for (const key of Object.keys(input)) {\n+        temparray.push(input[key])\n+      }\n+      input = temparray\n+    }\n+    if (Array.isArray(input)) {\n+      for (const key of input.keys()) {\n+        if (IndexKey && input[key][IndexKey]) {\n+          if (ColumnKey) {\n+            newarray[input[key][IndexKey]] = input[key][ColumnKey]\n+          } else {\n+            newarray[input[key][IndexKey]] = input[key]\n+          }\n+        } else {\n+          if (ColumnKey) {\n+            newarray.push(input[key][ColumnKey])\n+          } else {\n+            newarray.push(input[key])\n+          }\n+        }\n+      }\n+    }\n+    return Object.assign({}, newarray)\n+  }\n+}\n+{% endcodeblock %}\n\\ No newline at end of file\n", "diff --git a/website/source/php/array/array_combine.html b/website/source/php/array/array_combine.html\nindex 005e64307..2e851bac6 100644\n--- a/website/source/php/array/array_combine.html\n+++ b/website/source/php/array/array_combine.html\n@@ -36,8 +36,8 @@ alias:\n   //   example 1: array_combine([0,1,2], ['kevin','van','zonneveld'])\n   //   returns 1: {0: 'kevin', 1: 'van', 2: 'zonneveld'}\n \n-  var newArray = {}\n-  var i = 0\n+  const newArray = {}\n+  let i = 0\n \n   // input sanitation\n   // Only accept arrays or array-like objects\n", "diff --git a/website/source/php/array/array_count_values.html b/website/source/php/array/array_count_values.html\nindex 14a2116be..623ba0abe 100644\n--- a/website/source/php/array/array_count_values.html\n+++ b/website/source/php/array/array_count_values.html\n@@ -54,13 +54,13 @@ alias:\n   //   example 3: array_count_values([ true, 4.2, 42, \"fubar\" ])\n   //   returns 3: {42:1, \"fubar\":1}\n \n-  var tmpArr = {}\n-  var key = ''\n-  var t = ''\n+  const tmpArr = {}\n+  let key = ''\n+  let t = ''\n \n-  var _getType = function (obj) {\n+  const _getType = function (obj) {\n     // Objects are php associative arrays.\n-    var t = typeof obj\n+    let t = typeof obj\n     t = t.toLowerCase()\n     if (t === 'object') {\n       t = 'array'\n@@ -68,7 +68,7 @@ alias:\n     return t\n   }\n \n-  var _countValue = function (tmpArr, value) {\n+  const _countValue = function (tmpArr, value) {\n     if (typeof value === 'number') {\n       if (Math.floor(value) !== value) {\n         return\n", "diff --git a/website/source/php/array/array_diff.html b/website/source/php/array/array_diff.html\nindex 8b020e23c..f587a52b7 100644\n--- a/website/source/php/array/array_diff.html\n+++ b/website/source/php/array/array_diff.html\n@@ -39,12 +39,12 @@ alias:\n   //   example 1: array_diff(['Kevin', 'van', 'Zonneveld'], ['van', 'Zonneveld'])\n   //   returns 1: {0:'Kevin'}\n \n-  var retArr = {}\n-  var argl = arguments.length\n-  var k1 = ''\n-  var i = 1\n-  var k = ''\n-  var arr = {}\n+  const retArr = {}\n+  const argl = arguments.length\n+  let k1 = ''\n+  let i = 1\n+  let k = ''\n+  let arr = {}\n \n   arr1keys: for (k1 in arr1) { // eslint-disable-line no-labels\n     for (i = 1; i < argl; i++) {\n", "diff --git a/website/source/php/array/array_diff_assoc.html b/website/source/php/array/array_diff_assoc.html\nindex 473b2cb0d..707547136 100644\n--- a/website/source/php/array/array_diff_assoc.html\n+++ b/website/source/php/array/array_diff_assoc.html\n@@ -41,12 +41,12 @@ alias:\n   //   example 1: array_diff_assoc({0: 'Kevin', 1: 'van', 2: 'Zonneveld'}, {0: 'Kevin', 4: 'van', 5: 'Zonneveld'})\n   //   returns 1: {1: 'van', 2: 'Zonneveld'}\n \n-  var retArr = {}\n-  var argl = arguments.length\n-  var k1 = ''\n-  var i = 1\n-  var k = ''\n-  var arr = {}\n+  const retArr = {}\n+  const argl = arguments.length\n+  let k1 = ''\n+  let i = 1\n+  let k = ''\n+  let arr = {}\n \n   arr1keys: for (k1 in arr1) { // eslint-disable-line no-labels\n     for (i = 1; i < argl; i++) {\n", "diff --git a/website/source/php/array/array_diff_key.html b/website/source/php/array/array_diff_key.html\nindex 4e02fafbb..c0a15fd11 100644\n--- a/website/source/php/array/array_diff_key.html\n+++ b/website/source/php/array/array_diff_key.html\n@@ -43,12 +43,12 @@ alias:\n   //   example 2: array_diff_key({red: 1, green: 2, blue: 3, white: 4}, {red: 5}, {red: 5})\n   //   returns 2: {\"green\":2, \"blue\":3, \"white\":4}\n \n-  var argl = arguments.length\n-  var retArr = {}\n-  var k1 = ''\n-  var i = 1\n-  var k = ''\n-  var arr = {}\n+  const argl = arguments.length\n+  const retArr = {}\n+  let k1 = ''\n+  let i = 1\n+  let k = ''\n+  let arr = {}\n \n   arr1keys: for (k1 in arr1) { // eslint-disable-line no-labels\n     for (i = 1; i < argl; i++) {\n", "diff --git a/website/source/php/array/array_diff_uassoc.html b/website/source/php/array/array_diff_uassoc.html\nindex 904fae37d..5f26394cd 100644\n--- a/website/source/php/array/array_diff_uassoc.html\n+++ b/website/source/php/array/array_diff_uassoc.html\n@@ -42,21 +42,21 @@ alias:\n   //   returns 1: {b: 'brown', c: 'blue', 0: 'red'}\n   //        test: skip-1\n \n-  var retArr = {}\n-  var arglm1 = arguments.length - 1\n-  var cb = arguments[arglm1]\n-  var arr = {}\n-  var i = 1\n-  var k1 = ''\n-  var k = ''\n+  const retArr = {}\n+  const arglm1 = arguments.length - 1\n+  let cb = arguments[arglm1]\n+  let arr = {}\n+  let i = 1\n+  let k1 = ''\n+  let k = ''\n \n-  var $global = (typeof window !== 'undefined' ? window : global)\n+  const $global = (typeof window !== 'undefined' ? window : global)\n \n   cb = (typeof cb === 'string')\n     ? $global[cb]\n     : (Object.prototype.toString.call(cb) === '[object Array]')\n-      ? $global[cb[0]][cb[1]]\n-      : cb\n+        ? $global[cb[0]][cb[1]]\n+        : cb\n \n   arr1keys: for (k1 in arr1) { // eslint-disable-line no-labels\n     for (i = 1; i < arglm1; i++) {\n", "diff --git a/website/source/php/array/array_diff_ukey.html b/website/source/php/array/array_diff_ukey.html\nindex e1834792b..0097808cf 100644\n--- a/website/source/php/array/array_diff_ukey.html\n+++ b/website/source/php/array/array_diff_ukey.html\n@@ -41,22 +41,22 @@ alias:\n   //   example 1: array_diff_ukey($array1, $array2, function (key1, key2){ return (key1 === key2 ? 0 : (key1 > key2 ? 1 : -1)); })\n   //   returns 1: {red: 2, purple: 4}\n \n-  var retArr = {}\n-  var arglm1 = arguments.length - 1\n+  const retArr = {}\n+  const arglm1 = arguments.length - 1\n   // var arglm2 = arglm1 - 1\n-  var cb = arguments[arglm1]\n-  var k1 = ''\n-  var i = 1\n-  var arr = {}\n-  var k = ''\n+  let cb = arguments[arglm1]\n+  let k1 = ''\n+  let i = 1\n+  let arr = {}\n+  let k = ''\n \n-  var $global = (typeof window !== 'undefined' ? window : global)\n+  const $global = (typeof window !== 'undefined' ? window : global)\n \n   cb = (typeof cb === 'string')\n     ? $global[cb]\n     : (Object.prototype.toString.call(cb) === '[object Array]')\n-      ? $global[cb[0]][cb[1]]\n-      : cb\n+        ? $global[cb[0]][cb[1]]\n+        : cb\n \n   arr1keys: for (k1 in arr1) { // eslint-disable-line no-labels\n     for (i = 1; i < arglm1; i++) {\n", "diff --git a/website/source/php/array/array_fill.html b/website/source/php/array/array_fill.html\nindex 3208e9a3d..e457f482a 100644\n--- a/website/source/php/array/array_fill.html\n+++ b/website/source/php/array/array_fill.html\n@@ -38,8 +38,8 @@ alias:\n   //   example 1: array_fill(5, 6, 'banana')\n   //   returns 1: { 5: 'banana', 6: 'banana', 7: 'banana', 8: 'banana', 9: 'banana', 10: 'banana' }\n \n-  var key\n-  var tmpArr = {}\n+  let key\n+  const tmpArr = {}\n \n   if (!isNaN(startIndex) && !isNaN(num)) {\n     for (key = 0; key < num; key++) {\n", "diff --git a/website/source/php/array/array_fill_keys.html b/website/source/php/array/array_fill_keys.html\nindex a58e9be65..517be6356 100644\n--- a/website/source/php/array/array_fill_keys.html\n+++ b/website/source/php/array/array_fill_keys.html\n@@ -39,8 +39,8 @@ alias:\n   //   example 1: array_fill_keys($keys, 'banana')\n   //   returns 1: {\"foo\": \"banana\", 5: \"banana\", 10: \"banana\", \"bar\": \"banana\"}\n \n-  var retObj = {}\n-  var key = ''\n+  const retObj = {}\n+  let key = ''\n \n   for (key in keys) {\n     retObj[keys[key]] = value\n", "diff --git a/website/source/php/array/array_filter.html b/website/source/php/array/array_filter.html\nindex 48e665a8f..a1496773d 100644\n--- a/website/source/php/array/array_filter.html\n+++ b/website/source/php/array/array_filter.html\n@@ -57,8 +57,8 @@ alias:\n   //   example 3: array_filter({\"a\": 1, \"b\": false, \"c\": -1, \"d\": 0, \"e\": null, \"f\":'', \"g\":undefined})\n   //   returns 3: {\"a\":1, \"c\":-1}\n \n-  var retObj = {}\n-  var k\n+  let retObj = {}\n+  let k\n \n   func = func || function (v) {\n     return v\n", "diff --git a/website/source/php/array/array_flip.html b/website/source/php/array/array_flip.html\nindex 1ae254092..60a17696b 100644\n--- a/website/source/php/array/array_flip.html\n+++ b/website/source/php/array/array_flip.html\n@@ -38,8 +38,8 @@ alias:\n   //   example 1: array_flip( {a: 1, b: 1, c: 2} )\n   //   returns 1: {1: 'b', 2: 'c'}\n \n-  var key\n-  var tmpArr = {}\n+  let key\n+  const tmpArr = {}\n \n   for (key in trans) {\n     if (!trans.hasOwnProperty(key)) {\n", "diff --git a/website/source/php/array/array_intersect.html b/website/source/php/array/array_intersect.html\nindex 9464cab51..69dbf9696 100644\n--- a/website/source/php/array/array_intersect.html\n+++ b/website/source/php/array/array_intersect.html\n@@ -45,13 +45,13 @@ alias:\n   //   example 1: var $result = array_intersect($array1, $array2, $array3)\n   //   returns 1: {0: 'red', a: 'green'}\n \n-  var retArr = {}\n-  var argl = arguments.length\n-  var arglm1 = argl - 1\n-  var k1 = ''\n-  var arr = {}\n-  var i = 0\n-  var k = ''\n+  const retArr = {}\n+  const argl = arguments.length\n+  const arglm1 = argl - 1\n+  let k1 = ''\n+  let arr = {}\n+  let i = 0\n+  let k = ''\n \n   arr1keys: for (k1 in arr1) { // eslint-disable-line no-labels\n     arrs: for (i = 1; i < argl; i++) { // eslint-disable-line no-labels\n", "diff --git a/website/source/php/array/array_intersect_assoc.html b/website/source/php/array/array_intersect_assoc.html\nindex e3a23e49f..f355d1e92 100644\n--- a/website/source/php/array/array_intersect_assoc.html\n+++ b/website/source/php/array/array_intersect_assoc.html\n@@ -43,13 +43,13 @@ alias:\n   //   example 1: array_intersect_assoc($array1, $array2)\n   //   returns 1: {a: 'green'}\n \n-  var retArr = {}\n-  var argl = arguments.length\n-  var arglm1 = argl - 1\n-  var k1 = ''\n-  var arr = {}\n-  var i = 0\n-  var k = ''\n+  const retArr = {}\n+  const argl = arguments.length\n+  const arglm1 = argl - 1\n+  let k1 = ''\n+  let arr = {}\n+  let i = 0\n+  let k = ''\n \n   arr1keys: for (k1 in arr1) { // eslint-disable-line no-labels\n     arrs: for (i = 1; i < argl; i++) { // eslint-disable-line no-labels\n", "diff --git a/website/source/php/array/array_intersect_key.html b/website/source/php/array/array_intersect_key.html\nindex ae7598c04..645774591 100644\n--- a/website/source/php/array/array_intersect_key.html\n+++ b/website/source/php/array/array_intersect_key.html\n@@ -43,13 +43,13 @@ alias:\n   //   example 1: array_intersect_key($array1, $array2)\n   //   returns 1: {0: 'red', a: 'green'}\n \n-  var retArr = {}\n-  var argl = arguments.length\n-  var arglm1 = argl - 1\n-  var k1 = ''\n-  var arr = {}\n-  var i = 0\n-  var k = ''\n+  const retArr = {}\n+  const argl = arguments.length\n+  const arglm1 = argl - 1\n+  let k1 = ''\n+  let arr = {}\n+  let i = 0\n+  let k = ''\n \n   arr1keys: for (k1 in arr1) { // eslint-disable-line no-labels\n     if (!arr1.hasOwnProperty(k1)) {\n", "diff --git a/website/source/php/array/array_intersect_uassoc.html b/website/source/php/array/array_intersect_uassoc.html\nindex 7135004e3..1b2651ac9 100644\n--- a/website/source/php/array/array_intersect_uassoc.html\n+++ b/website/source/php/array/array_intersect_uassoc.html\n@@ -43,23 +43,23 @@ alias:\n   //   example 1: array_intersect_uassoc($array1, $array2, function (f_string1, f_string2){var string1 = (f_string1+'').toLowerCase(); var string2 = (f_string2+'').toLowerCase(); if (string1 > string2) return 1; if (string1 === string2) return 0; return -1;})\n   //   returns 1: {b: 'brown'}\n \n-  var retArr = {}\n-  var arglm1 = arguments.length - 1\n-  var arglm2 = arglm1 - 1\n-  var cb = arguments[arglm1]\n+  const retArr = {}\n+  const arglm1 = arguments.length - 1\n+  const arglm2 = arglm1 - 1\n+  let cb = arguments[arglm1]\n   // var cb0 = arguments[arglm2]\n-  var k1 = ''\n-  var i = 1\n-  var k = ''\n-  var arr = {}\n+  let k1 = ''\n+  let i = 1\n+  let k = ''\n+  let arr = {}\n \n-  var $global = (typeof window !== 'undefined' ? window : global)\n+  const $global = (typeof window !== 'undefined' ? window : global)\n \n   cb = (typeof cb === 'string')\n     ? $global[cb]\n     : (Object.prototype.toString.call(cb) === '[object Array]')\n-      ? $global[cb[0]][cb[1]]\n-      : cb\n+        ? $global[cb[0]][cb[1]]\n+        : cb\n \n   // cb0 = (typeof cb0 === 'string')\n   //   ? $global[cb0]\n", "diff --git a/website/source/php/array/array_intersect_ukey.html b/website/source/php/array/array_intersect_ukey.html\nindex c4aea4fb7..7d187b0f9 100644\n--- a/website/source/php/array/array_intersect_ukey.html\n+++ b/website/source/php/array/array_intersect_ukey.html\n@@ -41,23 +41,23 @@ alias:\n   //   example 1: array_intersect_ukey ($array1, $array2, function (key1, key2){ return (key1 === key2 ? 0 : (key1 > key2 ? 1 : -1)); })\n   //   returns 1: {blue: 1, green: 3}\n \n-  var retArr = {}\n-  var arglm1 = arguments.length - 1\n-  var arglm2 = arglm1 - 1\n-  var cb = arguments[arglm1]\n+  const retArr = {}\n+  const arglm1 = arguments.length - 1\n+  const arglm2 = arglm1 - 1\n+  let cb = arguments[arglm1]\n   // var cb0 = arguments[arglm2]\n-  var k1 = ''\n-  var i = 1\n-  var k = ''\n-  var arr = {}\n+  let k1 = ''\n+  let i = 1\n+  let k = ''\n+  let arr = {}\n \n-  var $global = (typeof window !== 'undefined' ? window : global)\n+  const $global = (typeof window !== 'undefined' ? window : global)\n \n   cb = (typeof cb === 'string')\n     ? $global[cb]\n     : (Object.prototype.toString.call(cb) === '[object Array]')\n-      ? $global[cb[0]][cb[1]]\n-      : cb\n+        ? $global[cb[0]][cb[1]]\n+        : cb\n \n   // cb0 = (typeof cb0 === 'string')\n   //   ? $global[cb0]\n", "diff --git a/website/source/php/array/array_keys.html b/website/source/php/array/array_keys.html\nindex 9c714b03d..52d1112d0 100644\n--- a/website/source/php/array/array_keys.html\n+++ b/website/source/php/array/array_keys.html\n@@ -48,11 +48,11 @@ alias:\n   //   example 1: array_keys( {firstname: 'Kevin', surname: 'van Zonneveld'} )\n   //   returns 1: [ 'firstname', 'surname' ]\n \n-  var search = typeof searchValue !== 'undefined'\n-  var tmpArr = []\n-  var strict = !!argStrict\n-  var include = true\n-  var key = ''\n+  const search = typeof searchValue !== 'undefined'\n+  const tmpArr = []\n+  const strict = !!argStrict\n+  let include = true\n+  let key = ''\n \n   for (key in input) {\n     if (input.hasOwnProperty(key)) {\n", "diff --git a/website/source/php/array/array_map.html b/website/source/php/array/array_map.html\nindex 9c2c43f3a..ba79edfed 100644\n--- a/website/source/php/array/array_map.html\n+++ b/website/source/php/array/array_map.html\n@@ -46,18 +46,18 @@ alias:\n   //   example 1: array_map( function (a){return (a * a * a)}, [1, 2, 3, 4, 5] )\n   //   returns 1: [ 1, 8, 27, 64, 125 ]\n \n-  var argc = arguments.length\n-  var argv = arguments\n-  var obj = null\n-  var cb = callback\n-  var j = argv[1].length\n-  var i = 0\n-  var k = 1\n-  var m = 0\n-  var tmp = []\n-  var tmpArr = []\n+  const argc = arguments.length\n+  const argv = arguments\n+  let obj = null\n+  let cb = callback\n+  const j = argv[1].length\n+  let i = 0\n+  let k = 1\n+  let m = 0\n+  let tmp = []\n+  const tmpArr = []\n \n-  var $global = (typeof window !== 'undefined' ? window : global)\n+  const $global = (typeof window !== 'undefined' ? window : global)\n \n   while (i < j) {\n     while (k < argc) {\n", "diff --git a/website/source/php/array/array_merge.html b/website/source/php/array/array_merge.html\nindex f73732d1b..c96f17cbc 100644\n--- a/website/source/php/array/array_merge.html\n+++ b/website/source/php/array/array_merge.html\n@@ -28,8 +28,8 @@ layout: function\n title: PHP's array_merge in JavaScript\n description: >-\n   Here\u2019s what our current JavaScript equivalent to <a\n-  href=\"https://php.net/manual/en/function.array-merge.php\">PHP's array_merge</a>\n-  looks like.\n+  href=\"https://php.net/manual/en/function.array-merge.php\">PHP's\n+  array_merge</a> looks like.\n function: array_merge\n category: array\n language: php\n@@ -55,17 +55,17 @@ alias:\n   //   example 2: array_merge($arr1, $arr2)\n   //   returns 2: {0: \"data\"}\n \n-  var args = Array.prototype.slice.call(arguments)\n-  var argl = args.length\n-  var arg\n-  var retObj = {}\n-  var k = ''\n-  var argil = 0\n-  var j = 0\n-  var i = 0\n-  var ct = 0\n-  var toStr = Object.prototype.toString\n-  var retArr = true\n+  const args = Array.prototype.slice.call(arguments)\n+  const argl = args.length\n+  let arg\n+  const retObj = {}\n+  let k = ''\n+  let argil = 0\n+  let j = 0\n+  let i = 0\n+  let ct = 0\n+  const toStr = Object.prototype.toString\n+  let retArr = true\n \n   for (i = 0; i < argl; i++) {\n     if (toStr.call(args[i]) !== '[object Array]') {\n", "diff --git a/website/source/php/array/array_merge_recursive.html b/website/source/php/array/array_merge_recursive.html\nindex cfc96347a..6b2522da4 100644\n--- a/website/source/php/array/array_merge_recursive.html\n+++ b/website/source/php/array/array_merge_recursive.html\n@@ -45,8 +45,8 @@ alias:\n   //   returns 1: {'color': {'favorite': {0: 'red', 1: 'green'}, 0: 'blue'}, 1: 5, 1: 10}\n   //        test: skip-1\n \n-  var arrayMerge = require('../array/array_merge')\n-  var idx = ''\n+  const arrayMerge = require('../array/array_merge')\n+  let idx = ''\n \n   if (arr1 && Object.prototype.toString.call(arr1) === '[object Array]' &&\n     arr2 && Object.prototype.toString.call(arr2) === '[object Array]') {\n", "diff --git a/website/source/php/array/array_multisort.html b/website/source/php/array/array_multisort.html\nindex 74d1e7ed7..b77ea4670 100644\n--- a/website/source/php/array/array_multisort.html\n+++ b/website/source/php/array/array_multisort.html\n@@ -75,38 +75,38 @@ alias:\n   //      note 1: bits: HGFE DCBA\n   //      note 1: args: Holds pointer to arguments for reassignment\n \n-  var g\n-  var i\n-  var j\n-  var k\n-  var l\n-  var sal\n-  var vkey\n-  var elIndex\n-  var lastSorts\n-  var tmpArray\n-  var zlast\n+  let g\n+  let i\n+  let j\n+  let k\n+  let l\n+  let sal\n+  let vkey\n+  let elIndex\n+  let lastSorts\n+  let tmpArray\n+  let zlast\n \n-  var sortFlag = [0]\n-  var thingsToSort = []\n-  var nLastSort = []\n-  var lastSort = []\n+  const sortFlag = [0]\n+  const thingsToSort = []\n+  let nLastSort = []\n+  let lastSort = []\n   // possibly redundant\n-  var args = arguments\n+  const args = arguments\n \n-  var flags = {\n-    'SORT_REGULAR': 16,\n-    'SORT_NUMERIC': 17,\n-    'SORT_STRING': 18,\n-    'SORT_ASC': 32,\n-    'SORT_DESC': 40\n+  const flags = {\n+    SORT_REGULAR: 16,\n+    SORT_NUMERIC: 17,\n+    SORT_STRING: 18,\n+    SORT_ASC: 32,\n+    SORT_DESC: 40\n   }\n \n-  var sortDuplicator = function (a, b) {\n+  const sortDuplicator = function (a, b) {\n     return nLastSort.shift()\n   }\n \n-  var sortFunctions = [\n+  const sortFunctions = [\n     [\n \n       function (a, b) {\n@@ -142,11 +142,11 @@ alias:\n     ]\n   ]\n \n-  var sortArrs = [\n+  const sortArrs = [\n     []\n   ]\n \n-  var sortKeys = [\n+  const sortKeys = [\n     []\n   ]\n \n@@ -170,12 +170,12 @@ alias:\n   // All other arrays must be of equal length, otherwise function would return FALSE like in PHP\n   // sortComponents: Holds 2 indexes per every section of the array\n   // that can be sorted. As this is the start, the whole array can be sorted.\n-  var arrMainLength = sortArrs[0].length\n-  var sortComponents = [0, arrMainLength]\n+  const arrMainLength = sortArrs[0].length\n+  let sortComponents = [0, arrMainLength]\n \n   // Loop through all other arguments, checking lengths and sort flags\n   // of arrays and adding them to the above variables.\n-  var argl = arguments.length\n+  const argl = arguments.length\n   for (j = 1; j < argl; j++) {\n     if (Object.prototype.toString.call(arguments[j]) === '[object Array]') {\n       sortArrs[j] = arguments[j]\n@@ -197,7 +197,7 @@ alias:\n         return false\n       }\n     } else if (typeof arguments[j] === 'string') {\n-      var lFlag = sortFlag.pop()\n+      const lFlag = sortFlag.pop()\n       // Keep extra parentheses around latter flags check\n       // to avoid minimization leading to CDATA closer\n       if (typeof flags[arguments[j]] === 'undefined' ||\n@@ -246,7 +246,7 @@ alias:\n       }\n \n       // Sort function for sorting. Either sorts asc or desc, regular/string or numeric.\n-      var sFunction = sortFunctions[(sortFlag[i] & 3)][((sortFlag[i] & 8) > 0) ? 1 : 0]\n+      let sFunction = sortFunctions[(sortFlag[i] & 3)][((sortFlag[i] & 8) > 0) ? 1 : 0]\n \n       // Sort current array.\n       for (l = 0; l !== sortComponents.length; l += 2) {\n", "diff --git a/website/source/php/array/array_pad.html b/website/source/php/array/array_pad.html\nindex 6455b7b90..a31466014 100644\n--- a/website/source/php/array/array_pad.html\n+++ b/website/source/php/array/array_pad.html\n@@ -45,11 +45,11 @@ alias:\n   //   example 4: array_pad([ 7, 8, 9 ], -5, 'a')\n   //   returns 4: [ 'a', 'a', 7, 8, 9 ]\n \n-  var pad = []\n-  var newArray = []\n-  var newLength\n-  var diff = 0\n-  var i = 0\n+  let pad = []\n+  const newArray = []\n+  let newLength\n+  let diff = 0\n+  let i = 0\n \n   if (Object.prototype.toString.call(input) === '[object Array]' && !isNaN(padSize)) {\n     newLength = ((padSize < 0) ? (padSize * -1) : padSize)\n", "diff --git a/website/source/php/array/array_pop.html b/website/source/php/array/array_pop.html\nindex 955512a64..4aeaa4853 100644\n--- a/website/source/php/array/array_pop.html\n+++ b/website/source/php/array/array_pop.html\n@@ -68,8 +68,8 @@ alias:\n   //   example 2: var $result = $data\n   //   returns 2: {firstName: 'Kevin'}\n \n-  var key = ''\n-  var lastKey = ''\n+  let key = ''\n+  let lastKey = ''\n \n   if (inputArr.hasOwnProperty('length')) {\n     // Indexed\n@@ -86,7 +86,7 @@ alias:\n       }\n     }\n     if (lastKey) {\n-      var tmp = inputArr[lastKey]\n+      const tmp = inputArr[lastKey]\n       delete (inputArr[lastKey])\n       return tmp\n     } else {\n", "diff --git a/website/source/php/array/array_product.html b/website/source/php/array/array_product.html\nindex 180974ad7..3b285f870 100644\n--- a/website/source/php/array/array_product.html\n+++ b/website/source/php/array/array_product.html\n@@ -33,9 +33,9 @@ alias:\n   //   example 1: array_product([ 2, 4, 6, 8 ])\n   //   returns 1: 384\n \n-  var idx = 0\n-  var product = 1\n-  var il = 0\n+  let idx = 0\n+  let product = 1\n+  let il = 0\n \n   if (Object.prototype.toString.call(input) !== '[object Array]') {\n     return null\n", "diff --git a/website/source/php/array/array_push.html b/website/source/php/array/array_push.html\nindex ac71ed8ae..1db994629 100644\n--- a/website/source/php/array/array_push.html\n+++ b/website/source/php/array/array_push.html\n@@ -47,14 +47,14 @@ alias:\n   //   example 1: array_push(['kevin','van'], 'zonneveld')\n   //   returns 1: 3\n \n-  var i = 0\n-  var pr = ''\n-  var argv = arguments\n-  var argc = argv.length\n-  var allDigits = /^\\d$/\n-  var size = 0\n-  var highestIdx = 0\n-  var len = 0\n+  let i = 0\n+  let pr = ''\n+  const argv = arguments\n+  const argc = argv.length\n+  const allDigits = /^\\d$/\n+  let size = 0\n+  let highestIdx = 0\n+  let len = 0\n \n   if (inputArr.hasOwnProperty('length')) {\n     for (i = 1; i < argc; i++) {\n", "diff --git a/website/source/php/array/array_rand.html b/website/source/php/array/array_rand.html\nindex 597ff30c7..711431013 100644\n--- a/website/source/php/array/array_rand.html\n+++ b/website/source/php/array/array_rand.html\n@@ -38,7 +38,7 @@ alias:\n \n   // By using Object.keys we support both, arrays and objects\n   // which phpjs wants to support\n-  var keys = Object.keys(array)\n+  const keys = Object.keys(array)\n \n   if (typeof num === 'undefined' || num === null) {\n     num = 1\n@@ -51,10 +51,10 @@ alias:\n   }\n \n   // shuffle the array of keys\n-  for (var i = keys.length - 1; i > 0; i--) {\n-    var j = Math.floor(Math.random() * (i + 1)) // 0 \u2264 j \u2264 i\n+  for (let i = keys.length - 1; i > 0; i--) {\n+    const j = Math.floor(Math.random() * (i + 1)) // 0 \u2264 j \u2264 i\n \n-    var tmp = keys[j]\n+    const tmp = keys[j]\n     keys[j] = keys[i]\n     keys[i] = tmp\n   }\n", "diff --git a/website/source/php/array/array_reduce.html b/website/source/php/array/array_reduce.html\nindex c4e948bdf..7bbba724e 100644\n--- a/website/source/php/array/array_reduce.html\n+++ b/website/source/php/array/array_reduce.html\n@@ -35,10 +35,10 @@ alias:\n   //   example 1: array_reduce([1, 2, 3, 4, 5], function (v, w){v += w;return v;})\n   //   returns 1: 15\n \n-  var lon = aInput.length\n-  var res = 0\n-  var i = 0\n-  var tmp = []\n+  const lon = aInput.length\n+  let res = 0\n+  let i = 0\n+  let tmp = []\n \n   for (i = 0; i < lon; i += 2) {\n     tmp[0] = aInput[i]\n", "diff --git a/website/source/php/array/array_replace.html b/website/source/php/array/array_replace.html\nindex eccd7d358..56eefc69d 100644\n--- a/website/source/php/array/array_replace.html\n+++ b/website/source/php/array/array_replace.html\n@@ -35,10 +35,10 @@ alias:\n   //   example 1: array_replace([\"orange\", \"banana\", \"apple\", \"raspberry\"], {0 : \"pineapple\", 4 : \"cherry\"}, {0:\"grape\"})\n   //   returns 1: {0: 'grape', 1: 'banana', 2: 'apple', 3: 'raspberry', 4: 'cherry'}\n \n-  var retObj = {}\n-  var i = 0\n-  var p = ''\n-  var argl = arguments.length\n+  const retObj = {}\n+  let i = 0\n+  let p = ''\n+  const argl = arguments.length\n \n   if (argl < 2) {\n     throw new Error('There should be at least 2 arguments passed to array_replace()')\n", "diff --git a/website/source/php/array/array_replace_recursive.html b/website/source/php/array/array_replace_recursive.html\nindex b02f215aa..2187b6eba 100644\n--- a/website/source/php/array/array_replace_recursive.html\n+++ b/website/source/php/array/array_replace_recursive.html\n@@ -35,10 +35,10 @@ alias:\n   //   example 1: array_replace_recursive({'citrus' : ['orange'], 'berries' : ['blackberry', 'raspberry']}, {'citrus' : ['pineapple'], 'berries' : ['blueberry']})\n   //   returns 1: {citrus : ['pineapple'], berries : ['blueberry', 'raspberry']}\n \n-  var i = 0\n-  var p = ''\n-  var argl = arguments.length\n-  var retObj\n+  let i = 0\n+  let p = ''\n+  const argl = arguments.length\n+  let retObj\n \n   if (argl < 2) {\n     throw new Error('There should be at least 2 arguments passed to array_replace_recursive()')\n", "diff --git a/website/source/php/array/array_reverse.html b/website/source/php/array/array_reverse.html\nindex 79405e77c..d956cd6f6 100644\n--- a/website/source/php/array/array_reverse.html\n+++ b/website/source/php/array/array_reverse.html\n@@ -36,21 +36,21 @@ alias:\n   //   example 1: array_reverse( [ 'php', '4.0', ['green', 'red'] ], true)\n   //   returns 1: { 2: ['green', 'red'], 1: '4.0', 0: 'php'}\n \n-  var isArray = Object.prototype.toString.call(array) === '[object Array]'\n-  var tmpArr = preserveKeys ? {} : []\n-  var key\n+  const isArray = Object.prototype.toString.call(array) === '[object Array]'\n+  const tmpArr = preserveKeys ? {} : []\n+  let key\n \n   if (isArray && !preserveKeys) {\n     return array.slice(0).reverse()\n   }\n \n   if (preserveKeys) {\n-    var keys = []\n+    const keys = []\n     for (key in array) {\n       keys.push(key)\n     }\n \n-    var i = keys.length\n+    let i = keys.length\n     while (i--) {\n       key = keys[i]\n       // @todo: don't rely on browsers keeping keys in insertion order\n", "diff --git a/website/source/php/array/array_search.html b/website/source/php/array/array_search.html\nindex 69af39f17..5a49a1902 100644\n--- a/website/source/php/array/array_search.html\n+++ b/website/source/php/array/array_search.html\n@@ -48,14 +48,14 @@ alias:\n   //   example 2: array_search('3', {a: 3, b: 5, c: 7})\n   //   returns 2: 'a'\n \n-  var strict = !!argStrict\n-  var key = ''\n+  const strict = !!argStrict\n+  let key = ''\n \n   if (typeof needle === 'object' && needle.exec) {\n     // Duck-type for RegExp\n     if (!strict) {\n       // Let's consider case sensitive searches as strict\n-      var flags = 'i' + (needle.global ? 'g' : '') +\n+      const flags = 'i' + (needle.global ? 'g' : '') +\n         (needle.multiline ? 'm' : '') +\n         // sticky is FF only\n         (needle.sticky ? 'y' : '')\n", "diff --git a/website/source/php/array/array_shift.html b/website/source/php/array/array_shift.html\nindex 7485ea513..2b753bbe9 100644\n--- a/website/source/php/array/array_shift.html\n+++ b/website/source/php/array/array_shift.html\n@@ -18,8 +18,8 @@ layout: function\n title: PHP's array_shift in JavaScript\n description: >-\n   Here\u2019s what our current JavaScript equivalent to <a\n-  href=\"https://php.net/manual/en/function.array-shift.php\">PHP's array_shift</a>\n-  looks like.\n+  href=\"https://php.net/manual/en/function.array-shift.php\">PHP's\n+  array_shift</a> looks like.\n function: array_shift\n category: array\n language: php\n@@ -44,7 +44,7 @@ alias:\n     // increment all subsequent (skipping current key, since\n     // we need its value below) until find unused)\n     if (arr[ct] !== undefined) {\n-      var tmp = ct\n+      const tmp = ct\n       ct += 1\n       if (ct === key) {\n         ct += 1\n", "diff --git a/website/source/php/array/array_slice.html b/website/source/php/array/array_slice.html\nindex 1ce13af0c..00a45a4be 100644\n--- a/website/source/php/array/array_slice.html\n+++ b/website/source/php/array/array_slice.html\n@@ -22,8 +22,8 @@ layout: function\n title: PHP's array_slice in JavaScript\n description: >-\n   Here\u2019s what our current JavaScript equivalent to <a\n-  href=\"https://php.net/manual/en/function.array-slice.php\">PHP's array_slice</a>\n-  looks like.\n+  href=\"https://php.net/manual/en/function.array-slice.php\">PHP's\n+  array_slice</a> looks like.\n function: array_slice\n category: array\n language: php\n@@ -45,7 +45,7 @@ alias:\n   //   example 2: array_slice([\"a\", \"b\", \"c\", \"d\", \"e\"], 2, -1, true)\n   //   returns 2: {2: 'c', 3: 'd'}\n \n-  var isInt = require('../var/is_int')\n+  const isInt = require('../var/is_int')\n \n   /*\n     if ('callee' in arr && 'length' in arr) {\n@@ -53,12 +53,12 @@ alias:\n     }\n   */\n \n-  var key = ''\n+  let key = ''\n \n   if (Object.prototype.toString.call(arr) !== '[object Array]' || (preserveKeys && offst !== 0)) {\n     // Assoc. array as input or if required as output\n-    var lgt = 0\n-    var newAssoc = {}\n+    let lgt = 0\n+    const newAssoc = {}\n     for (key in arr) {\n       lgt += 1\n       newAssoc[key] = arr[key]\n@@ -68,11 +68,11 @@ alias:\n     offst = (offst < 0) ? lgt + offst : offst\n     lgth = lgth === undefined ? lgt : (lgth < 0) ? lgt + lgth - offst : lgth\n \n-    var assoc = {}\n-    var start = false\n-    var it = -1\n-    var arrlgth = 0\n-    var noPkIdx = 0\n+    const assoc = {}\n+    let start = false\n+    let it = -1\n+    let arrlgth = 0\n+    let noPkIdx = 0\n \n     for (key in arr) {\n       ++it\n", "diff --git a/website/source/php/array/array_splice.html b/website/source/php/array/array_splice.html\nindex 1afd8f575..a8472b465 100644\n--- a/website/source/php/array/array_splice.html\n+++ b/website/source/php/array/array_splice.html\n@@ -69,7 +69,7 @@ alias:\n   //   returns 3: [\"yellow\"]\n   //        test: skip-1\n \n-  var isInt = require('../var/is_int')\n+  const isInt = require('../var/is_int')\n \n   var _checkToUpIndices = function (arr, ct, key) {\n     // Deal with situation, e.g., if encounter index 4 and try\n@@ -77,7 +77,7 @@ alias:\n     // increment all subsequent (skipping current key,\n     // since we need its value below) until find unused)\n     if (arr[ct] !== undefined) {\n-      var tmp = ct\n+      const tmp = ct\n       ct += 1\n       if (ct === key) {\n         ct += 1\n@@ -103,16 +103,16 @@ alias:\n      // Deal with array-like objects as input\n     delete arr.length;\n     } */\n-    var lgt = 0\n-    var ct = -1\n-    var rmvd = []\n-    var rmvdObj = {}\n-    var replCt = -1\n-    var intCt = -1\n-    var returnArr = true\n-    var rmvdCt = 0\n+    let lgt = 0\n+    let ct = -1\n+    const rmvd = []\n+    const rmvdObj = {}\n+    let replCt = -1\n+    let intCt = -1\n+    let returnArr = true\n+    let rmvdCt = 0\n     // var rmvdLngth = 0\n-    var key = ''\n+    let key = ''\n     // rmvdObj.length = 0;\n     for (key in arr) {\n       // Can do arr.__count__ in some browsers\n", "diff --git a/website/source/php/array/array_sum.html b/website/source/php/array/array_sum.html\nindex 4ee5314f1..32eb5fcac 100644\n--- a/website/source/php/array/array_sum.html\n+++ b/website/source/php/array/array_sum.html\n@@ -54,8 +54,8 @@ alias:\n   //   example 2: array_sum($total)\n   //   returns 2: 67.2\n \n-  var key\n-  var sum = 0\n+  let key\n+  let sum = 0\n \n   // input sanitation\n   if (typeof array !== 'object') {\n", "diff --git a/website/source/php/array/array_udiff.html b/website/source/php/array/array_udiff.html\nindex 087bde1c2..3af91aa6d 100644\n--- a/website/source/php/array/array_udiff.html\n+++ b/website/source/php/array/array_udiff.html\n@@ -23,8 +23,8 @@ layout: function\n title: PHP's array_udiff in JavaScript\n description: >-\n   Here\u2019s what our current JavaScript equivalent to <a\n-  href=\"https://php.net/manual/en/function.array-udiff.php\">PHP's array_udiff</a>\n-  looks like.\n+  href=\"https://php.net/manual/en/function.array-udiff.php\">PHP's\n+  array_udiff</a> looks like.\n function: array_udiff\n category: array\n language: php\n@@ -43,21 +43,21 @@ alias:\n   //   example 1: array_udiff($array1, $array2, function (f_string1, f_string2){var string1 = (f_string1+'').toLowerCase(); var string2 = (f_string2+'').toLowerCase(); if (string1 > string2) return 1; if (string1 === string2) return 0; return -1;})\n   //   returns 1: {c: 'blue'}\n \n-  var retArr = {}\n-  var arglm1 = arguments.length - 1\n-  var cb = arguments[arglm1]\n-  var arr = ''\n-  var i = 1\n-  var k1 = ''\n-  var k = ''\n+  const retArr = {}\n+  const arglm1 = arguments.length - 1\n+  let cb = arguments[arglm1]\n+  let arr = ''\n+  let i = 1\n+  let k1 = ''\n+  let k = ''\n \n-  var $global = (typeof window !== 'undefined' ? window : global)\n+  const $global = (typeof window !== 'undefined' ? window : global)\n \n   cb = (typeof cb === 'string')\n     ? $global[cb]\n     : (Object.prototype.toString.call(cb) === '[object Array]')\n-      ? $global[cb[0]][cb[1]]\n-      : cb\n+        ? $global[cb[0]][cb[1]]\n+        : cb\n \n   arr1keys: for (k1 in arr1) { // eslint-disable-line no-labels\n     for (i = 1; i < arglm1; i++) { // eslint-disable-line no-labels\n", "diff --git a/website/source/php/array/array_udiff_assoc.html b/website/source/php/array/array_udiff_assoc.html\nindex 3a2834a0f..c4f40105a 100644\n--- a/website/source/php/array/array_udiff_assoc.html\n+++ b/website/source/php/array/array_udiff_assoc.html\n@@ -38,21 +38,21 @@ alias:\n   //   example 1: array_udiff_assoc({0: 'kevin', 1: 'van', 2: 'Zonneveld'}, {0: 'Kevin', 4: 'van', 5: 'Zonneveld'}, function (f_string1, f_string2){var string1 = (f_string1+'').toLowerCase(); var string2 = (f_string2+'').toLowerCase(); if (string1 > string2) return 1; if (string1 === string2) return 0; return -1;})\n   //   returns 1: {1: 'van', 2: 'Zonneveld'}\n \n-  var retArr = {}\n-  var arglm1 = arguments.length - 1\n-  var cb = arguments[arglm1]\n-  var arr = {}\n-  var i = 1\n-  var k1 = ''\n-  var k = ''\n+  const retArr = {}\n+  const arglm1 = arguments.length - 1\n+  let cb = arguments[arglm1]\n+  let arr = {}\n+  let i = 1\n+  let k1 = ''\n+  let k = ''\n \n-  var $global = (typeof window !== 'undefined' ? window : global)\n+  const $global = (typeof window !== 'undefined' ? window : global)\n \n   cb = (typeof cb === 'string')\n     ? $global[cb]\n     : (Object.prototype.toString.call(cb) === '[object Array]')\n-      ? $global[cb[0]][cb[1]]\n-      : cb\n+        ? $global[cb[0]][cb[1]]\n+        : cb\n \n   arr1keys: for (k1 in arr1) { // eslint-disable-line no-labels\n     for (i = 1; i < arglm1; i++) {\n", "diff --git a/website/source/php/array/array_udiff_uassoc.html b/website/source/php/array/array_udiff_uassoc.html\nindex 9da31b5dd..9f1238232 100644\n--- a/website/source/php/array/array_udiff_uassoc.html\n+++ b/website/source/php/array/array_udiff_uassoc.html\n@@ -46,29 +46,29 @@ alias:\n   //   example 1: array_udiff_uassoc($array1, $array2, function (f_string1, f_string2){var string1 = (f_string1+'').toLowerCase(); var string2 = (f_string2+'').toLowerCase(); if (string1 > string2) return 1; if (string1 === string2) return 0; return -1;}, function (f_string1, f_string2){var string1 = (f_string1+'').toLowerCase(); var string2 = (f_string2+'').toLowerCase(); if (string1 > string2) return 1; if (string1 === string2) return 0; return -1;})\n   //   returns 1: {0: 'red', c: 'blue'}\n \n-  var retArr = {}\n-  var arglm1 = arguments.length - 1\n-  var arglm2 = arglm1 - 1\n-  var cb = arguments[arglm1]\n-  var cb0 = arguments[arglm2]\n-  var k1 = ''\n-  var i = 1\n-  var k = ''\n-  var arr = {}\n+  const retArr = {}\n+  const arglm1 = arguments.length - 1\n+  const arglm2 = arglm1 - 1\n+  let cb = arguments[arglm1]\n+  let cb0 = arguments[arglm2]\n+  let k1 = ''\n+  let i = 1\n+  let k = ''\n+  let arr = {}\n \n-  var $global = (typeof window !== 'undefined' ? window : global)\n+  const $global = (typeof window !== 'undefined' ? window : global)\n \n   cb = (typeof cb === 'string')\n     ? $global[cb]\n     : (Object.prototype.toString.call(cb) === '[object Array]')\n-      ? $global[cb[0]][cb[1]]\n-      : cb\n+        ? $global[cb[0]][cb[1]]\n+        : cb\n \n   cb0 = (typeof cb0 === 'string')\n     ? $global[cb0]\n     : (Object.prototype.toString.call(cb0) === '[object Array]')\n-      ? $global[cb0[0]][cb0[1]]\n-      : cb0\n+        ? $global[cb0[0]][cb0[1]]\n+        : cb0\n \n   arr1keys: for (k1 in arr1) { // eslint-disable-line no-labels\n     for (i = 1; i < arglm2; i++) {\n", "diff --git a/website/source/php/array/array_uintersect.html b/website/source/php/array/array_uintersect.html\nindex bfbb84e84..610215776 100644\n--- a/website/source/php/array/array_uintersect.html\n+++ b/website/source/php/array/array_uintersect.html\n@@ -46,22 +46,22 @@ alias:\n   //   example 1: array_uintersect($array1, $array2, function( f_string1, f_string2){var string1 = (f_string1+'').toLowerCase(); var string2 = (f_string2+'').toLowerCase(); if (string1 > string2) return 1; if (string1 === string2) return 0; return -1;})\n   //   returns 1: {a: 'green', b: 'brown', 0: 'red'}\n \n-  var retArr = {}\n-  var arglm1 = arguments.length - 1\n-  var arglm2 = arglm1 - 1\n-  var cb = arguments[arglm1]\n-  var k1 = ''\n-  var i = 1\n-  var arr = {}\n-  var k = ''\n+  const retArr = {}\n+  const arglm1 = arguments.length - 1\n+  const arglm2 = arglm1 - 1\n+  let cb = arguments[arglm1]\n+  let k1 = ''\n+  let i = 1\n+  let arr = {}\n+  let k = ''\n \n-  var $global = (typeof window !== 'undefined' ? window : global)\n+  const $global = (typeof window !== 'undefined' ? window : global)\n \n   cb = (typeof cb === 'string')\n     ? $global[cb]\n     : (Object.prototype.toString.call(cb) === '[object Array]')\n-      ? $global[cb[0]][cb[1]]\n-      : cb\n+        ? $global[cb[0]][cb[1]]\n+        : cb\n \n   arr1keys: for (k1 in arr1) { // eslint-disable-line no-labels\n     arrs: for (i = 1; i < arglm1; i++) { // eslint-disable-line no-labels\n", "diff --git a/website/source/php/array/array_uintersect_uassoc.html b/website/source/php/array/array_uintersect_uassoc.html\nindex 582aeed3c..b95c654d3 100644\n--- a/website/source/php/array/array_uintersect_uassoc.html\n+++ b/website/source/php/array/array_uintersect_uassoc.html\n@@ -46,29 +46,29 @@ alias:\n   //   example 1: array_uintersect_uassoc($array1, $array2, function (f_string1, f_string2){var string1 = (f_string1+'').toLowerCase(); var string2 = (f_string2+'').toLowerCase(); if (string1 > string2) return 1; if (string1 === string2) return 0; return -1;}, function (f_string1, f_string2){var string1 = (f_string1+'').toLowerCase(); var string2 = (f_string2+'').toLowerCase(); if (string1 > string2) return 1; if (string1 === string2) return 0; return -1;})\n   //   returns 1: {a: 'green', b: 'brown'}\n \n-  var retArr = {}\n-  var arglm1 = arguments.length - 1\n-  var arglm2 = arglm1 - 1\n-  var cb = arguments[arglm1]\n-  var cb0 = arguments[arglm2]\n-  var k1 = ''\n-  var i = 1\n-  var k = ''\n-  var arr = {}\n+  const retArr = {}\n+  const arglm1 = arguments.length - 1\n+  const arglm2 = arglm1 - 1\n+  let cb = arguments[arglm1]\n+  let cb0 = arguments[arglm2]\n+  let k1 = ''\n+  let i = 1\n+  let k = ''\n+  let arr = {}\n \n-  var $global = (typeof window !== 'undefined' ? window : global)\n+  const $global = (typeof window !== 'undefined' ? window : global)\n \n   cb = (typeof cb === 'string')\n     ? $global[cb]\n     : (Object.prototype.toString.call(cb) === '[object Array]')\n-      ? $global[cb[0]][cb[1]]\n-      : cb\n+        ? $global[cb[0]][cb[1]]\n+        : cb\n \n   cb0 = (typeof cb0 === 'string')\n     ? $global[cb0]\n     : (Object.prototype.toString.call(cb0) === '[object Array]')\n-      ? $global[cb0[0]][cb0[1]]\n-      : cb0\n+        ? $global[cb0[0]][cb0[1]]\n+        : cb0\n \n   arr1keys: for (k1 in arr1) { // eslint-disable-line no-labels\n     arrs: for (i = 1; i < arglm2; i++) { // eslint-disable-line no-labels\n", "diff --git a/website/source/php/array/array_unique.html b/website/source/php/array/array_unique.html\nindex 923a8c3fb..4d9bed900 100644\n--- a/website/source/php/array/array_unique.html\n+++ b/website/source/php/array/array_unique.html\n@@ -59,12 +59,12 @@ alias:\n   //   example 2: array_unique({'a': 'green', 0: 'red', 'b': 'green', 1: 'blue', 2: 'red'})\n   //   returns 2: {a: 'green', 0: 'red', 1: 'blue'}\n \n-  var key = ''\n-  var tmpArr2 = {}\n-  var val = ''\n+  let key = ''\n+  const tmpArr2 = {}\n+  let val = ''\n \n-  var _arraySearch = function (needle, haystack) {\n-    var fkey = ''\n+  const _arraySearch = function (needle, haystack) {\n+    let fkey = ''\n     for (fkey in haystack) {\n       if (haystack.hasOwnProperty(fkey)) {\n         if ((haystack[fkey] + '') === (needle + '')) {\n", "diff --git a/website/source/php/array/array_unshift.html b/website/source/php/array/array_unshift.html\nindex 216594080..9dfb1ca31 100644\n--- a/website/source/php/array/array_unshift.html\n+++ b/website/source/php/array/array_unshift.html\n@@ -40,7 +40,7 @@ alias:\n   //   example 1: array_unshift(['van', 'Zonneveld'], 'Kevin')\n   //   returns 1: 3\n \n-  var i = arguments.length\n+  let i = arguments.length\n \n   while (--i !== 0) {\n     arguments[0].unshift(arguments[i])\n", "diff --git a/website/source/php/array/array_values.html b/website/source/php/array/array_values.html\nindex f21507e76..5caa07919 100644\n--- a/website/source/php/array/array_values.html\n+++ b/website/source/php/array/array_values.html\n@@ -36,8 +36,8 @@ alias:\n   //   example 1: array_values( {firstname: 'Kevin', surname: 'van Zonneveld'} )\n   //   returns 1: [ 'Kevin', 'van Zonneveld' ]\n \n-  var tmpArr = []\n-  var key = ''\n+  const tmpArr = []\n+  let key = ''\n \n   for (key in input) {\n     tmpArr[tmpArr.length] = input[key]\n", "diff --git a/website/source/php/array/array_walk.html b/website/source/php/array/array_walk.html\nindex f2f4548bc..7dbacd79a 100644\n--- a/website/source/php/array/array_walk.html\n+++ b/website/source/php/array/array_walk.html\n@@ -55,7 +55,7 @@ alias:\n \n   try {\n     if (typeof funcname === 'function') {\n-      for (var key in array) {\n+      for (const key in array) {\n         if (arguments.length > 2) {\n           funcname(array[key], key, userdata)\n         } else {\n", "diff --git a/website/source/php/array/array_walk_recursive.html b/website/source/php/array/array_walk_recursive.html\nindex 5f0f008f3..b40c0477d 100644\n--- a/website/source/php/array/array_walk_recursive.html\n+++ b/website/source/php/array/array_walk_recursive.html\n@@ -50,10 +50,10 @@ alias:\n     return false\n   }\n \n-  for (var key in array) {\n+  for (const key in array) {\n     // apply \"funcname\" recursively only on arrays\n     if (Object.prototype.toString.call(array[key]) === '[object Array]') {\n-      var funcArgs = [array[key], funcname]\n+      const funcArgs = [array[key], funcname]\n       if (arguments.length > 2) {\n         funcArgs.push(userdata)\n       }\n", "diff --git a/website/source/php/array/arsort.html b/website/source/php/array/arsort.html\nindex 0b3a81e96..2e0113c52 100644\n--- a/website/source/php/array/arsort.html\n+++ b/website/source/php/array/arsort.html\n@@ -110,19 +110,19 @@ alias:\n   //   returns 2: {a: 'orange', d: 'lemon', b: 'banana', c: 'apple'}\n   //        test: skip-1\n \n-  var i18lgd = require('../i18n/i18n_loc_get_default')\n-  var strnatcmp = require('../strings/strnatcmp')\n-  var valArr = []\n-  var valArrLen = 0\n-  var k\n-  var i\n-  var sorter\n-  var sortByReference = false\n-  var populateArr = {}\n-\n-  var $global = (typeof window !== 'undefined' ? window : global)\n+  const i18lgd = require('../i18n/i18n_loc_get_default')\n+  const strnatcmp = require('../strings/strnatcmp')\n+  const valArr = []\n+  let valArrLen = 0\n+  let k\n+  let i\n+  let sorter\n+  let sortByReference = false\n+  const populateArr = {}\n+\n+  const $global = (typeof window !== 'undefined' ? window : global)\n   $global.$locutus = $global.$locutus || {}\n-  var $locutus = $global.$locutus\n+  const $locutus = $global.$locutus\n   $locutus.php = $locutus.php || {}\n   $locutus.php.locales = $locutus.php.locales || {}\n \n@@ -150,10 +150,10 @@ alias:\n       break\n     default:\n       sorter = function (b, a) {\n-        var aFloat = parseFloat(a)\n-        var bFloat = parseFloat(b)\n-        var aNumeric = aFloat + '' === a\n-        var bNumeric = bFloat + '' === b\n+        const aFloat = parseFloat(a)\n+        const bFloat = parseFloat(b)\n+        const aNumeric = aFloat + '' === a\n+        const bNumeric = bFloat + '' === b\n \n         if (aNumeric && bNumeric) {\n           return aFloat > bFloat ? 1 : aFloat < bFloat ? -1 : 0\n@@ -168,7 +168,7 @@ alias:\n       break\n   }\n \n-  var iniVal = (typeof require !== 'undefined' ? require('../info/ini_get')('locutus.sortByReference') : undefined) || 'on'\n+  const iniVal = (typeof require !== 'undefined' ? require('../info/ini_get')('locutus.sortByReference') : undefined) || 'on'\n   sortByReference = iniVal === 'on'\n \n   // Get key and value arrays\n", "diff --git a/website/source/php/array/asort.html b/website/source/php/array/asort.html\nindex 578d3370a..ac24622bb 100644\n--- a/website/source/php/array/asort.html\n+++ b/website/source/php/array/asort.html\n@@ -69,7 +69,8 @@ layout: function\n title: PHP's asort in JavaScript\n description: >-\n   Here\u2019s what our current JavaScript equivalent to <a\n-  href=\"https://php.net/manual/en/function.asort.php\">PHP's asort</a> looks like.\n+  href=\"https://php.net/manual/en/function.asort.php\">PHP's asort</a> looks\n+  like.\n function: asort\n category: array\n language: php\n@@ -116,20 +117,20 @@ alias:\n   //   example 2: var $result = $data\n   //   returns 2: {c: 'apple', b: 'banana', d: 'lemon', a: 'orange'}\n \n-  var strnatcmp = require('../strings/strnatcmp')\n-  var i18nlgd = require('../i18n/i18n_loc_get_default')\n+  const strnatcmp = require('../strings/strnatcmp')\n+  const i18nlgd = require('../i18n/i18n_loc_get_default')\n \n-  var valArr = []\n-  var valArrLen = 0\n-  var k\n-  var i\n-  var sorter\n-  var sortByReference = false\n-  var populateArr = {}\n+  const valArr = []\n+  let valArrLen = 0\n+  let k\n+  let i\n+  let sorter\n+  let sortByReference = false\n+  let populateArr = {}\n \n-  var $global = (typeof window !== 'undefined' ? window : global)\n+  const $global = (typeof window !== 'undefined' ? window : global)\n   $global.$locutus = $global.$locutus || {}\n-  var $locutus = $global.$locutus\n+  const $locutus = $global.$locutus\n   $locutus.php = $locutus.php || {}\n   $locutus.php.locales = $locutus.php.locales || {}\n \n@@ -157,10 +158,10 @@ alias:\n       break\n     default:\n       sorter = function (a, b) {\n-        var aFloat = parseFloat(a)\n-        var bFloat = parseFloat(b)\n-        var aNumeric = aFloat + '' === a\n-        var bNumeric = bFloat + '' === b\n+        const aFloat = parseFloat(a)\n+        const bFloat = parseFloat(b)\n+        const aNumeric = aFloat + '' === a\n+        const bNumeric = bFloat + '' === b\n         if (aNumeric && bNumeric) {\n           return aFloat > bFloat ? 1 : aFloat < bFloat ? -1 : 0\n         } else if (aNumeric && !bNumeric) {\n@@ -173,7 +174,7 @@ alias:\n       break\n   }\n \n-  var iniVal = (typeof require !== 'undefined' ? require('../info/ini_get')('locutus.sortByReference') : undefined) || 'on'\n+  const iniVal = (typeof require !== 'undefined' ? require('../info/ini_get')('locutus.sortByReference') : undefined) || 'on'\n   sortByReference = iniVal === 'on'\n   populateArr = sortByReference ? inputArr : populateArr\n \n", "diff --git a/website/source/php/array/count.html b/website/source/php/array/count.html\nindex 3337a3ded..6f56e2f53 100644\n--- a/website/source/php/array/count.html\n+++ b/website/source/php/array/count.html\n@@ -25,7 +25,8 @@ layout: function\n title: PHP's count in JavaScript\n description: >-\n   Here\u2019s what our current JavaScript equivalent to <a\n-  href=\"https://php.net/manual/en/function.count.php\">PHP's count</a> looks like.\n+  href=\"https://php.net/manual/en/function.count.php\">PHP's count</a> looks\n+  like.\n function: count\n category: array\n language: php\n@@ -49,8 +50,8 @@ alias:\n   //   example 2: count({'one' : [1,2,3,4,5]}, 'COUNT_RECURSIVE')\n   //   returns 2: 6\n \n-  var key\n-  var cnt = 0\n+  let key\n+  let cnt = 0\n \n   if (mixedVar === null || typeof mixedVar === 'undefined') {\n     return 0\n", "diff --git a/website/source/php/array/current.html b/website/source/php/array/current.html\nindex 5fc0966e4..e88a97d5d 100644\n--- a/website/source/php/array/current.html\n+++ b/website/source/php/array/current.html\n@@ -38,15 +38,15 @@ alias:\n   //   example 1: current($transport)\n   //   returns 1: 'foot'\n \n-  var $global = (typeof window !== 'undefined' ? window : global)\n+  const $global = (typeof window !== 'undefined' ? window : global)\n   $global.$locutus = $global.$locutus || {}\n-  var $locutus = $global.$locutus\n+  const $locutus = $global.$locutus\n   $locutus.php = $locutus.php || {}\n   $locutus.php.pointers = $locutus.php.pointers || []\n-  var pointers = $locutus.php.pointers\n+  const pointers = $locutus.php.pointers\n \n-  var indexOf = function (value) {\n-    for (var i = 0, length = this.length; i < length; i++) {\n+  const indexOf = function (value) {\n+    for (let i = 0, length = this.length; i < length; i++) {\n       if (this[i] === value) {\n         return i\n       }\n@@ -59,13 +59,13 @@ alias:\n   if (pointers.indexOf(arr) === -1) {\n     pointers.push(arr, 0)\n   }\n-  var arrpos = pointers.indexOf(arr)\n-  var cursor = pointers[arrpos + 1]\n+  const arrpos = pointers.indexOf(arr)\n+  const cursor = pointers[arrpos + 1]\n   if (Object.prototype.toString.call(arr) === '[object Array]') {\n     return arr[cursor] || false\n   }\n-  var ct = 0\n-  for (var k in arr) {\n+  let ct = 0\n+  for (const k in arr) {\n     if (ct === cursor) {\n       return arr[k]\n     }\n", "diff --git a/website/source/php/array/each.html b/website/source/php/array/each.html\nindex f0507ba04..d48025bbb 100644\n--- a/website/source/php/array/each.html\n+++ b/website/source/php/array/each.html\n@@ -37,15 +37,15 @@ alias:\n   //   example 1: each({a: \"apple\", b: \"balloon\"})\n   //   returns 1: {0: \"a\", 1: \"apple\", key: \"a\", value: \"apple\"}\n \n-  var $global = (typeof window !== 'undefined' ? window : global)\n+  const $global = (typeof window !== 'undefined' ? window : global)\n   $global.$locutus = $global.$locutus || {}\n-  var $locutus = $global.$locutus\n+  const $locutus = $global.$locutus\n   $locutus.php = $locutus.php || {}\n   $locutus.php.pointers = $locutus.php.pointers || []\n-  var pointers = $locutus.php.pointers\n+  const pointers = $locutus.php.pointers\n \n-  var indexOf = function (value) {\n-    for (var i = 0, length = this.length; i < length; i++) {\n+  const indexOf = function (value) {\n+    for (let i = 0, length = this.length; i < length; i++) {\n       if (this[i] === value) {\n         return i\n       }\n@@ -59,13 +59,13 @@ alias:\n   if (pointers.indexOf(arr) === -1) {\n     pointers.push(arr, 0)\n   }\n-  var arrpos = pointers.indexOf(arr)\n-  var cursor = pointers[arrpos + 1]\n-  var pos = 0\n+  const arrpos = pointers.indexOf(arr)\n+  const cursor = pointers[arrpos + 1]\n+  let pos = 0\n \n   if (Object.prototype.toString.call(arr) !== '[object Array]') {\n-    var ct = 0\n-    for (var k in arr) {\n+    let ct = 0\n+    for (const k in arr) {\n       if (ct === cursor) {\n         pointers[arrpos + 1] += 1\n         if (each.returnArrayOnly) {\n", "diff --git a/website/source/php/array/end.html b/website/source/php/array/end.html\nindex caa64e07b..57c97cfa4 100644\n--- a/website/source/php/array/end.html\n+++ b/website/source/php/array/end.html\n@@ -51,15 +51,15 @@ alias:\n   //   example 2: end(['Kevin', 'van', 'Zonneveld'])\n   //   returns 2: 'Zonneveld'\n \n-  var $global = (typeof window !== 'undefined' ? window : global)\n+  const $global = (typeof window !== 'undefined' ? window : global)\n   $global.$locutus = $global.$locutus || {}\n-  var $locutus = $global.$locutus\n+  const $locutus = $global.$locutus\n   $locutus.php = $locutus.php || {}\n   $locutus.php.pointers = $locutus.php.pointers || []\n-  var pointers = $locutus.php.pointers\n+  const pointers = $locutus.php.pointers\n \n-  var indexOf = function (value) {\n-    for (var i = 0, length = this.length; i < length; i++) {\n+  const indexOf = function (value) {\n+    for (let i = 0, length = this.length; i < length; i++) {\n       if (this[i] === value) {\n         return i\n       }\n@@ -73,11 +73,11 @@ alias:\n   if (pointers.indexOf(arr) === -1) {\n     pointers.push(arr, 0)\n   }\n-  var arrpos = pointers.indexOf(arr)\n+  const arrpos = pointers.indexOf(arr)\n   if (Object.prototype.toString.call(arr) !== '[object Array]') {\n-    var ct = 0\n-    var val\n-    for (var k in arr) {\n+    let ct = 0\n+    let val\n+    for (const k in arr) {\n       ct++\n       val = arr[k]\n     }\n", "diff --git a/website/source/php/array/in_array.html b/website/source/php/array/in_array.html\nindex 1817001c2..3ba307414 100644\n--- a/website/source/php/array/in_array.html\n+++ b/website/source/php/array/in_array.html\n@@ -32,8 +32,8 @@ layout: function\n title: PHP's in_array in JavaScript\n description: >-\n   Here\u2019s what our current JavaScript equivalent to <a\n-  href=\"https://php.net/manual/en/function.in-array.php\">PHP's in_array</a> looks\n-  like.\n+  href=\"https://php.net/manual/en/function.in-array.php\">PHP's in_array</a>\n+  looks like.\n function: in_array\n category: array\n language: php\n@@ -62,8 +62,8 @@ alias:\n   //   example 4: in_array(1, ['1', '2', '3'], true)\n   //   returns 4: false\n \n-  var key = ''\n-  var strict = !!argStrict\n+  let key = ''\n+  const strict = !!argStrict\n \n   // we prevent the double check (strict && arr[key] === ndl) || (!strict && arr[key] === ndl)\n   // in just one for, in order to improve the performance\n", "diff --git a/website/source/php/array/key.html b/website/source/php/array/key.html\nindex 30bd8f81b..00fad987d 100644\n--- a/website/source/php/array/key.html\n+++ b/website/source/php/array/key.html\n@@ -43,15 +43,15 @@ alias:\n   //   example 1: key($array)\n   //   returns 1: 'fruit1'\n \n-  var $global = (typeof window !== 'undefined' ? window : global)\n+  const $global = (typeof window !== 'undefined' ? window : global)\n   $global.$locutus = $global.$locutus || {}\n-  var $locutus = $global.$locutus\n+  const $locutus = $global.$locutus\n   $locutus.php = $locutus.php || {}\n   $locutus.php.pointers = $locutus.php.pointers || []\n-  var pointers = $locutus.php.pointers\n+  const pointers = $locutus.php.pointers\n \n-  var indexOf = function (value) {\n-    for (var i = 0, length = this.length; i < length; i++) {\n+  const indexOf = function (value) {\n+    for (let i = 0, length = this.length; i < length; i++) {\n       if (this[i] === value) {\n         return i\n       }\n@@ -66,10 +66,10 @@ alias:\n   if (pointers.indexOf(arr) === -1) {\n     pointers.push(arr, 0)\n   }\n-  var cursor = pointers[pointers.indexOf(arr) + 1]\n+  const cursor = pointers[pointers.indexOf(arr) + 1]\n   if (Object.prototype.toString.call(arr) !== '[object Array]') {\n-    var ct = 0\n-    for (var k in arr) {\n+    let ct = 0\n+    for (const k in arr) {\n       if (ct === cursor) {\n         return k\n       }\n", "diff --git a/website/source/php/array/krsort.html b/website/source/php/array/krsort.html\nindex 9aecf0735..eb93eb69f 100644\n--- a/website/source/php/array/krsort.html\n+++ b/website/source/php/array/krsort.html\n@@ -100,20 +100,20 @@ alias:\n   //   example 2: var $result = $data\n   //   returns 2: {3: 'Zonneveld', 2: 'van', 1: 'Kevin'}\n \n-  var i18nlgd = require('../i18n/i18n_loc_get_default')\n-  var strnatcmp = require('../strings/strnatcmp')\n-\n-  var tmpArr = {}\n-  var keys = []\n-  var sorter\n-  var i\n-  var k\n-  var sortByReference = false\n-  var populateArr = {}\n-\n-  var $global = (typeof window !== 'undefined' ? window : global)\n+  const i18nlgd = require('../i18n/i18n_loc_get_default')\n+  const strnatcmp = require('../strings/strnatcmp')\n+\n+  const tmpArr = {}\n+  const keys = []\n+  let sorter\n+  let i\n+  let k\n+  let sortByReference = false\n+  let populateArr = {}\n+\n+  const $global = (typeof window !== 'undefined' ? window : global)\n   $global.$locutus = $global.$locutus || {}\n-  var $locutus = $global.$locutus\n+  const $locutus = $global.$locutus\n   $locutus.php = $locutus.php || {}\n   $locutus.php.locales = $locutus.php.locales || {}\n \n@@ -140,10 +140,10 @@ alias:\n     default:\n       // compare items normally (don't change types)\n       sorter = function (b, a) {\n-        var aFloat = parseFloat(a)\n-        var bFloat = parseFloat(b)\n-        var aNumeric = aFloat + '' === a\n-        var bNumeric = bFloat + '' === b\n+        const aFloat = parseFloat(a)\n+        const bFloat = parseFloat(b)\n+        const aNumeric = aFloat + '' === a\n+        const bNumeric = bFloat + '' === b\n         if (aNumeric && bNumeric) {\n           return aFloat > bFloat ? 1 : aFloat < bFloat ? -1 : 0\n         } else if (aNumeric && !bNumeric) {\n@@ -164,7 +164,7 @@ alias:\n   }\n   keys.sort(sorter)\n \n-  var iniVal = (typeof require !== 'undefined' ? require('../info/ini_get')('locutus.sortByReference') : undefined) || 'on'\n+  const iniVal = (typeof require !== 'undefined' ? require('../info/ini_get')('locutus.sortByReference') : undefined) || 'on'\n   sortByReference = iniVal === 'on'\n   populateArr = sortByReference ? inputArr : populateArr\n \n", "diff --git a/website/source/php/array/ksort.html b/website/source/php/array/ksort.html\nindex b8bd7f113..1d29f60d1 100644\n--- a/website/source/php/array/ksort.html\n+++ b/website/source/php/array/ksort.html\n@@ -54,7 +54,8 @@ layout: function\n title: PHP's ksort in JavaScript\n description: >-\n   Here\u2019s what our current JavaScript equivalent to <a\n-  href=\"https://php.net/manual/en/function.ksort.php\">PHP's ksort</a> looks like.\n+  href=\"https://php.net/manual/en/function.ksort.php\">PHP's ksort</a> looks\n+  like.\n function: ksort\n category: array\n language: php\n@@ -93,20 +94,20 @@ alias:\n   //   example 2: var $result = $data\n   //   returns 2: {1: 'Kevin', 2: 'van', 3: 'Zonneveld'}\n \n-  var i18nlgd = require('../i18n/i18n_loc_get_default')\n-  var strnatcmp = require('../strings/strnatcmp')\n+  const i18nlgd = require('../i18n/i18n_loc_get_default')\n+  const strnatcmp = require('../strings/strnatcmp')\n \n-  var tmpArr = {}\n-  var keys = []\n-  var sorter\n-  var i\n-  var k\n-  var sortByReference = false\n-  var populateArr = {}\n+  const tmpArr = {}\n+  const keys = []\n+  let sorter\n+  let i\n+  let k\n+  let sortByReference = false\n+  let populateArr = {}\n \n-  var $global = (typeof window !== 'undefined' ? window : global)\n+  const $global = (typeof window !== 'undefined' ? window : global)\n   $global.$locutus = $global.$locutus || {}\n-  var $locutus = $global.$locutus\n+  const $locutus = $global.$locutus\n   $locutus.php = $locutus.php || {}\n   $locutus.php.locales = $locutus.php.locales || {}\n \n@@ -132,10 +133,10 @@ alias:\n     default:\n       // case 'SORT_REGULAR': // compare items normally (don't change types)\n       sorter = function (a, b) {\n-        var aFloat = parseFloat(a)\n-        var bFloat = parseFloat(b)\n-        var aNumeric = aFloat + '' === a\n-        var bNumeric = bFloat + '' === b\n+        const aFloat = parseFloat(a)\n+        const bFloat = parseFloat(b)\n+        const aNumeric = aFloat + '' === a\n+        const bNumeric = bFloat + '' === b\n         if (aNumeric && bNumeric) {\n           return aFloat > bFloat ? 1 : aFloat < bFloat ? -1 : 0\n         } else if (aNumeric && !bNumeric) {\n@@ -156,7 +157,7 @@ alias:\n   }\n   keys.sort(sorter)\n \n-  var iniVal = (typeof require !== 'undefined' ? require('../info/ini_get')('locutus.sortByReference') : undefined) || 'on'\n+  const iniVal = (typeof require !== 'undefined' ? require('../info/ini_get')('locutus.sortByReference') : undefined) || 'on'\n   sortByReference = iniVal === 'on'\n   populateArr = sortByReference ? inputArr : populateArr\n \n", "diff --git a/website/source/php/array/natcasesort.html b/website/source/php/array/natcasesort.html\nindex 23fb995b2..6999067eb 100644\n--- a/website/source/php/array/natcasesort.html\n+++ b/website/source/php/array/natcasesort.html\n@@ -49,8 +49,8 @@ layout: function\n title: PHP's natcasesort in JavaScript\n description: >-\n   Here\u2019s what our current JavaScript equivalent to <a\n-  href=\"https://php.net/manual/en/function.natcasesort.php\">PHP's natcasesort</a>\n-  looks like.\n+  href=\"https://php.net/manual/en/function.natcasesort.php\">PHP's\n+  natcasesort</a> looks like.\n function: natcasesort\n category: array\n language: php\n@@ -82,14 +82,14 @@ alias:\n   //   example 1: var $result = $array1\n   //   returns 1: {a: 'IMG0.png', e: 'img1.png', d: 'img2.png', f: 'IMG3.png', c: 'img10.png', b: 'img12.png'}\n \n-  var strnatcasecmp = require('../strings/strnatcasecmp')\n-  var valArr = []\n-  var k\n-  var i\n-  var sortByReference = false\n-  var populateArr = {}\n+  const strnatcasecmp = require('../strings/strnatcasecmp')\n+  const valArr = []\n+  let k\n+  let i\n+  let sortByReference = false\n+  let populateArr = {}\n \n-  var iniVal = (typeof require !== 'undefined' ? require('../info/ini_get')('locutus.sortByReference') : undefined) || 'on'\n+  const iniVal = (typeof require !== 'undefined' ? require('../info/ini_get')('locutus.sortByReference') : undefined) || 'on'\n   sortByReference = iniVal === 'on'\n   populateArr = sortByReference ? inputArr : populateArr\n \n", "diff --git a/website/source/php/array/natsort.html b/website/source/php/array/natsort.html\nindex 6361e46e7..7f00eae10 100644\n--- a/website/source/php/array/natsort.html\n+++ b/website/source/php/array/natsort.html\n@@ -71,15 +71,15 @@ alias:\n   //   example 1: var $result = $array1\n   //   returns 1: {d: 'img1.png', c: 'img2.png', b: 'img10.png', a: 'img12.png'}\n \n-  var strnatcmp = require('../strings/strnatcmp')\n+  const strnatcmp = require('../strings/strnatcmp')\n \n-  var valArr = []\n-  var k\n-  var i\n-  var sortByReference = false\n-  var populateArr = {}\n+  const valArr = []\n+  let k\n+  let i\n+  let sortByReference = false\n+  let populateArr = {}\n \n-  var iniVal = (typeof require !== 'undefined' ? require('../info/ini_get')('locutus.sortByReference') : undefined) || 'on'\n+  const iniVal = (typeof require !== 'undefined' ? require('../info/ini_get')('locutus.sortByReference') : undefined) || 'on'\n   sortByReference = iniVal === 'on'\n   populateArr = sortByReference ? inputArr : populateArr\n \n", "diff --git a/website/source/php/array/next.html b/website/source/php/array/next.html\nindex bfea431a8..3329b12d3 100644\n--- a/website/source/php/array/next.html\n+++ b/website/source/php/array/next.html\n@@ -39,15 +39,15 @@ alias:\n   //   example 1: next($transport)\n   //   returns 1: 'car'\n \n-  var $global = (typeof window !== 'undefined' ? window : global)\n+  const $global = (typeof window !== 'undefined' ? window : global)\n   $global.$locutus = $global.$locutus || {}\n-  var $locutus = $global.$locutus\n+  const $locutus = $global.$locutus\n   $locutus.php = $locutus.php || {}\n   $locutus.php.pointers = $locutus.php.pointers || []\n-  var pointers = $locutus.php.pointers\n+  const pointers = $locutus.php.pointers\n \n-  var indexOf = function (value) {\n-    for (var i = 0, length = this.length; i < length; i++) {\n+  const indexOf = function (value) {\n+    for (let i = 0, length = this.length; i < length; i++) {\n       if (this[i] === value) {\n         return i\n       }\n@@ -61,11 +61,11 @@ alias:\n   if (pointers.indexOf(arr) === -1) {\n     pointers.push(arr, 0)\n   }\n-  var arrpos = pointers.indexOf(arr)\n-  var cursor = pointers[arrpos + 1]\n+  const arrpos = pointers.indexOf(arr)\n+  const cursor = pointers[arrpos + 1]\n   if (Object.prototype.toString.call(arr) !== '[object Array]') {\n-    var ct = 0\n-    for (var k in arr) {\n+    let ct = 0\n+    for (const k in arr) {\n       if (ct === cursor + 1) {\n         pointers[arrpos + 1] += 1\n         return arr[k]\n", "diff --git a/website/source/php/array/pos.html b/website/source/php/array/pos.html\nindex 23c1289ba..34248dde9 100644\n--- a/website/source/php/array/pos.html\n+++ b/website/source/php/array/pos.html\n@@ -37,7 +37,7 @@ alias:\n   //   example 1: pos($transport)\n   //   returns 1: 'foot'\n \n-  var current = require('../array/current')\n+  const current = require('../array/current')\n   return current(arr)\n }\n {% endcodeblock %}\n\\ No newline at end of file\n", "diff --git a/website/source/php/array/prev.html b/website/source/php/array/prev.html\nindex 766eb49fd..21e274da7 100644\n--- a/website/source/php/array/prev.html\n+++ b/website/source/php/array/prev.html\n@@ -37,15 +37,15 @@ alias:\n   //   example 1: prev($transport)\n   //   returns 1: false\n \n-  var $global = (typeof window !== 'undefined' ? window : global)\n+  const $global = (typeof window !== 'undefined' ? window : global)\n   $global.$locutus = $global.$locutus || {}\n-  var $locutus = $global.$locutus\n+  const $locutus = $global.$locutus\n   $locutus.php = $locutus.php || {}\n   $locutus.php.pointers = $locutus.php.pointers || []\n-  var pointers = $locutus.php.pointers\n+  const pointers = $locutus.php.pointers\n \n-  var indexOf = function (value) {\n-    for (var i = 0, length = this.length; i < length; i++) {\n+  const indexOf = function (value) {\n+    for (let i = 0, length = this.length; i < length; i++) {\n       if (this[i] === value) {\n         return i\n       }\n@@ -56,14 +56,14 @@ alias:\n   if (!pointers.indexOf) {\n     pointers.indexOf = indexOf\n   }\n-  var arrpos = pointers.indexOf(arr)\n-  var cursor = pointers[arrpos + 1]\n+  const arrpos = pointers.indexOf(arr)\n+  const cursor = pointers[arrpos + 1]\n   if (pointers.indexOf(arr) === -1 || cursor === 0) {\n     return false\n   }\n   if (Object.prototype.toString.call(arr) !== '[object Array]') {\n-    var ct = 0\n-    for (var k in arr) {\n+    let ct = 0\n+    for (const k in arr) {\n       if (ct === cursor - 1) {\n         pointers[arrpos + 1] -= 1\n         return arr[k]\n", "diff --git a/website/source/php/array/range.html b/website/source/php/array/range.html\nindex 60c59cf23..3f388d65e 100644\n--- a/website/source/php/array/range.html\n+++ b/website/source/php/array/range.html\n@@ -21,7 +21,8 @@ layout: function\n title: PHP's range in JavaScript\n description: >-\n   Here\u2019s what our current JavaScript equivalent to <a\n-  href=\"https://php.net/manual/en/function.range.php\">PHP's range</a> looks like.\n+  href=\"https://php.net/manual/en/function.range.php\">PHP's range</a> looks\n+  like.\n function: range\n category: array\n language: php\n@@ -44,12 +45,12 @@ alias:\n   //   example 4: range( 'c', 'a' )\n   //   returns 4: ['c', 'b', 'a']\n \n-  var matrix = []\n-  var iVal\n-  var endval\n-  var plus\n-  var walker = step || 1\n-  var chars = false\n+  const matrix = []\n+  let iVal\n+  let endval\n+  let plus\n+  const walker = step || 1\n+  let chars = false\n \n   if (!isNaN(low) && !isNaN(high)) {\n     iVal = low\n", "diff --git a/website/source/php/array/reset.html b/website/source/php/array/reset.html\nindex cccdf2470..be0088eb8 100644\n--- a/website/source/php/array/reset.html\n+++ b/website/source/php/array/reset.html\n@@ -20,7 +20,8 @@ layout: function\n title: PHP's reset in JavaScript\n description: >-\n   Here\u2019s what our current JavaScript equivalent to <a\n-  href=\"https://php.net/manual/en/function.reset.php\">PHP's reset</a> looks like.\n+  href=\"https://php.net/manual/en/function.reset.php\">PHP's reset</a> looks\n+  like.\n function: reset\n category: array\n language: php\n@@ -40,15 +41,15 @@ alias:\n   //   example 1: reset({0: 'Kevin', 1: 'van', 2: 'Zonneveld'})\n   //   returns 1: 'Kevin'\n \n-  var $global = (typeof window !== 'undefined' ? window : global)\n+  const $global = (typeof window !== 'undefined' ? window : global)\n   $global.$locutus = $global.$locutus || {}\n-  var $locutus = $global.$locutus\n+  const $locutus = $global.$locutus\n   $locutus.php = $locutus.php || {}\n   $locutus.php.pointers = $locutus.php.pointers || []\n-  var pointers = $locutus.php.pointers\n+  const pointers = $locutus.php.pointers\n \n-  var indexOf = function (value) {\n-    for (var i = 0, length = this.length; i < length; i++) {\n+  const indexOf = function (value) {\n+    for (let i = 0, length = this.length; i < length; i++) {\n       if (this[i] === value) {\n         return i\n       }\n@@ -62,9 +63,9 @@ alias:\n   if (pointers.indexOf(arr) === -1) {\n     pointers.push(arr, 0)\n   }\n-  var arrpos = pointers.indexOf(arr)\n+  const arrpos = pointers.indexOf(arr)\n   if (Object.prototype.toString.call(arr) !== '[object Array]') {\n-    for (var k in arr) {\n+    for (const k in arr) {\n       if (pointers.indexOf(arr) === -1) {\n         pointers.push(arr, 0)\n       } else {\n", "diff --git a/website/source/php/array/rsort.html b/website/source/php/array/rsort.html\nindex 181f51aff..7792ccf8d 100644\n--- a/website/source/php/array/rsort.html\n+++ b/website/source/php/array/rsort.html\n@@ -61,7 +61,8 @@ layout: function\n title: PHP's rsort in JavaScript\n description: >-\n   Here\u2019s what our current JavaScript equivalent to <a\n-  href=\"https://php.net/manual/en/function.rsort.php\">PHP's rsort</a> looks like.\n+  href=\"https://php.net/manual/en/function.rsort.php\">PHP's rsort</a> looks\n+  like.\n function: rsort\n category: array\n language: php\n@@ -104,18 +105,18 @@ alias:\n   //   returns 2: {0: 'orange', 1: 'lemon', 2: 'banana', 3: 'apple'}\n   //        test: skip-1\n \n-  var i18nlgd = require('../i18n/i18n_loc_get_default')\n-  var strnatcmp = require('../strings/strnatcmp')\n+  const i18nlgd = require('../i18n/i18n_loc_get_default')\n+  const strnatcmp = require('../strings/strnatcmp')\n \n-  var sorter\n-  var i\n-  var k\n-  var sortByReference = false\n-  var populateArr = {}\n+  let sorter\n+  let i\n+  let k\n+  let sortByReference = false\n+  let populateArr = {}\n \n-  var $global = (typeof window !== 'undefined' ? window : global)\n+  const $global = (typeof window !== 'undefined' ? window : global)\n   $global.$locutus = $global.$locutus || {}\n-  var $locutus = $global.$locutus\n+  const $locutus = $global.$locutus\n   $locutus.php = $locutus.php || {}\n   $locutus.php.locales = $locutus.php.locales || {}\n \n@@ -142,10 +143,10 @@ alias:\n     default:\n       // compare items normally (don't change types)\n       sorter = function (b, a) {\n-        var aFloat = parseFloat(a)\n-        var bFloat = parseFloat(b)\n-        var aNumeric = aFloat + '' === a\n-        var bNumeric = bFloat + '' === b\n+        const aFloat = parseFloat(a)\n+        const bFloat = parseFloat(b)\n+        const aNumeric = aFloat + '' === a\n+        const bNumeric = bFloat + '' === b\n         if (aNumeric && bNumeric) {\n           return aFloat > bFloat ? 1 : aFloat < bFloat ? -1 : 0\n         } else if (aNumeric && !bNumeric) {\n@@ -158,10 +159,10 @@ alias:\n       break\n   }\n \n-  var iniVal = (typeof require !== 'undefined' ? require('../info/ini_get')('locutus.sortByReference') : undefined) || 'on'\n+  const iniVal = (typeof require !== 'undefined' ? require('../info/ini_get')('locutus.sortByReference') : undefined) || 'on'\n   sortByReference = iniVal === 'on'\n   populateArr = sortByReference ? inputArr : populateArr\n-  var valArr = []\n+  const valArr = []\n \n   for (k in inputArr) {\n     // Get key and value arrays\n", "diff --git a/website/source/php/array/shuffle.html b/website/source/php/array/shuffle.html\nindex 9da5b927c..03740c3d2 100644\n--- a/website/source/php/array/shuffle.html\n+++ b/website/source/php/array/shuffle.html\n@@ -48,11 +48,11 @@ alias:\n   //   example 1: var $result = $data.q\n   //   returns 1: 5\n \n-  var valArr = []\n-  var k = ''\n-  var i = 0\n-  var sortByReference = false\n-  var populateArr = []\n+  const valArr = []\n+  let k = ''\n+  let i = 0\n+  let sortByReference = false\n+  let populateArr = []\n \n   for (k in inputArr) {\n     // Get key and value arrays\n@@ -67,7 +67,7 @@ alias:\n     return 0.5 - Math.random()\n   })\n \n-  var iniVal = (typeof require !== 'undefined' ? require('../info/ini_get')('locutus.sortByReference') : undefined) || 'on'\n+  const iniVal = (typeof require !== 'undefined' ? require('../info/ini_get')('locutus.sortByReference') : undefined) || 'on'\n   sortByReference = iniVal === 'on'\n   populateArr = sortByReference ? inputArr : populateArr\n \n", "diff --git a/website/source/php/array/sizeof.html b/website/source/php/array/sizeof.html\nindex 43ae2ce26..a9c71af5a 100644\n--- a/website/source/php/array/sizeof.html\n+++ b/website/source/php/array/sizeof.html\n@@ -37,7 +37,7 @@ alias:\n   //   example 2: sizeof({'one' : [1,2,3,4,5]}, 'COUNT_RECURSIVE')\n   //   returns 2: 6\n \n-  var count = require('../array/count')\n+  const count = require('../array/count')\n \n   return count(mixedVar, mode)\n }\n", "diff --git a/website/source/php/array/sort.html b/website/source/php/array/sort.html\nindex 150464726..491cd2c91 100644\n--- a/website/source/php/array/sort.html\n+++ b/website/source/php/array/sort.html\n@@ -104,17 +104,17 @@ alias:\n   //   returns 2: {0: 'apple', 1: 'banana', 2: 'lemon', 3: 'orange'}\n   //        test: skip-1\n \n-  var i18nlgd = require('../i18n/i18n_loc_get_default')\n+  const i18nlgd = require('../i18n/i18n_loc_get_default')\n \n-  var sorter\n-  var i\n-  var k\n-  var sortByReference = false\n-  var populateArr = {}\n+  let sorter\n+  let i\n+  let k\n+  let sortByReference = false\n+  let populateArr = {}\n \n-  var $global = (typeof window !== 'undefined' ? window : global)\n+  const $global = (typeof window !== 'undefined' ? window : global)\n   $global.$locutus = $global.$locutus || {}\n-  var $locutus = $global.$locutus\n+  const $locutus = $global.$locutus\n   $locutus.php = $locutus.php || {}\n   $locutus.php.locales = $locutus.php.locales || {}\n \n@@ -144,10 +144,10 @@ alias:\n     case 'SORT_REGULAR':\n     default:\n       sorter = function (a, b) {\n-        var aFloat = parseFloat(a)\n-        var bFloat = parseFloat(b)\n-        var aNumeric = aFloat + '' === a\n-        var bNumeric = bFloat + '' === b\n+        const aFloat = parseFloat(a)\n+        const bFloat = parseFloat(b)\n+        const aNumeric = aFloat + '' === a\n+        const bNumeric = bFloat + '' === b\n \n         if (aNumeric && bNumeric) {\n           return aFloat > bFloat ? 1 : aFloat < bFloat ? -1 : 0\n@@ -162,11 +162,11 @@ alias:\n       break\n   }\n \n-  var iniVal = (typeof require !== 'undefined' ? require('../info/ini_get')('locutus.sortByReference') : undefined) || 'on'\n+  const iniVal = (typeof require !== 'undefined' ? require('../info/ini_get')('locutus.sortByReference') : undefined) || 'on'\n   sortByReference = iniVal === 'on'\n   populateArr = sortByReference ? inputArr : populateArr\n \n-  var valArr = []\n+  const valArr = []\n   for (k in inputArr) {\n     // Get key and value arrays\n     if (inputArr.hasOwnProperty(k)) {\n", "diff --git a/website/source/php/array/uasort.html b/website/source/php/array/uasort.html\nindex 9bd176f8d..40cf81065 100644\n--- a/website/source/php/array/uasort.html\n+++ b/website/source/php/array/uasort.html\n@@ -77,11 +77,11 @@ alias:\n   //   example 1: var $result = $fruits\n   //   returns 1: {c: 'apple', b: 'banana', d: 'lemon', a: 'orange'}\n \n-  var valArr = []\n-  var k = ''\n-  var i = 0\n-  var sortByReference = false\n-  var populateArr = {}\n+  const valArr = []\n+  let k = ''\n+  let i = 0\n+  let sortByReference = false\n+  let populateArr = {}\n \n   if (typeof sorter === 'string') {\n     sorter = this[sorter]\n@@ -89,7 +89,7 @@ alias:\n     sorter = this[sorter[0]][sorter[1]]\n   }\n \n-  var iniVal = (typeof require !== 'undefined' ? require('../info/ini_get')('locutus.sortByReference') : undefined) || 'on'\n+  const iniVal = (typeof require !== 'undefined' ? require('../info/ini_get')('locutus.sortByReference') : undefined) || 'on'\n   sortByReference = iniVal === 'on'\n   populateArr = sortByReference ? inputArr : populateArr\n \n", "diff --git a/website/source/php/array/uksort.html b/website/source/php/array/uksort.html\nindex 0903f6029..5906c1633 100644\n--- a/website/source/php/array/uksort.html\n+++ b/website/source/php/array/uksort.html\n@@ -75,12 +75,12 @@ alias:\n   //   example 1: var $result = $data\n   //   returns 1: {a: 'orange', b: 'banana', c: 'apple', d: 'lemon'}\n \n-  var tmpArr = {}\n-  var keys = []\n-  var i = 0\n-  var k = ''\n-  var sortByReference = false\n-  var populateArr = {}\n+  const tmpArr = {}\n+  const keys = []\n+  let i = 0\n+  let k = ''\n+  let sortByReference = false\n+  let populateArr = {}\n \n   if (typeof sorter === 'string') {\n     sorter = this.window[sorter]\n@@ -104,7 +104,7 @@ alias:\n     return false\n   }\n \n-  var iniVal = (typeof require !== 'undefined' ? require('../info/ini_get')('locutus.sortByReference') : undefined) || 'on'\n+  const iniVal = (typeof require !== 'undefined' ? require('../info/ini_get')('locutus.sortByReference') : undefined) || 'on'\n   sortByReference = iniVal === 'on'\n   populateArr = sortByReference ? inputArr : populateArr\n \n", "diff --git a/website/source/php/array/usort.html b/website/source/php/array/usort.html\nindex 8483a06fb..39b6c431b 100644\n--- a/website/source/php/array/usort.html\n+++ b/website/source/php/array/usort.html\n@@ -39,7 +39,8 @@ layout: function\n title: PHP's usort in JavaScript\n description: >-\n   Here\u2019s what our current JavaScript equivalent to <a\n-  href=\"https://php.net/manual/en/function.usort.php\">PHP's usort</a> looks like.\n+  href=\"https://php.net/manual/en/function.usort.php\">PHP's usort</a> looks\n+  like.\n function: usort\n category: array\n language: php\n@@ -68,11 +69,11 @@ alias:\n   //   example 1: var $result = $stuff\n   //   returns 1: {0: '1', 1: '3', 2: '4', 3: '11'}\n \n-  var valArr = []\n-  var k = ''\n-  var i = 0\n-  var sortByReference = false\n-  var populateArr = {}\n+  const valArr = []\n+  let k = ''\n+  let i = 0\n+  let sortByReference = false\n+  let populateArr = {}\n \n   if (typeof sorter === 'string') {\n     sorter = this[sorter]\n@@ -80,7 +81,7 @@ alias:\n     sorter = this[sorter[0]][sorter[1]]\n   }\n \n-  var iniVal = (typeof require !== 'undefined' ? require('../info/ini_get')('locutus.sortByReference') : undefined) || 'on'\n+  const iniVal = (typeof require !== 'undefined' ? require('../info/ini_get')('locutus.sortByReference') : undefined) || 'on'\n   sortByReference = iniVal === 'on'\n   populateArr = sortByReference ? inputArr : populateArr\n \n", "diff --git a/website/source/php/bc/bcadd.html b/website/source/php/bc/bcadd.html\nindex 80b0de8ac..2ffbf7044 100644\n--- a/website/source/php/bc/bcadd.html\n+++ b/website/source/php/bc/bcadd.html\n@@ -19,7 +19,8 @@ layout: function\n title: PHP's bcadd in JavaScript\n description: >-\n   Here\u2019s what our current JavaScript equivalent to <a\n-  href=\"https://php.net/manual/en/function.bcadd.php\">PHP's bcadd</a> looks like.\n+  href=\"https://php.net/manual/en/function.bcadd.php\">PHP's bcadd</a> looks\n+  like.\n function: bcadd\n category: bc\n language: php\n@@ -40,10 +41,10 @@ alias:\n   //   example 3: bcadd('1928372132132819737213', '8728932001983192837219398127471', 2)\n   //   returns 3: '8728932003911564969352217864684.00'\n \n-  var bc = require('../_helpers/_bc')\n-  var libbcmath = bc()\n+  const bc = require('../_helpers/_bc')\n+  const libbcmath = bc()\n \n-  var first, second, result\n+  let first, second, result\n \n   if (typeof scale === 'undefined') {\n     scale = libbcmath.scale\n", "diff --git a/website/source/php/bc/bccomp.html b/website/source/php/bc/bccomp.html\nindex a3c19b8a6..e83dbc665 100644\n--- a/website/source/php/bc/bccomp.html\n+++ b/website/source/php/bc/bccomp.html\n@@ -45,11 +45,11 @@ alias:\n   //   example 4: bccomp('97321', '2321')\n   //   returns 4: 1\n \n-  var bc = require('../_helpers/_bc')\n-  var libbcmath = bc()\n+  const bc = require('../_helpers/_bc')\n+  const libbcmath = bc()\n \n   // bc_num\n-  var first, second\n+  let first, second\n   if (typeof scale === 'undefined') {\n     scale = libbcmath.scale\n   }\n", "diff --git a/website/source/php/bc/bcdiv.html b/website/source/php/bc/bcdiv.html\nindex 56f8c9370..ad338d8ea 100644\n--- a/website/source/php/bc/bcdiv.html\n+++ b/website/source/php/bc/bcdiv.html\n@@ -21,7 +21,8 @@ layout: function\n title: PHP's bcdiv in JavaScript\n description: >-\n   Here\u2019s what our current JavaScript equivalent to <a\n-  href=\"https://php.net/manual/en/function.bcdiv.php\">PHP's bcdiv</a> looks like.\n+  href=\"https://php.net/manual/en/function.bcdiv.php\">PHP's bcdiv</a> looks\n+  like.\n function: bcdiv\n category: bc\n language: php\n@@ -44,10 +45,10 @@ alias:\n   //   example 4: bcdiv('8728932001983192837219398127471', '1928372132132819737213', 2)\n   //   returns 4: '4526580661.75'\n \n-  var _bc = require('../_helpers/_bc')\n-  var libbcmath = _bc()\n+  const _bc = require('../_helpers/_bc')\n+  const libbcmath = _bc()\n \n-  var first, second, result\n+  let first, second, result\n \n   if (typeof scale === 'undefined') {\n     scale = libbcmath.scale\n", "diff --git a/website/source/php/bc/bcmul.html b/website/source/php/bc/bcmul.html\nindex 9b267370e..b7d5b5102 100644\n--- a/website/source/php/bc/bcmul.html\n+++ b/website/source/php/bc/bcmul.html\n@@ -21,7 +21,8 @@ layout: function\n title: PHP's bcmul in JavaScript\n description: >-\n   Here\u2019s what our current JavaScript equivalent to <a\n-  href=\"https://php.net/manual/en/function.bcmul.php\">PHP's bcmul</a> looks like.\n+  href=\"https://php.net/manual/en/function.bcmul.php\">PHP's bcmul</a> looks\n+  like.\n function: bcmul\n category: bc\n language: php\n@@ -44,10 +45,10 @@ alias:\n   //   example 4: bcmul('2.5', '1.5', 2)\n   //   returns 4: '3.75'\n \n-  var _bc = require('../_helpers/_bc')\n-  var libbcmath = _bc()\n+  const _bc = require('../_helpers/_bc')\n+  const libbcmath = _bc()\n \n-  var first, second, result\n+  let first, second, result\n \n   if (typeof scale === 'undefined') {\n     scale = libbcmath.scale\n", "diff --git a/website/source/php/bc/bcround.html b/website/source/php/bc/bcround.html\nindex 9667a1035..d72d5ab9c 100644\n--- a/website/source/php/bc/bcround.html\n+++ b/website/source/php/bc/bcround.html\n@@ -33,11 +33,11 @@ alias:\n   //   example 1: bcround(1, 2)\n   //   returns 1: '1.00'\n \n-  var _bc = require('../_helpers/_bc')\n-  var libbcmath = _bc()\n+  const _bc = require('../_helpers/_bc')\n+  const libbcmath = _bc()\n \n-  var temp, result, digit\n-  var rightOperand\n+  let temp, result, digit\n+  let rightOperand\n \n   // create number\n   temp = libbcmath.bc_init_num()\n", "diff --git a/website/source/php/bc/bcscale.html b/website/source/php/bc/bcscale.html\nindex 9d939ebac..ac0a37c77 100644\n--- a/website/source/php/bc/bcscale.html\n+++ b/website/source/php/bc/bcscale.html\n@@ -33,8 +33,8 @@ alias:\n   //   example 1: bcscale(1)\n   //   returns 1: true\n \n-  var _bc = require('../_helpers/_bc')\n-  var libbcmath = _bc()\n+  const _bc = require('../_helpers/_bc')\n+  const libbcmath = _bc()\n \n   scale = parseInt(scale, 10)\n   if (isNaN(scale)) {\n", "diff --git a/website/source/php/bc/bcsub.html b/website/source/php/bc/bcsub.html\nindex ef201a596..7c8bcd702 100644\n--- a/website/source/php/bc/bcsub.html\n+++ b/website/source/php/bc/bcsub.html\n@@ -19,7 +19,8 @@ layout: function\n title: PHP's bcsub in JavaScript\n description: >-\n   Here\u2019s what our current JavaScript equivalent to <a\n-  href=\"https://php.net/manual/en/function.bcsub.php\">PHP's bcsub</a> looks like.\n+  href=\"https://php.net/manual/en/function.bcsub.php\">PHP's bcsub</a> looks\n+  like.\n function: bcsub\n category: bc\n language: php\n@@ -40,10 +41,10 @@ alias:\n   //   example 3: bcsub('8728932001983192837219398127471', '1928372132132819737213', 2)\n   //   returns 3: '8728932000054820705086578390258.00'\n \n-  var _bc = require('../_helpers/_bc')\n-  var libbcmath = _bc()\n+  const _bc = require('../_helpers/_bc')\n+  const libbcmath = _bc()\n \n-  var first, second, result\n+  let first, second, result\n \n   if (typeof scale === 'undefined') {\n     scale = libbcmath.scale\n", "diff --git a/website/source/php/ctype/ctype_alnum.html b/website/source/php/ctype/ctype_alnum.html\nindex 7566c2533..0f88a8cd6 100644\n--- a/website/source/php/ctype/ctype_alnum.html\n+++ b/website/source/php/ctype/ctype_alnum.html\n@@ -15,8 +15,8 @@ layout: function\n title: PHP's ctype_alnum in JavaScript\n description: >-\n   Here\u2019s what our current JavaScript equivalent to <a\n-  href=\"https://php.net/manual/en/function.ctype-alnum.php\">PHP's ctype_alnum</a>\n-  looks like.\n+  href=\"https://php.net/manual/en/function.ctype-alnum.php\">PHP's\n+  ctype_alnum</a> looks like.\n function: ctype_alnum\n category: ctype\n language: php\n@@ -33,7 +33,7 @@ alias:\n   //   example 1: ctype_alnum('AbC12')\n   //   returns 1: true\n \n-  var setlocale = require('../strings/setlocale')\n+  const setlocale = require('../strings/setlocale')\n   if (typeof text !== 'string') {\n     return false\n   }\n@@ -41,10 +41,10 @@ alias:\n   // ensure setup of localization variables takes place\n   setlocale('LC_ALL', 0)\n \n-  var $global = (typeof window !== 'undefined' ? window : global)\n+  const $global = (typeof window !== 'undefined' ? window : global)\n   $global.$locutus = $global.$locutus || {}\n-  var $locutus = $global.$locutus\n-  var p = $locutus.php\n+  const $locutus = $global.$locutus\n+  const p = $locutus.php\n \n   return text.search(p.locales[p.localeCategories.LC_CTYPE].LC_CTYPE.an) !== -1\n }\n", "diff --git a/website/source/php/ctype/ctype_alpha.html b/website/source/php/ctype/ctype_alpha.html\nindex 308facbce..94cf17f25 100644\n--- a/website/source/php/ctype/ctype_alpha.html\n+++ b/website/source/php/ctype/ctype_alpha.html\n@@ -15,8 +15,8 @@ layout: function\n title: PHP's ctype_alpha in JavaScript\n description: >-\n   Here\u2019s what our current JavaScript equivalent to <a\n-  href=\"https://php.net/manual/en/function.ctype-alpha.php\">PHP's ctype_alpha</a>\n-  looks like.\n+  href=\"https://php.net/manual/en/function.ctype-alpha.php\">PHP's\n+  ctype_alpha</a> looks like.\n function: ctype_alpha\n category: ctype\n language: php\n@@ -33,17 +33,17 @@ alias:\n   //   example 1: ctype_alpha('Az')\n   //   returns 1: true\n \n-  var setlocale = require('../strings/setlocale')\n+  const setlocale = require('../strings/setlocale')\n   if (typeof text !== 'string') {\n     return false\n   }\n   // ensure setup of localization variables takes place\n   setlocale('LC_ALL', 0)\n \n-  var $global = (typeof window !== 'undefined' ? window : global)\n+  const $global = (typeof window !== 'undefined' ? window : global)\n   $global.$locutus = $global.$locutus || {}\n-  var $locutus = $global.$locutus\n-  var p = $locutus.php\n+  const $locutus = $global.$locutus\n+  const p = $locutus.php\n \n   return text.search(p.locales[p.localeCategories.LC_CTYPE].LC_CTYPE.al) !== -1\n }\n", "diff --git a/website/source/php/ctype/ctype_cntrl.html b/website/source/php/ctype/ctype_cntrl.html\nindex 8bec2de43..dbe10af96 100644\n--- a/website/source/php/ctype/ctype_cntrl.html\n+++ b/website/source/php/ctype/ctype_cntrl.html\n@@ -17,8 +17,8 @@ layout: function\n title: PHP's ctype_cntrl in JavaScript\n description: >-\n   Here\u2019s what our current JavaScript equivalent to <a\n-  href=\"https://php.net/manual/en/function.ctype-cntrl.php\">PHP's ctype_cntrl</a>\n-  looks like.\n+  href=\"https://php.net/manual/en/function.ctype-cntrl.php\">PHP's\n+  ctype_cntrl</a> looks like.\n function: ctype_cntrl\n category: ctype\n language: php\n@@ -37,17 +37,17 @@ alias:\n   //   example 2: ctype_cntrl('\\u001F')\n   //   returns 2: true\n \n-  var setlocale = require('../strings/setlocale')\n+  const setlocale = require('../strings/setlocale')\n   if (typeof text !== 'string') {\n     return false\n   }\n   // ensure setup of localization variables takes place\n   setlocale('LC_ALL', 0)\n \n-  var $global = (typeof window !== 'undefined' ? window : global)\n+  const $global = (typeof window !== 'undefined' ? window : global)\n   $global.$locutus = $global.$locutus || {}\n-  var $locutus = $global.$locutus\n-  var p = $locutus.php\n+  const $locutus = $global.$locutus\n+  const p = $locutus.php\n \n   return text.search(p.locales[p.localeCategories.LC_CTYPE].LC_CTYPE.ct) !== -1\n }\n", "diff --git a/website/source/php/ctype/ctype_digit.html b/website/source/php/ctype/ctype_digit.html\nindex 2c3580772..33025b44b 100644\n--- a/website/source/php/ctype/ctype_digit.html\n+++ b/website/source/php/ctype/ctype_digit.html\n@@ -15,8 +15,8 @@ layout: function\n title: PHP's ctype_digit in JavaScript\n description: >-\n   Here\u2019s what our current JavaScript equivalent to <a\n-  href=\"https://php.net/manual/en/function.ctype-digit.php\">PHP's ctype_digit</a>\n-  looks like.\n+  href=\"https://php.net/manual/en/function.ctype-digit.php\">PHP's\n+  ctype_digit</a> looks like.\n function: ctype_digit\n category: ctype\n language: php\n@@ -33,17 +33,17 @@ alias:\n   //   example 1: ctype_digit('150')\n   //   returns 1: true\n \n-  var setlocale = require('../strings/setlocale')\n+  const setlocale = require('../strings/setlocale')\n   if (typeof text !== 'string') {\n     return false\n   }\n   // ensure setup of localization variables takes place\n   setlocale('LC_ALL', 0)\n \n-  var $global = (typeof window !== 'undefined' ? window : global)\n+  const $global = (typeof window !== 'undefined' ? window : global)\n   $global.$locutus = $global.$locutus || {}\n-  var $locutus = $global.$locutus\n-  var p = $locutus.php\n+  const $locutus = $global.$locutus\n+  const p = $locutus.php\n \n   return text.search(p.locales[p.localeCategories.LC_CTYPE].LC_CTYPE.dg) !== -1\n }\n", "diff --git a/website/source/php/ctype/ctype_graph.html b/website/source/php/ctype/ctype_graph.html\nindex 0757b1f37..bb4d411c2 100644\n--- a/website/source/php/ctype/ctype_graph.html\n+++ b/website/source/php/ctype/ctype_graph.html\n@@ -15,8 +15,8 @@ layout: function\n title: PHP's ctype_graph in JavaScript\n description: >-\n   Here\u2019s what our current JavaScript equivalent to <a\n-  href=\"https://php.net/manual/en/function.ctype-graph.php\">PHP's ctype_graph</a>\n-  looks like.\n+  href=\"https://php.net/manual/en/function.ctype-graph.php\">PHP's\n+  ctype_graph</a> looks like.\n function: ctype_graph\n category: ctype\n language: php\n@@ -33,7 +33,7 @@ alias:\n   //   example 1: ctype_graph('!%')\n   //   returns 1: true\n \n-  var setlocale = require('../strings/setlocale')\n+  const setlocale = require('../strings/setlocale')\n \n   if (typeof text !== 'string') {\n     return false\n@@ -42,10 +42,10 @@ alias:\n   // ensure setup of localization variables takes place\n   setlocale('LC_ALL', 0)\n \n-  var $global = (typeof window !== 'undefined' ? window : global)\n+  const $global = (typeof window !== 'undefined' ? window : global)\n   $global.$locutus = $global.$locutus || {}\n-  var $locutus = $global.$locutus\n-  var p = $locutus.php\n+  const $locutus = $global.$locutus\n+  const p = $locutus.php\n \n   return text.search(p.locales[p.localeCategories.LC_CTYPE].LC_CTYPE.gr) !== -1\n }\n", "diff --git a/website/source/php/ctype/ctype_lower.html b/website/source/php/ctype/ctype_lower.html\nindex 1120766ce..3015f0bf5 100644\n--- a/website/source/php/ctype/ctype_lower.html\n+++ b/website/source/php/ctype/ctype_lower.html\n@@ -15,8 +15,8 @@ layout: function\n title: PHP's ctype_lower in JavaScript\n description: >-\n   Here\u2019s what our current JavaScript equivalent to <a\n-  href=\"https://php.net/manual/en/function.ctype-lower.php\">PHP's ctype_lower</a>\n-  looks like.\n+  href=\"https://php.net/manual/en/function.ctype-lower.php\">PHP's\n+  ctype_lower</a> looks like.\n function: ctype_lower\n category: ctype\n language: php\n@@ -33,7 +33,7 @@ alias:\n   //   example 1: ctype_lower('abc')\n   //   returns 1: true\n \n-  var setlocale = require('../strings/setlocale')\n+  const setlocale = require('../strings/setlocale')\n   if (typeof text !== 'string') {\n     return false\n   }\n@@ -41,10 +41,10 @@ alias:\n   // ensure setup of localization variables takes place\n   setlocale('LC_ALL', 0)\n \n-  var $global = (typeof window !== 'undefined' ? window : global)\n+  const $global = (typeof window !== 'undefined' ? window : global)\n   $global.$locutus = $global.$locutus || {}\n-  var $locutus = $global.$locutus\n-  var p = $locutus.php\n+  const $locutus = $global.$locutus\n+  const p = $locutus.php\n \n   return text.search(p.locales[p.localeCategories.LC_CTYPE].LC_CTYPE.lw) !== -1\n }\n", "diff --git a/website/source/php/ctype/ctype_print.html b/website/source/php/ctype/ctype_print.html\nindex 9f7653b53..d664d37ee 100644\n--- a/website/source/php/ctype/ctype_print.html\n+++ b/website/source/php/ctype/ctype_print.html\n@@ -15,8 +15,8 @@ layout: function\n title: PHP's ctype_print in JavaScript\n description: >-\n   Here\u2019s what our current JavaScript equivalent to <a\n-  href=\"https://php.net/manual/en/function.ctype-print.php\">PHP's ctype_print</a>\n-  looks like.\n+  href=\"https://php.net/manual/en/function.ctype-print.php\">PHP's\n+  ctype_print</a> looks like.\n function: ctype_print\n category: ctype\n language: php\n@@ -33,17 +33,17 @@ alias:\n   //   example 1: ctype_print('AbC!#12')\n   //   returns 1: true\n \n-  var setlocale = require('../strings/setlocale')\n+  const setlocale = require('../strings/setlocale')\n   if (typeof text !== 'string') {\n     return false\n   }\n   // ensure setup of localization variables takes place\n   setlocale('LC_ALL', 0)\n \n-  var $global = (typeof window !== 'undefined' ? window : global)\n+  const $global = (typeof window !== 'undefined' ? window : global)\n   $global.$locutus = $global.$locutus || {}\n-  var $locutus = $global.$locutus\n-  var p = $locutus.php\n+  const $locutus = $global.$locutus\n+  const p = $locutus.php\n \n   return text.search(p.locales[p.localeCategories.LC_CTYPE].LC_CTYPE.pr) !== -1\n }\n", "diff --git a/website/source/php/ctype/ctype_punct.html b/website/source/php/ctype/ctype_punct.html\nindex 63976cbdb..152c4fe6b 100644\n--- a/website/source/php/ctype/ctype_punct.html\n+++ b/website/source/php/ctype/ctype_punct.html\n@@ -15,8 +15,8 @@ layout: function\n title: PHP's ctype_punct in JavaScript\n description: >-\n   Here\u2019s what our current JavaScript equivalent to <a\n-  href=\"https://php.net/manual/en/function.ctype-punct.php\">PHP's ctype_punct</a>\n-  looks like.\n+  href=\"https://php.net/manual/en/function.ctype-punct.php\">PHP's\n+  ctype_punct</a> looks like.\n function: ctype_punct\n category: ctype\n language: php\n@@ -33,17 +33,17 @@ alias:\n   //   example 1: ctype_punct('!?')\n   //   returns 1: true\n \n-  var setlocale = require('../strings/setlocale')\n+  const setlocale = require('../strings/setlocale')\n   if (typeof text !== 'string') {\n     return false\n   }\n   // ensure setup of localization variables takes place\n   setlocale('LC_ALL', 0)\n \n-  var $global = (typeof window !== 'undefined' ? window : global)\n+  const $global = (typeof window !== 'undefined' ? window : global)\n   $global.$locutus = $global.$locutus || {}\n-  var $locutus = $global.$locutus\n-  var p = $locutus.php\n+  const $locutus = $global.$locutus\n+  const p = $locutus.php\n \n   return text.search(p.locales[p.localeCategories.LC_CTYPE].LC_CTYPE.pu) !== -1\n }\n", "diff --git a/website/source/php/ctype/ctype_space.html b/website/source/php/ctype/ctype_space.html\nindex 6f8b7b46d..c72e4a4c5 100644\n--- a/website/source/php/ctype/ctype_space.html\n+++ b/website/source/php/ctype/ctype_space.html\n@@ -15,8 +15,8 @@ layout: function\n title: PHP's ctype_space in JavaScript\n description: >-\n   Here\u2019s what our current JavaScript equivalent to <a\n-  href=\"https://php.net/manual/en/function.ctype-space.php\">PHP's ctype_space</a>\n-  looks like.\n+  href=\"https://php.net/manual/en/function.ctype-space.php\">PHP's\n+  ctype_space</a> looks like.\n function: ctype_space\n category: ctype\n language: php\n@@ -33,17 +33,17 @@ alias:\n   //   example 1: ctype_space('\\t\\n')\n   //   returns 1: true\n \n-  var setlocale = require('../strings/setlocale')\n+  const setlocale = require('../strings/setlocale')\n   if (typeof text !== 'string') {\n     return false\n   }\n   // ensure setup of localization variables takes place\n   setlocale('LC_ALL', 0)\n \n-  var $global = (typeof window !== 'undefined' ? window : global)\n+  const $global = (typeof window !== 'undefined' ? window : global)\n   $global.$locutus = $global.$locutus || {}\n-  var $locutus = $global.$locutus\n-  var p = $locutus.php\n+  const $locutus = $global.$locutus\n+  const p = $locutus.php\n \n   return text.search(p.locales[p.localeCategories.LC_CTYPE].LC_CTYPE.sp) !== -1\n }\n", "diff --git a/website/source/php/ctype/ctype_upper.html b/website/source/php/ctype/ctype_upper.html\nindex b6649e684..cab007f59 100644\n--- a/website/source/php/ctype/ctype_upper.html\n+++ b/website/source/php/ctype/ctype_upper.html\n@@ -15,8 +15,8 @@ layout: function\n title: PHP's ctype_upper in JavaScript\n description: >-\n   Here\u2019s what our current JavaScript equivalent to <a\n-  href=\"https://php.net/manual/en/function.ctype-upper.php\">PHP's ctype_upper</a>\n-  looks like.\n+  href=\"https://php.net/manual/en/function.ctype-upper.php\">PHP's\n+  ctype_upper</a> looks like.\n function: ctype_upper\n category: ctype\n language: php\n@@ -33,7 +33,7 @@ alias:\n   //   example 1: ctype_upper('AZ')\n   //   returns 1: true\n \n-  var setlocale = require('../strings/setlocale')\n+  const setlocale = require('../strings/setlocale')\n \n   if (typeof text !== 'string') {\n     return false\n@@ -41,10 +41,10 @@ alias:\n   // ensure setup of localization variables takes place\n   setlocale('LC_ALL', 0)\n \n-  var $global = (typeof window !== 'undefined' ? window : global)\n+  const $global = (typeof window !== 'undefined' ? window : global)\n   $global.$locutus = $global.$locutus || {}\n-  var $locutus = $global.$locutus\n-  var p = $locutus.php\n+  const $locutus = $global.$locutus\n+  const p = $locutus.php\n \n   return text.search(p.locales[p.localeCategories.LC_CTYPE].LC_CTYPE.up) !== -1\n }\n", "diff --git a/website/source/php/ctype/ctype_xdigit.html b/website/source/php/ctype/ctype_xdigit.html\nindex 092529224..b7a1cc409 100644\n--- a/website/source/php/ctype/ctype_xdigit.html\n+++ b/website/source/php/ctype/ctype_xdigit.html\n@@ -33,7 +33,7 @@ alias:\n   //   example 1: ctype_xdigit('01dF')\n   //   returns 1: true\n \n-  var setlocale = require('../strings/setlocale')\n+  const setlocale = require('../strings/setlocale')\n \n   if (typeof text !== 'string') {\n     return false\n@@ -41,10 +41,10 @@ alias:\n   // ensure setup of localization variables takes place\n   setlocale('LC_ALL', 0)\n \n-  var $global = (typeof window !== 'undefined' ? window : global)\n+  const $global = (typeof window !== 'undefined' ? window : global)\n   $global.$locutus = $global.$locutus || {}\n-  var $locutus = $global.$locutus\n-  var p = $locutus.php\n+  const $locutus = $global.$locutus\n+  const p = $locutus.php\n \n   return text.search(p.locales[p.localeCategories.LC_CTYPE].LC_CTYPE.xd) !== -1\n }\n", "diff --git a/website/source/php/datetime/date.html b/website/source/php/datetime/date.html\nindex 95abadd5f..10289cfe2 100644\n--- a/website/source/php/datetime/date.html\n+++ b/website/source/php/datetime/date.html\n@@ -157,10 +157,10 @@ alias:\n   //   returns 9: '52 2011-01-02'\n   //        test: skip-1 skip-2 skip-5\n \n-  var jsdate, f\n+  let jsdate, f\n   // Keep this here (works, but for code commented-out below for file size reasons)\n   // var tal= [];\n-  var txtWords = [\n+  const txtWords = [\n     'Sun', 'Mon', 'Tues', 'Wednes', 'Thurs', 'Fri', 'Satur',\n     'January', 'February', 'March', 'April', 'May', 'June',\n     'July', 'August', 'September', 'October', 'November', 'December'\n@@ -168,11 +168,11 @@ alias:\n   // trailing backslash -> (dropped)\n   // a backslash followed by any character (including backslash) -> the character\n   // empty string -> empty string\n-  var formatChr = /\\\\?(.?)/gi\n-  var formatChrCb = function (t, s) {\n+  const formatChr = /\\\\?(.?)/gi\n+  const formatChrCb = function (t, s) {\n     return f[t] ? f[t]() : s\n   }\n-  var _pad = function (n, c) {\n+  const _pad = function (n, c) {\n     n = String(n)\n     while (n.length < c) {\n       n = '0' + n\n@@ -204,8 +204,8 @@ alias:\n     },\n     S: function () {\n       // Ordinal suffix for day of month; st, nd, rd, th\n-      var j = f.j()\n-      var i = j % 10\n+      const j = f.j()\n+      let i = j % 10\n       if (i <= 3 && parseInt((j % 100) / 10, 10) === 1) {\n         i = 0\n       }\n@@ -217,16 +217,16 @@ alias:\n     },\n     z: function () {\n       // Day of year; 0..365\n-      var a = new Date(f.Y(), f.n() - 1, f.j())\n-      var b = new Date(f.Y(), 0, 1)\n+      const a = new Date(f.Y(), f.n() - 1, f.j())\n+      const b = new Date(f.Y(), 0, 1)\n       return Math.round((a - b) / 864e5)\n     },\n \n     // Week\n     W: function () {\n       // ISO-8601 week number\n-      var a = new Date(f.Y(), f.n() - 1, f.j() - f.N() + 3)\n-      var b = new Date(a.getFullYear(), 0, 4)\n+      const a = new Date(f.Y(), f.n() - 1, f.j() - f.N() + 3)\n+      const b = new Date(a.getFullYear(), 0, 4)\n       return _pad(1 + Math.round((a - b) / 864e5 / 7), 2)\n     },\n \n@@ -257,14 +257,14 @@ alias:\n     // Year\n     L: function () {\n       // Is leap year?; 0 or 1\n-      var j = f.Y()\n+      const j = f.Y()\n       return j % 4 === 0 & j % 100 !== 0 | j % 400 === 0\n     },\n     o: function () {\n       // ISO-8601 year\n-      var n = f.n()\n-      var W = f.W()\n-      var Y = f.Y()\n+      const n = f.n()\n+      const W = f.W()\n+      const Y = f.Y()\n       return Y + (n === 12 && W < 9 ? 1 : n === 1 && W > 9 ? -1 : 0)\n     },\n     Y: function () {\n@@ -290,12 +290,12 @@ alias:\n     },\n     B: function () {\n       // Swatch Internet time; 000..999\n-      var H = jsdate.getUTCHours() * 36e2\n+      const H = jsdate.getUTCHours() * 36e2\n       // Hours\n-      var i = jsdate.getUTCMinutes() * 60\n+      const i = jsdate.getUTCMinutes() * 60\n       // Minutes\n       // Seconds\n-      var s = jsdate.getUTCSeconds()\n+      const s = jsdate.getUTCSeconds()\n       return _pad(Math.floor((H + i + s + 36e2) / 86.4) % 1e3, 3)\n     },\n     g: function () {\n@@ -334,32 +334,32 @@ alias:\n       // timezone_abbreviations_list() function.\n       /*              return that.date_default_timezone_get();\n        */\n-      var msg = 'Not supported (see source code of date() for timezone on how to add support)'\n+      const msg = 'Not supported (see source code of date() for timezone on how to add support)'\n       throw new Error(msg)\n     },\n     I: function () {\n       // DST observed?; 0 or 1\n       // Compares Jan 1 minus Jan 1 UTC to Jul 1 minus Jul 1 UTC.\n       // If they are not equal, then DST is observed.\n-      var a = new Date(f.Y(), 0)\n+      const a = new Date(f.Y(), 0)\n       // Jan 1\n-      var c = Date.UTC(f.Y(), 0)\n+      const c = Date.UTC(f.Y(), 0)\n       // Jan 1 UTC\n-      var b = new Date(f.Y(), 6)\n+      const b = new Date(f.Y(), 6)\n       // Jul 1\n       // Jul 1 UTC\n-      var d = Date.UTC(f.Y(), 6)\n+      const d = Date.UTC(f.Y(), 6)\n       return ((a - c) !== (b - d)) ? 1 : 0\n     },\n     O: function () {\n       // Difference to GMT in hour format; e.g. +0200\n-      var tzo = jsdate.getTimezoneOffset()\n-      var a = Math.abs(tzo)\n+      const tzo = jsdate.getTimezoneOffset()\n+      const a = Math.abs(tzo)\n       return (tzo > 0 ? '-' : '+') + _pad(Math.floor(a / 60) * 100 + a % 60, 4)\n     },\n     P: function () {\n       // Difference to GMT w/colon; e.g. +02:00\n-      var O = f.O()\n+      const O = f.O()\n       return (O.substr(0, 3) + ':' + O.substr(3, 2))\n     },\n     T: function () {\n@@ -410,10 +410,10 @@ alias:\n     }\n   }\n \n-  var _date = function (format, timestamp) {\n+  const _date = function (format, timestamp) {\n     jsdate = (timestamp === undefined ? new Date() // Not provided\n       : (timestamp instanceof Date) ? new Date(timestamp) // JS Date()\n-      : new Date(timestamp * 1000) // UNIX timestamp (auto-convert to int)\n+          : new Date(timestamp * 1000) // UNIX timestamp (auto-convert to int)\n     )\n     return format.replace(formatChr, formatChrCb)\n   }\n", "diff --git a/website/source/php/datetime/date_parse.html b/website/source/php/datetime/date_parse.html\nindex 856d314b6..2314b14e9 100644\n--- a/website/source/php/datetime/date_parse.html\n+++ b/website/source/php/datetime/date_parse.html\n@@ -35,8 +35,8 @@ alias:\n   //   example 1: date_parse('2006-12-12 10:00:00')\n   //   returns 1: {year : 2006, month: 12, day: 12, hour: 10, minute: 0, second: 0, fraction: 0, is_localtime: false}\n \n-  var strtotime = require('../datetime/strtotime')\n-  var ts\n+  const strtotime = require('../datetime/strtotime')\n+  let ts\n \n   try {\n     ts = strtotime(date)\n@@ -48,9 +48,9 @@ alias:\n     return false\n   }\n \n-  var dt = new Date(ts * 1000)\n+  const dt = new Date(ts * 1000)\n \n-  var retObj = {}\n+  const retObj = {}\n \n   retObj.year = dt.getFullYear()\n   retObj.month = dt.getMonth() + 1\n", "diff --git a/website/source/php/datetime/getdate.html b/website/source/php/datetime/getdate.html\nindex 648eb8eb0..0a302de12 100644\n--- a/website/source/php/datetime/getdate.html\n+++ b/website/source/php/datetime/getdate.html\n@@ -42,7 +42,7 @@ alias:\n   //   example 1: getdate(1055901520)\n   //   returns 1: {'seconds': 40, 'minutes': 58, 'hours': 1, 'mday': 18, 'wday': 3, 'mon': 6, 'year': 2003, 'yday': 168, 'weekday': 'Wednesday', 'month': 'June', '0': 1055901520}\n \n-  var _w = [\n+  const _w = [\n     'Sun',\n     'Mon',\n     'Tues',\n@@ -51,7 +51,7 @@ alias:\n     'Fri',\n     'Satur'\n   ]\n-  var _m = [\n+  const _m = [\n     'January',\n     'February',\n     'March',\n@@ -65,14 +65,14 @@ alias:\n     'November',\n     'December'\n   ]\n-  var d = ((typeof timestamp === 'undefined') ? new Date()\n-    : (timestamp instanceof Date) ? new Date(timestamp)  // Not provided\n-    : new Date(timestamp * 1000) // Javascript Date() // UNIX timestamp (auto-convert to int)\n+  const d = ((typeof timestamp === 'undefined') ? new Date()\n+    : (timestamp instanceof Date) ? new Date(timestamp) // Not provided\n+        : new Date(timestamp * 1000) // Javascript Date() // UNIX timestamp (auto-convert to int)\n   )\n-  var w = d.getDay()\n-  var m = d.getMonth()\n-  var y = d.getFullYear()\n-  var r = {}\n+  const w = d.getDay()\n+  const m = d.getMonth()\n+  const y = d.getFullYear()\n+  const r = {}\n \n   r.seconds = d.getSeconds()\n   r.minutes = d.getMinutes()\n", "diff --git a/website/source/php/datetime/gettimeofday.html b/website/source/php/datetime/gettimeofday.html\nindex 9c0c9a6b7..40970ddb6 100644\n--- a/website/source/php/datetime/gettimeofday.html\n+++ b/website/source/php/datetime/gettimeofday.html\n@@ -57,8 +57,8 @@ alias:\n   //   example 2: var $result = $timeStamp > 1000000000 && $timeStamp < 2000000000\n   //   returns 2: true\n \n-  var t = new Date()\n-  var y = 0\n+  const t = new Date()\n+  let y = 0\n \n   if (returnFloat) {\n     return t.getTime() / 1000\n", "diff --git a/website/source/php/datetime/gmdate.html b/website/source/php/datetime/gmdate.html\nindex 50bfd2cdb..6e73abfe6 100644\n--- a/website/source/php/datetime/gmdate.html\n+++ b/website/source/php/datetime/gmdate.html\n@@ -41,11 +41,11 @@ alias:\n   //   example 1: gmdate('H:m:s \\\\m \\\\i\\\\s \\\\m\\\\o\\\\n\\\\t\\\\h', 1062402400); // Return will depend on your timezone\n   //   returns 1: '07:09:40 m is month'\n \n-  var date = require('../datetime/date')\n+  const date = require('../datetime/date')\n \n-  var dt = typeof timestamp === 'undefined' ? new Date() // Not provided\n+  const dt = typeof timestamp === 'undefined' ? new Date() // Not provided\n     : timestamp instanceof Date ? new Date(timestamp) // Javascript Date()\n-    : new Date(timestamp * 1000) // UNIX timestamp (auto-convert to int)\n+      : new Date(timestamp * 1000) // UNIX timestamp (auto-convert to int)\n \n   timestamp = Date.parse(dt.toUTCString().slice(0, -4)) / 1000\n \n", "diff --git a/website/source/php/datetime/gmmktime.html b/website/source/php/datetime/gmmktime.html\nindex 072ecde3b..b589a31b2 100644\n--- a/website/source/php/datetime/gmmktime.html\n+++ b/website/source/php/datetime/gmmktime.html\n@@ -18,8 +18,8 @@ layout: function\n title: PHP's gmmktime in JavaScript\n description: >-\n   Here\u2019s what our current JavaScript equivalent to <a\n-  href=\"https://php.net/manual/en/function.gmmktime.php\">PHP's gmmktime</a> looks\n-  like.\n+  href=\"https://php.net/manual/en/function.gmmktime.php\">PHP's gmmktime</a>\n+  looks like.\n function: gmmktime\n category: datetime\n language: php\n@@ -39,10 +39,10 @@ alias:\n   //   example 2: gmmktime(0, 0, -1, 1, 1, 1970)\n   //   returns 2: -1\n \n-  var d = new Date()\n-  var r = arguments\n-  var i = 0\n-  var e = ['Hours', 'Minutes', 'Seconds', 'Month', 'Date', 'FullYear']\n+  const d = new Date()\n+  const r = arguments\n+  let i = 0\n+  const e = ['Hours', 'Minutes', 'Seconds', 'Month', 'Date', 'FullYear']\n \n   for (i = 0; i < e.length; i++) {\n     if (typeof r[i] === 'undefined') {\n@@ -67,7 +67,7 @@ alias:\n   // Set hours, minutes, and seconds.\n   d.setUTCHours(r[0], r[1], r[2])\n \n-  var time = d.getTime()\n+  const time = d.getTime()\n \n   // Divide milliseconds by 1000 to return seconds and drop decimal.\n   // Add 1 second if negative or it'll be off from PHP by 1 second.\n", "diff --git a/website/source/php/datetime/gmstrftime.html b/website/source/php/datetime/gmstrftime.html\nindex e000f7936..dfef32b32 100644\n--- a/website/source/php/datetime/gmstrftime.html\n+++ b/website/source/php/datetime/gmstrftime.html\n@@ -39,13 +39,13 @@ alias:\n   //   example 1: gmstrftime(\"%A\", 1062462400)\n   //   returns 1: 'Tuesday'\n \n-  var strftime = require('../datetime/strftime')\n+  const strftime = require('../datetime/strftime')\n \n-  var _date = (typeof timestamp === 'undefined')\n+  const _date = (typeof timestamp === 'undefined')\n     ? new Date()\n     : (timestamp instanceof Date)\n-      ? new Date(timestamp)\n-      : new Date(timestamp * 1000)\n+        ? new Date(timestamp)\n+        : new Date(timestamp * 1000)\n \n   timestamp = Date.parse(_date.toUTCString().slice(0, -4)) / 1000\n \n", "diff --git a/website/source/php/datetime/idate.html b/website/source/php/datetime/idate.html\nindex ce304e4f9..8b09944d4 100644\n--- a/website/source/php/datetime/idate.html\n+++ b/website/source/php/datetime/idate.html\n@@ -23,7 +23,8 @@ layout: function\n title: PHP's idate in JavaScript\n description: >-\n   Here\u2019s what our current JavaScript equivalent to <a\n-  href=\"https://php.net/manual/en/function.idate.php\">PHP's idate</a> looks like.\n+  href=\"https://php.net/manual/en/function.idate.php\">PHP's idate</a> looks\n+  like.\n function: idate\n category: datetime\n language: php\n@@ -53,12 +54,12 @@ alias:\n   }\n \n   // @todo: Need to allow date_default_timezone_set() (check for $locutus.default_timezone and use)\n-  var _date = (typeof timestamp === 'undefined')\n+  const _date = (typeof timestamp === 'undefined')\n     ? new Date()\n     : (timestamp instanceof Date)\n-      ? new Date(timestamp)\n-      : new Date(timestamp * 1000)\n-  var a\n+        ? new Date(timestamp)\n+        : new Date(timestamp * 1000)\n+  let a\n \n   switch (format) {\n     case 'B':\n@@ -91,7 +92,7 @@ alias:\n       return _date.getSeconds()\n     case 't':\n       return (new Date(_date.getFullYear(), _date.getMonth() + 1, 0))\n-      .getDate()\n+        .getDate()\n     case 'U':\n       return Math.round(_date.getTime() / 1000)\n     case 'w':\n@@ -105,7 +106,7 @@ alias:\n       return 1 + Math.round((a - (new Date(a.getFullYear(), 0, 4))) / 864e5 / 7)\n     case 'y':\n       return parseInt((_date.getFullYear() + '')\n-      .slice(2), 10) // This function returns an integer, unlike _date()\n+        .slice(2), 10) // This function returns an integer, unlike _date()\n     case 'Y':\n       return _date.getFullYear()\n     case 'z':\n", "diff --git a/website/source/php/datetime/microtime.html b/website/source/php/datetime/microtime.html\nindex 2f21fac74..ef6b82c0e 100644\n--- a/website/source/php/datetime/microtime.html\n+++ b/website/source/php/datetime/microtime.html\n@@ -43,8 +43,8 @@ alias:\n   //   example 2: /^0\\.[0-9]{1,6} [0-9]{10,10}$/.test(microtime())\n   //   returns 2: true\n \n-  var s\n-  var now\n+  let s\n+  let now\n   if (typeof performance !== 'undefined' && performance.now) {\n     now = (performance.now() + performance.timing.navigationStart) / 1e3\n     if (getAsFloat) {\n", "diff --git a/website/source/php/datetime/mktime.html b/website/source/php/datetime/mktime.html\nindex caed2078a..ce4f3253b 100644\n--- a/website/source/php/datetime/mktime.html\n+++ b/website/source/php/datetime/mktime.html\n@@ -107,10 +107,10 @@ alias:\n   //   example 8: mktime(0, 0, -1, 1, 1, 1970)\n   //   returns 8: -1\n \n-  var d = new Date()\n-  var r = arguments\n-  var i = 0\n-  var e = ['Hours', 'Minutes', 'Seconds', 'Month', 'Date', 'FullYear']\n+  const d = new Date()\n+  const r = arguments\n+  let i = 0\n+  const e = ['Hours', 'Minutes', 'Seconds', 'Month', 'Date', 'FullYear']\n \n   for (i = 0; i < e.length; i++) {\n     if (typeof r[i] === 'undefined') {\n@@ -135,7 +135,7 @@ alias:\n   // Set hours, minutes, and seconds.\n   d.setHours(r[0], r[1], r[2])\n \n-  var time = d.getTime()\n+  const time = d.getTime()\n \n   // Divide milliseconds by 1000 to return seconds and drop decimal.\n   // Add 1 second if negative or it'll be off from PHP by 1 second.\n", "diff --git a/website/source/php/datetime/strftime.html b/website/source/php/datetime/strftime.html\nindex 2e1bdb3d3..80122d94b 100644\n--- a/website/source/php/datetime/strftime.html\n+++ b/website/source/php/datetime/strftime.html\n@@ -24,8 +24,8 @@ layout: function\n title: PHP's strftime in JavaScript\n description: >-\n   Here\u2019s what our current JavaScript equivalent to <a\n-  href=\"https://php.net/manual/en/function.strftime.php\">PHP's strftime</a> looks\n-  like.\n+  href=\"https://php.net/manual/en/function.strftime.php\">PHP's strftime</a>\n+  looks like.\n function: strftime\n category: datetime\n language: php\n@@ -47,16 +47,16 @@ alias:\n   //        example 1: strftime(\"%A\", 1062462400); // Return value will depend on date and locale\n   //        returns 1: 'Tuesday'\n \n-  var setlocale = require('../strings/setlocale')\n+  const setlocale = require('../strings/setlocale')\n \n-  var $global = (typeof window !== 'undefined' ? window : global)\n+  const $global = (typeof window !== 'undefined' ? window : global)\n   $global.$locutus = $global.$locutus || {}\n-  var $locutus = $global.$locutus\n+  const $locutus = $global.$locutus\n \n   // ensure setup of localization variables takes place\n   setlocale('LC_ALL', 0)\n \n-  var _xPad = function (x, pad, r) {\n+  const _xPad = function (x, pad, r) {\n     if (typeof r === 'undefined') {\n       r = 10\n     }\n@@ -66,8 +66,8 @@ alias:\n     return x.toString()\n   }\n \n-  var locale = $locutus.php.localeCategories.LC_TIME\n-  var lcTime = $locutus.php.locales[locale].LC_TIME\n+  const locale = $locutus.php.localeCategories.LC_TIME\n+  const lcTime = $locutus.php.locales[locale].LC_TIME\n \n   var _formats = {\n     a: function (d) {\n@@ -91,9 +91,9 @@ alias:\n       return _xPad(parseInt(this.G(d) / 100, 10), 0)\n     },\n     G: function (d) {\n-      var y = d.getFullYear()\n-      var V = parseInt(_formats.V(d), 10)\n-      var W = parseInt(_formats.W(d), 10)\n+      let y = d.getFullYear()\n+      const V = parseInt(_formats.V(d), 10)\n+      const W = parseInt(_formats.W(d), 10)\n \n       if (W > V) {\n         y++\n@@ -105,21 +105,21 @@ alias:\n     },\n     H: ['getHours', '0'],\n     I: function (d) {\n-      var I = d.getHours() % 12\n+      const I = d.getHours() % 12\n       return _xPad(I === 0 ? 12 : I, 0)\n     },\n     j: function (d) {\n-      var ms = d - new Date('' + d.getFullYear() + '/1/1 GMT')\n+      let ms = d - new Date('' + d.getFullYear() + '/1/1 GMT')\n       // Line differs from Yahoo implementation which would be\n       // equivalent to replacing it here with:\n       ms += d.getTimezoneOffset() * 60000\n-      var doy = parseInt(ms / 60000 / 60 / 24, 10) + 1\n+      const doy = parseInt(ms / 60000 / 60 / 24, 10) + 1\n       return _xPad(doy, 0, 100)\n     },\n     k: ['getHours', '0'],\n     // not in PHP, but implemented here (as in Yahoo)\n     l: function (d) {\n-      var l = d.getHours() % 12\n+      const l = d.getHours() % 12\n       return _xPad(l === 0 ? 12 : l, ' ')\n     },\n     m: function (d) {\n@@ -138,24 +138,24 @@ alias:\n     },\n     S: ['getSeconds', '0'],\n     u: function (d) {\n-      var dow = d.getDay()\n+      const dow = d.getDay()\n       return ((dow === 0) ? 7 : dow)\n     },\n     U: function (d) {\n-      var doy = parseInt(_formats.j(d), 10)\n-      var rdow = 6 - d.getDay()\n-      var woy = parseInt((doy + rdow) / 7, 10)\n+      const doy = parseInt(_formats.j(d), 10)\n+      const rdow = 6 - d.getDay()\n+      const woy = parseInt((doy + rdow) / 7, 10)\n       return _xPad(woy, 0)\n     },\n     V: function (d) {\n-      var woy = parseInt(_formats.W(d), 10)\n-      var dow11 = (new Date('' + d.getFullYear() + '/1/1')).getDay()\n+      const woy = parseInt(_formats.W(d), 10)\n+      const dow11 = (new Date('' + d.getFullYear() + '/1/1')).getDay()\n       // First week is 01 and not 00 as in the case of %U and %W,\n       // so we add 1 to the final result except if day 1 of the year\n       // is a Monday (then %W returns 01).\n       // We also need to subtract 1 if the day 1 of the year is\n       // Friday-Sunday, so the resulting equation becomes:\n-      var idow = woy + (dow11 > 4 || dow11 <= 1 ? 0 : 1)\n+      let idow = woy + (dow11 > 4 || dow11 <= 1 ? 0 : 1)\n       if (idow === 53 && (new Date('' + d.getFullYear() + '/12/31')).getDay() < 4) {\n         idow = 1\n       } else if (idow === 0) {\n@@ -165,9 +165,9 @@ alias:\n     },\n     w: 'getDay',\n     W: function (d) {\n-      var doy = parseInt(_formats.j(d), 10)\n-      var rdow = 7 - _formats.u(d)\n-      var woy = parseInt((doy + rdow) / 7, 10)\n+      const doy = parseInt(_formats.j(d), 10)\n+      const rdow = 7 - _formats.u(d)\n+      const woy = parseInt((doy + rdow) / 7, 10)\n       return _xPad(woy, 0, 10)\n     },\n     y: function (d) {\n@@ -175,9 +175,9 @@ alias:\n     },\n     Y: 'getFullYear',\n     z: function (d) {\n-      var o = d.getTimezoneOffset()\n-      var H = _xPad(parseInt(Math.abs(o / 60), 10), 0)\n-      var M = _xPad(o % 60, 0)\n+      const o = d.getTimezoneOffset()\n+      const H = _xPad(parseInt(Math.abs(o / 60), 10), 0)\n+      const M = _xPad(o % 60, 0)\n       return (o > 0 ? '-' : '+') + H + M\n     },\n     Z: function (d) {\n@@ -188,13 +188,13 @@ alias:\n     }\n   }\n \n-  var _date = (typeof timestamp === 'undefined')\n+  const _date = (typeof timestamp === 'undefined')\n     ? new Date()\n     : (timestamp instanceof Date)\n-      ? new Date(timestamp)\n-      : new Date(timestamp * 1000)\n+        ? new Date(timestamp)\n+        : new Date(timestamp * 1000)\n \n-  var _aggregates = {\n+  const _aggregates = {\n     c: 'locale',\n     D: '%m/%d/%y',\n     F: '%y-%m-%d',\n@@ -211,14 +211,14 @@ alias:\n   // First replace aggregates (run in a loop because an agg may be made up of other aggs)\n   while (fmt.match(/%[cDFhnrRtTxX]/)) {\n     fmt = fmt.replace(/%([cDFhnrRtTxX])/g, function (m0, m1) {\n-      var f = _aggregates[m1]\n+      const f = _aggregates[m1]\n       return (f === 'locale' ? lcTime[m1] : f)\n     })\n   }\n \n   // Now replace formats - we need a closure so that the date object gets passed through\n-  var str = fmt.replace(/%([aAbBCdegGHIjklmMpPsSuUVwWyYzZ%])/g, function (m0, m1) {\n-    var f = _formats[m1]\n+  const str = fmt.replace(/%([aAbBCdegGHIjklmMpPsSuUVwWyYzZ%])/g, function (m0, m1) {\n+    const f = _formats[m1]\n     if (typeof f === 'string') {\n       return _date[f]()\n     } else if (typeof f === 'function') {\n", "diff --git a/website/source/php/datetime/strptime.html b/website/source/php/datetime/strptime.html\nindex 2fdb060d7..630c872c3 100644\n--- a/website/source/php/datetime/strptime.html\n+++ b/website/source/php/datetime/strptime.html\n@@ -24,8 +24,8 @@ layout: function\n title: PHP's strptime in JavaScript\n description: >-\n   Here\u2019s what our current JavaScript equivalent to <a\n-  href=\"https://php.net/manual/en/function.strptime.php\">PHP's strptime</a> looks\n-  like.\n+  href=\"https://php.net/manual/en/function.strptime.php\">PHP's strptime</a>\n+  looks like.\n function: strptime\n category: datetime\n language: php\n@@ -45,10 +45,10 @@ alias:\n   //   example 2: strptime('2009extra', '%Y')\n   //   returns 2: {tm_sec:0, tm_min:0, tm_hour:0, tm_mday:0, tm_mon:0, tm_year:109, tm_wday:3, tm_yday: -1, unparsed: 'extra'}\n \n-  var setlocale = require('../strings/setlocale')\n-  var arrayMap = require('../array/array_map')\n+  const setlocale = require('../strings/setlocale')\n+  const arrayMap = require('../array/array_map')\n \n-  var retObj = {\n+  const retObj = {\n     tm_sec: 0,\n     tm_min: 0,\n     tm_hour: 0,\n@@ -59,16 +59,16 @@ alias:\n     tm_yday: 0,\n     unparsed: ''\n   }\n-  var i = 0\n-  var j = 0\n-  var amPmOffset = 0\n-  var prevHour = false\n-  var _reset = function (dateObj, realMday) {\n+  let i = 0\n+  let j = 0\n+  let amPmOffset = 0\n+  let prevHour = false\n+  const _reset = function (dateObj, realMday) {\n     // realMday is to allow for a value of 0 in return results (but without\n     // messing up the Date() object)\n-    var jan1\n-    var o = retObj\n-    var d = dateObj\n+    let jan1\n+    const o = retObj\n+    const d = dateObj\n     o.tm_sec = d.getUTCSeconds()\n     o.tm_min = d.getUTCMinutes()\n     o.tm_hour = d.getUTCHours()\n@@ -79,8 +79,8 @@ alias:\n     jan1 = new Date(Date.UTC(d.getUTCFullYear(), 0, 1))\n     o.tm_yday = Math.ceil((d - jan1) / (1000 * 60 * 60 * 24))\n   }\n-  var _date = function () {\n-    var o = retObj\n+  const _date = function () {\n+    const o = retObj\n     // We set date to at least 1 to ensure year or month doesn't go backwards\n     return _reset(new Date(Date.UTC(\n       o.tm_year + 1900,\n@@ -93,10 +93,10 @@ alias:\n     o.tm_mday)\n   }\n \n-  var _NWS = /\\S/\n-  var _WS = /\\s/\n+  const _NWS = /\\S/\n+  const _WS = /\\s/\n \n-  var _aggregates = {\n+  const _aggregates = {\n     c: 'locale',\n     D: '%m/%d/%y',\n     F: '%y-%m-%d',\n@@ -125,47 +125,47 @@ alias:\n     OW\n     Oy\n   */\n-  var _pregQuote = function (str) {\n+  const _pregQuote = function (str) {\n     return (str + '').replace(/([\\\\.+*?[^\\]$(){}=!<>|:])/g, '\\\\$1')\n   }\n \n   // ensure setup of localization variables takes place\n   setlocale('LC_ALL', 0)\n \n-  var $global = (typeof window !== 'undefined' ? window : global)\n+  const $global = (typeof window !== 'undefined' ? window : global)\n   $global.$locutus = $global.$locutus || {}\n-  var $locutus = $global.$locutus\n-  var locale = $locutus.php.localeCategories.LC_TIME\n-  var lcTime = $locutus.php.locales[locale].LC_TIME\n+  const $locutus = $global.$locutus\n+  const locale = $locutus.php.localeCategories.LC_TIME\n+  const lcTime = $locutus.php.locales[locale].LC_TIME\n \n   // First replace aggregates (run in a loop because an agg may be made up of other aggs)\n   while (format.match(/%[cDFhnrRtTxX]/)) {\n     format = format.replace(/%([cDFhnrRtTxX])/g, function (m0, m1) {\n-      var f = _aggregates[m1]\n+      const f = _aggregates[m1]\n       return (f === 'locale' ? lcTime[m1] : f)\n     })\n   }\n \n-  var _addNext = function (j, regex, cb) {\n+  const _addNext = function (j, regex, cb) {\n     if (typeof regex === 'string') {\n       regex = new RegExp('^' + regex, 'i')\n     }\n-    var check = dateStr.slice(j)\n-    var match = regex.exec(check)\n+    const check = dateStr.slice(j)\n+    const match = regex.exec(check)\n     // Even if the callback returns null after assigning to the\n     // return object, the object won't be saved anyways\n-    var testNull = match ? cb.apply(null, match) : null\n+    const testNull = match ? cb.apply(null, match) : null\n     if (testNull === null) {\n       throw new Error('No match in string')\n     }\n     return j + match[0].length\n   }\n \n-  var _addLocalized = function (j, formatChar, category) {\n+  const _addLocalized = function (j, formatChar, category) {\n     // Could make each parenthesized instead and pass index to callback:\n     return _addNext(j, arrayMap(_pregQuote, lcTime[formatChar]).join('|'),\n       function (m) {\n-        var match = lcTime[formatChar].search(new RegExp('^' + _pregQuote(m) + '$', 'i'))\n+        const match = lcTime[formatChar].search(new RegExp('^' + _pregQuote(m) + '$', 'i'))\n         if (match) {\n           retObj[category] = match[0]\n         }\n@@ -175,7 +175,7 @@ alias:\n   // BEGIN PROCESSING CHARACTERS\n   for (i = 0, j = 0; i < format.length; i++) {\n     if (format.charAt(i) === '%') {\n-      var literalPos = ['%', 'n', 't'].indexOf(format.charAt(i + 1))\n+      const literalPos = ['%', 'n', 't'].indexOf(format.charAt(i + 1))\n       if (literalPos !== -1) {\n         if (['%', '\\n', '\\t'].indexOf(dateStr.charAt(j)) === literalPos) {\n           // a matched literal\n@@ -214,15 +214,15 @@ alias:\n             // PHP docs say two-digit, but accepts one-digit (two-digit max):\n             j = _addNext(j, /^\\d?\\d/,\n \n-            function (d) {\n-              var year = (parseInt(d, 10) - 19) * 100\n-              retObj.tm_year = year\n-              _date()\n-              if (!retObj.tm_yday) {\n-                retObj.tm_yday = -1\n-              }\n+              function (d) {\n+                const year = (parseInt(d, 10) - 19) * 100\n+                retObj.tm_year = year\n+                _date()\n+                if (!retObj.tm_yday) {\n+                  retObj.tm_yday = -1\n+                }\n               // Also changes wday; and sets yday to -1 (always?)\n-            })\n+              })\n             break\n           case 'd':\n           case 'e':\n@@ -231,7 +231,7 @@ alias:\n               ? /^(0[1-9]|[1-2]\\d|3[0-1])/\n               : /^([1-2]\\d|3[0-1]|[1-9])/,\n             function (d) {\n-              var dayMonth = parseInt(d, 10)\n+              const dayMonth = parseInt(d, 10)\n               retObj.tm_mday = dayMonth\n               // Also changes w_day, y_day\n               _date()\n@@ -246,7 +246,7 @@ alias:\n           case 'H':\n             // 00-23 hours\n             j = _addNext(j, /^([0-1]\\d|2[0-3])/, function (d) {\n-              var hour = parseInt(d, 10)\n+              const hour = parseInt(d, 10)\n               retObj.tm_hour = hour\n               // Changes nothing else\n             })\n@@ -258,7 +258,7 @@ alias:\n               ? /^([1-9]|1[0-2])/\n               : /^(0[1-9]|1[0-2])/,\n             function (d) {\n-              var hour = parseInt(d, 10) - 1 + amPmOffset\n+              const hour = parseInt(d, 10) - 1 + amPmOffset\n               retObj.tm_hour = hour\n               // Used for coordinating with am-pm\n               prevHour = true\n@@ -268,7 +268,7 @@ alias:\n           case 'j':\n             // 001-366 day of year\n             j = _addNext(j, /^(00[1-9]|0[1-9]\\d|[1-2]\\d\\d|3[0-6][0-6])/, function (d) {\n-              var dayYear = parseInt(d, 10) - 1\n+              const dayYear = parseInt(d, 10) - 1\n               retObj.tm_yday = dayYear\n               // Changes nothing else\n               // (oddly, since if original by a given year, could calculate other fields)\n@@ -277,16 +277,16 @@ alias:\n           case 'm':\n             // 01-12 month\n             j = _addNext(j, /^(0[1-9]|1[0-2])/, function (d) {\n-              var month = parseInt(d, 10) - 1\n+              const month = parseInt(d, 10) - 1\n               retObj.tm_mon = month\n-            // Also sets wday and yday\n+              // Also sets wday and yday\n               _date()\n             })\n             break\n           case 'M':\n             // 00-59 minutes\n             j = _addNext(j, /^[0-5]\\d/, function (d) {\n-              var minute = parseInt(d, 10)\n+              const minute = parseInt(d, 10)\n               retObj.tm_min = minute\n             // Changes nothing else\n             })\n@@ -301,7 +301,7 @@ alias:\n               // No effect on 'H' since already 24 hours but\n               //   works before or after setting of l/I hour\n               amPmOffset = (/a/)\n-              .test(d) ? 0 : 12\n+                .test(d) ? 0 : 12\n               if (prevHour) {\n                 retObj.tm_hour += amPmOffset\n               }\n@@ -310,8 +310,8 @@ alias:\n           case 's':\n             // Unix timestamp (in seconds)\n             j = _addNext(j, /^\\d+/, function (d) {\n-              var timestamp = parseInt(d, 10)\n-              var date = new Date(Date.UTC(timestamp * 1000))\n+              const timestamp = parseInt(d, 10)\n+              const date = new Date(Date.UTC(timestamp * 1000))\n               _reset(date)\n               // Affects all fields, but can't be negative (and initial + not allowed)\n             })\n@@ -320,11 +320,11 @@ alias:\n             // 00-59 seconds\n             j = _addNext(j, /^[0-5]\\d/, // strptime also accepts 60-61 for some reason\n \n-            function (d) {\n-              var second = parseInt(d, 10)\n-              retObj.tm_sec = second\n+              function (d) {\n+                const second = parseInt(d, 10)\n+                retObj.tm_sec = second\n               // Changes nothing else\n-            })\n+              })\n             break\n           case 'u':\n           case 'w':\n@@ -341,34 +341,34 @@ alias:\n             break\n           case 'y':\n             // 69 (or higher) for 1969+, 68 (or lower) for 2068-\n-             // PHP docs say two-digit, but accepts one-digit (two-digit max):\n+            // PHP docs say two-digit, but accepts one-digit (two-digit max):\n             j = _addNext(j, /^\\d?\\d/,\n \n-            function (d) {\n-              d = parseInt(d, 10)\n-              var year = d >= 69 ? d : d + 100\n-              retObj.tm_year = year\n-              _date()\n-              if (!retObj.tm_yday) {\n-                retObj.tm_yday = -1\n-              }\n+              function (d) {\n+                d = parseInt(d, 10)\n+                const year = d >= 69 ? d : d + 100\n+                retObj.tm_year = year\n+                _date()\n+                if (!retObj.tm_yday) {\n+                  retObj.tm_yday = -1\n+                }\n               // Also changes wday; and sets yday to -1 (always?)\n-            })\n+              })\n             break\n           case 'Y':\n             // 2010 (4-digit year)\n             // PHP docs say four-digit, but accepts one-digit (four-digit max):\n             j = _addNext(j, /^\\d{1,4}/,\n \n-            function (d) {\n-              var year = (parseInt(d, 10)) - 1900\n-              retObj.tm_year = year\n-              _date()\n-              if (!retObj.tm_yday) {\n-                retObj.tm_yday = -1\n-              }\n+              function (d) {\n+                const year = (parseInt(d, 10)) - 1900\n+                retObj.tm_year = year\n+                _date()\n+                if (!retObj.tm_yday) {\n+                  retObj.tm_yday = -1\n+                }\n               // Also changes wday; and sets yday to -1 (always?)\n-            })\n+              })\n             break\n           case 'z':\n             // Timezone; on my system, strftime gives -0800,\n", "diff --git a/website/source/php/datetime/strtotime.html b/website/source/php/datetime/strtotime.html\nindex 1524e4131..f55d9fb9a 100644\n--- a/website/source/php/datetime/strtotime.html\n+++ b/website/source/php/datetime/strtotime.html\n@@ -4,19 +4,17 @@ examples:\n   - 'strtotime(''+1 day'', 1129633200)'\n   - 'strtotime(''+1 week 2 days 4 hours 2 seconds'', 1129633200)'\n   - 'strtotime(''last month'', 1129633200)'\n-  - 'strtotime(''2009-05-04 08:30:00 GMT'')'\n   - 'strtotime(''2009-05-04 08:30:00+00'')'\n   - 'strtotime(''2009-05-04 08:30:00+02:00'')'\n-  - 'strtotime(''2009-05-04T08:30:00Z'')'\n+  - 'strtotime(''2009-05-04 08:30:00 YWT'')'\n estarget: es5\n returns:\n   - '1129719600'\n   - '1130425202'\n   - '1127041200'\n   - '1241425800'\n-  - '1241425800'\n   - '1241418600'\n-  - '1241425800'\n+  - '1241454600'\n dependencies: []\n authors:\n   original by:\n@@ -28,6 +26,8 @@ authors:\n     - preuter\n     - 'Brett Zamir (https://brett-zamir.me)'\n     - Mirko Faber\n+  reimplemented by:\n+    - Rafa\u0142 Kukawski\n   bugfixed by:\n     - Wagner B. Soares\n     - Artur Tchernychev\n@@ -55,304 +55,1348 @@ alias:\n   - /php/strtotime/\n   - /functions/strtotime/\n ---\n-{% codeblock lang:javascript %}module.exports = function strtotime (text, now) {\n-  //  discuss at: https://locutus.io/php/strtotime/\n-  // original by: Caio Ariede (https://caioariede.com)\n-  // improved by: Kevin van Zonneveld (https://kvz.io)\n-  // improved by: Caio Ariede (https://caioariede.com)\n-  // improved by: A. Mat\u00edas Quezada (https://amatiasq.com)\n-  // improved by: preuter\n-  // improved by: Brett Zamir (https://brett-zamir.me)\n-  // improved by: Mirko Faber\n-  //    input by: David\n-  // bugfixed by: Wagner B. Soares\n-  // bugfixed by: Artur Tchernychev\n-  // bugfixed by: Stephan B\u00f6sch-Plepelits (https://github.com/plepe)\n-  //      note 1: Examples all have a fixed timestamp to prevent\n-  //      note 1: tests to fail because of variable time(zones)\n-  //   example 1: strtotime('+1 day', 1129633200)\n-  //   returns 1: 1129719600\n-  //   example 2: strtotime('+1 week 2 days 4 hours 2 seconds', 1129633200)\n-  //   returns 2: 1130425202\n-  //   example 3: strtotime('last month', 1129633200)\n-  //   returns 3: 1127041200\n-  //   example 4: strtotime('2009-05-04 08:30:00 GMT')\n-  //   returns 4: 1241425800\n-  //   example 5: strtotime('2009-05-04 08:30:00+00')\n-  //   returns 5: 1241425800\n-  //   example 6: strtotime('2009-05-04 08:30:00+02:00')\n-  //   returns 6: 1241418600\n-  //   example 7: strtotime('2009-05-04T08:30:00Z')\n-  //   returns 7: 1241425800\n-\n-  var parsed\n-  var match\n-  var today\n-  var year\n-  var date\n-  var days\n-  var ranges\n-  var len\n-  var times\n-  var regex\n-  var i\n-  var fail = false\n-\n-  if (!text) {\n-    return fail\n+{% codeblock lang:javascript %}const reSpace = '[ \\\\t]+'\n+const reSpaceOpt = '[ \\\\t]*'\n+const reMeridian = '(?:([ap])\\\\.?m\\\\.?([\\\\t ]|$))'\n+const reHour24 = '(2[0-4]|[01]?[0-9])'\n+const reHour24lz = '([01][0-9]|2[0-4])'\n+const reHour12 = '(0?[1-9]|1[0-2])'\n+const reMinute = '([0-5]?[0-9])'\n+const reMinutelz = '([0-5][0-9])'\n+const reSecond = '(60|[0-5]?[0-9])'\n+const reSecondlz = '(60|[0-5][0-9])'\n+const reFrac = '(?:\\\\.([0-9]+))'\n+\n+const reDayfull = 'sunday|monday|tuesday|wednesday|thursday|friday|saturday'\n+const reDayabbr = 'sun|mon|tue|wed|thu|fri|sat'\n+const reDaytext = reDayfull + '|' + reDayabbr + '|weekdays?'\n+\n+const reReltextnumber = 'first|second|third|fourth|fifth|sixth|seventh|eighth?|ninth|tenth|eleventh|twelfth'\n+const reReltexttext = 'next|last|previous|this'\n+const reReltextunit = '(?:second|sec|minute|min|hour|day|fortnight|forthnight|month|year)s?|weeks|' + reDaytext\n+\n+const reYear = '([0-9]{1,4})'\n+const reYear2 = '([0-9]{2})'\n+const reYear4 = '([0-9]{4})'\n+const reYear4withSign = '([+-]?[0-9]{4})'\n+const reMonth = '(1[0-2]|0?[0-9])'\n+const reMonthlz = '(0[0-9]|1[0-2])'\n+const reDay = '(?:(3[01]|[0-2]?[0-9])(?:st|nd|rd|th)?)'\n+const reDaylz = '(0[0-9]|[1-2][0-9]|3[01])'\n+\n+const reMonthFull = 'january|february|march|april|may|june|july|august|september|october|november|december'\n+const reMonthAbbr = 'jan|feb|mar|apr|may|jun|jul|aug|sept?|oct|nov|dec'\n+const reMonthroman = 'i[vx]|vi{0,3}|xi{0,2}|i{1,3}'\n+const reMonthText = '(' + reMonthFull + '|' + reMonthAbbr + '|' + reMonthroman + ')'\n+\n+const reTzCorrection = '((?:GMT)?([+-])' + reHour24 + ':?' + reMinute + '?)'\n+const reTzAbbr = '\\\\(?([a-zA-Z]{1,6})\\\\)?'\n+const reDayOfYear = '(00[1-9]|0[1-9][0-9]|[12][0-9][0-9]|3[0-5][0-9]|36[0-6])'\n+const reWeekOfYear = '(0[1-9]|[1-4][0-9]|5[0-3])'\n+\n+const reDateNoYear = reMonthText + '[ .\\\\t-]*' + reDay + '[,.stndrh\\\\t ]*'\n+\n+function processMeridian (hour, meridian) {\n+  meridian = meridian && meridian.toLowerCase()\n+\n+  switch (meridian) {\n+    case 'a':\n+      hour += hour === 12 ? -12 : 0\n+      break\n+    case 'p':\n+      hour += hour !== 12 ? 12 : 0\n+      break\n   }\n \n-  // Unecessary spaces\n-  text = text.replace(/^\\s+|\\s+$/g, '')\n-    .replace(/\\s{2,}/g, ' ')\n-    .replace(/[\\t\\r\\n]/g, '')\n-    .toLowerCase()\n-\n-  // in contrast to php, js Date.parse function interprets:\n-  // dates given as yyyy-mm-dd as in timezone: UTC,\n-  // dates with \".\" or \"-\" as MDY instead of DMY\n-  // dates with two-digit years differently\n-  // etc...etc...\n-  // ...therefore we manually parse lots of common date formats\n-  var pattern = new RegExp([\n-    '^(\\\\d{1,4})',\n-    '([\\\\-\\\\.\\\\/:])',\n-    '(\\\\d{1,2})',\n-    '([\\\\-\\\\.\\\\/:])',\n-    '(\\\\d{1,4})',\n-    '(?:\\\\s(\\\\d{1,2}):(\\\\d{2})?:?(\\\\d{2})?)?',\n-    '(?:\\\\s([A-Z]+)?)?$'\n-  ].join(''))\n-  match = text.match(pattern)\n-\n-  if (match && match[2] === match[4]) {\n-    if (match[1] > 1901) {\n-      switch (match[2]) {\n-        case '-':\n-          // YYYY-M-D\n-          if (match[3] > 12 || match[5] > 31) {\n-            return fail\n-          }\n-\n-          return new Date(match[1], parseInt(match[3], 10) - 1, match[5],\n-          match[6] || 0, match[7] || 0, match[8] || 0, match[9] || 0) / 1000\n-        case '.':\n-          // YYYY.M.D is not parsed by strtotime()\n-          return fail\n-        case '/':\n-          // YYYY/M/D\n-          if (match[3] > 12 || match[5] > 31) {\n-            return fail\n-          }\n-\n-          return new Date(match[1], parseInt(match[3], 10) - 1, match[5],\n-          match[6] || 0, match[7] || 0, match[8] || 0, match[9] || 0) / 1000\n-      }\n-    } else if (match[5] > 1901) {\n-      switch (match[2]) {\n-        case '-':\n-          // D-M-YYYY\n-          if (match[3] > 12 || match[1] > 31) {\n-            return fail\n-          }\n-\n-          return new Date(match[5], parseInt(match[3], 10) - 1, match[1],\n-          match[6] || 0, match[7] || 0, match[8] || 0, match[9] || 0) / 1000\n-        case '.':\n-          // D.M.YYYY\n-          if (match[3] > 12 || match[1] > 31) {\n-            return fail\n-          }\n-\n-          return new Date(match[5], parseInt(match[3], 10) - 1, match[1],\n-          match[6] || 0, match[7] || 0, match[8] || 0, match[9] || 0) / 1000\n-        case '/':\n-          // M/D/YYYY\n-          if (match[1] > 12 || match[3] > 31) {\n-            return fail\n-          }\n-\n-          return new Date(match[5], parseInt(match[1], 10) - 1, match[3],\n-          match[6] || 0, match[7] || 0, match[8] || 0, match[9] || 0) / 1000\n-      }\n-    } else {\n-      switch (match[2]) {\n-        case '-':\n-          // YY-M-D\n-          if (match[3] > 12 || match[5] > 31 || (match[1] < 70 && match[1] > 38)) {\n-            return fail\n-          }\n-\n-          year = match[1] >= 0 && match[1] <= 38 ? +match[1] + 2000 : match[1]\n-          return new Date(year, parseInt(match[3], 10) - 1, match[5],\n-          match[6] || 0, match[7] || 0, match[8] || 0, match[9] || 0) / 1000\n-        case '.':\n-          // D.M.YY or H.MM.SS\n-          if (match[5] >= 70) {\n-            // D.M.YY\n-            if (match[3] > 12 || match[1] > 31) {\n-              return fail\n-            }\n-\n-            return new Date(match[5], parseInt(match[3], 10) - 1, match[1],\n-            match[6] || 0, match[7] || 0, match[8] || 0, match[9] || 0) / 1000\n-          }\n-          if (match[5] < 60 && !match[6]) {\n-            // H.MM.SS\n-            if (match[1] > 23 || match[3] > 59) {\n-              return fail\n-            }\n-\n-            today = new Date()\n-            return new Date(today.getFullYear(), today.getMonth(), today.getDate(),\n-            match[1] || 0, match[3] || 0, match[5] || 0, match[9] || 0) / 1000\n-          }\n-\n-          // invalid format, cannot be parsed\n-          return fail\n-        case '/':\n-          // M/D/YY\n-          if (match[1] > 12 || match[3] > 31 || (match[5] < 70 && match[5] > 38)) {\n-            return fail\n-          }\n-\n-          year = match[5] >= 0 && match[5] <= 38 ? +match[5] + 2000 : match[5]\n-          return new Date(year, parseInt(match[1], 10) - 1, match[3],\n-          match[6] || 0, match[7] || 0, match[8] || 0, match[9] || 0) / 1000\n-        case ':':\n-          // HH:MM:SS\n-          if (match[1] > 23 || match[3] > 59 || match[5] > 59) {\n-            return fail\n-          }\n-\n-          today = new Date()\n-          return new Date(today.getFullYear(), today.getMonth(), today.getDate(),\n-          match[1] || 0, match[3] || 0, match[5] || 0) / 1000\n-      }\n-    }\n+  return hour\n+}\n+\n+function processYear (yearStr) {\n+  let year = +yearStr\n+\n+  if (yearStr.length < 4 && year < 100) {\n+    year += year < 70 ? 2000 : 1900\n   }\n \n-  // other formats and \"now\" should be parsed by Date.parse()\n-  if (text === 'now') {\n-    return now === null || isNaN(now)\n-      ? new Date().getTime() / 1000 | 0\n-      : now | 0\n+  return year\n+}\n+\n+function lookupMonth (monthStr) {\n+  return {\n+    jan: 0,\n+    january: 0,\n+    i: 0,\n+    feb: 1,\n+    february: 1,\n+    ii: 1,\n+    mar: 2,\n+    march: 2,\n+    iii: 2,\n+    apr: 3,\n+    april: 3,\n+    iv: 3,\n+    may: 4,\n+    v: 4,\n+    jun: 5,\n+    june: 5,\n+    vi: 5,\n+    jul: 6,\n+    july: 6,\n+    vii: 6,\n+    aug: 7,\n+    august: 7,\n+    viii: 7,\n+    sep: 8,\n+    sept: 8,\n+    september: 8,\n+    ix: 8,\n+    oct: 9,\n+    october: 9,\n+    x: 9,\n+    nov: 10,\n+    november: 10,\n+    xi: 10,\n+    dec: 11,\n+    december: 11,\n+    xii: 11\n+  }[monthStr.toLowerCase()]\n+}\n+\n+function lookupWeekday (dayStr, desiredSundayNumber = 0) {\n+  const dayNumbers = {\n+    mon: 1,\n+    monday: 1,\n+    tue: 2,\n+    tuesday: 2,\n+    wed: 3,\n+    wednesday: 3,\n+    thu: 4,\n+    thursday: 4,\n+    fri: 5,\n+    friday: 5,\n+    sat: 6,\n+    saturday: 6,\n+    sun: 0,\n+    sunday: 0\n   }\n-  if (!isNaN(parsed = Date.parse(text))) {\n-    return parsed / 1000 | 0\n+\n+  return dayNumbers[dayStr.toLowerCase()] || desiredSundayNumber\n+}\n+\n+function lookupRelative (relText) {\n+  const relativeNumbers = {\n+    last: -1,\n+    previous: -1,\n+    this: 0,\n+    first: 1,\n+    next: 1,\n+    second: 2,\n+    third: 3,\n+    fourth: 4,\n+    fifth: 5,\n+    sixth: 6,\n+    seventh: 7,\n+    eight: 8,\n+    eighth: 8,\n+    ninth: 9,\n+    tenth: 10,\n+    eleventh: 11,\n+    twelfth: 12\n   }\n-  // Browsers !== Chrome have problems parsing ISO 8601 date strings, as they do\n-  // not accept lower case characters, space, or shortened time zones.\n-  // Therefore, fix these problems and try again.\n-  // Examples:\n-  //   2015-04-15 20:33:59+02\n-  //   2015-04-15 20:33:59z\n-  //   2015-04-15t20:33:59+02:00\n-  pattern = new RegExp([\n-    '^([0-9]{4}-[0-9]{2}-[0-9]{2})',\n-    '[ t]',\n-    '([0-9]{2}:[0-9]{2}:[0-9]{2}(\\\\.[0-9]+)?)',\n-    '([\\\\+-][0-9]{2}(:[0-9]{2})?|z)'\n-  ].join(''))\n-  match = text.match(pattern)\n-  if (match) {\n-    // @todo: time zone information\n-    if (match[4] === 'z') {\n-      match[4] = 'Z'\n-    } else if (match[4].match(/^([+-][0-9]{2})$/)) {\n-      match[4] = match[4] + ':00'\n-    }\n-\n-    if (!isNaN(parsed = Date.parse(match[1] + 'T' + match[2] + match[4]))) {\n-      return parsed / 1000 | 0\n-    }\n+\n+  const relativeBehavior = {\n+    this: 1\n   }\n \n-  date = now ? new Date(now * 1000) : new Date()\n-  days = {\n-    'sun': 0,\n-    'mon': 1,\n-    'tue': 2,\n-    'wed': 3,\n-    'thu': 4,\n-    'fri': 5,\n-    'sat': 6\n+  const relTextLower = relText.toLowerCase()\n+\n+  return {\n+    amount: relativeNumbers[relTextLower],\n+    behavior: relativeBehavior[relTextLower] || 0\n   }\n-  ranges = {\n-    'yea': 'FullYear',\n-    'mon': 'Month',\n-    'day': 'Date',\n-    'hou': 'Hours',\n-    'min': 'Minutes',\n-    'sec': 'Seconds'\n+}\n+\n+function processTzCorrection (tzOffset, oldValue) {\n+  const reTzCorrectionLoose = /(?:GMT)?([+-])(\\d+)(:?)(\\d{0,2})/i\n+  tzOffset = tzOffset && tzOffset.match(reTzCorrectionLoose)\n+\n+  if (!tzOffset) {\n+    return oldValue\n   }\n \n-  function lastNext (type, range, modifier) {\n-    var diff\n-    var day = days[range]\n+  const sign = tzOffset[1] === '-' ? -1 : 1\n+  let hours = +tzOffset[2]\n+  let minutes = +tzOffset[4]\n \n-    if (typeof day !== 'undefined') {\n-      diff = day - date.getDay()\n+  if (!tzOffset[4] && !tzOffset[3]) {\n+    minutes = Math.floor(hours % 100)\n+    hours = Math.floor(hours / 100)\n+  }\n+\n+  // timezone offset in seconds\n+  return sign * (hours * 60 + minutes) * 60\n+}\n+\n+// tz abbrevation : tz offset in seconds\n+const tzAbbrOffsets = {\n+  acdt: 37800,\n+  acst: 34200,\n+  addt: -7200,\n+  adt: -10800,\n+  aedt: 39600,\n+  aest: 36000,\n+  ahdt: -32400,\n+  ahst: -36000,\n+  akdt: -28800,\n+  akst: -32400,\n+  amt: -13840,\n+  apt: -10800,\n+  ast: -14400,\n+  awdt: 32400,\n+  awst: 28800,\n+  awt: -10800,\n+  bdst: 7200,\n+  bdt: -36000,\n+  bmt: -14309,\n+  bst: 3600,\n+  cast: 34200,\n+  cat: 7200,\n+  cddt: -14400,\n+  cdt: -18000,\n+  cemt: 10800,\n+  cest: 7200,\n+  cet: 3600,\n+  cmt: -15408,\n+  cpt: -18000,\n+  cst: -21600,\n+  cwt: -18000,\n+  chst: 36000,\n+  dmt: -1521,\n+  eat: 10800,\n+  eddt: -10800,\n+  edt: -14400,\n+  eest: 10800,\n+  eet: 7200,\n+  emt: -26248,\n+  ept: -14400,\n+  est: -18000,\n+  ewt: -14400,\n+  ffmt: -14660,\n+  fmt: -4056,\n+  gdt: 39600,\n+  gmt: 0,\n+  gst: 36000,\n+  hdt: -34200,\n+  hkst: 32400,\n+  hkt: 28800,\n+  hmt: -19776,\n+  hpt: -34200,\n+  hst: -36000,\n+  hwt: -34200,\n+  iddt: 14400,\n+  idt: 10800,\n+  imt: 25025,\n+  ist: 7200,\n+  jdt: 36000,\n+  jmt: 8440,\n+  jst: 32400,\n+  kdt: 36000,\n+  kmt: 5736,\n+  kst: 30600,\n+  lst: 9394,\n+  mddt: -18000,\n+  mdst: 16279,\n+  mdt: -21600,\n+  mest: 7200,\n+  met: 3600,\n+  mmt: 9017,\n+  mpt: -21600,\n+  msd: 14400,\n+  msk: 10800,\n+  mst: -25200,\n+  mwt: -21600,\n+  nddt: -5400,\n+  ndt: -9052,\n+  npt: -9000,\n+  nst: -12600,\n+  nwt: -9000,\n+  nzdt: 46800,\n+  nzmt: 41400,\n+  nzst: 43200,\n+  pddt: -21600,\n+  pdt: -25200,\n+  pkst: 21600,\n+  pkt: 18000,\n+  plmt: 25590,\n+  pmt: -13236,\n+  ppmt: -17340,\n+  ppt: -25200,\n+  pst: -28800,\n+  pwt: -25200,\n+  qmt: -18840,\n+  rmt: 5794,\n+  sast: 7200,\n+  sdmt: -16800,\n+  sjmt: -20173,\n+  smt: -13884,\n+  sst: -39600,\n+  tbmt: 10751,\n+  tmt: 12344,\n+  uct: 0,\n+  utc: 0,\n+  wast: 7200,\n+  wat: 3600,\n+  wemt: 7200,\n+  west: 3600,\n+  wet: 0,\n+  wib: 25200,\n+  wita: 28800,\n+  wit: 32400,\n+  wmt: 5040,\n+  yddt: -25200,\n+  ydt: -28800,\n+  ypt: -28800,\n+  yst: -32400,\n+  ywt: -28800,\n+  a: 3600,\n+  b: 7200,\n+  c: 10800,\n+  d: 14400,\n+  e: 18000,\n+  f: 21600,\n+  g: 25200,\n+  h: 28800,\n+  i: 32400,\n+  k: 36000,\n+  l: 39600,\n+  m: 43200,\n+  n: -3600,\n+  o: -7200,\n+  p: -10800,\n+  q: -14400,\n+  r: -18000,\n+  s: -21600,\n+  t: -25200,\n+  u: -28800,\n+  v: -32400,\n+  w: -36000,\n+  x: -39600,\n+  y: -43200,\n+  z: 0\n+}\n+\n+const formats = {\n+  yesterday: {\n+    regex: /^yesterday/i,\n+    name: 'yesterday',\n+    callback () {\n+      this.rd -= 1\n+      return this.resetTime()\n+    }\n+  },\n+\n+  now: {\n+    regex: /^now/i,\n+    name: 'now'\n+    // do nothing\n+  },\n+\n+  noon: {\n+    regex: /^noon/i,\n+    name: 'noon',\n+    callback () {\n+      return this.resetTime() && this.time(12, 0, 0, 0)\n+    }\n+  },\n+\n+  midnightOrToday: {\n+    regex: /^(midnight|today)/i,\n+    name: 'midnight | today',\n+    callback () {\n+      return this.resetTime()\n+    }\n+  },\n+\n+  tomorrow: {\n+    regex: /^tomorrow/i,\n+    name: 'tomorrow',\n+    callback () {\n+      this.rd += 1\n+      return this.resetTime()\n+    }\n+  },\n+\n+  timestamp: {\n+    regex: /^@(-?\\d+)/i,\n+    name: 'timestamp',\n+    callback (match, timestamp) {\n+      this.rs += +timestamp\n+      this.y = 1970\n+      this.m = 0\n+      this.d = 1\n+      this.dates = 0\n \n-      if (diff === 0) {\n-        diff = 7 * modifier\n-      } else if (diff > 0 && type === 'last') {\n-        diff -= 7\n-      } else if (diff < 0 && type === 'next') {\n-        diff += 7\n+      return this.resetTime() && this.zone(0)\n+    }\n+  },\n+\n+  firstOrLastDay: {\n+    regex: /^(first|last) day of/i,\n+    name: 'firstdayof | lastdayof',\n+    callback (match, day) {\n+      if (day.toLowerCase() === 'first') {\n+        this.firstOrLastDayOfMonth = 1\n+      } else {\n+        this.firstOrLastDayOfMonth = -1\n       }\n+    }\n+  },\n+\n+  backOrFrontOf: {\n+    regex: RegExp('^(back|front) of ' + reHour24 + reSpaceOpt + reMeridian + '?', 'i'),\n+    name: 'backof | frontof',\n+    callback (match, side, hours, meridian) {\n+      const back = side.toLowerCase() === 'back'\n+      let hour = +hours\n+      let minute = 15\n+\n+      if (!back) {\n+        hour -= 1\n+        minute = 45\n+      }\n+\n+      hour = processMeridian(hour, meridian)\n \n-      date.setDate(date.getDate() + diff)\n+      return this.resetTime() && this.time(hour, minute, 0, 0)\n     }\n-  }\n+  },\n+\n+  weekdayOf: {\n+    regex: RegExp('^(' + reReltextnumber + '|' + reReltexttext + ')' + reSpace + '(' + reDayfull + '|' + reDayabbr + ')' + reSpace + 'of', 'i'),\n+    name: 'weekdayof'\n+    // todo\n+  },\n+\n+  mssqltime: {\n+    regex: RegExp('^' + reHour12 + ':' + reMinutelz + ':' + reSecondlz + '[:.]([0-9]+)' + reMeridian, 'i'),\n+    name: 'mssqltime',\n+    callback (match, hour, minute, second, frac, meridian) {\n+      return this.time(processMeridian(+hour, meridian), +minute, +second, +frac.substr(0, 3))\n+    }\n+  },\n+\n+  timeLong12: {\n+    regex: RegExp('^' + reHour12 + '[:.]' + reMinute + '[:.]' + reSecondlz + reSpaceOpt + reMeridian, 'i'),\n+    name: 'timelong12',\n+    callback (match, hour, minute, second, meridian) {\n+      return this.time(processMeridian(+hour, meridian), +minute, +second, 0)\n+    }\n+  },\n+\n+  timeShort12: {\n+    regex: RegExp('^' + reHour12 + '[:.]' + reMinutelz + reSpaceOpt + reMeridian, 'i'),\n+    name: 'timeshort12',\n+    callback (match, hour, minute, meridian) {\n+      return this.time(processMeridian(+hour, meridian), +minute, 0, 0)\n+    }\n+  },\n+\n+  timeTiny12: {\n+    regex: RegExp('^' + reHour12 + reSpaceOpt + reMeridian, 'i'),\n+    name: 'timetiny12',\n+    callback (match, hour, meridian) {\n+      return this.time(processMeridian(+hour, meridian), 0, 0, 0)\n+    }\n+  },\n+\n+  soap: {\n+    regex: RegExp('^' + reYear4 + '-' + reMonthlz + '-' + reDaylz + 'T' + reHour24lz + ':' + reMinutelz + ':' + reSecondlz + reFrac + reTzCorrection + '?', 'i'),\n+    name: 'soap',\n+    callback (match, year, month, day, hour, minute, second, frac, tzCorrection) {\n+      return this.ymd(+year, month - 1, +day) &&\n+              this.time(+hour, +minute, +second, +frac.substr(0, 3)) &&\n+              this.zone(processTzCorrection(tzCorrection))\n+    }\n+  },\n+\n+  wddx: {\n+    regex: RegExp('^' + reYear4 + '-' + reMonth + '-' + reDay + 'T' + reHour24 + ':' + reMinute + ':' + reSecond),\n+    name: 'wddx',\n+    callback (match, year, month, day, hour, minute, second) {\n+      return this.ymd(+year, month - 1, +day) && this.time(+hour, +minute, +second, 0)\n+    }\n+  },\n+\n+  exif: {\n+    regex: RegExp('^' + reYear4 + ':' + reMonthlz + ':' + reDaylz + ' ' + reHour24lz + ':' + reMinutelz + ':' + reSecondlz, 'i'),\n+    name: 'exif',\n+    callback (match, year, month, day, hour, minute, second) {\n+      return this.ymd(+year, month - 1, +day) && this.time(+hour, +minute, +second, 0)\n+    }\n+  },\n+\n+  xmlRpc: {\n+    regex: RegExp('^' + reYear4 + reMonthlz + reDaylz + 'T' + reHour24 + ':' + reMinutelz + ':' + reSecondlz),\n+    name: 'xmlrpc',\n+    callback (match, year, month, day, hour, minute, second) {\n+      return this.ymd(+year, month - 1, +day) && this.time(+hour, +minute, +second, 0)\n+    }\n+  },\n+\n+  xmlRpcNoColon: {\n+    regex: RegExp('^' + reYear4 + reMonthlz + reDaylz + '[Tt]' + reHour24 + reMinutelz + reSecondlz),\n+    name: 'xmlrpcnocolon',\n+    callback (match, year, month, day, hour, minute, second) {\n+      return this.ymd(+year, month - 1, +day) && this.time(+hour, +minute, +second, 0)\n+    }\n+  },\n+\n+  clf: {\n+    regex: RegExp('^' + reDay + '/(' + reMonthAbbr + ')/' + reYear4 + ':' + reHour24lz + ':' + reMinutelz + ':' + reSecondlz + reSpace + reTzCorrection, 'i'),\n+    name: 'clf',\n+    callback (match, day, month, year, hour, minute, second, tzCorrection) {\n+      return this.ymd(+year, lookupMonth(month), +day) &&\n+              this.time(+hour, +minute, +second, 0) &&\n+              this.zone(processTzCorrection(tzCorrection))\n+    }\n+  },\n+\n+  iso8601long: {\n+    regex: RegExp('^t?' + reHour24 + '[:.]' + reMinute + '[:.]' + reSecond + reFrac, 'i'),\n+    name: 'iso8601long',\n+    callback (match, hour, minute, second, frac) {\n+      return this.time(+hour, +minute, +second, +frac.substr(0, 3))\n+    }\n+  },\n+\n+  dateTextual: {\n+    regex: RegExp('^' + reMonthText + '[ .\\\\t-]*' + reDay + '[,.stndrh\\\\t ]+' + reYear, 'i'),\n+    name: 'datetextual',\n+    callback (match, month, day, year) {\n+      return this.ymd(processYear(year), lookupMonth(month), +day)\n+    }\n+  },\n+\n+  pointedDate4: {\n+    regex: RegExp('^' + reDay + '[.\\\\t-]' + reMonth + '[.-]' + reYear4),\n+    name: 'pointeddate4',\n+    callback (match, day, month, year) {\n+      return this.ymd(+year, month - 1, +day)\n+    }\n+  },\n+\n+  pointedDate2: {\n+    regex: RegExp('^' + reDay + '[.\\\\t]' + reMonth + '\\\\.' + reYear2),\n+    name: 'pointeddate2',\n+    callback (match, day, month, year) {\n+      return this.ymd(processYear(year), month - 1, +day)\n+    }\n+  },\n+\n+  timeLong24: {\n+    regex: RegExp('^t?' + reHour24 + '[:.]' + reMinute + '[:.]' + reSecond),\n+    name: 'timelong24',\n+    callback (match, hour, minute, second) {\n+      return this.time(+hour, +minute, +second, 0)\n+    }\n+  },\n+\n+  dateNoColon: {\n+    regex: RegExp('^' + reYear4 + reMonthlz + reDaylz),\n+    name: 'datenocolon',\n+    callback (match, year, month, day) {\n+      return this.ymd(+year, month - 1, +day)\n+    }\n+  },\n+\n+  pgydotd: {\n+    regex: RegExp('^' + reYear4 + '\\\\.?' + reDayOfYear),\n+    name: 'pgydotd',\n+    callback (match, year, day) {\n+      return this.ymd(+year, 0, +day)\n+    }\n+  },\n+\n+  timeShort24: {\n+    regex: RegExp('^t?' + reHour24 + '[:.]' + reMinute, 'i'),\n+    name: 'timeshort24',\n+    callback (match, hour, minute) {\n+      return this.time(+hour, +minute, 0, 0)\n+    }\n+  },\n+\n+  iso8601noColon: {\n+    regex: RegExp('^t?' + reHour24lz + reMinutelz + reSecondlz, 'i'),\n+    name: 'iso8601nocolon',\n+    callback (match, hour, minute, second) {\n+      return this.time(+hour, +minute, +second, 0)\n+    }\n+  },\n+\n+  iso8601dateSlash: {\n+    // eventhough the trailing slash is optional in PHP\n+    // here it's mandatory and inputs without the slash\n+    // are handled by dateslash\n+    regex: RegExp('^' + reYear4 + '/' + reMonthlz + '/' + reDaylz + '/'),\n+    name: 'iso8601dateslash',\n+    callback (match, year, month, day) {\n+      return this.ymd(+year, month - 1, +day)\n+    }\n+  },\n+\n+  dateSlash: {\n+    regex: RegExp('^' + reYear4 + '/' + reMonth + '/' + reDay),\n+    name: 'dateslash',\n+    callback (match, year, month, day) {\n+      return this.ymd(+year, month - 1, +day)\n+    }\n+  },\n+\n+  american: {\n+    regex: RegExp('^' + reMonth + '/' + reDay + '/' + reYear),\n+    name: 'american',\n+    callback (match, month, day, year) {\n+      return this.ymd(processYear(year), month - 1, +day)\n+    }\n+  },\n+\n+  americanShort: {\n+    regex: RegExp('^' + reMonth + '/' + reDay),\n+    name: 'americanshort',\n+    callback (match, month, day) {\n+      return this.ymd(this.y, month - 1, +day)\n+    }\n+  },\n+\n+  gnuDateShortOrIso8601date2: {\n+    // iso8601date2 is complete subset of gnudateshort\n+    regex: RegExp('^' + reYear + '-' + reMonth + '-' + reDay),\n+    name: 'gnudateshort | iso8601date2',\n+    callback (match, year, month, day) {\n+      return this.ymd(processYear(year), month - 1, +day)\n+    }\n+  },\n+\n+  iso8601date4: {\n+    regex: RegExp('^' + reYear4withSign + '-' + reMonthlz + '-' + reDaylz),\n+    name: 'iso8601date4',\n+    callback (match, year, month, day) {\n+      return this.ymd(+year, month - 1, +day)\n+    }\n+  },\n+\n+  gnuNoColon: {\n+    regex: RegExp('^t?' + reHour24lz + reMinutelz, 'i'),\n+    name: 'gnunocolon',\n+    callback (match, hour, minute) {\n+      // this rule is a special case\n+      // if time was already set once by any preceding rule, it sets the captured value as year\n+      switch (this.times) {\n+        case 0:\n+          return this.time(+hour, +minute, 0, this.f)\n+        case 1:\n+          this.y = hour * 100 + +minute\n+          this.times++\n+\n+          return true\n+        default:\n+          return false\n+      }\n+    }\n+  },\n+\n+  gnuDateShorter: {\n+    regex: RegExp('^' + reYear4 + '-' + reMonth),\n+    name: 'gnudateshorter',\n+    callback (match, year, month) {\n+      return this.ymd(+year, month - 1, 1)\n+    }\n+  },\n+\n+  pgTextReverse: {\n+    // note: allowed years are from 32-9999\n+    // years below 32 should be treated as days in datefull\n+    regex: RegExp('^' + '(\\\\d{3,4}|[4-9]\\\\d|3[2-9])-(' + reMonthAbbr + ')-' + reDaylz, 'i'),\n+    name: 'pgtextreverse',\n+    callback (match, year, month, day) {\n+      return this.ymd(processYear(year), lookupMonth(month), +day)\n+    }\n+  },\n+\n+  dateFull: {\n+    regex: RegExp('^' + reDay + '[ \\\\t.-]*' + reMonthText + '[ \\\\t.-]*' + reYear, 'i'),\n+    name: 'datefull',\n+    callback (match, day, month, year) {\n+      return this.ymd(processYear(year), lookupMonth(month), +day)\n+    }\n+  },\n+\n+  dateNoDay: {\n+    regex: RegExp('^' + reMonthText + '[ .\\\\t-]*' + reYear4, 'i'),\n+    name: 'datenoday',\n+    callback (match, month, year) {\n+      return this.ymd(+year, lookupMonth(month), 1)\n+    }\n+  },\n+\n+  dateNoDayRev: {\n+    regex: RegExp('^' + reYear4 + '[ .\\\\t-]*' + reMonthText, 'i'),\n+    name: 'datenodayrev',\n+    callback (match, year, month) {\n+      return this.ymd(+year, lookupMonth(month), 1)\n+    }\n+  },\n+\n+  pgTextShort: {\n+    regex: RegExp('^(' + reMonthAbbr + ')-' + reDaylz + '-' + reYear, 'i'),\n+    name: 'pgtextshort',\n+    callback (match, month, day, year) {\n+      return this.ymd(processYear(year), lookupMonth(month), +day)\n+    }\n+  },\n+\n+  dateNoYear: {\n+    regex: RegExp('^' + reDateNoYear, 'i'),\n+    name: 'datenoyear',\n+    callback (match, month, day) {\n+      return this.ymd(this.y, lookupMonth(month), +day)\n+    }\n+  },\n+\n+  dateNoYearRev: {\n+    regex: RegExp('^' + reDay + '[ .\\\\t-]*' + reMonthText, 'i'),\n+    name: 'datenoyearrev',\n+    callback (match, day, month) {\n+      return this.ymd(this.y, lookupMonth(month), +day)\n+    }\n+  },\n+\n+  isoWeekDay: {\n+    regex: RegExp('^' + reYear4 + '-?W' + reWeekOfYear + '(?:-?([0-7]))?'),\n+    name: 'isoweekday | isoweek',\n+    callback (match, year, week, day) {\n+      day = day ? +day : 1\n+\n+      if (!this.ymd(+year, 0, 1)) {\n+        return false\n+      }\n+\n+      // get day of week for Jan 1st\n+      let dayOfWeek = new Date(this.y, this.m, this.d).getDay()\n+\n+      // and use the day to figure out the offset for day 1 of week 1\n+      dayOfWeek = 0 - (dayOfWeek > 4 ? dayOfWeek - 7 : dayOfWeek)\n+\n+      this.rd += dayOfWeek + ((week - 1) * 7) + day\n+    }\n+  },\n+\n+  relativeText: {\n+    regex: RegExp('^(' + reReltextnumber + '|' + reReltexttext + ')' + reSpace + '(' + reReltextunit + ')', 'i'),\n+    name: 'relativetext',\n+    callback (match, relValue, relUnit) {\n+      // todo: implement handling of 'this time-unit'\n+      // eslint-disable-next-line no-unused-vars\n+      const { amount, behavior } = lookupRelative(relValue)\n \n-  function process (val) {\n-    // @todo: Reconcile this with regex using \\s, taking into account\n-    // browser issues with split and regexes\n-    var splt = val.split(' ')\n-    var type = splt[0]\n-    var range = splt[1].substring(0, 3)\n-    var typeIsNumber = /\\d+/.test(type)\n-    var ago = splt[2] === 'ago'\n-    var num = (type === 'last' ? -1 : 1) * (ago ? -1 : 1)\n+      switch (relUnit.toLowerCase()) {\n+        case 'sec':\n+        case 'secs':\n+        case 'second':\n+        case 'seconds':\n+          this.rs += amount\n+          break\n+        case 'min':\n+        case 'mins':\n+        case 'minute':\n+        case 'minutes':\n+          this.ri += amount\n+          break\n+        case 'hour':\n+        case 'hours':\n+          this.rh += amount\n+          break\n+        case 'day':\n+        case 'days':\n+          this.rd += amount\n+          break\n+        case 'fortnight':\n+        case 'fortnights':\n+        case 'forthnight':\n+        case 'forthnights':\n+          this.rd += amount * 14\n+          break\n+        case 'week':\n+        case 'weeks':\n+          this.rd += amount * 7\n+          break\n+        case 'month':\n+        case 'months':\n+          this.rm += amount\n+          break\n+        case 'year':\n+        case 'years':\n+          this.ry += amount\n+          break\n+        case 'mon': case 'monday':\n+        case 'tue': case 'tuesday':\n+        case 'wed': case 'wednesday':\n+        case 'thu': case 'thursday':\n+        case 'fri': case 'friday':\n+        case 'sat': case 'saturday':\n+        case 'sun': case 'sunday':\n+          this.resetTime()\n+          this.weekday = lookupWeekday(relUnit, 7)\n+          this.weekdayBehavior = 1\n+          this.rd += (amount > 0 ? amount - 1 : amount) * 7\n+          break\n+        case 'weekday':\n+        case 'weekdays':\n+          // todo\n+          break\n+      }\n+    }\n+  },\n+\n+  relative: {\n+    regex: RegExp('^([+-]*)[ \\\\t]*(\\\\d+)' + reSpaceOpt + '(' + reReltextunit + '|week)', 'i'),\n+    name: 'relative',\n+    callback (match, signs, relValue, relUnit) {\n+      const minuses = signs.replace(/[^-]/g, '').length\n+\n+      const amount = +relValue * Math.pow(-1, minuses)\n+\n+      switch (relUnit.toLowerCase()) {\n+        case 'sec':\n+        case 'secs':\n+        case 'second':\n+        case 'seconds':\n+          this.rs += amount\n+          break\n+        case 'min':\n+        case 'mins':\n+        case 'minute':\n+        case 'minutes':\n+          this.ri += amount\n+          break\n+        case 'hour':\n+        case 'hours':\n+          this.rh += amount\n+          break\n+        case 'day':\n+        case 'days':\n+          this.rd += amount\n+          break\n+        case 'fortnight':\n+        case 'fortnights':\n+        case 'forthnight':\n+        case 'forthnights':\n+          this.rd += amount * 14\n+          break\n+        case 'week':\n+        case 'weeks':\n+          this.rd += amount * 7\n+          break\n+        case 'month':\n+        case 'months':\n+          this.rm += amount\n+          break\n+        case 'year':\n+        case 'years':\n+          this.ry += amount\n+          break\n+        case 'mon': case 'monday':\n+        case 'tue': case 'tuesday':\n+        case 'wed': case 'wednesday':\n+        case 'thu': case 'thursday':\n+        case 'fri': case 'friday':\n+        case 'sat': case 'saturday':\n+        case 'sun': case 'sunday':\n+          this.resetTime()\n+          this.weekday = lookupWeekday(relUnit, 7)\n+          this.weekdayBehavior = 1\n+          this.rd += (amount > 0 ? amount - 1 : amount) * 7\n+          break\n+        case 'weekday':\n+        case 'weekdays':\n+          // todo\n+          break\n+      }\n+    }\n+  },\n+\n+  dayText: {\n+    regex: RegExp('^(' + reDaytext + ')', 'i'),\n+    name: 'daytext',\n+    callback (match, dayText) {\n+      this.resetTime()\n+      this.weekday = lookupWeekday(dayText, 0)\n \n-    if (typeIsNumber) {\n-      num *= parseInt(type, 10)\n+      if (this.weekdayBehavior !== 2) {\n+        this.weekdayBehavior = 1\n+      }\n+    }\n+  },\n+\n+  relativeTextWeek: {\n+    regex: RegExp('^(' + reReltexttext + ')' + reSpace + 'week', 'i'),\n+    name: 'relativetextweek',\n+    callback (match, relText) {\n+      this.weekdayBehavior = 2\n+\n+      switch (relText.toLowerCase()) {\n+        case 'this':\n+          this.rd += 0\n+          break\n+        case 'next':\n+          this.rd += 7\n+          break\n+        case 'last':\n+        case 'previous':\n+          this.rd -= 7\n+          break\n+      }\n+\n+      if (isNaN(this.weekday)) {\n+        this.weekday = 1\n+      }\n     }\n+  },\n \n-    if (ranges.hasOwnProperty(range) && !splt[1].match(/^mon(day|\\.)?$/i)) {\n-      return date['set' + ranges[range]](date['get' + ranges[range]]() + num)\n+  monthFullOrMonthAbbr: {\n+    regex: RegExp('^(' + reMonthFull + '|' + reMonthAbbr + ')', 'i'),\n+    name: 'monthfull | monthabbr',\n+    callback (match, month) {\n+      return this.ymd(this.y, lookupMonth(month), this.d)\n     }\n+  },\n \n-    if (range === 'wee') {\n-      return date.setDate(date.getDate() + (num * 7))\n+  tzCorrection: {\n+    regex: RegExp('^' + reTzCorrection, 'i'),\n+    name: 'tzcorrection',\n+    callback (tzCorrection) {\n+      return this.zone(processTzCorrection(tzCorrection))\n     }\n+  },\n \n-    if (type === 'next' || type === 'last') {\n-      lastNext(type, range, num)\n-    } else if (!typeIsNumber) {\n+  tzAbbr: {\n+    regex: RegExp('^' + reTzAbbr),\n+    name: 'tzabbr',\n+    callback (match, abbr) {\n+      const offset = tzAbbrOffsets[abbr.toLowerCase()]\n+\n+      if (isNaN(offset)) {\n+        return false\n+      }\n+\n+      return this.zone(offset)\n+    }\n+  },\n+\n+  ago: {\n+    regex: /^ago/i,\n+    name: 'ago',\n+    callback () {\n+      this.ry = -this.ry\n+      this.rm = -this.rm\n+      this.rd = -this.rd\n+      this.rh = -this.rh\n+      this.ri = -this.ri\n+      this.rs = -this.rs\n+      this.rf = -this.rf\n+    }\n+  },\n+\n+  year4: {\n+    regex: RegExp('^' + reYear4),\n+    name: 'year4',\n+    callback (match, year) {\n+      this.y = +year\n+      return true\n+    }\n+  },\n+\n+  whitespace: {\n+    regex: /^[ .,\\t]+/,\n+    name: 'whitespace'\n+    // do nothing\n+  },\n+\n+  dateShortWithTimeLong: {\n+    regex: RegExp('^' + reDateNoYear + 't?' + reHour24 + '[:.]' + reMinute + '[:.]' + reSecond, 'i'),\n+    name: 'dateshortwithtimelong',\n+    callback (match, month, day, hour, minute, second) {\n+      return this.ymd(this.y, lookupMonth(month), +day) && this.time(+hour, +minute, +second, 0)\n+    }\n+  },\n+\n+  dateShortWithTimeLong12: {\n+    regex: RegExp('^' + reDateNoYear + reHour12 + '[:.]' + reMinute + '[:.]' + reSecondlz + reSpaceOpt + reMeridian, 'i'),\n+    name: 'dateshortwithtimelong12',\n+    callback (match, month, day, hour, minute, second, meridian) {\n+      return this.ymd(this.y, lookupMonth(month), +day) && this.time(processMeridian(+hour, meridian), +minute, +second, 0)\n+    }\n+  },\n+\n+  dateShortWithTimeShort: {\n+    regex: RegExp('^' + reDateNoYear + 't?' + reHour24 + '[:.]' + reMinute, 'i'),\n+    name: 'dateshortwithtimeshort',\n+    callback (match, month, day, hour, minute) {\n+      return this.ymd(this.y, lookupMonth(month), +day) && this.time(+hour, +minute, 0, 0)\n+    }\n+  },\n+\n+  dateShortWithTimeShort12: {\n+    regex: RegExp('^' + reDateNoYear + reHour12 + '[:.]' + reMinutelz + reSpaceOpt + reMeridian, 'i'),\n+    name: 'dateshortwithtimeshort12',\n+    callback (match, month, day, hour, minute, meridian) {\n+      return this.ymd(this.y, lookupMonth(month), +day) && this.time(processMeridian(+hour, meridian), +minute, 0, 0)\n+    }\n+  }\n+}\n+\n+const resultProto = {\n+  // date\n+  y: NaN,\n+  m: NaN,\n+  d: NaN,\n+  // time\n+  h: NaN,\n+  i: NaN,\n+  s: NaN,\n+  f: NaN,\n+\n+  // relative shifts\n+  ry: 0,\n+  rm: 0,\n+  rd: 0,\n+  rh: 0,\n+  ri: 0,\n+  rs: 0,\n+  rf: 0,\n+\n+  // weekday related shifts\n+  weekday: NaN,\n+  weekdayBehavior: 0,\n+\n+  // first or last day of month\n+  // 0 none, 1 first, -1 last\n+  firstOrLastDayOfMonth: 0,\n+\n+  // timezone correction in minutes\n+  z: NaN,\n+\n+  // counters\n+  dates: 0,\n+  times: 0,\n+  zones: 0,\n+\n+  // helper functions\n+  ymd (y, m, d) {\n+    if (this.dates > 0) {\n       return false\n     }\n \n+    this.dates++\n+    this.y = y\n+    this.m = m\n+    this.d = d\n     return true\n+  },\n+\n+  time (h, i, s, f) {\n+    if (this.times > 0) {\n+      return false\n+    }\n+\n+    this.times++\n+    this.h = h\n+    this.i = i\n+    this.s = s\n+    this.f = f\n+\n+    return true\n+  },\n+\n+  resetTime () {\n+    this.h = 0\n+    this.i = 0\n+    this.s = 0\n+    this.f = 0\n+    this.times = 0\n+\n+    return true\n+  },\n+\n+  zone (minutes) {\n+    if (this.zones <= 1) {\n+      this.zones++\n+      this.z = minutes\n+      return true\n+    }\n+\n+    return false\n+  },\n+\n+  toDate (relativeTo) {\n+    if (this.dates && !this.times) {\n+      this.h = this.i = this.s = this.f = 0\n+    }\n+\n+    // fill holes\n+    if (isNaN(this.y)) {\n+      this.y = relativeTo.getFullYear()\n+    }\n+\n+    if (isNaN(this.m)) {\n+      this.m = relativeTo.getMonth()\n+    }\n+\n+    if (isNaN(this.d)) {\n+      this.d = relativeTo.getDate()\n+    }\n+\n+    if (isNaN(this.h)) {\n+      this.h = relativeTo.getHours()\n+    }\n+\n+    if (isNaN(this.i)) {\n+      this.i = relativeTo.getMinutes()\n+    }\n+\n+    if (isNaN(this.s)) {\n+      this.s = relativeTo.getSeconds()\n+    }\n+\n+    if (isNaN(this.f)) {\n+      this.f = relativeTo.getMilliseconds()\n+    }\n+\n+    // adjust special early\n+    switch (this.firstOrLastDayOfMonth) {\n+      case 1:\n+        this.d = 1\n+        break\n+      case -1:\n+        this.d = 0\n+        this.m += 1\n+        break\n+    }\n+\n+    if (!isNaN(this.weekday)) {\n+      const date = new Date(relativeTo.getTime())\n+      date.setFullYear(this.y, this.m, this.d)\n+      date.setHours(this.h, this.i, this.s, this.f)\n+\n+      const dow = date.getDay()\n+\n+      if (this.weekdayBehavior === 2) {\n+        // To make \"this week\" work, where the current day of week is a \"sunday\"\n+        if (dow === 0 && this.weekday !== 0) {\n+          this.weekday = -6\n+        }\n+\n+        // To make \"sunday this week\" work, where the current day of week is not a \"sunday\"\n+        if (this.weekday === 0 && dow !== 0) {\n+          this.weekday = 7\n+        }\n+\n+        this.d -= dow\n+        this.d += this.weekday\n+      } else {\n+        let diff = this.weekday - dow\n+\n+        // some PHP magic\n+        if ((this.rd < 0 && diff < 0) || (this.rd >= 0 && diff <= -this.weekdayBehavior)) {\n+          diff += 7\n+        }\n+\n+        if (this.weekday >= 0) {\n+          this.d += diff\n+        } else {\n+          this.d -= (7 - (Math.abs(this.weekday) - dow))\n+        }\n+\n+        this.weekday = NaN\n+      }\n+    }\n+\n+    // adjust relative\n+    this.y += this.ry\n+    this.m += this.rm\n+    this.d += this.rd\n+\n+    this.h += this.rh\n+    this.i += this.ri\n+    this.s += this.rs\n+    this.f += this.rf\n+\n+    this.ry = this.rm = this.rd = 0\n+    this.rh = this.ri = this.rs = this.rf = 0\n+\n+    const result = new Date(relativeTo.getTime())\n+    // since Date constructor treats years <= 99 as 1900+\n+    // it can't be used, thus this weird way\n+    result.setFullYear(this.y, this.m, this.d)\n+    result.setHours(this.h, this.i, this.s, this.f)\n+\n+    // note: this is done twice in PHP\n+    // early when processing special relatives\n+    // and late\n+    // todo: check if the logic can be reduced\n+    // to just one time action\n+    switch (this.firstOrLastDayOfMonth) {\n+      case 1:\n+        result.setDate(1)\n+        break\n+      case -1:\n+        result.setMonth(result.getMonth() + 1, 0)\n+        break\n+    }\n+\n+    // adjust timezone\n+    if (!isNaN(this.z) && result.getTimezoneOffset() !== this.z) {\n+      result.setUTCFullYear(\n+        result.getFullYear(),\n+        result.getMonth(),\n+        result.getDate())\n+\n+      result.setUTCHours(\n+        result.getHours(),\n+        result.getMinutes(),\n+        result.getSeconds() - this.z,\n+        result.getMilliseconds())\n+    }\n+\n+    return result\n   }\n+}\n \n-  times = '(years?|months?|weeks?|days?|hours?|minutes?|min|seconds?|sec' +\n-    '|sunday|sun\\\\.?|monday|mon\\\\.?|tuesday|tue\\\\.?|wednesday|wed\\\\.?' +\n-    '|thursday|thu\\\\.?|friday|fri\\\\.?|saturday|sat\\\\.?)'\n-  regex = '([+-]?\\\\d+\\\\s' + times + '|' + '(last|next)\\\\s' + times + ')(\\\\sago)?'\n+module.exports = function strtotime (str, now) {\n+  //       discuss at: https://locutus.io/php/strtotime/\n+  //      original by: Caio Ariede (https://caioariede.com)\n+  //      improved by: Kevin van Zonneveld (https://kvz.io)\n+  //      improved by: Caio Ariede (https://caioariede.com)\n+  //      improved by: A. Mat\u00edas Quezada (https://amatiasq.com)\n+  //      improved by: preuter\n+  //      improved by: Brett Zamir (https://brett-zamir.me)\n+  //      improved by: Mirko Faber\n+  //         input by: David\n+  //      bugfixed by: Wagner B. Soares\n+  //      bugfixed by: Artur Tchernychev\n+  //      bugfixed by: Stephan B\u00f6sch-Plepelits (https://github.com/plepe)\n+  // reimplemented by: Rafa\u0142 Kukawski\n+  //           note 1: Examples all have a fixed timestamp to prevent\n+  //           note 1: tests to fail because of variable time(zones)\n+  //        example 1: strtotime('+1 day', 1129633200)\n+  //        returns 1: 1129719600\n+  //        example 2: strtotime('+1 week 2 days 4 hours 2 seconds', 1129633200)\n+  //        returns 2: 1130425202\n+  //        example 3: strtotime('last month', 1129633200)\n+  //        returns 3: 1127041200\n+  //        example 4: strtotime('2009-05-04 08:30:00+00')\n+  //        returns 4: 1241425800\n+  //        example 5: strtotime('2009-05-04 08:30:00+02:00')\n+  //        returns 5: 1241418600\n+  //        example 6: strtotime('2009-05-04 08:30:00 YWT')\n+  //        returns 6: 1241454600\n \n-  match = text.match(new RegExp(regex, 'gi'))\n-  if (!match) {\n-    return fail\n+  if (now == null) {\n+    now = Math.floor(Date.now() / 1000)\n   }\n \n-  for (i = 0, len = match.length; i < len; i++) {\n-    if (!process(match[i])) {\n-      return fail\n+  // the rule order is important\n+  // if multiple rules match, the longest match wins\n+  // if multiple rules match the same string, the first match wins\n+  const rules = [\n+    formats.yesterday,\n+    formats.now,\n+    formats.noon,\n+    formats.midnightOrToday,\n+    formats.tomorrow,\n+    formats.timestamp,\n+    formats.firstOrLastDay,\n+    formats.backOrFrontOf,\n+    // formats.weekdayOf, // not yet implemented\n+    formats.timeTiny12,\n+    formats.timeShort12,\n+    formats.timeLong12,\n+    formats.mssqltime,\n+    formats.timeShort24,\n+    formats.timeLong24,\n+    formats.iso8601long,\n+    formats.gnuNoColon,\n+    formats.iso8601noColon,\n+    formats.americanShort,\n+    formats.american,\n+    formats.iso8601date4,\n+    formats.iso8601dateSlash,\n+    formats.dateSlash,\n+    formats.gnuDateShortOrIso8601date2,\n+    formats.gnuDateShorter,\n+    formats.dateFull,\n+    formats.pointedDate4,\n+    formats.pointedDate2,\n+    formats.dateNoDay,\n+    formats.dateNoDayRev,\n+    formats.dateTextual,\n+    formats.dateNoYear,\n+    formats.dateNoYearRev,\n+    formats.dateNoColon,\n+    formats.xmlRpc,\n+    formats.xmlRpcNoColon,\n+    formats.soap,\n+    formats.wddx,\n+    formats.exif,\n+    formats.pgydotd,\n+    formats.isoWeekDay,\n+    formats.pgTextShort,\n+    formats.pgTextReverse,\n+    formats.clf,\n+    formats.year4,\n+    formats.ago,\n+    formats.dayText,\n+    formats.relativeTextWeek,\n+    formats.relativeText,\n+    formats.monthFullOrMonthAbbr,\n+    formats.tzCorrection,\n+    formats.tzAbbr,\n+    formats.dateShortWithTimeShort12,\n+    formats.dateShortWithTimeLong12,\n+    formats.dateShortWithTimeShort,\n+    formats.dateShortWithTimeLong,\n+    formats.relative,\n+    formats.whitespace\n+  ]\n+\n+  const result = Object.create(resultProto)\n+\n+  while (str.length) {\n+    let longestMatch = null\n+    let finalRule = null\n+\n+    for (let i = 0, l = rules.length; i < l; i++) {\n+      const format = rules[i]\n+\n+      const match = str.match(format.regex)\n+\n+      if (match) {\n+        if (!longestMatch || match[0].length > longestMatch[0].length) {\n+          longestMatch = match\n+          finalRule = format\n+        }\n+      }\n     }\n+\n+    if (!finalRule || (finalRule.callback && finalRule.callback.apply(result, longestMatch) === false)) {\n+      return false\n+    }\n+\n+    str = str.substr(longestMatch[0].length)\n+    finalRule = null\n+    longestMatch = null\n   }\n \n-  return (date.getTime() / 1000)\n+  return Math.floor(result.toDate(new Date(now * 1000)) / 1000)\n }\n {% endcodeblock %}\n\\ No newline at end of file\n", "diff --git a/website/source/php/exec/escapeshellarg.html b/website/source/php/exec/escapeshellarg.html\nindex 2edf28ec7..11a64d9ce 100644\n--- a/website/source/php/exec/escapeshellarg.html\n+++ b/website/source/php/exec/escapeshellarg.html\n@@ -2,15 +2,19 @@\n warning: 'This file is auto generated by `npm run web:inject`, do not edit by hand'\n examples:\n   - escapeshellarg(\"kevin's birthday\")\n+  - escapeshellarg(\"/home'; whoami;''\")\n estarget: es5\n returns:\n-  - '\"''kevin\\\\''s birthday''\"'\n+  - '\"''kevin''\\\\''''s birthday''\"'\n+  - '\"''/home''\\\\''''; whoami;''\\\\''''''\\\\''''''\"'\n dependencies: []\n authors:\n   original by:\n     - 'Felix Geisendoerfer (https://www.debuggable.com/felix)'\n   improved by:\n     - 'Brett Zamir (https://brett-zamir.me)'\n+  bugfixed by:\n+    - 'divinity76 (https://github.com/divinity76)'\n notes: []\n type: function\n layout: function\n@@ -31,16 +35,24 @@ alias:\n ---\n {% codeblock lang:javascript %}module.exports = function escapeshellarg (arg) {\n   //  discuss at: https://locutus.io/php/escapeshellarg/\n+  // Warning: this function emulates escapeshellarg() for php-running-on-linux\n+  // the function behaves differently when running on Windows, which is not covered by this code.\n+  //\n   // original by: Felix Geisendoerfer (https://www.debuggable.com/felix)\n   // improved by: Brett Zamir (https://brett-zamir.me)\n+  // bugfixed by: divinity76 (https://github.com/divinity76)\n   //   example 1: escapeshellarg(\"kevin's birthday\")\n-  //   returns 1: \"'kevin\\\\'s birthday'\"\n+  //   returns 1: \"'kevin'\\\\''s birthday'\"\n+  //   example 2: escapeshellarg(\"/home'; whoami;''\")\n+  //   returns 2: \"'/home'\\\\''; whoami;'\\\\'''\\\\'''\"\n \n-  var ret = ''\n+  if (arg.indexOf('\\x00') !== -1) {\n+    throw new Error('escapeshellarg(): Argument #1 ($arg) must not contain any null bytes')\n+  }\n \n-  ret = arg.replace(/[^\\\\]'/g, function (m, i, s) {\n-    return m.slice(0, 1) + '\\\\\\''\n-  })\n+  let ret = ''\n+\n+  ret = arg.replace(/'/g, '\\'\\\\\\'\\'')\n \n   return \"'\" + ret + \"'\"\n }\n", "diff --git a/website/source/php/filesystem/basename.html b/website/source/php/filesystem/basename.html\nindex c7934d346..3abc08178 100644\n--- a/website/source/php/filesystem/basename.html\n+++ b/website/source/php/filesystem/basename.html\n@@ -26,8 +26,8 @@ layout: function\n title: PHP's basename in JavaScript\n description: >-\n   Here\u2019s what our current JavaScript equivalent to <a\n-  href=\"https://php.net/manual/en/function.basename.php\">PHP's basename</a> looks\n-  like.\n+  href=\"https://php.net/manual/en/function.basename.php\">PHP's basename</a>\n+  looks like.\n function: basename\n category: filesystem\n language: php\n@@ -54,8 +54,8 @@ alias:\n   //   example 4: basename('/some/path_ext.ext/','.ext')\n   //   returns 4: 'path_ext'\n \n-  var b = path\n-  var lastChar = b.charAt(b.length - 1)\n+  let b = path\n+  const lastChar = b.charAt(b.length - 1)\n \n   if (lastChar === '/' || lastChar === '\\\\') {\n     b = b.slice(0, -1)\n", "diff --git a/website/source/php/filesystem/file_get_contents.html b/website/source/php/filesystem/file_get_contents.html\nindex 474f489f0..09c49ab44 100644\n--- a/website/source/php/filesystem/file_get_contents.html\n+++ b/website/source/php/filesystem/file_get_contents.html\n@@ -63,7 +63,7 @@ alias:\n   //        example 1: var $result = $buf.indexOf('hash') !== -1\n   //        returns 1: true\n \n-  var fs = require('fs')\n+  const fs = require('fs')\n \n   return fs.readFileSync(url, 'utf-8')\n }\n", "diff --git a/website/source/php/filesystem/pathinfo.html b/website/source/php/filesystem/pathinfo.html\nindex 07cadb5f3..e95b9c65a 100644\n--- a/website/source/php/filesystem/pathinfo.html\n+++ b/website/source/php/filesystem/pathinfo.html\n@@ -52,8 +52,8 @@ layout: function\n title: PHP's pathinfo in JavaScript\n description: >-\n   Here\u2019s what our current JavaScript equivalent to <a\n-  href=\"https://php.net/manual/en/function.pathinfo.php\">PHP's pathinfo</a> looks\n-  like.\n+  href=\"https://php.net/manual/en/function.pathinfo.php\">PHP's pathinfo</a>\n+  looks like.\n function: pathinfo\n category: filesystem\n language: php\n@@ -99,17 +99,17 @@ alias:\n   //   example 7: pathinfo('/www/htdocs/index.html')\n   //   returns 7: {dirname: '/www/htdocs', basename: 'index.html', extension: 'html', filename: 'index'}\n \n-  var basename = require('../filesystem/basename')\n-  var opt = ''\n-  var realOpt = ''\n-  var optName = ''\n-  var optTemp = 0\n-  var tmpArr = {}\n-  var cnt = 0\n-  var i = 0\n-  var haveBasename = false\n-  var haveExtension = false\n-  var haveFilename = false\n+  const basename = require('../filesystem/basename')\n+  let opt = ''\n+  let realOpt = ''\n+  let optName = ''\n+  let optTemp = 0\n+  const tmpArr = {}\n+  let cnt = 0\n+  let i = 0\n+  let haveBasename = false\n+  let haveExtension = false\n+  let haveFilename = false\n \n   // Input defaulting & sanitation\n   if (!path) {\n@@ -121,12 +121,12 @@ alias:\n \n   // Initialize binary arguments. Both the string & integer (constant) input is\n   // allowed\n-  var OPTS = {\n-    'PATHINFO_DIRNAME': 1,\n-    'PATHINFO_BASENAME': 2,\n-    'PATHINFO_EXTENSION': 4,\n-    'PATHINFO_FILENAME': 8,\n-    'PATHINFO_ALL': 0\n+  const OPTS = {\n+    PATHINFO_DIRNAME: 1,\n+    PATHINFO_BASENAME: 2,\n+    PATHINFO_EXTENSION: 4,\n+    PATHINFO_FILENAME: 8,\n+    PATHINFO_ALL: 0\n   }\n   // PATHINFO_ALL sums up all previously defined PATHINFOs (could just pre-calculate)\n   for (optName in OPTS) {\n@@ -147,15 +147,15 @@ alias:\n   }\n \n   // Internal Functions\n-  var _getExt = function (path) {\n-    var str = path + ''\n-    var dotP = str.lastIndexOf('.') + 1\n+  const _getExt = function (path) {\n+    const str = path + ''\n+    const dotP = str.lastIndexOf('.') + 1\n     return !dotP ? false : dotP !== str.length ? str.substr(dotP) : ''\n   }\n \n   // Gather path infos\n   if (options & OPTS.PATHINFO_DIRNAME) {\n-    var dirName = path\n+    const dirName = path\n       .replace(/\\\\/g, '/')\n       .replace(/\\/[^/]*\\/?$/, '') // dirname\n     tmpArr.dirname = dirName === path ? '.' : dirName\n@@ -193,7 +193,7 @@ alias:\n         : haveExtension === false\n           ? 0\n           : 1\n-        )\n+      )\n       )\n     }\n \n", "diff --git a/website/source/php/filesystem/realpath.html b/website/source/php/filesystem/realpath.html\nindex a4c0abf1c..7a2c3de81 100644\n--- a/website/source/php/filesystem/realpath.html\n+++ b/website/source/php/filesystem/realpath.html\n@@ -18,8 +18,8 @@ layout: function\n title: PHP's realpath in JavaScript\n description: >-\n   Here\u2019s what our current JavaScript equivalent to <a\n-  href=\"https://php.net/manual/en/function.realpath.php\">PHP's realpath</a> looks\n-  like.\n+  href=\"https://php.net/manual/en/function.realpath.php\">PHP's realpath</a>\n+  looks like.\n function: realpath\n category: filesystem\n language: php\n@@ -39,13 +39,13 @@ alias:\n   //   returns 1: 'some/_supporters/pj_test_supportfile_1.htm'\n \n   if (typeof window === 'undefined') {\n-    var nodePath = require('path')\n+    const nodePath = require('path')\n     return nodePath.normalize(path)\n   }\n \n-  var p = 0\n-  var arr = [] // Save the root, if not given\n-  var r = this.window.location.href // Avoid input failures\n+  let p = 0\n+  let arr = [] // Save the root, if not given\n+  const r = this.window.location.href // Avoid input failures\n \n   // Check if there's a port in path (like 'https://')\n   path = (path + '').replace('\\\\', '/')\n@@ -61,7 +61,7 @@ alias:\n   // Explode the given path into it's parts\n   arr = path.split('/') // The path is an array now\n   path = [] // Foreach part make a check\n-  for (var k in arr) { // This is'nt really interesting\n+  for (const k in arr) { // This is'nt really interesting\n     if (arr[k] === '.') {\n       continue\n     }\n", "diff --git a/website/source/php/funchand/call_user_func.html b/website/source/php/funchand/call_user_func.html\nindex 146362ae2..e12a7b9a0 100644\n--- a/website/source/php/funchand/call_user_func.html\n+++ b/website/source/php/funchand/call_user_func.html\n@@ -54,7 +54,7 @@ alias:\n   //   example 1: call_user_func('isNaN', 'a')\n   //   returns 1: true\n \n-  var callUserFuncArray = require('../funchand/call_user_func_array')\n+  const callUserFuncArray = require('../funchand/call_user_func_array')\n   parameters = Array.prototype.slice.call(arguments, 1)\n   return callUserFuncArray(cb, parameters)\n }\n", "diff --git a/website/source/php/funchand/call_user_func_array.html b/website/source/php/funchand/call_user_func_array.html\nindex 0e53b8ea3..ebca6283d 100644\n--- a/website/source/php/funchand/call_user_func_array.html\n+++ b/website/source/php/funchand/call_user_func_array.html\n@@ -58,11 +58,11 @@ alias:\n   //   example 2: call_user_func_array('isNaN', [1])\n   //   returns 2: false\n \n-  var $global = (typeof window !== 'undefined' ? window : global)\n-  var func\n-  var scope = null\n+  const $global = (typeof window !== 'undefined' ? window : global)\n+  let func\n+  let scope = null\n \n-  var validJSFunctionNamePattern = /^[_$a-zA-Z\\xA0-\\uFFFF][_$a-zA-Z0-9\\xA0-\\uFFFF]*$/\n+  const validJSFunctionNamePattern = /^[_$a-zA-Z\\xA0-\\uFFFF][_$a-zA-Z0-9\\xA0-\\uFFFF]*$/\n \n   if (typeof cb === 'string') {\n     if (typeof $global[cb] === 'function') {\n", "diff --git a/website/source/php/funchand/function_exists.html b/website/source/php/funchand/function_exists.html\nindex 8b9261c0c..7469b2db5 100644\n--- a/website/source/php/funchand/function_exists.html\n+++ b/website/source/php/funchand/function_exists.html\n@@ -41,7 +41,7 @@ alias:\n   //   returns 1: true\n   //        test: skip-1\n \n-  var $global = (typeof window !== 'undefined' ? window : global)\n+  const $global = (typeof window !== 'undefined' ? window : global)\n \n   if (typeof funcName === 'string') {\n     funcName = $global[funcName]\n", "diff --git a/website/source/php/funchand/get_defined_functions.html b/website/source/php/funchand/get_defined_functions.html\nindex c94e2c3bf..ba513e429 100644\n--- a/website/source/php/funchand/get_defined_functions.html\n+++ b/website/source/php/funchand/get_defined_functions.html\n@@ -53,14 +53,14 @@ alias:\n   //   returns 1: true\n   //        test: skip-1\n \n-  var $global = (typeof window !== 'undefined' ? window : global)\n+  const $global = (typeof window !== 'undefined' ? window : global)\n   $global.$locutus = $global.$locutus || {}\n-  var $locutus = $global.$locutus\n+  const $locutus = $global.$locutus\n   $locutus.php = $locutus.php || {}\n \n-  var i = ''\n-  var arr = []\n-  var already = {}\n+  let i = ''\n+  const arr = []\n+  const already = {}\n \n   for (i in $global) {\n     try {\n@@ -70,7 +70,7 @@ alias:\n           arr.push(i)\n         }\n       } else if (typeof $global[i] === 'object') {\n-        for (var j in $global[i]) {\n+        for (const j in $global[i]) {\n           if (typeof $global[j] === 'function' && $global[j] && !already[j]) {\n             already[j] = 1\n             arr.push(j)\n", "diff --git a/website/source/php/i18n/i18n_loc_get_default.html b/website/source/php/i18n/i18n_loc_get_default.html\nindex c9d3f5cbc..2335b1d70 100644\n--- a/website/source/php/i18n/i18n_loc_get_default.html\n+++ b/website/source/php/i18n/i18n_loc_get_default.html\n@@ -49,9 +49,9 @@ alias:\n   //   example 2: i18n_loc_get_default()\n   //   returns 2: 'pt_PT'\n \n-  var $global = (typeof window !== 'undefined' ? window : global)\n+  const $global = (typeof window !== 'undefined' ? window : global)\n   $global.$locutus = $global.$locutus || {}\n-  var $locutus = $global.$locutus\n+  const $locutus = $global.$locutus\n   $locutus.php = $locutus.php || {}\n   $locutus.php.locales = $locutus.php.locales || {}\n \n", "diff --git a/website/source/php/i18n/i18n_loc_set_default.html b/website/source/php/i18n/i18n_loc_set_default.html\nindex 38d121122..e912c65c6 100644\n--- a/website/source/php/i18n/i18n_loc_set_default.html\n+++ b/website/source/php/i18n/i18n_loc_set_default.html\n@@ -44,9 +44,9 @@ alias:\n   //   example 1: i18n_loc_set_default('pt_PT')\n   //   returns 1: true\n \n-  var $global = (typeof window !== 'undefined' ? window : global)\n+  const $global = (typeof window !== 'undefined' ? window : global)\n   $global.$locutus = $global.$locutus || {}\n-  var $locutus = $global.$locutus\n+  const $locutus = $global.$locutus\n   $locutus.php = $locutus.php || {}\n   $locutus.php.locales = $locutus.php.locales || {}\n \n", "diff --git a/website/source/php/info/assert_options.html b/website/source/php/info/assert_options.html\nindex 823793069..09db2831a 100644\n--- a/website/source/php/info/assert_options.html\n+++ b/website/source/php/info/assert_options.html\n@@ -33,7 +33,7 @@ alias:\n   //   example 1: assert_options('ASSERT_CALLBACK')\n   //   returns 1: null\n \n-  var iniKey, defaultVal\n+  let iniKey, defaultVal\n   switch (what) {\n     case 'ASSERT_ACTIVE':\n       iniKey = 'assert.active'\n@@ -62,7 +62,7 @@ alias:\n   }\n \n   // I presume this is to be the most recent value, instead of the default value\n-  var iniVal = (typeof require !== 'undefined' ? require('../info/ini_get')(iniKey) : undefined) || defaultVal\n+  const iniVal = (typeof require !== 'undefined' ? require('../info/ini_get')(iniKey) : undefined) || defaultVal\n \n   return iniVal\n }\n", "diff --git a/website/source/php/info/ini_get.html b/website/source/php/info/ini_get.html\nindex 95d99d11b..d29566c38 100644\n--- a/website/source/php/info/ini_get.html\n+++ b/website/source/php/info/ini_get.html\n@@ -38,9 +38,9 @@ alias:\n   //   example 1: ini_get('date.timezone')\n   //   returns 1: 'Asia/Hong_Kong'\n \n-  var $global = (typeof window !== 'undefined' ? window : global)\n+  const $global = (typeof window !== 'undefined' ? window : global)\n   $global.$locutus = $global.$locutus || {}\n-  var $locutus = $global.$locutus\n+  const $locutus = $global.$locutus\n   $locutus.php = $locutus.php || {}\n   $locutus.php.ini = $locutus.php.ini || {}\n \n", "diff --git a/website/source/php/info/ini_set.html b/website/source/php/info/ini_set.html\nindex a28f39a9e..2d901c24e 100644\n--- a/website/source/php/info/ini_set.html\n+++ b/website/source/php/info/ini_set.html\n@@ -38,18 +38,18 @@ alias:\n   //   example 1: ini_set('date.timezone', 'America/Chicago')\n   //   returns 1: 'Asia/Hong_Kong'\n \n-  var $global = (typeof window !== 'undefined' ? window : global)\n+  const $global = (typeof window !== 'undefined' ? window : global)\n   $global.$locutus = $global.$locutus || {}\n-  var $locutus = $global.$locutus\n+  const $locutus = $global.$locutus\n   $locutus.php = $locutus.php || {}\n   $locutus.php.ini = $locutus.php.ini || {}\n \n   $locutus.php.ini = $locutus.php.ini || {}\n   $locutus.php.ini[varname] = $locutus.php.ini[varname] || {}\n \n-  var oldval = $locutus.php.ini[varname].local_value\n+  const oldval = $locutus.php.ini[varname].local_value\n \n-  var lowerStr = (newvalue + '').toLowerCase().trim()\n+  const lowerStr = (newvalue + '').toLowerCase().trim()\n   if (newvalue === true || lowerStr === 'on' || lowerStr === '1') {\n     newvalue = 'on'\n   }\n@@ -57,7 +57,7 @@ alias:\n     newvalue = 'off'\n   }\n \n-  var _setArr = function (oldval) {\n+  const _setArr = function (oldval) {\n     // Although these are set individually, they are all accumulated\n     if (typeof oldval === 'undefined') {\n       $locutus.ini[varname].local_value = []\n", "diff --git a/website/source/php/info/set_time_limit.html b/website/source/php/info/set_time_limit.html\nindex dc40af105..49bd696f4 100644\n--- a/website/source/php/info/set_time_limit.html\n+++ b/website/source/php/info/set_time_limit.html\n@@ -34,9 +34,9 @@ alias:\n   //   example 1: set_time_limit(4)\n   //   returns 1: undefined\n \n-  var $global = (typeof window !== 'undefined' ? window : global)\n+  const $global = (typeof window !== 'undefined' ? window : global)\n   $global.$locutus = $global.$locutus || {}\n-  var $locutus = $global.$locutus\n+  const $locutus = $global.$locutus\n   $locutus.php = $locutus.php || {}\n \n   setTimeout(function () {\n", "diff --git a/website/source/php/info/version_compare.html b/website/source/php/info/version_compare.html\nindex 632e17b2e..a890bd7ab 100644\n--- a/website/source/php/info/version_compare.html\n+++ b/website/source/php/info/version_compare.html\n@@ -58,9 +58,9 @@ alias:\n   //        returns 4: 1\n \n   // Important: compare must be initialized at 0.\n-  var i\n-  var x\n-  var compare = 0\n+  let i\n+  let x\n+  let compare = 0\n \n   // vm maps textual PHP versions to negatives so they're less than 0.\n   // PHP currently defines these as CASE-SENSITIVE. It is important to\n@@ -69,17 +69,17 @@ alias:\n   // (1alpha is < 1 and < 1.1 but > 1dev1)\n   // If a non-numerical value can't be mapped to this table, it receives\n   // -7 as its value.\n-  var vm = {\n-    'dev': -6,\n-    'alpha': -5,\n-    'a': -5,\n-    'beta': -4,\n-    'b': -4,\n-    'RC': -3,\n-    'rc': -3,\n+  const vm = {\n+    dev: -6,\n+    alpha: -5,\n+    a: -5,\n+    beta: -4,\n+    b: -4,\n+    RC: -3,\n+    rc: -3,\n     '#': -2,\n-    'p': 1,\n-    'pl': 1\n+    p: 1,\n+    pl: 1\n   }\n \n   // This function will be called to prepare each version argument.\n@@ -91,7 +91,7 @@ alias:\n   // even less than an unexisting value in vm (-7), hence [-8].\n   // It's also important to not strip spaces because of this.\n   //   version_compare('', ' ') === 1\n-  var _prepVersion = function (v) {\n+  const _prepVersion = function (v) {\n     v = ('' + v).replace(/[_\\-+]/g, '.')\n     v = v.replace(/([^.\\d]+)/g, '.$1.').replace(/\\.{2,}/g, '.')\n     return (!v.length ? [-8] : v.split('.'))\n@@ -100,7 +100,7 @@ alias:\n   // Empty component becomes 0.\n   // Non-numerical component becomes a negative number.\n   // Numerical component becomes itself as an integer.\n-  var _numVersion = function (v) {\n+  const _numVersion = function (v) {\n     return !v ? 0 : (isNaN(v) ? vm[v] || -7 : parseInt(v, 10))\n   }\n \n", "diff --git a/website/source/php/json/json_decode.html b/website/source/php/json/json_decode.html\nindex d33c6e212..a642f402c 100644\n--- a/website/source/php/json/json_decode.html\n+++ b/website/source/php/json/json_decode.html\n@@ -24,8 +24,8 @@ layout: function\n title: PHP's json_decode in JavaScript\n description: >-\n   Here\u2019s what our current JavaScript equivalent to <a\n-  href=\"https://php.net/manual/en/function.json-decode.php\">PHP's json_decode</a>\n-  looks like.\n+  href=\"https://php.net/manual/en/function.json-decode.php\">PHP's\n+  json_decode</a> looks like.\n function: json_decode\n category: json\n language: php\n@@ -56,12 +56,12 @@ alias:\n     See https://www.JSON.org/js.html\n   */\n \n-  var $global = (typeof window !== 'undefined' ? window : global)\n+  const $global = (typeof window !== 'undefined' ? window : global)\n   $global.$locutus = $global.$locutus || {}\n-  var $locutus = $global.$locutus\n+  const $locutus = $global.$locutus\n   $locutus.php = $locutus.php || {}\n \n-  var json = $global.JSON\n+  const json = $global.JSON\n   if (typeof json === 'object' && typeof json.parse === 'function') {\n     try {\n       return json.parse(strJson)\n@@ -76,7 +76,7 @@ alias:\n     }\n   }\n \n-  var chars = [\n+  const chars = [\n     '\\u0000',\n     '\\u00ad',\n     '\\u0600-\\u0604',\n@@ -89,9 +89,9 @@ alias:\n     '\\ufeff',\n     '\\ufff0-\\uffff'\n   ].join('')\n-  var cx = new RegExp('[' + chars + ']', 'g')\n-  var j\n-  var text = strJson\n+  const cx = new RegExp('[' + chars + ']', 'g')\n+  let j\n+  let text = strJson\n \n   // Parsing happens in four stages. In the first stage, we replace certain\n   // Unicode characters with escape sequences. JavaScript handles many characters\n@@ -117,10 +117,10 @@ alias:\n   // we look to see that the remaining characters are only whitespace or ']' or\n   // ',' or ':' or '{' or '}'. If that is so, then the text is safe for eval.\n \n-  var m = (/^[\\],:{}\\s]*$/)\n+  const m = (/^[\\],:{}\\s]*$/)\n     .test(text.replace(/\\\\(?:[\"\\\\/bfnrt]|u[0-9a-fA-F]{4})/g, '@')\n-    .replace(/\"[^\"\\\\\\n\\r]*\"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+-]?\\d+)?/g, ']')\n-    .replace(/(?:^|:|,)(?:\\s*\\[)+/g, ''))\n+      .replace(/\"[^\"\\\\\\n\\r]*\"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+-]?\\d+)?/g, ']')\n+      .replace(/(?:^|:|,)(?:\\s*\\[)+/g, ''))\n \n   if (m) {\n     // In the third stage we use the eval function to compile the text into a\n", "diff --git a/website/source/php/json/json_encode.html b/website/source/php/json/json_encode.html\nindex 380dbf3d1..c0d243579 100644\n--- a/website/source/php/json/json_encode.html\n+++ b/website/source/php/json/json_encode.html\n@@ -23,8 +23,8 @@ layout: function\n title: PHP's json_encode in JavaScript\n description: >-\n   Here\u2019s what our current JavaScript equivalent to <a\n-  href=\"https://php.net/manual/en/function.json-encode.php\">PHP's json_encode</a>\n-  looks like.\n+  href=\"https://php.net/manual/en/function.json-encode.php\">PHP's\n+  json_encode</a> looks like.\n function: json_encode\n category: json\n language: php\n@@ -53,13 +53,13 @@ alias:\n     See https://www.JSON.org/js.html\n   */\n \n-  var $global = (typeof window !== 'undefined' ? window : global)\n+  const $global = (typeof window !== 'undefined' ? window : global)\n   $global.$locutus = $global.$locutus || {}\n-  var $locutus = $global.$locutus\n+  const $locutus = $global.$locutus\n   $locutus.php = $locutus.php || {}\n \n-  var json = $global.JSON\n-  var retVal\n+  const json = $global.JSON\n+  let retVal\n   try {\n     if (typeof json === 'object' && typeof json.stringify === 'function') {\n       // Errors will not be caught here if our own equivalent to resource\n@@ -70,10 +70,10 @@ alias:\n       return retVal\n     }\n \n-    var value = mixedVal\n+    const value = mixedVal\n \n-    var quote = function (string) {\n-      var escapeChars = [\n+    const quote = function (string) {\n+      const escapeChars = [\n         '\\u0000-\\u001f',\n         '\\u007f-\\u009f',\n         '\\u00ad',\n@@ -87,8 +87,8 @@ alias:\n         '\\ufeff',\n         '\\ufff0-\\uffff'\n       ].join('')\n-      var escapable = new RegExp('[\\\\\"' + escapeChars + ']', 'g')\n-      var meta = {\n+      const escapable = new RegExp('[\\\\\"' + escapeChars + ']', 'g')\n+      const meta = {\n         // table of character substitutions\n         '\\b': '\\\\b',\n         '\\t': '\\\\t',\n@@ -101,7 +101,7 @@ alias:\n \n       escapable.lastIndex = 0\n       return escapable.test(string) ? '\"' + string.replace(escapable, function (a) {\n-        var c = meta[a]\n+        const c = meta[a]\n         return typeof c === 'string' ? c : '\\\\u' + ('0000' + a.charCodeAt(0)\n           .toString(16))\n           .slice(-4)\n@@ -109,18 +109,18 @@ alias:\n     }\n \n     var _str = function (key, holder) {\n-      var gap = ''\n-      var indent = '    '\n+      let gap = ''\n+      const indent = '    '\n       // The loop counter.\n-      var i = 0\n+      let i = 0\n       // The member key.\n-      var k = ''\n+      let k = ''\n       // The member value.\n-      var v = ''\n-      var length = 0\n-      var mind = gap\n-      var partial = []\n-      var value = holder[key]\n+      let v = ''\n+      let length = 0\n+      const mind = gap\n+      let partial = []\n+      let value = holder[key]\n \n       // If the value has a toJSON method, call it to obtain a replacement value.\n       if (value && typeof value === 'object' && typeof value.toJSON === 'function') {\n@@ -137,10 +137,7 @@ alias:\n           return isFinite(value) ? String(value) : 'null'\n \n         case 'boolean':\n-        case 'null':\n-          // If the value is a boolean or null, convert it to a string. Note:\n-          // typeof null does not produce 'null'. The case is included here in\n-          // the remote chance that this gets fixed someday.\n+          // If the value is a boolean or null, convert it to a string.\n           return String(value)\n \n         case 'object':\n@@ -170,7 +167,7 @@ alias:\n             v = partial.length === 0 ? '[]' : gap\n               ? '[\\n' + gap + partial.join(',\\n' + gap) + '\\n' + mind + ']'\n               : '[' + partial.join(',') + ']'\n-            gap = mind\n+            // gap = mind // not used\n             return v\n           }\n \n@@ -189,7 +186,7 @@ alias:\n           v = partial.length === 0 ? '{}' : gap\n             ? '{\\n' + gap + partial.join(',\\n' + gap) + '\\n' + mind + '}'\n             : '{' + partial.join(',') + '}'\n-          gap = mind\n+          // gap = mind // Not used\n           return v\n         case 'undefined':\n         case 'function':\n", "diff --git a/website/source/php/json/json_last_error.html b/website/source/php/json/json_last_error.html\nindex 5f474617f..53ff5213b 100644\n--- a/website/source/php/json/json_last_error.html\n+++ b/website/source/php/json/json_last_error.html\n@@ -43,9 +43,9 @@ alias:\n   // but JSON functions auto-escape these, so error not possible in JavaScript\n   // JSON_ERROR_SYNTAX = 4\n \n-  var $global = (typeof window !== 'undefined' ? window : global)\n+  const $global = (typeof window !== 'undefined' ? window : global)\n   $global.$locutus = $global.$locutus || {}\n-  var $locutus = $global.$locutus\n+  const $locutus = $global.$locutus\n   $locutus.php = $locutus.php || {}\n \n   return $locutus.php && $locutus.php.last_error_json ? $locutus.php.last_error_json : 0\n", "diff --git a/website/source/php/math/acosh.html b/website/source/php/math/acosh.html\nindex 06cdb8b8c..43d86b3c3 100644\n--- a/website/source/php/math/acosh.html\n+++ b/website/source/php/math/acosh.html\n@@ -15,7 +15,8 @@ layout: function\n title: PHP's acosh in JavaScript\n description: >-\n   Here\u2019s what our current JavaScript equivalent to <a\n-  href=\"https://php.net/manual/en/function.acosh.php\">PHP's acosh</a> looks like.\n+  href=\"https://php.net/manual/en/function.acosh.php\">PHP's acosh</a> looks\n+  like.\n function: acosh\n category: math\n language: php\n", "diff --git a/website/source/php/math/asinh.html b/website/source/php/math/asinh.html\nindex 10e86f758..8bed3b1bb 100644\n--- a/website/source/php/math/asinh.html\n+++ b/website/source/php/math/asinh.html\n@@ -15,7 +15,8 @@ layout: function\n title: PHP's asinh in JavaScript\n description: >-\n   Here\u2019s what our current JavaScript equivalent to <a\n-  href=\"https://php.net/manual/en/function.asinh.php\">PHP's asinh</a> looks like.\n+  href=\"https://php.net/manual/en/function.asinh.php\">PHP's asinh</a> looks\n+  like.\n function: asinh\n category: math\n language: php\n", "diff --git a/website/source/php/math/atan2.html b/website/source/php/math/atan2.html\nindex 5060400c0..5bc5dc9c4 100644\n--- a/website/source/php/math/atan2.html\n+++ b/website/source/php/math/atan2.html\n@@ -15,7 +15,8 @@ layout: function\n title: PHP's atan2 in JavaScript\n description: >-\n   Here\u2019s what our current JavaScript equivalent to <a\n-  href=\"https://php.net/manual/en/function.atan2.php\">PHP's atan2</a> looks like.\n+  href=\"https://php.net/manual/en/function.atan2.php\">PHP's atan2</a> looks\n+  like.\n function: atan2\n category: math\n language: php\n", "diff --git a/website/source/php/math/atanh.html b/website/source/php/math/atanh.html\nindex a45af9873..271cc58ed 100644\n--- a/website/source/php/math/atanh.html\n+++ b/website/source/php/math/atanh.html\n@@ -15,7 +15,8 @@ layout: function\n title: PHP's atanh in JavaScript\n description: >-\n   Here\u2019s what our current JavaScript equivalent to <a\n-  href=\"https://php.net/manual/en/function.atanh.php\">PHP's atanh</a> looks like.\n+  href=\"https://php.net/manual/en/function.atanh.php\">PHP's atanh</a> looks\n+  like.\n function: atanh\n category: math\n language: php\n", "diff --git a/website/source/php/math/expm1.html b/website/source/php/math/expm1.html\nindex 660cc82a3..379eff0ea 100644\n--- a/website/source/php/math/expm1.html\n+++ b/website/source/php/math/expm1.html\n@@ -18,7 +18,8 @@ layout: function\n title: PHP's expm1 in JavaScript\n description: >-\n   Here\u2019s what our current JavaScript equivalent to <a\n-  href=\"https://php.net/manual/en/function.expm1.php\">PHP's expm1</a> looks like.\n+  href=\"https://php.net/manual/en/function.expm1.php\">PHP's expm1</a> looks\n+  like.\n function: expm1\n category: math\n language: php\n", "diff --git a/website/source/php/math/floor.html b/website/source/php/math/floor.html\nindex 2e79ff8bb..544aa5db2 100644\n--- a/website/source/php/math/floor.html\n+++ b/website/source/php/math/floor.html\n@@ -15,7 +15,8 @@ layout: function\n title: PHP's floor in JavaScript\n description: >-\n   Here\u2019s what our current JavaScript equivalent to <a\n-  href=\"https://php.net/manual/en/function.floor.php\">PHP's floor</a> looks like.\n+  href=\"https://php.net/manual/en/function.floor.php\">PHP's floor</a> looks\n+  like.\n function: floor\n category: math\n language: php\n", "diff --git a/website/source/php/math/fmod.html b/website/source/php/math/fmod.html\nindex 07877bffe..cd945302b 100644\n--- a/website/source/php/math/fmod.html\n+++ b/website/source/php/math/fmod.html\n@@ -38,12 +38,12 @@ alias:\n   //   example 1: fmod(5.7, 1.3)\n   //   returns 1: 0.5\n \n-  var tmp\n-  var tmp2\n-  var p = 0\n-  var pY = 0\n-  var l = 0.0\n-  var l2 = 0.0\n+  let tmp\n+  let tmp2\n+  let p = 0\n+  let pY = 0\n+  let l = 0.0\n+  let l2 = 0.0\n \n   tmp = x.toExponential().match(/^.\\.?(.*)e(.+)$/)\n   p = parseInt(tmp[2], 10) - (tmp[1] + '').length\n", "diff --git a/website/source/php/math/hypot.html b/website/source/php/math/hypot.html\nindex b9726cfff..7bab8e02a 100644\n--- a/website/source/php/math/hypot.html\n+++ b/website/source/php/math/hypot.html\n@@ -17,7 +17,8 @@ layout: function\n title: PHP's hypot in JavaScript\n description: >-\n   Here\u2019s what our current JavaScript equivalent to <a\n-  href=\"https://php.net/manual/en/function.hypot.php\">PHP's hypot</a> looks like.\n+  href=\"https://php.net/manual/en/function.hypot.php\">PHP's hypot</a> looks\n+  like.\n function: hypot\n category: math\n language: php\n@@ -40,7 +41,7 @@ alias:\n   x = Math.abs(x)\n   y = Math.abs(y)\n \n-  var t = Math.min(x, y)\n+  let t = Math.min(x, y)\n   x = Math.max(x, y)\n   t = t / x\n \n", "diff --git a/website/source/php/math/is_finite.html b/website/source/php/math/is_finite.html\nindex c1999b2f2..0a3f4abb9 100644\n--- a/website/source/php/math/is_finite.html\n+++ b/website/source/php/math/is_finite.html\n@@ -41,7 +41,7 @@ alias:\n   //   example 3: is_finite(0)\n   //   returns 3: true\n \n-  var warningType = ''\n+  let warningType = ''\n \n   if (val === Infinity || val === -Infinity) {\n     return false\n@@ -55,7 +55,7 @@ alias:\n     warningType = 'string'\n   }\n   if (warningType) {\n-    var msg = 'Warning: is_finite() expects parameter 1 to be double, ' + warningType + ' given'\n+    const msg = 'Warning: is_finite() expects parameter 1 to be double, ' + warningType + ' given'\n     throw new Error(msg)\n   }\n \n", "diff --git a/website/source/php/math/is_infinite.html b/website/source/php/math/is_infinite.html\nindex 5d9e766eb..ccd479cb2 100644\n--- a/website/source/php/math/is_infinite.html\n+++ b/website/source/php/math/is_infinite.html\n@@ -19,8 +19,8 @@ layout: function\n title: PHP's is_infinite in JavaScript\n description: >-\n   Here\u2019s what our current JavaScript equivalent to <a\n-  href=\"https://php.net/manual/en/function.is-infinite.php\">PHP's is_infinite</a>\n-  looks like.\n+  href=\"https://php.net/manual/en/function.is-infinite.php\">PHP's\n+  is_infinite</a> looks like.\n function: is_infinite\n category: math\n language: php\n@@ -41,7 +41,7 @@ alias:\n   //   example 3: is_infinite(0)\n   //   returns 3: false\n \n-  var warningType = ''\n+  let warningType = ''\n \n   if (val === Infinity || val === -Infinity) {\n     return true\n@@ -55,7 +55,7 @@ alias:\n     warningType = 'string'\n   }\n   if (warningType) {\n-    var msg = 'Warning: is_infinite() expects parameter 1 to be double, ' + warningType + ' given'\n+    const msg = 'Warning: is_infinite() expects parameter 1 to be double, ' + warningType + ' given'\n     throw new Error(msg)\n   }\n \n", "diff --git a/website/source/php/math/is_nan.html b/website/source/php/math/is_nan.html\nindex aaba5ddb0..c0ef00630 100644\n--- a/website/source/php/math/is_nan.html\n+++ b/website/source/php/math/is_nan.html\n@@ -40,7 +40,7 @@ alias:\n   //   example 2: is_nan(0)\n   //   returns 2: false\n \n-  var warningType = ''\n+  let warningType = ''\n \n   if (typeof val === 'number' && isNaN(val)) {\n     return true\n", "diff --git a/website/source/php/math/log10.html b/website/source/php/math/log10.html\nindex 5029e3a8d..f959b6b35 100644\n--- a/website/source/php/math/log10.html\n+++ b/website/source/php/math/log10.html\n@@ -21,7 +21,8 @@ layout: function\n title: PHP's log10 in JavaScript\n description: >-\n   Here\u2019s what our current JavaScript equivalent to <a\n-  href=\"https://php.net/manual/en/function.log10.php\">PHP's log10</a> looks like.\n+  href=\"https://php.net/manual/en/function.log10.php\">PHP's log10</a> looks\n+  like.\n function: log10\n category: math\n language: php\n", "diff --git a/website/source/php/math/log1p.html b/website/source/php/math/log1p.html\nindex b9ea957f7..d593c52c3 100644\n--- a/website/source/php/math/log1p.html\n+++ b/website/source/php/math/log1p.html\n@@ -18,7 +18,8 @@ layout: function\n title: PHP's log1p in JavaScript\n description: >-\n   Here\u2019s what our current JavaScript equivalent to <a\n-  href=\"https://php.net/manual/en/function.log1p.php\">PHP's log1p</a> looks like.\n+  href=\"https://php.net/manual/en/function.log1p.php\">PHP's log1p</a> looks\n+  like.\n function: log1p\n category: math\n language: php\n@@ -37,9 +38,9 @@ alias:\n   //   example 1: log1p(1e-15)\n   //   returns 1: 9.999999999999995e-16\n \n-  var ret = 0\n+  let ret = 0\n   // degree of precision\n-  var n = 50\n+  const n = 50\n \n   if (x <= -1) {\n     // JavaScript style would be to return Number.NEGATIVE_INFINITY\n@@ -48,7 +49,7 @@ alias:\n   if (x < 0 || x > 1) {\n     return Math.log(1 + x)\n   }\n-  for (var i = 1; i < n; i++) {\n+  for (let i = 1; i < n; i++) {\n     ret += Math.pow(-x, i) / i\n   }\n \n", "diff --git a/website/source/php/math/max.html b/website/source/php/math/max.html\nindex 35855b176..b5a081a1a 100644\n--- a/website/source/php/math/max.html\n+++ b/website/source/php/math/max.html\n@@ -60,18 +60,18 @@ alias:\n   //   example 6: max([2, 4, 8], [2, 5, 7])\n   //   returns 6: [2, 5, 7]\n \n-  var ar\n-  var retVal\n-  var i = 0\n-  var n = 0\n-  var argv = arguments\n-  var argc = argv.length\n-  var _obj2Array = function (obj) {\n+  let ar\n+  let retVal\n+  let i = 0\n+  let n = 0\n+  const argv = arguments\n+  const argc = argv.length\n+  const _obj2Array = function (obj) {\n     if (Object.prototype.toString.call(obj) === '[object Array]') {\n       return obj\n     } else {\n-      var ar = []\n-      for (var i in obj) {\n+      const ar = []\n+      for (const i in obj) {\n         if (obj.hasOwnProperty(i)) {\n           ar.push(obj[i])\n         }\n@@ -80,11 +80,11 @@ alias:\n     }\n   }\n   var _compare = function (current, next) {\n-    var i = 0\n-    var n = 0\n-    var tmp = 0\n-    var nl = 0\n-    var cl = 0\n+    let i = 0\n+    let n = 0\n+    let tmp = 0\n+    let nl = 0\n+    let cl = 0\n \n     if (current === next) {\n       return 0\n", "diff --git a/website/source/php/math/min.html b/website/source/php/math/min.html\nindex ca7c0a998..adc699156 100644\n--- a/website/source/php/math/min.html\n+++ b/website/source/php/math/min.html\n@@ -60,18 +60,18 @@ alias:\n   //   example 6: min([2, 4, 8], [2, 5, 7])\n   //   returns 6: [2, 4, 8]\n \n-  var ar\n-  var retVal\n-  var i = 0\n-  var n = 0\n-  var argv = arguments\n-  var argc = argv.length\n-  var _obj2Array = function (obj) {\n+  let ar\n+  let retVal\n+  let i = 0\n+  let n = 0\n+  const argv = arguments\n+  const argc = argv.length\n+  const _obj2Array = function (obj) {\n     if (Object.prototype.toString.call(obj) === '[object Array]') {\n       return obj\n     }\n-    var ar = []\n-    for (var i in obj) {\n+    const ar = []\n+    for (const i in obj) {\n       if (obj.hasOwnProperty(i)) {\n         ar.push(obj[i])\n       }\n@@ -80,11 +80,11 @@ alias:\n   }\n \n   var _compare = function (current, next) {\n-    var i = 0\n-    var n = 0\n-    var tmp = 0\n-    var nl = 0\n-    var cl = 0\n+    let i = 0\n+    let n = 0\n+    let tmp = 0\n+    let nl = 0\n+    let cl = 0\n \n     if (current === next) {\n       return 0\n", "diff --git a/website/source/php/math/mt_rand.html b/website/source/php/math/mt_rand.html\nindex 62d636e41..d1824b70a 100644\n--- a/website/source/php/math/mt_rand.html\n+++ b/website/source/php/math/mt_rand.html\n@@ -39,7 +39,7 @@ alias:\n   //   example 1: mt_rand(1, 1)\n   //   returns 1: 1\n \n-  var argc = arguments.length\n+  const argc = arguments.length\n   if (argc === 0) {\n     min = 0\n     max = 2147483647\n", "diff --git a/website/source/php/math/pow.html b/website/source/php/math/pow.html\nindex ff2b79783..9f1b91ce9 100644\n--- a/website/source/php/math/pow.html\n+++ b/website/source/php/math/pow.html\n@@ -4,11 +4,13 @@ examples:\n   - 'pow(8723321.4, 7)'\n estarget: es5\n returns:\n-  - '3.8439091680778995e+48'\n+  - '3.8439091680779e+48'\n dependencies: []\n authors:\n   original by:\n     - 'Onno Marsman (https://twitter.com/onnomarsman)'\n+  improved by:\n+    - 'Waldo Malqui Silva (https://fayr.us/waldo/)'\n notes: []\n type: function\n layout: function\n@@ -29,9 +31,10 @@ alias:\n {% codeblock lang:javascript %}module.exports = function pow (base, exp) {\n   //  discuss at: https://locutus.io/php/pow/\n   // original by: Onno Marsman (https://twitter.com/onnomarsman)\n+  // improved by: Waldo Malqui Silva (https://fayr.us/waldo/)\n   //   example 1: pow(8723321.4, 7)\n-  //   returns 1: 3.8439091680778995e+48\n+  //   returns 1: 3.8439091680779e+48\n \n-  return Math.pow(base, exp)\n+  return Number(Math.pow(base, exp).toPrecision(15))\n }\n {% endcodeblock %}\n\\ No newline at end of file\n", "diff --git a/website/source/php/math/rand.html b/website/source/php/math/rand.html\nindex 37c8494ee..9ae8f45b1 100644\n--- a/website/source/php/math/rand.html\n+++ b/website/source/php/math/rand.html\n@@ -42,7 +42,7 @@ alias:\n   //   example 1: rand(1, 1)\n   //   returns 1: 1\n \n-  var argc = arguments.length\n+  const argc = arguments.length\n   if (argc === 0) {\n     min = 0\n     max = 2147483647\n", "diff --git a/website/source/php/math/round.html b/website/source/php/math/round.html\nindex 854a62b91..204e749c6 100644\n--- a/website/source/php/math/round.html\n+++ b/website/source/php/math/round.html\n@@ -6,6 +6,7 @@ examples:\n   - 'round(2.835, 2)'\n   - 'round(1.1749999999999, 2)'\n   - 'round(58551.799999999996, 2)'\n+  - 'round(4096.485, 2)'\n estarget: es5\n returns:\n   - '1242000'\n@@ -13,6 +14,7 @@ returns:\n   - '2.84'\n   - '1.17'\n   - '58551.8'\n+  - '4096.49'\n dependencies: []\n authors:\n   original by:\n@@ -23,24 +25,20 @@ authors:\n     - 'Onno Marsman (https://twitter.com/onnomarsman)'\n     - T.Wild\n     - 'Rafa\u0142 Kukawski (https://blog.kukawski.pl)'\n+    - Rafa\u0142 Kukawski\n   input by:\n     - Greenseed\n     - meo\n     - William\n     - 'Josep Sanz (https://www.ws3.es/)'\n-notes:\n-  - |-\n-    Great work. Ideas for improvement:\n-    - code more compliant with developer guidelines\n-    - for implementing PHP constant arguments look at\n-    the pathinfo() function, it offers the greatest\n-    flexibility & compatibility possible\n+notes: []\n type: function\n layout: function\n title: PHP's round in JavaScript\n description: >-\n   Here\u2019s what our current JavaScript equivalent to <a\n-  href=\"https://php.net/manual/en/function.round.php\">PHP's round</a> looks like.\n+  href=\"https://php.net/manual/en/function.round.php\">PHP's round</a> looks\n+  like.\n function: round\n category: math\n language: php\n@@ -51,7 +49,20 @@ alias:\n   - /php/round/\n   - /functions/round/\n ---\n-{% codeblock lang:javascript %}module.exports = function round (value, precision, mode) {\n+{% codeblock lang:javascript %}function roundToInt (value, mode) {\n+  let tmp = Math.floor(Math.abs(value) + 0.5)\n+\n+  if (\n+    (mode === 'PHP_ROUND_HALF_DOWN' && value === (tmp - 0.5)) ||\n+      (mode === 'PHP_ROUND_HALF_EVEN' && value === (0.5 + 2 * Math.floor(tmp / 2))) ||\n+      (mode === 'PHP_ROUND_HALF_ODD' && value === (0.5 + 2 * Math.floor(tmp / 2) - 1))) {\n+    tmp -= 1\n+  }\n+\n+  return value < 0 ? -tmp : tmp\n+}\n+\n+module.exports = function round (value, precision = 0, mode = 'PHP_ROUND_HALF_UP') {\n   //  discuss at: https://locutus.io/php/round/\n   // original by: Philip Peterson\n   //  revised by: Onno Marsman (https://twitter.com/onnomarsman)\n@@ -62,11 +73,7 @@ alias:\n   //    input by: William\n   //    input by: Josep Sanz (https://www.ws3.es/)\n   // bugfixed by: Brett Zamir (https://brett-zamir.me)\n-  //      note 1: Great work. Ideas for improvement:\n-  //      note 1: - code more compliant with developer guidelines\n-  //      note 1: - for implementing PHP constant arguments look at\n-  //      note 1: the pathinfo() function, it offers the greatest\n-  //      note 1: flexibility & compatibility possible\n+  //  revised by: Rafa\u0142 Kukawski\n   //   example 1: round(1241757, -3)\n   //   returns 1: 1242000\n   //   example 2: round(3.6)\n@@ -77,37 +84,43 @@ alias:\n   //   returns 4: 1.17\n   //   example 5: round(58551.799999999996, 2)\n   //   returns 5: 58551.8\n+  //   example 6: round(4096.485, 2)\n+  //   returns 6: 4096.49\n+\n+  const floatCast = require('../_helpers/_php_cast_float')\n+  const intCast = require('../_helpers/_php_cast_int')\n+  let p\n+\n+  // the code is heavily based on the native PHP implementation\n+  // https://github.com/php/php-src/blob/PHP-7.4/ext/standard/math.c#L355\n \n-  var m, f, isHalf, sgn // helper variables\n-  // making sure precision is integer\n-  precision |= 0\n-  m = Math.pow(10, precision)\n-  value *= m\n-  // sign of the number\n-  sgn = (value > 0) | -(value < 0)\n-  isHalf = value % 1 === 0.5 * sgn\n-  f = Math.floor(value)\n+  value = floatCast(value)\n+  precision = intCast(precision)\n+  p = Math.pow(10, precision)\n \n-  if (isHalf) {\n-    switch (mode) {\n-      case 'PHP_ROUND_HALF_DOWN':\n-      // rounds .5 toward zero\n-        value = f + (sgn < 0)\n-        break\n-      case 'PHP_ROUND_HALF_EVEN':\n-      // rouds .5 towards the next even integer\n-        value = f + (f % 2 * sgn)\n-        break\n-      case 'PHP_ROUND_HALF_ODD':\n-      // rounds .5 towards the next odd integer\n-        value = f + !(f % 2)\n-        break\n-      default:\n-      // rounds .5 away from zero\n-        value = f + (sgn > 0)\n-    }\n+  if (isNaN(value) || !isFinite(value)) {\n+    return value\n   }\n \n-  return (isHalf ? value : Math.round(value)) / m\n+  // if value already integer and positive precision\n+  // then nothing to do, return early\n+  if (Math.trunc(value) === value && precision >= 0) {\n+    return value\n+  }\n+\n+  // PHP does a pre-rounding before rounding to desired precision\n+  // https://wiki.php.net/rfc/rounding#pre-rounding_to_the_value_s_precision_if_possible\n+  const preRoundPrecision = 14 - Math.floor(Math.log10(Math.abs(value)))\n+\n+  if (preRoundPrecision > precision && preRoundPrecision - 15 < precision) {\n+    value = roundToInt(value * Math.pow(10, preRoundPrecision), mode)\n+    value /= Math.pow(10, Math.abs(precision - preRoundPrecision))\n+  } else {\n+    value *= p\n+  }\n+\n+  value = roundToInt(value, mode)\n+\n+  return value / p\n }\n {% endcodeblock %}\n\\ No newline at end of file\n", "diff --git a/website/source/php/misc/pack.html b/website/source/php/misc/pack.html\nindex b49536d7a..209359a64 100644\n--- a/website/source/php/misc/pack.html\n+++ b/website/source/php/misc/pack.html\n@@ -64,39 +64,39 @@ alias:\n   //   returns 4: \"\\u0000\\u0000\\u0000\\u0000\\u00008Y\u00c0\"\n   //        test: skip-1\n \n-  var formatPointer = 0\n-  var argumentPointer = 1\n-  var result = ''\n-  var argument = ''\n-  var i = 0\n-  var r = []\n-  var instruction, quantifier, word, precisionBits, exponentBits, extraNullCount\n+  let formatPointer = 0\n+  let argumentPointer = 1\n+  let result = ''\n+  let argument = ''\n+  let i = 0\n+  let r = []\n+  let instruction, quantifier, word, precisionBits, exponentBits, extraNullCount\n \n   // vars used by float encoding\n-  var bias\n-  var minExp\n-  var maxExp\n-  var minUnnormExp\n-  var status\n-  var exp\n-  var len\n-  var bin\n-  var signal\n-  var n\n-  var intPart\n-  var floatPart\n-  var lastBit\n-  var rounded\n-  var j\n-  var k\n-  var tmpResult\n+  let bias\n+  let minExp\n+  let maxExp\n+  let minUnnormExp\n+  let status\n+  let exp\n+  let len\n+  let bin\n+  let signal\n+  let n\n+  let intPart\n+  let floatPart\n+  let lastBit\n+  let rounded\n+  let j\n+  let k\n+  let tmpResult\n \n   while (formatPointer < format.length) {\n     instruction = format.charAt(formatPointer)\n     quantifier = ''\n     formatPointer++\n     while ((formatPointer < format.length) && (format.charAt(formatPointer)\n-        .match(/[\\d*]/) !== null)) {\n+      .match(/[\\d*]/) !== null)) {\n       quantifier += format.charAt(formatPointer)\n       formatPointer++\n     }\n@@ -144,7 +144,7 @@ alias:\n           quantifier = argument.length\n         }\n         if (quantifier > argument.length) {\n-          var msg = 'Warning: pack() Type ' + instruction + ': not enough characters in string'\n+          const msg = 'Warning: pack() Type ' + instruction + ': not enough characters in string'\n           throw new Error(msg)\n         }\n \n@@ -309,7 +309,7 @@ alias:\n           for (k = -1; ++k < len && !bin[k];) {}\n \n           // @todo: Make this more readable:\n-          var key = (lastBit = precisionBits - 1 +\n+          const key = (lastBit = precisionBits - 1 +\n             (k =\n               (exp = bias + 1 - k) >= minExp &&\n               exp <= maxExp ? k + 1 : bias + 1 - (exp = minExp - 1))) + 1\n@@ -319,7 +319,7 @@ alias:\n               for (j = lastBit + 2; !rounded && j < len; rounded = bin[j++]) {}\n             }\n             for (j = lastBit + 1; rounded && --j >= 0;\n-            (bin[j] = !bin[j] - 0) && (rounded = 0)) {}\n+              (bin[j] = !bin[j] - 0) && (rounded = 0)) {}\n           }\n \n           for (k = k - 2 < 0 ? -1 : k - 3; ++k < len && !bin[k];) {}\n@@ -421,7 +421,7 @@ alias:\n     }\n   }\n   if (argumentPointer < arguments.length) {\n-    var msg2 = 'Warning: pack(): ' + (arguments.length - argumentPointer) + ' arguments unused'\n+    const msg2 = 'Warning: pack(): ' + (arguments.length - argumentPointer) + ' arguments unused'\n     throw new Error(msg2)\n   }\n \n", "diff --git a/website/source/php/misc/uniqid.html b/website/source/php/misc/uniqid.html\nindex 8f6f7f42d..f352b19de 100644\n--- a/website/source/php/misc/uniqid.html\n+++ b/website/source/php/misc/uniqid.html\n@@ -59,8 +59,8 @@ alias:\n     prefix = ''\n   }\n \n-  var retId\n-  var _formatSeed = function (seed, reqWidth) {\n+  let retId\n+  const _formatSeed = function (seed, reqWidth) {\n     seed = parseInt(seed, 10).toString(16) // to hex str\n     if (reqWidth < seed.length) {\n       // so long we split\n@@ -73,9 +73,9 @@ alias:\n     return seed\n   }\n \n-  var $global = (typeof window !== 'undefined' ? window : global)\n+  const $global = (typeof window !== 'undefined' ? window : global)\n   $global.$locutus = $global.$locutus || {}\n-  var $locutus = $global.$locutus\n+  const $locutus = $global.$locutus\n   $locutus.php = $locutus.php || {}\n \n   if (!$locutus.php.uniqidSeed) {\n", "diff --git a/website/source/php/net-gopher/gopher_parsedir.html b/website/source/php/net-gopher/gopher_parsedir.html\nindex f30673074..1d2d88694 100644\n--- a/website/source/php/net-gopher/gopher_parsedir.html\n+++ b/website/source/php/net-gopher/gopher_parsedir.html\n@@ -55,15 +55,15 @@ alias:\n    * s = Audio file format, primarily a WAV file\n    */\n \n-  var entryPattern = /^(.)(.*?)\\t(.*?)\\t(.*?)\\t(.*?)\\u000d\\u000a$/\n-  var entry = dirent.match(entryPattern)\n+  const entryPattern = /^(.)(.*?)\\t(.*?)\\t(.*?)\\t(.*?)\\u000d\\u000a$/\n+  const entry = dirent.match(entryPattern)\n \n   if (entry === null) {\n     throw new Error('Could not parse the directory entry')\n     // return false;\n   }\n \n-  var type = entry[1]\n+  let type = entry[1]\n   switch (type) {\n     case 'i':\n     // GOPHER_INFO\n", "diff --git a/website/source/php/network/inet_ntop.html b/website/source/php/network/inet_ntop.html\nindex 3c0ec7589..6682c2c9e 100644\n--- a/website/source/php/network/inet_ntop.html\n+++ b/website/source/php/network/inet_ntop.html\n@@ -35,9 +35,9 @@ alias:\n   //   _example 2: inet_ntop('\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\1')\n   //   _returns 2: '::1'\n \n-  var i = 0\n-  var m = ''\n-  var c = []\n+  let i = 0\n+  let m = ''\n+  const c = []\n \n   a += ''\n   if (a.length === 4) {\n", "diff --git a/website/source/php/network/inet_pton.html b/website/source/php/network/inet_pton.html\nindex ff8d9b9b6..6ba492c2f 100644\n--- a/website/source/php/network/inet_pton.html\n+++ b/website/source/php/network/inet_pton.html\n@@ -11,6 +11,8 @@ dependencies: []\n authors:\n   original by:\n     - 'Theriault (https://github.com/Theriault)'\n+  improved by:\n+    - alromh87 and JamieSlome\n notes: []\n type: function\n layout: function\n@@ -32,59 +34,63 @@ alias:\n {% codeblock lang:javascript %}module.exports = function inet_pton (a) { // eslint-disable-line camelcase\n   //  discuss at: https://locutus.io/php/inet_pton/\n   // original by: Theriault (https://github.com/Theriault)\n+  // improved by: alromh87 and JamieSlome\n   //   example 1: inet_pton('::')\n   //   returns 1: '\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0'\n   //   example 2: inet_pton('127.0.0.1')\n   //   returns 2: '\\x7F\\x00\\x00\\x01'\n \n-  var r\n-  var m\n-  var x\n-  var i\n-  var j\n-  var f = String.fromCharCode\n+  let m\n+  let i\n+  let j\n+  const f = String.fromCharCode\n \n   // IPv4\n   m = a.match(/^(?:\\d{1,3}(?:\\.|$)){4}/)\n   if (m) {\n     m = m[0].split('.')\n-    m = f(m[0]) + f(m[1]) + f(m[2]) + f(m[3])\n+    m = f(m[0], m[1], m[2], m[3])\n     // Return if 4 bytes, otherwise false.\n     return m.length === 4 ? m : false\n   }\n-  r = /^((?:[\\da-f]{1,4}(?::|)){0,8})(::)?((?:[\\da-f]{1,4}(?::|)){0,8})$/\n \n   // IPv6\n-  m = a.match(r)\n-  if (m) {\n-    // Translate each hexadecimal value.\n-    for (j = 1; j < 4; j++) {\n-      // Indice 2 is :: and if no length, continue.\n-      if (j === 2 || m[j].length === 0) {\n-        continue\n+  if (a.length > 39) {\n+    return false\n+  }\n+\n+  m = a.split('::')\n+\n+  if (m.length > 2) {\n+    return false\n+  } // :: can't be used more than once in IPv6.\n+\n+  const reHexDigits = /^[\\da-f]{1,4}$/i\n+\n+  for (j = 0; j < m.length; j++) {\n+    if (m[j].length === 0) { // Skip if empty.\n+      continue\n+    }\n+    m[j] = m[j].split(':')\n+    for (i = 0; i < m[j].length; i++) {\n+      let hextet = m[j][i]\n+      // check if valid hex string up to 4 chars\n+      if (!reHexDigits.test(hextet)) {\n+        return false\n       }\n-      m[j] = m[j].split(':')\n-      for (i = 0; i < m[j].length; i++) {\n-        m[j][i] = parseInt(m[j][i], 16)\n-        // Would be NaN if it was blank, return false.\n-        if (isNaN(m[j][i])) {\n-          // Invalid IP.\n-          return false\n-        }\n-        m[j][i] = f(m[j][i] >> 8) + f(m[j][i] & 0xFF)\n+\n+      hextet = parseInt(hextet, 16)\n+\n+      // Would be NaN if it was blank, return false.\n+      if (isNaN(hextet)) {\n+        // Invalid IP.\n+        return false\n       }\n-      m[j] = m[j].join('')\n-    }\n-    x = m[1].length + m[3].length\n-    if (x === 16) {\n-      return m[1] + m[3]\n-    } else if (x < 16 && m[2].length > 0) {\n-      return m[1] + (new Array(16 - x + 1))\n-        .join('\\x00') + m[3]\n+      m[j][i] = f(hextet >> 8, hextet & 0xFF)\n     }\n+    m[j] = m[j].join('')\n   }\n \n-  // Invalid IP\n-  return false\n+  return m.join('\\x00'.repeat(16 - m.reduce((tl, m) => tl + m.length, 0)))\n }\n {% endcodeblock %}\n\\ No newline at end of file\n", "diff --git a/website/source/php/network/ip2long.html b/website/source/php/network/ip2long.html\nindex fac65fdbb..7ee2df1cb 100644\n--- a/website/source/php/network/ip2long.html\n+++ b/website/source/php/network/ip2long.html\n@@ -16,7 +16,7 @@ authors:\n   improved by:\n     - Victor\n   revised by:\n-    - 'fearphage (https://http/my.opera.com/fearphage/)'\n+    - 'fearphage (https://my.opera.com/fearphage/)'\n     - 'Theriault (https://github.com/Theriault)'\n notes: []\n type: function\n@@ -40,7 +40,7 @@ alias:\n   //  discuss at: https://locutus.io/php/ip2long/\n   // original by: Waldo Malqui Silva (https://waldo.malqui.info)\n   // improved by: Victor\n-  //  revised by: fearphage (https://http/my.opera.com/fearphage/)\n+  //  revised by: fearphage (https://my.opera.com/fearphage/)\n   //  revised by: Theriault (https://github.com/Theriault)\n   //    estarget: es2015\n   //   example 1: ip2long('192.0.34.166')\n", "diff --git a/website/source/php/network/long2ip.html b/website/source/php/network/long2ip.html\nindex 2becbca2b..e7d9e5a3b 100644\n--- a/website/source/php/network/long2ip.html\n+++ b/website/source/php/network/long2ip.html\n@@ -8,7 +8,7 @@ returns:\n dependencies: []\n authors:\n   original by:\n-    - 'Waldo Malqui Silva (https://waldo.malqui.info)'\n+    - 'Waldo Malqui Silva (https://fayr.us/waldo/)'\n notes: []\n type: function\n layout: function\n@@ -29,7 +29,7 @@ alias:\n ---\n {% codeblock lang:javascript %}module.exports = function long2ip (ip) {\n   //  discuss at: https://locutus.io/php/long2ip/\n-  // original by: Waldo Malqui Silva (https://waldo.malqui.info)\n+  // original by: Waldo Malqui Silva (https://fayr.us/waldo/)\n   //   example 1: long2ip( 3221234342 )\n   //   returns 1: '192.0.34.166'\n \n@@ -37,6 +37,6 @@ alias:\n     return false\n   }\n \n-  return [ip >>> 24, ip >>> 16 & 0xFF, ip >>> 8 & 0xFF, ip & 0xFF].join('.')\n+  return [ip >>> 24 & 0xFF, ip >>> 16 & 0xFF, ip >>> 8 & 0xFF, ip & 0xFF].join('.')\n }\n {% endcodeblock %}\n\\ No newline at end of file\n", "diff --git a/website/source/php/network/setcookie.html b/website/source/php/network/setcookie.html\nindex de517a988..f86791629 100644\n--- a/website/source/php/network/setcookie.html\n+++ b/website/source/php/network/setcookie.html\n@@ -41,7 +41,7 @@ alias:\n   //   example 1: setcookie('author_name', 'Kevin van Zonneveld')\n   //   returns 1: true\n \n-  var setrawcookie = require('../network/setrawcookie')\n+  const setrawcookie = require('../network/setrawcookie')\n   return setrawcookie(name, encodeURIComponent(value), expires, path, domain, secure)\n }\n {% endcodeblock %}\n\\ No newline at end of file\n", "diff --git a/website/source/php/network/setrawcookie.html b/website/source/php/network/setrawcookie.html\nindex bc0253d04..dacabb046 100644\n--- a/website/source/php/network/setrawcookie.html\n+++ b/website/source/php/network/setrawcookie.html\n@@ -60,9 +60,9 @@ alias:\n     expires = (new Date(expires * 1e3)).toUTCString()\n   }\n \n-  var r = [name + '=' + value]\n-  var i = ''\n-  var s = {\n+  const r = [name + '=' + value]\n+  let i = ''\n+  const s = {\n     expires: expires,\n     path: path,\n     domain: domain\n", "diff --git a/website/source/php/pcre/preg_match.html b/website/source/php/pcre/preg_match.html\nnew file mode 100644\nindex 000000000..74b1fd787\n--- /dev/null\n+++ b/website/source/php/pcre/preg_match.html\n@@ -0,0 +1,44 @@\n+---\n+warning: 'This file is auto generated by `npm run web:inject`, do not edit by hand'\n+examples:\n+  - >-\n+    preg_match(\"^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\\\\.[a-zA-Z]{2,6}$\",\n+    \"rony@pharaohtools.com\")\n+  - >-\n+    preg_match(\"^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\\\\.[a-zA-Z]{2,6}$\",\n+    \"ronypharaohtools.com\")\n+estarget: es5\n+returns:\n+  - 'true'\n+  - 'false'\n+dependencies: []\n+authors:\n+  original by:\n+    - 'Muhammad Humayun (https://github.com/ronypt)'\n+notes: []\n+type: function\n+layout: function\n+title: PHP's preg_match in JavaScript\n+description: >-\n+  Here\u2019s what our current JavaScript equivalent to <a\n+  href=\"https://php.net/manual/en/function.preg-match.php\">PHP's preg_match</a>\n+  looks like.\n+function: preg_match\n+category: pcre\n+language: php\n+permalink: php/pcre/preg_match/\n+alias:\n+  - /functions/php/preg_match/\n+  - /functions/pcre/preg_match/\n+  - /php/preg_match/\n+  - /functions/preg_match/\n+---\n+{% codeblock lang:javascript %}module.exports = function preg_match (regex, str) { // eslint-disable-line camelcase\n+  //   original by: Muhammad Humayun (https://github.com/ronypt)\n+  //   example 1: preg_match(\"^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\\\\.[a-zA-Z]{2,6}$\", \"rony@pharaohtools.com\")\n+  //   returns 1: true\n+  //   example 2: preg_match(\"^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\\\\.[a-zA-Z]{2,6}$\", \"ronypharaohtools.com\")\n+  //   returns 2: false\n+  return (new RegExp(regex).test(str))\n+}\n+{% endcodeblock %}\n\\ No newline at end of file\n", "diff --git a/website/source/php/pcre/preg_replace.html b/website/source/php/pcre/preg_replace.html\nnew file mode 100644\nindex 000000000..894d76a62\n--- /dev/null\n+++ b/website/source/php/pcre/preg_replace.html\n@@ -0,0 +1,58 @@\n+---\n+warning: 'This file is auto generated by `npm run web:inject`, do not edit by hand'\n+examples:\n+  - 'preg_replace(''/xmas/i'', ''Christmas'', ''It was the night before Xmas.'')'\n+  - 'preg_replace(''/xmas/ig'', ''Christmas'', ''xMas: It was the night before Xmas.'')'\n+  - 'preg_replace(''\\/(\\\\w+) (\\\\d+), (\\\\d+)\\/i'', ''$11,$3'', ''April 15, 2003'')'\n+  - 'preg_replace(''/[^a-zA-Z0-9]+/'', '''', ''The Development of code . http://www.'')'\n+  - 'preg_replace(''/[^A-Za-z0-9_\\\\s]/'', '''', ''D\"usseldorfer H\"auptstrasse'')'\n+estarget: es5\n+returns:\n+  - '\"It was the night before Christmas.\"'\n+  - '\"Christmas: It was the night before Christmas.\"'\n+  - '\"April1,2003\"'\n+  - '\"TheDevelopmentofcodehttpwww\"'\n+  - '\"Dusseldorfer Hauptstrasse\"'\n+dependencies: []\n+authors:\n+  original by:\n+    - 'rony2k6 (https://github.com/rony2k6)'\n+notes: []\n+type: function\n+layout: function\n+title: PHP's preg_replace in JavaScript\n+description: >-\n+  Here\u2019s what our current JavaScript equivalent to <a\n+  href=\"https://php.net/manual/en/function.preg-replace.php\">PHP's\n+  preg_replace</a> looks like.\n+function: preg_replace\n+category: pcre\n+language: php\n+permalink: php/pcre/preg_replace/\n+alias:\n+  - /functions/php/preg_replace/\n+  - /functions/pcre/preg_replace/\n+  - /php/preg_replace/\n+  - /functions/preg_replace/\n+---\n+{% codeblock lang:javascript %}module.exports = function preg_replace (pattern, replacement, string) { // eslint-disable-line camelcase\n+  //   original by: rony2k6 (https://github.com/rony2k6)\n+  //   example 1: preg_replace('/xmas/i', 'Christmas', 'It was the night before Xmas.')\n+  //   returns 1: \"It was the night before Christmas.\"\n+  //   example 2: preg_replace('/xmas/ig', 'Christmas', 'xMas: It was the night before Xmas.')\n+  //   returns 2: \"Christmas: It was the night before Christmas.\"\n+  //   example 3: preg_replace('\\/(\\\\w+) (\\\\d+), (\\\\d+)\\/i', '$11,$3', 'April 15, 2003')\n+  //   returns 3: \"April1,2003\"\n+  //   example 4: preg_replace('/[^a-zA-Z0-9]+/', '', 'The Development of code . http://www.')\n+  //   returns 4: \"TheDevelopmentofcodehttpwww\"\n+  //   example 5: preg_replace('/[^A-Za-z0-9_\\\\s]/', '', 'D\"usseldorfer H\"auptstrasse')\n+  //   returns 5: \"Dusseldorfer Hauptstrasse\"\n+  let _flag = pattern.substr(pattern.lastIndexOf(pattern[0]) + 1)\n+  _flag = (_flag !== '') ? _flag : 'g'\n+  const _pattern = pattern.substr(1, pattern.lastIndexOf(pattern[0]) - 1)\n+  const regex = new RegExp(_pattern, _flag)\n+  const result = string.replace(regex, replacement)\n+\n+  return result\n+}\n+{% endcodeblock %}\n\\ No newline at end of file\n", "diff --git a/website/source/php/pcre/sql_regcase.html b/website/source/php/pcre/sql_regcase.html\nindex 98c78472b..d817bc3e5 100644\n--- a/website/source/php/pcre/sql_regcase.html\n+++ b/website/source/php/pcre/sql_regcase.html\n@@ -15,8 +15,8 @@ layout: function\n title: PHP's sql_regcase in JavaScript\n description: >-\n   Here\u2019s what our current JavaScript equivalent to <a\n-  href=\"https://php.net/manual/en/function.sql-regcase.php\">PHP's sql_regcase</a>\n-  looks like.\n+  href=\"https://php.net/manual/en/function.sql-regcase.php\">PHP's\n+  sql_regcase</a> looks like.\n function: sql_regcase\n category: pcre\n language: php\n@@ -33,18 +33,18 @@ alias:\n   //   example 1: sql_regcase('Foo - bar.')\n   //   returns 1: '[Ff][Oo][Oo] - [Bb][Aa][Rr].'\n \n-  var setlocale = require('../strings/setlocale')\n-  var i = 0\n-  var upper = ''\n-  var lower = ''\n-  var pos = 0\n-  var retStr = ''\n+  const setlocale = require('../strings/setlocale')\n+  let i = 0\n+  let upper = ''\n+  let lower = ''\n+  let pos = 0\n+  let retStr = ''\n \n   setlocale('LC_ALL', 0)\n \n-  var $global = (typeof window !== 'undefined' ? window : global)\n+  const $global = (typeof window !== 'undefined' ? window : global)\n   $global.$locutus = $global.$locutus || {}\n-  var $locutus = $global.$locutus\n+  const $locutus = $global.$locutus\n   $locutus.php = $locutus.php || {}\n \n   upper = $locutus.php.locales[$locutus.php.localeCategories.LC_CTYPE].LC_CTYPE.upper\n", "diff --git a/website/source/php/strings/addcslashes.html b/website/source/php/strings/addcslashes.html\nindex ef13341b3..fa67a945e 100644\n--- a/website/source/php/strings/addcslashes.html\n+++ b/website/source/php/strings/addcslashes.html\n@@ -25,8 +25,8 @@ layout: function\n title: PHP's addcslashes in JavaScript\n description: >-\n   Here\u2019s what our current JavaScript equivalent to <a\n-  href=\"https://php.net/manual/en/function.addcslashes.php\">PHP's addcslashes</a>\n-  looks like.\n+  href=\"https://php.net/manual/en/function.addcslashes.php\">PHP's\n+  addcslashes</a> looks like.\n function: addcslashes\n category: strings\n language: php\n@@ -56,25 +56,25 @@ alias:\n   //   _example 6: addcslashes(\"\\r\\u0007\\n\", '\\0'); // Do not recognize C escape sequences if not specified\n   //   _returns 6: \"\\r\\u0007\\n\"\n \n-  var target = ''\n-  var chrs = []\n-  var i = 0\n-  var j = 0\n-  var c = ''\n-  var next = ''\n-  var rangeBegin = ''\n-  var rangeEnd = ''\n-  var chr = ''\n-  var begin = 0\n-  var end = 0\n-  var octalLength = 0\n-  var postOctalPos = 0\n-  var cca = 0\n-  var escHexGrp = []\n-  var encoded = ''\n-  var percentHex = /%([\\dA-Fa-f]+)/g\n+  let target = ''\n+  const chrs = []\n+  let i = 0\n+  let j = 0\n+  let c = ''\n+  let next = ''\n+  let rangeBegin = ''\n+  let rangeEnd = ''\n+  let chr = ''\n+  let begin = 0\n+  let end = 0\n+  let octalLength = 0\n+  let postOctalPos = 0\n+  let cca = 0\n+  let escHexGrp = []\n+  let encoded = ''\n+  const percentHex = /%([\\dA-Fa-f]+)/g\n \n-  var _pad = function (n, c) {\n+  const _pad = function (n, c) {\n     if ((n = n + '').length < c) {\n       return new Array(++c - n.length).join('0') + n\n     }\n", "diff --git a/website/source/php/strings/bin2hex.html b/website/source/php/strings/bin2hex.html\nindex c2066b38e..66feac37c 100644\n--- a/website/source/php/strings/bin2hex.html\n+++ b/website/source/php/strings/bin2hex.html\n@@ -45,10 +45,10 @@ alias:\n   //   example 2: bin2hex(String.fromCharCode(0x00))\n   //   returns 2: '00'\n \n-  var i\n-  var l\n-  var o = ''\n-  var n\n+  let i\n+  let l\n+  let o = ''\n+  let n\n \n   s += ''\n \n", "diff --git a/website/source/php/strings/chop.html b/website/source/php/strings/chop.html\nindex e6b8870da..1d2a5d577 100644\n--- a/website/source/php/strings/chop.html\n+++ b/website/source/php/strings/chop.html\n@@ -32,7 +32,7 @@ alias:\n   //   example 1: chop('    Kevin van Zonneveld    ')\n   //   returns 1: '    Kevin van Zonneveld'\n \n-  var rtrim = require('../strings/rtrim')\n+  const rtrim = require('../strings/rtrim')\n   return rtrim(str, charlist)\n }\n {% endcodeblock %}\n\\ No newline at end of file\n", "diff --git a/website/source/php/strings/chunk_split.html b/website/source/php/strings/chunk_split.html\nindex 328ef2a26..7aec0db24 100644\n--- a/website/source/php/strings/chunk_split.html\n+++ b/website/source/php/strings/chunk_split.html\n@@ -23,8 +23,8 @@ layout: function\n title: PHP's chunk_split in JavaScript\n description: >-\n   Here\u2019s what our current JavaScript equivalent to <a\n-  href=\"https://php.net/manual/en/function.chunk-split.php\">PHP's chunk_split</a>\n-  looks like.\n+  href=\"https://php.net/manual/en/function.chunk-split.php\">PHP's\n+  chunk_split</a> looks like.\n function: chunk_split\n category: strings\n language: php\n", "diff --git a/website/source/php/strings/convert_cyr_string.html b/website/source/php/strings/convert_cyr_string.html\nindex 9577c21d5..29fb84b0b 100644\n--- a/website/source/php/strings/convert_cyr_string.html\n+++ b/website/source/php/strings/convert_cyr_string.html\n@@ -54,7 +54,7 @@ alias:\n   //   example 1: convert_cyr_string(String.fromCharCode(214), 'k', 'w').charCodeAt(0) === 230; // Char. 214 of KOI8-R gives equivalent number value 230 in win1251\n   //   returns 1: true\n \n-  var _cyrWin1251 = [\n+  const _cyrWin1251 = [\n     0,\n     1,\n     2,\n@@ -568,7 +568,7 @@ alias:\n     215,\n     218\n   ]\n-  var _cyrCp866 = [\n+  const _cyrCp866 = [\n     0,\n     1,\n     2,\n@@ -1082,7 +1082,7 @@ alias:\n     151,\n     154\n   ]\n-  var _cyrIso88595 = [\n+  const _cyrIso88595 = [\n     0,\n     1,\n     2,\n@@ -1596,7 +1596,7 @@ alias:\n     199,\n     202\n   ]\n-  var _cyrMac = [\n+  const _cyrMac = [\n     0,\n     1,\n     2,\n@@ -2114,11 +2114,11 @@ alias:\n     154\n   ]\n \n-  var fromTable = null\n-  var toTable = null\n-  var tmp\n-  var i = 0\n-  var retStr = ''\n+  let fromTable = null\n+  let toTable = null\n+  let tmp\n+  let i = 0\n+  let retStr = ''\n \n   switch (from.toUpperCase()) {\n     case 'W':\n", "diff --git a/website/source/php/strings/convert_uuencode.html b/website/source/php/strings/convert_uuencode.html\nindex 4e4fc09a8..d71f74f8e 100644\n--- a/website/source/php/strings/convert_uuencode.html\n+++ b/website/source/php/strings/convert_uuencode.html\n@@ -41,9 +41,9 @@ alias:\n   //        example 1: convert_uuencode(\"test\\ntext text\\r\\n\")\n   //        returns 1: \"0=&5S=`IT97AT('1E>'0-\\\"@\\n`\\n\"\n \n-  var isScalar = require('../var/is_scalar')\n+  const isScalar = require('../var/is_scalar')\n \n-  var chr = function (c) {\n+  const chr = function (c) {\n     return String.fromCharCode(c)\n   }\n \n@@ -53,17 +53,17 @@ alias:\n     return false\n   }\n \n-  var c = 0\n-  var u = 0\n-  var i = 0\n-  var a = 0\n-  var encoded = ''\n-  var tmp1 = ''\n-  var tmp2 = ''\n-  var bytes = {}\n+  let c = 0\n+  let u = 0\n+  let i = 0\n+  let a = 0\n+  let encoded = ''\n+  let tmp1 = ''\n+  let tmp2 = ''\n+  let bytes = {}\n \n   // divide string into chunks of 45 characters\n-  var chunk = function () {\n+  const chunk = function () {\n     bytes = str.substr(u, 45).split('')\n     for (i in bytes) {\n       bytes[i] = bytes[i].charCodeAt(0)\n", "diff --git a/website/source/php/strings/count_chars.html b/website/source/php/strings/count_chars.html\nindex f6abf273b..10068b128 100644\n--- a/website/source/php/strings/count_chars.html\n+++ b/website/source/php/strings/count_chars.html\n@@ -26,8 +26,8 @@ layout: function\n title: PHP's count_chars in JavaScript\n description: >-\n   Here\u2019s what our current JavaScript equivalent to <a\n-  href=\"https://php.net/manual/en/function.count-chars.php\">PHP's count_chars</a>\n-  looks like.\n+  href=\"https://php.net/manual/en/function.count-chars.php\">PHP's\n+  count_chars</a> looks like.\n function: count_chars\n category: strings\n language: php\n@@ -51,9 +51,9 @@ alias:\n   //   example 2: count_chars(\"Hello World!\", 1)\n   //   returns 2: {32:1,33:1,72:1,87:1,100:1,101:1,108:3,111:2,114:1}\n \n-  var result = {}\n-  var resultArr = []\n-  var i\n+  const result = {}\n+  const resultArr = []\n+  let i\n \n   str = ('' + str)\n     .split('')\n", "diff --git a/website/source/php/strings/crc32.html b/website/source/php/strings/crc32.html\nindex fb297bed0..e248f08b5 100644\n--- a/website/source/php/strings/crc32.html\n+++ b/website/source/php/strings/crc32.html\n@@ -17,7 +17,8 @@ layout: function\n title: PHP's crc32 in JavaScript\n description: >-\n   Here\u2019s what our current JavaScript equivalent to <a\n-  href=\"https://php.net/manual/en/function.crc32.php\">PHP's crc32</a> looks like.\n+  href=\"https://php.net/manual/en/function.crc32.php\">PHP's crc32</a> looks\n+  like.\n function: crc32\n category: strings\n language: php\n@@ -35,9 +36,9 @@ alias:\n   //   example 1: crc32('Kevin van Zonneveld')\n   //   returns 1: 1249991249\n \n-  var utf8Encode = require('../xml/utf8_encode')\n+  const utf8Encode = require('../xml/utf8_encode')\n   str = utf8Encode(str)\n-  var table = [\n+  const table = [\n     '00000000',\n     '77073096',\n     'EE0E612C',\n@@ -298,12 +299,12 @@ alias:\n   // @todo: ^-- Now that `table` is an array, maybe we can use that directly using slices,\n   // instead of converting it to a string and substringing\n \n-  var crc = 0\n-  var x = 0\n-  var y = 0\n+  let crc = 0\n+  let x = 0\n+  let y = 0\n \n   crc = crc ^ (-1)\n-  for (var i = 0, iTop = str.length; i < iTop; i++) {\n+  for (let i = 0, iTop = str.length; i < iTop; i++) {\n     y = (crc ^ str.charCodeAt(i)) & 0xFF\n     x = '0x' + table.substr(y * 9, 8)\n     crc = (crc >>> 8) ^ x\n", "diff --git a/website/source/php/strings/echo.html b/website/source/php/strings/echo.html\nindex 031b1cd2a..a98c34a85 100644\n--- a/website/source/php/strings/echo.html\n+++ b/website/source/php/strings/echo.html\n@@ -88,7 +88,7 @@ alias:\n   //   example 1: echo('Hello world')\n   //   returns 1: undefined\n \n-  var args = Array.prototype.slice.call(arguments)\n+  const args = Array.prototype.slice.call(arguments)\n   return console.log(args.join(' '))\n }\n {% endcodeblock %}\n\\ No newline at end of file\n", "diff --git a/website/source/php/strings/explode.html b/website/source/php/strings/explode.html\nindex fb094d81a..63d9a3a61 100644\n--- a/website/source/php/strings/explode.html\n+++ b/website/source/php/strings/explode.html\n@@ -59,7 +59,7 @@ alias:\n   delimiter += ''\n   string += ''\n \n-  var s = string.split(delimiter)\n+  const s = string.split(delimiter)\n \n   if (typeof limit === 'undefined') return s\n \n", "diff --git a/website/source/php/strings/get_html_translation_table.html b/website/source/php/strings/get_html_translation_table.html\nindex 7bb341b25..f3363f7f2 100644\n--- a/website/source/php/strings/get_html_translation_table.html\n+++ b/website/source/php/strings/get_html_translation_table.html\n@@ -68,13 +68,13 @@ alias:\n   //   example 1: get_html_translation_table('HTML_SPECIALCHARS')\n   //   returns 1: {'\"': '&quot;', '&': '&amp;', '<': '&lt;', '>': '&gt;'}\n \n-  var entities = {}\n-  var hashMap = {}\n-  var decimal\n-  var constMappingTable = {}\n-  var constMappingQuoteStyle = {}\n-  var useTable = {}\n-  var useQuoteStyle = {}\n+  const entities = {}\n+  const hashMap = {}\n+  let decimal\n+  const constMappingTable = {}\n+  const constMappingQuoteStyle = {}\n+  let useTable = {}\n+  let useQuoteStyle = {}\n \n   // Translate arguments\n   constMappingTable[0] = 'HTML_SPECIALCHARS'\n", "diff --git a/website/source/php/strings/hex2bin.html b/website/source/php/strings/hex2bin.html\nindex 018865169..8e7b26dd2 100644\n--- a/website/source/php/strings/hex2bin.html\n+++ b/website/source/php/strings/hex2bin.html\n@@ -41,15 +41,15 @@ alias:\n   //   example 3: hex2bin('2f1q')\n   //   returns 3: false\n \n-  var ret = []\n-  var i = 0\n-  var l\n+  const ret = []\n+  let i = 0\n+  let l\n \n   s += ''\n \n   for (l = s.length; i < l; i += 2) {\n-    var c = parseInt(s.substr(i, 1), 16)\n-    var k = parseInt(s.substr(i + 1, 1), 16)\n+    const c = parseInt(s.substr(i, 1), 16)\n+    const k = parseInt(s.substr(i + 1, 1), 16)\n     if (isNaN(c) || isNaN(k)) return false\n     ret.push((c << 4) | k)\n   }\n", "diff --git a/website/source/php/strings/html_entity_decode.html b/website/source/php/strings/html_entity_decode.html\nindex f69efb5dd..e768055d4 100644\n--- a/website/source/php/strings/html_entity_decode.html\n+++ b/website/source/php/strings/html_entity_decode.html\n@@ -61,13 +61,13 @@ alias:\n   //   example 2: html_entity_decode('&amp;lt;')\n   //   returns 2: '&lt;'\n \n-  var getHtmlTranslationTable = require('../strings/get_html_translation_table')\n-  var tmpStr = ''\n-  var entity = ''\n-  var symbol = ''\n+  const getHtmlTranslationTable = require('../strings/get_html_translation_table')\n+  let tmpStr = ''\n+  let entity = ''\n+  let symbol = ''\n   tmpStr = string.toString()\n \n-  var hashMap = getHtmlTranslationTable('HTML_ENTITIES', quoteStyle)\n+  const hashMap = getHtmlTranslationTable('HTML_ENTITIES', quoteStyle)\n   if (hashMap === false) {\n     return false\n   }\n", "diff --git a/website/source/php/strings/htmlentities.html b/website/source/php/strings/htmlentities.html\nindex 6968418a0..47f42ccd0 100644\n--- a/website/source/php/strings/htmlentities.html\n+++ b/website/source/php/strings/htmlentities.html\n@@ -61,8 +61,8 @@ alias:\n   //   example 2: htmlentities(\"foo'bar\",\"ENT_QUOTES\")\n   //   returns 2: 'foo&#039;bar'\n \n-  var getHtmlTranslationTable = require('../strings/get_html_translation_table')\n-  var hashMap = getHtmlTranslationTable('HTML_ENTITIES', quoteStyle)\n+  const getHtmlTranslationTable = require('../strings/get_html_translation_table')\n+  const hashMap = getHtmlTranslationTable('HTML_ENTITIES', quoteStyle)\n \n   string = string === null ? '' : string + ''\n \n@@ -76,12 +76,12 @@ alias:\n \n   doubleEncode = doubleEncode === null || !!doubleEncode\n \n-  var regex = new RegExp('&(?:#\\\\d+|#x[\\\\da-f]+|[a-zA-Z][\\\\da-z]*);|[' +\n+  const regex = new RegExp('&(?:#\\\\d+|#x[\\\\da-f]+|[a-zA-Z][\\\\da-z]*);|[' +\n     Object.keys(hashMap)\n-    .join('')\n+      .join('')\n     // replace regexp special chars\n-    .replace(/([()[\\]{}\\-.*+?^$|/\\\\])/g, '\\\\$1') + ']',\n-    'g')\n+      .replace(/([()[\\]{}\\-.*+?^$|/\\\\])/g, '\\\\$1') + ']',\n+  'g')\n \n   return string.replace(regex, function (ent) {\n     if (ent.length > 1) {\n", "diff --git a/website/source/php/strings/htmlspecialchars.html b/website/source/php/strings/htmlspecialchars.html\nindex b5e429fdd..428aa36c4 100644\n--- a/website/source/php/strings/htmlspecialchars.html\n+++ b/website/source/php/strings/htmlspecialchars.html\n@@ -68,9 +68,9 @@ alias:\n   //        example 3: htmlspecialchars('my \"&entity;\" is still here', null, null, false)\n   //        returns 3: 'my &quot;&entity;&quot; is still here'\n \n-  var optTemp = 0\n-  var i = 0\n-  var noquotes = false\n+  let optTemp = 0\n+  let i = 0\n+  let noquotes = false\n   if (typeof quoteStyle === 'undefined' || quoteStyle === null) {\n     quoteStyle = 2\n   }\n@@ -86,13 +86,13 @@ alias:\n     .replace(/</g, '&lt;')\n     .replace(/>/g, '&gt;')\n \n-  var OPTS = {\n-    'ENT_NOQUOTES': 0,\n-    'ENT_HTML_QUOTE_SINGLE': 1,\n-    'ENT_HTML_QUOTE_DOUBLE': 2,\n-    'ENT_COMPAT': 2,\n-    'ENT_QUOTES': 3,\n-    'ENT_IGNORE': 4\n+  const OPTS = {\n+    ENT_NOQUOTES: 0,\n+    ENT_HTML_QUOTE_SINGLE: 1,\n+    ENT_HTML_QUOTE_DOUBLE: 2,\n+    ENT_COMPAT: 2,\n+    ENT_QUOTES: 3,\n+    ENT_IGNORE: 4\n   }\n   if (quoteStyle === 0) {\n     noquotes = true\n", "diff --git a/website/source/php/strings/htmlspecialchars_decode.html b/website/source/php/strings/htmlspecialchars_decode.html\nindex 846cec56a..6eccef711 100644\n--- a/website/source/php/strings/htmlspecialchars_decode.html\n+++ b/website/source/php/strings/htmlspecialchars_decode.html\n@@ -68,9 +68,9 @@ alias:\n   //        example 2: htmlspecialchars_decode(\"&amp;quot;\")\n   //        returns 2: '&quot;'\n \n-  var optTemp = 0\n-  var i = 0\n-  var noquotes = false\n+  let optTemp = 0\n+  let i = 0\n+  let noquotes = false\n \n   if (typeof quoteStyle === 'undefined') {\n     quoteStyle = 2\n@@ -78,13 +78,13 @@ alias:\n   string = string.toString()\n     .replace(/&lt;/g, '<')\n     .replace(/&gt;/g, '>')\n-  var OPTS = {\n-    'ENT_NOQUOTES': 0,\n-    'ENT_HTML_QUOTE_SINGLE': 1,\n-    'ENT_HTML_QUOTE_DOUBLE': 2,\n-    'ENT_COMPAT': 2,\n-    'ENT_QUOTES': 3,\n-    'ENT_IGNORE': 4\n+  const OPTS = {\n+    ENT_NOQUOTES: 0,\n+    ENT_HTML_QUOTE_SINGLE: 1,\n+    ENT_HTML_QUOTE_DOUBLE: 2,\n+    ENT_COMPAT: 2,\n+    ENT_QUOTES: 3,\n+    ENT_IGNORE: 4\n   }\n   if (quoteStyle === 0) {\n     noquotes = true\n", "diff --git a/website/source/php/strings/implode.html b/website/source/php/strings/implode.html\nindex 091902a3f..932e4d507 100644\n--- a/website/source/php/strings/implode.html\n+++ b/website/source/php/strings/implode.html\n@@ -45,9 +45,9 @@ alias:\n   //   example 2: implode(' ', {first:'Kevin', last: 'van Zonneveld'})\n   //   returns 2: 'Kevin van Zonneveld'\n \n-  var i = ''\n-  var retVal = ''\n-  var tGlue = ''\n+  let i = ''\n+  let retVal = ''\n+  let tGlue = ''\n \n   if (arguments.length === 1) {\n     pieces = glue\n", "diff --git a/website/source/php/strings/join.html b/website/source/php/strings/join.html\nindex a3cdfa37f..02ccfbed0 100644\n--- a/website/source/php/strings/join.html\n+++ b/website/source/php/strings/join.html\n@@ -32,7 +32,7 @@ alias:\n   //   example 1: join(' ', ['Kevin', 'van', 'Zonneveld'])\n   //   returns 1: 'Kevin van Zonneveld'\n \n-  var implode = require('../strings/implode')\n+  const implode = require('../strings/implode')\n   return implode(glue, pieces)\n }\n {% endcodeblock %}\n\\ No newline at end of file\n", "diff --git a/website/source/php/strings/lcfirst.html b/website/source/php/strings/lcfirst.html\nindex 9ff0521d2..926ca10d4 100644\n--- a/website/source/php/strings/lcfirst.html\n+++ b/website/source/php/strings/lcfirst.html\n@@ -34,7 +34,7 @@ alias:\n   //   returns 1: 'kevin Van Zonneveld'\n \n   str += ''\n-  var f = str.charAt(0)\n+  const f = str.charAt(0)\n     .toLowerCase()\n   return f + str.substr(1)\n }\n", "diff --git a/website/source/php/strings/levenshtein.html b/website/source/php/strings/levenshtein.html\nindex 1d9c3a498..a4830da83 100644\n--- a/website/source/php/strings/levenshtein.html\n+++ b/website/source/php/strings/levenshtein.html\n@@ -27,8 +27,8 @@ layout: function\n title: PHP's levenshtein in JavaScript\n description: >-\n   Here\u2019s what our current JavaScript equivalent to <a\n-  href=\"https://php.net/manual/en/function.levenshtein.php\">PHP's levenshtein</a>\n-  looks like.\n+  href=\"https://php.net/manual/en/function.levenshtein.php\">PHP's\n+  levenshtein</a> looks like.\n function: levenshtein\n category: strings\n language: php\n@@ -64,8 +64,8 @@ alias:\n     return 0\n   }\n \n-  var l1 = s1.length\n-  var l2 = s2.length\n+  const l1 = s1.length\n+  const l2 = s2.length\n \n   if (l1 === 0) {\n     return l2 * costIns\n@@ -79,7 +79,7 @@ alias:\n   //   return -1;\n   // }\n \n-  var split = false\n+  let split = false\n   try {\n     split = !('0')[0]\n   } catch (e) {\n@@ -92,10 +92,10 @@ alias:\n     s2 = s2.split('')\n   }\n \n-  var p1 = new Array(l2 + 1)\n-  var p2 = new Array(l2 + 1)\n+  let p1 = new Array(l2 + 1)\n+  let p2 = new Array(l2 + 1)\n \n-  var i1, i2, c0, c1, c2, tmp\n+  let i1, i2, c0, c1, c2, tmp\n \n   for (i2 = 0; i2 <= l2; i2++) {\n     p1[i2] = i2 * costIns\n", "diff --git a/website/source/php/strings/localeconv.html b/website/source/php/strings/localeconv.html\nindex cb68359d0..5e4c934f3 100644\n--- a/website/source/php/strings/localeconv.html\n+++ b/website/source/php/strings/localeconv.html\n@@ -41,17 +41,17 @@ alias:\n   //   example 1: localeconv()\n   //   returns 1: {decimal_point: '.', thousands_sep: '', positive_sign: '', negative_sign: '-', int_frac_digits: 2, frac_digits: 2, p_cs_precedes: 1, p_sep_by_space: 0, n_cs_precedes: 1, n_sep_by_space: 0, p_sign_posn: 1, n_sign_posn: 1, grouping: [], int_curr_symbol: 'USD ', currency_symbol: '$', mon_decimal_point: '.', mon_thousands_sep: ',', mon_grouping: [3, 3]}\n \n-  var setlocale = require('../strings/setlocale')\n+  const setlocale = require('../strings/setlocale')\n \n-  var arr = {}\n-  var prop = ''\n+  const arr = {}\n+  let prop = ''\n \n   // ensure setup of localization variables takes place, if not already\n   setlocale('LC_ALL', 0)\n \n-  var $global = (typeof window !== 'undefined' ? window : global)\n+  const $global = (typeof window !== 'undefined' ? window : global)\n   $global.$locutus = $global.$locutus || {}\n-  var $locutus = $global.$locutus\n+  const $locutus = $global.$locutus\n   $locutus.php = $locutus.php || {}\n \n   // Make copies\n", "diff --git a/website/source/php/strings/ltrim.html b/website/source/php/strings/ltrim.html\nindex 2d49366f1..29016d4c9 100644\n--- a/website/source/php/strings/ltrim.html\n+++ b/website/source/php/strings/ltrim.html\n@@ -21,7 +21,8 @@ layout: function\n title: PHP's ltrim in JavaScript\n description: >-\n   Here\u2019s what our current JavaScript equivalent to <a\n-  href=\"https://php.net/manual/en/function.ltrim.php\">PHP's ltrim</a> looks like.\n+  href=\"https://php.net/manual/en/function.ltrim.php\">PHP's ltrim</a> looks\n+  like.\n function: ltrim\n category: strings\n language: php\n@@ -44,7 +45,7 @@ alias:\n   charlist = !charlist ? ' \\\\s\\u00A0' : (charlist + '')\n     .replace(/([[\\]().?/*{}+$^:])/g, '$1')\n \n-  var re = new RegExp('^[' + charlist + ']+', 'g')\n+  const re = new RegExp('^[' + charlist + ']+', 'g')\n \n   return (str + '')\n     .replace(re, '')\n", "diff --git a/website/source/php/strings/md5.html b/website/source/php/strings/md5.html\nindex e83133f43..aa688fef4 100644\n--- a/website/source/php/strings/md5.html\n+++ b/website/source/php/strings/md5.html\n@@ -56,10 +56,10 @@ alias:\n   //   example 1: md5('Kevin van Zonneveld')\n   //   returns 1: '6e658d4bfcb59cc13f96c14450ac40b9'\n \n-  var hash\n+  let hash\n   try {\n-    var crypto = require('crypto')\n-    var md5sum = crypto.createHash('md5')\n+    const crypto = require('crypto')\n+    const md5sum = crypto.createHash('md5')\n     md5sum.update(str)\n     hash = md5sum.digest('hex')\n   } catch (e) {\n@@ -70,15 +70,15 @@ alias:\n     return hash\n   }\n \n-  var utf8Encode = require('../xml/utf8_encode')\n-  var xl\n+  const utf8Encode = require('../xml/utf8_encode')\n+  let xl\n \n-  var _rotateLeft = function (lValue, iShiftBits) {\n+  const _rotateLeft = function (lValue, iShiftBits) {\n     return (lValue << iShiftBits) | (lValue >>> (32 - iShiftBits))\n   }\n \n-  var _addUnsigned = function (lX, lY) {\n-    var lX4, lY4, lX8, lY8, lResult\n+  const _addUnsigned = function (lX, lY) {\n+    let lX4, lY4, lX8, lY8, lResult\n     lX8 = (lX & 0x80000000)\n     lY8 = (lY & 0x80000000)\n     lX4 = (lX & 0x40000000)\n@@ -98,48 +98,48 @@ alias:\n     }\n   }\n \n-  var _F = function (x, y, z) {\n+  const _F = function (x, y, z) {\n     return (x & y) | ((~x) & z)\n   }\n-  var _G = function (x, y, z) {\n+  const _G = function (x, y, z) {\n     return (x & z) | (y & (~z))\n   }\n-  var _H = function (x, y, z) {\n+  const _H = function (x, y, z) {\n     return (x ^ y ^ z)\n   }\n-  var _I = function (x, y, z) {\n+  const _I = function (x, y, z) {\n     return (y ^ (x | (~z)))\n   }\n \n-  var _FF = function (a, b, c, d, x, s, ac) {\n+  const _FF = function (a, b, c, d, x, s, ac) {\n     a = _addUnsigned(a, _addUnsigned(_addUnsigned(_F(b, c, d), x), ac))\n     return _addUnsigned(_rotateLeft(a, s), b)\n   }\n \n-  var _GG = function (a, b, c, d, x, s, ac) {\n+  const _GG = function (a, b, c, d, x, s, ac) {\n     a = _addUnsigned(a, _addUnsigned(_addUnsigned(_G(b, c, d), x), ac))\n     return _addUnsigned(_rotateLeft(a, s), b)\n   }\n \n-  var _HH = function (a, b, c, d, x, s, ac) {\n+  const _HH = function (a, b, c, d, x, s, ac) {\n     a = _addUnsigned(a, _addUnsigned(_addUnsigned(_H(b, c, d), x), ac))\n     return _addUnsigned(_rotateLeft(a, s), b)\n   }\n \n-  var _II = function (a, b, c, d, x, s, ac) {\n+  const _II = function (a, b, c, d, x, s, ac) {\n     a = _addUnsigned(a, _addUnsigned(_addUnsigned(_I(b, c, d), x), ac))\n     return _addUnsigned(_rotateLeft(a, s), b)\n   }\n \n-  var _convertToWordArray = function (str) {\n-    var lWordCount\n-    var lMessageLength = str.length\n-    var lNumberOfWordsTemp1 = lMessageLength + 8\n-    var lNumberOfWordsTemp2 = (lNumberOfWordsTemp1 - (lNumberOfWordsTemp1 % 64)) / 64\n-    var lNumberOfWords = (lNumberOfWordsTemp2 + 1) * 16\n-    var lWordArray = new Array(lNumberOfWords - 1)\n-    var lBytePosition = 0\n-    var lByteCount = 0\n+  const _convertToWordArray = function (str) {\n+    let lWordCount\n+    const lMessageLength = str.length\n+    const lNumberOfWordsTemp1 = lMessageLength + 8\n+    const lNumberOfWordsTemp2 = (lNumberOfWordsTemp1 - (lNumberOfWordsTemp1 % 64)) / 64\n+    const lNumberOfWords = (lNumberOfWordsTemp2 + 1) * 16\n+    const lWordArray = new Array(lNumberOfWords - 1)\n+    let lBytePosition = 0\n+    let lByteCount = 0\n     while (lByteCount < lMessageLength) {\n       lWordCount = (lByteCount - (lByteCount % 4)) / 4\n       lBytePosition = (lByteCount % 4) * 8\n@@ -155,11 +155,11 @@ alias:\n     return lWordArray\n   }\n \n-  var _wordToHex = function (lValue) {\n-    var wordToHexValue = ''\n-    var wordToHexValueTemp = ''\n-    var lByte\n-    var lCount\n+  const _wordToHex = function (lValue) {\n+    let wordToHexValue = ''\n+    let wordToHexValueTemp = ''\n+    let lByte\n+    let lCount\n \n     for (lCount = 0; lCount <= 3; lCount++) {\n       lByte = (lValue >>> (lCount * 8)) & 255\n@@ -169,32 +169,32 @@ alias:\n     return wordToHexValue\n   }\n \n-  var x = []\n-  var k\n-  var AA\n-  var BB\n-  var CC\n-  var DD\n-  var a\n-  var b\n-  var c\n-  var d\n-  var S11 = 7\n-  var S12 = 12\n-  var S13 = 17\n-  var S14 = 22\n-  var S21 = 5\n-  var S22 = 9\n-  var S23 = 14\n-  var S24 = 20\n-  var S31 = 4\n-  var S32 = 11\n-  var S33 = 16\n-  var S34 = 23\n-  var S41 = 6\n-  var S42 = 10\n-  var S43 = 15\n-  var S44 = 21\n+  let x = []\n+  let k\n+  let AA\n+  let BB\n+  let CC\n+  let DD\n+  let a\n+  let b\n+  let c\n+  let d\n+  const S11 = 7\n+  const S12 = 12\n+  const S13 = 17\n+  const S14 = 22\n+  const S21 = 5\n+  const S22 = 9\n+  const S23 = 14\n+  const S24 = 20\n+  const S31 = 4\n+  const S32 = 11\n+  const S33 = 16\n+  const S34 = 23\n+  const S41 = 6\n+  const S42 = 10\n+  const S43 = 15\n+  const S44 = 21\n \n   str = utf8Encode(str)\n   x = _convertToWordArray(str)\n@@ -279,7 +279,7 @@ alias:\n     d = _addUnsigned(d, DD)\n   }\n \n-  var temp = _wordToHex(a) + _wordToHex(b) + _wordToHex(c) + _wordToHex(d)\n+  const temp = _wordToHex(a) + _wordToHex(b) + _wordToHex(c) + _wordToHex(d)\n \n   return temp.toLowerCase()\n }\n", "diff --git a/website/source/php/strings/md5_file.html b/website/source/php/strings/md5_file.html\nindex dde86f156..a435c41f9 100644\n--- a/website/source/php/strings/md5_file.html\n+++ b/website/source/php/strings/md5_file.html\n@@ -29,8 +29,8 @@ layout: function\n title: PHP's md5_file in JavaScript\n description: >-\n   Here\u2019s what our current JavaScript equivalent to <a\n-  href=\"https://php.net/manual/en/function.md5-file.php\">PHP's md5_file</a> looks\n-  like.\n+  href=\"https://php.net/manual/en/function.md5-file.php\">PHP's md5_file</a>\n+  looks like.\n function: md5_file\n category: strings\n language: php\n@@ -53,9 +53,9 @@ alias:\n   //   example 1: md5_file('test/never-change.txt')\n   //   returns 1: 'bc3aa724b0ec7dce4c26e7f4d0d9b064'\n \n-  var fileGetContents = require('../filesystem/file_get_contents')\n-  var md5 = require('../strings/md5')\n-  var buf = fileGetContents(str_filename)\n+  const fileGetContents = require('../filesystem/file_get_contents')\n+  const md5 = require('../strings/md5')\n+  const buf = fileGetContents(str_filename)\n \n   if (buf === false) {\n     return false\n", "diff --git a/website/source/php/strings/metaphone.html b/website/source/php/strings/metaphone.html\nindex 9648510cf..77b70564d 100644\n--- a/website/source/php/strings/metaphone.html\n+++ b/website/source/php/strings/metaphone.html\n@@ -50,7 +50,7 @@ alias:\n   //   example 4: metaphone('batch batcher')\n   //   returns 4: 'BXBXR'\n \n-  var type = typeof word\n+  const type = typeof word\n \n   if (type === 'undefined' || type === 'object' && word !== null) {\n     // weird!\n@@ -75,10 +75,10 @@ alias:\n   // alpha depends on locale, so this var might need an update\n   // or should be turned into a regex\n   // for now assuming pure a-z\n-  var alpha = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'\n-  var vowel = 'AEIOU'\n-  var soft = 'EIY'\n-  var leadingNonAlpha = new RegExp('^[^' + alpha + ']+')\n+  const alpha = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'\n+  const vowel = 'AEIOU'\n+  const soft = 'EIY'\n+  const leadingNonAlpha = new RegExp('^[^' + alpha + ']+')\n \n   word = typeof word === 'string' ? word : ''\n   word = word.toUpperCase().replace(leadingNonAlpha, '')\n@@ -87,19 +87,19 @@ alias:\n     return ''\n   }\n \n-  var is = function (p, c) {\n+  const is = function (p, c) {\n     return c !== '' && p.indexOf(c) !== -1\n   }\n \n-  var i = 0\n-  var cc = word.charAt(0) // current char. Short name because it's used all over the function\n-  var nc = word.charAt(1)  // next char\n-  var nnc // after next char\n-  var pc // previous char\n-  var l = word.length\n-  var meta = ''\n+  let i = 0\n+  let cc = word.charAt(0) // current char. Short name because it's used all over the function\n+  let nc = word.charAt(1) // next char\n+  let nnc // after next char\n+  let pc // previous char\n+  const l = word.length\n+  let meta = ''\n   // traditional is an internal param that could be exposed for now let it be a local var\n-  var traditional = true\n+  const traditional = true\n \n   switch (cc) {\n     case 'A':\n", "diff --git a/website/source/php/strings/money_format.html b/website/source/php/strings/money_format.html\nindex 99827beab..fbdbf1a9c 100644\n--- a/website/source/php/strings/money_format.html\n+++ b/website/source/php/strings/money_format.html\n@@ -96,7 +96,7 @@ alias:\n   //  example 14: money_format('%i', 3590)\n   //  returns 14: ' USD 3,590.00'\n \n-  var setlocale = require('../strings/setlocale')\n+  const setlocale = require('../strings/setlocale')\n \n   // Per PHP behavior, there seems to be no extra padding\n   // for sign when there is a positive number, though my\n@@ -110,52 +110,52 @@ alias:\n     return null\n   }\n   // 1: flags, 3: width, 5: left, 7: right, 8: conversion\n-  var regex = /%((=.|[+^(!-])*?)(\\d*?)(#(\\d+))?(\\.(\\d+))?([in%])/g\n+  const regex = /%((=.|[+^(!-])*?)(\\d*?)(#(\\d+))?(\\.(\\d+))?([in%])/g\n \n   // Ensure the locale data we need is set up\n   setlocale('LC_ALL', 0)\n \n-  var $global = (typeof window !== 'undefined' ? window : global)\n+  const $global = (typeof window !== 'undefined' ? window : global)\n   $global.$locutus = $global.$locutus || {}\n-  var $locutus = $global.$locutus\n+  const $locutus = $global.$locutus\n   $locutus.php = $locutus.php || {}\n \n-  var monetary = $locutus.php.locales[$locutus.php.localeCategories.LC_MONETARY].LC_MONETARY\n+  const monetary = $locutus.php.locales[$locutus.php.localeCategories.LC_MONETARY].LC_MONETARY\n \n-  var doReplace = function (n0, flags, n2, width, n4, left, n6, right, conversion) {\n-    var value = ''\n-    var repl = ''\n+  const doReplace = function (n0, flags, n2, width, n4, left, n6, right, conversion) {\n+    let value = ''\n+    let repl = ''\n     if (conversion === '%') {\n       // Percent does not seem to be allowed with intervening content\n       return '%'\n     }\n-    var fill = flags && (/=./).test(flags) ? flags.match(/=(.)/)[1] : ' ' // flag: =f (numeric fill)\n+    const fill = flags && (/=./).test(flags) ? flags.match(/=(.)/)[1] : ' ' // flag: =f (numeric fill)\n     // flag: ! (suppress currency symbol)\n-    var showCurrSymbol = !flags || flags.indexOf('!') === -1\n+    const showCurrSymbol = !flags || flags.indexOf('!') === -1\n     // field width: w (minimum field width)\n     width = parseInt(width, 10) || 0\n \n-    var neg = number < 0\n+    const neg = number < 0\n     // Convert to string\n     number = number + ''\n     // We don't want negative symbol represented here yet\n     number = neg ? number.slice(1) : number\n \n-    var decpos = number.indexOf('.')\n+    const decpos = number.indexOf('.')\n     // Get integer portion\n-    var integer = decpos !== -1 ? number.slice(0, decpos) : number\n+    let integer = decpos !== -1 ? number.slice(0, decpos) : number\n     // Get decimal portion\n-    var fraction = decpos !== -1 ? number.slice(decpos + 1) : ''\n+    let fraction = decpos !== -1 ? number.slice(decpos + 1) : ''\n \n-    var _strSplice = function (integerStr, idx, thouSep) {\n-      var integerArr = integerStr.split('')\n+    const _strSplice = function (integerStr, idx, thouSep) {\n+      const integerArr = integerStr.split('')\n       integerArr.splice(idx, 0, thouSep)\n       return integerArr.join('')\n     }\n \n-    var intLen = integer.length\n+    const intLen = integer.length\n     left = parseInt(left, 10)\n-    var filler = intLen < left\n+    const filler = intLen < left\n     if (filler) {\n       var fillnum = left - intLen\n       integer = new Array(fillnum + 1).join(fill) + integer\n@@ -164,9 +164,9 @@ alias:\n       // flag: ^ (disable grouping characters (of locale))\n       // use grouping characters\n       // ','\n-      var thouSep = monetary.mon_thousands_sep\n+      let thouSep = monetary.mon_thousands_sep\n       // [3] (every 3 digits in U.S.A. locale)\n-      var monGrouping = monetary.mon_grouping\n+      const monGrouping = monetary.mon_grouping\n \n       if (monGrouping[0] < integer.length) {\n         for (var i = 0, idx = integer.length; i < monGrouping.length; i++) {\n@@ -199,7 +199,7 @@ alias:\n       value = integer\n     } else {\n       // '.'\n-      var decPt = monetary.mon_decimal_point\n+      let decPt = monetary.mon_decimal_point\n       if (right === '' || right === undefined) {\n         right = conversion === 'i' ? monetary.int_frac_digits : monetary.frac_digits\n       }\n@@ -222,21 +222,21 @@ alias:\n       value = integer + decPt + fraction\n     }\n \n-    var symbol = ''\n+    let symbol = ''\n     if (showCurrSymbol) {\n       // 'i' vs. 'n' ('USD' vs. '$')\n       symbol = conversion === 'i' ? monetary.int_curr_symbol : monetary.currency_symbol\n     }\n-    var signPosn = neg ? monetary.n_sign_posn : monetary.p_sign_posn\n+    const signPosn = neg ? monetary.n_sign_posn : monetary.p_sign_posn\n \n     // 0: no space between curr. symbol and value\n     // 1: space sep. them unless symb. and sign are adjacent then space sep. them from value\n     // 2: space sep. sign and value unless symb. and sign are adjacent then space separates\n-    var sepBySpace = neg ? monetary.n_sep_by_space : monetary.p_sep_by_space\n+    const sepBySpace = neg ? monetary.n_sep_by_space : monetary.p_sep_by_space\n \n     // p_cs_precedes, n_cs_precedes\n     // positive currency symbol follows value = 0; precedes value = 1\n-    var csPrecedes = neg ? monetary.n_cs_precedes : monetary.p_cs_precedes\n+    const csPrecedes = neg ? monetary.n_cs_precedes : monetary.p_cs_precedes\n \n     // Assemble symbol/value/sign and possible space as appropriate\n     if (flags.indexOf('(') !== -1) {\n@@ -254,18 +254,18 @@ alias:\n     } else {\n       // '+' is default\n       // ''\n-      var posSign = monetary.positive_sign\n+      const posSign = monetary.positive_sign\n       // '-'\n-      var negSign = monetary.negative_sign\n-      var sign = neg ? (negSign) : (posSign)\n-      var otherSign = neg ? (posSign) : (negSign)\n-      var signPadding = ''\n+      const negSign = monetary.negative_sign\n+      const sign = neg ? (negSign) : (posSign)\n+      const otherSign = neg ? (posSign) : (negSign)\n+      let signPadding = ''\n       if (signPosn) {\n         // has a sign\n         signPadding = new Array(otherSign.length - sign.length + 1).join(' ')\n       }\n \n-      var valueAndCS = ''\n+      let valueAndCS = ''\n       switch (signPosn) {\n         // 0: parentheses surround value and curr. symbol;\n         // 1: sign precedes them;\n@@ -307,7 +307,7 @@ alias:\n       }\n     }\n \n-    var padding = width - repl.length\n+    let padding = width - repl.length\n     if (padding > 0) {\n       padding = new Array(padding + 1).join(' ')\n       // @todo: How does p_sep_by_space affect the count if there is a space?\n", "diff --git a/website/source/php/strings/nl2br.html b/website/source/php/strings/nl2br.html\nindex 5a0e62108..9e69f45c1 100644\n--- a/website/source/php/strings/nl2br.html\n+++ b/website/source/php/strings/nl2br.html\n@@ -33,7 +33,8 @@ layout: function\n title: PHP's nl2br in JavaScript\n description: >-\n   Here\u2019s what our current JavaScript equivalent to <a\n-  href=\"https://php.net/manual/en/function.nl2br.php\">PHP's nl2br</a> looks like.\n+  href=\"https://php.net/manual/en/function.nl2br.php\">PHP's nl2br</a> looks\n+  like.\n function: nl2br\n category: strings\n language: php\n@@ -71,7 +72,7 @@ alias:\n   }\n \n   // Adjust comment to avoid issue on locutus.io display\n-  var breakTag = (isXhtml || typeof isXhtml === 'undefined') ? '<br ' + '/>' : '<br>'\n+  const breakTag = (isXhtml || typeof isXhtml === 'undefined') ? '<br ' + '/>' : '<br>'\n \n   return (str + '')\n     .replace(/(\\r\\n|\\n\\r|\\r|\\n)/g, breakTag + '$1')\n", "diff --git a/website/source/php/strings/nl_langinfo.html b/website/source/php/strings/nl_langinfo.html\nindex 3acd8eb7f..56dc23d65 100644\n--- a/website/source/php/strings/nl_langinfo.html\n+++ b/website/source/php/strings/nl_langinfo.html\n@@ -15,8 +15,8 @@ layout: function\n title: PHP's nl_langinfo in JavaScript\n description: >-\n   Here\u2019s what our current JavaScript equivalent to <a\n-  href=\"https://php.net/manual/en/function.nl-langinfo.php\">PHP's nl_langinfo</a>\n-  looks like.\n+  href=\"https://php.net/manual/en/function.nl-langinfo.php\">PHP's\n+  nl_langinfo</a> looks like.\n function: nl_langinfo\n category: strings\n language: php\n@@ -33,16 +33,16 @@ alias:\n   //   example 1: nl_langinfo('DAY_1')\n   //   returns 1: 'Sunday'\n \n-  var setlocale = require('../strings/setlocale')\n+  const setlocale = require('../strings/setlocale')\n \n   setlocale('LC_ALL', 0) // Ensure locale data is available\n \n-  var $global = (typeof window !== 'undefined' ? window : global)\n+  const $global = (typeof window !== 'undefined' ? window : global)\n   $global.$locutus = $global.$locutus || {}\n-  var $locutus = $global.$locutus\n+  const $locutus = $global.$locutus\n   $locutus.php = $locutus.php || {}\n \n-  var loc = $locutus.php.locales[$locutus.php.localeCategories.LC_TIME]\n+  let loc = $locutus.php.locales[$locutus.php.localeCategories.LC_TIME]\n   if (item.indexOf('ABDAY_') === 0) {\n     return loc.LC_TIME.a[parseInt(item.replace(/^ABDAY_/, ''), 10) - 1]\n   } else if (item.indexOf('DAY_') === 0) {\n", "diff --git a/website/source/php/strings/number_format.html b/website/source/php/strings/number_format.html\nindex 168d78bcb..2e8eebbe9 100644\n--- a/website/source/php/strings/number_format.html\n+++ b/website/source/php/strings/number_format.html\n@@ -128,20 +128,27 @@ alias:\n   //  returns 14: '0.00000001'\n \n   number = (number + '').replace(/[^0-9+\\-Ee.]/g, '')\n-  var n = !isFinite(+number) ? 0 : +number\n-  var prec = !isFinite(+decimals) ? 0 : Math.abs(decimals)\n-  var sep = (typeof thousandsSep === 'undefined') ? ',' : thousandsSep\n-  var dec = (typeof decPoint === 'undefined') ? '.' : decPoint\n-  var s = ''\n+  const n = !isFinite(+number) ? 0 : +number\n+  const prec = !isFinite(+decimals) ? 0 : Math.abs(decimals)\n+  const sep = (typeof thousandsSep === 'undefined') ? ',' : thousandsSep\n+  const dec = (typeof decPoint === 'undefined') ? '.' : decPoint\n+  let s = ''\n \n-  var toFixedFix = function (n, prec) {\n-    var k = Math.pow(10, prec)\n-    return '' + (Math.round(n * k) / k)\n-      .toFixed(prec)\n+  const toFixedFix = function (n, prec) {\n+    if (('' + n).indexOf('e') === -1) {\n+      return +(Math.round(n + 'e+' + prec) + 'e-' + prec)\n+    } else {\n+      const arr = ('' + n).split('e')\n+      let sig = ''\n+      if (+arr[1] + prec > 0) {\n+        sig = '+'\n+      }\n+      return (+(Math.round(+arr[0] + 'e' + sig + (+arr[1] + prec)) + 'e-' + prec)).toFixed(prec)\n+    }\n   }\n \n   // @todo: for IE parseFloat(0.55).toFixed(0) = 0;\n-  s = (prec ? toFixedFix(n, prec) : '' + Math.round(n)).split('.')\n+  s = (prec ? toFixedFix(n, prec).toString() : '' + Math.round(n)).split('.')\n   if (s[0].length > 3) {\n     s[0] = s[0].replace(/\\B(?=(?:\\d{3})+(?!\\d))/g, sep)\n   }\n", "diff --git a/website/source/php/strings/ord.html b/website/source/php/strings/ord.html\nindex a127fa4ad..49ff46707 100644\n--- a/website/source/php/strings/ord.html\n+++ b/website/source/php/strings/ord.html\n@@ -45,13 +45,13 @@ alias:\n   //   example 2: ord('\\uD800\\uDC00'); // surrogate pair to create a single Unicode character\n   //   returns 2: 65536\n \n-  var str = string + ''\n-  var code = str.charCodeAt(0)\n+  const str = string + ''\n+  const code = str.charCodeAt(0)\n \n   if (code >= 0xD800 && code <= 0xDBFF) {\n     // High surrogate (could change last hex to 0xDB7F to treat\n     // high private surrogates as single characters)\n-    var hi = code\n+    const hi = code\n     if (str.length === 1) {\n       // This is just a high surrogate with no following low surrogate,\n       // so we return its value;\n@@ -59,7 +59,7 @@ alias:\n       // we could also throw an error as it is not a complete character,\n       // but someone may want to know\n     }\n-    var low = str.charCodeAt(1)\n+    const low = str.charCodeAt(1)\n     return ((hi - 0xD800) * 0x400) + (low - 0xDC00) + 0x10000\n   }\n   if (code >= 0xDC00 && code <= 0xDFFF) {\n", "diff --git a/website/source/php/strings/parse_str.html b/website/source/php/strings/parse_str.html\nindex b0a895942..24280775b 100644\n--- a/website/source/php/strings/parse_str.html\n+++ b/website/source/php/strings/parse_str.html\n@@ -115,29 +115,29 @@ alias:\n   //        example 5: var $result = $arr\n   //        returns 5: {\"a\":{\"0\":\"2\"}}\n \n-  var strArr = String(str).replace(/^&/, '').replace(/&$/, '').split('&')\n-  var sal = strArr.length\n-  var i\n-  var j\n-  var ct\n-  var p\n-  var lastObj\n-  var obj\n-  var chr\n-  var tmp\n-  var key\n-  var value\n-  var postLeftBracketPos\n-  var keys\n-  var keysLen\n-\n-  var _fixStr = function (str) {\n+  const strArr = String(str).replace(/^&/, '').replace(/&$/, '').split('&')\n+  const sal = strArr.length\n+  let i\n+  let j\n+  let ct\n+  let p\n+  let lastObj\n+  let obj\n+  let chr\n+  let tmp\n+  let key\n+  let value\n+  let postLeftBracketPos\n+  let keys\n+  let keysLen\n+\n+  const _fixStr = function (str) {\n     return decodeURIComponent(str.replace(/\\+/g, '%20'))\n   }\n \n-  var $global = (typeof window !== 'undefined' ? window : global)\n+  const $global = (typeof window !== 'undefined' ? window : global)\n   $global.$locutus = $global.$locutus || {}\n-  var $locutus = $global.$locutus\n+  const $locutus = $global.$locutus\n   $locutus.php = $locutus.php || {}\n \n   if (!array) {\n@@ -149,6 +149,10 @@ alias:\n     key = _fixStr(tmp[0])\n     value = (tmp.length < 2) ? '' : _fixStr(tmp[1])\n \n+    if (key.includes('__proto__') || key.includes('constructor') || key.includes('prototype')) {\n+      break\n+    }\n+\n     while (key.charAt(0) === ' ') {\n       key = key.slice(1)\n     }\n", "diff --git a/website/source/php/strings/printf.html b/website/source/php/strings/printf.html\nindex 4fd27c9f8..af2834277 100644\n--- a/website/source/php/strings/printf.html\n+++ b/website/source/php/strings/printf.html\n@@ -38,9 +38,9 @@ alias:\n   //   example 1: printf(\"%01.2f\", 123.1)\n   //   returns 1: 6\n \n-  var sprintf = require('../strings/sprintf')\n-  var echo = require('../strings/echo')\n-  var ret = sprintf.apply(this, arguments)\n+  const sprintf = require('../strings/sprintf')\n+  const echo = require('../strings/echo')\n+  const ret = sprintf.apply(this, arguments)\n   echo(ret)\n   return ret.length\n }\n", "diff --git a/website/source/php/strings/quoted_printable_decode.html b/website/source/php/strings/quoted_printable_decode.html\nindex 0a1db5f6a..0760909de 100644\n--- a/website/source/php/strings/quoted_printable_decode.html\n+++ b/website/source/php/strings/quoted_printable_decode.html\n@@ -61,13 +61,13 @@ alias:\n   //        returns 4: 'Lorem ipsum dolor sit amet#, consectetur adipisicing elit'\n \n   // Decodes all equal signs followed by two hex digits\n-  var RFC2045Decode1 = /=\\r\\n/gm\n+  const RFC2045Decode1 = /=\\r\\n/gm\n \n   // the RFC states against decoding lower case encodings, but following apparent PHP behavior\n-  var RFC2045Decode2IN = /=([0-9A-F]{2})/gim\n+  const RFC2045Decode2IN = /=([0-9A-F]{2})/gim\n   // RFC2045Decode2IN = /=([0-9A-F]{2})/gm,\n \n-  var RFC2045Decode2OUT = function (sMatch, sHex) {\n+  const RFC2045Decode2OUT = function (sMatch, sHex) {\n     return String.fromCharCode(parseInt(sHex, 16))\n   }\n \n", "diff --git a/website/source/php/strings/quoted_printable_encode.html b/website/source/php/strings/quoted_printable_encode.html\nindex 567efb3db..dbcf51adb 100644\n--- a/website/source/php/strings/quoted_printable_encode.html\n+++ b/website/source/php/strings/quoted_printable_encode.html\n@@ -49,16 +49,16 @@ alias:\n   //   returns 3: '012345678901234567890123456789012345678901234567890123456789012345678901234=\\r\\n5'\n   //        test: skip-2\n \n-  var hexChars = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'A', 'B', 'C', 'D', 'E', 'F']\n-  var RFC2045Encode1IN = / \\r\\n|\\r\\n|[^!-<>-~ ]/gm\n-  var RFC2045Encode1OUT = function (sMatch) {\n+  const hexChars = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'A', 'B', 'C', 'D', 'E', 'F']\n+  const RFC2045Encode1IN = / \\r\\n|\\r\\n|[^!-<>-~ ]/gm\n+  const RFC2045Encode1OUT = function (sMatch) {\n     // Encode space before CRLF sequence to prevent spaces from being stripped\n     // Keep hard line breaks intact; CRLF sequences\n     if (sMatch.length > 1) {\n       return sMatch.replace(' ', '=20')\n     }\n     // Encode matching character\n-    var chr = sMatch.charCodeAt(0)\n+    const chr = sMatch.charCodeAt(0)\n     return '=' + hexChars[((chr >>> 4) & 15)] + hexChars[(chr & 15)]\n   }\n \n@@ -67,8 +67,8 @@ alias:\n   // was exactly 76 characters, then a softline would not be needed. PHP currently softbreaks\n   // anyway; so this function replicates PHP.\n \n-  var RFC2045Encode2IN = /.{1,72}(?!\\r\\n)[^=]{0,3}/g\n-  var RFC2045Encode2OUT = function (sMatch) {\n+  const RFC2045Encode2IN = /.{1,72}(?!\\r\\n)[^=]{0,3}/g\n+  const RFC2045Encode2OUT = function (sMatch) {\n     if (sMatch.substr(sMatch.length - 2) === '\\r\\n') {\n       return sMatch\n     }\n", "diff --git a/website/source/php/strings/rtrim.html b/website/source/php/strings/rtrim.html\nindex 1c237d02c..c1761ea2f 100644\n--- a/website/source/php/strings/rtrim.html\n+++ b/website/source/php/strings/rtrim.html\n@@ -23,7 +23,8 @@ layout: function\n title: PHP's rtrim in JavaScript\n description: >-\n   Here\u2019s what our current JavaScript equivalent to <a\n-  href=\"https://php.net/manual/en/function.rtrim.php\">PHP's rtrim</a> looks like.\n+  href=\"https://php.net/manual/en/function.rtrim.php\">PHP's rtrim</a> looks\n+  like.\n function: rtrim\n category: strings\n language: php\n@@ -48,7 +49,7 @@ alias:\n   charlist = !charlist ? ' \\\\s\\u00A0' : (charlist + '')\n     .replace(/([[\\]().?/*{}+$^:])/g, '\\\\$1')\n \n-  var re = new RegExp('[' + charlist + ']+$', 'g')\n+  const re = new RegExp('[' + charlist + ']+$', 'g')\n \n   return (str + '').replace(re, '')\n }\n", "diff --git a/website/source/php/strings/setlocale.html b/website/source/php/strings/setlocale.html\nindex a82bfd2dc..6ddd23acb 100644\n--- a/website/source/php/strings/setlocale.html\n+++ b/website/source/php/strings/setlocale.html\n@@ -60,20 +60,20 @@ alias:\n   //   example 1: setlocale('LC_ALL', 'en_US')\n   //   returns 1: 'en_US'\n \n-  var getenv = require('../info/getenv')\n+  const getenv = require('../info/getenv')\n \n-  var categ = ''\n-  var cats = []\n-  var i = 0\n+  let categ = ''\n+  const cats = []\n+  let i = 0\n \n-  var _copy = function _copy (orig) {\n+  const _copy = function _copy (orig) {\n     if (orig instanceof RegExp) {\n       return new RegExp(orig)\n     } else if (orig instanceof Date) {\n       return new Date(orig)\n     }\n-    var newObj = {}\n-    for (var i in orig) {\n+    const newObj = {}\n+    for (const i in orig) {\n       if (typeof orig[i] === 'object') {\n         newObj[i] = _copy(orig[i])\n       } else {\n@@ -97,18 +97,18 @@ alias:\n   //   // e.g., Japanese\n   //   return 0\n   // }\n-  var _nplurals2a = function (n) {\n+  const _nplurals2a = function (n) {\n     // e.g., English\n     return n !== 1 ? 1 : 0\n   }\n-  var _nplurals2b = function (n) {\n+  const _nplurals2b = function (n) {\n     // e.g., French\n     return n > 1 ? 1 : 0\n   }\n \n-  var $global = (typeof window !== 'undefined' ? window : global)\n+  const $global = (typeof window !== 'undefined' ? window : global)\n   $global.$locutus = $global.$locutus || {}\n-  var $locutus = $global.$locutus\n+  const $locutus = $global.$locutus\n   $locutus.php = $locutus.php || {}\n \n   // Reconcile Windows vs. *nix locale names?\n@@ -122,12 +122,12 @@ alias:\n     $locutus.php.locales = {}\n \n     $locutus.php.locales.en = {\n-      'LC_COLLATE': function (str1, str2) {\n+      LC_COLLATE: function (str1, str2) {\n         // @todo: This one taken from strcmp, but need for other locales; we don't use localeCompare\n         // since its locale is not settable\n         return (str1 === str2) ? 0 : ((str1 > str2) ? 1 : -1)\n       },\n-      'LC_CTYPE': {\n+      LC_CTYPE: {\n         // Need to change any of these for English as opposed to C?\n         an: /^[A-Za-z\\d]+$/g,\n         al: /^[A-Za-z]+$/g,\n@@ -145,7 +145,7 @@ alias:\n         lower: 'abcdefghijklmnopqrstuvwxyz',\n         upper: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'\n       },\n-      'LC_TIME': {\n+      LC_TIME: {\n         // Comments include nl_langinfo() constant equivalents and any\n         // changes from Blues' implementation\n         a: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],\n@@ -182,7 +182,7 @@ alias:\n       },\n       // Assuming distinction between numeric and monetary is thus:\n       // See below for C locale\n-      'LC_MONETARY': {\n+      LC_MONETARY: {\n         // based on Windows \"english\" (English_United States.1252) locale\n         int_curr_symbol: 'USD',\n         currency_symbol: '$',\n@@ -213,13 +213,13 @@ alias:\n         // succeeds curr. symbol\n         n_sign_posn: 0 // see p_sign_posn\n       },\n-      'LC_NUMERIC': {\n+      LC_NUMERIC: {\n         // based on Windows \"english\" (English_United States.1252) locale\n         decimal_point: '.',\n         thousands_sep: ',',\n         grouping: [3] // see mon_grouping, but for non-monetary values (use thousands_sep)\n       },\n-      'LC_MESSAGES': {\n+      LC_MESSAGES: {\n         YESEXPR: '^[yY].*',\n         NOEXPR: '^[nN].*',\n         YESSTR: '',\n@@ -303,9 +303,9 @@ alias:\n     $locutus.php.locale = 'en_US'\n     // Try to establish the locale via the `window` global\n     if (typeof window !== 'undefined' && window.document) {\n-      var d = window.document\n-      var NS_XHTML = 'https://www.w3.org/1999/xhtml'\n-      var NS_XML = 'https://www.w3.org/XML/1998/namespace'\n+      const d = window.document\n+      const NS_XHTML = 'https://www.w3.org/1999/xhtml'\n+      const NS_XML = 'https://www.w3.org/XML/1998/namespace'\n       if (d.getElementsByTagNameNS &&\n         d.getElementsByTagNameNS(NS_XHTML, 'html')[0]) {\n         if (d.getElementsByTagNameNS(NS_XHTML, 'html')[0].getAttributeNS &&\n@@ -333,18 +333,18 @@ alias:\n \n   if (!$locutus.php.localeCategories) {\n     $locutus.php.localeCategories = {\n-      'LC_COLLATE': $locutus.php.locale,\n+      LC_COLLATE: $locutus.php.locale,\n       // for string comparison, see strcoll()\n-      'LC_CTYPE': $locutus.php.locale,\n+      LC_CTYPE: $locutus.php.locale,\n       // for character classification and conversion, for example strtoupper()\n-      'LC_MONETARY': $locutus.php.locale,\n+      LC_MONETARY: $locutus.php.locale,\n       // for localeconv()\n-      'LC_NUMERIC': $locutus.php.locale,\n+      LC_NUMERIC: $locutus.php.locale,\n       // for decimal separator (See also localeconv())\n-      'LC_TIME': $locutus.php.locale,\n+      LC_TIME: $locutus.php.locale,\n       // for date and time formatting with strftime()\n       // for system responses (available if PHP was compiled with libintl):\n-      'LC_MESSAGES': $locutus.php.locale\n+      LC_MESSAGES: $locutus.php.locale\n     }\n   }\n \n", "diff --git a/website/source/php/strings/sha1.html b/website/source/php/strings/sha1.html\nindex f40a16398..072421273 100644\n--- a/website/source/php/strings/sha1.html\n+++ b/website/source/php/strings/sha1.html\n@@ -51,10 +51,10 @@ alias:\n   //   example 1: sha1('Kevin van Zonneveld')\n   //   returns 1: '54916d2e62f65b3afa6e192e6a601cdbe5cb5897'\n \n-  var hash\n+  let hash\n   try {\n-    var crypto = require('crypto')\n-    var sha1sum = crypto.createHash('sha1')\n+    const crypto = require('crypto')\n+    const sha1sum = crypto.createHash('sha1')\n     sha1sum.update(str)\n     hash = sha1sum.digest('hex')\n   } catch (e) {\n@@ -65,15 +65,15 @@ alias:\n     return hash\n   }\n \n-  var _rotLeft = function (n, s) {\n-    var t4 = (n << s) | (n >>> (32 - s))\n+  const _rotLeft = function (n, s) {\n+    const t4 = (n << s) | (n >>> (32 - s))\n     return t4\n   }\n \n-  var _cvtHex = function (val) {\n-    var str = ''\n-    var i\n-    var v\n+  const _cvtHex = function (val) {\n+    let str = ''\n+    let i\n+    let v\n \n     for (i = 7; i >= 0; i--) {\n       v = (val >>> (i * 4)) & 0x0f\n@@ -82,22 +82,22 @@ alias:\n     return str\n   }\n \n-  var blockstart\n-  var i, j\n-  var W = new Array(80)\n-  var H0 = 0x67452301\n-  var H1 = 0xEFCDAB89\n-  var H2 = 0x98BADCFE\n-  var H3 = 0x10325476\n-  var H4 = 0xC3D2E1F0\n-  var A, B, C, D, E\n-  var temp\n+  let blockstart\n+  let i, j\n+  const W = new Array(80)\n+  let H0 = 0x67452301\n+  let H1 = 0xEFCDAB89\n+  let H2 = 0x98BADCFE\n+  let H3 = 0x10325476\n+  let H4 = 0xC3D2E1F0\n+  let A, B, C, D, E\n+  let temp\n \n   // utf8_encode\n   str = unescape(encodeURIComponent(str))\n-  var strLen = str.length\n+  const strLen = str.length\n \n-  var wordArray = []\n+  const wordArray = []\n   for (i = 0; i < strLen - 3; i += 4) {\n     j = str.charCodeAt(i) << 24 |\n       str.charCodeAt(i + 1) << 16 |\n", "diff --git a/website/source/php/strings/sha1_file.html b/website/source/php/strings/sha1_file.html\nindex c429d1f1a..caa12a754 100644\n--- a/website/source/php/strings/sha1_file.html\n+++ b/website/source/php/strings/sha1_file.html\n@@ -47,9 +47,9 @@ alias:\n   //   example 1: sha1_file('test/never-change.txt')\n   //   returns 1: '0ea65a1f4b4d69712affc58240932f3eb8a2af66'\n \n-  var fileGetContents = require('../filesystem/file_get_contents')\n-  var sha1 = require('../strings/sha1')\n-  var buf = fileGetContents(str_filename)\n+  const fileGetContents = require('../filesystem/file_get_contents')\n+  const sha1 = require('../strings/sha1')\n+  const buf = fileGetContents(str_filename)\n \n   if (buf === false) {\n     return false\n", "diff --git a/website/source/php/strings/similar_text.html b/website/source/php/strings/similar_text.html\nindex 5267df025..e927a07cb 100644\n--- a/website/source/php/strings/similar_text.html\n+++ b/website/source/php/strings/similar_text.html\n@@ -59,15 +59,15 @@ alias:\n   first += ''\n   second += ''\n \n-  var pos1 = 0\n-  var pos2 = 0\n-  var max = 0\n-  var firstLength = first.length\n-  var secondLength = second.length\n-  var p\n-  var q\n-  var l\n-  var sum\n+  let pos1 = 0\n+  let pos2 = 0\n+  let max = 0\n+  const firstLength = first.length\n+  const secondLength = second.length\n+  let p\n+  let q\n+  let l\n+  let sum\n \n   for (p = 0; p < firstLength; p++) {\n     for (q = 0; q < secondLength; q++) {\n@@ -93,7 +93,7 @@ alias:\n       sum += similar_text(\n         first.substr(pos1 + max, firstLength - pos1 - max),\n         second.substr(pos2 + max,\n-        secondLength - pos2 - max))\n+          secondLength - pos2 - max))\n     }\n   }\n \n", "diff --git a/website/source/php/strings/soundex.html b/website/source/php/strings/soundex.html\nindex fb5df820d..d1d77dda9 100644\n--- a/website/source/php/strings/soundex.html\n+++ b/website/source/php/strings/soundex.html\n@@ -64,8 +64,8 @@ alias:\n     return ''\n   }\n \n-  var sdx = [0, 0, 0, 0]\n-  var m = {\n+  const sdx = [0, 0, 0, 0]\n+  const m = {\n     B: 1,\n     F: 1,\n     P: 1,\n@@ -85,11 +85,11 @@ alias:\n     N: 5,\n     R: 6\n   }\n-  var i = 0\n-  var j\n-  var s = 0\n-  var c\n-  var p\n+  let i = 0\n+  let j\n+  let s = 0\n+  let c\n+  let p\n \n   while ((c = str.charAt(i++)) && s < 4) {\n     if ((j = m[c])) {\n", "diff --git a/website/source/php/strings/split.html b/website/source/php/strings/split.html\nindex f85d663db..09524a83b 100644\n--- a/website/source/php/strings/split.html\n+++ b/website/source/php/strings/split.html\n@@ -15,7 +15,8 @@ layout: function\n title: PHP's split in JavaScript\n description: >-\n   Here\u2019s what our current JavaScript equivalent to <a\n-  href=\"https://php.net/manual/en/function.split.php\">PHP's split</a> looks like.\n+  href=\"https://php.net/manual/en/function.split.php\">PHP's split</a> looks\n+  like.\n function: split\n category: strings\n language: php\n@@ -32,7 +33,7 @@ alias:\n   //   example 1: split(' ', 'Kevin van Zonneveld')\n   //   returns 1: ['Kevin', 'van', 'Zonneveld']\n \n-  var explode = require('../strings/explode')\n+  const explode = require('../strings/explode')\n   return explode(delimiter, string)\n }\n {% endcodeblock %}\n\\ No newline at end of file\n", "diff --git a/website/source/php/strings/sprintf.html b/website/source/php/strings/sprintf.html\nindex 380ad948a..3e20d3fa2 100644\n--- a/website/source/php/strings/sprintf.html\n+++ b/website/source/php/strings/sprintf.html\n@@ -87,21 +87,21 @@ alias:\n   //   example 9: sprintf('%% %2$d', 1, 2)\n   //   returns 9: '% 2'\n \n-  var regex = /%%|%(?:(\\d+)\\$)?((?:[-+#0 ]|'[\\s\\S])*)(\\d+)?(?:\\.(\\d*))?([\\s\\S])/g\n-  var args = arguments\n-  var i = 0\n-  var format = args[i++]\n+  const regex = /%%|%(?:(\\d+)\\$)?((?:[-+#0 ]|'[\\s\\S])*)(\\d+)?(?:\\.(\\d*))?([\\s\\S])/g\n+  const args = arguments\n+  let i = 0\n+  const format = args[i++]\n \n-  var _pad = function (str, len, chr, leftJustify) {\n+  const _pad = function (str, len, chr, leftJustify) {\n     if (!chr) {\n       chr = ' '\n     }\n-    var padding = (str.length >= len) ? '' : new Array(1 + len - str.length >>> 0).join(chr)\n+    const padding = (str.length >= len) ? '' : new Array(1 + len - str.length >>> 0).join(chr)\n     return leftJustify ? str + padding : padding + str\n   }\n \n-  var justify = function (value, prefix, leftJustify, minWidth, padChar) {\n-    var diff = minWidth - value.length\n+  const justify = function (value, prefix, leftJustify, minWidth, padChar) {\n+    const diff = minWidth - value.length\n     if (diff > 0) {\n       // when padding with zeros\n       // on the left side\n@@ -119,15 +119,15 @@ alias:\n     return value\n   }\n \n-  var _formatBaseX = function (value, base, leftJustify, minWidth, precision, padChar) {\n+  const _formatBaseX = function (value, base, leftJustify, minWidth, precision, padChar) {\n     // Note: casts negative numbers to positive ones\n-    var number = value >>> 0\n+    const number = value >>> 0\n     value = _pad(number.toString(base), precision || 0, '0', false)\n     return justify(value, '', leftJustify, minWidth, padChar)\n   }\n \n   // _formatString()\n-  var _formatString = function (value, leftJustify, minWidth, precision, customPadChar) {\n+  const _formatString = function (value, leftJustify, minWidth, precision, customPadChar) {\n     if (precision !== null && precision !== undefined) {\n       value = value.slice(0, precision)\n     }\n@@ -135,18 +135,18 @@ alias:\n   }\n \n   // doFormat()\n-  var doFormat = function (substring, argIndex, modifiers, minWidth, precision, specifier) {\n-    var number, prefix, method, textTransform, value\n+  const doFormat = function (substring, argIndex, modifiers, minWidth, precision, specifier) {\n+    let number, prefix, method, textTransform, value\n \n     if (substring === '%%') {\n       return '%'\n     }\n \n     // parse modifiers\n-    var padChar = ' ' // pad with spaces by default\n-    var leftJustify = false\n-    var positiveNumberPrefix = ''\n-    var j, l\n+    let padChar = ' ' // pad with spaces by default\n+    let leftJustify = false\n+    let positiveNumberPrefix = ''\n+    let j, l\n \n     for (j = 0, l = modifiers.length; j < l; j++) {\n       switch (modifiers.charAt(j)) {\n", "diff --git a/website/source/php/strings/sscanf.html b/website/source/php/strings/sscanf.html\nindex dffd9743b..ebb6195b8 100644\n--- a/website/source/php/strings/sscanf.html\n+++ b/website/source/php/strings/sscanf.html\n@@ -46,12 +46,12 @@ alias:\n   //   example 3: sscanf(\"10--20\", \"%2$d--%1$d\") // Must escape '$' in PHP, but not JS\n   //   returns 3: [20, 10]\n \n-  var retArr = []\n-  var _NWS = /\\S/\n-  var args = arguments\n-  var digit\n+  const retArr = []\n+  const _NWS = /\\S/\n+  const args = arguments\n+  let digit\n \n-  var _setExtraConversionSpecs = function (offset) {\n+  const _setExtraConversionSpecs = function (offset) {\n     // Since a mismatched character sets us off track from future\n     // legitimate finds, we just scan\n     // to the end for any other conversion specifications (besides a percent literal),\n@@ -61,10 +61,10 @@ alias:\n     // Do not allow % in last char. class\n     // var matches = format.match(/%[+-]?([ 0]|'.)?-?\\d*(\\.\\d+)?[bcdeufFosxX]/g);\n     // Do not allow % in last char. class:\n-    var matches = format.slice(offset).match(/%[cdeEufgosxX]/g)\n+    const matches = format.slice(offset).match(/%[cdeEufgosxX]/g)\n     // b, F,G give errors in PHP, but 'g', though also disallowed, doesn't\n     if (matches) {\n-      var lgth = matches.length\n+      let lgth = matches.length\n       while (lgth--) {\n         retArr.push(null)\n       }\n@@ -82,20 +82,20 @@ alias:\n     return i\n   }\n \n-  var _addNext = function (j, regex, cb) {\n+  const _addNext = function (j, regex, cb) {\n     if (assign) {\n-      var remaining = str.slice(j)\n-      var check = width ? remaining.substr(0, width) : remaining\n-      var match = regex.exec(check)\n+      const remaining = str.slice(j)\n+      const check = width ? remaining.substr(0, width) : remaining\n+      const match = regex.exec(check)\n       // @todo: Make this more readable\n-      var key = digit !== undefined\n+      const key = digit !== undefined\n         ? digit\n         : retArr.length\n-      var testNull = retArr[key] = match\n-          ? (cb\n+      const testNull = retArr[key] = match\n+        ? (cb\n             ? cb.apply(null, match)\n             : match[0])\n-          : null\n+        : null\n       if (testNull === null) {\n         throw new Error('No match in string')\n       }\n@@ -109,7 +109,7 @@ alias:\n   }\n \n   // PROCESS\n-  for (var i = 0, j = 0; i < format.length; i++) {\n+  for (let i = 0, j = 0; i < format.length; i++) {\n     var width = 0\n     var assign = true\n \n@@ -129,13 +129,13 @@ alias:\n       // CHARACTER FOLLOWING PERCENT IS NOT A PERCENT\n \n       // We need 'g' set to get lastIndex\n-      var prePattern = new RegExp('^(?:(\\\\d+)\\\\$)?(\\\\*)?(\\\\d*)([hlL]?)', 'g')\n+      const prePattern = new RegExp('^(?:(\\\\d+)\\\\$)?(\\\\*)?(\\\\d*)([hlL]?)', 'g')\n \n-      var preConvs = prePattern.exec(format.slice(i + 1))\n+      const preConvs = prePattern.exec(format.slice(i + 1))\n \n-      var tmpDigit = digit\n+      const tmpDigit = digit\n       if (tmpDigit && preConvs[1] === undefined) {\n-        var msg = 'All groups in sscanf() must be expressed as numeric if '\n+        let msg = 'All groups in sscanf() must be expressed as numeric if '\n         msg += 'any have already been used'\n         throw new Error(msg)\n       }\n@@ -143,7 +143,7 @@ alias:\n \n       assign = !preConvs[2]\n       width = parseInt(preConvs[3], 10)\n-      var sizeCode = preConvs[4]\n+      const sizeCode = preConvs[4]\n       i += prePattern.lastIndex\n \n       // @todo: Does PHP do anything with these? Seems not to matter\n@@ -191,7 +191,7 @@ alias:\n             // Integer with base detection (Equivalent of 'd', but base 0 instead of 10)\n             var pattern = /([+-])?(?:(?:0x([\\da-fA-F]+))|(?:0([0-7]+))|(\\d+))/\n             j = _addNext(j, pattern, function (num, sign, hex,\n-            oct, dec) {\n+              oct, dec) {\n               return hex ? parseInt(num, 16) : oct ? parseInt(num, 8) : parseInt(num, 10)\n             })\n             break\n@@ -212,7 +212,7 @@ alias:\n             // Optionally signed decimal integer\n             j = _addNext(j, /([+-])?(?:0*)(\\d+)/, function (num, sign, dec) {\n               // Ignores initial zeroes, unlike %i and parseInt()\n-              var decInt = parseInt((sign || '') + dec, 10)\n+              const decInt = parseInt((sign || '') + dec, 10)\n               if (decInt < 0) {\n                 // PHP also won't allow less than -2147483648\n                 // integer overflow with negative\n@@ -242,7 +242,7 @@ alias:\n             // We won't deal with integer overflows due to signs\n             j = _addNext(j, /([+-])?(?:0*)(\\d+)/, function (num, sign, dec) {\n               // Ignores initial zeroes, unlike %i and parseInt()\n-              var decInt = parseInt(dec, 10)\n+              const decInt = parseInt(dec, 10)\n               if (sign === '-') {\n                 // PHP also won't allow greater than 4294967295\n                 // integer overflow with negative\n@@ -253,7 +253,7 @@ alias:\n             })\n             break\n           case 'o':\n-              // Octal integer // @todo: add overflows as above?\n+            // Octal integer // @todo: add overflows as above?\n             j = _addNext(j, /([+-])?(?:0([0-7]+))/, function (num, sign, oct) {\n               return parseInt(num, 8)\n             })\n@@ -286,7 +286,7 @@ alias:\n       }\n       ++i\n     } else if (format.charAt(i) !== str.charAt(j)) {\n-        // @todo: Double-check i whitespace ignored in string and/or formats\n+      // @todo: Double-check i whitespace ignored in string and/or formats\n       _NWS.lastIndex = 0\n       if ((_NWS)\n         .test(str.charAt(j)) || str.charAt(j) === '') {\n", "diff --git a/website/source/php/strings/str_getcsv.html b/website/source/php/strings/str_getcsv.html\nindex d767bdcdf..4c826e5fa 100644\n--- a/website/source/php/strings/str_getcsv.html\n+++ b/website/source/php/strings/str_getcsv.html\n@@ -54,15 +54,15 @@ alias:\n     Should also test newlines within\n   */\n \n-  var i\n-  var inpLen\n-  var output = []\n-  var _backwards = function (str) {\n+  let i\n+  let inpLen\n+  const output = []\n+  const _backwards = function (str) {\n     // We need to go backwards to simulate negative look-behind (don't split on\n     // an escaped enclosure even if followed by the delimiter and another enclosure mark)\n     return str.split('').reverse().join('')\n   }\n-  var _pq = function (str) {\n+  const _pq = function (str) {\n     // preg_quote()\n     return String(str).replace(/([\\\\.+*?[^\\]$(){}=!<>|:])/g, '\\\\$1')\n   }\n@@ -70,8 +70,8 @@ alias:\n   delimiter = delimiter || ','\n   enclosure = enclosure || '\"'\n   escape = escape || '\\\\'\n-  var pqEnc = _pq(enclosure)\n-  var pqEsc = _pq(escape)\n+  const pqEnc = _pq(enclosure)\n+  const pqEsc = _pq(escape)\n \n   input = input\n     .replace(new RegExp('^\\\\s*' + pqEnc), '')\n", "diff --git a/website/source/php/strings/str_ireplace.html b/website/source/php/strings/str_ireplace.html\nindex 228d76098..200fcabd9 100644\n--- a/website/source/php/strings/str_ireplace.html\n+++ b/website/source/php/strings/str_ireplace.html\n@@ -56,21 +56,21 @@ alias:\n   //   example 2: var $result = $countObj.value\n   //   returns 2: 1\n \n-  var i = 0\n-  var j = 0\n-  var temp = ''\n-  var repl = ''\n-  var sl = 0\n-  var fl = 0\n-  var f = ''\n-  var r = ''\n-  var s = ''\n-  var ra = ''\n-  var otemp = ''\n-  var oi = ''\n-  var ofjl = ''\n-  var os = subject\n-  var osa = Object.prototype.toString.call(os) === '[object Array]'\n+  let i = 0\n+  let j = 0\n+  let temp = ''\n+  let repl = ''\n+  let sl = 0\n+  let fl = 0\n+  let f = ''\n+  let r = ''\n+  let s = ''\n+  let ra = ''\n+  let otemp = ''\n+  let oi = ''\n+  let ofjl = ''\n+  let os = subject\n+  const osa = Object.prototype.toString.call(os) === '[object Array]'\n   // var sa = ''\n \n   if (typeof (search) === 'object') {\n", "diff --git a/website/source/php/strings/str_pad.html b/website/source/php/strings/str_pad.html\nindex ba9d59ba4..d34c1918f 100644\n--- a/website/source/php/strings/str_pad.html\n+++ b/website/source/php/strings/str_pad.html\n@@ -46,11 +46,11 @@ alias:\n   //   example 2: str_pad('Kevin van Zonneveld', 30, '-', 'STR_PAD_BOTH')\n   //   returns 2: '------Kevin van Zonneveld-----'\n \n-  var half = ''\n-  var padToGo\n+  let half = ''\n+  let padToGo\n \n-  var _strPadRepeater = function (s, len) {\n-    var collect = ''\n+  const _strPadRepeater = function (s, len) {\n+    let collect = ''\n \n     while (collect.length < len) {\n       collect += s\n", "diff --git a/website/source/php/strings/str_repeat.html b/website/source/php/strings/str_repeat.html\nindex a9f354b13..44a9e3864 100644\n--- a/website/source/php/strings/str_repeat.html\n+++ b/website/source/php/strings/str_repeat.html\n@@ -38,7 +38,7 @@ alias:\n   //   example 1: str_repeat('-=', 10)\n   //   returns 1: '-=-=-=-=-=-=-=-=-=-='\n \n-  var y = ''\n+  let y = ''\n   while (true) {\n     if (multiplier & 1) {\n       y += input\n", "diff --git a/website/source/php/strings/str_replace.html b/website/source/php/strings/str_replace.html\nindex 4c995d512..7c742d8d2 100644\n--- a/website/source/php/strings/str_replace.html\n+++ b/website/source/php/strings/str_replace.html\n@@ -48,8 +48,8 @@ layout: function\n title: PHP's str_replace in JavaScript\n description: >-\n   Here\u2019s what our current JavaScript equivalent to <a\n-  href=\"https://php.net/manual/en/function.str-replace.php\">PHP's str_replace</a>\n-  looks like.\n+  href=\"https://php.net/manual/en/function.str-replace.php\">PHP's\n+  str_replace</a> looks like.\n function: str_replace\n category: strings\n language: php\n@@ -91,22 +91,22 @@ alias:\n   //   example 4: var $result = countObj.value\n   //   returns 4: 4\n \n-  var i = 0\n-  var j = 0\n-  var temp = ''\n-  var repl = ''\n-  var sl = 0\n-  var fl = 0\n-  var f = [].concat(search)\n-  var r = [].concat(replace)\n-  var s = subject\n-  var ra = Object.prototype.toString.call(r) === '[object Array]'\n-  var sa = Object.prototype.toString.call(s) === '[object Array]'\n+  let i = 0\n+  let j = 0\n+  let temp = ''\n+  let repl = ''\n+  let sl = 0\n+  let fl = 0\n+  const f = [].concat(search)\n+  let r = [].concat(replace)\n+  let s = subject\n+  let ra = Object.prototype.toString.call(r) === '[object Array]'\n+  const sa = Object.prototype.toString.call(s) === '[object Array]'\n   s = [].concat(s)\n \n-  var $global = (typeof window !== 'undefined' ? window : global)\n+  const $global = (typeof window !== 'undefined' ? window : global)\n   $global.$locutus = $global.$locutus || {}\n-  var $locutus = $global.$locutus\n+  const $locutus = $global.$locutus\n   $locutus.php = $locutus.php || {}\n \n   if (typeof (search) === 'object' && typeof (replace) === 'string') {\n", "diff --git a/website/source/php/strings/str_shuffle.html b/website/source/php/strings/str_shuffle.html\nindex 5396f9a51..bb2d43ca9 100644\n--- a/website/source/php/strings/str_shuffle.html\n+++ b/website/source/php/strings/str_shuffle.html\n@@ -17,8 +17,8 @@ layout: function\n title: PHP's str_shuffle in JavaScript\n description: >-\n   Here\u2019s what our current JavaScript equivalent to <a\n-  href=\"https://php.net/manual/en/function.str-shuffle.php\">PHP's str_shuffle</a>\n-  looks like.\n+  href=\"https://php.net/manual/en/function.str-shuffle.php\">PHP's\n+  str_shuffle</a> looks like.\n function: str_shuffle\n category: strings\n language: php\n@@ -46,9 +46,9 @@ alias:\n \n   str += ''\n \n-  var newStr = ''\n-  var rand\n-  var i = str.length\n+  let newStr = ''\n+  let rand\n+  let i = str.length\n \n   while (i) {\n     rand = Math.floor(Math.random() * i)\n", "diff --git a/website/source/php/strings/str_split.html b/website/source/php/strings/str_split.html\nindex 1ad9b215c..959519c00 100644\n--- a/website/source/php/strings/str_split.html\n+++ b/website/source/php/strings/str_split.html\n@@ -55,9 +55,9 @@ alias:\n   }\n \n   string += ''\n-  var chunks = []\n-  var pos = 0\n-  var len = string.length\n+  const chunks = []\n+  let pos = 0\n+  const len = string.length\n \n   while (pos < len) {\n     chunks.push(string.slice(pos, pos += splitLength))\n", "diff --git a/website/source/php/strings/str_word_count.html b/website/source/php/strings/str_word_count.html\nindex c5019a0be..e481c333a 100644\n--- a/website/source/php/strings/str_word_count.html\n+++ b/website/source/php/strings/str_word_count.html\n@@ -66,26 +66,26 @@ alias:\n   //   example 4: str_word_count('hey', 2)\n   //   returns 4: {0: 'hey'}\n \n-  var ctypeAlpha = require('../ctype/ctype_alpha')\n-  var len = str.length\n-  var cl = charlist && charlist.length\n-  var chr = ''\n-  var tmpStr = ''\n-  var i = 0\n-  var c = ''\n-  var wArr = []\n-  var wC = 0\n-  var assoc = {}\n-  var aC = 0\n-  var reg = ''\n-  var match = false\n+  const ctypeAlpha = require('../ctype/ctype_alpha')\n+  const len = str.length\n+  const cl = charlist && charlist.length\n+  let chr = ''\n+  let tmpStr = ''\n+  let i = 0\n+  let c = ''\n+  const wArr = []\n+  let wC = 0\n+  const assoc = {}\n+  let aC = 0\n+  let reg = ''\n+  let match = false\n \n-  var _pregQuote = function (str) {\n+  const _pregQuote = function (str) {\n     return (str + '').replace(/([\\\\.+*?[^\\]$(){}=!<>|:])/g, '\\\\$1')\n   }\n-  var _getWholeChar = function (str, i) {\n+  const _getWholeChar = function (str, i) {\n     // Use for rare cases of non-BMP characters\n-    var code = str.charCodeAt(i)\n+    const code = str.charCodeAt(i)\n     if (code < 0xD800 || code > 0xDFFF) {\n       return str.charAt(i)\n     }\n@@ -95,7 +95,7 @@ alias:\n       if (str.length <= (i + 1)) {\n         throw new Error('High surrogate without following low surrogate')\n       }\n-      var next = str.charCodeAt(i + 1)\n+      const next = str.charCodeAt(i + 1)\n       if (next < 0xDC00 || next > 0xDFFF) {\n         throw new Error('High surrogate without following low surrogate')\n       }\n@@ -105,7 +105,7 @@ alias:\n     if (i === 0) {\n       throw new Error('Low surrogate without preceding high surrogate')\n     }\n-    var prev = str.charCodeAt(i - 1)\n+    const prev = str.charCodeAt(i - 1)\n     if (prev < 0xD800 || prev > 0xDBFF) {\n       // (could change last hex to 0xDB7F to treat high private surrogates as single characters)\n       throw new Error('Low surrogate without preceding high surrogate')\n", "diff --git a/website/source/php/strings/strcasecmp.html b/website/source/php/strings/strcasecmp.html\nindex 7d7b6b30f..17bec31b5 100644\n--- a/website/source/php/strings/strcasecmp.html\n+++ b/website/source/php/strings/strcasecmp.html\n@@ -36,8 +36,8 @@ alias:\n   //   example 1: strcasecmp('Hello', 'hello')\n   //   returns 1: 0\n \n-  var string1 = (fString1 + '').toLowerCase()\n-  var string2 = (fString2 + '').toLowerCase()\n+  const string1 = (fString1 + '').toLowerCase()\n+  const string2 = (fString2 + '').toLowerCase()\n \n   if (string1 > string2) {\n     return 1\n", "diff --git a/website/source/php/strings/strchr.html b/website/source/php/strings/strchr.html\nindex 61fc06fe8..73bb99a26 100644\n--- a/website/source/php/strings/strchr.html\n+++ b/website/source/php/strings/strchr.html\n@@ -37,7 +37,7 @@ alias:\n   //   example 2: strchr('Kevin van Zonneveld', 'van', true)\n   //   returns 2: 'Kevin '\n \n-  var strstr = require('../strings/strstr')\n+  const strstr = require('../strings/strstr')\n   return strstr(haystack, needle, bool)\n }\n {% endcodeblock %}\n\\ No newline at end of file\n", "diff --git a/website/source/php/strings/strcoll.html b/website/source/php/strings/strcoll.html\nindex 8c7f84cb0..22475c4b4 100644\n--- a/website/source/php/strings/strcoll.html\n+++ b/website/source/php/strings/strcoll.html\n@@ -36,16 +36,16 @@ alias:\n   //   example 1: strcoll('a', 'b')\n   //   returns 1: -1\n \n-  var setlocale = require('../strings/setlocale')\n+  const setlocale = require('../strings/setlocale')\n \n-  var $global = (typeof window !== 'undefined' ? window : global)\n+  const $global = (typeof window !== 'undefined' ? window : global)\n   $global.$locutus = $global.$locutus || {}\n-  var $locutus = $global.$locutus\n+  const $locutus = $global.$locutus\n   $locutus.php = $locutus.php || {}\n \n   setlocale('LC_ALL', 0) // ensure setup of localization variables takes place\n \n-  var cmp = $locutus.php.locales[$locutus.php.localeCategories.LC_COLLATE].LC_COLLATE\n+  const cmp = $locutus.php.locales[$locutus.php.localeCategories.LC_COLLATE].LC_COLLATE\n \n   return cmp(str1, str2)\n }\n", "diff --git a/website/source/php/strings/strip_tags.html b/website/source/php/strings/strip_tags.html\nindex 37810830d..0ec414d1e 100644\n--- a/website/source/php/strings/strip_tags.html\n+++ b/website/source/php/strings/strip_tags.html\n@@ -107,18 +107,21 @@ alias:\n   //   example 9: strip_tags(4)\n   //   returns 9: '4'\n \n-  var _phpCastString = require('../_helpers/_phpCastString')\n+  const _phpCastString = require('../_helpers/_phpCastString')\n \n   // making sure the allowed arg is a string containing only tags in lowercase (<a><b><c>)\n   allowed = (((allowed || '') + '').toLowerCase().match(/<[a-z][a-z0-9]*>/g) || []).join('')\n \n-  var tags = /<\\/?([a-z][a-z0-9]*)\\b[^>]*>/gi\n-  var commentsAndPhpTags = /<!--[\\s\\S]*?-->|<\\?(?:php)?[\\s\\S]*?\\?>/gi\n+  const tags = /<\\/?([a-z0-9]*)\\b[^>]*>?/gi\n+  const commentsAndPhpTags = /<!--[\\s\\S]*?-->|<\\?(?:php)?[\\s\\S]*?\\?>/gi\n+\n+  let after = _phpCastString(input)\n+  // removes tha '<' char at the end of the string to replicate PHP's behaviour\n+  after = (after.substring(after.length - 1) === '<') ? after.substring(0, after.length - 1) : after\n \n-  var after = _phpCastString(input)\n   // recursively remove tags to ensure that the returned string doesn't contain forbidden tags after previous passes (e.g. '<<bait/>switch/>')\n   while (true) {\n-    var before = after\n+    const before = after\n     after = before.replace(commentsAndPhpTags, '').replace(tags, function ($0, $1) {\n       return allowed.indexOf('<' + $1.toLowerCase() + '>') > -1 ? $0 : ''\n     })\n", "diff --git a/website/source/php/strings/stripos.html b/website/source/php/strings/stripos.html\nindex d1f5e08c7..22b284c71 100644\n--- a/website/source/php/strings/stripos.html\n+++ b/website/source/php/strings/stripos.html\n@@ -36,9 +36,9 @@ alias:\n   //   example 1: stripos('ABC', 'a')\n   //   returns 1: 0\n \n-  var haystack = (fHaystack + '').toLowerCase()\n-  var needle = (fNeedle + '').toLowerCase()\n-  var index = 0\n+  const haystack = (fHaystack + '').toLowerCase()\n+  const needle = (fNeedle + '').toLowerCase()\n+  let index = 0\n \n   if ((index = haystack.indexOf(needle, fOffset)) !== -1) {\n     return index\n", "diff --git a/website/source/php/strings/stristr.html b/website/source/php/strings/stristr.html\nindex ebd5ee720..be052df80 100644\n--- a/website/source/php/strings/stristr.html\n+++ b/website/source/php/strings/stristr.html\n@@ -40,7 +40,7 @@ alias:\n   //   example 2: stristr('Kevin van Zonneveld', 'VAN', true)\n   //   returns 2: 'Kevin '\n \n-  var pos = 0\n+  let pos = 0\n \n   haystack += ''\n   pos = haystack.toLowerCase()\n", "diff --git a/website/source/php/strings/strlen.html b/website/source/php/strings/strlen.html\nindex 96ec46553..1302100fb 100644\n--- a/website/source/php/strings/strlen.html\n+++ b/website/source/php/strings/strlen.html\n@@ -66,20 +66,20 @@ alias:\n   //   example 2: strlen('A\\ud87e\\udc04Z')\n   //   returns 2: 3\n \n-  var str = string + ''\n+  const str = string + ''\n \n-  var iniVal = (typeof require !== 'undefined' ? require('../info/ini_get')('unicode.semantics') : undefined) || 'off'\n+  const iniVal = (typeof require !== 'undefined' ? require('../info/ini_get')('unicode.semantics') : undefined) || 'off'\n   if (iniVal === 'off') {\n     return str.length\n   }\n \n-  var i = 0\n-  var lgth = 0\n+  let i = 0\n+  let lgth = 0\n \n-  var getWholeChar = function (str, i) {\n-    var code = str.charCodeAt(i)\n-    var next = ''\n-    var prev = ''\n+  const getWholeChar = function (str, i) {\n+    const code = str.charCodeAt(i)\n+    let next = ''\n+    let prev = ''\n     if (code >= 0xD800 && code <= 0xDBFF) {\n       // High surrogate (could change last hex to 0xDB7F to\n       // treat high private surrogates as single characters)\n", "diff --git a/website/source/php/strings/strnatcasecmp.html b/website/source/php/strings/strnatcasecmp.html\nindex e72450bac..211ad5e90 100644\n--- a/website/source/php/strings/strnatcasecmp.html\n+++ b/website/source/php/strings/strnatcasecmp.html\n@@ -55,8 +55,8 @@ alias:\n   //        example 2: strnatcasecmp('1', '10')\n   //        returns 2: -1\n \n-  var strnatcmp = require('../strings/strnatcmp')\n-  var _phpCastString = require('../_helpers/_phpCastString')\n+  const strnatcmp = require('../strings/strnatcmp')\n+  const _phpCastString = require('../_helpers/_phpCastString')\n \n   if (arguments.length !== 2) {\n     return null\n", "diff --git a/website/source/php/strings/strnatcmp.html b/website/source/php/strings/strnatcmp.html\nindex 756354d3b..9950132b5 100644\n--- a/website/source/php/strings/strnatcmp.html\n+++ b/website/source/php/strings/strnatcmp.html\n@@ -68,11 +68,11 @@ alias:\n   //        example 7: strnatcmp('0A', '5N')\n   //        returns 7: -1\n \n-  var _phpCastString = require('../_helpers/_phpCastString')\n+  const _phpCastString = require('../_helpers/_phpCastString')\n \n-  var leadingZeros = /^0+(?=\\d)/\n-  var whitespace = /^\\s/\n-  var digit = /^\\d/\n+  const leadingZeros = /^0+(?=\\d)/\n+  const whitespace = /^\\s/\n+  const digit = /^\\d/\n \n   if (arguments.length !== 2) {\n     return null\n@@ -85,8 +85,8 @@ alias:\n     return a.length - b.length\n   }\n \n-  var i = 0\n-  var j = 0\n+  let i = 0\n+  let j = 0\n \n   a = a.replace(leadingZeros, '')\n   b = b.replace(leadingZeros, '')\n@@ -96,14 +96,14 @@ alias:\n     while (whitespace.test(a.charAt(i))) i++\n     while (whitespace.test(b.charAt(j))) j++\n \n-    var ac = a.charAt(i)\n-    var bc = b.charAt(j)\n-    var aIsDigit = digit.test(ac)\n-    var bIsDigit = digit.test(bc)\n+    let ac = a.charAt(i)\n+    let bc = b.charAt(j)\n+    let aIsDigit = digit.test(ac)\n+    let bIsDigit = digit.test(bc)\n \n     if (aIsDigit && bIsDigit) {\n-      var bias = 0\n-      var fractional = ac === '0' || bc === '0'\n+      let bias = 0\n+      const fractional = ac === '0' || bc === '0'\n \n       do {\n         if (!aIsDigit) {\n@@ -154,8 +154,8 @@ alias:\n     j++\n   }\n \n-  var iBeforeStrEnd = i < a.length\n-  var jBeforeStrEnd = j < b.length\n+  const iBeforeStrEnd = i < a.length\n+  const jBeforeStrEnd = j < b.length\n \n   // Check which string ended first\n   // return -1 if a, 1 if b, 0 otherwise\n", "diff --git a/website/source/php/strings/strncasecmp.html b/website/source/php/strings/strncasecmp.html\nindex 42d7c50a8..85c7da4d8 100644\n--- a/website/source/php/strings/strncasecmp.html\n+++ b/website/source/php/strings/strncasecmp.html\n@@ -30,8 +30,8 @@ layout: function\n title: PHP's strncasecmp in JavaScript\n description: >-\n   Here\u2019s what our current JavaScript equivalent to <a\n-  href=\"https://php.net/manual/en/function.strncasecmp.php\">PHP's strncasecmp</a>\n-  looks like.\n+  href=\"https://php.net/manual/en/function.strncasecmp.php\">PHP's\n+  strncasecmp</a> looks like.\n function: strncasecmp\n category: strings\n language: php\n@@ -60,10 +60,10 @@ alias:\n   //   example 5: strncasecmp('Version 12.15', 'Version 12.9', 20)\n   //   returns 5: -8\n \n-  var diff\n-  var i = 0\n-  var str1 = (argStr1 + '').toLowerCase().substr(0, len)\n-  var str2 = (argStr2 + '').toLowerCase().substr(0, len)\n+  let diff\n+  let i = 0\n+  const str1 = (argStr1 + '').toLowerCase().substr(0, len)\n+  const str2 = (argStr2 + '').toLowerCase().substr(0, len)\n \n   if (str1.length !== str2.length) {\n     if (str1.length < str2.length) {\n", "diff --git a/website/source/php/strings/strncmp.html b/website/source/php/strings/strncmp.html\nindex 814d6e551..e03eb6f12 100644\n--- a/website/source/php/strings/strncmp.html\n+++ b/website/source/php/strings/strncmp.html\n@@ -49,9 +49,9 @@ alias:\n   //        example 2: strncmp('aaa', 'aab', 3 )\n   //        returns 2: -1\n \n-  var s1 = (str1 + '')\n+  const s1 = (str1 + '')\n     .substr(0, lgth)\n-  var s2 = (str2 + '')\n+  const s2 = (str2 + '')\n     .substr(0, lgth)\n \n   return ((s1 === s2) ? 0 : ((s1 > s2) ? 1 : -1))\n", "diff --git a/website/source/php/strings/strpbrk.html b/website/source/php/strings/strpbrk.html\nindex 9d95f3162..4618721a7 100644\n--- a/website/source/php/strings/strpbrk.html\n+++ b/website/source/php/strings/strpbrk.html\n@@ -42,7 +42,7 @@ alias:\n   //   example 1: strpbrk('This is a Simple text.', 'is')\n   //   returns 1: 'is is a Simple text.'\n \n-  for (var i = 0, len = haystack.length; i < len; ++i) {\n+  for (let i = 0, len = haystack.length; i < len; ++i) {\n     if (charList.indexOf(haystack.charAt(i)) >= 0) {\n       return haystack.slice(i)\n     }\n", "diff --git a/website/source/php/strings/strpos.html b/website/source/php/strings/strpos.html\nindex c8ed5fc2e..933a5b2dc 100644\n--- a/website/source/php/strings/strpos.html\n+++ b/website/source/php/strings/strpos.html\n@@ -41,7 +41,7 @@ alias:\n   //   example 1: strpos('Kevin van Zonneveld', 'e', 5)\n   //   returns 1: 14\n \n-  var i = (haystack + '')\n+  const i = (haystack + '')\n     .indexOf(needle, (offset || 0))\n   return i === -1 ? false : i\n }\n", "diff --git a/website/source/php/strings/strrchr.html b/website/source/php/strings/strrchr.html\nindex bb4087e9a..a83f89158 100644\n--- a/website/source/php/strings/strrchr.html\n+++ b/website/source/php/strings/strrchr.html\n@@ -39,7 +39,7 @@ alias:\n   //   example 1: strrchr(\"Line 1\\nLine 2\\nLine 3\", 10).substr(1)\n   //   returns 1: 'Line 3'\n \n-  var pos = 0\n+  let pos = 0\n \n   if (typeof needle !== 'string') {\n     needle = String.fromCharCode(parseInt(needle, 10))\n", "diff --git a/website/source/php/strings/strrev.html b/website/source/php/strings/strrev.html\nindex 35325d927..faf725757 100644\n--- a/website/source/php/strings/strrev.html\n+++ b/website/source/php/strings/strrev.html\n@@ -58,7 +58,7 @@ alias:\n   // We also add the low surrogate range at the beginning here so it will be\n   // maintained with its preceding high surrogate\n \n-  var chars = [\n+  const chars = [\n     '\\uDC00-\\uDFFF',\n     '\\u0300-\\u036F',\n     '\\u0483-\\u0489',\n@@ -242,7 +242,7 @@ alias:\n     '\\uFE20-\\uFE26'\n   ]\n \n-  var graphemeExtend = new RegExp('(.)([' + chars.join('') + ']+)', 'g')\n+  const graphemeExtend = new RegExp('(.)([' + chars.join('') + ']+)', 'g')\n \n   // Temporarily reverse\n   string = string.replace(graphemeExtend, '$2$1')\n", "diff --git a/website/source/php/strings/strripos.html b/website/source/php/strings/strripos.html\nindex a638909c7..4298f65b2 100644\n--- a/website/source/php/strings/strripos.html\n+++ b/website/source/php/strings/strripos.html\n@@ -20,8 +20,8 @@ layout: function\n title: PHP's strripos in JavaScript\n description: >-\n   Here\u2019s what our current JavaScript equivalent to <a\n-  href=\"https://php.net/manual/en/function.strripos.php\">PHP's strripos</a> looks\n-  like.\n+  href=\"https://php.net/manual/en/function.strripos.php\">PHP's strripos</a>\n+  looks like.\n function: strripos\n category: strings\n language: php\n@@ -46,7 +46,7 @@ alias:\n   needle = (needle + '')\n     .toLowerCase()\n \n-  var i = -1\n+  let i = -1\n   if (offset) {\n     i = (haystack + '')\n       .slice(offset)\n", "diff --git a/website/source/php/strings/strrpos.html b/website/source/php/strings/strrpos.html\nindex cb7ebcae7..a3eae150f 100644\n--- a/website/source/php/strings/strrpos.html\n+++ b/website/source/php/strings/strrpos.html\n@@ -53,7 +53,7 @@ alias:\n   //   example 4: strrpos('baa', 'a', 2)\n   //   returns 4: 2\n \n-  var i = -1\n+  let i = -1\n   if (offset) {\n     i = (haystack + '')\n       .slice(offset)\n", "diff --git a/website/source/php/strings/strspn.html b/website/source/php/strings/strspn.html\nindex 156b4285e..149622510 100644\n--- a/website/source/php/strings/strspn.html\n+++ b/website/source/php/strings/strspn.html\n@@ -40,11 +40,11 @@ alias:\n   //   example 2: strspn('foo', 'o', 1, 2)\n   //   returns 2: 2\n \n-  var found\n-  var stri\n-  var strj\n-  var j = 0\n-  var i = 0\n+  let found\n+  let stri\n+  let strj\n+  let j = 0\n+  let i = 0\n \n   start = start ? (start < 0 ? (str1.length + start) : start) : 0\n   lgth = lgth ? ((lgth < 0) ? (str1.length + lgth - start) : lgth) : str1.length - start\n", "diff --git a/website/source/php/strings/strstr.html b/website/source/php/strings/strstr.html\nindex e306dc662..c9eccd637 100644\n--- a/website/source/php/strings/strstr.html\n+++ b/website/source/php/strings/strstr.html\n@@ -51,7 +51,7 @@ alias:\n   //   example 4: strstr('name@example.com', '@', true)\n   //   returns 4: 'name'\n \n-  var pos = 0\n+  let pos = 0\n \n   haystack += ''\n   pos = haystack.indexOf(needle)\n", "diff --git a/website/source/php/strings/strtok.html b/website/source/php/strings/strtok.html\nindex 3b777a09c..4f7afc009 100644\n--- a/website/source/php/strings/strtok.html\n+++ b/website/source/php/strings/strtok.html\n@@ -44,9 +44,9 @@ alias:\n   //   example 1: var $result = $b\n   //   returns 1: \"Word=This\\nWord=is\\nWord=an\\nWord=example\\nWord=string\\n\"\n \n-  var $global = (typeof window !== 'undefined' ? window : global)\n+  const $global = (typeof window !== 'undefined' ? window : global)\n   $global.$locutus = $global.$locutus || {}\n-  var $locutus = $global.$locutus\n+  const $locutus = $global.$locutus\n   $locutus.php = $locutus.php || {}\n \n   if (tokens === undefined) {\n", "diff --git a/website/source/php/strings/strtr.html b/website/source/php/strings/strtr.html\nindex 8eea224f5..49e7fcc2a 100644\n--- a/website/source/php/strings/strtr.html\n+++ b/website/source/php/strings/strtr.html\n@@ -37,7 +37,8 @@ layout: function\n title: PHP's strtr in JavaScript\n description: >-\n   Here\u2019s what our current JavaScript equivalent to <a\n-  href=\"https://php.net/manual/en/function.strtr.php\">PHP's strtr</a> looks like.\n+  href=\"https://php.net/manual/en/function.strtr.php\">PHP's strtr</a> looks\n+  like.\n function: strtr\n category: strings\n language: php\n@@ -73,22 +74,22 @@ alias:\n   //   example 6: strtr('aa', {'a':1,'aa':2})\n   //   returns 6: '2'\n \n-  var krsort = require('../array/krsort')\n-  var iniSet = require('../info/ini_set')\n+  const krsort = require('../array/krsort')\n+  const iniSet = require('../info/ini_set')\n \n-  var fr = ''\n-  var i = 0\n-  var j = 0\n-  var lenStr = 0\n-  var lenFrom = 0\n-  var sortByReference = false\n-  var fromTypeStr = ''\n-  var toTypeStr = ''\n-  var istr = ''\n-  var tmpFrom = []\n-  var tmpTo = []\n-  var ret = ''\n-  var match = false\n+  let fr = ''\n+  let i = 0\n+  let j = 0\n+  let lenStr = 0\n+  let lenFrom = 0\n+  let sortByReference = false\n+  let fromTypeStr = ''\n+  let toTypeStr = ''\n+  let istr = ''\n+  const tmpFrom = []\n+  const tmpTo = []\n+  let ret = ''\n+  let match = false\n \n   // Received replace_pairs?\n   // Convert to normal trFrom->trTo chars\n", "diff --git a/website/source/php/strings/substr.html b/website/source/php/strings/substr.html\nindex ea6d80696..4f0017edc 100644\n--- a/website/source/php/strings/substr.html\n+++ b/website/source/php/strings/substr.html\n@@ -38,6 +38,7 @@ authors:\n     - T.Wild\n   revised by:\n     - 'Theriault (https://github.com/Theriault)'\n+    - Rafa\u0142 Kukawski\n notes:\n   - >-\n     Handles rare Unicode characters if 'unicode.semantics' ini (PHP6) is set to\n@@ -59,13 +60,14 @@ alias:\n   - /php/substr/\n   - /functions/substr/\n ---\n-{% codeblock lang:javascript %}module.exports = function substr (str, start, len) {\n+{% codeblock lang:javascript %}module.exports = function substr (input, start, len) {\n   //  discuss at: https://locutus.io/php/substr/\n   // original by: Martijn Wieringa\n   // bugfixed by: T.Wild\n   // improved by: Onno Marsman (https://twitter.com/onnomarsman)\n   // improved by: Brett Zamir (https://brett-zamir.me)\n   //  revised by: Theriault (https://github.com/Theriault)\n+  //  revised by: Rafa\u0142 Kukawski\n   //      note 1: Handles rare Unicode characters if 'unicode.semantics' ini (PHP6) is set to 'on'\n   //   example 1: substr('abcdef', 0, -1)\n   //   returns 1: 'abcde'\n@@ -88,96 +90,40 @@ alias:\n   //   returns 7: '\\uD801\\uDC00z'\n   //        test: skip-3 skip-4 skip-5 skip-6 skip-7\n \n-  str += ''\n-  var end = str.length\n+  const _php_cast_string = require('../_helpers/_phpCastString') // eslint-disable-line camelcase\n \n-  var iniVal = (typeof require !== 'undefined' ? require('../info/ini_get')('unicode.emantics') : undefined) || 'off'\n+  input = _php_cast_string(input)\n \n-  if (iniVal === 'off') {\n-    // assumes there are no non-BMP characters;\n-    // if there may be such characters, then it is best to turn it on (critical in true XHTML/XML)\n-    if (start < 0) {\n-      start += end\n-    }\n-    if (typeof len !== 'undefined') {\n-      if (len < 0) {\n-        end = len + end\n-      } else {\n-        end = len + start\n-      }\n-    }\n-\n-    // PHP returns false if start does not fall within the string.\n-    // PHP returns false if the calculated end comes before the calculated start.\n-    // PHP returns an empty string if start and end are the same.\n-    // Otherwise, PHP returns the portion of the string from start to end.\n-    if (start >= str.length || start < 0 || start > end) {\n-      return false\n-    }\n+  const ini_get = require('../info/ini_get') // eslint-disable-line camelcase\n+  const multibyte = ini_get('unicode.semantics') === 'on'\n \n-    return str.slice(start, end)\n+  if (multibyte) {\n+    input = input.match(/[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|[\\s\\S]/g) || []\n   }\n \n-  // Full-blown Unicode including non-Basic-Multilingual-Plane characters\n-  var i = 0\n-  var allBMP = true\n-  var es = 0\n-  var el = 0\n-  var se = 0\n-  var ret = ''\n+  const inputLength = input.length\n+  let end = inputLength\n \n-  for (i = 0; i < str.length; i++) {\n-    if (/[\\uD800-\\uDBFF]/.test(str.charAt(i)) && /[\\uDC00-\\uDFFF]/.test(str.charAt(i + 1))) {\n-      allBMP = false\n-      break\n-    }\n+  if (start < 0) {\n+    start += end\n   }\n \n-  if (!allBMP) {\n-    if (start < 0) {\n-      for (i = end - 1, es = (start += end); i >= es; i--) {\n-        if (/[\\uDC00-\\uDFFF]/.test(str.charAt(i)) && /[\\uD800-\\uDBFF]/.test(str.charAt(i - 1))) {\n-          start--\n-          es--\n-        }\n-      }\n-    } else {\n-      var surrogatePairs = /[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g\n-      while ((surrogatePairs.exec(str)) !== null) {\n-        var li = surrogatePairs.lastIndex\n-        if (li - 2 < start) {\n-          start++\n-        } else {\n-          break\n-        }\n-      }\n-    }\n-\n-    if (start >= end || start < 0) {\n-      return false\n-    }\n+  if (typeof len !== 'undefined') {\n     if (len < 0) {\n-      for (i = end - 1, el = (end += len); i >= el; i--) {\n-        if (/[\\uDC00-\\uDFFF]/.test(str.charAt(i)) && /[\\uD800-\\uDBFF]/.test(str.charAt(i - 1))) {\n-          end--\n-          el--\n-        }\n-      }\n-      if (start > end) {\n-        return false\n-      }\n-      return str.slice(start, end)\n+      end = len + end\n     } else {\n-      se = start + len\n-      for (i = start; i < se; i++) {\n-        ret += str.charAt(i)\n-        if (/[\\uD800-\\uDBFF]/.test(str.charAt(i)) && /[\\uDC00-\\uDFFF]/.test(str.charAt(i + 1))) {\n-          // Go one further, since one of the \"characters\" is part of a surrogate pair\n-          se++\n-        }\n-      }\n-      return ret\n+      end = len + start\n     }\n   }\n+\n+  if (start > inputLength || start < 0 || start > end) {\n+    return false\n+  }\n+\n+  if (multibyte) {\n+    return input.slice(start, end).join('')\n+  }\n+\n+  return input.slice(start, end)\n }\n {% endcodeblock %}\n\\ No newline at end of file\n", "diff --git a/website/source/php/strings/substr_count.html b/website/source/php/strings/substr_count.html\nindex 4dc111e60..17c0ea120 100644\n--- a/website/source/php/strings/substr_count.html\n+++ b/website/source/php/strings/substr_count.html\n@@ -49,7 +49,7 @@ alias:\n   //   example 3: substr_count('Kevin van Zonneveld', 'Z', 0, 10)\n   //   returns 3: false\n \n-  var cnt = 0\n+  let cnt = 0\n \n   haystack += ''\n   needle += ''\n", "diff --git a/website/source/php/strings/trim.html b/website/source/php/strings/trim.html\nindex c8b4e20d1..1015b7bbe 100644\n--- a/website/source/php/strings/trim.html\n+++ b/website/source/php/strings/trim.html\n@@ -59,7 +59,7 @@ alias:\n   //   example 3: trim(16, 1)\n   //   returns 3: '6'\n \n-  var whitespace = [\n+  let whitespace = [\n     ' ',\n     '\\n',\n     '\\r',\n@@ -83,8 +83,8 @@ alias:\n     '\\u2029',\n     '\\u3000'\n   ].join('')\n-  var l = 0\n-  var i = 0\n+  let l = 0\n+  let i = 0\n   str += ''\n \n   if (charlist) {\n", "diff --git a/website/source/php/strings/ucfirst.html b/website/source/php/strings/ucfirst.html\nindex 348bf8783..3a7737334 100644\n--- a/website/source/php/strings/ucfirst.html\n+++ b/website/source/php/strings/ucfirst.html\n@@ -40,7 +40,7 @@ alias:\n   //   returns 1: 'Kevin van zonneveld'\n \n   str += ''\n-  var f = str.charAt(0)\n+  const f = str.charAt(0)\n     .toUpperCase()\n   return f + str.substr(1)\n }\n", "diff --git a/website/source/php/strings/vprintf.html b/website/source/php/strings/vprintf.html\nindex ba912a421..76ea06b6b 100644\n--- a/website/source/php/strings/vprintf.html\n+++ b/website/source/php/strings/vprintf.html\n@@ -39,9 +39,9 @@ alias:\n   //        example 1: vprintf(\"%01.2f\", 123.1)\n   //        returns 1: 6\n \n-  var sprintf = require('../strings/sprintf')\n-  var echo = require('../strings/echo')\n-  var ret = sprintf.apply(this, [format].concat(args))\n+  const sprintf = require('../strings/sprintf')\n+  const echo = require('../strings/echo')\n+  const ret = sprintf.apply(this, [format].concat(args))\n   echo(ret)\n \n   return ret.length\n", "diff --git a/website/source/php/strings/vsprintf.html b/website/source/php/strings/vsprintf.html\nindex 5bc8aa825..8739ee819 100644\n--- a/website/source/php/strings/vsprintf.html\n+++ b/website/source/php/strings/vsprintf.html\n@@ -15,8 +15,8 @@ layout: function\n title: PHP's vsprintf in JavaScript\n description: >-\n   Here\u2019s what our current JavaScript equivalent to <a\n-  href=\"https://php.net/manual/en/function.vsprintf.php\">PHP's vsprintf</a> looks\n-  like.\n+  href=\"https://php.net/manual/en/function.vsprintf.php\">PHP's vsprintf</a>\n+  looks like.\n function: vsprintf\n category: strings\n language: php\n@@ -33,7 +33,7 @@ alias:\n   //   example 1: vsprintf('%04d-%02d-%02d', [1988, 8, 1])\n   //   returns 1: '1988-08-01'\n \n-  var sprintf = require('../strings/sprintf')\n+  const sprintf = require('../strings/sprintf')\n \n   return sprintf.apply(this, [format].concat(args))\n }\n", "diff --git a/website/source/php/strings/wordwrap.html b/website/source/php/strings/wordwrap.html\nindex 1a0c67466..458ed7eb4 100644\n--- a/website/source/php/strings/wordwrap.html\n+++ b/website/source/php/strings/wordwrap.html\n@@ -37,8 +37,8 @@ layout: function\n title: PHP's wordwrap in JavaScript\n description: >-\n   Here\u2019s what our current JavaScript equivalent to <a\n-  href=\"https://php.net/manual/en/function.wordwrap.php\">PHP's wordwrap</a> looks\n-  like.\n+  href=\"https://php.net/manual/en/function.wordwrap.php\">PHP's wordwrap</a>\n+  looks like.\n function: wordwrap\n category: strings\n language: php\n@@ -70,7 +70,7 @@ alias:\n   strBreak = arguments.length >= 3 ? '' + strBreak : '\\n'\n   cut = arguments.length >= 4 ? !!cut : false\n \n-  var i, j, line\n+  let i, j, line\n \n   str += ''\n \n@@ -78,13 +78,13 @@ alias:\n     return str\n   }\n \n-  var reLineBreaks = /\\r\\n|\\n|\\r/\n-  var reBeginningUntilFirstWhitespace = /^\\S*/\n-  var reLastCharsWithOptionalTrailingWhitespace = /\\S*(\\s)?$/\n+  const reLineBreaks = /\\r\\n|\\n|\\r/\n+  const reBeginningUntilFirstWhitespace = /^\\S*/\n+  const reLastCharsWithOptionalTrailingWhitespace = /\\S*(\\s)?$/\n \n-  var lines = str.split(reLineBreaks)\n-  var l = lines.length\n-  var match\n+  const lines = str.split(reLineBreaks)\n+  const l = lines.length\n+  let match\n \n   // for each line of text\n   for (i = 0; i < l; lines[i++] += line) {\n@@ -93,12 +93,12 @@ alias:\n \n     while (line.length > intWidth) {\n       // get slice of length one char above limit\n-      var slice = line.slice(0, intWidth + 1)\n+      const slice = line.slice(0, intWidth + 1)\n \n       // remove leading whitespace from rest of line to parse\n-      var ltrim = 0\n+      let ltrim = 0\n       // remove trailing whitespace from new line content\n-      var rtrim = 0\n+      let rtrim = 0\n \n       match = slice.match(reLastCharsWithOptionalTrailingWhitespace)\n \n@@ -125,7 +125,7 @@ alias:\n         // if cut wasn't forced\n         // cut at next possible whitespace after the limit\n         if (!j) {\n-          var charsUntilNextWhitespace = (line.slice(intWidth).match(reBeginningUntilFirstWhitespace) || [''])[0]\n+          const charsUntilNextWhitespace = (line.slice(intWidth).match(reBeginningUntilFirstWhitespace) || [''])[0]\n \n           j = slice.length + charsUntilNextWhitespace.length\n         }\n", "diff --git a/website/source/php/url/base64_decode.html b/website/source/php/url/base64_decode.html\nindex 44a44d87f..385052b6f 100644\n--- a/website/source/php/url/base64_decode.html\n+++ b/website/source/php/url/base64_decode.html\n@@ -65,7 +65,7 @@ alias:\n   // decodeUTF8string()\n   // Internal function to decode properly UTF8 string\n   // Adapted from Solution #1 at https://developer.mozilla.org/en-US/docs/Web/API/WindowBase64/Base64_encoding_and_decoding\n-  var decodeUTF8string = function (str) {\n+  const decodeUTF8string = function (str) {\n     // Going backwards: from bytestream, to percent-encoding, to original string.\n     return decodeURIComponent(str.split('').map(function (c) {\n       return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2)\n@@ -80,19 +80,19 @@ alias:\n     return new Buffer(encodedData, 'base64').toString('utf-8')\n   }\n \n-  var b64 = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/='\n-  var o1\n-  var o2\n-  var o3\n-  var h1\n-  var h2\n-  var h3\n-  var h4\n-  var bits\n-  var i = 0\n-  var ac = 0\n-  var dec = ''\n-  var tmpArr = []\n+  const b64 = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/='\n+  let o1\n+  let o2\n+  let o3\n+  let h1\n+  let h2\n+  let h3\n+  let h4\n+  let bits\n+  let i = 0\n+  let ac = 0\n+  let dec = ''\n+  const tmpArr = []\n \n   if (!encodedData) {\n     return encodedData\n", "diff --git a/website/source/php/url/base64_encode.html b/website/source/php/url/base64_encode.html\nindex bdd1c70b0..9b0ba9640 100644\n--- a/website/source/php/url/base64_encode.html\n+++ b/website/source/php/url/base64_encode.html\n@@ -60,7 +60,7 @@ alias:\n   // encodeUTF8string()\n   // Internal function to encode properly UTF8 string\n   // Adapted from Solution #1 at https://developer.mozilla.org/en-US/docs/Web/API/WindowBase64/Base64_encoding_and_decoding\n-  var encodeUTF8string = function (str) {\n+  const encodeUTF8string = function (str) {\n     // first we use encodeURIComponent to get percent-encoded UTF-8,\n     // then we convert the percent encodings into raw bytes which\n     // can be fed into the base64 encoding algorithm.\n@@ -78,19 +78,19 @@ alias:\n     return new Buffer(stringToEncode).toString('base64')\n   }\n \n-  var b64 = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/='\n-  var o1\n-  var o2\n-  var o3\n-  var h1\n-  var h2\n-  var h3\n-  var h4\n-  var bits\n-  var i = 0\n-  var ac = 0\n-  var enc = ''\n-  var tmpArr = []\n+  const b64 = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/='\n+  let o1\n+  let o2\n+  let o3\n+  let h1\n+  let h2\n+  let h3\n+  let h4\n+  let bits\n+  let i = 0\n+  let ac = 0\n+  let enc = ''\n+  const tmpArr = []\n \n   if (!stringToEncode) {\n     return stringToEncode\n@@ -117,7 +117,7 @@ alias:\n \n   enc = tmpArr.join('')\n \n-  var r = stringToEncode.length % 3\n+  const r = stringToEncode.length % 3\n \n   return (r ? enc.slice(0, r - 3) : enc) + '==='.slice(r || 3)\n }\n", "diff --git a/website/source/php/url/http_build_query.html b/website/source/php/url/http_build_query.html\nindex b3f465bea..6743b64f8 100644\n--- a/website/source/php/url/http_build_query.html\n+++ b/website/source/php/url/http_build_query.html\n@@ -75,7 +75,7 @@ alias:\n   //   example 3: http_build_query({foo: 'bar', php: 'hypertext processor', baz: 'boom', cow: 'milk'}, '', '&amp;', 'PHP_QUERY_RFC3986')\n   //   returns 3: 'foo=bar&amp;php=hypertext%20processor&amp;baz=boom&amp;cow=milk'\n \n-  var encodeFunc\n+  let encodeFunc\n \n   switch (encType) {\n     case 'PHP_QUERY_RFC3986':\n@@ -88,13 +88,13 @@ alias:\n       break\n   }\n \n-  var value\n-  var key\n-  var tmp = []\n+  let value\n+  let key\n+  const tmp = []\n \n   var _httpBuildQueryHelper = function (key, val, argSeparator) {\n-    var k\n-    var tmp = []\n+    let k\n+    const tmp = []\n     if (val === true) {\n       val = '1'\n     } else if (val === false) {\n@@ -126,7 +126,7 @@ alias:\n     if (numericPrefix && !isNaN(key)) {\n       key = String(numericPrefix) + key\n     }\n-    var query = _httpBuildQueryHelper(key, value, argSeparator)\n+    const query = _httpBuildQueryHelper(key, value, argSeparator)\n     if (query !== '') {\n       tmp.push(query)\n     }\n", "diff --git a/website/source/php/url/parse_url.html b/website/source/php/url/parse_url.html\nindex 15fdbbe32..4cc19e654 100644\n--- a/website/source/php/url/parse_url.html\n+++ b/website/source/php/url/parse_url.html\n@@ -9,10 +9,10 @@ examples:\n estarget: es5\n returns:\n   - >-\n-    {scheme: 'http', host: 'host', user: 'user', pass: 'pass', path: '/path',\n+    {scheme: 'https', host: 'host', user: 'user', pass: 'pass', path: '/path',\n     query: 'a=v', fragment: 'a'}\n   - >-\n-    {scheme: 'http', host: 'en.wikipedia.org', path:\n+    {scheme: 'https', host: 'en.wikipedia.org', path:\n     '/wiki/%22@%22_%28album%29'}\n   - '{scheme: ''https'', host: ''host.domain.tld'', path: ''/a@b.c/folder''}'\n   - >-\n@@ -74,19 +74,19 @@ alias:\n   //           note 1: well as our allowing\n   //           note 1: an extra slash after the scheme/protocol (to allow file:/// as in PHP)\n   //        example 1: parse_url('https://user:pass@host/path?a=v#a')\n-  //        returns 1: {scheme: 'http', host: 'host', user: 'user', pass: 'pass', path: '/path', query: 'a=v', fragment: 'a'}\n+  //        returns 1: {scheme: 'https', host: 'host', user: 'user', pass: 'pass', path: '/path', query: 'a=v', fragment: 'a'}\n   //        example 2: parse_url('https://en.wikipedia.org/wiki/%22@%22_%28album%29')\n-  //        returns 2: {scheme: 'http', host: 'en.wikipedia.org', path: '/wiki/%22@%22_%28album%29'}\n+  //        returns 2: {scheme: 'https', host: 'en.wikipedia.org', path: '/wiki/%22@%22_%28album%29'}\n   //        example 3: parse_url('https://host.domain.tld/a@b.c/folder')\n   //        returns 3: {scheme: 'https', host: 'host.domain.tld', path: '/a@b.c/folder'}\n   //        example 4: parse_url('https://gooduser:secretpassword@www.example.com/a@b.c/folder?foo=bar')\n   //        returns 4: { scheme: 'https', host: 'www.example.com', path: '/a@b.c/folder', query: 'foo=bar', user: 'gooduser', pass: 'secretpassword' }\n \n-  var query\n+  let query\n \n-  var mode = (typeof require !== 'undefined' ? require('../info/ini_get')('locutus.parse_url.mode') : undefined) || 'php'\n+  const mode = (typeof require !== 'undefined' ? require('../info/ini_get')('locutus.parse_url.mode') : undefined) || 'php'\n \n-  var key = [\n+  const key = [\n     'source',\n     'scheme',\n     'authority',\n@@ -104,7 +104,7 @@ alias:\n   ]\n \n   // For loose we added one optional slash to post-scheme to catch file:/// (should restrict this)\n-  var parser = {\n+  let parser = {\n     php: new RegExp([\n       '(?:([^:\\\\/?#]+):)?',\n       '(?:\\\\/\\\\/()(?:(?:()(?:([^:@\\\\/]*):?([^:@\\\\/]*))?@)?([^:\\\\/?#]*)(?::(\\\\d*))?))?',\n@@ -125,9 +125,9 @@ alias:\n     ].join(''))\n   }\n \n-  var m = parser[mode].exec(str)\n-  var uri = {}\n-  var i = 14\n+  const m = parser[mode].exec(str)\n+  const uri = {}\n+  let i = 14\n \n   while (i--) {\n     if (m[i]) {\n@@ -140,7 +140,7 @@ alias:\n   }\n \n   if (mode !== 'php') {\n-    var name = (typeof require !== 'undefined' ? require('../info/ini_get')('locutus.parse_url.queryKey') : undefined) || 'queryKey'\n+    const name = (typeof require !== 'undefined' ? require('../info/ini_get')('locutus.parse_url.queryKey') : undefined) || 'queryKey'\n     parser = /(?:^|&)([^&=]*)=?([^&]*)/g\n     uri[name] = {}\n     query = uri[key[12]] || ''\n", "diff --git a/website/source/php/url/urlencode.html b/website/source/php/url/urlencode.html\nindex 46104bd1b..d675beb8c 100644\n--- a/website/source/php/url/urlencode.html\n+++ b/website/source/php/url/urlencode.html\n@@ -18,6 +18,7 @@ authors:\n     - 'Kevin van Zonneveld (https://kvz.io)'\n     - 'Brett Zamir (https://brett-zamir.me)'\n     - Lars Fischer\n+    - 'Waldo Malqui Silva (https://fayr.us/waldo/)'\n   reimplemented by:\n     - 'Brett Zamir (https://brett-zamir.me)'\n     - 'Brett Zamir (https://brett-zamir.me)'\n@@ -60,6 +61,7 @@ alias:\n   //      improved by: Kevin van Zonneveld (https://kvz.io)\n   //      improved by: Brett Zamir (https://brett-zamir.me)\n   //      improved by: Lars Fischer\n+  //      improved by: Waldo Malqui Silva (https://fayr.us/waldo/)\n   //         input by: AJ\n   //         input by: travc\n   //         input by: Brett Zamir (https://brett-zamir.me)\n@@ -82,15 +84,13 @@ alias:\n \n   str = (str + '')\n \n-  // Tilde should be allowed unescaped in future versions of PHP (as reflected below),\n-  // but if you want to reflect current\n-  // PHP behavior, you would need to add \".replace(/~/g, '%7E');\" to the following.\n   return encodeURIComponent(str)\n     .replace(/!/g, '%21')\n     .replace(/'/g, '%27')\n     .replace(/\\(/g, '%28')\n     .replace(/\\)/g, '%29')\n     .replace(/\\*/g, '%2A')\n+    .replace(/~/g, '%7E')\n     .replace(/%20/g, '+')\n }\n {% endcodeblock %}\n\\ No newline at end of file\n", "diff --git a/website/source/php/var/doubleval.html b/website/source/php/var/doubleval.html\nindex c30c438a8..1ec84416f 100644\n--- a/website/source/php/var/doubleval.html\n+++ b/website/source/php/var/doubleval.html\n@@ -38,7 +38,7 @@ alias:\n   //   example 1: doubleval(186)\n   //   returns 1: 186.00\n \n-  var floatval = require('../var/floatval')\n+  const floatval = require('../var/floatval')\n \n   return floatval(mixedVar)\n }\n", "diff --git a/website/source/php/var/empty.html b/website/source/php/var/empty.html\nindex 1bcc431c1..0d3609ac0 100644\n--- a/website/source/php/var/empty.html\n+++ b/website/source/php/var/empty.html\n@@ -34,7 +34,8 @@ layout: function\n title: PHP's empty in JavaScript\n description: >-\n   Here\u2019s what our current JavaScript equivalent to <a\n-  href=\"https://php.net/manual/en/function.empty.php\">PHP's empty</a> looks like.\n+  href=\"https://php.net/manual/en/function.empty.php\">PHP's empty</a> looks\n+  like.\n function: empty\n category: var\n language: php\n@@ -67,11 +68,11 @@ alias:\n   //   example 5: empty({'aFunc' : function () { alert('humpty'); } })\n   //   returns 5: false\n \n-  var undef\n-  var key\n-  var i\n-  var len\n-  var emptyValues = [undef, null, false, 0, '', '0']\n+  let undef\n+  let key\n+  let i\n+  let len\n+  const emptyValues = [undef, null, false, 0, '', '0']\n \n   for (i = 0, len = emptyValues.length; i < len; i++) {\n     if (mixedVar === emptyValues[i]) {\n", "diff --git a/website/source/php/var/floatval.html b/website/source/php/var/floatval.html\nindex 9b3a9bac7..8dc9cdadb 100644\n--- a/website/source/php/var/floatval.html\n+++ b/website/source/php/var/floatval.html\n@@ -24,8 +24,8 @@ layout: function\n title: PHP's floatval in JavaScript\n description: >-\n   Here\u2019s what our current JavaScript equivalent to <a\n-  href=\"https://php.net/manual/en/function.floatval.php\">PHP's floatval</a> looks\n-  like.\n+  href=\"https://php.net/manual/en/function.floatval.php\">PHP's floatval</a>\n+  looks like.\n function: floatval\n category: var\n language: php\n", "diff --git a/website/source/php/var/gettype.html b/website/source/php/var/gettype.html\nindex bb17f7bd2..17b0ab2c8 100644\n--- a/website/source/php/var/gettype.html\n+++ b/website/source/php/var/gettype.html\n@@ -72,12 +72,12 @@ alias:\n   //   example 7: gettype(['test'])\n   //   returns 7: 'array'\n \n-  var isFloat = require('../var/is_float')\n+  const isFloat = require('../var/is_float')\n \n-  var s = typeof mixedVar\n-  var name\n-  var _getFuncName = function (fn) {\n-    var name = (/\\W*function\\s+([\\w$]+)\\s*\\(/).exec(fn)\n+  let s = typeof mixedVar\n+  let name\n+  const _getFuncName = function (fn) {\n+    const name = (/\\W*function\\s+([\\w$]+)\\s*\\(/).exec(fn)\n     if (!name) {\n       return '(Anonymous)'\n     }\n", "diff --git a/website/source/php/var/intval.html b/website/source/php/var/intval.html\nindex 48c03173f..53fbefabd 100644\n--- a/website/source/php/var/intval.html\n+++ b/website/source/php/var/intval.html\n@@ -74,9 +74,9 @@ alias:\n   //   example 8: intval('010', 0)\n   //   returns 8: 8\n \n-  var tmp, match\n+  let tmp, match\n \n-  var type = typeof mixedVar\n+  const type = typeof mixedVar\n \n   if (type === 'boolean') {\n     return +mixedVar\n", "diff --git a/website/source/php/var/is_array.html b/website/source/php/var/is_array.html\nindex 150ce52c9..2143a88ce 100644\n--- a/website/source/php/var/is_array.html\n+++ b/website/source/php/var/is_array.html\n@@ -43,8 +43,8 @@ layout: function\n title: PHP's is_array in JavaScript\n description: >-\n   Here\u2019s what our current JavaScript equivalent to <a\n-  href=\"https://php.net/manual/en/function.is-array.php\">PHP's is_array</a> looks\n-  like.\n+  href=\"https://php.net/manual/en/function.is-array.php\">PHP's is_array</a>\n+  looks like.\n function: is_array\n category: var\n language: php\n@@ -85,14 +85,14 @@ alias:\n   //   example 5: is_array(function tmp_a (){ this.name = 'Kevin' })\n   //   returns 5: false\n \n-  var _getFuncName = function (fn) {\n-    var name = (/\\W*function\\s+([\\w$]+)\\s*\\(/).exec(fn)\n+  const _getFuncName = function (fn) {\n+    const name = (/\\W*function\\s+([\\w$]+)\\s*\\(/).exec(fn)\n     if (!name) {\n       return '(Anonymous)'\n     }\n     return name[1]\n   }\n-  var _isArray = function (mixedVar) {\n+  const _isArray = function (mixedVar) {\n     // return Object.prototype.toString.call(mixedVar) === '[object Array]';\n     // The above works, but let's do the even more stringent approach:\n     // (since Object.prototype.toString could be overridden)\n@@ -100,7 +100,7 @@ alias:\n     if (!mixedVar || typeof mixedVar !== 'object' || typeof mixedVar.length !== 'number') {\n       return false\n     }\n-    var len = mixedVar.length\n+    const len = mixedVar.length\n     mixedVar[mixedVar.length] = 'bogus'\n     // The only way I can think of to get around this (or where there would be trouble)\n     // would be to have an object defined\n@@ -128,16 +128,16 @@ alias:\n     return false\n   }\n \n-  var isArray = _isArray(mixedVar)\n+  const isArray = _isArray(mixedVar)\n \n   if (isArray) {\n     return true\n   }\n \n-  var iniVal = (typeof require !== 'undefined' ? require('../info/ini_get')('locutus.objectsAsArrays') : undefined) || 'on'\n+  const iniVal = (typeof require !== 'undefined' ? require('../info/ini_get')('locutus.objectsAsArrays') : undefined) || 'on'\n   if (iniVal === 'on') {\n-    var asString = Object.prototype.toString.call(mixedVar)\n-    var asFunc = _getFuncName(mixedVar.constructor)\n+    const asString = Object.prototype.toString.call(mixedVar)\n+    const asFunc = _getFuncName(mixedVar.constructor)\n \n     if (asString === '[object Object]' && asFunc === 'Object') {\n       // Most likely a literal and intended as assoc. array\n", "diff --git a/website/source/php/var/is_callable.html b/website/source/php/var/is_callable.html\nindex a27ebc985..4bee42b48 100644\n--- a/website/source/php/var/is_callable.html\n+++ b/website/source/php/var/is_callable.html\n@@ -25,6 +25,7 @@ authors:\n   improved by:\n     - 'Brett Zamir (https://brett-zamir.me)'\n     - KnightYoshi\n+    - 'Waldo Malqui Silva (https://fayr.us/waldo/)'\n   input by:\n     - Fran\u00e7ois\n notes:\n@@ -45,8 +46,8 @@ layout: function\n title: PHP's is_callable in JavaScript\n description: >-\n   Here\u2019s what our current JavaScript equivalent to <a\n-  href=\"https://php.net/manual/en/function.is-callable.php\">PHP's is_callable</a>\n-  looks like.\n+  href=\"https://php.net/manual/en/function.is-callable.php\">PHP's\n+  is_callable</a> looks like.\n function: is_callable\n category: var\n language: php\n@@ -63,6 +64,7 @@ alias:\n   //    input by: Fran\u00e7ois\n   // improved by: Brett Zamir (https://brett-zamir.me)\n   // improved by: KnightYoshi\n+  // improved by: Waldo Malqui Silva (https://fayr.us/waldo/)\n   //      note 1: The variable callableName cannot work as a string variable passed by\n   //      note 1: reference as in PHP (since JavaScript does not support passing\n   //      note 1: strings by reference), but instead will take the name of\n@@ -88,25 +90,26 @@ alias:\n   //   example 5: is_callable(class MyClass {})\n   //   returns 5: false\n \n-  var $global = (typeof window !== 'undefined' ? window : global)\n+  const $global = (typeof window !== 'undefined' ? window : global)\n \n-  var validJSFunctionNamePattern = /^[_$a-zA-Z\\xA0-\\uFFFF][_$a-zA-Z0-9\\xA0-\\uFFFF]*$/\n+  const validJSFunctionNamePattern = /^[_$a-zA-Z\\xA0-\\uFFFF][_$a-zA-Z0-9\\xA0-\\uFFFF]*$/\n \n-  var name = ''\n-  var obj = {}\n-  var method = ''\n-  var validFunctionName = false\n+  let name = ''\n+  let obj = {}\n+  let method = ''\n+  let validFunctionName = false\n \n-  var getFuncName = function (fn) {\n-    var name = (/\\W*function\\s+([\\w$]+)\\s*\\(/).exec(fn)\n+  const getFuncName = function (fn) {\n+    const name = (/\\W*function\\s+([\\w$]+)\\s*\\(/).exec(fn)\n     if (!name) {\n       return '(Anonymous)'\n     }\n     return name[1]\n   }\n \n-  if(/^class/.test(mixedVar.toString())) {\n-\t  return false;\n+  // eslint-disable-next-line no-useless-escape\n+  if (/(^class|\\(this\\,)/.test(mixedVar.toString())) {\n+    return false\n   }\n \n   if (typeof mixedVar === 'string') {\n", "diff --git a/website/source/php/var/is_double.html b/website/source/php/var/is_double.html\nindex 465445198..24ca9abdd 100644\n--- a/website/source/php/var/is_double.html\n+++ b/website/source/php/var/is_double.html\n@@ -38,7 +38,7 @@ alias:\n   //   example 1: is_double(186.31)\n   //   returns 1: true\n \n-  var _isFloat = require('../var/is_float')\n+  const _isFloat = require('../var/is_float')\n   return _isFloat(mixedVar)\n }\n {% endcodeblock %}\n\\ No newline at end of file\n", "diff --git a/website/source/php/var/is_float.html b/website/source/php/var/is_float.html\nindex 95fc9898e..6a55cf0e2 100644\n--- a/website/source/php/var/is_float.html\n+++ b/website/source/php/var/is_float.html\n@@ -23,8 +23,8 @@ layout: function\n title: PHP's is_float in JavaScript\n description: >-\n   Here\u2019s what our current JavaScript equivalent to <a\n-  href=\"https://php.net/manual/en/function.is-float.php\">PHP's is_float</a> looks\n-  like.\n+  href=\"https://php.net/manual/en/function.is-float.php\">PHP's is_float</a>\n+  looks like.\n function: is_float\n category: var\n language: php\n", "diff --git a/website/source/php/var/is_integer.html b/website/source/php/var/is_integer.html\nindex ec2ba357c..3efeed4a2 100644\n--- a/website/source/php/var/is_integer.html\n+++ b/website/source/php/var/is_integer.html\n@@ -42,7 +42,7 @@ alias:\n   //   example 2: is_integer(12)\n   //   returns 2: true\n \n-  var _isInt = require('../var/is_int')\n+  const _isInt = require('../var/is_int')\n   return _isInt(mixedVar)\n }\n {% endcodeblock %}\n\\ No newline at end of file\n", "diff --git a/website/source/php/var/is_long.html b/website/source/php/var/is_long.html\nindex 5d8634e2d..636ccd7c2 100644\n--- a/website/source/php/var/is_long.html\n+++ b/website/source/php/var/is_long.html\n@@ -38,7 +38,7 @@ alias:\n   //   example 1: is_long(186.31)\n   //   returns 1: true\n \n-  var _isFloat = require('../var/is_float')\n+  const _isFloat = require('../var/is_float')\n   return _isFloat(mixedVar)\n }\n {% endcodeblock %}\n\\ No newline at end of file\n", "diff --git a/website/source/php/var/is_numeric.html b/website/source/php/var/is_numeric.html\nindex e273a5b87..2d4ce45bd 100644\n--- a/website/source/php/var/is_numeric.html\n+++ b/website/source/php/var/is_numeric.html\n@@ -67,7 +67,7 @@ alias:\n   //   example 6: is_numeric('1 ')\n   //   returns 6: false\n \n-  var whitespace = [\n+  const whitespace = [\n     ' ',\n     '\\n',\n     '\\r',\n", "diff --git a/website/source/php/var/is_real.html b/website/source/php/var/is_real.html\nindex 6b3299805..c60f4e710 100644\n--- a/website/source/php/var/is_real.html\n+++ b/website/source/php/var/is_real.html\n@@ -38,7 +38,7 @@ alias:\n   //   example 1: is_real(186.31)\n   //   returns 1: true\n \n-  var _isFloat = require('../var/is_float')\n+  const _isFloat = require('../var/is_float')\n   return _isFloat(mixedVar)\n }\n {% endcodeblock %}\n\\ No newline at end of file\n", "diff --git a/website/source/php/var/is_unicode.html b/website/source/php/var/is_unicode.html\nindex f9f1144a7..967fd3320 100644\n--- a/website/source/php/var/is_unicode.html\n+++ b/website/source/php/var/is_unicode.html\n@@ -40,13 +40,13 @@ alias:\n   }\n \n   // If surrogates occur outside of high-low pairs, then this is not Unicode\n-  var arr = []\n-  var highSurrogate = '[\\uD800-\\uDBFF]'\n-  var lowSurrogate = '[\\uDC00-\\uDFFF]'\n-  var highSurrogateBeforeAny = new RegExp(highSurrogate + '([\\\\s\\\\S])', 'g')\n-  var lowSurrogateAfterAny = new RegExp('([\\\\s\\\\S])' + lowSurrogate, 'g')\n-  var singleLowSurrogate = new RegExp('^' + lowSurrogate + '$')\n-  var singleHighSurrogate = new RegExp('^' + highSurrogate + '$')\n+  let arr = []\n+  const highSurrogate = '[\\uD800-\\uDBFF]'\n+  const lowSurrogate = '[\\uDC00-\\uDFFF]'\n+  const highSurrogateBeforeAny = new RegExp(highSurrogate + '([\\\\s\\\\S])', 'g')\n+  const lowSurrogateAfterAny = new RegExp('([\\\\s\\\\S])' + lowSurrogate, 'g')\n+  const singleLowSurrogate = new RegExp('^' + lowSurrogate + '$')\n+  const singleHighSurrogate = new RegExp('^' + highSurrogate + '$')\n \n   while ((arr = highSurrogateBeforeAny.exec(vr)) !== null) {\n     if (!arr[1] || !arr[1].match(singleLowSurrogate)) {\n", "diff --git a/website/source/php/var/isset.html b/website/source/php/var/isset.html\nindex 578bfc5cb..01983a76a 100644\n--- a/website/source/php/var/isset.html\n+++ b/website/source/php/var/isset.html\n@@ -21,7 +21,8 @@ layout: function\n title: PHP's isset in JavaScript\n description: >-\n   Here\u2019s what our current JavaScript equivalent to <a\n-  href=\"https://php.net/manual/en/function.isset.php\">PHP's isset</a> looks like.\n+  href=\"https://php.net/manual/en/function.isset.php\">PHP's isset</a> looks\n+  like.\n function: isset\n category: var\n language: php\n@@ -43,10 +44,10 @@ alias:\n   //   example 2: isset( 'Kevin van Zonneveld' )\n   //   returns 2: true\n \n-  var a = arguments\n-  var l = a.length\n-  var i = 0\n-  var undef\n+  const a = arguments\n+  const l = a.length\n+  let i = 0\n+  let undef\n \n   if (l === 0) {\n     throw new Error('Empty isset')\n", "diff --git a/website/source/php/var/print_r.html b/website/source/php/var/print_r.html\nindex 37f6f9990..b3711bbc8 100644\n--- a/website/source/php/var/print_r.html\n+++ b/website/source/php/var/print_r.html\n@@ -43,15 +43,15 @@ alias:\n   //   example 1: print_r(1, true)\n   //   returns 1: '1'\n \n-  var echo = require('../strings/echo')\n+  const echo = require('../strings/echo')\n \n-  var output = ''\n-  var padChar = ' '\n-  var padVal = 4\n+  let output = ''\n+  const padChar = ' '\n+  const padVal = 4\n \n-  var _repeatChar = function (len, padChar) {\n-    var str = ''\n-    for (var i = 0; i < len; i++) {\n+  const _repeatChar = function (len, padChar) {\n+    let str = ''\n+    for (let i = 0; i < len; i++) {\n       str += padChar\n     }\n     return str\n@@ -61,15 +61,15 @@ alias:\n       curDepth++\n     }\n \n-    var basePad = _repeatChar(padVal * curDepth, padChar)\n-    var thickPad = _repeatChar(padVal * (curDepth + 1), padChar)\n-    var str = ''\n+    const basePad = _repeatChar(padVal * curDepth, padChar)\n+    const thickPad = _repeatChar(padVal * (curDepth + 1), padChar)\n+    let str = ''\n \n     if (typeof obj === 'object' &&\n       obj !== null &&\n       obj.constructor) {\n       str += 'Array\\n' + basePad + '(\\n'\n-      for (var key in obj) {\n+      for (const key in obj) {\n         if (Object.prototype.toString.call(obj[key]) === '[object Array]') {\n           str += thickPad\n           str += '['\n", "diff --git a/website/source/php/var/serialize.html b/website/source/php/var/serialize.html\nindex 393d7644a..f11dc241a 100644\n--- a/website/source/php/var/serialize.html\n+++ b/website/source/php/var/serialize.html\n@@ -77,21 +77,21 @@ alias:\n   //   example 3: serialize( {'\u00fc': '\u00fc', '\u56db': '\u56db', '\ud841\udf0e': '\ud841\udf0e'})\n   //   returns 3: 'a:3:{s:2:\"\u00fc\";s:2:\"\u00fc\";s:3:\"\u56db\";s:3:\"\u56db\";s:4:\"\ud841\udf0e\";s:4:\"\ud841\udf0e\";}'\n \n-  var val, key, okey\n-  var ktype = ''\n-  var vals = ''\n-  var count = 0\n+  let val, key, okey\n+  let ktype = ''\n+  let vals = ''\n+  let count = 0\n \n-  var _utf8Size = function (str) {\n+  const _utf8Size = function (str) {\n     return ~-encodeURI(str).split(/%..|./).length\n   }\n \n-  var _getType = function (inp) {\n-    var match\n-    var key\n-    var cons\n-    var types\n-    var type = typeof inp\n+  const _getType = function (inp) {\n+    let match\n+    let key\n+    let cons\n+    let types\n+    let type = typeof inp\n \n     if (type === 'object' && !inp) {\n       return 'null'\n@@ -117,7 +117,7 @@ alias:\n     return type\n   }\n \n-  var type = _getType(mixedValue)\n+  const type = _getType(mixedValue)\n \n   switch (type) {\n     case 'function':\n", "diff --git a/website/source/php/var/strval.html b/website/source/php/var/strval.html\nindex baa2f78d1..273f64307 100644\n--- a/website/source/php/var/strval.html\n+++ b/website/source/php/var/strval.html\n@@ -39,8 +39,8 @@ alias:\n   //   example 1: strval({red: 1, green: 2, blue: 3, white: 4})\n   //   returns 1: 'Object'\n \n-  var gettype = require('../var/gettype')\n-  var type = ''\n+  const gettype = require('../var/gettype')\n+  let type = ''\n \n   if (str === null) {\n     return ''\n", "diff --git a/website/source/php/var/unserialize.html b/website/source/php/var/unserialize.html\nindex 570eb01a0..16d20a690 100644\n--- a/website/source/php/var/unserialize.html\n+++ b/website/source/php/var/unserialize.html\n@@ -4,11 +4,19 @@ examples:\n   - 'unserialize(''a:3:{i:0;s:5:\"Kevin\";i:1;s:3:\"van\";i:2;s:9:\"Zonneveld\";}'')'\n   - 'unserialize(''a:2:{s:9:\"firstName\";s:5:\"Kevin\";s:7:\"midName\";s:3:\"van\";}'')'\n   - \"unserialize('a:3:{s:2:\\\"\u00fc\\\";s:2:\\\"\u00fc\\\";s:3:\\\"\u56db\\\";s:3:\\\"\u56db\\\";s:4:\\\"\\uD841\\uDF0E\\\";s:4:\\\"\\uD841\\uDF0E\\\";}')\"\n+  - unserialize(undefined)\n+  - 'unserialize(''O:8:\"stdClass\":1:{s:3:\"foo\";b:1;}'')'\n+  - 'unserialize(''a:2:{i:0;N;i:1;s:0:\"\";}'')'\n+  - 'unserialize(''S:7:\"\\\\65\\\\73\\\\63\\\\61\\\\70\\\\65\\\\64\";'')'\n estarget: es5\n returns:\n   - '[''Kevin'', ''van'', ''Zonneveld'']'\n   - '{firstName: ''Kevin'', midName: ''van''}'\n   - \"{'\u00fc': '\u00fc', '\u56db': '\u56db', '\\uD841\\uDF0E': '\\uD841\\uDF0E'}\"\n+  - 'false'\n+  - '{ foo: true }'\n+  - '[null, \"\"]'\n+  - '''escaped'''\n dependencies: []\n authors:\n   original by:\n@@ -21,6 +29,9 @@ authors:\n     - James\n     - Le Torbi\n     - Eli Skeggs\n+    - Rafa\u0142 Kukawski\n+  reimplemented by:\n+    - Rafa\u0142 Kukawski\n   bugfixed by:\n     - dptr1988\n     - 'Kevin van Zonneveld (https://kvz.io)'\n@@ -44,8 +55,8 @@ layout: function\n title: PHP's unserialize in JavaScript\n description: >-\n   Here\u2019s what our current JavaScript equivalent to <a\n-  href=\"https://php.net/manual/en/function.unserialize.php\">PHP's unserialize</a>\n-  looks like.\n+  href=\"https://php.net/manual/en/function.unserialize.php\">PHP's\n+  unserialize</a> looks like.\n function: unserialize\n category: var\n language: php\n@@ -56,206 +67,399 @@ alias:\n   - /php/unserialize/\n   - /functions/unserialize/\n ---\n-{% codeblock lang:javascript %}module.exports = function unserialize (data) {\n-  //  discuss at: https://locutus.io/php/unserialize/\n-  // original by: Arpad Ray (mailto:arpad@php.net)\n-  // improved by: Pedro Tainha (https://www.pedrotainha.com)\n-  // improved by: Kevin van Zonneveld (https://kvz.io)\n-  // improved by: Kevin van Zonneveld (https://kvz.io)\n-  // improved by: Chris\n-  // improved by: James\n-  // improved by: Le Torbi\n-  // improved by: Eli Skeggs\n-  // bugfixed by: dptr1988\n-  // bugfixed by: Kevin van Zonneveld (https://kvz.io)\n-  // bugfixed by: Brett Zamir (https://brett-zamir.me)\n-  // bugfixed by: philippsimon (https://github.com/philippsimon/)\n-  //  revised by: d3x\n-  //    input by: Brett Zamir (https://brett-zamir.me)\n-  //    input by: Martin (https://www.erlenwiese.de/)\n-  //    input by: kilops\n-  //    input by: Jaroslaw Czarniak\n-  //    input by: lovasoa (https://github.com/lovasoa/)\n-  //      note 1: We feel the main purpose of this function should be\n-  //      note 1: to ease the transport of data between php & js\n-  //      note 1: Aiming for PHP-compatibility, we have to translate objects to arrays\n-  //   example 1: unserialize('a:3:{i:0;s:5:\"Kevin\";i:1;s:3:\"van\";i:2;s:9:\"Zonneveld\";}')\n-  //   returns 1: ['Kevin', 'van', 'Zonneveld']\n-  //   example 2: unserialize('a:2:{s:9:\"firstName\";s:5:\"Kevin\";s:7:\"midName\";s:3:\"van\";}')\n-  //   returns 2: {firstName: 'Kevin', midName: 'van'}\n-  //   example 3: unserialize('a:3:{s:2:\"\u00fc\";s:2:\"\u00fc\";s:3:\"\u56db\";s:3:\"\u56db\";s:4:\"\ud841\udf0e\";s:4:\"\ud841\udf0e\";}')\n-  //   returns 3: {'\u00fc': '\u00fc', '\u56db': '\u56db', '\ud841\udf0e': '\ud841\udf0e'}\n-\n-  var $global = (typeof window !== 'undefined' ? window : global)\n-\n-  var utf8Overhead = function (str) {\n-    var s = str.length\n-    for (var i = str.length - 1; i >= 0; i--) {\n-      var code = str.charCodeAt(i)\n-      if (code > 0x7f && code <= 0x7ff) {\n-        s++\n-      } else if (code > 0x7ff && code <= 0xffff) {\n-        s += 2\n-      }\n-      // trail surrogate\n-      if (code >= 0xDC00 && code <= 0xDFFF) {\n-        i--\n-      }\n+{% codeblock lang:javascript %}function initCache () {\n+  const store = []\n+  // cache only first element, second is length to jump ahead for the parser\n+  const cache = function cache (value) {\n+    store.push(value[0])\n+    return value\n+  }\n+\n+  cache.get = (index) => {\n+    if (index >= store.length) {\n+      throw RangeError(`Can't resolve reference ${index + 1}`)\n     }\n-    return s - 1\n+\n+    return store[index]\n   }\n-  var error = function (type,\n-    msg, filename, line) {\n-    throw new $global[type](msg, filename, line)\n+\n+  return cache\n+}\n+\n+function expectType (str, cache) {\n+  const types = /^(?:N(?=;)|[bidsSaOCrR](?=:)|[^:]+(?=:))/g\n+  const type = (types.exec(str) || [])[0]\n+\n+  if (!type) {\n+    throw SyntaxError('Invalid input: ' + str)\n   }\n-  var readUntil = function (data, offset, stopchr) {\n-    var i = 2\n-    var buf = []\n-    var chr = data.slice(offset, offset + 1)\n-\n-    while (chr !== stopchr) {\n-      if ((i + offset) > data.length) {\n-        error('Error', 'Invalid')\n-      }\n-      buf.push(chr)\n-      chr = data.slice(offset + (i - 1), offset + i)\n-      i += 1\n-    }\n-    return [buf.length, buf.join('')]\n+\n+  switch (type) {\n+    case 'N':\n+      return cache([null, 2])\n+    case 'b':\n+      return cache(expectBool(str))\n+    case 'i':\n+      return cache(expectInt(str))\n+    case 'd':\n+      return cache(expectFloat(str))\n+    case 's':\n+      return cache(expectString(str))\n+    case 'S':\n+      return cache(expectEscapedString(str))\n+    case 'a':\n+      return expectArray(str, cache)\n+    case 'O':\n+      return expectObject(str, cache)\n+    case 'C':\n+      return expectClass(str, cache)\n+    case 'r':\n+    case 'R':\n+      return expectReference(str, cache)\n+    default:\n+      throw SyntaxError(`Invalid or unsupported data type: ${type}`)\n   }\n-  var readChrs = function (data, offset, length) {\n-    var i, chr, buf\n-\n-    buf = []\n-    for (i = 0; i < length; i++) {\n-      chr = data.slice(offset + (i - 1), offset + i)\n-      buf.push(chr)\n-      length -= utf8Overhead(chr)\n-    }\n-    return [buf.length, buf.join('')]\n+}\n+\n+function expectBool (str) {\n+  const reBool = /^b:([01]);/\n+  const [match, boolMatch] = reBool.exec(str) || []\n+\n+  if (!boolMatch) {\n+    throw SyntaxError('Invalid bool value, expected 0 or 1')\n   }\n-  function _unserialize (data, offset) {\n-    var dtype\n-    var dataoffset\n-    var keyandchrs\n-    var keys\n-    var contig\n-    var length\n-    var array\n-    var readdata\n-    var readData\n-    var ccount\n-    var stringlength\n-    var i\n-    var key\n-    var kprops\n-    var kchrs\n-    var vprops\n-    var vchrs\n-    var value\n-    var chrs = 0\n-    var typeconvert = function (x) {\n-      return x\n-    }\n \n-    if (!offset) {\n-      offset = 0\n+  return [boolMatch === '1', match.length]\n+}\n+\n+function expectInt (str) {\n+  const reInt = /^i:([+-]?\\d+);/\n+  const [match, intMatch] = reInt.exec(str) || []\n+\n+  if (!intMatch) {\n+    throw SyntaxError('Expected an integer value')\n+  }\n+\n+  return [parseInt(intMatch, 10), match.length]\n+}\n+\n+function expectFloat (str) {\n+  const reFloat = /^d:(NAN|-?INF|(?:\\d+\\.\\d*|\\d*\\.\\d+|\\d+)(?:[eE][+-]\\d+)?);/\n+  const [match, floatMatch] = reFloat.exec(str) || []\n+\n+  if (!floatMatch) {\n+    throw SyntaxError('Expected a float value')\n+  }\n+\n+  let floatValue\n+\n+  switch (floatMatch) {\n+    case 'NAN':\n+      floatValue = Number.NaN\n+      break\n+    case '-INF':\n+      floatValue = Number.NEGATIVE_INFINITY\n+      break\n+    case 'INF':\n+      floatValue = Number.POSITIVE_INFINITY\n+      break\n+    default:\n+      floatValue = parseFloat(floatMatch)\n+      break\n+  }\n+\n+  return [floatValue, match.length]\n+}\n+\n+function readBytes (str, len, escapedString = false) {\n+  let bytes = 0\n+  let out = ''\n+  let c = 0\n+  const strLen = str.length\n+  let wasHighSurrogate = false\n+  let escapedChars = 0\n+\n+  while (bytes < len && c < strLen) {\n+    let chr = str.charAt(c)\n+    const code = chr.charCodeAt(0)\n+    const isHighSurrogate = code >= 0xd800 && code <= 0xdbff\n+    const isLowSurrogate = code >= 0xdc00 && code <= 0xdfff\n+\n+    if (escapedString && chr === '\\\\') {\n+      chr = String.fromCharCode(parseInt(str.substr(c + 1, 2), 16))\n+      escapedChars++\n+\n+      // each escaped sequence is 3 characters. Go 2 chars ahead.\n+      // third character will be jumped over a few lines later\n+      c += 2\n     }\n-    dtype = (data.slice(offset, offset + 1)).toLowerCase()\n-\n-    dataoffset = offset + 2\n-\n-    switch (dtype) {\n-      case 'i':\n-        typeconvert = function (x) {\n-          return parseInt(x, 10)\n-        }\n-        readData = readUntil(data, dataoffset, ';')\n-        chrs = readData[0]\n-        readdata = readData[1]\n-        dataoffset += chrs + 1\n-        break\n-      case 'b':\n-        typeconvert = function (x) {\n-          return parseInt(x, 10) !== 0\n-        }\n-        readData = readUntil(data, dataoffset, ';')\n-        chrs = readData[0]\n-        readdata = readData[1]\n-        dataoffset += chrs + 1\n-        break\n-      case 'd':\n-        typeconvert = function (x) {\n-          return parseFloat(x)\n-        }\n-        readData = readUntil(data, dataoffset, ';')\n-        chrs = readData[0]\n-        readdata = readData[1]\n-        dataoffset += chrs + 1\n-        break\n-      case 'n':\n-        readdata = null\n-        break\n-      case 's':\n-        ccount = readUntil(data, dataoffset, ':')\n-        chrs = ccount[0]\n-        stringlength = ccount[1]\n-        dataoffset += chrs + 2\n-\n-        readData = readChrs(data, dataoffset + 1, parseInt(stringlength, 10))\n-        chrs = readData[0]\n-        readdata = readData[1]\n-        dataoffset += chrs + 2\n-        if (chrs !== parseInt(stringlength, 10) && chrs !== readdata.length) {\n-          error('SyntaxError', 'String length mismatch')\n-        }\n-        break\n-      case 'a':\n-        readdata = {}\n-\n-        keyandchrs = readUntil(data, dataoffset, ':')\n-        chrs = keyandchrs[0]\n-        keys = keyandchrs[1]\n-        dataoffset += chrs + 2\n-\n-        length = parseInt(keys, 10)\n-        contig = true\n-\n-        for (i = 0; i < length; i++) {\n-          kprops = _unserialize(data, dataoffset)\n-          kchrs = kprops[1]\n-          key = kprops[2]\n-          dataoffset += kchrs\n-\n-          vprops = _unserialize(data, dataoffset)\n-          vchrs = vprops[1]\n-          value = vprops[2]\n-          dataoffset += vchrs\n-\n-          if (key !== i) {\n-            contig = false\n-          }\n-\n-          readdata[key] = value\n-        }\n-\n-        if (contig) {\n-          array = new Array(length)\n-          for (i = 0; i < length; i++) {\n-            array[i] = readdata[i]\n-          }\n-          readdata = array\n-        }\n-\n-        dataoffset += 1\n-        break\n-      default:\n-        error('SyntaxError', 'Unknown / Unhandled data type(s): ' + dtype)\n-        break\n+\n+    c++\n+\n+    bytes += isHighSurrogate || (isLowSurrogate && wasHighSurrogate)\n+      // if high surrogate, count 2 bytes, as expectation is to be followed by low surrogate\n+      // if low surrogate preceded by high surrogate, add 2 bytes\n+      ? 2\n+      : code > 0x7ff\n+        // otherwise low surrogate falls into this part\n+        ? 3\n+        : code > 0x7f\n+          ? 2\n+          : 1\n+\n+    // if high surrogate is not followed by low surrogate, add 1 more byte\n+    bytes += wasHighSurrogate && !isLowSurrogate ? 1 : 0\n+\n+    out += chr\n+    wasHighSurrogate = isHighSurrogate\n+  }\n+\n+  return [out, bytes, escapedChars]\n+}\n+\n+function expectString (str) {\n+  // PHP strings consist of one-byte characters.\n+  // JS uses 2 bytes with possible surrogate pairs.\n+  // Serialized length of 2 is still 1 JS string character\n+  const reStrLength = /^s:(\\d+):\"/g // also match the opening \" char\n+  const [match, byteLenMatch] = reStrLength.exec(str) || []\n+\n+  if (!match) {\n+    throw SyntaxError('Expected a string value')\n+  }\n+\n+  const len = parseInt(byteLenMatch, 10)\n+\n+  str = str.substr(match.length)\n+\n+  const [strMatch, bytes] = readBytes(str, len)\n+\n+  if (bytes !== len) {\n+    throw SyntaxError(`Expected string of ${len} bytes, but got ${bytes}`)\n+  }\n+\n+  str = str.substr(strMatch.length)\n+\n+  // strict parsing, match closing \"; chars\n+  if (!str.startsWith('\";')) {\n+    throw SyntaxError('Expected \";')\n+  }\n+\n+  return [strMatch, match.length + strMatch.length + 2] // skip last \";\n+}\n+\n+function expectEscapedString (str) {\n+  const reStrLength = /^S:(\\d+):\"/g // also match the opening \" char\n+  const [match, strLenMatch] = reStrLength.exec(str) || []\n+\n+  if (!match) {\n+    throw SyntaxError('Expected an escaped string value')\n+  }\n+\n+  const len = parseInt(strLenMatch, 10)\n+\n+  str = str.substr(match.length)\n+\n+  const [strMatch, bytes, escapedChars] = readBytes(str, len, true)\n+\n+  if (bytes !== len) {\n+    throw SyntaxError(`Expected escaped string of ${len} bytes, but got ${bytes}`)\n+  }\n+\n+  str = str.substr(strMatch.length + escapedChars * 2)\n+\n+  // strict parsing, match closing \"; chars\n+  if (!str.startsWith('\";')) {\n+    throw SyntaxError('Expected \";')\n+  }\n+\n+  return [strMatch, match.length + strMatch.length + 2] // skip last \";\n+}\n+\n+function expectKeyOrIndex (str) {\n+  try {\n+    return expectString(str)\n+  } catch (err) {}\n+\n+  try {\n+    return expectEscapedString(str)\n+  } catch (err) {}\n+\n+  try {\n+    return expectInt(str)\n+  } catch (err) {\n+    throw SyntaxError('Expected key or index')\n+  }\n+}\n+\n+function expectObject (str, cache) {\n+  // O:<class name length>:\"class name\":<prop count>:{<props and values>}\n+  // O:8:\"stdClass\":2:{s:3:\"foo\";s:3:\"bar\";s:3:\"bar\";s:3:\"baz\";}\n+  const reObjectLiteral = /^O:(\\d+):\"([^\"]+)\":(\\d+):\\{/\n+  const [objectLiteralBeginMatch, /* classNameLengthMatch */, className, propCountMatch] = reObjectLiteral.exec(str) || []\n+\n+  if (!objectLiteralBeginMatch) {\n+    throw SyntaxError('Invalid input')\n+  }\n+\n+  if (className !== 'stdClass') {\n+    throw SyntaxError(`Unsupported object type: ${className}`)\n+  }\n+\n+  let totalOffset = objectLiteralBeginMatch.length\n+\n+  const propCount = parseInt(propCountMatch, 10)\n+  const obj = {}\n+  cache([obj])\n+\n+  str = str.substr(totalOffset)\n+\n+  for (let i = 0; i < propCount; i++) {\n+    const prop = expectKeyOrIndex(str)\n+    str = str.substr(prop[1])\n+    totalOffset += prop[1]\n+\n+    const value = expectType(str, cache)\n+    str = str.substr(value[1])\n+    totalOffset += value[1]\n+\n+    obj[prop[0]] = value[0]\n+  }\n+\n+  // strict parsing, expect } after object literal\n+  if (str.charAt(0) !== '}') {\n+    throw SyntaxError('Expected }')\n+  }\n+\n+  return [obj, totalOffset + 1] // skip final }\n+}\n+\n+function expectClass (str, cache) {\n+  // can't be well supported, because requires calling eval (or similar)\n+  // in order to call serialized constructor name\n+  // which is unsafe\n+  // or assume that constructor is defined in global scope\n+  // but this is too much limiting\n+  throw Error('Not yet implemented')\n+}\n+\n+function expectReference (str, cache) {\n+  const reRef = /^[rR]:([1-9]\\d*);/\n+  const [match, refIndex] = reRef.exec(str) || []\n+\n+  if (!match) {\n+    throw SyntaxError('Expected reference value')\n+  }\n+\n+  return [cache.get(parseInt(refIndex, 10) - 1), match.length]\n+}\n+\n+function expectArray (str, cache) {\n+  const reArrayLength = /^a:(\\d+):{/\n+  const [arrayLiteralBeginMatch, arrayLengthMatch] = reArrayLength.exec(str) || []\n+\n+  if (!arrayLengthMatch) {\n+    throw SyntaxError('Expected array length annotation')\n+  }\n+\n+  str = str.substr(arrayLiteralBeginMatch.length)\n+\n+  const array = expectArrayItems(str, parseInt(arrayLengthMatch, 10), cache)\n+\n+  // strict parsing, expect closing } brace after array literal\n+  if (str.charAt(array[1]) !== '}') {\n+    throw SyntaxError('Expected }')\n+  }\n+\n+  return [array[0], arrayLiteralBeginMatch.length + array[1] + 1] // jump over }\n+}\n+\n+function expectArrayItems (str, expectedItems = 0, cache) {\n+  let key\n+  let hasStringKeys = false\n+  let item\n+  let totalOffset = 0\n+  let items = []\n+  cache([items])\n+\n+  for (let i = 0; i < expectedItems; i++) {\n+    key = expectKeyOrIndex(str)\n+\n+    // this is for backward compatibility with previous implementation\n+    if (!hasStringKeys) {\n+      hasStringKeys = (typeof key[0] === 'string')\n     }\n-    return [dtype, dataoffset - offset, typeconvert(readdata)]\n+\n+    str = str.substr(key[1])\n+    totalOffset += key[1]\n+\n+    // references are resolved immediately, so if duplicate key overwrites previous array index\n+    // the old value is anyway resolved\n+    // fixme: but next time the same reference should point to the new value\n+    item = expectType(str, cache)\n+    str = str.substr(item[1])\n+    totalOffset += item[1]\n+\n+    items[key[0]] = item[0]\n+  }\n+\n+  // this is for backward compatibility with previous implementation\n+  if (hasStringKeys) {\n+    items = Object.assign({}, items)\n   }\n \n-  return _unserialize((data + ''), 0)[2]\n+  return [items, totalOffset]\n+}\n+\n+module.exports = function unserialize (str) {\n+  //       discuss at: https://locutus.io/php/unserialize/\n+  //      original by: Arpad Ray (mailto:arpad@php.net)\n+  //      improved by: Pedro Tainha (https://www.pedrotainha.com)\n+  //      improved by: Kevin van Zonneveld (https://kvz.io)\n+  //      improved by: Kevin van Zonneveld (https://kvz.io)\n+  //      improved by: Chris\n+  //      improved by: James\n+  //      improved by: Le Torbi\n+  //      improved by: Eli Skeggs\n+  //      bugfixed by: dptr1988\n+  //      bugfixed by: Kevin van Zonneveld (https://kvz.io)\n+  //      bugfixed by: Brett Zamir (https://brett-zamir.me)\n+  //      bugfixed by: philippsimon (https://github.com/philippsimon/)\n+  //       revised by: d3x\n+  //         input by: Brett Zamir (https://brett-zamir.me)\n+  //         input by: Martin (https://www.erlenwiese.de/)\n+  //         input by: kilops\n+  //         input by: Jaroslaw Czarniak\n+  //         input by: lovasoa (https://github.com/lovasoa/)\n+  //      improved by: Rafa\u0142 Kukawski\n+  // reimplemented by: Rafa\u0142 Kukawski\n+  //           note 1: We feel the main purpose of this function should be\n+  //           note 1: to ease the transport of data between php & js\n+  //           note 1: Aiming for PHP-compatibility, we have to translate objects to arrays\n+  //        example 1: unserialize('a:3:{i:0;s:5:\"Kevin\";i:1;s:3:\"van\";i:2;s:9:\"Zonneveld\";}')\n+  //        returns 1: ['Kevin', 'van', 'Zonneveld']\n+  //        example 2: unserialize('a:2:{s:9:\"firstName\";s:5:\"Kevin\";s:7:\"midName\";s:3:\"van\";}')\n+  //        returns 2: {firstName: 'Kevin', midName: 'van'}\n+  //        example 3: unserialize('a:3:{s:2:\"\u00fc\";s:2:\"\u00fc\";s:3:\"\u56db\";s:3:\"\u56db\";s:4:\"\ud841\udf0e\";s:4:\"\ud841\udf0e\";}')\n+  //        returns 3: {'\u00fc': '\u00fc', '\u56db': '\u56db', '\ud841\udf0e': '\ud841\udf0e'}\n+  //        example 4: unserialize(undefined)\n+  //        returns 4: false\n+  //        example 5: unserialize('O:8:\"stdClass\":1:{s:3:\"foo\";b:1;}')\n+  //        returns 5: { foo: true }\n+  //        example 6: unserialize('a:2:{i:0;N;i:1;s:0:\"\";}')\n+  //        returns 6: [null, \"\"]\n+  //        example 7: unserialize('S:7:\"\\\\65\\\\73\\\\63\\\\61\\\\70\\\\65\\\\64\";')\n+  //        returns 7: 'escaped'\n+\n+  try {\n+    if (typeof str !== 'string') {\n+      return false\n+    }\n+\n+    return expectType(str, initCache())[0]\n+  } catch (err) {\n+    console.error(err)\n+    return false\n+  }\n }\n {% endcodeblock %}\n\\ No newline at end of file\n", "diff --git a/website/source/php/var/var_dump.html b/website/source/php/var/var_dump.html\nindex bbbf43627..7de5caf87 100644\n--- a/website/source/php/var/var_dump.html\n+++ b/website/source/php/var/var_dump.html\n@@ -21,8 +21,8 @@ layout: function\n title: PHP's var_dump in JavaScript\n description: >-\n   Here\u2019s what our current JavaScript equivalent to <a\n-  href=\"https://php.net/manual/en/function.var-dump.php\">PHP's var_dump</a> looks\n-  like.\n+  href=\"https://php.net/manual/en/function.var-dump.php\">PHP's var_dump</a>\n+  looks like.\n function: var_dump\n category: var\n language: php\n@@ -43,15 +43,15 @@ alias:\n   //   example 1: var_dump(1)\n   //   returns 1: 'int(1)'\n \n-  var echo = require('../strings/echo')\n-  var output = ''\n-  var padChar = ' '\n-  var padVal = 4\n-  var lgth = 0\n-  var i = 0\n+  const echo = require('../strings/echo')\n+  let output = ''\n+  const padChar = ' '\n+  const padVal = 4\n+  let lgth = 0\n+  let i = 0\n \n-  var _getFuncName = function (fn) {\n-    var name = (/\\W*function\\s+([\\w$]+)\\s*\\(/)\n+  const _getFuncName = function (fn) {\n+    const name = (/\\W*function\\s+([\\w$]+)\\s*\\(/)\n       .exec(fn)\n     if (!name) {\n       return '(Anonymous)'\n@@ -59,15 +59,15 @@ alias:\n     return name[1]\n   }\n \n-  var _repeatChar = function (len, padChar) {\n-    var str = ''\n-    for (var i = 0; i < len; i++) {\n+  const _repeatChar = function (len, padChar) {\n+    let str = ''\n+    for (let i = 0; i < len; i++) {\n       str += padChar\n     }\n     return str\n   }\n-  var _getInnerVal = function (val, thickPad) {\n-    var ret = ''\n+  const _getInnerVal = function (val, thickPad) {\n+    let ret = ''\n     if (val === null) {\n       ret = 'NULL'\n     } else if (typeof val === 'boolean') {\n@@ -85,10 +85,10 @@ alias:\n       // only exist in this exact form in JavaScript\n       ret = 'undefined'\n     } else if (typeof val === 'function') {\n-      var funcLines = val.toString()\n+      const funcLines = val.toString()\n         .split('\\n')\n       ret = ''\n-      for (var i = 0, fll = funcLines.length; i < fll; i++) {\n+      for (let i = 0, fll = funcLines.length; i < fll; i++) {\n         ret += (i !== 0 ? '\\n' + thickPad : '') + funcLines[i]\n       }\n     } else if (val instanceof Date) {\n@@ -150,24 +150,24 @@ alias:\n       curDepth++\n     }\n \n-    var basePad = _repeatChar(padVal * (curDepth - 1), padChar)\n-    var thickPad = _repeatChar(padVal * (curDepth + 1), padChar)\n-    var str = ''\n-    var val = ''\n+    const basePad = _repeatChar(padVal * (curDepth - 1), padChar)\n+    const thickPad = _repeatChar(padVal * (curDepth + 1), padChar)\n+    let str = ''\n+    let val = ''\n \n     if (typeof obj === 'object' && obj !== null) {\n       if (obj.constructor && _getFuncName(obj.constructor) === 'LOCUTUS_Resource') {\n         return obj.var_dump()\n       }\n       lgth = 0\n-      for (var someProp in obj) {\n+      for (const someProp in obj) {\n         if (obj.hasOwnProperty(someProp)) {\n           lgth++\n         }\n       }\n       str += 'array(' + lgth + ') {\\n'\n-      for (var key in obj) {\n-        var objVal = obj[key]\n+      for (const key in obj) {\n+        const objVal = obj[key]\n         if (typeof objVal === 'object' &&\n           objVal !== null &&\n           !(objVal instanceof Date) &&\n", "diff --git a/website/source/php/var/var_export.html b/website/source/php/var/var_export.html\nindex daadbc4c4..a4ec5a9b8 100644\n--- a/website/source/php/var/var_export.html\n+++ b/website/source/php/var/var_export.html\n@@ -6,11 +6,17 @@ examples:\n   - |-\n     var data = 'Kevin'\n     var_export(data, true)\n+  - 'var_export({0: ''Kevin'', 1: ''van'', ''lastName'': ''Zonneveld''}, true)'\n+  - 'var_export([], true)'\n+  - 'var_export({ test: [ ''a'', ''b'' ] }, true)'\n estarget: es5\n returns:\n   - 'null'\n-  - '\"array (\\n  0 => ''Kevin'',\\n  1 => ''van'',\\n  2 => ''Zonneveld''\\n)\"'\n+  - '\"array (\\n  0 => ''Kevin'',\\n  1 => ''van'',\\n  2 => ''Zonneveld'',\\n)\"'\n   - '\"''Kevin''\"'\n+  - '\"array (\\n  0 => ''Kevin'',\\n  1 => ''van'',\\n  ''lastName'' => ''Zonneveld'',\\n)\"'\n+  - '\"array (\\n)\"'\n+  - '\"array (\\n  ''test'' =>\\n  array (\\n    0 => ''a'',\\n    1 => ''b'',\\n  ),\\n)\"'\n dependencies: []\n authors:\n   original by:\n@@ -21,6 +27,9 @@ authors:\n   bugfixed by:\n     - 'Brett Zamir (https://brett-zamir.me)'\n     - 'Brett Zamir (https://brett-zamir.me)'\n+    - 'simivar (https://github.com/simivar)'\n+    - 'simivar (https://github.com/simivar)'\n+    - 'simivar (https://github.com/simivar)'\n   input by:\n     - 'Brian Tafoya (https://www.premasolutions.com/)'\n     - 'Hans Henrik (https://hanshenrik.tk/)'\n@@ -51,45 +60,59 @@ alias:\n   //    input by: Hans Henrik (https://hanshenrik.tk/)\n   // bugfixed by: Brett Zamir (https://brett-zamir.me)\n   // bugfixed by: Brett Zamir (https://brett-zamir.me)\n+  // bugfixed by: simivar (https://github.com/simivar)\n+  // bugfixed by: simivar (https://github.com/simivar)\n+  // bugfixed by: simivar (https://github.com/simivar)\n   //   example 1: var_export(null)\n   //   returns 1: null\n   //   example 2: var_export({0: 'Kevin', 1: 'van', 2: 'Zonneveld'}, true)\n-  //   returns 2: \"array (\\n  0 => 'Kevin',\\n  1 => 'van',\\n  2 => 'Zonneveld'\\n)\"\n+  //   returns 2: \"array (\\n  0 => 'Kevin',\\n  1 => 'van',\\n  2 => 'Zonneveld',\\n)\"\n   //   example 3: var data = 'Kevin'\n   //   example 3: var_export(data, true)\n   //   returns 3: \"'Kevin'\"\n+  //   example 4: var_export({0: 'Kevin', 1: 'van', 'lastName': 'Zonneveld'}, true)\n+  //   returns 4: \"array (\\n  0 => 'Kevin',\\n  1 => 'van',\\n  'lastName' => 'Zonneveld',\\n)\"\n+  //   example 5: var_export([], true)\n+  //   returns 5: \"array (\\n)\"\n+  //   example 6: var_export({ test: [ 'a', 'b' ] }, true)\n+  //   returns 6: \"array (\\n  'test' =>\\n  array (\\n    0 => 'a',\\n    1 => 'b',\\n  ),\\n)\"\n \n-  var echo = require('../strings/echo')\n-  var retstr = ''\n-  var iret = ''\n-  var value\n-  var cnt = 0\n-  var x = []\n-  var i = 0\n-  var funcParts = []\n+  const echo = require('../strings/echo')\n+  let retstr = ''\n+  let iret = ''\n+  let value\n+  let cnt = 0\n+  const x = []\n+  let i = 0\n+  let funcParts = []\n   // We use the last argument (not part of PHP) to pass in\n   // our indentation level\n-  var idtLevel = arguments[2] || 2\n-  var innerIndent = ''\n-  var outerIndent = ''\n-  var getFuncName = function (fn) {\n-    var name = (/\\W*function\\s+([\\w$]+)\\s*\\(/).exec(fn)\n+  const idtLevel = arguments[2] || 2\n+  let innerIndent = ''\n+  let outerIndent = ''\n+  const getFuncName = function (fn) {\n+    const name = (/\\W*function\\s+([\\w$]+)\\s*\\(/).exec(fn)\n     if (!name) {\n       return '(Anonymous)'\n     }\n     return name[1]\n   }\n \n-  var _makeIndent = function (idtLevel) {\n+  const _isNormalInteger = function (string) {\n+    const number = Math.floor(Number(string))\n+    return number !== Infinity && String(number) === string && number >= 0\n+  }\n+\n+  const _makeIndent = function (idtLevel) {\n     return (new Array(idtLevel + 1))\n       .join(' ')\n   }\n-  var __getType = function (inp) {\n-    var i = 0\n-    var match\n-    var types\n-    var cons\n-    var type = typeof inp\n+  const __getType = function (inp) {\n+    let i = 0\n+    let match\n+    let types\n+    let cons\n+    let type = typeof inp\n     if (type === 'object' && (inp && inp.constructor) &&\n       getFuncName(inp.constructor) === 'LOCUTUS_Resource') {\n       return 'resource'\n@@ -120,7 +143,7 @@ alias:\n     }\n     return type\n   }\n-  var type = __getType(mixedExpression)\n+  const type = __getType(mixedExpression)\n \n   if (type === null) {\n     retstr = 'NULL'\n@@ -128,14 +151,19 @@ alias:\n     outerIndent = _makeIndent(idtLevel - 2)\n     innerIndent = _makeIndent(idtLevel)\n     for (i in mixedExpression) {\n-      value = var_export(mixedExpression[i], 1, idtLevel + 2)\n-      value = typeof value === 'string' ? value.replace(/</g, '&lt;')\n-        .replace(/>/g, '&gt;') : value\n-      x[cnt++] = innerIndent + i + ' => ' +\n-        (__getType(mixedExpression[i]) === 'array' ? '\\n' : '') + value\n+      value = ' '\n+      const subtype = __getType(mixedExpression[i])\n+      if (subtype === 'array' || subtype === 'object') {\n+        value = '\\n'\n+      }\n+      value += var_export(mixedExpression[i], 1, idtLevel + 2)\n+      i = _isNormalInteger(i) ? i : `'${i}'`\n+      x[cnt++] = innerIndent + i + ' =>' + value\n+    }\n+    if (x.length > 0) {\n+      iret = x.join(',\\n') + ',\\n'\n     }\n-    iret = x.join(',\\n')\n-    retstr = outerIndent + 'array (\\n' + iret + '\\n' + outerIndent + ')'\n+    retstr = outerIndent + 'array (\\n' + iret + outerIndent + ')'\n   } else if (type === 'function') {\n     funcParts = mixedExpression.toString().match(/function .*?\\((.*?)\\) \\{([\\s\\S]*)\\}/)\n \n", "diff --git a/website/source/php/xdiff/xdiff_string_diff.html b/website/source/php/xdiff/xdiff_string_diff.html\nindex d4148794a..f2b28ce9e 100644\n--- a/website/source/php/xdiff/xdiff_string_diff.html\n+++ b/website/source/php/xdiff/xdiff_string_diff.html\n@@ -45,33 +45,33 @@ alias:\n   // (This code was done by Imgen Tata; I have only reformatted for use in Locutus)\n \n   // See https://en.wikipedia.org/wiki/Diff#Unified_format\n-  var i = 0\n-  var j = 0\n-  var k = 0\n-  var oriHunkStart\n-  var newHunkStart\n-  var oriHunkEnd\n-  var newHunkEnd\n-  var oriHunkLineNo\n-  var newHunkLineNo\n-  var oriHunkSize\n-  var newHunkSize\n-  var MAX_CONTEXT_LINES = Number.POSITIVE_INFINITY // Potential configuration\n-  var MIN_CONTEXT_LINES = 0\n-  var DEFAULT_CONTEXT_LINES = 3\n-  var HEADER_PREFIX = '@@ ' //\n-  var HEADER_SUFFIX = ' @@'\n-  var ORIGINAL_INDICATOR = '-'\n-  var NEW_INDICATOR = '+'\n-  var RANGE_SEPARATOR = ','\n-  var CONTEXT_INDICATOR = ' '\n-  var DELETION_INDICATOR = '-'\n-  var ADDITION_INDICATOR = '+'\n-  var oriLines\n-  var newLines\n-  var NEW_LINE = '\\n'\n-\n-  var _trim = function (text) {\n+  let i = 0\n+  let j = 0\n+  let k = 0\n+  let oriHunkStart\n+  let newHunkStart\n+  let oriHunkEnd\n+  let newHunkEnd\n+  let oriHunkLineNo\n+  let newHunkLineNo\n+  let oriHunkSize\n+  let newHunkSize\n+  const MAX_CONTEXT_LINES = Number.POSITIVE_INFINITY // Potential configuration\n+  const MIN_CONTEXT_LINES = 0\n+  const DEFAULT_CONTEXT_LINES = 3\n+  const HEADER_PREFIX = '@@ ' //\n+  const HEADER_SUFFIX = ' @@'\n+  const ORIGINAL_INDICATOR = '-'\n+  const NEW_INDICATOR = '+'\n+  const RANGE_SEPARATOR = ','\n+  const CONTEXT_INDICATOR = ' '\n+  const DELETION_INDICATOR = '-'\n+  const ADDITION_INDICATOR = '+'\n+  let oriLines\n+  let newLines\n+  const NEW_LINE = '\\n'\n+\n+  const _trim = function (text) {\n     if (typeof text !== 'string') {\n       throw new Error('String parameter required')\n     }\n@@ -79,14 +79,14 @@ alias:\n     return text.replace(/(^\\s*)|(\\s*$)/g, '')\n   }\n \n-  var _verifyType = function (type) {\n-    var args = arguments\n-    var argsLen = arguments.length\n-    var basicTypes = ['number', 'boolean', 'string', 'function', 'object', 'undefined']\n-    var basicType\n-    var i\n-    var j\n-    var typeOfType = typeof type\n+  const _verifyType = function (type) {\n+    const args = arguments\n+    const argsLen = arguments.length\n+    const basicTypes = ['number', 'boolean', 'string', 'function', 'object', 'undefined']\n+    let basicType\n+    let i\n+    let j\n+    const typeOfType = typeof type\n     if (typeOfType !== 'string' && typeOfType !== 'function') {\n       throw new Error('Bad type parameter')\n     }\n@@ -127,8 +127,8 @@ alias:\n     }\n   }\n \n-  var _hasValue = function (array, value) {\n-    var i\n+  const _hasValue = function (array, value) {\n+    let i\n     _verifyType(Array, array)\n \n     for (i = 0; i < array.length; i++) {\n@@ -140,14 +140,14 @@ alias:\n     return false\n   }\n \n-  var _areTypeOf = function (type) {\n-    var args = arguments\n-    var argsLen = arguments.length\n-    var basicTypes = ['number', 'boolean', 'string', 'function', 'object', 'undefined']\n-    var basicType\n-    var i\n-    var j\n-    var typeOfType = typeof type\n+  const _areTypeOf = function (type) {\n+    const args = arguments\n+    const argsLen = arguments.length\n+    const basicTypes = ['number', 'boolean', 'string', 'function', 'object', 'undefined']\n+    let basicType\n+    let i\n+    let j\n+    const typeOfType = typeof type\n \n     if (typeOfType !== 'string' && typeOfType !== 'function') {\n       throw new Error('Bad type parameter')\n@@ -191,9 +191,9 @@ alias:\n     return true\n   }\n \n-  var _getInitializedArray = function (arraySize, initValue) {\n-    var array = []\n-    var i\n+  const _getInitializedArray = function (arraySize, initValue) {\n+    const array = []\n+    let i\n     _verifyType('number', arraySize)\n \n     for (i = 0; i < arraySize; i++) {\n@@ -203,7 +203,7 @@ alias:\n     return array\n   }\n \n-  var _splitIntoLines = function (text) {\n+  const _splitIntoLines = function (text) {\n     _verifyType('string', text)\n \n     if (text === '') {\n@@ -212,7 +212,7 @@ alias:\n     return text.split('\\n')\n   }\n \n-  var _isEmptyArray = function (obj) {\n+  const _isEmptyArray = function (obj) {\n     return _areTypeOf(Array, obj) && obj.length === 0\n   }\n \n@@ -220,7 +220,7 @@ alias:\n    * Finds longest common sequence between two sequences\n    * @see {@link https://wordaligned.org/articles/longest-common-subsequence}\n    */\n-  var _findLongestCommonSequence = function (seq1, seq2, seq1IsInLcs, seq2IsInLcs) {\n+  const _findLongestCommonSequence = function (seq1, seq2, seq1IsInLcs, seq2IsInLcs) {\n     if (!_areTypeOf(Array, seq1, seq2)) {\n       throw new Error('Array parameters are required')\n     }\n@@ -231,11 +231,11 @@ alias:\n     }\n \n     // Function to calculate lcs lengths\n-    var lcsLens = function (xs, ys) {\n-      var i\n-      var j\n-      var prev\n-      var curr = _getInitializedArray(ys.length + 1, 0)\n+    const lcsLens = function (xs, ys) {\n+      let i\n+      let j\n+      let prev\n+      const curr = _getInitializedArray(ys.length + 1, 0)\n \n       for (i = 0; i < xs.length; i++) {\n         prev = curr.slice(0)\n@@ -253,17 +253,17 @@ alias:\n \n     // Function to find lcs and fill in the array to indicate the optimal longest common sequence\n     var _findLcs = function (xs, xidx, xIsIn, ys) {\n-      var i\n-      var xb\n-      var xe\n-      var llB\n-      var llE\n-      var pivot\n-      var max\n-      var yb\n-      var ye\n-      var nx = xs.length\n-      var ny = ys.length\n+      let i\n+      let xb\n+      let xe\n+      let llB\n+      let llE\n+      let pivot\n+      let max\n+      let yb\n+      let ye\n+      const nx = xs.length\n+      const ny = ys.length\n \n       if (nx === 0) {\n         return []\n@@ -320,12 +320,12 @@ alias:\n \n   oriLines = _splitIntoLines(oldData)\n   newLines = _splitIntoLines(newData)\n-  var oriLen = oriLines.length\n-  var newLen = newLines.length\n-  var oriIsInLcs = _getInitializedArray(oriLen, false)\n-  var newIsInLcs = _getInitializedArray(newLen, false)\n-  var lcsLen = _findLongestCommonSequence(oriLines, newLines, oriIsInLcs, newIsInLcs).length\n-  var unidiff = ''\n+  const oriLen = oriLines.length\n+  const newLen = newLines.length\n+  const oriIsInLcs = _getInitializedArray(oriLen, false)\n+  const newIsInLcs = _getInitializedArray(newLen, false)\n+  const lcsLen = _findLongestCommonSequence(oriLines, newLines, oriIsInLcs, newIsInLcs).length\n+  let unidiff = ''\n \n   if (lcsLen === 0) {\n     // No common sequence\n@@ -354,24 +354,24 @@ alias:\n     return unidiff\n   }\n \n-  var leadingContext = []\n-  var trailingContext = []\n-  var actualLeadingContext = []\n-  var actualTrailingContext = []\n+  let leadingContext = []\n+  let trailingContext = []\n+  let actualLeadingContext = []\n+  let actualTrailingContext = []\n \n   // Regularize leading context by the contextLines parameter\n-  var regularizeLeadingContext = function (context) {\n+  const regularizeLeadingContext = function (context) {\n     if (context.length === 0 || contextLines === 0) {\n       return []\n     }\n \n-    var contextStartPos = Math.max(context.length - contextLines, 0)\n+    const contextStartPos = Math.max(context.length - contextLines, 0)\n \n     return context.slice(contextStartPos)\n   }\n \n   // Regularize trailing context by the contextLines parameter\n-  var regularizeTrailingContext = function (context) {\n+  const regularizeTrailingContext = function (context) {\n     if (context.length === 0 || contextLines === 0) {\n       return []\n     }\n", "diff --git a/website/source/php/xdiff/xdiff_string_patch.html b/website/source/php/xdiff/xdiff_string_patch.html\nindex 018605ddb..b569d0e15 100644\n--- a/website/source/php/xdiff/xdiff_string_patch.html\n+++ b/website/source/php/xdiff/xdiff_string_patch.html\n@@ -56,7 +56,7 @@ alias:\n   // MIT License\n   // <https://xregexp.com>\n \n-  var _getNativeFlags = function (regex) {\n+  const _getNativeFlags = function (regex) {\n     // Proposed for ES4; included in AS3\n     return [\n       (regex.global ? 'g' : ''),\n@@ -67,23 +67,23 @@ alias:\n     ].join('')\n   }\n \n-  var _cbSplit = function (string, sep) {\n+  const _cbSplit = function (string, sep) {\n     // If separator `s` is not a regex, use the native `split`\n     if (!(sep instanceof RegExp)) {\n       // Had problems to get it to work here using prototype test\n       return String.prototype.split.apply(string, arguments)\n     }\n-    var str = String(string)\n-    var output = []\n-    var lastLastIndex = 0\n-    var match\n-    var lastLength\n-    var limit = Infinity\n-    var x = sep._xregexp\n+    const str = String(string)\n+    const output = []\n+    let lastLastIndex = 0\n+    let match\n+    let lastLength\n+    const limit = Infinity\n+    const x = sep._xregexp\n     // This is required if not `s.global`, and it avoids needing to set `s.lastIndex` to zero\n     // and restore it to its original value when we're done using the regex\n     // Brett paring down\n-    var s = new RegExp(sep.source, _getNativeFlags(sep) + 'g')\n+    const s = new RegExp(sep.source, _getNativeFlags(sep) + 'g')\n     if (x) {\n       s._xregexp = {\n         source: x.source,\n@@ -124,24 +124,24 @@ alias:\n     return output.length > limit ? output.slice(0, limit) : output\n   }\n \n-  var i = 0\n-  var ll = 0\n-  var ranges = []\n-  var lastLinePos = 0\n-  var firstChar = ''\n-  var rangeExp = /^@@\\s+-(\\d+),(\\d+)\\s+\\+(\\d+),(\\d+)\\s+@@$/\n-  var lineBreaks = /\\r?\\n/\n-  var lines = _cbSplit(patch.replace(/(\\r?\\n)+$/, ''), lineBreaks)\n-  var origLines = _cbSplit(originalStr, lineBreaks)\n-  var newStrArr = []\n-  var linePos = 0\n-  var errors = ''\n-  var optTemp = 0 // Both string & integer (constant) input is allowed\n-  var OPTS = {\n+  let i = 0\n+  let ll = 0\n+  let ranges = []\n+  let lastLinePos = 0\n+  let firstChar = ''\n+  const rangeExp = /^@@\\s+-(\\d+),(\\d+)\\s+\\+(\\d+),(\\d+)\\s+@@$/\n+  const lineBreaks = /\\r?\\n/\n+  const lines = _cbSplit(patch.replace(/(\\r?\\n)+$/, ''), lineBreaks)\n+  const origLines = _cbSplit(originalStr, lineBreaks)\n+  const newStrArr = []\n+  let linePos = 0\n+  const errors = ''\n+  let optTemp = 0 // Both string & integer (constant) input is allowed\n+  const OPTS = {\n     // Unsure of actual PHP values, so better to rely on string\n-    'XDIFF_PATCH_NORMAL': 1,\n-    'XDIFF_PATCH_REVERSE': 2,\n-    'XDIFF_PATCH_IGNORESPACE': 4\n+    XDIFF_PATCH_NORMAL: 1,\n+    XDIFF_PATCH_REVERSE: 2,\n+    XDIFF_PATCH_IGNORESPACE: 4\n   }\n \n   // Input defaulting & sanitation\n", "diff --git a/website/source/php/xml/utf8_decode.html b/website/source/php/xml/utf8_decode.html\nindex c43a48e15..a46ec37e6 100644\n--- a/website/source/php/xml/utf8_decode.html\n+++ b/website/source/php/xml/utf8_decode.html\n@@ -27,8 +27,8 @@ layout: function\n title: PHP's utf8_decode in JavaScript\n description: >-\n   Here\u2019s what our current JavaScript equivalent to <a\n-  href=\"https://php.net/manual/en/function.utf8-decode.php\">PHP's utf8_decode</a>\n-  looks like.\n+  href=\"https://php.net/manual/en/function.utf8-decode.php\">PHP's\n+  utf8_decode</a> looks like.\n function: utf8_decode\n category: xml\n language: php\n@@ -54,10 +54,10 @@ alias:\n   //   example 1: utf8_decode('Kevin van Zonneveld')\n   //   returns 1: 'Kevin van Zonneveld'\n \n-  var tmpArr = []\n-  var i = 0\n-  var c1 = 0\n-  var seqlen = 0\n+  const tmpArr = []\n+  let i = 0\n+  let c1 = 0\n+  let seqlen = 0\n \n   strData += ''\n \n@@ -80,7 +80,7 @@ alias:\n       seqlen = 4\n     }\n \n-    for (var ai = 1; ai < seqlen; ++ai) {\n+    for (let ai = 1; ai < seqlen; ++ai) {\n       c1 = ((c1 << 0x06) | (strData.charCodeAt(ai + i) & 0x3F))\n     }\n \n", "diff --git a/website/source/php/xml/utf8_encode.html b/website/source/php/xml/utf8_encode.html\nindex 03cf985bb..947a00fa2 100644\n--- a/website/source/php/xml/utf8_encode.html\n+++ b/website/source/php/xml/utf8_encode.html\n@@ -27,8 +27,8 @@ layout: function\n title: PHP's utf8_encode in JavaScript\n description: >-\n   Here\u2019s what our current JavaScript equivalent to <a\n-  href=\"https://php.net/manual/en/function.utf8-encode.php\">PHP's utf8_encode</a>\n-  looks like.\n+  href=\"https://php.net/manual/en/function.utf8-encode.php\">PHP's\n+  utf8_encode</a> looks like.\n function: utf8_encode\n category: xml\n language: php\n@@ -60,17 +60,17 @@ alias:\n   }\n \n   // .replace(/\\r\\n/g, \"\\n\").replace(/\\r/g, \"\\n\");\n-  var string = (argString + '')\n-  var utftext = ''\n-  var start\n-  var end\n-  var stringl = 0\n+  const string = (argString + '')\n+  let utftext = ''\n+  let start\n+  let end\n+  let stringl = 0\n \n   start = end = 0\n   stringl = string.length\n-  for (var n = 0; n < stringl; n++) {\n-    var c1 = string.charCodeAt(n)\n-    var enc = null\n+  for (let n = 0; n < stringl; n++) {\n+    let c1 = string.charCodeAt(n)\n+    let enc = null\n \n     if (c1 < 128) {\n       end++\n@@ -87,7 +87,7 @@ alias:\n       if ((c1 & 0xFC00) !== 0xD800) {\n         throw new RangeError('Unmatched trail surrogate at ' + n)\n       }\n-      var c2 = string.charCodeAt(++n)\n+      const c2 = string.charCodeAt(++n)\n       if ((c2 & 0xFC00) !== 0xDC00) {\n         throw new RangeError('Unmatched lead surrogate at ' + (n - 1))\n       }\n", "diff --git a/website/source/python/string/capwords.html b/website/source/python/string/capwords.html\nindex 8a6014bc8..91a84e757 100644\n--- a/website/source/python/string/capwords.html\n+++ b/website/source/python/string/capwords.html\n@@ -49,7 +49,7 @@ alias:\n   //   example 2: capwords('HELLO WORLD')\n   //   returns 2: 'HELLO WORLD'\n \n-  var pattern = /^([a-z\\u00E0-\\u00FC])|\\s+([a-z\\u00E0-\\u00FC])/g\n+  const pattern = /^([a-z\\u00E0-\\u00FC])|\\s+([a-z\\u00E0-\\u00FC])/g\n   return (str + '').replace(pattern, function ($1) {\n     return $1.toUpperCase()\n   })\n"], "label": 0, "cve": "CVE-2021-23392", "rank": 3, "commit": "af56247a4d754403102fb449e7a1143da404a730", "cve_attention_tokens": []}
{"cve_desc": "The Zip::File component in the rubyzip gem before 1.2.1 for Ruby has a directory traversal vulnerability. If a site allows uploading of .zip files, an attacker can upload a malicious file that uses \"../\" pathname substrings to write arbitrary files to the filesystem.", "commit_msg": "Merge pull request #313 from koic/fix_deprecated_warnings\n\nFix deprecated warnings\n", "diff": [], "label": 0, "cve": "CVE-2017-5946", "rank": 50, "commit": "28c5dd5ba86663b069ceac4da8cb29cbcf5a2e86", "cve_attention_tokens": []}
{"cve_desc": "A NULL Pointer Dereference in match_at() in regexec.c in Oniguruma 6.9.2 allows attackers to potentially cause denial of service by providing a crafted regular expression. Oniguruma issues often affect Ruby, as well as common optional libraries for PHP and Rust.", "commit_msg": "add STK_PREC_READ_START/END stack type\n\n", "diff": ["diff --git a/src/regexec.c b/src/regexec.c\nindex f0e7d1a..e7818e0 100644\n--- a/src/regexec.c\n+++ b/src/regexec.c\n@@ -980,6 +980,8 @@ onig_region_copy(OnigRegion* to, OnigRegion* from)\n #define STK_CALL_FRAME             0x0400\n #define STK_RETURN                 0x0500\n #define STK_SAVE_VAL               0x0600\n+#define STK_PREC_READ_START        0x0700\n+#define STK_PREC_READ_END          0x0800\n \n /* stack type check mask */\n #define STK_MASK_POP_USED          STK_ALT_FLAG\n@@ -1544,8 +1546,8 @@ stack_double(int is_alloca, char** arg_alloc_base,\n \n #define STACK_PUSH_ALT(pat,s,sprev)       STACK_PUSH(STK_ALT,pat,s,sprev)\n #define STACK_PUSH_SUPER_ALT(pat,s,sprev) STACK_PUSH(STK_SUPER_ALT,pat,s,sprev)\n-#define STACK_PUSH_POS(s,sprev) \\\n-  STACK_PUSH(STK_TO_VOID_START,(Operation* )0,s,sprev)\n+#define STACK_PUSH_PREC_READ_START(s,sprev) \\\n+  STACK_PUSH(STK_PREC_READ_START,(Operation* )0,s,sprev)\n #define STACK_PUSH_ALT_PREC_READ_NOT(pat,s,sprev) \\\n   STACK_PUSH(STK_ALT_PREC_READ_NOT,pat,s,sprev)\n #define STACK_PUSH_TO_VOID_START        STACK_PUSH_TYPE(STK_TO_VOID_START)\n@@ -1887,6 +1889,27 @@ stack_double(int is_alloca, char** arg_alloc_base,\n   }\\\n } while(0)\n \n+#define STACK_GET_PREC_READ_START(k) do {\\\n+  int level = 0;\\\n+  k = stk;\\\n+  while (1) {\\\n+    k--;\\\n+    STACK_BASE_CHECK(k, \"STACK_GET_PREC_READ_START\");\\\n+    if (IS_TO_VOID_TARGET(k)) {\\\n+      k->type = STK_VOID;\\\n+    }\\\n+    else if (k->type == STK_PREC_READ_START) {\\\n+      if (level == 0) {\\\n+        break;\\\n+      }\\\n+      level--;\\\n+    }\\\n+    else if (k->type == STK_PREC_READ_END) {\\\n+      level++;\\\n+    }\\\n+  }\\\n+} while(0)\n+\n #define STACK_EMPTY_CHECK(isnull,sid,s) do {\\\n   StackType* k = stk;\\\n   while (1) {\\\n@@ -3860,14 +3883,15 @@ match_at(regex_t* reg, const UChar* str, const UChar* end,\n       goto repeat_inc_ng;\n \n     CASE_OP(PREC_READ_START)\n-      STACK_PUSH_POS(s, sprev);\n+      STACK_PUSH_PREC_READ_START(s, sprev);\n       INC_OP;\n       JUMP_OUT;\n \n     CASE_OP(PREC_READ_END)\n-      STACK_EXEC_TO_VOID(stkp);\n+      STACK_GET_PREC_READ_START(stkp);\n       s     = stkp->u.state.pstr;\n       sprev = stkp->u.state.pstr_prev;\n+      STACK_PUSH(STK_PREC_READ_END,0,0,0);\n       INC_OP;\n       JUMP_OUT;\n \n"], "label": 0, "cve": "CVE-2019-13225", "rank": 22, "commit": "402c398f8017db5905f767cfe696c82efd7f6c03", "cve_attention_tokens": ["matchat", "regexec"]}
{"cve_desc": "Cross-site Scripting (XSS) - Stored in GitHub repository zulip/zulip more than and including 44f935695d452cc3fb16845a0c6af710438b153d and prior to 3eb2791c3e9695f7d37ffe84e0c2184fae665cb6.", "commit_msg": "auth: Change the look of SOCIAL_AUTH_SUBDOMAIN when directly opened.\n\nSOCIAL_AUTH_SUBDOMAIN was potentially very confusing when opened by a\nuser, as it had various Login/Signup buttons as if there was a realm on\nit. Instead, we want to display a more informative page to the user\ntelling them they shouldn't even be there. If possible, we just redirect\nthem to the realm they most likely came from.\nTo make this possible, we have to exclude the subdomain from\nROOT_SUBDOMAIN_ALIASES - so that we can give it special behavior.\n\n", "diff": ["diff --git a/templates/zerver/auth_subdomain.html b/templates/zerver/auth_subdomain.html\nnew file mode 100644\nindex 0000000000..9aeef4bf6a\n--- /dev/null\n+++ b/templates/zerver/auth_subdomain.html\n@@ -0,0 +1,25 @@\n+{% extends \"zerver/portico.html\" %}\n+\n+{% block portico_content %}\n+\n+<div class=\"error_page\">\n+    <div class=\"container\">\n+        <div class=\"row-fluid\">\n+            <img src=\"/static/images/500art.svg\" alt=\"\"/>\n+            <div class=\"errorbox\">\n+                <div class=\"errorcontent\">\n+                    <h1 class=\"lead\">Authentication subdomain</h1>\n+                    <p>\n+                        It appears you ended up here by accident. This site\n+                        is meant to be an intermediate step in the authentication process\n+                        and shouldn't be accessed manually. If you came here directly,\n+                        you probably got the address wrong. If you got stuck here while trying\n+                        to log in, this is most likely a server bug or misconfiguration.\n+                    </p>\n+                </div>\n+            </div>\n+        </div>\n+    </div>\n+</div>\n+\n+{% endblock %}\n", "diff --git a/zerver/middleware.py b/zerver/middleware.py\nindex 7aeb96a5c6..649b2e0cc2 100644\n--- a/zerver/middleware.py\n+++ b/zerver/middleware.py\n@@ -576,7 +576,10 @@ class HostDomainMiddleware(MiddlewareMixin):\n             return None\n \n         subdomain = get_subdomain(request)\n-        if subdomain != Realm.SUBDOMAIN_FOR_ROOT_DOMAIN:\n+        if (\n+            subdomain != Realm.SUBDOMAIN_FOR_ROOT_DOMAIN\n+            and subdomain != settings.SOCIAL_AUTH_SUBDOMAIN\n+        ):\n             request_notes = RequestNotes.get_notes(request)\n             try:\n                 request_notes.realm = get_realm(subdomain)\n", "diff --git a/zerver/tests/test_signup.py b/zerver/tests/test_signup.py\nindex 8fd9b0e299..356a734e42 100644\n--- a/zerver/tests/test_signup.py\n+++ b/zerver/tests/test_signup.py\n@@ -5290,6 +5290,27 @@ class TestLoginPage(ZulipTestCase):\n             response,\n         )\n \n+    @patch(\"django.http.HttpRequest.get_host\", return_value=\"auth.testserver\")\n+    def test_social_auth_subdomain_login_page(self, mock_get_host: MagicMock) -> None:\n+        result = self.client_get(\"http://auth.testserver/login/\")\n+        self.assertEqual(result.status_code, 400)\n+        self.assert_in_response(\"Authentication subdomain\", result)\n+\n+        zulip_realm = get_realm(\"zulip\")\n+        session = self.client.session\n+        session[\"subdomain\"] = \"zulip\"\n+        session.save()\n+        result = self.client_get(\"http://auth.testserver/login/\")\n+        self.assertEqual(result.status_code, 302)\n+        self.assertEqual(result.url, zulip_realm.uri)\n+\n+        session = self.client.session\n+        session[\"subdomain\"] = \"invalid\"\n+        session.save()\n+        result = self.client_get(\"http://auth.testserver/login/\")\n+        self.assertEqual(result.status_code, 400)\n+        self.assert_in_response(\"Authentication subdomain\", result)\n+\n \n class TestFindMyTeam(ZulipTestCase):\n     def test_template(self) -> None:\n", "diff --git a/zerver/views/auth.py b/zerver/views/auth.py\nindex 8282d55d9f..c3c0943b59 100644\n--- a/zerver/views/auth.py\n+++ b/zerver/views/auth.py\n@@ -731,6 +731,9 @@ def login_page(\n     next: str = REQ(default=\"/\"),\n     **kwargs: Any,\n ) -> HttpResponse:\n+    if settings.SOCIAL_AUTH_SUBDOMAIN == get_subdomain(request):\n+        return social_auth_subdomain_login_page(request)\n+\n     # To support previewing the Zulip login pages, we have a special option\n     # that disables the default behavior of redirecting logged-in users to the\n     # logged-in app.\n@@ -794,6 +797,18 @@ def login_page(\n     return template_response\n \n \n+def social_auth_subdomain_login_page(request: HttpRequest) -> HttpResponse:\n+    origin_subdomain = request.session.get(\"subdomain\")\n+    if origin_subdomain is not None:\n+        try:\n+            origin_realm = get_realm(origin_subdomain)\n+            return HttpResponseRedirect(origin_realm.uri)\n+        except Realm.DoesNotExist:\n+            pass\n+\n+    return render(request, \"zerver/auth_subdomain.html\", status=400)\n+\n+\n def start_two_factor_auth(\n     request: HttpRequest, extra_context: ExtraContext = None, **kwargs: Any\n ) -> HttpResponse:\n", "diff --git a/zproject/computed_settings.py b/zproject/computed_settings.py\nindex b8171258ac..1b1c2fee2f 100644\n--- a/zproject/computed_settings.py\n+++ b/zproject/computed_settings.py\n@@ -49,6 +49,7 @@ from .configured_settings import (\n     REMOTE_POSTGRES_HOST,\n     REMOTE_POSTGRES_PORT,\n     REMOTE_POSTGRES_SSLMODE,\n+    ROOT_SUBDOMAIN_ALIASES,\n     SENDFILE_BACKEND,\n     SENTRY_DSN,\n     SOCIAL_AUTH_APPLE_APP_ID,\n@@ -59,6 +60,7 @@ from .configured_settings import (\n     SOCIAL_AUTH_GOOGLE_KEY,\n     SOCIAL_AUTH_SAML_ENABLED_IDPS,\n     SOCIAL_AUTH_SAML_SECURITY_CONFIG,\n+    SOCIAL_AUTH_SUBDOMAIN,\n     STATSD_HOST,\n     TORNADO_PORTS,\n     USING_PGROONGA,\n@@ -1066,6 +1068,9 @@ SOCIAL_AUTH_FIELDS_STORED_IN_SESSION = [\n ]\n SOCIAL_AUTH_LOGIN_ERROR_URL = \"/login/\"\n \n+if SOCIAL_AUTH_SUBDOMAIN in ROOT_SUBDOMAIN_ALIASES:\n+    ROOT_SUBDOMAIN_ALIASES.remove(SOCIAL_AUTH_SUBDOMAIN)\n+\n # CLIENT is required by PSA's internal implementation. We name it\n # SERVICES_ID to make things more readable in the configuration\n # and our own custom backend code.\n", "diff --git a/zproject/default_settings.py b/zproject/default_settings.py\nindex 3bd0ca1682..a37423a626 100644\n--- a/zproject/default_settings.py\n+++ b/zproject/default_settings.py\n@@ -338,8 +338,7 @@ LOGIN_LINK_DISABLED = False\n FIND_TEAM_LINK_DISABLED = True\n \n # What domains to treat like the root domain\n-# \"auth\" is by default a reserved subdomain for the use by python-social-auth.\n-ROOT_SUBDOMAIN_ALIASES = [\"www\", \"auth\"]\n+ROOT_SUBDOMAIN_ALIASES = [\"www\"]\n # Whether the root domain is a landing page or can host a realm.\n ROOT_DOMAIN_LANDING_PAGE = False\n \n", "diff --git a/zproject/prod_settings_template.py b/zproject/prod_settings_template.py\nindex e4695ad4b4..f90af90c37 100644\n--- a/zproject/prod_settings_template.py\n+++ b/zproject/prod_settings_template.py\n@@ -336,10 +336,6 @@ AUTH_LDAP_USER_ATTR_MAP = {\n ## organization.  The default recommendation, `auth`, is a reserved\n ## subdomain; if you're using this setting, the \"Callback URL\" should be e.g.:\n ##   https://auth.zulip.example.com/complete/github/\n-##\n-## If you end up using a subdomain other then the default\n-## recommendation, you must also set the 'ROOT_SUBDOMAIN_ALIASES' list\n-## to include this subdomain.\n #\n # SOCIAL_AUTH_SUBDOMAIN = 'auth'\n \n"], "label": 0, "cve": "CVE-2021-3866", "rank": 58, "commit": "fb3864ea3cb2aaa27b10506cb4618f28a95c74d4", "cve_attention_tokens": []}
{"cve_desc": "October is a free, open-source, self-hosted CMS platform based on the Laravel PHP Framework. A bypass of CVE-2020-15247 (fixed in 1.0.469 and 1.1.0) was discovered that has the same impact as CVE-2020-15247. An authenticated backend user with the cms.manage_pages, cms.manage_layouts, or cms.manage_partials permissions who would normally not be permitted to provide PHP code to be executed by the CMS due to cms.enableSafeMode being enabled is able to write specific Twig code to escape the Twig sandbox and execute arbitrary PHP. This is not a problem for anyone that trusts their users with those permissions to normally write & manage PHP within the CMS by not having cms.enableSafeMode enabled, but would be a problem for anyone relying on cms.enableSafeMode to ensure that users with those permissions in production do not have access to write & execute arbitrary PHP. Issue has been patched in Build 470 (v1.0.470) and v1.1.1.", "commit_msg": "Register theme backend localization files (#4960)\n\nCloses #4308. \n", "diff": ["diff --git a/modules/cms/ServiceProvider.php b/modules/cms/ServiceProvider.php\nindex 40e170787..fd84ea3b9 100644\n--- a/modules/cms/ServiceProvider.php\n+++ b/modules/cms/ServiceProvider.php\n@@ -1,11 +1,14 @@\n <?php namespace Cms;\n \n use App;\n+use Lang;\n+use File;\n use Event;\n use Backend;\n use BackendMenu;\n use BackendAuth;\n use Backend\\Models\\UserRole;\n+use Cms\\Classes\\Theme as CmsTheme;\n use Backend\\Classes\\WidgetManager;\n use October\\Rain\\Support\\ModuleServiceProvider;\n use System\\Classes\\SettingsManager;\n@@ -40,6 +43,7 @@ class ServiceProvider extends ModuleServiceProvider\n             $this->registerBackendPermissions();\n             $this->registerBackendWidgets();\n             $this->registerBackendSettings();\n+            $this->registerBackendLocalization();\n         }\n     }\n \n@@ -284,6 +288,20 @@ class ServiceProvider extends ModuleServiceProvider\n         });\n     }\n \n+    /**\n+     * Registers localization from an active theme for backend items.\n+     */\n+    protected function registerBackendLocalization()\n+    {\n+        $theme = CmsTheme::getActiveTheme();\n+\n+        $langPath = $theme->getPath() . '/lang';\n+\n+        if (File::isDirectory($langPath)) {\n+            Lang::addNamespace(\"theme.{$theme->getId()}\", $langPath);\n+        }\n+    }\n+\n     /**\n      * Registers events for menu items.\n      */\n", "diff --git a/modules/cms/controllers/ThemeOptions.php b/modules/cms/controllers/ThemeOptions.php\nindex b20fd5eae..78068c83a 100644\n--- a/modules/cms/controllers/ThemeOptions.php\n+++ b/modules/cms/controllers/ThemeOptions.php\n@@ -103,8 +103,11 @@ class ThemeOptions extends Controller\n \n     /**\n      * Default to the active theme if user doesn't have access to manage all themes\n+     *\n+     * @param string $dirName\n+     * @return string\n      */\n-    protected function getDirName($dirName = null)\n+    protected function getDirName(string $dirName = null)\n     {\n         /*\n          * Only the active theme can be managed without this permission\n"], "label": 0, "cve": "CVE-2020-26231", "rank": 8, "commit": "061d35e5fd39839990986ecfbdec755bc711301c", "cve_attention_tokens": []}
{"cve_desc": "CServer::SendMsg in engine/server/server.cpp in Teeworlds 0.7.x before 0.7.5 allows remote attackers to shut down the server.", "commit_msg": "added a missing delete\n\n", "diff": ["diff --git a/src/engine/server/server.cpp b/src/engine/server/server.cpp\nindex 93f29f963..f1b450789 100644\n--- a/src/engine/server/server.cpp\n+++ b/src/engine/server/server.cpp\n@@ -283,6 +283,7 @@ CServer::CServer() : m_DemoRecorder(&m_SnapshotDelta)\n \tm_NumMapEntries = 0;\n \tm_pFirstMapEntry = 0;\n \tm_pLastMapEntry = 0;\n+\tm_pMapListHeap = 0;\n \n \tm_MapReload = 0;\n \n@@ -1475,7 +1476,15 @@ int CServer::Run()\n \tm_pMap->Unload();\n \n \tif(m_pCurrentMapData)\n+\t{\n \t\tmem_free(m_pCurrentMapData);\n+\t\tm_pCurrentMapData = 0;\n+\t}\n+\tif(m_pMapListHeap)\n+\t{\n+\t\tdelete m_pMapListHeap;\n+\t\tm_pMapListHeap = 0;\n+\t}\n \treturn 0;\n }\n \n"], "label": 0, "cve": "CVE-2020-12066", "rank": 16, "commit": "3e0e17c6e14ee55b5a340d46a4a009ea939f6386", "cve_attention_tokens": []}
{"cve_desc": "Requests (aka python-requests) before 2.3.0 allows remote servers to obtain a netrc password by reading the Authorization header in a redirected request.", "commit_msg": "Default proxy scheme to http.\n\n", "diff": ["diff --git a/requests/adapters.py b/requests/adapters.py\nindex d51a5fe3..e4d5e7dd 100644\n--- a/requests/adapters.py\n+++ b/requests/adapters.py\n@@ -203,7 +203,7 @@ class HTTPAdapter(BaseAdapter):\n         proxy = proxies.get(urlparse(url.lower()).scheme)\n \n         if proxy:\n-            proxy = prepend_scheme_if_needed(proxy, urlparse(url.lower()).scheme)\n+            proxy = prepend_scheme_if_needed(proxy, 'http')\n             proxy_headers = self.proxy_headers(proxy)\n \n             if not proxy in self.proxy_manager:\n"], "label": 0, "cve": "CVE-2014-1829", "rank": 60, "commit": "4404e7e328114868a272b99ffc81b4c74ecd06ed", "cve_attention_tokens": []}
{"cve_desc": "CRLF Injection leads to Stack Trace Exposure due to lack of filtering at https://demo.microweber.org/ in Packagist microweber/microweber prior to 1.2.11.", "commit_msg": "Update templates.yml\n\n", "diff": ["diff --git a/.github/workflows/templates.yml b/.github/workflows/templates.yml\nindex 4d3b47ed23..587cde78fd 100644\n--- a/.github/workflows/templates.yml\n+++ b/.github/workflows/templates.yml\n@@ -32,10 +32,7 @@ jobs:\n             'microweber-templates/template-business',\n             'microweber-templates/template-blank',\n             'microweber-templates/template-fooddelivery',\n-            'microweber-templates/big',\n-            'microweber-templates/big',\n             'microweber/template-active-bs4',\n-            'microweber-templates/big',\n             'microweber-templates/template-cryptocurrency',\n             'microweber-templates/template-simple-shop',\n             'microweber-templates/template-hostel',\n"], "label": 0, "cve": "CVE-2022-0666", "rank": 57, "commit": "a0fb975213d90553c1e5c5aaca5937ce709eb67c", "cve_attention_tokens": []}
{"cve_desc": "Buffer overflow in the ImagingFliDecode function in libImaging/FliDecode.c in Pillow before 3.1.1 allows remote attackers to cause a denial of service (crash) via a crafted FLI file.", "commit_msg": "Update CHANGES.rst [ci skip]\n", "diff": ["diff --git a/CHANGES.rst b/CHANGES.rst\nindex 53ad29bc4..72d04ebff 100644\n--- a/CHANGES.rst\n+++ b/CHANGES.rst\n@@ -4,6 +4,24 @@ Changelog (Pillow)\n 3.2.0 (unreleased)\n ------------------\n \n+- Allow ImageSequence to seek to zero #1686\n+  [radarhere]\n+\n+- ImageSequence Iterator is now an iterator #1649\n+  [radarhere]\n+\n+- Updated windows test builds to jpeg9b\n+  [radarhere]\n+\n+- Fixed support for .gbr version 1 images, added support for version 2 in GbrImagePlugin #1653\n+  [wiredfool]\n+  \n+- Clarified which YCbCr format is used #1677\n+  [radarhere]\n+\n+- Added TiffTags documentation, Moved windows build documentation to winbuild/ #1667\n+  [wiredfool]\n+\n - Add tests for OLE file based formats #1678\n   [radarhere]\n \n"], "label": 0, "cve": "CVE-2016-0775", "rank": 18, "commit": "d6bbe295323bf31dbc89d8bd2dcf3644309ad994", "cve_attention_tokens": []}
{"cve_desc": "An issue was discovered in BigTree CMS before 4.2.15. The vulnerability exists due to insufficient filtration of user-supplied data in the \"id\" HTTP GET parameter passed to the \"core/admin/adjax/dashboard/check-module-integrity.php\" URL. An attacker could execute arbitrary HTML and script code in a browser in the context of the vulnerable website.", "commit_msg": "Stripping bad data from media presets on save.\n\n", "diff": ["diff --git a/core/admin/ajax/developer/media/save-preset.php b/core/admin/ajax/developer/media/save-preset.php\nindex ae248070d..8982d28cb 100644\n--- a/core/admin/ajax/developer/media/save-preset.php\n+++ b/core/admin/ajax/developer/media/save-preset.php\n@@ -5,9 +5,11 @@\n \t// New preset? Create a unique ID\n \tif (!$_POST[\"id\"]) {\n \t\t$id = uniqid();\n+\n \t\twhile (isset($settings[\"presets\"][$id])) {\n \t\t\t$id = uniqid();\n \t\t}\n+\n \t\t$_POST[\"id\"] = $id;\n \t}\n \n@@ -16,10 +18,52 @@\n \n \t// Alphabetize the presets\n \t$names = array();\n-\tforeach ($settings[\"presets\"] as $preset) {\n+\n+\tforeach ($settings[\"presets\"] as $index => $preset) {\n \t\t$names[] = $preset[\"name\"];\n+\n+\t\t// Clean up empty entries\n+\t\tforeach ($preset[\"crops\"] as $crop_index => $crop) {\n+\t\t\tforeach ($crop[\"center_crops\"] as $center_crop_index => $center_crop) {\n+\t\t\t\tif (!is_array($center_crop) || !array_filter($center_crop)) {\n+\t\t\t\t\tunset($crop[\"center_crops\"][$center_crop_index]);\n+\t\t\t\t}\n+\t\t\t}\n+\n+\t\t\tforeach ($crop[\"thumbs\"] as $thumb_index => $thumb) {\n+\t\t\t\tif (!is_array($thumb) || !array_filter($thumb)) {\n+\t\t\t\t\tunset($crop[\"thumbs\"][$thumb_index]);\n+\t\t\t\t}\n+\t\t\t}\n+\n+\t\t\tif (!array_filter($crop)) {\n+\t\t\t\tunset($preset[\"crops\"][\"crop_index\"]);\n+\t\t\t} else {\n+\t\t\t\t$preset[\"crops\"][$crop_index] = $crop;\n+\t\t\t}\n+\t\t}\n+\n+\t\tforeach ($preset[\"thumbs\"] as $thumb_index => $thumb) {\n+\t\t\tif (!array_filter($thumb)) {\n+\t\t\t\tunset($preset[\"thumbs\"][$thumb_index]);\n+\t\t\t}\n+\t\t}\n+\n+\t\tforeach ($preset[\"center_crops\"] as $crop_index => $crop) {\n+\t\t\tif (!array_filter($crop)) {\n+\t\t\t\tunset($preset[\"center_crops\"][$crop_index]);\n+\t\t\t}\n+\t\t}\n+\n+\t\t// Only store it if this preset has stuff in it\n+\t\tif (array_filter($preset)) {\n+\t\t\t$settings[\"presets\"][$index] = $preset;\n+\t\t} else {\n+\t\t\tunset($settings[\"presets\"][$index]);\n+\t\t}\n \t}\n-\tarray_multisort($names,$settings[\"presets\"]);\n+\n+\tarray_multisort($names, $settings[\"presets\"]);\n \n \t// Update Settings\n \t$admin->updateSettingValue(\"bigtree-internal-media-settings\",$settings);\n"], "label": 0, "cve": "CVE-2016-10223", "rank": 6, "commit": "aebc0448f4feb2e3a016e421970e270656b258ca", "cve_attention_tokens": []}
{"cve_desc": "Unspecified vulnerability in the MySQL Connector component 2.1.3 and earlier and 2.0.4 and earlier in Oracle MySQL allows remote attackers to affect confidentiality, integrity, and availability via vectors related to Connector/Python.", "commit_msg": "Merge branch 'release-2.0.1'\n\n", "diff": [], "label": 0, "cve": "CVE-2016-5598", "rank": 53, "commit": "6d94a933015f890ad0fde4dd8f591d83b8f15658", "cve_attention_tokens": []}
{"cve_desc": "An issue was discovered in MISP before 2.4.158. There is stored XSS via the LinOTP login field.", "commit_msg": "fix: typo\n\n", "diff": ["diff --git a/app/Model/Server.php b/app/Model/Server.php\nindex c32b16cca..553f7fb3f 100644\n--- a/app/Model/Server.php\n+++ b/app/Model/Server.php\n@@ -6147,7 +6147,7 @@ class Server extends AppModel\n                 ],\n                 'enable_svg_logos' => [\n                     'level' => self::SETTING_OPTIONAL,\n-                    'description' => __('When enabled, orgnisation logos in svg format are allowed.'),\n+                    'description' => __('When enabled, organisations logos in svg format are allowed.'),\n                     'value' => false,\n                     'test' => 'testBool',\n                     'type' => 'boolean',\n"], "label": 0, "cve": "CVE-2022-29529", "rank": 5, "commit": "34df13af817fb160b07c95a2c2a2b824f3aa7bc6", "cve_attention_tokens": []}
{"cve_desc": "Cross-site scripting (XSS) vulnerability in java/hudson/model/Cause.java in Jenkins before 1.551 and LTS before 1.532.2 allows remote authenticated users to inject arbitrary web script or HTML via a \"remote cause note.\"", "commit_msg": "[FIXED SECURITY-106] Jenkins on Winstone vulnerable to session hijacking.\n\n", "diff": ["diff --git a/war/pom.xml b/war/pom.xml\nindex 5aa08c51db..b928e1a1a7 100644\n--- a/war/pom.xml\n+++ b/war/pom.xml\n@@ -104,7 +104,7 @@ THE SOFTWARE.\n       -->\n       <groupId>org.jenkins-ci</groupId>\n       <artifactId>winstone</artifactId>\n-      <version>0.9.10-jenkins-43</version>\n+      <version>0.9.10-jenkins-48</version>\n       <scope>test</scope>\n     </dependency>\n     <dependency>\n"], "label": 0, "cve": "CVE-2014-2067", "rank": 60, "commit": "29351af4bd01f61715418916fc12c52be46bd9b0", "cve_attention_tokens": []}
{"cve_desc": "Gradio is an open source framework for building interactive machine learning models and demos. In versions prior to 2.5.0 there is a vulnerability that affects anyone who creates and publicly shares Gradio interfaces. File paths are not restricted and users who receive a Gradio link can access any files on the host computer if they know the file names or file paths. This is limited only by the host operating system. Paths are opened in read only mode. The problem has been patched in gradio 2.5.0.", "commit_msg": "testing branch change\n\n", "diff": ["diff --git a/gradio/interface.py b/gradio/interface.py\nindex 7d2bbecc2..53041abf4 100644\n--- a/gradio/interface.py\n+++ b/gradio/interface.py\n@@ -139,7 +139,7 @@ class Interface:\n         self.capture_session = capture_session\n         self.session = None\n         self.server_name = server_name\n-        self.title = title\n+        self.title = \"Test \" + title\n         self.description = description\n         if article is not None:\n             article = utils.readme_to_html(article)\n", "diff --git a/gradio/networking.py b/gradio/networking.py\nindex 1a29fa20a..460eedd93 100644\n--- a/gradio/networking.py\n+++ b/gradio/networking.py\n@@ -48,6 +48,7 @@ app = Flask(__name__,\n             template_folder=STATIC_TEMPLATE_LIB,\n             static_folder=\"\",\n             static_url_path=\"/none/\")\n+# app.url_map.strict_slashes = False            \n CORS(app)\n cache_buster = CacheBuster(\n     config={'extensions': ['.js', '.css'], 'hash_size': 5})\n"], "label": 0, "cve": "CVE-2021-43831", "rank": 47, "commit": "346e9c0314c89965c158b008917c7629c8ed2782", "cve_attention_tokens": []}
{"cve_desc": "Heap-based buffer overflow in the readContigStripsIntoBuffer function in tif_unix.c in LibTIFF 4.0.7, 3.9.3, 3.9.4, 3.9.5, 3.9.6, 3.9.7, 4.0.0alpha4, 4.0.0alpha5, 4.0.0alpha6, 4.0.0beta7, 4.0.0, 4.0.1, 4.0.2, 4.0.3, 4.0.4, 4.0.4beta, 4.0.5 and 4.0.6 allows remote attackers to have unspecified impact via a crafted image.", "commit_msg": "* libtiff/tif_getimage.c: initYCbCrConversion(): check luma[1] is not zero\nto avoid division by zero.\nFixes https://bugs.chromium.org/p/oss-fuzz/issues/detail?id=1665\nCredit to OSS Fuzz\n\n", "diff": ["diff --git a/ChangeLog b/ChangeLog\nindex ccafcfa9..0195d52a 100644\n--- a/ChangeLog\n+++ b/ChangeLog\n@@ -1,3 +1,10 @@\n+2017-05-18 Even Rouault <even.rouault at spatialys.com>\n+\n+\t* libtiff/tif_getimage.c: initYCbCrConversion(): check luma[1] is not zero\n+\tto avoid division by zero.\n+\tFixes https://bugs.chromium.org/p/oss-fuzz/issues/detail?id=1665\n+\tCredit to OSS Fuzz\n+\n 2017-05-17 Even Rouault <even.rouault at spatialys.com>\n \n \t* libtiff/tif_read.c: _TIFFVSetField(): fix outside range cast of double to\n", "diff --git a/libtiff/tif_getimage.c b/libtiff/tif_getimage.c\nindex de6091dc..ad19a104 100644\n--- a/libtiff/tif_getimage.c\n+++ b/libtiff/tif_getimage.c\n@@ -2265,8 +2265,10 @@ initYCbCrConversion(TIFFRGBAImage* img)\n \t    &refBlackWhite);\n \n         /* Do some validation to avoid later issues. Detect NaN for now */\n+        /* and also if lumaGreen is zero since we divide by it later */\n         if( luma[0] != luma[0] ||\n             luma[1] != luma[1] ||\n+            luma[1] == 0.0 ||\n             luma[2] != luma[2] )\n         {\n             TIFFErrorExt(img->tif->tif_clientdata, module,\n"], "label": 0, "cve": "CVE-2016-10092", "rank": 50, "commit": "1db991a90d11dde8ea065f2a868baa7704caf3e5", "cve_attention_tokens": []}
{"cve_desc": "A Spring MVC or Spring WebFlux application running on JDK 9+ may be vulnerable to remote code execution (RCE) via data binding. The specific exploit requires the application to run on Tomcat as a WAR deployment. If the application is deployed as a Spring Boot executable jar, i.e. the default, it is not vulnerable to the exploit. However, the nature of the vulnerability is more general, and there may be other ways to exploit it.", "commit_msg": "Ban jetbrains annotations imports\n\nCloses gh-28226\n\n", "diff": ["diff --git a/spring-core/src/main/java/org/springframework/core/metrics/jfr/FlightRecorderStartupStep.java b/spring-core/src/main/java/org/springframework/core/metrics/jfr/FlightRecorderStartupStep.java\nindex f9bfdb71eb..915a52833c 100644\n--- a/spring-core/src/main/java/org/springframework/core/metrics/jfr/FlightRecorderStartupStep.java\n+++ b/spring-core/src/main/java/org/springframework/core/metrics/jfr/FlightRecorderStartupStep.java\n@@ -20,9 +20,8 @@ import java.util.Iterator;\n import java.util.function.Consumer;\n import java.util.function.Supplier;\n \n-import org.jetbrains.annotations.NotNull;\n-\n import org.springframework.core.metrics.StartupStep;\n+import org.springframework.lang.NonNull;\n \n /**\n  * {@link StartupStep} implementation for the Java Flight Recorder.\n@@ -115,7 +114,7 @@ class FlightRecorderStartupStep implements StartupStep {\n \t\t\tadd(key, value.get());\n \t\t}\n \n-\t\t@NotNull\n+\t\t@NonNull\n \t\t@Override\n \t\tpublic Iterator<Tag> iterator() {\n \t\t\treturn new TagsIterator();\n", "diff --git a/src/checkstyle/checkstyle.xml b/src/checkstyle/checkstyle.xml\nindex f94de141f9..3ea64aef02 100644\n--- a/src/checkstyle/checkstyle.xml\n+++ b/src/checkstyle/checkstyle.xml\n@@ -134,6 +134,11 @@\n \t\t\t<property name=\"regexp\" value=\"true\" />\n \t\t\t<property name=\"illegalClasses\" value=\"^org\\.hamcrest\\..+\" />\n \t\t</module>\n+\t\t<module name=\"com.puppycrawl.tools.checkstyle.checks.imports.IllegalImportCheck\">\n+\t\t\t<property name=\"id\" value=\"bannedJetbrainsAnnotationsImports\"/>\n+\t\t\t<property name=\"regexp\" value=\"true\" />\n+\t\t\t<property name=\"illegalClasses\" value=\"^org\\.jetbrains\\.annotations\\..+\" />\n+\t\t</module>\n \n \t\t<!-- Javadoc Comments -->\n \t\t<module name=\"com.puppycrawl.tools.checkstyle.checks.javadoc.JavadocTypeCheck\">\n"], "label": 0, "cve": "CVE-2022-22965", "rank": 16, "commit": "acf2955b960fe570e9c99187f2294bccf2b7df6e", "cve_attention_tokens": []}
{"cve_desc": "In Spring Framework, versions 5.2.x prior to 5.2.15 and versions 5.3.x prior to 5.3.7, a WebFlux application is vulnerable to a privilege escalation: by (re)creating the temporary storage directory, a locally authenticated malicious user can read or modify files that have been uploaded to the WebFlux application, or overwrite arbitrary files with multipart request data.", "commit_msg": "Fix failing tests\n\nThis commit ensures that if an Origin is returned as it was provided,\npossibly with a trailing slash.\n\nSee gh-26892\n\n", "diff": ["diff --git a/spring-web/src/main/java/org/springframework/web/cors/CorsConfiguration.java b/spring-web/src/main/java/org/springframework/web/cors/CorsConfiguration.java\nindex ddbe9d5ba6..1eee79898c 100644\n--- a/spring-web/src/main/java/org/springframework/web/cors/CorsConfiguration.java\n+++ b/spring-web/src/main/java/org/springframework/web/cors/CorsConfiguration.java\n@@ -549,31 +549,31 @@ public class CorsConfiguration {\n \n \t/**\n \t * Check the origin of the request against the configured allowed origins.\n-\t * @param requestOrigin the origin to check\n+\t * @param origin the origin to check\n \t * @return the origin to use for the response, or {@code null} which\n \t * means the request origin is not allowed\n \t */\n \t@Nullable\n-\tpublic String checkOrigin(@Nullable String requestOrigin) {\n-\t\tif (!StringUtils.hasText(requestOrigin)) {\n+\tpublic String checkOrigin(@Nullable String origin) {\n+\t\tif (!StringUtils.hasText(origin)) {\n \t\t\treturn null;\n \t\t}\n-\t\trequestOrigin = trimTrailingSlash(requestOrigin);\n+\t\tString originToCheck = trimTrailingSlash(origin);\n \t\tif (!ObjectUtils.isEmpty(this.allowedOrigins)) {\n \t\t\tif (this.allowedOrigins.contains(ALL)) {\n \t\t\t\tvalidateAllowCredentials();\n \t\t\t\treturn ALL;\n \t\t\t}\n \t\t\tfor (String allowedOrigin : this.allowedOrigins) {\n-\t\t\t\tif (requestOrigin.equalsIgnoreCase(allowedOrigin)) {\n-\t\t\t\t\treturn requestOrigin;\n+\t\t\t\tif (originToCheck.equalsIgnoreCase(allowedOrigin)) {\n+\t\t\t\t\treturn origin;\n \t\t\t\t}\n \t\t\t}\n \t\t}\n \t\tif (!ObjectUtils.isEmpty(this.allowedOriginPatterns)) {\n \t\t\tfor (OriginPattern p : this.allowedOriginPatterns) {\n-\t\t\t\tif (p.getDeclaredPattern().equals(ALL) || p.getPattern().matcher(requestOrigin).matches()) {\n-\t\t\t\t\treturn requestOrigin;\n+\t\t\t\tif (p.getDeclaredPattern().equals(ALL) || p.getPattern().matcher(originToCheck).matches()) {\n+\t\t\t\t\treturn origin;\n \t\t\t\t}\n \t\t\t}\n \t\t}\n", "diff --git a/spring-web/src/test/java/org/springframework/web/cors/CorsConfigurationTests.java b/spring-web/src/test/java/org/springframework/web/cors/CorsConfigurationTests.java\nindex 4cfdf1cc35..b920a9f167 100644\n--- a/spring-web/src/test/java/org/springframework/web/cors/CorsConfigurationTests.java\n+++ b/spring-web/src/test/java/org/springframework/web/cors/CorsConfigurationTests.java\n@@ -294,12 +294,12 @@ public class CorsConfigurationTests {\n \t\t// specific origin matches Origin header with or without trailing \"/\"\n \t\tconfig.setAllowedOrigins(Collections.singletonList(\"https://domain.com\"));\n \t\tassertThat(config.checkOrigin(\"https://domain.com\")).isEqualTo(\"https://domain.com\");\n-\t\tassertThat(config.checkOrigin(\"https://domain.com/\")).isEqualTo(\"https://domain.com\");\n+\t\tassertThat(config.checkOrigin(\"https://domain.com/\")).isEqualTo(\"https://domain.com/\");\n \n \t\t// specific origin with trailing \"/\" matches Origin header with or without trailing \"/\"\n \t\tconfig.setAllowedOrigins(Collections.singletonList(\"https://domain.com/\"));\n \t\tassertThat(config.checkOrigin(\"https://domain.com\")).isEqualTo(\"https://domain.com\");\n-\t\tassertThat(config.checkOrigin(\"https://domain.com/\")).isEqualTo(\"https://domain.com\");\n+\t\tassertThat(config.checkOrigin(\"https://domain.com/\")).isEqualTo(\"https://domain.com/\");\n \n \t\tconfig.setAllowCredentials(false);\n \t\tassertThat(config.checkOrigin(\"https://domain.com\")).isEqualTo(\"https://domain.com\");\n", "diff --git a/spring-webmvc/src/test/java/org/springframework/web/servlet/mvc/method/annotation/CrossOriginTests.java b/spring-webmvc/src/test/java/org/springframework/web/servlet/mvc/method/annotation/CrossOriginTests.java\nindex cb9e9f2538..3f1fce6612 100644\n--- a/spring-webmvc/src/test/java/org/springframework/web/servlet/mvc/method/annotation/CrossOriginTests.java\n+++ b/spring-webmvc/src/test/java/org/springframework/web/servlet/mvc/method/annotation/CrossOriginTests.java\n@@ -284,7 +284,7 @@ class CrossOriginTests {\n \t\tCorsConfiguration config = getCorsConfiguration(chain, false);\n \t\tassertThat(config).isNotNull();\n \t\tassertThat(config.getAllowedMethods()).containsExactly(\"GET\");\n-\t\tassertThat(config.getAllowedOrigins()).containsExactly(\"http://www.foo.example/\");\n+\t\tassertThat(config.getAllowedOrigins()).containsExactly(\"http://www.foo.example\");\n \t\tassertThat(config.getAllowCredentials()).isTrue();\n \t}\n \n@@ -297,7 +297,7 @@ class CrossOriginTests {\n \t\tCorsConfiguration config = getCorsConfiguration(chain, false);\n \t\tassertThat(config).isNotNull();\n \t\tassertThat(config.getAllowedMethods()).containsExactly(\"GET\");\n-\t\tassertThat(config.getAllowedOrigins()).containsExactly(\"http://www.foo.example/\");\n+\t\tassertThat(config.getAllowedOrigins()).containsExactly(\"http://www.foo.example\");\n \t\tassertThat(config.getAllowCredentials()).isTrue();\n \t}\n \n"], "label": 0, "cve": "CVE-2021-22118", "rank": 52, "commit": "aa51ed19403129bd9f0b8f5373391ba6bc8baaaa", "cve_attention_tokens": []}
{"cve_desc": "An invalid memory access flaw is present in libyang before v1.0-r3 in the function resolve_feature_value() when an if-feature statement is used inside a bit. Applications that use libyang to parse untrusted input yang files may crash.", "commit_msg": "VERSION bump to version 1.0.13\n\n", "diff": ["diff --git a/CMakeLists.txt b/CMakeLists.txt\nindex 0e8e272b2..ec0c16e5c 100644\n--- a/CMakeLists.txt\n+++ b/CMakeLists.txt\n@@ -21,7 +21,7 @@ set(CMAKE_MACOSX_RPATH TRUE)\n # micro version is changed with a set of small changes or bugfixes anywhere in the project.\n set(LIBYANG_MAJOR_VERSION 1)\n set(LIBYANG_MINOR_VERSION 0)\n-set(LIBYANG_MICRO_VERSION 12)\n+set(LIBYANG_MICRO_VERSION 13)\n set(LIBYANG_VERSION ${LIBYANG_MAJOR_VERSION}.${LIBYANG_MINOR_VERSION}.${LIBYANG_MICRO_VERSION})\n \n # Version of the library\n"], "label": 0, "cve": "CVE-2019-20391", "rank": 40, "commit": "c39aef641f5c09efe1fc5d93249931350ae6da8b", "cve_attention_tokens": []}
{"cve_desc": "mod/assign/locallib.php in the assignment module in Moodle 2.3.x before 2.3.7 and 2.4.x before 2.4.4 does not consider capability requirements during the processing of ZIP assignment-archive download (aka downloadall) requests, which allows remote authenticated users to read other users' assignments by leveraging the student role.", "commit_msg": "Revert \"MDL-38515 JavaScript: Correct module dependencies for core_filepicker\"\n\nThis reverts commit 573571d727ce47a39160c8583c90158accd09641.\n\n", "diff": ["diff --git a/lib/outputrequirementslib.php b/lib/outputrequirementslib.php\nindex bf16bfb575e..1ebae6d3878 100644\n--- a/lib/outputrequirementslib.php\n+++ b/lib/outputrequirementslib.php\n@@ -377,7 +377,7 @@ class page_requirements_manager {\n                 case 'core_filepicker':\n                     $module = array('name'     => 'core_filepicker',\n                                     'fullpath' => '/repository/filepicker.js',\n-                                    'requires' => array('base', 'node', 'node-event-simulate', 'json', 'async-queue', 'io-base', 'io-upload-iframe', 'io-form', 'yui2-treeview', 'panel', 'cookie', 'datatable', 'datatable-sort', 'resize-plugin', 'dd-plugin', 'escape'),\n+                                    'requires' => array('base', 'node', 'node-event-simulate', 'json', 'async-queue', 'io-base', 'io-upload-iframe', 'io-form', 'yui2-treeview', 'panel', 'cookie', 'datatable', 'datatable-sort', 'resize-plugin', 'dd-plugin', 'escape', 'moodle-core_filepicker'),\n                                     'strings'  => array(array('lastmodified', 'moodle'), array('name', 'moodle'), array('type', 'repository'), array('size', 'repository'),\n                                                         array('invalidjson', 'repository'), array('error', 'moodle'), array('info', 'moodle'),\n                                                         array('nofilesattached', 'repository'), array('filepicker', 'repository'), array('logout', 'repository'),\n"], "label": 0, "cve": "CVE-2013-2079", "rank": 36, "commit": "6407ca69272d1cd6828e31a59dd815d3ada84292", "cve_attention_tokens": ["requirements"]}
{"cve_desc": "tinyexr 0.9.5 has a integer overflow over-write in tinyexr::DecodePixelData in tinyexr.h, related to OpenEXR code.", "commit_msg": "Suppress clang warnigns.\n\n", "diff": ["diff --git a/tinyexr.h b/tinyexr.h\nindex e9d8b4d..72c8db2 100644\n--- a/tinyexr.h\n+++ b/tinyexr.h\n@@ -10095,9 +10095,9 @@ static bool DecodePixelData(/* out */ unsigned char **out_images,\n             unsigned short *outLine =\n                 reinterpret_cast<unsigned short *>(out_images[c]);\n             if (line_order == 0) {\n-              outLine += (y + v) * x_stride;\n+              outLine += (size_t(y) + v) * size_t(x_stride);\n             } else {\n-              outLine += (height - 1 - (y + v)) * x_stride;\n+              outLine += (size_t(height) - 1 - (size_t(y) + v)) * size_t(x_stride);\n             }\n \n             for (int u = 0; u < width; u++) {\n@@ -10113,9 +10113,9 @@ static bool DecodePixelData(/* out */ unsigned char **out_images,\n           } else if (requested_pixel_types[c] == TINYEXR_PIXELTYPE_FLOAT) {\n             float *outLine = reinterpret_cast<float *>(out_images[c]);\n             if (line_order == 0) {\n-              outLine += (y + v) * x_stride;\n+              outLine += (size_t(y) + v) * size_t(x_stride);\n             } else {\n-              outLine += (height - 1 - (y + v)) * x_stride;\n+              outLine += (size_t(height) - 1 - (size_t(y) + v)) * size_t(x_stride);\n             }\n \n             if (reinterpret_cast<const unsigned char *>(line_ptr + width) >\n@@ -10148,9 +10148,9 @@ static bool DecodePixelData(/* out */ unsigned char **out_images,\n \n           float *outLine = reinterpret_cast<float *>(out_images[c]);\n           if (line_order == 0) {\n-            outLine += (y + v) * x_stride;\n+            outLine += (size_t(y) + v) * size_t(x_stride);\n           } else {\n-            outLine += (height - 1 - (y + v)) * x_stride;\n+            outLine += (size_t(height) - 1 - (size_t(y) + v)) * size_t(x_stride);\n           }\n \n           if (reinterpret_cast<const unsigned char *>(line_ptr + width) >\n@@ -10175,9 +10175,9 @@ static bool DecodePixelData(/* out */ unsigned char **out_images,\n           unsigned int *outLine =\n               reinterpret_cast<unsigned int *>(out_images[c]);\n           if (line_order == 0) {\n-            outLine += (y + v) * x_stride;\n+            outLine += (size_t(y) + v) * size_t(x_stride);\n           } else {\n-            outLine += (height - 1 - (y + v)) * x_stride;\n+            outLine += (size_t(height) - 1 - (size_t(y) + v)) * size_t(x_stride);\n           }\n \n           for (int u = 0; u < width; u++) {\n"], "label": 0, "cve": "CVE-2020-19490", "rank": 21, "commit": "753346916a31053cd841ab515b84e15329913e30", "cve_attention_tokens": ["decodepixeldata"]}
{"cve_desc": "Studio 42 elFinder before 2.1.37 has a directory traversal vulnerability in elFinder.class.php with the zipdl() function that can allow a remote attacker to download files accessible by the web server process and delete files owned by the account running the web server process. NOTE: this issue exists because of an incomplete fix for CVE-2018-9109.", "commit_msg": "update demo elFinder-2.1-b52857e\n\n", "diff": ["diff --git a/demo/css/elfinder.full.css b/demo/css/elfinder.full.css\nindex 8cf37b677..aae3f4c50 100644\n--- a/demo/css/elfinder.full.css\n+++ b/demo/css/elfinder.full.css\n@@ -1,6 +1,6 @@\n /*!\n  * elFinder - file manager for web\n- * Version 2.1.7 (2.1-src Nightly: 0ac3247) (2016-02-22)\n+ * Version 2.1.7 (2.1-src Nightly: b52857e) (2016-02-27)\n  * http://elfinder.org\n  * \n  * Copyright 2009-2016, Studio 42\n", "diff --git a/demo/css/elfinder.min.css b/demo/css/elfinder.min.css\nindex 28576a192..56b5aa242 100644\n--- a/demo/css/elfinder.min.css\n+++ b/demo/css/elfinder.min.css\n@@ -1,6 +1,6 @@\n /*!\n  * elFinder - file manager for web\n- * Version 2.1.7 (2.1-src Nightly: 0ac3247) (2016-02-22)\n+ * Version 2.1.7 (2.1-src Nightly: b52857e) (2016-02-27)\n  * http://elfinder.org\n  * \n  * Copyright 2009-2016, Studio 42\n", "diff --git a/demo/js/elfinder.full.js b/demo/js/elfinder.full.js\nindex 82f6f5712..109f9874c 100644\n--- a/demo/js/elfinder.full.js\n+++ b/demo/js/elfinder.full.js\n@@ -1,6 +1,6 @@\n /*!\n  * elFinder - file manager for web\n- * Version 2.1.7 (2.1-src Nightly: 0ac3247) (2016-02-22)\n+ * Version 2.1.7 (2.1-src Nightly: b52857e) (2016-02-27)\n  * http://elfinder.org\n  * \n  * Copyright 2009-2016, Studio 42\n@@ -4865,7 +4865,7 @@ if (!Object.keys) {\n  *\n  * @type String\n  **/\n-elFinder.prototype.version = '2.1.7 (2.1-src Nightly: 0ac3247)';\n+elFinder.prototype.version = '2.1.7 (2.1-src Nightly: b52857e)';\n \n \n \n@@ -15602,7 +15602,7 @@ elFinder.prototype.commands.resize = function() {\n \t\t\t\t\thline   = 'elfinder-resize-handle-hline',\n \t\t\t\t\tvline   = 'elfinder-resize-handle-vline',\n \t\t\t\t\trpoint  = 'elfinder-resize-handle-point',\n-\t\t\t\t\tsrc     = fm.url(file.hash)\n+\t\t\t\t\tsrc     = fm.openUrl(file.hash)\n \t\t\t\t\t;\n \t\t\t\t\n \t\t\t\timgr.mousedown( rotate.start );\n", "diff --git a/demo/js/elfinder.min.js b/demo/js/elfinder.min.js\nindex 899af9c3e..6df0e6a20 100644\n--- a/demo/js/elfinder.min.js\n+++ b/demo/js/elfinder.min.js\n@@ -1,15 +1,15 @@\n /*!\n  * elFinder - file manager for web\n- * Version 2.1.7 (2.1-src Nightly: 0ac3247) (2016-02-22)\n+ * Version 2.1.7 (2.1-src Nightly: b52857e) (2016-02-27)\n  * http://elfinder.org\n  * \n  * Copyright 2009-2016, Studio 42\n  * Licensed under a 3 clauses BSD license\n  */\n !function(e){window.elFinder=function(t,n){var i,a,r,o=this,t=e(t),s=e(\"<div/>\").append(t.contents()),l=t.attr(\"style\"),d=t.attr(\"id\")||\"\",c=\"elfinder-\"+(d||Math.random().toString().substr(2,7)),u=\"mousedown.\"+c,p=\"keydown.\"+c,h=\"keypress.\"+c,f=!0,m=!0,g=\"\",v={path:\"\",url:\"\",tmbUrl:\"\",disabled:[],separator:\"/\",archives:[],extract:[],copyOverwrite:!0,uploadOverwrite:!0,uploadMaxSize:0,jpgQuality:100,tmb:!1},b={},y=[],w={},x={},k=[],C=[],T=[],I=new o.command(o),F=\"auto\",S=400,M=\"./sounds/\",P=e(document.createElement(\"audio\")).hide().appendTo(\"body\")[0],A=\"\",O=function(t){var n,i,a={},r={};o.api>=2.1?(o.commandMap=t.options.uiCmdMap&&Object.keys(t.options.uiCmdMap).length?t.options.uiCmdMap:{},A!==JSON.stringify(o.commandMap)&&(A=JSON.stringify(o.commandMap),Object.keys(o.commandMap).length&&(i=o.getUI(\"contextmenu\"),i.data(\"cmdMaps\")||i.data(\"cmdMaps\",{}),n=t.cwd?t.cwd.volumeid:null,n&&!i.data(\"cmdMaps\")[n]&&(i.data(\"cmdMaps\")[n]=o.commandMap)))):o.options.sync=0,t.init?b={}:(e.each(Object.keys(b),function(t,n){var i=\"directory\"===b[n].mime,s=b[n].phash;o.res(\"class\",\"navcollapse\"),(!i||a[s]||!r[s]&&e(\"#\"+o.navHash2Id(b[n].hash)).is(\":hidden\")&&e(\"#\"+o.navHash2Id(s)).next(\".elfinder-navbar-subtree\").children().length>100)&&(i||s===g)&&-1===e.inArray(n,C)?(i&&!a[s]&&(a[s]=!0),delete b[n]):i&&(r[s]=!0)}),e.each(Object.keys(a),function(t,n){var i=\"elfinder-subtree-loaded \"+o.res(\"class\",\"navexpand\");e(\"#\"+o.navHash2Id(n)).removeClass(i).next(\".elfinder-navbar-subtree\").empty()})),g=t.cwd.hash,D(t.files),b[g]||D([t.cwd]),o.lastDir(g),o.autoSync()},D=function(e){var t,n,i=e.length;for(n=0;i>n;n++)if(t=e[n],t.name&&t.hash&&t.mime){if(!t.phash){var a=\"volume_\"+t.name,r=o.i18n(a);a!=r&&(t.i18=r),t.volumeid&&(t.disabled&&(o.disabledCmds[t.volumeid]=t.disabled),t.tmbUrl&&(o.tmbUrls[t.volumeid]=t.tmbUrl),o.roots[t.volumeid]=t.hash)}b[t.hash]=t}},U=function(t){var n=t.keyCode,i=!(!t.ctrlKey&&!t.metaKey);f&&(e.each(x,function(e,a){a.type==t.type&&a.keyCode==n&&a.shiftKey==t.shiftKey&&a.ctrlKey==i&&a.altKey==t.altKey&&(t.preventDefault(),t.stopPropagation(),a.callback(t,o),o.debug(\"shortcut-exec\",e+\" : \"+a.description))}),9!=n||e(t.target).is(\":input\")||t.preventDefault(),27==n&&o.clipboard().length&&o.clipboard([]))},z=new Date;return this.api=null,this.newAPI=!1,this.oldAPI=!1,this.netDrivers=[],this.OS=-1!==navigator.userAgent.indexOf(\"Mac\")?\"mac\":-1!==navigator.userAgent.indexOf(\"Win\")?\"win\":\"other\",this.UA=function(){var e=!document.uniqueID&&!window.opera&&!window.sidebar&&window.localStorage&&\"undefined\"==typeof window.orientation;return{ltIE6:\"undefined\"==typeof window.addEventListener&&\"undefined\"==typeof document.documentElement.style.maxHeight,ltIE7:\"undefined\"==typeof window.addEventListener&&\"undefined\"==typeof document.querySelectorAll,ltIE8:\"undefined\"==typeof window.addEventListener&&\"undefined\"==typeof document.getElementsByClassName,IE:document.uniqueID,Firefox:window.sidebar,Opera:window.opera,Webkit:e,Chrome:e&&window.chrome,Safari:e&&!window.chrome,Mobile:\"undefined\"!=typeof window.orientation,Touch:\"undefined\"!=typeof window.ontouchstart,iOS:navigator.platform.match(/^iP(?:[ao]d|hone)/)}}(),this.options=e.extend(!0,{},this._options,n||{}),n.ui&&(this.options.ui=n.ui),n.commands&&(this.options.commands=n.commands),n.uiOptions&&n.uiOptions.toolbar&&(this.options.uiOptions.toolbar=n.uiOptions.toolbar),n.uiOptions&&n.uiOptions.cwd&&n.uiOptions.cwd.listView&&n.uiOptions.cwd.listView.columns&&(this.options.uiOptions.cwd.listView.columns=n.uiOptions.cwd.listView.columns),n.uiOptions&&n.uiOptions.cwd&&n.uiOptions.cwd.listView&&n.uiOptions.cwd.listView.columnsCustomName&&(this.options.uiOptions.cwd.listView.columnsCustomName=n.uiOptions.cwd.listView.columnsCustomName),function(){var t,i=document.createElement(\"a\");i.href=n.url,n.urlUpload&&n.urlUpload!==n.url&&(t=document.createElement(\"a\"),t.href=n.urlUpload),(window.location.host!==i.host||t&&window.location.host!==t.host)&&(e.isPlainObject(o.options.customHeaders)||(o.options.customHeaders={}),e.isPlainObject(o.options.xhrFields)||(o.options.xhrFields={}),o.options.requestType=\"post\",o.options.customHeaders[\"X-Requested-With\"]=\"XMLHttpRequest\",o.options.xhrFields.withCredentials=!0)}(),e.extend(this.options.contextmenu,n.contextmenu),this.requestType=/^(get|post)$/i.test(this.options.requestType)?this.options.requestType.toLowerCase():\"get\",this.customData=e.isPlainObject(this.options.customData)?this.options.customData:{},this.customHeaders=e.isPlainObject(this.options.customHeaders)?this.options.customHeaders:{},this.xhrFields=e.isPlainObject(this.options.xhrFields)?this.options.xhrFields:{},this.id=d,this.navPrefix=\"nav\"+(elFinder.prototype.uniqueid?elFinder.prototype.uniqueid:\"\")+\"-\",this.cwdPrefix=elFinder.prototype.uniqueid?\"cwd\"+elFinder.prototype.uniqueid+\"-\":\"\",++elFinder.prototype.uniqueid,this.uploadURL=n.urlUpload||n.url,this.namespace=c,this.lang=this.i18[this.options.lang]&&this.i18[this.options.lang].messages?this.options.lang:\"en\",r=\"en\"==this.lang?this.i18.en:e.extend(!0,{},this.i18.en,this.i18[this.lang]),this.direction=r.direction,this.messages=r.messages,this.dateFormat=this.options.dateFormat||r.dateFormat,this.fancyFormat=this.options.fancyDateFormat||r.fancyDateFormat,this.today=new Date(z.getFullYear(),z.getMonth(),z.getDate()).getTime()/1e3,this.yesterday=this.today-86400,a=this.options.UTCDate?\"UTC\":\"\",this.getHours=\"get\"+a+\"Hours\",this.getMinutes=\"get\"+a+\"Minutes\",this.getSeconds=\"get\"+a+\"Seconds\",this.getDate=\"get\"+a+\"Date\",this.getDay=\"get\"+a+\"Day\",this.getMonth=\"get\"+a+\"Month\",this.getFullYear=\"get\"+a+\"FullYear\",this.cssClass=\"ui-helper-reset ui-helper-clearfix ui-widget ui-widget-content ui-corner-all elfinder elfinder-\"+(\"rtl\"==this.direction?\"rtl\":\"ltr\")+\" \"+this.options.cssClass,this.searchStatus={state:0,query:\"\",target:\"\",mime:\"\"},this.storage=function(){try{return\"localStorage\"in window&&null!==window.localStorage?o.localStorage:o.cookie}catch(e){return o.cookie}}(),this.viewType=this.storage(\"view\")||this.options.defaultView||\"icons\",this.sortType=this.storage(\"sortType\")||this.options.sortType||\"name\",this.sortOrder=this.storage(\"sortOrder\")||this.options.sortOrder||\"asc\",this.sortStickFolders=this.storage(\"sortStickFolders\"),this.sortStickFolders=null===this.sortStickFolders?!!this.options.sortStickFolders:!!this.sortStickFolders,this.sortRules=e.extend(!0,{},this._sortRules,this.options.sortRules),e.each(this.sortRules,function(e,t){\"function\"!=typeof t&&delete o.sortRules[e]}),this.compare=e.proxy(this.compare,this),this.notifyDelay=this.options.notifyDelay>0?parseInt(this.options.notifyDelay):500,this.draggingUiHelper=null,this.draggable={appendTo:\"body\",addClasses:!0,distance:4,revert:!0,refreshPositions:!1,cursor:\"crosshair\",cursorAt:{left:50,top:47},start:function(t,n){var i,a,r=e.map(n.helper.data(\"files\")||[],function(e){return e||null}),s=!1;for(o.draggingUiHelper=n.helper,i=r.length;i--;)if(a=r[i],b[a].locked){s=!0,n.helper.data(\"locked\",!0);break}!s&&o.trigger(\"lockfiles\",{files:r})},drag:function(t,n){var i=n.helper;i.data(\"refreshPositions\")&&e(this).draggable(\"instance\")&&(i.data(\"refreshPositions\")>0?(e(this).draggable(\"option\",{refreshPositions:!0}),i.data(\"refreshPositions\",-1)):(e(this).draggable(\"option\",{refreshPositions:!1}),i.data(\"refreshPositions\",null)))},stop:function(t,n){var i;e(this).draggable(\"instance\")&&e(this).draggable(\"option\",{refreshPositions:!1}),o.draggingUiHelper=null,o.trigger(\"focus\").trigger(\"dragstop\"),n.helper.data(\"droped\")||(i=e.map(n.helper.data(\"files\")||[],function(e){return e||null}),o.trigger(\"unlockfiles\",{files:i}),o.trigger(\"selectfiles\",{files:i}))},helper:function(t){var n,i,a,r=this.id?e(this):e(this).parents(\"[id]:first\"),s=e('<div class=\"elfinder-drag-helper\"><span class=\"elfinder-drag-helper-icon-status\"/></div>'),l=function(t){var n,i=t.mime;return n='<div class=\"elfinder-cwd-icon '+o.mime2class(i)+' ui-corner-all\"/>',t.tmb&&1!==t.tmb&&(n=e(n).css(\"background\",\"url('\"+o.option(\"tmbUrl\")+t.tmb+\"') center center no-repeat\").get(0).outerHTML),n};return o.draggingUiHelper&&o.draggingUiHelper.stop(!0,!0),o.trigger(\"dragstart\",{target:r[0],originalEvent:t}),n=r.hasClass(o.res(\"class\",\"cwdfile\"))?o.selected():[o.navId2Hash(r.attr(\"id\"))],s.append(l(b[n[0]])).data(\"files\",n).data(\"locked\",!1).data(\"droped\",!1).data(\"namespace\",o.namespace).data(\"dropover\",0),(i=n.length)>1&&s.append(l(b[n[i-1]])+'<span class=\"elfinder-drag-num\">'+i+\"</span>\"),e(document).on(p+\" keyup.\"+c,function(e){var t=e.shiftKey||e.ctrlKey||e.metaKey;a!==t&&(a=t,s.is(\":visible\")&&s.data(\"dropover\")&&!s.data(\"droped\")&&(s.toggleClass(\"elfinder-drag-helper-plus\",s.data(\"locked\")?!0:a),o.trigger(a?\"unlockfiles\":\"lockfiles\",{files:n,helper:s})))}),s}},this.droppable={greedy:!0,tolerance:\"pointer\",accept:\".elfinder-cwd-file-wrapper,.elfinder-navbar-dir,.elfinder-cwd-file,.elfinder-cwd-filename\",hoverClass:this.res(\"class\",\"adroppable\"),classes:{\"ui-droppable-hover\":this.res(\"class\",\"adroppable\")},autoDisable:!0,drop:function(t,n){var i,a,r,s=e(this),l=e.map(n.helper.data(\"files\")||[],function(e){return e||null}),d=[],c=[],u=[],p=n.helper.hasClass(\"elfinder-drag-helper-plus\"),h=\"class\";if(n.helper.data(\"namespace\")!==o.namespace)return!1;for(a=s.hasClass(o.res(h,\"cwdfile\"))?o.cwdId2Hash(s.attr(\"id\")):s.hasClass(o.res(h,\"navdir\"))?o.navId2Hash(s.attr(\"id\")):g,i=l.length;i--;)r=l[i],r!=a&&b[r].phash!=a?d.push(r):(p&&r!==a&&b[a].write?c:u).push(r);return u.length?!1:(n.helper.data(\"droped\",!0),c.length&&(n.helper.hide(),o.exec(\"duplicate\",c)),d.length&&(n.helper.hide(),o.clipboard(d,!p),o.exec(\"paste\",a,void 0,a).always(function(){o.trigger(\"unlockfiles\",{files:l})}),o.trigger(\"drop\",{files:l})),void 0)}},this.enabled=function(){return t.is(\":visible\")&&f},this.visible=function(){return t.is(\":visible\")},this.root=function(t){for(var n,i=b[t||g];i&&i.phash;)i=b[i.phash];if(i)return i.hash;if(e.each(o.roots,function(e,t){return 0===t.indexOf(e)?(i=t,!1):void 0}),i)return i;for(;n in b&&b.hasOwnProperty(n);)if(i=b[n],!i.phash&&\"directory\"==!i.mime&&i.read)return i.hash;return\"\"},this.cwd=function(){return b[g]||{}},this.option=function(e){return v[e]||\"\"},this.file=function(e){return b[e]},this.files=function(){return e.extend(!0,{},b)},this.parents=function(e){for(var t,n=[];t=this.file(e);)n.unshift(t.hash),e=t.phash;return n},this.path2array=function(e,t){for(var n,i=[];e&&(n=b[e])&&n.hash;)i.unshift(t&&n.i18?n.i18:n.name),e=n.phash;return i},this.path=function(e,t){return b[e]&&b[e].path?b[e].path:this.path2array(e,t).join(v.separator)},this.url=function(t){var n=b[t];if(!n||!n.read)return\"\";if(\"1\"==n.url&&this.request({data:{cmd:\"url\",target:t},preventFail:!0,options:{async:!1}}).done(function(e){n.url=e.url||\"\"}).fail(function(){n.url=\"\"}),n.url)return n.url;if(v.url&&0===n.hash.indexOf(o.cwd().volumeid))return v.url+e.map(this.path2array(t),function(e){return encodeURIComponent(e)}).slice(1).join(\"/\");var i=e.extend({},this.customData,{cmd:\"file\",target:n.hash});return this.oldAPI&&(i.cmd=\"open\",i.current=n.phash),this.options.url+(-1===this.options.url.indexOf(\"?\")?\"?\":\"&\")+e.param(i,!0)},this.convAbsUrl=function(e){if(e.match(/^http/i))return e;var t,n=window.location.protocol+\"//\"+window.location.host,i=/[^\\/]+\\/\\.\\.\\//;for(t=\"/\"===e.substr(0,1)?n+e:n+window.location.pathname+e,t=t.replace(\"/./\",\"/\");i.test(t);)t=t.replace(i,\"\");return t},this.openUrl=function(t,n){var i=b[t],a=\"\";if(!i||!i.read)return\"\";if(!n)if(i.url){if(1!=i.url)return i.url}else if(v.url&&0===i.hash.indexOf(o.cwd().volumeid))return v.url+e.map(this.path2array(t),function(e){return encodeURIComponent(e)}).slice(1).join(\"/\");return a=this.options.url,a=a+(-1===a.indexOf(\"?\")?\"?\":\"&\")+(this.oldAPI?\"cmd=open&current=\"+i.phash:\"cmd=file\")+\"&target=\"+i.hash,n&&(a+=\"&download=1\"),e.each(this.options.customData,function(e,t){a+=\"&\"+encodeURIComponent(e)+\"=\"+encodeURIComponent(t)}),a},this.tmb=function(t){var n=b[t],i=function(t){var n=\"\";return e.each(o.tmbUrls,function(e){return 0===t.indexOf(e)?(n=o.tmbUrls[e],!1):void 0}),n},a=o.searchStatus.state&&0!==t.indexOf(o.cwd().volumeid)?i(t):v.tmbUrl,r=a&&n&&n.tmb&&1!=n.tmb?a+n.tmb:\"\";return r},this.selected=function(){return y.slice(0)},this.selectedFiles=function(){return e.map(y,function(t){return b[t]?e.extend({},b[t]):null})},this.fileByName=function(e,t){var n;for(n in b)if(b.hasOwnProperty(n)&&b[n].phash==t&&b[n].name==e)return b[n]},this.validResponse=function(e,t){return t.error||this.rules[this.rules[e]?e:\"defaults\"](t)},this.returnBytes=function(e){var t;return isNaN(e)?(e=e.replace(/b$/i,\"\"),t=e.charAt(e.length-1).toLowerCase(),e=e.replace(/[tgmk]$/i,\"\"),\"t\"==t?e=1024*1024*1024*1024*e:\"g\"==t?e=1024*1024*1024*e:\"m\"==t?e=1024*1024*e:\"k\"==t&&(e=1024*e),e=isNaN(e)?0:parseInt(e)):(e=parseInt(e),1>e&&(e=0)),e},this.request=function(t){var n,i,a,r=this,o=this.options,s=e.Deferred(),l=e.extend({},o.customData,{mimes:o.onlyMimes},t.data||t),d=l.cmd,c=!(t.preventDefault||t.preventFail),u=!(t.preventDefault||t.preventDone),p=e.extend({},t.notify),h=!!t.cancel,f=!!t.raw,m=t.syncOnFail,t=e.extend({url:o.url,async:!0,type:this.requestType,dataType:\"json\",cache:!1,data:l,headers:this.customHeaders,xhrFields:this.xhrFields},t.options||{}),g=function(t){t.warning&&r.error(t.warning),\"open\"==d&&O(e.extend(!0,{},t)),t.removed&&t.removed.length&&r.remove(t),t.added&&t.added.length&&r.add(t),t.changed&&t.changed.length&&r.change(t),r.trigger(d,t),t.sync&&r.sync()},b=function(e,t){var n;switch(t){case\"abort\":n=e.quiet?\"\":[\"errConnect\",\"errAbort\"];break;case\"timeout\":n=[\"errConnect\",\"errTimeout\"];break;case\"parsererror\":n=[\"errResponse\",\"errDataNotJSON\"];break;default:n=403==e.status?[\"errConnect\",\"errAccess\"]:404==e.status?[\"errConnect\",\"errNotFound\"]:\"errConnect\"}s.reject(n,e,t)},y=function(t){return r.currentReqCmd=d,f?s.resolve(t):t?e.isPlainObject(t)?t.error?s.reject(t.error,i):r.validResponse(d,t)?(t=r.normalize(t),r.api||(r.api=t.api||1,\"2.0\"==r.api&&\"undefined\"!=typeof t.options.uploadMaxSize&&(r.api=\"2.1\"),r.newAPI=r.api>=2,r.oldAPI=!r.newAPI),t.options&&(v=e.extend({},v,t.options)),t.netDrivers&&(r.netDrivers=t.netDrivers),\"open\"==d&&l.init&&(r.uplMaxSize=r.returnBytes(t.uplMaxSize),r.uplMaxFile=t.uplMaxFile?parseInt(t.uplMaxFile):20),s.resolve(t),t.debug&&r.debug(\"backend-debug\",t.debug),void 0):s.reject(\"errResponse\",i):s.reject([\"errResponse\",\"errDataNotJSON\"],i):s.reject([\"errResponse\",\"errDataEmpty\"],i)},w=function(e){if(\"autosync\"==e.type){if(\"stop\"!=e.data.action)return}else if(!e.data.added||!e.data.added.length)return;\"pending\"==i.state()&&(i.quiet=!0,i.abort(),\"unload\"!=e.type&&\"destroy\"!=e.type&&r.autoSync())};if(u&&s.done(g),s.fail(function(e){e&&(c?r.error(e):r.debug(\"error\",r.i18n(e)))}),!d)return s.reject(\"errCmdReq\");if(m&&s.fail(function(e){e&&r.sync()}),p.type&&p.cnt&&(h&&(p.cancel=s),n=setTimeout(function(){r.notify(p),s.always(function(){p.cnt=-(parseInt(p.cnt)||0),r.notify(p)})},r.notifyDelay),s.always(function(){clearTimeout(n)})),\"open\"==d)for(;a=T.pop();)\"pending\"==a.state()&&(a.quiet=!0,a.abort());return delete t.preventFail,s.xhr=i=this.transport.send(t).fail(b).done(y),(\"open\"==d||\"info\"==d&&l.compare)&&(T.unshift(i),r.bind(r.cmdsToAdd+\" autosync\",w),s.always(function(){var t=e.inArray(i,T);r.unbind(r.cmdsToAdd+\" autosync\",w),-1!==t&&T.splice(t,1)})),r.bind(\"unload destroy\",w),s.always(function(){r.unbind(\"unload destroy\",w)}),s},this.diff=function(t,n){var i={},a=[],r=[],o=[],s=function(e){for(var t=o.length;t--;)if(o[t].hash==e)return!0};return e.each(t,function(e,t){i[t.hash]=t}),e.each(b,function(e,t){n&&t.phash!==n||!i[e]&&r.push(e)}),e.each(i,function(t,n){var i=b[t];i?e.each(n,function(e){return n[e]!=i[e]?(o.push(n),!1):void 0}):a.push(n)}),e.each(r,function(t,n){var a=b[n],l=a.phash;l&&\"directory\"==a.mime&&-1===e.inArray(l,r)&&i[l]&&!s(l)&&o.push(i[l])}),{added:a,removed:r,changed:o}},this.sync=function(t,n){this.autoSync(\"stop\");var i=this,a=function(){var i=\"\",a=0,r=0;return t&&n&&e.each(b,function(e,n){n.phash&&n.phash===t&&(++a,r=Math.max(r,n.ts)),i=a+\":\"+r}),i},r=a(),o=e.Deferred().done(function(){i.trigger(\"sync\")}),s={data:{cmd:\"open\",reload:1,target:g,tree:!t&&this.ui.tree?1:0,compare:r},preventDefault:!0},l={data:{cmd:\"parents\",target:g},preventDefault:!0};return e.when(this.request(s),t?null:this.request(l)).fail(function(e){n?o.reject():(o.reject(e),e&&i.request({data:{cmd:\"open\",target:i.lastDir(\"\")||i.root(),tree:1,init:1},notify:{type:\"open\",cnt:1,hideCnt:!0}}))}).done(function(e,n){if(e.cwd.compare&&r===e.cwd.compare)return o.reject();i.api<2.1&&(n.tree=(n.tree||[]).concat([e.cwd]));var a=i.diff(e.files.concat(n&&n.tree?n.tree:[]),t);return a.added.push(e.cwd),a.removed.length&&i.remove(a),a.added.length&&i.add(a),a.changed.length&&i.change(a),o.resolve(a)}).always(function(){i.autoSync()}),o},this.upload=function(e){return this.transport.upload(e,this)},this.bind=function(e,t){var n;if(\"function\"==typeof t)for(e=(\"\"+e).toLowerCase().split(/\\s+/),n=0;n<e.length;n++)void 0===w[e[n]]&&(w[e[n]]=[]),w[e[n]].push(t);return this},this.unbind=function(t,n){var i,a,r;for(t=(\"\"+t).toLowerCase().split(/\\s+/),i=0;i<t.length;i++)a=w[t[i]]||[],r=e.inArray(n,a),r>-1&&a.splice(r,1);return n=null,this},this.trigger=function(t,n,i){var a,r,o,t=t.toLowerCase(),s=\"open\"===t,l=w[t]||[];if(this.debug(\"event-\"+t,n),s&&!i&&(o=JSON.stringify(n)),l.length)for(t=e.Event(t),i&&(t.data=n),r=l.length,a=0;r>a;a++){l[a].length&&(i||(t.data=s?JSON.parse(o):e.extend(!0,{},n)));try{if(l[a](t,this)===!1||t.isDefaultPrevented()){this.debug(\"event-stoped\",t.type);break}}catch(d){window.console&&window.console.log&&window.console.log(d)}}return this},this.getListeners=function(e){return e?w[e.toLowerCase()]:w},this.shortcut=function(t){var n,i,a,r,o;if(this.options.allowShortcuts&&t.pattern&&e.isFunction(t.callback))for(n=t.pattern.toUpperCase().split(/\\s+/),r=0;r<n.length;r++)i=n[r],o=i.split(\"+\"),a=1==(a=o.pop()).length?a>0?a:a.charCodeAt(0):e.ui.keyCode[a],a&&!x[i]&&(x[i]={keyCode:a,altKey:-1!=e.inArray(\"ALT\",o),ctrlKey:-1!=e.inArray(\"CTRL\",o),shiftKey:-1!=e.inArray(\"SHIFT\",o),type:t.type||\"keydown\",callback:t.callback,description:t.description,pattern:i});return this},this.shortcuts=function(){var t=[];return e.each(x,function(e,n){t.push([n.pattern,o.i18n(n.description)])}),t},this.clipboard=function(t,n){var i=function(){return e.map(k,function(e){return e.hash})};return void 0!==t&&(k.length&&this.trigger(\"unlockfiles\",{files:i()}),C=[],k=e.map(t||[],function(e){var t=b[e];return t?(C.push(e),{hash:e,phash:t.phash,name:t.name,mime:t.mime,read:t.read,locked:t.locked,cut:!!n}):null}),this.trigger(\"changeclipboard\",{clipboard:k.slice(0,k.length)}),n&&this.trigger(\"lockfiles\",{files:i()})),k.slice(0,k.length)},this.isCommandEnabled=function(t,n){var i;return n&&o.root(n)!==g?(i=[],e.each(o.disabledCmds,function(e,t){return 0==n.indexOf(e,0)?(i=t,!1):void 0})):i=v.disabled,this._commands[t]?-1===e.inArray(t,i):!1},this.exec=function(t,n,i,a){return\"open\"===t&&this.autoSync(\"stop\"),this._commands[t]&&this.isCommandEnabled(t,a)?this._commands[t].exec(n,i):e.Deferred().reject(\"No such command\")},this.dialog=function(n,i){var a=e(\"<div/>\").append(n).appendTo(t).elfinderdialog(i);return this.bind(\"resize\",function(){a.elfinderdialog(\"posInit\")}),a},this.getUI=function(e){return this.ui[e]||t},this.command=function(e){return void 0===e?this._commands:this._commands[e]},this.resize=function(e,n){t.css(\"width\",e).height(n).trigger(\"resize\"),this.trigger(\"resize\",{width:t.width(),height:t.height()})},this.restoreSize=function(){this.resize(F,S)},this.show=function(){t.show(),this.enable().trigger(\"show\")},this.hide=function(){this.disable().trigger(\"hide\"),t.hide()},this.destroy=function(){t&&t[0].elfinder&&(this.autoSync(\"stop\"),this.trigger(\"destroy\").disable(),w={},x={},e(document).add(t).off(\".\"+this.namespace),o.trigger=function(){},t.children().remove(),t.append(s.contents()).removeClass(this.cssClass).attr(\"style\",l),t[0].elfinder=null)},this.autoSync=function(e){var t;if(o.options.sync>=1e3){if(i&&(clearTimeout(i),i=null,o.trigger(\"autosync\",{action:\"stop\"})),e||!o.options.syncStart)return;t=function(e){var n;v.syncMinMs&&(e||i)&&(e&&o.trigger(\"autosync\",{action:\"start\"}),n=Math.max(o.options.sync,v.syncMinMs),i&&clearTimeout(i),i=setTimeout(function(){var e,a=!0,r=g;v.syncChkAsTs&&(e=b[r].ts)?o.request({data:{cmd:\"info\",targets:[r],compare:e,reload:1},preventDefault:!0}).done(function(n){var i;a=!0,n.compare&&(i=n.compare,i==e&&(a=!1)),a?o.sync(r).always(function(){i&&(b[r].ts=i),t()}):t()}).fail(function(e){e&&\"errConnect\"!=e?o.error(e):i=setTimeout(function(){t()},n)}):o.sync(g,!0).always(function(){t()})},n))},t(!0)}},e.fn.selectable&&e.fn.draggable&&e.fn.droppable?t.length?this.options.url?(e.extend(e.ui.keyCode,{F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120}),this.dragUpload=!1,this.xhrUpload=(\"undefined\"!=typeof XMLHttpRequestUpload||\"undefined\"!=typeof XMLHttpRequestEventTarget)&&\"undefined\"!=typeof File&&\"undefined\"!=typeof FormData,this.transport={},\"object\"==typeof this.options.transport&&(this.transport=this.options.transport,\"function\"==typeof this.transport.init&&this.transport.init(this)),\"function\"!=typeof this.transport.send&&(this.transport.send=function(t){return e.ajax(t)}),\"iframe\"==this.transport.upload?this.transport.upload=e.proxy(this.uploads.iframe,this):\"function\"==typeof this.transport.upload?this.dragUpload=!!this.options.dragUploadAllow:this.xhrUpload&&this.options.dragUploadAllow?(this.transport.upload=e.proxy(this.uploads.xhr,this),this.dragUpload=!0):this.transport.upload=e.proxy(this.uploads.iframe,this),this.error=function(){var e=arguments[0];return 1==arguments.length&&\"function\"==typeof e?o.bind(\"error\",e):o.trigger(\"error\",{error:e})},e.each([\"enable\",\"disable\",\"load\",\"open\",\"reload\",\"select\",\"add\",\"remove\",\"change\",\"dblclick\",\"getfile\",\"lockfiles\",\"unlockfiles\",\"selectfiles\",\"unselectfiles\",\"dragstart\",\"dragstop\",\"search\",\"searchend\",\"viewchange\"],function(t,n){o[n]=function(){var t=arguments[0];return 1==arguments.length&&\"function\"==typeof t?o.bind(n,t):o.trigger(n,e.isPlainObject(t)?t:{})}}),this.enable(function(){!f&&o.visible()&&o.ui.overlay.is(\":hidden\")&&(f=!0,document.activeElement&&document.activeElement.blur(),t.removeClass(\"elfinder-disabled\"))}).disable(function(){m=f,f=!1,t.addClass(\"elfinder-disabled\")}).open(function(){y=[]}).select(function(t){y=e.map(t.data.selected||t.data.value||[],function(e){return b[e]?e:null})}).error(function(t){var n={cssClass:\"elfinder-dialog-error\",title:o.i18n(o.i18n(\"error\")),resizable:!1,destroyOnClose:!0,buttons:{}};n.buttons[o.i18n(o.i18n(\"btnClose\"))]=function(){e(this).elfinderdialog(\"close\")},o.dialog('<span class=\"elfinder-dialog-icon elfinder-dialog-icon-error\"/>'+o.i18n(t.data.error),n)}).bind(\"tree parents\",function(e){D(e.data.tree||[])}).bind(\"tmb\",function(t){e.each(t.data.images||[],function(e,t){b[e]&&(b[e].tmb=t)})}).add(function(e){D(e.data.added||[])}).change(function(t){e.each(t.data.changed||[],function(t,n){var i=n.hash;b[i]&&e.each([\"locked\",\"hidden\",\"width\",\"height\"],function(e,t){b[i][t]&&!n[t]&&delete b[i][t]}),b[i]=b[i]?e.extend(b[i],n):n})}).remove(function(t){for(var n=t.data.removed||[],i=n.length,a=function(t){var n=b[t];n&&(\"directory\"==n.mime&&n.dirs&&e.each(b,function(e,n){n.phash==t&&a(e)}),delete b[t])};i--;)a(n[i])}).bind(\"searchstart\",function(t){e.extend(o.searchStatus,t.data),o.searchStatus.state=1}).bind(\"search\",function(e){o.searchStatus.state=2,D(e.data.files)}).bind(\"searchend\",function(){o.searchStatus.state=0}).bind(\"rm\",function(){var t=P.canPlayType&&P.canPlayType('audio/wav; codecs=\"1\"');t&&\"\"!=t&&\"no\"!=t&&e(P).html('<source src=\"'+M+'rm.wav\" type=\"audio/wav\">')[0].play()}),e.each(this.options.handlers,function(e,t){o.bind(e,t)}),this.history=new this.history(this),\"function\"==typeof this.options.getFileCallback&&this.commands.getfile&&(this.bind(\"dblclick\",function(e){e.preventDefault(),o.exec(\"getfile\").fail(function(){o.exec(\"open\")})}),this.shortcut({pattern:\"enter\",description:this.i18n(\"cmdgetfile\"),callback:function(){o.exec(\"getfile\").fail(function(){o.exec(\"mac\"==o.OS?\"rename\":\"open\")})}}).shortcut({pattern:\"ctrl+enter\",description:this.i18n(\"mac\"==this.OS?\"cmdrename\":\"cmdopen\"),callback:function(){o.exec(\"mac\"==o.OS?\"rename\":\"open\")}})),this.roots={},this._commands={},e.isArray(this.options.commands)||(this.options.commands=[]),e.each([\"open\",\"reload\",\"back\",\"forward\",\"up\",\"home\",\"info\",\"quicklook\",\"getfile\",\"help\"],function(t,n){-1===e.inArray(n,o.options.commands)&&o.options.commands.push(n)}),e.each(this.options.commands,function(t,n){var i=o.commands[n];e.isFunction(i)&&!o._commands[n]&&(i.prototype=I,o._commands[n]=new i,o._commands[n].setup(n,o.options.commandsOptions[n]||{}),o._commands[n].linkedCmds.length&&e.each(o._commands[n].linkedCmds,function(t,n){var i=o.commands[n];e.isFunction(i)&&!o._commands[n]&&(i.prototype=I,o._commands[n]=new i,o._commands[n].setup(n,o.options.commandsOptions[n]||{}))}))}),this.commandMap={},this.disabledCmds={},this.tmbUrls={},t.addClass(this.cssClass).on(u,function(){!f&&o.enable()}),this.ui={workzone:e(\"<div/>\").appendTo(t).elfinderworkzone(this),navbar:e(\"<div/>\").appendTo(t).elfindernavbar(this,this.options.uiOptions.navbar||{}),contextmenu:e(\"<div/>\").appendTo(t).elfindercontextmenu(this),overlay:e(\"<div/>\").appendTo(t).elfinderoverlay({show:function(){o.disable()},hide:function(){m&&o.enable()}}),cwd:e(\"<div/>\").appendTo(t).elfindercwd(this,this.options.uiOptions.cwd||{}),notify:this.dialog(\"\",{cssClass:\"elfinder-dialog-notify\",position:this.options.notifyDialog.position,resizable:!1,autoOpen:!1,closeOnEscape:!1,title:\"&nbsp;\",width:parseInt(this.options.notifyDialog.width)}),statusbar:e('<div class=\"ui-widget-header ui-helper-clearfix ui-corner-bottom elfinder-statusbar\"/>').hide().appendTo(t)},e.each(this.options.ui||[],function(n,i){var a=\"elfinder\"+i,r=o.options.uiOptions[i]||{};!o.ui[i]&&e.fn[a]&&(o.ui[i]=e(\"<\"+(r.tag||\"div\")+\"/>\").appendTo(t)[a](o,r))}),t[0].elfinder=this,this.options.resizable&&!this.UA.Touch&&e.fn.resizable&&t.resizable({handles:\"se\",minWidth:300,minHeight:200}),this.options.width&&(F=this.options.width),this.options.height&&(S=parseInt(this.options.height)),this.options.soundPath&&(M=this.options.soundPath.replace(/\\/+$/,\"\")+\"/\"),o.resize(F,S),e(document).on(\"click.\"+this.namespace,function(n){f&&!e(n.target).closest(t).length&&o.disable()}).on(p+\" \"+h,U),o.options.useBrowserHistory&&e(window).on(\"popstate\",function(t){var n=t.originalEvent.state&&t.originalEvent.state.thash;n&&!e.isEmptyObject(o.files())&&o.request({data:{cmd:\"open\",target:n,onhistory:1},notify:{type:\"open\",cnt:1,hideCnt:!0},syncOnFail:!0})}),this.trigger(\"init\").request({data:{cmd:\"open\",target:o.startDir(),init:1,tree:this.ui.tree?1:0},preventDone:!0,notify:{type:\"open\",cnt:1,hideCnt:!0},freeze:!0}).fail(function(){o.trigger(\"fail\").disable().lastDir(\"\"),w={},x={},e(document).add(t).off(\".\"+this.namespace),o.trigger=function(){}}).done(function(t){o.load().debug(\"api\",o.api),t=e.extend(!0,{},t),O(t),o.trigger(\"open\",t)}),this.one(\"load\",function(){t.trigger(\"resize\")}),function(){var n;e(window).on(\"resize\",function(){n&&clearTimeout(n),n=setTimeout(function(){o.trigger(\"resize\",{width:t.width(),height:t.height()})},200)}).on(\"beforeunload\",function(){return o.ui.notify.children().length?o.i18n(\"ntfsmth\"):(o.trigger(\"unload\"),void 0)})}(),e(window).on(\"message\",function(e){var t,n,i=e.originalEvent||null;if(i&&0===o.uploadURL.indexOf(i.origin))try{t=JSON.parse(i.data),n=t.data||null,n&&(n.error?o.error(n.error):(n.warning&&o.error(n.warning),n.removed&&n.removed.length&&o.remove(n),n.added&&n.added.length&&o.add(n),n.changed&&n.changed.length&&o.change(n),t.bind&&o.trigger(t.bind,n),n.sync&&o.sync()))}catch(e){o.sync()}}),o.dragUpload&&(t[0].addEventListener(\"dragenter\",function(e){\"TEXTAREA\"!==e.target.nodeName&&\"INPUT\"!==e.target.nodeName&&(e.preventDefault(),e.stopPropagation())},!1),t[0].addEventListener(\"dragleave\",function(e){\"TEXTAREA\"!==e.target.nodeName&&\"INPUT\"!==e.target.nodeName&&(e.preventDefault(),e.stopPropagation())},!1),t[0].addEventListener(\"dragover\",function(e){\"TEXTAREA\"!==e.target.nodeName&&\"INPUT\"!==e.target.nodeName&&(e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect=\"none\")},!1),t[0].addEventListener(\"drop\",function(e){\"TEXTAREA\"!==e.target.nodeName&&\"INPUT\"!==e.target.nodeName&&(e.stopPropagation(),e.preventDefault())},!1),function(){var n=\"native-drag-enter\",i=\"native-drag-disable\",a=\"class\",r=o.res(a,\"navdir\"),s=(o.res(a,\"droppable\"),o.res(a,\"navcollapse\")),l=o.res(a,\"navexpand\"),c=o.res(a,\"adroppable\"),u=o.res(a,\"navarrow\"),p=o.res(a,\"adroppable\");t.on(\"dragenter\",\".native-droppable\",function(t){if(t.originalEvent.dataTransfer){var a,d=e(t.currentTarget),h=t.currentTarget.id||null,f=null;if(h)!d.data(n)&&d.hasClass(r)&&d.is(\".\"+s+\":not(.\"+l+\")\")&&setTimeout(function(){d.is(\".\"+s+\".\"+c)&&d.children(\".\"+u).click()},500);else{f=o.cwd(),d.data(i,!1);try{e.each(t.originalEvent.dataTransfer.types,function(e,t){\"elfinderfrom:\"===t.substr(0,13)&&(a=t.substr(13).toLowerCase())})}catch(t){}}f&&(!f.write||a&&a===(window.location.href+f.hash).toLowerCase())?d.data(i,!0):(t.preventDefault(),t.stopPropagation(),d.data(n,!0),d.addClass(p))}}).on(\"dragleave\",\".native-droppable\",function(t){if(t.originalEvent.dataTransfer){var i=e(t.currentTarget);t.preventDefault(),t.stopPropagation(),i.data(n)?i.data(n,!1):i.removeClass(p)}}).on(\"dragover\",\".native-droppable\",function(t){if(t.originalEvent.dataTransfer){var a=e(t.currentTarget);t.preventDefault(),t.stopPropagation(),t.originalEvent.dataTransfer.dropEffect=a.data(i)?\"none\":\"copy\",a.data(n,!1)}}).on(\"drop\",\".native-droppable\",function(t){if(t.originalEvent.dataTransfer){var n=e(t.currentTarget);t.preventDefault(),t.stopPropagation(),n.removeClass(p),d=t.currentTarget.id?n.hasClass(r)?o.navId2Hash(t.currentTarget.id):o.cwdId2Hash(t.currentTarget.id):o.cwd().hash,t.originalEvent._target=d,o.directUploadTarget=d,o.exec(\"upload\",{dropEvt:t.originalEvent,target:d}),o.directUploadTarget=null}})}()),void 0):alert(this.i18n(\"errURL\")):alert(this.i18n(\"errNode\")):alert(this.i18n(\"errJqui\"))},elFinder.prototype={uniqueid:0,res:function(e,t){return this.resources[e]&&this.resources[e][t]},currentReqCmd:\"\",i18:{en:{translator:\"\",language:\"English\",direction:\"ltr\",dateFormat:\"d.m.Y H:i\",fancyDateFormat:\"$1 H:i\",messages:{}},months:[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],monthsShort:[\"msJan\",\"msFeb\",\"msMar\",\"msApr\",\"msMay\",\"msJun\",\"msJul\",\"msAug\",\"msSep\",\"msOct\",\"msNov\",\"msDec\"],days:[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"],daysShort:[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"]},kinds:{unknown:\"Unknown\",directory:\"Folder\",symlink:\"Alias\",\"symlink-broken\":\"AliasBroken\",\"application/x-empty\":\"TextPlain\",\"application/postscript\":\"Postscript\",\"application/vnd.ms-office\":\"MsOffice\",\"application/msword\":\"MsWord\",\"application/vnd.ms-word\":\"MsWord\",\"application/vnd.openxmlformats-officedocument.wordprocessingml.document\":\"MsWord\",\"application/vnd.ms-word.document.macroEnabled.12\":\"MsWord\",\"application/vnd.openxmlformats-officedocument.wordprocessingml.template\":\"MsWord\",\"application/vnd.ms-word.template.macroEnabled.12\":\"MsWord\",\"application/vnd.ms-excel\":\"MsExcel\",\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\":\"MsExcel\",\"application/vnd.ms-excel.sheet.macroEnabled.12\":\"MsExcel\",\"application/vnd.openxmlformats-officedocument.spreadsheetml.template\":\"MsExcel\",\"application/vnd.ms-excel.template.macroEnabled.12\":\"MsExcel\",\"application/vnd.ms-excel.sheet.binary.macroEnabled.12\":\"MsExcel\",\"application/vnd.ms-excel.addin.macroEnabled.12\":\"MsExcel\",\"application/vnd.ms-powerpoint\":\"MsPP\",\"application/vnd.openxmlformats-officedocument.presentationml.presentation\":\"MsPP\",\"application/vnd.ms-powerpoint.presentation.macroEnabled.12\":\"MsPP\",\"application/vnd.openxmlformats-officedocument.presentationml.slideshow\":\"MsPP\",\"application/vnd.ms-powerpoint.slideshow.macroEnabled.12\":\"MsPP\",\"application/vnd.openxmlformats-officedocument.presentationml.template\":\"MsPP\",\"application/vnd.ms-powerpoint.template.macroEnabled.12\":\"MsPP\",\"application/vnd.ms-powerpoint.addin.macroEnabled.12\":\"MsPP\",\"application/vnd.openxmlformats-officedocument.presentationml.slide\":\"MsPP\",\"application/vnd.ms-powerpoint.slide.macroEnabled.12\":\"MsPP\",\"application/pdf\":\"PDF\",\"application/xml\":\"XML\",\"application/vnd.oasis.opendocument.text\":\"OO\",\"application/vnd.oasis.opendocument.text-template\":\"OO\",\"application/vnd.oasis.opendocument.text-web\":\"OO\",\"application/vnd.oasis.opendocument.text-master\":\"OO\",\"application/vnd.oasis.opendocument.graphics\":\"OO\",\"application/vnd.oasis.opendocument.graphics-template\":\"OO\",\"application/vnd.oasis.opendocument.presentation\":\"OO\",\"application/vnd.oasis.opendocument.presentation-template\":\"OO\",\"application/vnd.oasis.opendocument.spreadsheet\":\"OO\",\"application/vnd.oasis.opendocument.spreadsheet-template\":\"OO\",\"application/vnd.oasis.opendocument.chart\":\"OO\",\"application/vnd.oasis.opendocument.formula\":\"OO\",\"application/vnd.oasis.opendocument.database\":\"OO\",\"application/vnd.oasis.opendocument.image\":\"OO\",\"application/vnd.openofficeorg.extension\":\"OO\",\"application/x-shockwave-flash\":\"AppFlash\",\"application/flash-video\":\"Flash video\",\"application/x-bittorrent\":\"Torrent\",\"application/javascript\":\"JS\",\"application/rtf\":\"RTF\",\"application/rtfd\":\"RTF\",\"application/x-font-ttf\":\"TTF\",\"application/x-font-otf\":\"OTF\",\"application/x-rpm\":\"RPM\",\"application/x-web-config\":\"TextPlain\",\"application/xhtml+xml\":\"HTML\",\"application/docbook+xml\":\"DOCBOOK\",\"application/x-awk\":\"AWK\",\"application/x-gzip\":\"GZIP\",\"application/x-bzip2\":\"BZIP\",\"application/x-xz\":\"XZ\",\"application/zip\":\"ZIP\",\"application/x-zip\":\"ZIP\",\"application/x-rar\":\"RAR\",\"application/x-tar\":\"TAR\",\"application/x-7z-compressed\":\"7z\",\"application/x-jar\":\"JAR\",\"text/plain\":\"TextPlain\",\"text/x-php\":\"PHP\",\"text/html\":\"HTML\",\"text/javascript\":\"JS\",\"text/css\":\"CSS\",\"text/rtf\":\"RTF\",\"text/rtfd\":\"RTF\",\"text/x-c\":\"C\",\"text/x-csrc\":\"C\",\"text/x-chdr\":\"CHeader\",\"text/x-c++\":\"CPP\",\"text/x-c++src\":\"CPP\",\"text/x-c++hdr\":\"CPPHeader\",\"text/x-shellscript\":\"Shell\",\"application/x-csh\":\"Shell\",\"text/x-python\":\"Python\",\"text/x-java\":\"Java\",\"text/x-java-source\":\"Java\",\"text/x-ruby\":\"Ruby\",\"text/x-perl\":\"Perl\",\"text/x-sql\":\"SQL\",\"text/xml\":\"XML\",\"text/x-comma-separated-values\":\"CSV\",\"text/x-markdown\":\"Markdown\",\"image/x-ms-bmp\":\"BMP\",\"image/jpeg\":\"JPEG\",\"image/gif\":\"GIF\",\"image/png\":\"PNG\",\"image/tiff\":\"TIFF\",\"image/x-targa\":\"TGA\",\"image/vnd.adobe.photoshop\":\"PSD\",\"image/xbm\":\"XBITMAP\",\"image/pxm\":\"PXM\",\"audio/mpeg\":\"AudioMPEG\",\"audio/midi\":\"AudioMIDI\",\"audio/ogg\":\"AudioOGG\",\"audio/mp4\":\"AudioMPEG4\",\"audio/x-m4a\":\"AudioMPEG4\",\"audio/wav\":\"AudioWAV\",\"audio/x-mp3-playlist\":\"AudioPlaylist\",\"video/x-dv\":\"VideoDV\",\"video/mp4\":\"VideoMPEG4\",\"video/mpeg\":\"VideoMPEG\",\"video/x-msvideo\":\"VideoAVI\",\"video/quicktime\":\"VideoMOV\",\"video/x-ms-wmv\":\"VideoWM\",\"video/x-flv\":\"VideoFlash\",\"video/x-matroska\":\"VideoMKV\",\"video/ogg\":\"VideoOGG\"},rules:{defaults:function(t){return!t||t.added&&!e.isArray(t.added)||t.removed&&!e.isArray(t.removed)||t.changed&&!e.isArray(t.changed)?!1:!0\n-},open:function(t){return t&&t.cwd&&t.files&&e.isPlainObject(t.cwd)&&e.isArray(t.files)},tree:function(t){return t&&t.tree&&e.isArray(t.tree)},parents:function(t){return t&&t.tree&&e.isArray(t.tree)},tmb:function(t){return t&&t.images&&(e.isPlainObject(t.images)||e.isArray(t.images))},upload:function(t){return t&&(e.isPlainObject(t.added)||e.isArray(t.added))},search:function(t){return t&&t.files&&e.isArray(t.files)}},commands:{},cmdsToAdd:\"archive duplicate extract mkdir mkfile paste rm upload\",parseUploadData:function(t){var n;if(!e.trim(t))return{error:[\"errResponse\",\"errDataEmpty\"]};try{n=e.parseJSON(t)}catch(i){return{error:[\"errResponse\",\"errDataNotJSON\"]}}return this.validResponse(\"upload\",n)?(n=this.normalize(n),n.removed=e.merge(n.removed||[],e.map(n.added||[],function(e){return e.hash})),n):{error:[\"errResponse\"]}},iframeCnt:0,uploads:{xhrUploading:!1,checkExists:function(t,n,i){var a,r,o=e.Deferred(),s=function(){for(var e=t.length;--e>-1;)t[e]._remove=!0},l=function(){var l=[],d={},c=[],u=[],p=function(e){var n=e==u.length-1,a={title:i.i18n(\"cmdupload\"),text:[\"errExists\",u[e].name,\"confirmRepl\"],all:!n,accept:{label:\"btnYes\",callback:function(t){n||t?o.resolve(l,d):p(++e)}},reject:{label:\"btnNo\",callback:function(i){var a;if(i)for(a=u.length;e<a--;)t[u[a].i]._remove=!0;else t[u[e].i]._remove=!0;n||i?o.resolve(l,d):p(++e)}},cancel:{label:\"btnCancel\",callback:function(){s(),o.resolve(l,d)}},buttons:[{label:\"btnBackup\",callback:function(t){var i;if(t)for(i=u.length;e<i--;)l.push(u[i].name);else l.push(u[e].name);n||t?o.resolve(l,d):p(++e)}}]};i.iframeCnt>0&&delete a.reject,i.confirm(a)};a=e.map(t,function(e,t){return e.name?{i:t,name:e.name}:null}),r=e.map(a,function(e){return e.name}),i.request({data:{cmd:\"ls\",target:n,intersect:r},notify:{type:\"preupload\",cnt:1,hideCnt:!0},preventFail:!0}).done(function(t){t&&(t.error?s():i.option(\"uploadOverwrite\")&&t.list&&(e.isArray(t.list)?c=t.list||[]:(c=e.map(t.list,function(e){return e}),d=t.list),u=e.map(a,function(t){return-1!==e.inArray(t.name,c)?t:null}),n==i.cwd().hash&&e(e.map(i.files(),function(e){return e.phash==n?e.name:null})).filter(c).length<1&&i.sync())),u.length>0?p(0):o.resolve([])}).fail(function(e){s(),o.resolve([]),e&&i.error(e)})};return i.api>=2.1&&\"object\"==typeof t[0]?(l(),o):o.resolve([])},checkFile:function(t,n,i){if(t.checked||\"files\"==t.type)return t.files;if(\"data\"==t.type){var a,r=e.Deferred(),o=[],s=[],l=[],d=[],c=0,u=function(t){var i=function(e){return Array.prototype.slice.call(e||[])},a=function(t){var n=e.Deferred();return\"undefined\"==typeof t?n.reject(\"empty\"):t.isFile?t.file(function(e){n.resolve(e)},function(){n.reject()}):n.reject(\"dirctory\"),n.promise()};t.readEntries(function(e){if(e.length)d=d.concat(i(e)),u(t);else{var r=d.length-1,p=function(e){a(d[e]).done(function(t){\"win\"==n.OS&&t.name.match(/^(?:desktop\\.ini|thumbs\\.db)$/i)||\"mac\"==n.OS&&t.name.match(/^\\.ds_store$/i)||(s.push(d[e].fullPath),o.push(t))}).fail(function(t){\"dirctory\"==t&&l.push(d[e])}).always(function(){c--,r>e&&(c++,p(++e))})};c++,p(0),c--}})},p=function(e,t){var i,a;d=[];for(var r=e.length,p=0;r>p;p++)a=t?e[p]:e[p].getAsEntry?e[p].getAsEntry():e[p].webkitGetAsEntry(),a&&(a.isFile?(c++,a.file(function(e){s.push(\"\"),o.push(e),c--})):a.isDirectory&&n.api>=2.1&&(c>0?l.push(a):(c=0,i=a.createReader(),c++,u(i))))};return a=e.map(t.files.items,function(e){return e.getAsEntry?e.getAsEntry():e.webkitGetAsEntry()}),a.length>0?(n.uploads.checkExists(a,i,n).done(function(t,d){var u,h=[];n.option(\"uploadOverwrite\")&&(a=e.map(a,function(a){var r,o,s,l;return a.isDirectory&&(r=e.inArray(a.name,t),-1!==r&&(t.splice(r,1),o=n.uniqueName(a.name+n.options.backupSuffix,null,\"\"),e.each(d,function(e,t){return a.name==t?(s=e,!1):void 0}),s||(s=n.fileByName(a.name,i).hash),n.lockfiles({files:[s]}),l=n.request({data:{cmd:\"rename\",target:s,name:o},notify:{type:\"rename\",cnt:1}}).fail(function(){a._remove=!0,n.sync()}).always(function(){n.unlockfiles({files:[s]})}),h.push(l))),a._remove?null:a})),e.when.apply(e,h).done(function(){a.length>0?(u=setTimeout(function(){n.notify({type:\"readdir\",cnt:1,hideCnt:!0})},n.options.notifyDelay),p(a,!0),setTimeout(function e(){c>0?setTimeout(e,10):l.length>0?(p([l.shift()],!0),setTimeout(e,10)):(u&&clearTimeout(u),n.notify({type:\"readdir\",cnt:-1}),r.resolve([o,s,t,d]))},10)):r.reject()})}),r.promise()):r.reject()}var h=[],f=[],m=t.files[0];if(\"html\"==t.type){var g,v=e(\"<html/>\").append(e.parseHTML(m));e(\"img[src]\",v).each(function(){var t,n,i=e(this),a=i.closest(\"a\");a&&a.attr(\"href\")&&a.attr(\"href\").match(/\\.(?:jpe?g|gif|bmp|png)/i)&&(n=a.attr(\"href\")),t=i.attr(\"src\"),t&&(n?(-1==e.inArray(n,h)&&h.push(n),-1==e.inArray(t,f)&&f.push(t)):-1==e.inArray(t,h)&&h.push(t))}),g=e(\"a[href]\",v),g.each(function(){var t,n=function(e){var t=document.createElement(\"a\");return t.href=e,t};e(this).text()&&(t=n(e(this).attr(\"href\")),!t.href||1!==g.length&&t.pathname.match(/(?:\\.html?|\\/[^\\/.]*)$/i)||-1==e.inArray(t.href,h)&&-1==e.inArray(t.href,f)&&h.push(t.href))})}else{var b,y,w;for(b=/(http[^<>\"{}|\\\\^\\[\\]`\\s]+)/gi;y=b.exec(m);)w=y[1].replace(/&amp;/g,\"&\"),-1==e.inArray(w,h)&&h.push(w)}return h},xhr:function(t,n){var i,a=n?n:this,r=a.getUI(),o=new XMLHttpRequest,s=null,l=null,d=t.checked,c=t.isDataType||\"data\"==t.type,u=0,p=e.Deferred().fail(function(e){if(a.uploads.xhrUploading){setTimeout(function(){a.sync()},5e3),a.uploads.xhrUploading=!1;var t=m.length?c?m[0][0]:m[0]:{};t._cid&&(h=new FormData,m=[{_chunkfail:!0}],h.append(\"chunk\",t._chunk),h.append(\"cid\",t._cid),c=!1,S(m))}m=null,e&&a.error(e)}).done(function(e){o=null,m=null,e&&(e.warning&&a.error(e.warning),e.removed&&a.remove(e),e.added&&a.add(e),e.changed&&a.change(e),a.trigger(\"upload\",e),e.sync&&a.sync())}).always(function(){r.off(\"uploadabort\",k),e(window).off(\"unload\",k),s&&clearTimeout(s),l&&clearTimeout(l),d&&!t.multiupload&&x()&&a.notify({type:\"upload\",cnt:-g,progress:0,size:0}),F&&a.ui.notify.children(\".elfinder-notify-chunkmerge\").length&&a.notify({type:\"chunkmerge\",cnt:-1})}),h=new FormData,f=t.target||a.cwd().hash,m=t.input?t.input.files:a.uploads.checkFile(t,a,f),g=t.checked?c?m[0].length:m.length:m.length,v=0,b=0,y=!1,w=!1,x=function(){return y=y||a.ui.notify.children(\".elfinder-notify-upload\").length},k=function(){w=!0,o&&(o.quiet=!0,o.abort())},C=function(e){return e||(e=b),setTimeout(function(){y=!0,a.notify({type:\"upload\",cnt:g,progress:v-i,size:e,cancel:function(){r.trigger(\"uploadabort\")}}),i=v},a.options.notifyDelay)},T=t.renames||null,I=t.hashes||null,F=!1;if(r.one(\"uploadabort\",k),e(window).one(\"unload\",k),!F&&(i=v),!c&&!g)return p.reject([\"errUploadNoFiles\"]);o.addEventListener(\"error\",function(){p.reject(\"errConnect\")},!1),o.addEventListener(\"abort\",function(){p.reject([\"errConnect\",\"errAbort\"])},!1),o.addEventListener(\"load\",function(){var e,n=o.status,r=0,d=\"\";if(n>=400?d=n>500?\"errResponse\":\"errConnect\":(4!=o.readyState&&(d=[\"errConnect\",\"errTimeout\"]),o.responseText||(d=[\"errResponse\",\"errDataEmpty\"])),d){if(F||u++>3){var f=c?m[0][0]:m[0];return p.reject(f._cid?null:d)}return b=0,o.open(\"POST\",a.uploadURL,!0),o.send(h),void 0}if(v=b,x()&&(r=v-i)&&a.notify({type:\"upload\",cnt:0,progress:r,size:0}),e=a.parseUploadData(o.responseText),e._chunkmerged){h=new FormData;var y=[{_chunkmerged:e._chunkmerged,_name:e._name}];return F=!0,l=setTimeout(function(){a.notify({type:\"chunkmerge\",cnt:1})},a.options.notifyDelay),c?S(y,m[1]):S(y),void 0}e._multiupload=t.multiupload?!0:!1,e.error?e._chunkfailure?(w=!0,a.uploads.xhrUploading=!1,s&&clearTimeout(s),a.ui.notify.children(\".elfinder-notify-upload\").length?(a.notify({type:\"upload\",cnt:-g,progress:0,size:0}),p.reject(e.error)):p.reject()):p.reject(e.error):p.resolve(e)},!1),o.upload.addEventListener(\"loadstart\",function(e){!F&&e.lengthComputable&&(v=e.loaded,u&&(v=0),b=e.total,v||(v=parseInt(.05*b)),x()&&(a.notify({type:\"upload\",cnt:0,progress:v-i,size:t.multiupload?0:b}),i=v))},!1),o.upload.addEventListener(\"progress\",function(e){var n;e.lengthComputable&&!F&&(v=e.loaded,!t.checked&&v>0&&!s&&(s=C(o._totalSize-v)),b||(u&&(v=0),b=e.total,v||(v=parseInt(.05*b))),n=v-i,x()&&n/e.total>=.05&&(a.notify({type:\"upload\",cnt:0,progress:n,size:0}),i=v))},!1);var S=function(i,r){var l,u,m,v,b,y,k,F,S,M,P,A,O=0,D=1,U=[],z=0,E=g,j=0,_=[],R=+new Date,H=Math.min((n.uplMaxSize?n.uplMaxSize:2097152)-8190,n.options.uploadMaxChunkSize),N=!1,q=function(i,r){var o,l=[];if(!w){for(;i.length&&l.length<r;)l.push(i.shift());if(l.length)for(var d=0;d<l.length&&!w;d++)o=c?l[d][0][0]._cid||null:l[d][0]._cid||null,A[o]?P--:n.exec(\"upload\",{type:t.type,isDataType:c,files:l[d],checked:!0,target:f,renames:T,hashes:I,multiupload:!0}).fail(function(){o&&(A[o]=!0)}).always(function(t){t&&t.added&&(S=e.merge(S,t.added)),P<=++M&&(n.trigger(\"multiupload\",{added:S}),s&&clearTimeout(s),x()&&a.notify({type:\"upload\",cnt:-g,progress:0,size:0})),q(i,1)})}(l.length<1||w)&&(w?(s&&clearTimeout(s),o&&(A[o]=!0),p.reject()):(p.resolve(),a.uploads.xhrUploading=!1))},L=function(){a.uploads.xhrUploading?setTimeout(function(){L()},100):(a.uploads.xhrUploading=!0,q(U,3))};if(!d&&(c||\"files\"==t.type)){for(l=n.option(\"uploadMaxSize\")?n.option(\"uploadMaxSize\"):0,m=0;m<i.length;m++)if(k=i[m],u=k.size,N===!1&&(N=\"\",a.api>=2.1&&(\"slice\"in k?N=\"slice\":\"mozSlice\"in k?N=\"mozSlice\":\"webkitSlice\"in k&&(N=\"webkitSlice\"))),l&&u>l||!N&&n.uplMaxSize&&u>n.uplMaxSize)a.error(a.i18n(\"errUploadFile\",k.name)+\" \"+a.i18n(\"errUploadFileSize\")),g--,E--;else if(N&&u>H){for(v=0,b=H,y=-1,E=Math.floor(u/H),j+=u,_[R]=0;u>=v;)F=k[N](v,b),F._chunk=k.name+\".\"+ ++y+\"_\"+E+\".part\",F._cid=R,F._range=v+\",\"+F.size+\",\"+u,_[R]++,O&&z++,\"undefined\"==typeof U[z]&&(U[z]=[],c&&(U[z][0]=[],U[z][1]=[])),O=H,D=1,c?(U[z][0].push(F),U[z][1].push(r[m])):U[z].push(F),v=b,b=v+H;null==F?(a.error(a.i18n(\"errUploadFile\",k.name)+\" \"+a.i18n(\"errUploadFileSize\")),g--,E--):E+=y}else(n.uplMaxSize&&O+u>=n.uplMaxSize||D>n.uplMaxFile)&&(O=0,D=1,z++),\"undefined\"==typeof U[z]&&(U[z]=[],c&&(U[z][0]=[],U[z][1]=[])),c?(U[z][0].push(k),U[z][1].push(r[m])):U[z].push(k),O+=u,j+=u,D++;if(0==U.length)return t.checked=!0,!1;if(U.length>1)return s=C(j),S=[],M=0,P=U.length,A=[],L(),!0;c?(i=U[0][0],r=U[0][1]):i=U[0]}return d||(n.UA.Safari&&t.files?o._totalSize=j:s=C(j)),d=!0,i.length||p.reject([\"errUploadNoFiles\"]),o.open(\"POST\",a.uploadURL,!0),n.customHeaders&&e.each(n.customHeaders,function(e){o.setRequestHeader(e,this)}),n.xhrFields&&e.each(n.xhrFields,function(e){e in o&&(o[e]=this)}),h.append(\"cmd\",\"upload\"),h.append(a.newAPI?\"target\":\"current\",f),T&&T.length&&(e.each(T,function(e,t){h.append(\"renames[]\",t)}),h.append(\"suffix\",n.options.backupSuffix)),I&&e.each(I,function(e,t){h.append(\"hashes[\"+e+\"]\",t)}),e.each(a.options.customData,function(e,t){h.append(e,t)}),e.each(a.options.onlyMimes,function(e,t){h.append(\"mimes[\"+e+\"]\",t)}),e.each(i,function(e,t){t._chunkmerged?(h.append(\"chunk\",t._chunkmerged),h.append(\"upload[]\",t._name)):(t._chunkfail?(h.append(\"upload[]\",\"chunkfail\"),h.append(\"mimes\",\"chunkfail\")):h.append(\"upload[]\",t),t._chunk&&(h.append(\"chunk\",t._chunk),h.append(\"cid\",t._cid),h.append(\"range\",t._range)))}),c&&e.each(r,function(e,t){h.append(\"upload_path[]\",t)}),o.onreadystatechange=function(){if(4==o.readyState&&0==o.status)if(w)p.reject();else{var n=[\"errAbort\"];!c&&t.files&&e.map(t.files,function(e){return 0===e.size?e:null}).length&&n.push(\"errFolderUpload\"),p.reject(n)}},o.send(h),!0};return c?d?S(m[0],m[1]):m.done(function(e){T=[],I={},g=e[0].length,g?(T=e[2],I=e[3],S(e[0],e[1])):p.reject([\"errUploadNoFiles\"])}).fail(function(){p.reject()}):m.length>0?null==T?(T=[],I={},a.uploads.checkExists(m,f,n).done(function(t,i){n.option(\"uploadOverwrite\")&&(T=t,I=i,m=e.map(m,function(e){return e._remove?null:e})),g=m.length,g>0?S(m)||p.reject():p.reject()})):S(m)||p.reject():p.reject(),p},iframe:function(t,n){var i,a,r,o,s=n?n:this,l=t.input?t.input:!1,d=l?!1:s.uploads.checkFile(t,s),c=e.Deferred().fail(function(e){e&&s.error(e)}).done(function(e){e.warning&&s.error(e.warning),e.removed&&s.remove(e),e.added&&s.add(e),e.changed&&s.change(e),s.trigger(\"upload\",e),e.sync&&s.sync()}),u=\"iframe-\"+s.namespace+ ++s.iframeCnt,p=e('<form action=\"'+s.uploadURL+'\" method=\"post\" enctype=\"multipart/form-data\" encoding=\"multipart/form-data\" target=\"'+u+'\" style=\"display:none\"><input type=\"hidden\" name=\"cmd\" value=\"upload\" /></form>'),h=this.UA.IE,f=function(){o&&clearTimeout(o),r&&clearTimeout(r),a&&s.notify({type:\"upload\",cnt:-i}),setTimeout(function(){h&&e('<iframe src=\"javascript:false;\"/>').appendTo(p),p.remove(),m.remove()},100)},m=e('<iframe src=\"'+(h?\"javascript:false;\":\"about:blank\")+'\" name=\"'+u+'\" style=\"position:absolute;left:-1000px;top:-1000px\" />').on(\"load\",function(){m.off(\"load\").on(\"load\",function(){f(),c.reject()}),r=setTimeout(function(){a=!0,s.notify({type:\"upload\",cnt:i})},s.options.notifyDelay),s.options.iframeTimeout>0&&(o=setTimeout(function(){f(),c.reject([errors.connect,errors.timeout])},s.options.iframeTimeout)),p.submit()}),g=t.target||s.cwd().hash,v=[],b=[],y=[],w={};if(d&&d.length)e.each(d,function(e,t){p.append('<input type=\"hidden\" name=\"upload[]\" value=\"'+t+'\"/>')}),i=1;else{if(!(l&&e(l).is(\":file\")&&e(l).val()))return c.reject();n.option(\"uploadOverwrite\")&&(v=l.files?l.files:[{name:e(l).val().replace(/^(?:.+[\\\\\\/])?([^\\\\\\/]+)$/,\"$1\")}],b.push(s.uploads.checkExists(v,g,s).done(function(t,n){y=t,w=n,i=e.map(v,function(e){return e._remove?null:e}).length,i!=v.length&&(i=0)}))),i=l.files?l.files.length:1,p.append(l)}return e.when.apply(e,b).done(function(){return 1>i?c.reject():(p.append('<input type=\"hidden\" name=\"'+(s.newAPI?\"target\":\"current\")+'\" value=\"'+g+'\"/>').append('<input type=\"hidden\" name=\"html\" value=\"1\"/>').append('<input type=\"hidden\" name=\"node\" value=\"'+s.id+'\"/>').append(e(l).attr(\"name\",\"upload[]\")),y.length>0&&(e.each(y,function(e,t){p.append('<input type=\"hidden\" name=\"renames[]\" value=\"'+s.escape(t)+'\"/>')}),p.append('<input type=\"hidden\" name=\"suffix\" value=\"'+n.options.backupSuffix+'\"/>')),w&&e.each(y,function(e,t){p.append('<input type=\"hidden\" name=\"['+e+']\" value=\"'+s.escape(t)+'\"/>')}),e.each(s.options.onlyMimes||[],function(e,t){p.append('<input type=\"hidden\" name=\"mimes[]\" value=\"'+s.escape(t)+'\"/>')}),e.each(s.options.customData,function(e,t){p.append('<input type=\"hidden\" name=\"'+e+'\" value=\"'+s.escape(t)+'\"/>')}),p.appendTo(\"body\"),m.appendTo(\"body\"),void 0)}),c}},one:function(e,t){var n=this,i=function(a){return setTimeout(function(){n.unbind(e,i)},3),t.apply(n.getListeners(a.type),arguments)};return this.bind(e,i)},localStorage:function(e,t){var n,i,a=window.localStorage,r=\"elfinder-\"+e+this.id;if(e=window.location.pathname+\"-elfinder-\"+e+this.id,null===t)return a.removeItem(e);if(void 0===t&&!(n=a.getItem(e))&&(i=a.getItem(r))&&(t=i,a.removeItem(r)),void 0!==t){try{a.setItem(e,t)}catch(o){a.clear(),a.setItem(e,t)}n=a.getItem(e)}return n},cookie:function(t,n){var i,a,r,o;if(t=\"elfinder-\"+t+this.id,void 0===n){if(document.cookie&&\"\"!=document.cookie)for(r=document.cookie.split(\";\"),t+=\"=\",o=0;o<r.length;o++)if(r[o]=e.trim(r[o]),r[o].substring(0,t.length)==t)return decodeURIComponent(r[o].substring(t.length));return\"\"}return a=e.extend({},this.options.cookie),null===n&&(n=\"\",a.expires=-1),\"number\"==typeof a.expires&&(i=new Date,i.setTime(i.getTime()+864e5*a.expires),a.expires=i),document.cookie=t+\"=\"+encodeURIComponent(n)+\"; expires=\"+a.expires.toUTCString()+(a.path?\"; path=\"+a.path:\"\")+(a.domain?\"; domain=\"+a.domain:\"\")+(a.secure?\"; secure\":\"\"),n},startDir:function(){var e=window.location.hash;return e&&e.match(/^#elf_/)?e.replace(/^#elf_/,\"\"):this.options.startPathHash?this.options.startPathHash:this.lastDir()},lastDir:function(e){return this.options.rememberLastDir?this.storage(\"lastdir\",e):\"\"},_node:e(\"<span/>\"),escape:function(e){return this._node.text(e).html().replace(/\"/g,\"&quot;\").replace(/'/g,\"&#039;\")},normalize:function(t){var n=function(e){return e&&e.hash&&e.name&&e.mime?(\"application/x-empty\"==e.mime&&(e.mime=\"text/plain\"),e):null};return t.files&&(t.files=e.map(t.files,n)),t.tree&&(t.tree=e.map(t.tree,n)),t.added&&(t.added=e.map(t.added,n)),t.changed&&(t.changed=e.map(t.changed,n)),t.api&&(t.init=!0),t},setSort:function(e,t,n){this.storage(\"sortType\",this.sortType=this.sortRules[e]?e:\"name\"),this.storage(\"sortOrder\",this.sortOrder=/asc|desc/.test(t)?t:\"asc\"),this.storage(\"sortStickFolders\",(this.sortStickFolders=!!n)?1:\"\"),this.trigger(\"sortchange\")},_sortRules:{name:function(e,t){var n,i,a=e.name.toLowerCase(),r=t.name.toLowerCase(),o=\"\",s=\"\",l=elFinder.prototype.naturalCompare;return(n=a.match(/^(.+)(\\.[0-9a-z.]+)$/))&&(a=n[1],o=n[2]),(n=r.match(/^(.+)(\\.[0-9a-z.]+)$/))&&(r=n[1],s=n[2]),i=l(a,r),0==i&&(o||s)&&o!=s&&(i=l(o,s)),i},size:function(e,t){var n=parseInt(e.size)||0,i=parseInt(t.size)||0;return n==i?0:n>i?1:-1},kind:function(e,t){return elFinder.prototype.naturalCompare(e.mime,t.mime)},date:function(e,t){var n=e.ts||e.date,i=t.ts||t.date;return n==i?0:n>i?1:-1}},naturalCompare:function(e,t){var n=elFinder.prototype.naturalCompare;return\"undefined\"==typeof n.loc&&(n.loc=navigator.userLanguage||navigator.browserLanguage||navigator.language||\"en-US\"),\"undefined\"==typeof n.sort&&(\"11\".localeCompare(\"2\",n.loc,{numeric:!0})>0?n.sort=window.Intl&&window.Intl.Collator?new Intl.Collator(n.loc,{numeric:!0}).compare:function(e,t){return e.localeCompare(t,n.loc,{numeric:!0})}:(n.sort=function(e,t){var i,a,r=/(^-?[0-9]+(\\.?[0-9]*)[df]?e?[0-9]?$|^0x[0-9a-f]+$|[0-9]+)/gi,o=/(^[ ]*|[ ]*$)/g,s=/(^([\\w ]+,?[\\w ]+)?[\\w ]+,?[\\w ]+\\d+:\\d+(:\\d+)?[\\w ]?|^\\d{1,4}[\\/\\-]\\d{1,4}[\\/\\-]\\d{1,4}|^\\w+, \\w+ \\d+, \\d{4})/,l=/^0x[0-9a-f]+$/i,d=/^0/,c=/^[\\x01\\x21-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\x7e]/,u=function(e){return n.sort.insensitive&&(\"\"+e).toLowerCase()||\"\"+e},p=u(e).replace(o,\"\").replace(/^_/,\"\u0001\")||\"\",h=u(t).replace(o,\"\").replace(/^_/,\"\u0001\")||\"\",f=p.replace(r,\"\\0$1\\0\").replace(/\\0$/,\"\").replace(/^\\0/,\"\").split(\"\\0\"),m=h.replace(r,\"\\0$1\\0\").replace(/\\0$/,\"\").replace(/^\\0/,\"\").split(\"\\0\"),g=parseInt(p.match(l))||1!=f.length&&p.match(s)&&Date.parse(p),v=parseInt(h.match(l))||g&&h.match(s)&&Date.parse(h)||null,b=0;if(v){if(v>g)return-1;if(g>v)return 1}for(var y=0,w=Math.max(f.length,m.length);w>y;y++){if(i=!(f[y]||\"\").match(d)&&parseFloat(f[y])||f[y]||0,a=!(m[y]||\"\").match(d)&&parseFloat(m[y])||m[y]||0,isNaN(i)!==isNaN(a)){if(isNaN(i)&&(\"string\"!=typeof i||!i.match(c)))return 1;if(\"string\"!=typeof a||!a.match(c))return-1}if(0===parseInt(i,10)&&(i=0),0===parseInt(a,10)&&(a=0),typeof i!=typeof a&&(i+=\"\",a+=\"\"),n.sort.insensitive&&\"string\"==typeof i&&\"string\"==typeof a&&(b=i.localeCompare(a,n.loc),0!==b))return b;if(a>i)return-1;if(i>a)return 1}return 0},n.sort.insensitive=!0)),n.sort(e,t)},compare:function(e,t){var n,i=this,a=i.sortType,r=\"asc\"==i.sortOrder,o=i.sortStickFolders,s=i.sortRules,l=s[a],d=\"directory\"==e.mime,c=\"directory\"==t.mime;if(o){if(d&&!c)return-1;if(!d&&c)return 1}return n=r?l(e,t):l(t,e),\"name\"!=a&&0==n?n=r?s.name(e,t):s.name(t,e):n},sortFiles:function(e){return e.sort(this.compare)},notify:function(t){var n,i,a,r=t.type,o=this.messages[\"ntf\"+r]?this.i18n(\"ntf\"+r):this.i18n(\"ntfsmth\"),s=this.ui.notify,l=s.children(\".elfinder-notify-\"+r),d=l.children(\"div.elfinder-notify-cancel\").children(\"button\"),c='<div class=\"elfinder-notify elfinder-notify-{type}\"><span class=\"elfinder-dialog-icon elfinder-dialog-icon-{type}\"/><span class=\"elfinder-notify-msg\">{msg}</span> <span class=\"elfinder-notify-cnt\"/><div class=\"elfinder-notify-progressbar\"><div class=\"elfinder-notify-progress\"/></div><div class=\"elfinder-notify-cancel\"/></div>',u=t.cnt,p=\"undefined\"!=typeof t.size?parseInt(t.size):null,h=\"undefined\"!=typeof t.progress&&t.progress>=0?t.progress:null,f=t.cancel,m=\"ui-state-hover\",g=function(){l._esc&&e(document).off(\"keydown\",l._esc),l.remove(),!s.children().length&&s.elfinderdialog(\"close\")};return r?(l.length||(l=e(c.replace(/\\{type\\}/g,r).replace(/\\{msg\\}/g,o)).appendTo(s).data(\"cnt\",0),null!=h&&l.data({progress:0,total:0}),f&&(d=e('<button type=\"button\" class=\"ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only\"><span class=\"ui-button-text\">'+this.i18n(\"btnCancel\")+\"</span></button>\").hover(function(t){e(this).toggleClass(m,\"mouseenter\"==t.type)}),l.children(\"div.elfinder-notify-cancel\").append(d))),n=u+parseInt(l.data(\"cnt\")),n>0?(f&&d.length&&(e.isFunction(f)||\"object\"==typeof f&&f.promise)&&(l._esc=function(t){(\"keydown\"!=t.type||t.keyCode==e.ui.keyCode.ESCAPE)&&(t.preventDefault(),t.stopPropagation(),g(),f.promise?(f.xhr&&(f.xhr.quiet=!0,f.xhr.abort()),f.reject()):f(t))},d.on(\"click\",function(e){l._esc(e)}),e(document).on(\"keydown\",l._esc)),!t.hideCnt&&l.children(\".elfinder-notify-cnt\").text(\"(\"+n+\")\"),s.is(\":hidden\")&&s.elfinderdialog(\"open\"),l.data(\"cnt\",n),null!=h&&(i=l.data(\"total\"))>=0&&(a=l.data(\"progress\"))>=0&&(i+=null!=p?p:u,a+=h,null==p&&0>u&&(a+=100*u),l.data({progress:a,total:i}),null!=p&&(a*=100,i=Math.max(1,i)),h=parseInt(a/i),l.find(\".elfinder-notify-progress\").animate({width:(100>h?h:100)+\"%\"},20))):g(),this):this},confirm:function(t){var n,i=this,a=!1,r={cssClass:\"elfinder-dialog-confirm\",modal:!0,resizable:!1,title:this.i18n(t.title||\"confirmReq\"),buttons:{},close:function(){!a&&t.cancel.callback(),e(this).elfinderdialog(\"destroy\")}},o=this.i18n(\"apllyAll\");return r.buttons[this.i18n(t.accept.label)]=function(){t.accept.callback(!(!n||!n.prop(\"checked\"))),a=!0,e(this).elfinderdialog(\"close\")},t.reject&&(r.buttons[this.i18n(t.reject.label)]=function(){t.reject.callback(!(!n||!n.prop(\"checked\"))),a=!0,e(this).elfinderdialog(\"close\")}),t.buttons&&t.buttons.length>0&&e.each(t.buttons,function(t,o){r.buttons[i.i18n(o.label)]=function(){o.callback(!(!n||!n.prop(\"checked\"))),a=!0,e(this).elfinderdialog(\"close\")}}),r.buttons[this.i18n(t.cancel.label)]=function(){e(this).elfinderdialog(\"close\")},t.all&&(r.create=function(){var t=e('<div class=\"elfinder-dialog-confirm-applyall\"/>');n=e('<input type=\"checkbox\" />'),e(this).next().find(\".ui-dialog-buttonset\").prepend(t.append(e(\"<label>\"+o+\"</label>\").prepend(n)))}),this.dialog('<span class=\"elfinder-dialog-icon elfinder-dialog-icon-confirm\"/>'+this.i18n(t.text),r)},uniqueName:function(e,t,n){var i,a,r=0,o=\"\";if(e=this.i18n(e),t=t||this.cwd().hash,n=\"undefined\"==typeof n?\" \":n,(i=e.match(/^(.+)(\\.[^.]+)$/))&&(o=i[2],e=i[1]),a=e+o,!this.fileByName(a,t))return a;for(;1e4>r;)if(a=e+n+ ++r+o,!this.fileByName(a,t))return a;return e+Math.random()+o},i18n:function(){var t,n,i,a=this,r=this.messages,o=[],s=[],l=function(e){var t;return 0===e.indexOf(\"#\")&&(t=a.file(e.substr(1)))?t.name:e};for(t=0;t<arguments.length;t++)if(i=arguments[t],\"string\"==typeof i)o.push(l(i));else if(e.isArray(i))for(n=0;n<i.length;n++)\"string\"==typeof i[n]?o.push(l(i[n])):i[n]instanceof jQuery&&o.push(i[n]);else i instanceof jQuery&&o.push(i[n]);for(t=0;t<o.length;t++)-1===e.inArray(t,s)&&(i=o[t],\"string\"==typeof i?(i=r[i]||a.escape(i),i=i.replace(/\\$(\\d+)/g,function(e,n){return n=t+parseInt(n),n>0&&o[n]&&s.push(n),a.escape(o[n])||\"\"})):i=i.get(0).outerHTML,o[t]=i);return e.map(o,function(t,n){return-1===e.inArray(n,s)?t:null}).join(\"<br>\")},mime2class:function(e){var t=\"elfinder-cwd-icon-\";return e=e.split(\"/\"),t+e[0]+(\"image\"!=e[0]&&e[1]?\" \"+t+e[1].replace(/(\\.|\\+)/g,\"-\"):\"\")},mime2kind:function(e){var t,n=\"object\"==typeof e?e.mime:e;return t=e.alias&&\"symlink-broken\"!=e.mime?\"Alias\":this.kinds[n]?this.kinds[n]:0===n.indexOf(\"text\")?\"Text\":0===n.indexOf(\"image\")?\"Image\":0===n.indexOf(\"audio\")?\"Audio\":0===n.indexOf(\"video\")?\"Video\":0===n.indexOf(\"application\")?\"App\":n,this.messages[\"kind\"+t]?this.i18n(\"kind\"+t):n},formatDate:function(e,t){var n,i,a,r,o,s,l,d,c,u,p,h=this,t=t||e.ts,f=h.i18;return h.options.clientFormatDate&&t>0?(n=new Date(1e3*t),d=n[h.getHours](),c=d>12?d-12:d,u=n[h.getMinutes](),p=n[h.getSeconds](),r=n[h.getDate](),o=n[h.getDay](),s=n[h.getMonth]()+1,l=n[h.getFullYear](),i=t>=this.yesterday?this.fancyFormat:this.dateFormat,a=i.replace(/[a-z]/gi,function(e){switch(e){case\"d\":return r>9?r:\"0\"+r;case\"j\":return r;case\"D\":return h.i18n(f.daysShort[o]);case\"l\":return h.i18n(f.days[o]);case\"m\":return s>9?s:\"0\"+s;case\"n\":return s;case\"M\":return h.i18n(f.monthsShort[s-1]);case\"F\":return h.i18n(f.months[s-1]);case\"Y\":return l;case\"y\":return(\"\"+l).substr(2);case\"H\":return d>9?d:\"0\"+d;case\"G\":return d;case\"g\":return c;case\"h\":return c>9?c:\"0\"+c;case\"a\":return d>12?\"pm\":\"am\";case\"A\":return d>12?\"PM\":\"AM\";case\"i\":return u>9?u:\"0\"+u;case\"s\":return p>9?p:\"0\"+p}return e}),t>=this.yesterday?a.replace(\"$1\",this.i18n(t>=this.today?\"Today\":\"Yesterday\")):a):e.date?e.date.replace(/([a-z]+)\\s/i,function(e,t){return h.i18n(t)+\" \"}):h.i18n(\"dateUnknown\")},perms2class:function(e){var t=\"\";return e.read||e.write?e.read?e.write||(t=\"elfinder-ro\"):t=\"elfinder-wo\":t=\"elfinder-na\",t},formatPermissions:function(e){var t=[];return e.read&&t.push(this.i18n(\"read\")),e.write&&t.push(this.i18n(\"write\")),t.length?t.join(\" \"+this.i18n(\"and\")+\" \"):this.i18n(\"noaccess\")},formatSize:function(e){var t=1,n=\"b\";return\"unknown\"==e?this.i18n(\"unknown\"):(e>1073741824?(t=1073741824,n=\"GB\"):e>1048576?(t=1048576,n=\"MB\"):e>1024&&(t=1024,n=\"KB\"),e/=t,(e>0?t>=1048576?e.toFixed(2):Math.round(e):0)+\" \"+n)},formatFileMode:function(t,n){var i,a,r,o,s,l,d,c,u;if(n||(n=this.options.fileModeStyle.toLowerCase()),t=e.trim(t),t.match(/[rwxs-]{9}$/i)){if(c=t=t.substr(-9),\"string\"==n)return c;for(u=\"\",r=0,i=0;7>i;i+=3)a=t.substr(i,3),o=0,a.match(/[r]/i)&&(o+=4),a.match(/[w]/i)&&(o+=2),a.match(/[xs]/i)&&(a.match(/[xs]/)&&(o+=1),a.match(/[s]/i)&&(0==i?r+=4:3==i&&(r+=2))),u+=o.toString(8);r&&(u=r.toString(8)+u)}else{if(t=parseInt(t,8),u=t?t.toString(8):\"\",!t||\"octal\"==n)return u;for(a=t.toString(8),r=0,a.length>3&&(a=a.substr(-4),r=parseInt(a.substr(0,1),8),a=a.substr(1)),s=1==(1&r),d=2==(2&r),l=4==(4&r),c=\"\",i=0;3>i;i++)c+=4==(4&parseInt(a.substr(i,1),8))?\"r\":\"-\",c+=2==(2&parseInt(a.substr(i,1),8))?\"w\":\"-\",c+=1==(1&parseInt(a.substr(i,1),8))?0==i&&l||1==i&&d?\"s\":\"x\":\"-\"}return\"both\"==n?c+\" (\"+u+\")\":\"string\"==n?c:u},navHash2Id:function(e){return this.navPrefix+e},navId2Hash:function(e){return\"string\"==typeof e?e.substr(this.navPrefix.length):!1},cwdHash2Id:function(e){return this.cwdPrefix+e},cwdId2Hash:function(e){return\"string\"==typeof e?e.substr(this.cwdPrefix.length):!1},log:function(e){return window.console&&window.console.log&&window.console.log(e),this},debug:function(t,n){var i=this.options.debug;return(\"all\"==i||i===!0||e.isArray(i)&&-1!=e.inArray(t,i))&&window.console&&window.console.log&&window.console.log(\"elfinder debug: [\"+t+\"] [\"+this.id+\"]\",n),this},time:function(e){window.console&&window.console.time&&window.console.time(e)},timeEnd:function(e){window.console&&window.console.timeEnd&&window.console.timeEnd(e)}},Object.keys||(Object.keys=function(){var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable(\"toString\"),n=[\"toString\",\"toLocaleString\",\"valueOf\",\"hasOwnProperty\",\"isPrototypeOf\",\"propertyIsEnumerable\",\"constructor\"],i=n.length;return function(a){if(\"object\"!=typeof a&&\"function\"!=typeof a||null===a)throw new TypeError(\"Object.keys called on non-object\");var r=[];for(var o in a)e.call(a,o)&&r.push(o);if(t)for(var s=0;i>s;s++)e.call(a,n[s])&&r.push(n[s]);return r}}()),elFinder.prototype.version=\"2.1.7 (2.1-src Nightly: 0ac3247)\",function(){if(e.ui&&e.ui.ddmanager){var t=e.ui.ddmanager.prepareOffsets;e.ui.ddmanager.prepareOffsets=function(n,i){var a=function(e){if(e.is(\":hidden\"))return!0;var t=e[0].getBoundingClientRect();return document.elementFromPoint(t.left,t.top)?!1:!0};if(\"mousedown\"===i.type){var r,o,s=e.ui.ddmanager.droppables[n.options.scope]||[],l=s.length;for(r=0;l>r;r++)o=s[r],o.options.autoDisable&&(!o.options.disabled||o.options.autoDisable>1)&&(o.options.disabled=a(o.element),o.options.autoDisable=o.options.disabled?2:1)}return t(n,i)}}}(),e.fn.elfinder=function(e){return\"instance\"==e?this.getElFinder():this.each(function(){var t=\"string\"==typeof e?e:\"\";switch(this.elfinder||new elFinder(this,\"object\"==typeof e?e:{}),t){case\"close\":case\"hide\":this.elfinder.hide();break;case\"open\":case\"show\":this.elfinder.show();break;case\"destroy\":this.elfinder.destroy()}})},e.fn.getElFinder=function(){var e;return this.each(function(){return this.elfinder?(e=this.elfinder,!1):void 0}),e},elFinder.prototype._options={url:\"\",requestType:\"get\",transport:{},urlUpload:\"\",dragUploadAllow:\"auto\",uploadMaxChunkSize:10485760,iframeTimeout:0,customData:{},handlers:{},customHeaders:{},xhrFields:{},lang:\"en\",cssClass:\"\",commands:[\"open\",\"opendir\",\"reload\",\"home\",\"up\",\"back\",\"forward\",\"getfile\",\"quicklook\",\"download\",\"rm\",\"duplicate\",\"rename\",\"mkdir\",\"mkfile\",\"upload\",\"copy\",\"cut\",\"paste\",\"edit\",\"extract\",\"archive\",\"search\",\"info\",\"view\",\"help\",\"resize\",\"sort\",\"netmount\",\"netunmount\",\"places\",\"chmod\"],commandsOptions:{getfile:{onlyURL:!1,multiple:!1,folders:!1,oncomplete:\"\"},upload:{ui:\"uploadbutton\"},download:{maxRequests:10},quicklook:{autoplay:!0,jplayer:\"extensions/jplayer\"},edit:{mimes:[],editors:[]},info:{nullUrlDirLinkSelf:!0,custom:{}},netmount:{ftp:{inputs:{host:e('<input type=\"text\"/>'),port:e('<input type=\"text\" placeholder=\"21\"/>'),path:e('<input type=\"text\" value=\"/\"/>'),user:e('<input type=\"text\"/>'),pass:e('<input type=\"password\"/>'),encoding:e('<input type=\"text\" placeholder=\"Optional\"/>'),locale:e('<input type=\"text\" placeholder=\"Optional\"/>')}},dropbox:{inputs:{host:e('<span><span class=\"elfinder-info-spinner\"/></span></span><input type=\"hidden\"/>'),path:e('<input type=\"text\" value=\"/\"/>'),user:e('<input type=\"hidden\"/>'),pass:e('<input type=\"hidden\"/>')},select:function(e){var t=this;t.inputs.host.find(\"span\").length&&e.request({data:{cmd:\"netmount\",protocol:\"dropbox\",host:\"dropbox.com\",user:\"init\",pass:\"init\",options:{url:e.uploadURL,id:e.id}},preventDefault:!0}).done(function(n){t.inputs.host.find(\"span\").removeClass(\"elfinder-info-spinner\"),t.inputs.host.find(\"span\").html(n.body.replace(/\\{msg:([^}]+)\\}/g,function(t,n){return e.i18n(n,\"Dropbox.com\")}))}).fail(function(){})},done:function(t,n){var i=this;\"makebtn\"==n.mode?(i.inputs.host.find(\"span\").removeClass(\"elfinder-info-spinner\"),i.inputs.host.find(\"input\").hover(function(){e(this).toggleClass(\"ui-state-hover\")}),i.inputs.host[1].value=\"\"):(i.inputs.host.find(\"span\").removeClass(\"elfinder-info-spinner\"),i.inputs.host.find(\"span\").html(\"Dropbox.com\"),i.inputs.host[1].value=\"dropbox\",i.inputs.user.val(\"done\"),i.inputs.pass.val(\"done\"))}}},help:{view:[\"about\",\"shortcuts\",\"help\"]}},getFileCallback:null,defaultView:\"icons\",startPathHash:\"\",ui:[\"toolbar\",\"tree\",\"path\",\"stat\"],uiOptions:{toolbar:[[\"back\",\"forward\"],[\"netmount\"],[\"mkdir\",\"mkfile\",\"upload\"],[\"open\",\"download\",\"getfile\"],[\"info\",\"chmod\"],[\"quicklook\"],[\"copy\",\"cut\",\"paste\"],[\"rm\"],[\"duplicate\",\"rename\",\"edit\",\"resize\"],[\"extract\",\"archive\"],[\"search\"],[\"view\",\"sort\"],[\"help\"]],tree:{openRootOnLoad:!0,openCwdOnOpen:!0,syncTree:!0},navbar:{minWidth:150,maxWidth:500},cwd:{oldSchool:!1,listView:{columns:[\"perm\",\"date\",\"size\",\"kind\"],columnsCustomName:{}}}},onlyMimes:[],sortRules:{},sortType:\"name\",sortOrder:\"asc\",sortStickFolders:!0,clientFormatDate:!0,UTCDate:!1,dateFormat:\"\",fancyDateFormat:\"\",fileModeStyle:\"both\",width:\"auto\",height:400,resizable:!0,notifyDelay:500,notifyDialog:{position:{top:\"12px\",right:\"12px\"},width:280},allowShortcuts:!0,rememberLastDir:!0,reloadClearHistory:!1,useBrowserHistory:!0,showFiles:30,showThreshold:50,validName:!1,backupSuffix:\"~\",sync:0,syncStart:!0,loadTmbs:5,cookie:{expires:30,domain:\"\",path:\"/\",secure:!1},contextmenu:{navbar:[\"open\",\"download\",\"|\",\"upload\",\"|\",\"copy\",\"cut\",\"paste\",\"duplicate\",\"|\",\"rm\",\"|\",\"rename\",\"|\",\"places\",\"info\",\"chmod\",\"netunmount\"],cwd:[\"reload\",\"back\",\"|\",\"upload\",\"mkdir\",\"mkfile\",\"paste\",\"|\",\"sort\",\"|\",\"info\"],files:[\"getfile\",\"|\",\"open\",\"download\",\"opendir\",\"quicklook\",\"|\",\"upload\",\"mkdir\",\"|\",\"copy\",\"cut\",\"paste\",\"duplicate\",\"|\",\"rm\",\"|\",\"edit\",\"rename\",\"resize\",\"|\",\"archive\",\"extract\",\"|\",\"places\",\"info\",\"chmod\"]},debug:[\"error\",\"warning\",\"event-destroy\"]},elFinder.prototype.history=function(t){var n,i=this,a=!0,r=[],o=function(){r=[t.cwd().hash],n=0,a=!0\n+},open:function(t){return t&&t.cwd&&t.files&&e.isPlainObject(t.cwd)&&e.isArray(t.files)},tree:function(t){return t&&t.tree&&e.isArray(t.tree)},parents:function(t){return t&&t.tree&&e.isArray(t.tree)},tmb:function(t){return t&&t.images&&(e.isPlainObject(t.images)||e.isArray(t.images))},upload:function(t){return t&&(e.isPlainObject(t.added)||e.isArray(t.added))},search:function(t){return t&&t.files&&e.isArray(t.files)}},commands:{},cmdsToAdd:\"archive duplicate extract mkdir mkfile paste rm upload\",parseUploadData:function(t){var n;if(!e.trim(t))return{error:[\"errResponse\",\"errDataEmpty\"]};try{n=e.parseJSON(t)}catch(i){return{error:[\"errResponse\",\"errDataNotJSON\"]}}return this.validResponse(\"upload\",n)?(n=this.normalize(n),n.removed=e.merge(n.removed||[],e.map(n.added||[],function(e){return e.hash})),n):{error:[\"errResponse\"]}},iframeCnt:0,uploads:{xhrUploading:!1,checkExists:function(t,n,i){var a,r,o=e.Deferred(),s=function(){for(var e=t.length;--e>-1;)t[e]._remove=!0},l=function(){var l=[],d={},c=[],u=[],p=function(e){var n=e==u.length-1,a={title:i.i18n(\"cmdupload\"),text:[\"errExists\",u[e].name,\"confirmRepl\"],all:!n,accept:{label:\"btnYes\",callback:function(t){n||t?o.resolve(l,d):p(++e)}},reject:{label:\"btnNo\",callback:function(i){var a;if(i)for(a=u.length;e<a--;)t[u[a].i]._remove=!0;else t[u[e].i]._remove=!0;n||i?o.resolve(l,d):p(++e)}},cancel:{label:\"btnCancel\",callback:function(){s(),o.resolve(l,d)}},buttons:[{label:\"btnBackup\",callback:function(t){var i;if(t)for(i=u.length;e<i--;)l.push(u[i].name);else l.push(u[e].name);n||t?o.resolve(l,d):p(++e)}}]};i.iframeCnt>0&&delete a.reject,i.confirm(a)};a=e.map(t,function(e,t){return e.name?{i:t,name:e.name}:null}),r=e.map(a,function(e){return e.name}),i.request({data:{cmd:\"ls\",target:n,intersect:r},notify:{type:\"preupload\",cnt:1,hideCnt:!0},preventFail:!0}).done(function(t){t&&(t.error?s():i.option(\"uploadOverwrite\")&&t.list&&(e.isArray(t.list)?c=t.list||[]:(c=e.map(t.list,function(e){return e}),d=t.list),u=e.map(a,function(t){return-1!==e.inArray(t.name,c)?t:null}),n==i.cwd().hash&&e(e.map(i.files(),function(e){return e.phash==n?e.name:null})).filter(c).length<1&&i.sync())),u.length>0?p(0):o.resolve([])}).fail(function(e){s(),o.resolve([]),e&&i.error(e)})};return i.api>=2.1&&\"object\"==typeof t[0]?(l(),o):o.resolve([])},checkFile:function(t,n,i){if(t.checked||\"files\"==t.type)return t.files;if(\"data\"==t.type){var a,r=e.Deferred(),o=[],s=[],l=[],d=[],c=0,u=function(t){var i=function(e){return Array.prototype.slice.call(e||[])},a=function(t){var n=e.Deferred();return\"undefined\"==typeof t?n.reject(\"empty\"):t.isFile?t.file(function(e){n.resolve(e)},function(){n.reject()}):n.reject(\"dirctory\"),n.promise()};t.readEntries(function(e){if(e.length)d=d.concat(i(e)),u(t);else{var r=d.length-1,p=function(e){a(d[e]).done(function(t){\"win\"==n.OS&&t.name.match(/^(?:desktop\\.ini|thumbs\\.db)$/i)||\"mac\"==n.OS&&t.name.match(/^\\.ds_store$/i)||(s.push(d[e].fullPath),o.push(t))}).fail(function(t){\"dirctory\"==t&&l.push(d[e])}).always(function(){c--,r>e&&(c++,p(++e))})};c++,p(0),c--}})},p=function(e,t){var i,a;d=[];for(var r=e.length,p=0;r>p;p++)a=t?e[p]:e[p].getAsEntry?e[p].getAsEntry():e[p].webkitGetAsEntry(),a&&(a.isFile?(c++,a.file(function(e){s.push(\"\"),o.push(e),c--})):a.isDirectory&&n.api>=2.1&&(c>0?l.push(a):(c=0,i=a.createReader(),c++,u(i))))};return a=e.map(t.files.items,function(e){return e.getAsEntry?e.getAsEntry():e.webkitGetAsEntry()}),a.length>0?(n.uploads.checkExists(a,i,n).done(function(t,d){var u,h=[];n.option(\"uploadOverwrite\")&&(a=e.map(a,function(a){var r,o,s,l;return a.isDirectory&&(r=e.inArray(a.name,t),-1!==r&&(t.splice(r,1),o=n.uniqueName(a.name+n.options.backupSuffix,null,\"\"),e.each(d,function(e,t){return a.name==t?(s=e,!1):void 0}),s||(s=n.fileByName(a.name,i).hash),n.lockfiles({files:[s]}),l=n.request({data:{cmd:\"rename\",target:s,name:o},notify:{type:\"rename\",cnt:1}}).fail(function(){a._remove=!0,n.sync()}).always(function(){n.unlockfiles({files:[s]})}),h.push(l))),a._remove?null:a})),e.when.apply(e,h).done(function(){a.length>0?(u=setTimeout(function(){n.notify({type:\"readdir\",cnt:1,hideCnt:!0})},n.options.notifyDelay),p(a,!0),setTimeout(function e(){c>0?setTimeout(e,10):l.length>0?(p([l.shift()],!0),setTimeout(e,10)):(u&&clearTimeout(u),n.notify({type:\"readdir\",cnt:-1}),r.resolve([o,s,t,d]))},10)):r.reject()})}),r.promise()):r.reject()}var h=[],f=[],m=t.files[0];if(\"html\"==t.type){var g,v=e(\"<html/>\").append(e.parseHTML(m));e(\"img[src]\",v).each(function(){var t,n,i=e(this),a=i.closest(\"a\");a&&a.attr(\"href\")&&a.attr(\"href\").match(/\\.(?:jpe?g|gif|bmp|png)/i)&&(n=a.attr(\"href\")),t=i.attr(\"src\"),t&&(n?(-1==e.inArray(n,h)&&h.push(n),-1==e.inArray(t,f)&&f.push(t)):-1==e.inArray(t,h)&&h.push(t))}),g=e(\"a[href]\",v),g.each(function(){var t,n=function(e){var t=document.createElement(\"a\");return t.href=e,t};e(this).text()&&(t=n(e(this).attr(\"href\")),!t.href||1!==g.length&&t.pathname.match(/(?:\\.html?|\\/[^\\/.]*)$/i)||-1==e.inArray(t.href,h)&&-1==e.inArray(t.href,f)&&h.push(t.href))})}else{var b,y,w;for(b=/(http[^<>\"{}|\\\\^\\[\\]`\\s]+)/gi;y=b.exec(m);)w=y[1].replace(/&amp;/g,\"&\"),-1==e.inArray(w,h)&&h.push(w)}return h},xhr:function(t,n){var i,a=n?n:this,r=a.getUI(),o=new XMLHttpRequest,s=null,l=null,d=t.checked,c=t.isDataType||\"data\"==t.type,u=0,p=e.Deferred().fail(function(e){if(a.uploads.xhrUploading){setTimeout(function(){a.sync()},5e3),a.uploads.xhrUploading=!1;var t=m.length?c?m[0][0]:m[0]:{};t._cid&&(h=new FormData,m=[{_chunkfail:!0}],h.append(\"chunk\",t._chunk),h.append(\"cid\",t._cid),c=!1,S(m))}m=null,e&&a.error(e)}).done(function(e){o=null,m=null,e&&(e.warning&&a.error(e.warning),e.removed&&a.remove(e),e.added&&a.add(e),e.changed&&a.change(e),a.trigger(\"upload\",e),e.sync&&a.sync())}).always(function(){r.off(\"uploadabort\",k),e(window).off(\"unload\",k),s&&clearTimeout(s),l&&clearTimeout(l),d&&!t.multiupload&&x()&&a.notify({type:\"upload\",cnt:-g,progress:0,size:0}),F&&a.ui.notify.children(\".elfinder-notify-chunkmerge\").length&&a.notify({type:\"chunkmerge\",cnt:-1})}),h=new FormData,f=t.target||a.cwd().hash,m=t.input?t.input.files:a.uploads.checkFile(t,a,f),g=t.checked?c?m[0].length:m.length:m.length,v=0,b=0,y=!1,w=!1,x=function(){return y=y||a.ui.notify.children(\".elfinder-notify-upload\").length},k=function(){w=!0,o&&(o.quiet=!0,o.abort())},C=function(e){return e||(e=b),setTimeout(function(){y=!0,a.notify({type:\"upload\",cnt:g,progress:v-i,size:e,cancel:function(){r.trigger(\"uploadabort\")}}),i=v},a.options.notifyDelay)},T=t.renames||null,I=t.hashes||null,F=!1;if(r.one(\"uploadabort\",k),e(window).one(\"unload\",k),!F&&(i=v),!c&&!g)return p.reject([\"errUploadNoFiles\"]);o.addEventListener(\"error\",function(){p.reject(\"errConnect\")},!1),o.addEventListener(\"abort\",function(){p.reject([\"errConnect\",\"errAbort\"])},!1),o.addEventListener(\"load\",function(){var e,n=o.status,r=0,d=\"\";if(n>=400?d=n>500?\"errResponse\":\"errConnect\":(4!=o.readyState&&(d=[\"errConnect\",\"errTimeout\"]),o.responseText||(d=[\"errResponse\",\"errDataEmpty\"])),d){if(F||u++>3){var f=c?m[0][0]:m[0];return p.reject(f._cid?null:d)}return b=0,o.open(\"POST\",a.uploadURL,!0),o.send(h),void 0}if(v=b,x()&&(r=v-i)&&a.notify({type:\"upload\",cnt:0,progress:r,size:0}),e=a.parseUploadData(o.responseText),e._chunkmerged){h=new FormData;var y=[{_chunkmerged:e._chunkmerged,_name:e._name}];return F=!0,l=setTimeout(function(){a.notify({type:\"chunkmerge\",cnt:1})},a.options.notifyDelay),c?S(y,m[1]):S(y),void 0}e._multiupload=t.multiupload?!0:!1,e.error?e._chunkfailure?(w=!0,a.uploads.xhrUploading=!1,s&&clearTimeout(s),a.ui.notify.children(\".elfinder-notify-upload\").length?(a.notify({type:\"upload\",cnt:-g,progress:0,size:0}),p.reject(e.error)):p.reject()):p.reject(e.error):p.resolve(e)},!1),o.upload.addEventListener(\"loadstart\",function(e){!F&&e.lengthComputable&&(v=e.loaded,u&&(v=0),b=e.total,v||(v=parseInt(.05*b)),x()&&(a.notify({type:\"upload\",cnt:0,progress:v-i,size:t.multiupload?0:b}),i=v))},!1),o.upload.addEventListener(\"progress\",function(e){var n;e.lengthComputable&&!F&&(v=e.loaded,!t.checked&&v>0&&!s&&(s=C(o._totalSize-v)),b||(u&&(v=0),b=e.total,v||(v=parseInt(.05*b))),n=v-i,x()&&n/e.total>=.05&&(a.notify({type:\"upload\",cnt:0,progress:n,size:0}),i=v))},!1);var S=function(i,r){var l,u,m,v,b,y,k,F,S,M,P,A,O=0,D=1,U=[],z=0,E=g,j=0,_=[],R=+new Date,H=Math.min((n.uplMaxSize?n.uplMaxSize:2097152)-8190,n.options.uploadMaxChunkSize),N=!1,q=function(i,r){var o,l=[];if(!w){for(;i.length&&l.length<r;)l.push(i.shift());if(l.length)for(var d=0;d<l.length&&!w;d++)o=c?l[d][0][0]._cid||null:l[d][0]._cid||null,A[o]?P--:n.exec(\"upload\",{type:t.type,isDataType:c,files:l[d],checked:!0,target:f,renames:T,hashes:I,multiupload:!0}).fail(function(){o&&(A[o]=!0)}).always(function(t){t&&t.added&&(S=e.merge(S,t.added)),P<=++M&&(n.trigger(\"multiupload\",{added:S}),s&&clearTimeout(s),x()&&a.notify({type:\"upload\",cnt:-g,progress:0,size:0})),q(i,1)})}(l.length<1||w)&&(w?(s&&clearTimeout(s),o&&(A[o]=!0),p.reject()):(p.resolve(),a.uploads.xhrUploading=!1))},L=function(){a.uploads.xhrUploading?setTimeout(function(){L()},100):(a.uploads.xhrUploading=!0,q(U,3))};if(!d&&(c||\"files\"==t.type)){for(l=n.option(\"uploadMaxSize\")?n.option(\"uploadMaxSize\"):0,m=0;m<i.length;m++)if(k=i[m],u=k.size,N===!1&&(N=\"\",a.api>=2.1&&(\"slice\"in k?N=\"slice\":\"mozSlice\"in k?N=\"mozSlice\":\"webkitSlice\"in k&&(N=\"webkitSlice\"))),l&&u>l||!N&&n.uplMaxSize&&u>n.uplMaxSize)a.error(a.i18n(\"errUploadFile\",k.name)+\" \"+a.i18n(\"errUploadFileSize\")),g--,E--;else if(N&&u>H){for(v=0,b=H,y=-1,E=Math.floor(u/H),j+=u,_[R]=0;u>=v;)F=k[N](v,b),F._chunk=k.name+\".\"+ ++y+\"_\"+E+\".part\",F._cid=R,F._range=v+\",\"+F.size+\",\"+u,_[R]++,O&&z++,\"undefined\"==typeof U[z]&&(U[z]=[],c&&(U[z][0]=[],U[z][1]=[])),O=H,D=1,c?(U[z][0].push(F),U[z][1].push(r[m])):U[z].push(F),v=b,b=v+H;null==F?(a.error(a.i18n(\"errUploadFile\",k.name)+\" \"+a.i18n(\"errUploadFileSize\")),g--,E--):E+=y}else(n.uplMaxSize&&O+u>=n.uplMaxSize||D>n.uplMaxFile)&&(O=0,D=1,z++),\"undefined\"==typeof U[z]&&(U[z]=[],c&&(U[z][0]=[],U[z][1]=[])),c?(U[z][0].push(k),U[z][1].push(r[m])):U[z].push(k),O+=u,j+=u,D++;if(0==U.length)return t.checked=!0,!1;if(U.length>1)return s=C(j),S=[],M=0,P=U.length,A=[],L(),!0;c?(i=U[0][0],r=U[0][1]):i=U[0]}return d||(n.UA.Safari&&t.files?o._totalSize=j:s=C(j)),d=!0,i.length||p.reject([\"errUploadNoFiles\"]),o.open(\"POST\",a.uploadURL,!0),n.customHeaders&&e.each(n.customHeaders,function(e){o.setRequestHeader(e,this)}),n.xhrFields&&e.each(n.xhrFields,function(e){e in o&&(o[e]=this)}),h.append(\"cmd\",\"upload\"),h.append(a.newAPI?\"target\":\"current\",f),T&&T.length&&(e.each(T,function(e,t){h.append(\"renames[]\",t)}),h.append(\"suffix\",n.options.backupSuffix)),I&&e.each(I,function(e,t){h.append(\"hashes[\"+e+\"]\",t)}),e.each(a.options.customData,function(e,t){h.append(e,t)}),e.each(a.options.onlyMimes,function(e,t){h.append(\"mimes[\"+e+\"]\",t)}),e.each(i,function(e,t){t._chunkmerged?(h.append(\"chunk\",t._chunkmerged),h.append(\"upload[]\",t._name)):(t._chunkfail?(h.append(\"upload[]\",\"chunkfail\"),h.append(\"mimes\",\"chunkfail\")):h.append(\"upload[]\",t),t._chunk&&(h.append(\"chunk\",t._chunk),h.append(\"cid\",t._cid),h.append(\"range\",t._range)))}),c&&e.each(r,function(e,t){h.append(\"upload_path[]\",t)}),o.onreadystatechange=function(){if(4==o.readyState&&0==o.status)if(w)p.reject();else{var n=[\"errAbort\"];!c&&t.files&&e.map(t.files,function(e){return 0===e.size?e:null}).length&&n.push(\"errFolderUpload\"),p.reject(n)}},o.send(h),!0};return c?d?S(m[0],m[1]):m.done(function(e){T=[],I={},g=e[0].length,g?(T=e[2],I=e[3],S(e[0],e[1])):p.reject([\"errUploadNoFiles\"])}).fail(function(){p.reject()}):m.length>0?null==T?(T=[],I={},a.uploads.checkExists(m,f,n).done(function(t,i){n.option(\"uploadOverwrite\")&&(T=t,I=i,m=e.map(m,function(e){return e._remove?null:e})),g=m.length,g>0?S(m)||p.reject():p.reject()})):S(m)||p.reject():p.reject(),p},iframe:function(t,n){var i,a,r,o,s=n?n:this,l=t.input?t.input:!1,d=l?!1:s.uploads.checkFile(t,s),c=e.Deferred().fail(function(e){e&&s.error(e)}).done(function(e){e.warning&&s.error(e.warning),e.removed&&s.remove(e),e.added&&s.add(e),e.changed&&s.change(e),s.trigger(\"upload\",e),e.sync&&s.sync()}),u=\"iframe-\"+s.namespace+ ++s.iframeCnt,p=e('<form action=\"'+s.uploadURL+'\" method=\"post\" enctype=\"multipart/form-data\" encoding=\"multipart/form-data\" target=\"'+u+'\" style=\"display:none\"><input type=\"hidden\" name=\"cmd\" value=\"upload\" /></form>'),h=this.UA.IE,f=function(){o&&clearTimeout(o),r&&clearTimeout(r),a&&s.notify({type:\"upload\",cnt:-i}),setTimeout(function(){h&&e('<iframe src=\"javascript:false;\"/>').appendTo(p),p.remove(),m.remove()},100)},m=e('<iframe src=\"'+(h?\"javascript:false;\":\"about:blank\")+'\" name=\"'+u+'\" style=\"position:absolute;left:-1000px;top:-1000px\" />').on(\"load\",function(){m.off(\"load\").on(\"load\",function(){f(),c.reject()}),r=setTimeout(function(){a=!0,s.notify({type:\"upload\",cnt:i})},s.options.notifyDelay),s.options.iframeTimeout>0&&(o=setTimeout(function(){f(),c.reject([errors.connect,errors.timeout])},s.options.iframeTimeout)),p.submit()}),g=t.target||s.cwd().hash,v=[],b=[],y=[],w={};if(d&&d.length)e.each(d,function(e,t){p.append('<input type=\"hidden\" name=\"upload[]\" value=\"'+t+'\"/>')}),i=1;else{if(!(l&&e(l).is(\":file\")&&e(l).val()))return c.reject();n.option(\"uploadOverwrite\")&&(v=l.files?l.files:[{name:e(l).val().replace(/^(?:.+[\\\\\\/])?([^\\\\\\/]+)$/,\"$1\")}],b.push(s.uploads.checkExists(v,g,s).done(function(t,n){y=t,w=n,i=e.map(v,function(e){return e._remove?null:e}).length,i!=v.length&&(i=0)}))),i=l.files?l.files.length:1,p.append(l)}return e.when.apply(e,b).done(function(){return 1>i?c.reject():(p.append('<input type=\"hidden\" name=\"'+(s.newAPI?\"target\":\"current\")+'\" value=\"'+g+'\"/>').append('<input type=\"hidden\" name=\"html\" value=\"1\"/>').append('<input type=\"hidden\" name=\"node\" value=\"'+s.id+'\"/>').append(e(l).attr(\"name\",\"upload[]\")),y.length>0&&(e.each(y,function(e,t){p.append('<input type=\"hidden\" name=\"renames[]\" value=\"'+s.escape(t)+'\"/>')}),p.append('<input type=\"hidden\" name=\"suffix\" value=\"'+n.options.backupSuffix+'\"/>')),w&&e.each(y,function(e,t){p.append('<input type=\"hidden\" name=\"['+e+']\" value=\"'+s.escape(t)+'\"/>')}),e.each(s.options.onlyMimes||[],function(e,t){p.append('<input type=\"hidden\" name=\"mimes[]\" value=\"'+s.escape(t)+'\"/>')}),e.each(s.options.customData,function(e,t){p.append('<input type=\"hidden\" name=\"'+e+'\" value=\"'+s.escape(t)+'\"/>')}),p.appendTo(\"body\"),m.appendTo(\"body\"),void 0)}),c}},one:function(e,t){var n=this,i=function(a){return setTimeout(function(){n.unbind(e,i)},3),t.apply(n.getListeners(a.type),arguments)};return this.bind(e,i)},localStorage:function(e,t){var n,i,a=window.localStorage,r=\"elfinder-\"+e+this.id;if(e=window.location.pathname+\"-elfinder-\"+e+this.id,null===t)return a.removeItem(e);if(void 0===t&&!(n=a.getItem(e))&&(i=a.getItem(r))&&(t=i,a.removeItem(r)),void 0!==t){try{a.setItem(e,t)}catch(o){a.clear(),a.setItem(e,t)}n=a.getItem(e)}return n},cookie:function(t,n){var i,a,r,o;if(t=\"elfinder-\"+t+this.id,void 0===n){if(document.cookie&&\"\"!=document.cookie)for(r=document.cookie.split(\";\"),t+=\"=\",o=0;o<r.length;o++)if(r[o]=e.trim(r[o]),r[o].substring(0,t.length)==t)return decodeURIComponent(r[o].substring(t.length));return\"\"}return a=e.extend({},this.options.cookie),null===n&&(n=\"\",a.expires=-1),\"number\"==typeof a.expires&&(i=new Date,i.setTime(i.getTime()+864e5*a.expires),a.expires=i),document.cookie=t+\"=\"+encodeURIComponent(n)+\"; expires=\"+a.expires.toUTCString()+(a.path?\"; path=\"+a.path:\"\")+(a.domain?\"; domain=\"+a.domain:\"\")+(a.secure?\"; secure\":\"\"),n},startDir:function(){var e=window.location.hash;return e&&e.match(/^#elf_/)?e.replace(/^#elf_/,\"\"):this.options.startPathHash?this.options.startPathHash:this.lastDir()},lastDir:function(e){return this.options.rememberLastDir?this.storage(\"lastdir\",e):\"\"},_node:e(\"<span/>\"),escape:function(e){return this._node.text(e).html().replace(/\"/g,\"&quot;\").replace(/'/g,\"&#039;\")},normalize:function(t){var n=function(e){return e&&e.hash&&e.name&&e.mime?(\"application/x-empty\"==e.mime&&(e.mime=\"text/plain\"),e):null};return t.files&&(t.files=e.map(t.files,n)),t.tree&&(t.tree=e.map(t.tree,n)),t.added&&(t.added=e.map(t.added,n)),t.changed&&(t.changed=e.map(t.changed,n)),t.api&&(t.init=!0),t},setSort:function(e,t,n){this.storage(\"sortType\",this.sortType=this.sortRules[e]?e:\"name\"),this.storage(\"sortOrder\",this.sortOrder=/asc|desc/.test(t)?t:\"asc\"),this.storage(\"sortStickFolders\",(this.sortStickFolders=!!n)?1:\"\"),this.trigger(\"sortchange\")},_sortRules:{name:function(e,t){var n,i,a=e.name.toLowerCase(),r=t.name.toLowerCase(),o=\"\",s=\"\",l=elFinder.prototype.naturalCompare;return(n=a.match(/^(.+)(\\.[0-9a-z.]+)$/))&&(a=n[1],o=n[2]),(n=r.match(/^(.+)(\\.[0-9a-z.]+)$/))&&(r=n[1],s=n[2]),i=l(a,r),0==i&&(o||s)&&o!=s&&(i=l(o,s)),i},size:function(e,t){var n=parseInt(e.size)||0,i=parseInt(t.size)||0;return n==i?0:n>i?1:-1},kind:function(e,t){return elFinder.prototype.naturalCompare(e.mime,t.mime)},date:function(e,t){var n=e.ts||e.date,i=t.ts||t.date;return n==i?0:n>i?1:-1}},naturalCompare:function(e,t){var n=elFinder.prototype.naturalCompare;return\"undefined\"==typeof n.loc&&(n.loc=navigator.userLanguage||navigator.browserLanguage||navigator.language||\"en-US\"),\"undefined\"==typeof n.sort&&(\"11\".localeCompare(\"2\",n.loc,{numeric:!0})>0?n.sort=window.Intl&&window.Intl.Collator?new Intl.Collator(n.loc,{numeric:!0}).compare:function(e,t){return e.localeCompare(t,n.loc,{numeric:!0})}:(n.sort=function(e,t){var i,a,r=/(^-?[0-9]+(\\.?[0-9]*)[df]?e?[0-9]?$|^0x[0-9a-f]+$|[0-9]+)/gi,o=/(^[ ]*|[ ]*$)/g,s=/(^([\\w ]+,?[\\w ]+)?[\\w ]+,?[\\w ]+\\d+:\\d+(:\\d+)?[\\w ]?|^\\d{1,4}[\\/\\-]\\d{1,4}[\\/\\-]\\d{1,4}|^\\w+, \\w+ \\d+, \\d{4})/,l=/^0x[0-9a-f]+$/i,d=/^0/,c=/^[\\x01\\x21-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\x7e]/,u=function(e){return n.sort.insensitive&&(\"\"+e).toLowerCase()||\"\"+e},p=u(e).replace(o,\"\").replace(/^_/,\"\u0001\")||\"\",h=u(t).replace(o,\"\").replace(/^_/,\"\u0001\")||\"\",f=p.replace(r,\"\\0$1\\0\").replace(/\\0$/,\"\").replace(/^\\0/,\"\").split(\"\\0\"),m=h.replace(r,\"\\0$1\\0\").replace(/\\0$/,\"\").replace(/^\\0/,\"\").split(\"\\0\"),g=parseInt(p.match(l))||1!=f.length&&p.match(s)&&Date.parse(p),v=parseInt(h.match(l))||g&&h.match(s)&&Date.parse(h)||null,b=0;if(v){if(v>g)return-1;if(g>v)return 1}for(var y=0,w=Math.max(f.length,m.length);w>y;y++){if(i=!(f[y]||\"\").match(d)&&parseFloat(f[y])||f[y]||0,a=!(m[y]||\"\").match(d)&&parseFloat(m[y])||m[y]||0,isNaN(i)!==isNaN(a)){if(isNaN(i)&&(\"string\"!=typeof i||!i.match(c)))return 1;if(\"string\"!=typeof a||!a.match(c))return-1}if(0===parseInt(i,10)&&(i=0),0===parseInt(a,10)&&(a=0),typeof i!=typeof a&&(i+=\"\",a+=\"\"),n.sort.insensitive&&\"string\"==typeof i&&\"string\"==typeof a&&(b=i.localeCompare(a,n.loc),0!==b))return b;if(a>i)return-1;if(i>a)return 1}return 0},n.sort.insensitive=!0)),n.sort(e,t)},compare:function(e,t){var n,i=this,a=i.sortType,r=\"asc\"==i.sortOrder,o=i.sortStickFolders,s=i.sortRules,l=s[a],d=\"directory\"==e.mime,c=\"directory\"==t.mime;if(o){if(d&&!c)return-1;if(!d&&c)return 1}return n=r?l(e,t):l(t,e),\"name\"!=a&&0==n?n=r?s.name(e,t):s.name(t,e):n},sortFiles:function(e){return e.sort(this.compare)},notify:function(t){var n,i,a,r=t.type,o=this.messages[\"ntf\"+r]?this.i18n(\"ntf\"+r):this.i18n(\"ntfsmth\"),s=this.ui.notify,l=s.children(\".elfinder-notify-\"+r),d=l.children(\"div.elfinder-notify-cancel\").children(\"button\"),c='<div class=\"elfinder-notify elfinder-notify-{type}\"><span class=\"elfinder-dialog-icon elfinder-dialog-icon-{type}\"/><span class=\"elfinder-notify-msg\">{msg}</span> <span class=\"elfinder-notify-cnt\"/><div class=\"elfinder-notify-progressbar\"><div class=\"elfinder-notify-progress\"/></div><div class=\"elfinder-notify-cancel\"/></div>',u=t.cnt,p=\"undefined\"!=typeof t.size?parseInt(t.size):null,h=\"undefined\"!=typeof t.progress&&t.progress>=0?t.progress:null,f=t.cancel,m=\"ui-state-hover\",g=function(){l._esc&&e(document).off(\"keydown\",l._esc),l.remove(),!s.children().length&&s.elfinderdialog(\"close\")};return r?(l.length||(l=e(c.replace(/\\{type\\}/g,r).replace(/\\{msg\\}/g,o)).appendTo(s).data(\"cnt\",0),null!=h&&l.data({progress:0,total:0}),f&&(d=e('<button type=\"button\" class=\"ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only\"><span class=\"ui-button-text\">'+this.i18n(\"btnCancel\")+\"</span></button>\").hover(function(t){e(this).toggleClass(m,\"mouseenter\"==t.type)}),l.children(\"div.elfinder-notify-cancel\").append(d))),n=u+parseInt(l.data(\"cnt\")),n>0?(f&&d.length&&(e.isFunction(f)||\"object\"==typeof f&&f.promise)&&(l._esc=function(t){(\"keydown\"!=t.type||t.keyCode==e.ui.keyCode.ESCAPE)&&(t.preventDefault(),t.stopPropagation(),g(),f.promise?(f.xhr&&(f.xhr.quiet=!0,f.xhr.abort()),f.reject()):f(t))},d.on(\"click\",function(e){l._esc(e)}),e(document).on(\"keydown\",l._esc)),!t.hideCnt&&l.children(\".elfinder-notify-cnt\").text(\"(\"+n+\")\"),s.is(\":hidden\")&&s.elfinderdialog(\"open\"),l.data(\"cnt\",n),null!=h&&(i=l.data(\"total\"))>=0&&(a=l.data(\"progress\"))>=0&&(i+=null!=p?p:u,a+=h,null==p&&0>u&&(a+=100*u),l.data({progress:a,total:i}),null!=p&&(a*=100,i=Math.max(1,i)),h=parseInt(a/i),l.find(\".elfinder-notify-progress\").animate({width:(100>h?h:100)+\"%\"},20))):g(),this):this},confirm:function(t){var n,i=this,a=!1,r={cssClass:\"elfinder-dialog-confirm\",modal:!0,resizable:!1,title:this.i18n(t.title||\"confirmReq\"),buttons:{},close:function(){!a&&t.cancel.callback(),e(this).elfinderdialog(\"destroy\")}},o=this.i18n(\"apllyAll\");return r.buttons[this.i18n(t.accept.label)]=function(){t.accept.callback(!(!n||!n.prop(\"checked\"))),a=!0,e(this).elfinderdialog(\"close\")},t.reject&&(r.buttons[this.i18n(t.reject.label)]=function(){t.reject.callback(!(!n||!n.prop(\"checked\"))),a=!0,e(this).elfinderdialog(\"close\")}),t.buttons&&t.buttons.length>0&&e.each(t.buttons,function(t,o){r.buttons[i.i18n(o.label)]=function(){o.callback(!(!n||!n.prop(\"checked\"))),a=!0,e(this).elfinderdialog(\"close\")}}),r.buttons[this.i18n(t.cancel.label)]=function(){e(this).elfinderdialog(\"close\")},t.all&&(r.create=function(){var t=e('<div class=\"elfinder-dialog-confirm-applyall\"/>');n=e('<input type=\"checkbox\" />'),e(this).next().find(\".ui-dialog-buttonset\").prepend(t.append(e(\"<label>\"+o+\"</label>\").prepend(n)))}),this.dialog('<span class=\"elfinder-dialog-icon elfinder-dialog-icon-confirm\"/>'+this.i18n(t.text),r)},uniqueName:function(e,t,n){var i,a,r=0,o=\"\";if(e=this.i18n(e),t=t||this.cwd().hash,n=\"undefined\"==typeof n?\" \":n,(i=e.match(/^(.+)(\\.[^.]+)$/))&&(o=i[2],e=i[1]),a=e+o,!this.fileByName(a,t))return a;for(;1e4>r;)if(a=e+n+ ++r+o,!this.fileByName(a,t))return a;return e+Math.random()+o},i18n:function(){var t,n,i,a=this,r=this.messages,o=[],s=[],l=function(e){var t;return 0===e.indexOf(\"#\")&&(t=a.file(e.substr(1)))?t.name:e};for(t=0;t<arguments.length;t++)if(i=arguments[t],\"string\"==typeof i)o.push(l(i));else if(e.isArray(i))for(n=0;n<i.length;n++)\"string\"==typeof i[n]?o.push(l(i[n])):i[n]instanceof jQuery&&o.push(i[n]);else i instanceof jQuery&&o.push(i[n]);for(t=0;t<o.length;t++)-1===e.inArray(t,s)&&(i=o[t],\"string\"==typeof i?(i=r[i]||a.escape(i),i=i.replace(/\\$(\\d+)/g,function(e,n){return n=t+parseInt(n),n>0&&o[n]&&s.push(n),a.escape(o[n])||\"\"})):i=i.get(0).outerHTML,o[t]=i);return e.map(o,function(t,n){return-1===e.inArray(n,s)?t:null}).join(\"<br>\")},mime2class:function(e){var t=\"elfinder-cwd-icon-\";return e=e.split(\"/\"),t+e[0]+(\"image\"!=e[0]&&e[1]?\" \"+t+e[1].replace(/(\\.|\\+)/g,\"-\"):\"\")},mime2kind:function(e){var t,n=\"object\"==typeof e?e.mime:e;return t=e.alias&&\"symlink-broken\"!=e.mime?\"Alias\":this.kinds[n]?this.kinds[n]:0===n.indexOf(\"text\")?\"Text\":0===n.indexOf(\"image\")?\"Image\":0===n.indexOf(\"audio\")?\"Audio\":0===n.indexOf(\"video\")?\"Video\":0===n.indexOf(\"application\")?\"App\":n,this.messages[\"kind\"+t]?this.i18n(\"kind\"+t):n},formatDate:function(e,t){var n,i,a,r,o,s,l,d,c,u,p,h=this,t=t||e.ts,f=h.i18;return h.options.clientFormatDate&&t>0?(n=new Date(1e3*t),d=n[h.getHours](),c=d>12?d-12:d,u=n[h.getMinutes](),p=n[h.getSeconds](),r=n[h.getDate](),o=n[h.getDay](),s=n[h.getMonth]()+1,l=n[h.getFullYear](),i=t>=this.yesterday?this.fancyFormat:this.dateFormat,a=i.replace(/[a-z]/gi,function(e){switch(e){case\"d\":return r>9?r:\"0\"+r;case\"j\":return r;case\"D\":return h.i18n(f.daysShort[o]);case\"l\":return h.i18n(f.days[o]);case\"m\":return s>9?s:\"0\"+s;case\"n\":return s;case\"M\":return h.i18n(f.monthsShort[s-1]);case\"F\":return h.i18n(f.months[s-1]);case\"Y\":return l;case\"y\":return(\"\"+l).substr(2);case\"H\":return d>9?d:\"0\"+d;case\"G\":return d;case\"g\":return c;case\"h\":return c>9?c:\"0\"+c;case\"a\":return d>12?\"pm\":\"am\";case\"A\":return d>12?\"PM\":\"AM\";case\"i\":return u>9?u:\"0\"+u;case\"s\":return p>9?p:\"0\"+p}return e}),t>=this.yesterday?a.replace(\"$1\",this.i18n(t>=this.today?\"Today\":\"Yesterday\")):a):e.date?e.date.replace(/([a-z]+)\\s/i,function(e,t){return h.i18n(t)+\" \"}):h.i18n(\"dateUnknown\")},perms2class:function(e){var t=\"\";return e.read||e.write?e.read?e.write||(t=\"elfinder-ro\"):t=\"elfinder-wo\":t=\"elfinder-na\",t},formatPermissions:function(e){var t=[];return e.read&&t.push(this.i18n(\"read\")),e.write&&t.push(this.i18n(\"write\")),t.length?t.join(\" \"+this.i18n(\"and\")+\" \"):this.i18n(\"noaccess\")},formatSize:function(e){var t=1,n=\"b\";return\"unknown\"==e?this.i18n(\"unknown\"):(e>1073741824?(t=1073741824,n=\"GB\"):e>1048576?(t=1048576,n=\"MB\"):e>1024&&(t=1024,n=\"KB\"),e/=t,(e>0?t>=1048576?e.toFixed(2):Math.round(e):0)+\" \"+n)},formatFileMode:function(t,n){var i,a,r,o,s,l,d,c,u;if(n||(n=this.options.fileModeStyle.toLowerCase()),t=e.trim(t),t.match(/[rwxs-]{9}$/i)){if(c=t=t.substr(-9),\"string\"==n)return c;for(u=\"\",r=0,i=0;7>i;i+=3)a=t.substr(i,3),o=0,a.match(/[r]/i)&&(o+=4),a.match(/[w]/i)&&(o+=2),a.match(/[xs]/i)&&(a.match(/[xs]/)&&(o+=1),a.match(/[s]/i)&&(0==i?r+=4:3==i&&(r+=2))),u+=o.toString(8);r&&(u=r.toString(8)+u)}else{if(t=parseInt(t,8),u=t?t.toString(8):\"\",!t||\"octal\"==n)return u;for(a=t.toString(8),r=0,a.length>3&&(a=a.substr(-4),r=parseInt(a.substr(0,1),8),a=a.substr(1)),s=1==(1&r),d=2==(2&r),l=4==(4&r),c=\"\",i=0;3>i;i++)c+=4==(4&parseInt(a.substr(i,1),8))?\"r\":\"-\",c+=2==(2&parseInt(a.substr(i,1),8))?\"w\":\"-\",c+=1==(1&parseInt(a.substr(i,1),8))?0==i&&l||1==i&&d?\"s\":\"x\":\"-\"}return\"both\"==n?c+\" (\"+u+\")\":\"string\"==n?c:u},navHash2Id:function(e){return this.navPrefix+e},navId2Hash:function(e){return\"string\"==typeof e?e.substr(this.navPrefix.length):!1},cwdHash2Id:function(e){return this.cwdPrefix+e},cwdId2Hash:function(e){return\"string\"==typeof e?e.substr(this.cwdPrefix.length):!1},log:function(e){return window.console&&window.console.log&&window.console.log(e),this},debug:function(t,n){var i=this.options.debug;return(\"all\"==i||i===!0||e.isArray(i)&&-1!=e.inArray(t,i))&&window.console&&window.console.log&&window.console.log(\"elfinder debug: [\"+t+\"] [\"+this.id+\"]\",n),this},time:function(e){window.console&&window.console.time&&window.console.time(e)},timeEnd:function(e){window.console&&window.console.timeEnd&&window.console.timeEnd(e)}},Object.keys||(Object.keys=function(){var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable(\"toString\"),n=[\"toString\",\"toLocaleString\",\"valueOf\",\"hasOwnProperty\",\"isPrototypeOf\",\"propertyIsEnumerable\",\"constructor\"],i=n.length;return function(a){if(\"object\"!=typeof a&&\"function\"!=typeof a||null===a)throw new TypeError(\"Object.keys called on non-object\");var r=[];for(var o in a)e.call(a,o)&&r.push(o);if(t)for(var s=0;i>s;s++)e.call(a,n[s])&&r.push(n[s]);return r}}()),elFinder.prototype.version=\"2.1.7 (2.1-src Nightly: b52857e)\",function(){if(e.ui&&e.ui.ddmanager){var t=e.ui.ddmanager.prepareOffsets;e.ui.ddmanager.prepareOffsets=function(n,i){var a=function(e){if(e.is(\":hidden\"))return!0;var t=e[0].getBoundingClientRect();return document.elementFromPoint(t.left,t.top)?!1:!0};if(\"mousedown\"===i.type){var r,o,s=e.ui.ddmanager.droppables[n.options.scope]||[],l=s.length;for(r=0;l>r;r++)o=s[r],o.options.autoDisable&&(!o.options.disabled||o.options.autoDisable>1)&&(o.options.disabled=a(o.element),o.options.autoDisable=o.options.disabled?2:1)}return t(n,i)}}}(),e.fn.elfinder=function(e){return\"instance\"==e?this.getElFinder():this.each(function(){var t=\"string\"==typeof e?e:\"\";switch(this.elfinder||new elFinder(this,\"object\"==typeof e?e:{}),t){case\"close\":case\"hide\":this.elfinder.hide();break;case\"open\":case\"show\":this.elfinder.show();break;case\"destroy\":this.elfinder.destroy()}})},e.fn.getElFinder=function(){var e;return this.each(function(){return this.elfinder?(e=this.elfinder,!1):void 0}),e},elFinder.prototype._options={url:\"\",requestType:\"get\",transport:{},urlUpload:\"\",dragUploadAllow:\"auto\",uploadMaxChunkSize:10485760,iframeTimeout:0,customData:{},handlers:{},customHeaders:{},xhrFields:{},lang:\"en\",cssClass:\"\",commands:[\"open\",\"opendir\",\"reload\",\"home\",\"up\",\"back\",\"forward\",\"getfile\",\"quicklook\",\"download\",\"rm\",\"duplicate\",\"rename\",\"mkdir\",\"mkfile\",\"upload\",\"copy\",\"cut\",\"paste\",\"edit\",\"extract\",\"archive\",\"search\",\"info\",\"view\",\"help\",\"resize\",\"sort\",\"netmount\",\"netunmount\",\"places\",\"chmod\"],commandsOptions:{getfile:{onlyURL:!1,multiple:!1,folders:!1,oncomplete:\"\"},upload:{ui:\"uploadbutton\"},download:{maxRequests:10},quicklook:{autoplay:!0,jplayer:\"extensions/jplayer\"},edit:{mimes:[],editors:[]},info:{nullUrlDirLinkSelf:!0,custom:{}},netmount:{ftp:{inputs:{host:e('<input type=\"text\"/>'),port:e('<input type=\"text\" placeholder=\"21\"/>'),path:e('<input type=\"text\" value=\"/\"/>'),user:e('<input type=\"text\"/>'),pass:e('<input type=\"password\"/>'),encoding:e('<input type=\"text\" placeholder=\"Optional\"/>'),locale:e('<input type=\"text\" placeholder=\"Optional\"/>')}},dropbox:{inputs:{host:e('<span><span class=\"elfinder-info-spinner\"/></span></span><input type=\"hidden\"/>'),path:e('<input type=\"text\" value=\"/\"/>'),user:e('<input type=\"hidden\"/>'),pass:e('<input type=\"hidden\"/>')},select:function(e){var t=this;t.inputs.host.find(\"span\").length&&e.request({data:{cmd:\"netmount\",protocol:\"dropbox\",host:\"dropbox.com\",user:\"init\",pass:\"init\",options:{url:e.uploadURL,id:e.id}},preventDefault:!0}).done(function(n){t.inputs.host.find(\"span\").removeClass(\"elfinder-info-spinner\"),t.inputs.host.find(\"span\").html(n.body.replace(/\\{msg:([^}]+)\\}/g,function(t,n){return e.i18n(n,\"Dropbox.com\")}))}).fail(function(){})},done:function(t,n){var i=this;\"makebtn\"==n.mode?(i.inputs.host.find(\"span\").removeClass(\"elfinder-info-spinner\"),i.inputs.host.find(\"input\").hover(function(){e(this).toggleClass(\"ui-state-hover\")}),i.inputs.host[1].value=\"\"):(i.inputs.host.find(\"span\").removeClass(\"elfinder-info-spinner\"),i.inputs.host.find(\"span\").html(\"Dropbox.com\"),i.inputs.host[1].value=\"dropbox\",i.inputs.user.val(\"done\"),i.inputs.pass.val(\"done\"))}}},help:{view:[\"about\",\"shortcuts\",\"help\"]}},getFileCallback:null,defaultView:\"icons\",startPathHash:\"\",ui:[\"toolbar\",\"tree\",\"path\",\"stat\"],uiOptions:{toolbar:[[\"back\",\"forward\"],[\"netmount\"],[\"mkdir\",\"mkfile\",\"upload\"],[\"open\",\"download\",\"getfile\"],[\"info\",\"chmod\"],[\"quicklook\"],[\"copy\",\"cut\",\"paste\"],[\"rm\"],[\"duplicate\",\"rename\",\"edit\",\"resize\"],[\"extract\",\"archive\"],[\"search\"],[\"view\",\"sort\"],[\"help\"]],tree:{openRootOnLoad:!0,openCwdOnOpen:!0,syncTree:!0},navbar:{minWidth:150,maxWidth:500},cwd:{oldSchool:!1,listView:{columns:[\"perm\",\"date\",\"size\",\"kind\"],columnsCustomName:{}}}},onlyMimes:[],sortRules:{},sortType:\"name\",sortOrder:\"asc\",sortStickFolders:!0,clientFormatDate:!0,UTCDate:!1,dateFormat:\"\",fancyDateFormat:\"\",fileModeStyle:\"both\",width:\"auto\",height:400,resizable:!0,notifyDelay:500,notifyDialog:{position:{top:\"12px\",right:\"12px\"},width:280},allowShortcuts:!0,rememberLastDir:!0,reloadClearHistory:!1,useBrowserHistory:!0,showFiles:30,showThreshold:50,validName:!1,backupSuffix:\"~\",sync:0,syncStart:!0,loadTmbs:5,cookie:{expires:30,domain:\"\",path:\"/\",secure:!1},contextmenu:{navbar:[\"open\",\"download\",\"|\",\"upload\",\"|\",\"copy\",\"cut\",\"paste\",\"duplicate\",\"|\",\"rm\",\"|\",\"rename\",\"|\",\"places\",\"info\",\"chmod\",\"netunmount\"],cwd:[\"reload\",\"back\",\"|\",\"upload\",\"mkdir\",\"mkfile\",\"paste\",\"|\",\"sort\",\"|\",\"info\"],files:[\"getfile\",\"|\",\"open\",\"download\",\"opendir\",\"quicklook\",\"|\",\"upload\",\"mkdir\",\"|\",\"copy\",\"cut\",\"paste\",\"duplicate\",\"|\",\"rm\",\"|\",\"edit\",\"rename\",\"resize\",\"|\",\"archive\",\"extract\",\"|\",\"places\",\"info\",\"chmod\"]},debug:[\"error\",\"warning\",\"event-destroy\"]},elFinder.prototype.history=function(t){var n,i=this,a=!0,r=[],o=function(){r=[t.cwd().hash],n=0,a=!0\n },s=t.options.useBrowserHistory&&window.history&&window.history.pushState?window.history:null,l=function(s){return s&&i.canForward()||!s&&i.canBack()?(a=!1,t.exec(\"open\",r[s?++n:--n]).fail(o)):e.Deferred().reject()};this.canBack=function(){return n>0},this.canForward=function(){return n<r.length-1},this.back=l,this.forward=function(){return l(!0)},t.open(function(){var e=r.length,i=t.cwd().hash;a&&(n>=0&&e>n+1&&r.splice(n+1),r[r.length-1]!=i&&r.push(i),n=r.length-1),a=!0,s&&(s.state?s.state.thash!=i&&s.pushState({thash:i},null,location.pathname+location.search+\"#elf_\"+i):s.replaceState({thash:i},null,location.pathname+location.search+\"#elf_\"+i))}).reload(t.options.reloadClearHistory&&o)},elFinder.prototype.command=function(t){this.fm=t,this.name=\"\",this.title=\"\",this.linkedCmds=[],this.state=-1,this.alwaysEnabled=!1,this._disabled=!1,this.disableOnSearch=!1,this.updateOnSelect=!0,this._handlers={enable:function(){this.update(void 0,this.value)},disable:function(){this.update(-1,this.value)},\"open reload load\":function(){this._disabled=!(this.alwaysEnabled||this.fm.isCommandEnabled(this.name)),this.update(void 0,this.value),this.change()}},this.handlers={},this.shortcuts=[],this.options={ui:\"button\"},this.setup=function(t,n){var i,a,r,o=this,s=this.fm;for(this.name=t,this.title=s.messages[\"cmd\"+t]?s.i18n(\"cmd\"+t):t,this.options=e.extend({},this.options,n),this.listeners=[],n.shortcuts&&(\"function\"==typeof n.shortcuts?r=n.shortcuts(this.fm,this.shortcuts):e.isArray(n.shortcuts)&&(r=n.shortcuts),this.shortcuts=r||[]),this.updateOnSelect&&(this._handlers.select=function(){this.update(void 0,this.value)}),e.each(e.extend({},o._handlers,o.handlers),function(t,n){s.bind(t,e.proxy(n,o))}),i=0;i<this.shortcuts.length;i++)a=this.shortcuts[i],a.callback=e.proxy(a.callback||function(){this.exec()},this),!a.description&&(a.description=this.title),s.shortcut(a);this.disableOnSearch&&s.bind(\"search searchend\",function(e){o._disabled=\"search\"==e.type,o.update(void 0,o.value)}),this.init()},this.init=function(){},this.exec=function(){return e.Deferred().reject()},this.disabled=function(){return this.state<0},this.enabled=function(){return this.state>-1},this.active=function(){return this.state>0},this.getstate=function(){return-1},this.update=function(e,t){var n=this.state,i=this.value;this.state=this._disabled?-1:void 0!==e?e:this.getstate(),this.value=t,(n!=this.state||i!=this.value)&&this.change()},this.change=function(e){var t,n;if(\"function\"==typeof e)this.listeners.push(e);else for(n=0;n<this.listeners.length;n++){t=this.listeners[n];try{t(this.state,this.value)}catch(i){this.fm.debug(\"error\",i)}}return this},this.hashes=function(n){return n?e.map(e.isArray(n)?n:[n],function(e){return t.file(e)?e:null}):t.selected()},this.files=function(t){var n=this.fm;return t?e.map(e.isArray(t)?t:[t],function(e){return n.file(e)||null}):n.selectedFiles()}},elFinder.prototype.resources={\"class\":{hover:\"ui-state-hover\",active:\"ui-state-active\",disabled:\"ui-state-disabled\",draggable:\"ui-draggable\",droppable:\"ui-droppable\",adroppable:\"elfinder-droppable-active\",cwdfile:\"elfinder-cwd-file\",cwd:\"elfinder-cwd\",tree:\"elfinder-tree\",treeroot:\"elfinder-navbar-root\",navdir:\"elfinder-navbar-dir\",navdirwrap:\"elfinder-navbar-dir-wrapper\",navarrow:\"elfinder-navbar-arrow\",navsubtree:\"elfinder-navbar-subtree\",navcollapse:\"elfinder-navbar-collapsed\",navexpand:\"elfinder-navbar-expanded\",treedir:\"elfinder-tree-dir\",placedir:\"elfinder-place-dir\",searchbtn:\"elfinder-button-search\"},tpl:{perms:'<span class=\"elfinder-perms\"/>',lock:'<span class=\"elfinder-lock\"/>',symlink:'<span class=\"elfinder-symlink\"/>',navicon:'<span class=\"elfinder-nav-icon\"/>',navspinner:'<span class=\"elfinder-navbar-spinner\"/>',navdir:'<div class=\"elfinder-navbar-wrapper\"><span id=\"{id}\" class=\"ui-corner-all elfinder-navbar-dir {cssclass}\"><span class=\"elfinder-navbar-arrow\"/><span class=\"elfinder-navbar-icon\" {style}/>{symlink}{permissions}{name}</span><div class=\"elfinder-navbar-subtree\"/></div>',placedir:'<div class=\"elfinder-navbar-wrapper\"><span id=\"{id}\" class=\"ui-corner-all elfinder-navbar-dir {cssclass}\" title=\"{title}\"><span class=\"elfinder-navbar-arrow\"/><span class=\"elfinder-navbar-icon\" {style}/>{symlink}{permissions}{name}</span><div class=\"elfinder-navbar-subtree\"/></div>'},mimes:{text:[\"application/x-empty\",\"application/javascript\",\"application/xhtml+xml\",\"audio/x-mp3-playlist\",\"application/x-web-config\",\"application/docbook+xml\",\"application/x-php\",\"application/x-perl\",\"application/x-awk\",\"application/x-config\",\"application/x-csh\",\"application/xml\"]},mixin:{make:function(){var t,n,i,a=this.fm,r=this.name,o=a.getUI(\"cwd\"),s=\"list\"!=a.storage(\"view\"),l=a.selected(),d=function(){v.is(\":hidden\")||v.addClass(\"ui-front\").elfinderoverlay(\"hide\").off(\"click\",b),g.removeClass(\"ui-front\").css(\"position\",\"\"),s?n.css(\"max-height\",\"\"):i.css(\"width\",\"\").parent(\"td\").css(\"overflow\",\"\")},c=e.Deferred().fail(function(e){l&&(a.trigger(\"unlockfiles\",{files:l}),a.clipboard([])),o.trigger(\"unselectall\"),e&&a.error(e)}).always(function(){d(),y.remove(),g.remove(),a.enable()}),u=\"tmp_\"+parseInt(1e5*Math.random()),p=a.cwd().hash,h=new Date,f={hash:u,name:a.uniqueName(this.prefix),mime:this.mime,read:!0,write:!0,date:\"Today \"+h.getHours()+\":\"+h.getMinutes()},m=this.data||{},g=o.trigger(\"create.\"+a.namespace,f).find(\"#\"+a.cwdHash2Id(u)),v=a.getUI().children(\".elfinder-overlay\"),b=function(e){e.stopPropagation(),c.reject()},y=e(s?\"<textarea/>\":'<input type=\"text\"/>').on(\"keyup text\",function(){s?(this.style.height=\"1px\",this.style.height=this.scrollHeight+\"px\"):t&&(this.style.width=t+\"px\",this.scrollWidth>t&&(this.style.width=this.scrollWidth+10+\"px\"))}).keydown(function(t){t.stopImmediatePropagation(),t.keyCode==e.ui.keyCode.ESCAPE?c.reject():t.keyCode==e.ui.keyCode.ENTER&&y.blur()}).mousedown(function(e){e.stopPropagation()}).blur(function(){var t,n=e.trim(y.val()),i=y.parent(),s=!0;if(i.length){if(a.options.validName&&a.options.validName.test)try{s=a.options.validName.test(n)}catch(h){s=!1}if(!n||\"..\"===n||!s)return a.error(\"errInvName\"),!1;if(a.fileByName(n,p))return a.error([\"errExists\",n]),!1;t=l?a.exec(\"cut\",l):null,e.when(t).done(function(){d(),i.html(a.escape(n)),a.lockfiles({files:[u]}),a.request({data:e.extend({cmd:r,name:n,target:p},m||{}),notify:{type:r,cnt:1},preventFail:!0,syncOnFail:!0}).fail(function(e){c.reject(e)}).done(function(e){if(c.resolve(e),e.added&&e.added[0]){var t=e.added[0].hash,n=o.find(\"#\"+a.cwdHash2Id(t));l&&a.exec(\"paste\",t),n.length&&n.trigger(\"scrolltoview\")}})}).fail(function(){c.reject()})}});return this.disabled()||!g.length?c.reject():(a.disable(),n=g.find(\".elfinder-cwd-filename\"),i=n.parent(),g.css(\"position\",\"relative\").addClass(\"ui-front\"),s?n.css(\"max-height\",\"none\"):(t=i.width(),i.width(t-15).parent(\"td\").css(\"overflow\",\"visible\")),n.empty(\"\").append(y.val(f.name)),a.UA.Mobile&&v.on(\"click\",b).removeClass(\"ui-front\").elfinderoverlay(\"show\"),y.trigger(\"keyup\"),y.select().focus(),y[0].setSelectionRange&&y[0].setSelectionRange(0,f.name.replace(/\\..+$/,\"\").length),c)}}},e.fn.dialogelfinder=function(t){var n=\"elfinderPosition\",i=\"elfinderDestroyOnClose\";if(this.not(\".elfinder\").each(function(){var a=(e(document),e('<div class=\"ui-widget-header dialogelfinder-drag ui-corner-top\">'+(t.title||\"Files\")+\"</div>\")),r=(e('<a href=\"#\" class=\"dialogelfinder-drag-close ui-corner-all\"><span class=\"ui-icon ui-icon-closethick\"> </span></a>').appendTo(a).click(function(e){e.preventDefault(),r.dialogelfinder(\"close\")}),e(this).addClass(\"dialogelfinder\").css(\"position\",\"absolute\").hide().appendTo(\"body\").draggable({handle:\".dialogelfinder-drag\",containment:\"window\"}).elfinder(t).prepend(a));r.elfinder(\"instance\"),r.width(parseInt(r.width())||840).data(i,!!t.destroyOnClose).find(\".elfinder-toolbar\").removeClass(\"ui-corner-top\"),t.position&&r.data(n,t.position),t.autoOpen!==!1&&e(this).dialogelfinder(\"open\")}),\"open\"==t){var a=e(this),r=a.data(n)||{top:parseInt(e(document).scrollTop()+(e(window).height()<a.height()?2:(e(window).height()-a.height())/2)),left:parseInt(e(document).scrollLeft()+(e(window).width()<a.width()?2:(e(window).width()-a.width())/2))};a.is(\":hidden\")&&(a.addClass(\"ui-front\").css(r).show().trigger(\"resize\"),setTimeout(function(){a.trigger(\"resize\").mousedown()},200))}else if(\"close\"==t){var a=e(this).removeClass(\"ui-front\");a.is(\":visible\")&&(a.data(i)?a.elfinder(\"destroy\").remove():a.elfinder(\"close\"))}else if(\"instance\"==t)return e(this).getElFinder();return this},elFinder&&elFinder.prototype&&\"object\"==typeof elFinder.prototype.i18&&(elFinder.prototype.i18.en={translator:\"Troex Nevelin &lt;troex@fury.scancode.ru&gt;\",language:\"English\",direction:\"ltr\",dateFormat:\"M d, Y h:i A\",fancyDateFormat:\"$1 h:i A\",messages:{error:\"Error\",errUnknown:\"Unknown error.\",errUnknownCmd:\"Unknown command.\",errJqui:\"Invalid jQuery UI configuration. Selectable, draggable and droppable components must be included.\",errNode:\"elFinder requires DOM Element to be created.\",errURL:\"Invalid elFinder configuration! URL option is not set.\",errAccess:\"Access denied.\",errConnect:\"Unable to connect to backend.\",errAbort:\"Connection aborted.\",errTimeout:\"Connection timeout.\",errNotFound:\"Backend not found.\",errResponse:\"Invalid backend response.\",errConf:\"Invalid backend configuration.\",errJSON:\"PHP JSON module not installed.\",errNoVolumes:\"Readable volumes not available.\",errCmdParams:'Invalid parameters for command \"$1\".',errDataNotJSON:\"Data is not JSON.\",errDataEmpty:\"Data is empty.\",errCmdReq:\"Backend request requires command name.\",errOpen:'Unable to open \"$1\".',errNotFolder:\"Object is not a folder.\",errNotFile:\"Object is not a file.\",errRead:'Unable to read \"$1\".',errWrite:'Unable to write into \"$1\".',errPerm:\"Permission denied.\",errLocked:'\"$1\" is locked and can not be renamed, moved or removed.',errExists:'File named \"$1\" already exists.',errInvName:\"Invalid file name.\",errFolderNotFound:\"Folder not found.\",errFileNotFound:\"File not found.\",errTrgFolderNotFound:'Target folder \"$1\" not found.',errPopup:\"Browser prevented opening popup window. To open file enable it in browser options.\",errMkdir:'Unable to create folder \"$1\".',errMkfile:'Unable to create file \"$1\".',errRename:'Unable to rename \"$1\".',errCopyFrom:'Copying files from volume \"$1\" not allowed.',errCopyTo:'Copying files to volume \"$1\" not allowed.',errMkOutLink:\"Unable to create a link to outside the volume root.\",errUpload:\"Upload error.\",errUploadFile:'Unable to upload \"$1\".',errUploadNoFiles:\"No files found for upload.\",errUploadTotalSize:\"Data exceeds the maximum allowed size.\",errUploadFileSize:\"File exceeds maximum allowed size.\",errUploadMime:\"File type not allowed.\",errUploadTransfer:'\"$1\" transfer error.',errUploadTemp:\"Unable to make temporary file for upload.\",errNotReplace:'Object \"$1\" already exists at this location and can not be replaced by object with another type.',errReplace:'Unable to replace \"$1\".',errSave:'Unable to save \"$1\".',errCopy:'Unable to copy \"$1\".',errMove:'Unable to move \"$1\".',errCopyInItself:'Unable to copy \"$1\" into itself.',errRm:'Unable to remove \"$1\".',errRmSrc:\"Unable remove source file(s).\",errExtract:'Unable to extract files from \"$1\".',errArchive:\"Unable to create archive.\",errArcType:\"Unsupported archive type.\",errNoArchive:\"File is not archive or has unsupported archive type.\",errCmdNoSupport:\"Backend does not support this command.\",errReplByChild:'The folder \"$1\" can\\'t be replaced by an item it contains.',errArcSymlinks:\"For security reason denied to unpack archives contains symlinks or files with not allowed names.\",errArcMaxSize:\"Archive files exceeds maximum allowed size.\",errResize:'Unable to resize \"$1\".',errResizeDegree:\"Invalid rotate degree.\",errResizeRotate:\"Unable to rotate image.\",errResizeSize:\"Invalid image size.\",errResizeNoChange:\"Image size not changed.\",errUsupportType:\"Unsupported file type.\",errNotUTF8Content:'File \"$1\" is not in UTF-8 and cannot be edited.',errNetMount:'Unable to mount \"$1\".',errNetMountNoDriver:\"Unsupported protocol.\",errNetMountFailed:\"Mount failed.\",errNetMountHostReq:\"Host required.\",errSessionExpires:\"Your session has expired due to inactivity.\",errCreatingTempDir:'Unable to create temporary directory: \"$1\"',errFtpDownloadFile:'Unable to download file from FTP: \"$1\"',errFtpUploadFile:'Unable to upload file to FTP: \"$1\"',errFtpMkdir:'Unable to create remote directory on FTP: \"$1\"',errArchiveExec:'Error while archiving files: \"$1\"',errExtractExec:'Error while extracting files: \"$1\"',errNetUnMount:\"Unable to unmount\",errConvUTF8:\"Not convertible to UTF-8\",errFolderUpload:\"Try Google Chrome, If you'd like to upload the folder.\",errSearchTimeout:'Timed out while searching \"$1\". Search result is partial.',cmdarchive:\"Create archive\",cmdback:\"Back\",cmdcopy:\"Copy\",cmdcut:\"Cut\",cmddownload:\"Download\",cmdduplicate:\"Duplicate\",cmdedit:\"Edit file\",cmdextract:\"Extract files from archive\",cmdforward:\"Forward\",cmdgetfile:\"Select files\",cmdhelp:\"About this software\",cmdhome:\"Home\",cmdinfo:\"Get info\",cmdmkdir:\"New folder\",cmdmkdirin:\"Into New Folder\",cmdmkfile:\"New text file\",cmdopen:\"Open\",cmdpaste:\"Paste\",cmdquicklook:\"Preview\",cmdreload:\"Reload\",cmdrename:\"Rename\",cmdrm:\"Delete\",cmdsearch:\"Find files\",cmdup:\"Go to parent directory\",cmdupload:\"Upload files\",cmdview:\"View\",cmdresize:\"Resize & Rotate\",cmdsort:\"Sort\",cmdnetmount:\"Mount network volume\",cmdnetunmount:\"Unmount\",cmdplaces:\"To Places\",cmdchmod:\"Change mode\",cmdopendir:\"Open a folder\",btnClose:\"Close\",btnSave:\"Save\",btnRm:\"Remove\",btnApply:\"Apply\",btnCancel:\"Cancel\",btnNo:\"No\",btnYes:\"Yes\",btnMount:\"Mount\",btnApprove:\"Goto $1 & approve\",btnUnmount:\"Unmount\",btnConv:\"Convert\",btnCwd:\"Here\",btnVolume:\"Volume\",btnAll:\"All\",btnMime:\"MIME Type\",btnFileName:\"Filename\",btnSaveClose:\"Save & Close\",btnBackup:\"Backup\",ntfopen:\"Open folder\",ntffile:\"Open file\",ntfreload:\"Reload folder content\",ntfmkdir:\"Creating directory\",ntfmkfile:\"Creating files\",ntfrm:\"Delete files\",ntfcopy:\"Copy files\",ntfmove:\"Move files\",ntfprepare:\"Prepare to copy files\",ntfrename:\"Rename files\",ntfupload:\"Uploading files\",ntfdownload:\"Downloading files\",ntfsave:\"Save files\",ntfarchive:\"Creating archive\",ntfextract:\"Extracting files from archive\",ntfsearch:\"Searching files\",ntfresize:\"Resizing images\",ntfsmth:\"Doing something\",ntfloadimg:\"Loading image\",ntfnetmount:\"Mounting network volume\",ntfnetunmount:\"Unmounting network volume\",ntfdim:\"Acquiring image dimension\",ntfreaddir:\"Reading folder infomation\",ntfurl:\"Getting URL of link\",ntfchmod:\"Changing file mode\",ntfpreupload:\"Verifying upload file name\",ntfzipdl:\"Creating a file for download\",dateUnknown:\"unknown\",Today:\"Today\",Yesterday:\"Yesterday\",msJan:\"Jan\",msFeb:\"Feb\",msMar:\"Mar\",msApr:\"Apr\",msMay:\"May\",msJun:\"Jun\",msJul:\"Jul\",msAug:\"Aug\",msSep:\"Sep\",msOct:\"Oct\",msNov:\"Nov\",msDec:\"Dec\",January:\"January\",February:\"February\",March:\"March\",April:\"April\",May:\"May\",June:\"June\",July:\"July\",August:\"August\",September:\"September\",October:\"October\",November:\"November\",December:\"December\",Sunday:\"Sunday\",Monday:\"Monday\",Tuesday:\"Tuesday\",Wednesday:\"Wednesday\",Thursday:\"Thursday\",Friday:\"Friday\",Saturday:\"Saturday\",Sun:\"Sun\",Mon:\"Mon\",Tue:\"Tue\",Wed:\"Wed\",Thu:\"Thu\",Fri:\"Fri\",Sat:\"Sat\",sortname:\"by name\",sortkind:\"by kind\",sortsize:\"by size\",sortdate:\"by date\",sortFoldersFirst:\"Folders first\",\"untitled file.txt\":\"NewFile.txt\",\"untitled folder\":\"NewFolder\",Archive:\"NewArchive\",confirmReq:\"Confirmation required\",confirmRm:\"Are you sure you want to remove files?<br/>This cannot be undone!\",confirmRepl:\"Replace old file with new one?\",confirmConvUTF8:\"Not in UTF-8<br/>Convert to UTF-8?<br/>Contents become UTF-8 by saving after conversion.\",confirmNotSave:\"It has been modified.<br/>Losing work if you do not save changes.\",apllyAll:\"Apply to all\",name:\"Name\",size:\"Size\",perms:\"Permissions\",modify:\"Modified\",kind:\"Kind\",read:\"read\",write:\"write\",noaccess:\"no access\",and:\"and\",unknown:\"unknown\",selectall:\"Select all files\",selectfiles:\"Select file(s)\",selectffile:\"Select first file\",selectlfile:\"Select last file\",viewlist:\"List view\",viewicons:\"Icons view\",places:\"Places\",calc:\"Calculate\",path:\"Path\",aliasfor:\"Alias for\",locked:\"Locked\",dim:\"Dimensions\",files:\"Files\",folders:\"Folders\",items:\"Items\",yes:\"yes\",no:\"no\",link:\"Link\",searcresult:\"Search results\",selected:\"selected items\",about:\"About\",shortcuts:\"Shortcuts\",help:\"Help\",webfm:\"Web file manager\",ver:\"Version\",protocolver:\"protocol version\",homepage:\"Project home\",docs:\"Documentation\",github:\"Fork us on Github\",twitter:\"Follow us on twitter\",facebook:\"Join us on facebook\",team:\"Team\",chiefdev:\"chief developer\",developer:\"developer\",contributor:\"contributor\",maintainer:\"maintainer\",translator:\"translator\",icons:\"Icons\",dontforget:\"and don't forget to take your towel\",shortcutsof:\"Shortcuts disabled\",dropFiles:\"Drop files here\",or:\"or\",selectForUpload:\"Select files to upload\",moveFiles:\"Move files\",copyFiles:\"Copy files\",rmFromPlaces:\"Remove from places\",aspectRatio:\"Aspect ratio\",scale:\"Scale\",width:\"Width\",height:\"Height\",resize:\"Resize\",crop:\"Crop\",rotate:\"Rotate\",\"rotate-cw\":\"Rotate 90 degrees CW\",\"rotate-ccw\":\"Rotate 90 degrees CCW\",degree:\"\u00b0\",netMountDialogTitle:\"Mount network volume\",protocol:\"Protocol\",host:\"Host\",port:\"Port\",user:\"User\",pass:\"Password\",confirmUnmount:\"Are you unmount $1?\",dropFilesBrowser:\"Drop or Paste files from browser\",dropPasteFiles:\"Drop or Paste files here\",encoding:\"Encoding\",locale:\"Locale\",searchTarget:\"Target: $1\",searchMime:\"Search by input MIME Type\",owner:\"Owner\",group:\"Group\",other:\"Other\",execute:\"Execute\",perm:\"Permission\",mode:\"Mode\",emptyFolder:\"Folder is empty\",emptyFolderDrop:\"Folder is empty\\\\A Drop to add items\",emptyFolderLTap:\"Folder is empty\\\\A Long tap to add items\",quality:\"Quality\",autoSync:\"Auto sync\",moveUp:\"Move up\",getLink:\"Get URL link\",selectedItems:\"Selected items ($1)\",kindUnknown:\"Unknown\",kindFolder:\"Folder\",kindAlias:\"Alias\",kindAliasBroken:\"Broken alias\",kindApp:\"Application\",kindPostscript:\"Postscript document\",kindMsOffice:\"Microsoft Office document\",kindMsWord:\"Microsoft Word document\",kindMsExcel:\"Microsoft Excel document\",kindMsPP:\"Microsoft Powerpoint presentation\",kindOO:\"Open Office document\",kindAppFlash:\"Flash application\",kindPDF:\"Portable Document Format (PDF)\",kindTorrent:\"Bittorrent file\",kind7z:\"7z archive\",kindTAR:\"TAR archive\",kindGZIP:\"GZIP archive\",kindBZIP:\"BZIP archive\",kindXZ:\"XZ archive\",kindZIP:\"ZIP archive\",kindRAR:\"RAR archive\",kindJAR:\"Java JAR file\",kindTTF:\"True Type font\",kindOTF:\"Open Type font\",kindRPM:\"RPM package\",kindText:\"Text document\",kindTextPlain:\"Plain text\",kindPHP:\"PHP source\",kindCSS:\"Cascading style sheet\",kindHTML:\"HTML document\",kindJS:\"Javascript source\",kindRTF:\"Rich Text Format\",kindC:\"C source\",kindCHeader:\"C header source\",kindCPP:\"C++ source\",kindCPPHeader:\"C++ header source\",kindShell:\"Unix shell script\",kindPython:\"Python source\",kindJava:\"Java source\",kindRuby:\"Ruby source\",kindPerl:\"Perl script\",kindSQL:\"SQL source\",kindXML:\"XML document\",kindAWK:\"AWK source\",kindCSV:\"Comma separated values\",kindDOCBOOK:\"Docbook XML document\",kindMarkdown:\"Markdown text\",kindImage:\"Image\",kindBMP:\"BMP image\",kindJPEG:\"JPEG image\",kindGIF:\"GIF Image\",kindPNG:\"PNG Image\",kindTIFF:\"TIFF image\",kindTGA:\"TGA image\",kindPSD:\"Adobe Photoshop image\",kindXBITMAP:\"X bitmap image\",kindPXM:\"Pixelmator image\",kindAudio:\"Audio media\",kindAudioMPEG:\"MPEG audio\",kindAudioMPEG4:\"MPEG-4 audio\",kindAudioMIDI:\"MIDI audio\",kindAudioOGG:\"Ogg Vorbis audio\",kindAudioWAV:\"WAV audio\",AudioPlaylist:\"MP3 playlist\",kindVideo:\"Video media\",kindVideoDV:\"DV movie\",kindVideoMPEG:\"MPEG movie\",kindVideoMPEG4:\"MPEG-4 movie\",kindVideoAVI:\"AVI movie\",kindVideoMOV:\"Quick Time movie\",kindVideoWM:\"Windows Media movie\",kindVideoFlash:\"Flash movie\",kindVideoMKV:\"Matroska movie\",kindVideoOGG:\"Ogg movie\"}}),e.fn.elfinderbutton=function(t){return this.each(function(){var n,i=\"class\",a=t.fm,r=a.res(i,\"disabled\"),o=a.res(i,\"active\"),s=a.res(i,\"hover\"),l=\"elfinder-button-menu-item\",d=\"elfinder-button-menu-item-selected\",c=e(this).addClass(\"ui-state-default elfinder-button\").attr(\"title\",t.title).append('<span class=\"elfinder-button-icon elfinder-button-icon-'+t.name+'\"/>').hover(function(e){!c.hasClass(r)&&c[\"mouseleave\"==e.type?\"removeClass\":\"addClass\"](s)}).click(function(e){c.hasClass(r)||(n&&t.variants.length>1?(n.is(\":hidden\")&&t.fm.getUI().click(),e.stopPropagation(),n.slideToggle(100)):t.exec())}),u=function(){n.hide()};e.isArray(t.variants)&&(c.addClass(\"elfinder-menubutton\"),n=e('<div class=\"ui-front ui-widget ui-widget-content elfinder-button-menu ui-corner-all\"/>').hide().appendTo(c).on(\"mouseenter mouseleave\",\".\"+l,function(){e(this).toggleClass(s)}).on(\"click\",\".\"+l,function(i){i.preventDefault(),i.stopPropagation(),c.removeClass(s),n.hide(),t.exec(t.fm.selected(),e(this).data(\"value\"))}),t.fm.bind(\"disable select\",u).getUI().click(u),t.change(function(){n.html(\"\"),e.each(t.variants,function(i,a){n.append(e('<div class=\"'+l+'\">'+a[1]+\"</div>\").data(\"value\",a[0]).addClass(a[0]==t.value?d:\"\"))})})),t.change(function(){t.disabled()?c.removeClass(o+\" \"+s).addClass(r):(c.removeClass(r),c[t.active()?\"addClass\":\"removeClass\"](o))}).change()})},e.fn.elfindercontextmenu=function(t){return this.each(function(){var n=e(this),i=\"elfinder-contextmenu-item\",a=\"elfinder-contextsubmenu-item\",r=\"elfinder-contextmenu-extra-icon\",o=n.addClass(\"ui-helper-reset ui-front ui-widget ui-state-default ui-corner-all elfinder-contextmenu elfinder-contextmenu-\"+t.direction).hide().appendTo(\"body\").on(\"mouseenter mouseleave\",\".\"+i,function(t){e(this).toggleClass(\"ui-state-hover\",\"mouseenter\"===t.type)}).on(\"mouseenter mouseleave\",\".\"+r,function(t){e(this).parent().toggleClass(\"ui-state-hover\",\"mouseleave\"===t.type)}).on(\"contextmenu\",function(){return!1}),s=\"ltr\"==t.direction?\"left\":\"right\",l=e.extend({},t.options.contextmenu),d=i+(t.UA.Touch?\" elfinder-touch\":\"\"),c='<div class=\"'+d+'\"><span class=\"elfinder-button-icon {icon} elfinder-contextmenu-icon\"/><span>{label}</span></div>',u=function(t,n,i){return e(c.replace(\"{icon}\",n?\"elfinder-button-icon-\"+n:\"\").replace(\"{label}\",t)).click(function(e){e.stopPropagation(),e.preventDefault(),i()})},p=function(n,i){var a=e(window),r=o.outerWidth(),l=o.outerHeight(),d=a.width(),c=a.height(),u=a.scrollTop(),p=a.scrollLeft(),h=t.UA.Touch?30:0,f=t.UA.Touch?20:0,m={top:Math.max(0,c>i-u+f+l?i+f:i-f-l>0?i-f-l:i+f),left:Math.max(0,d>n-p+h+r?n+h:n-h-r)};o.css(m).show(),m[s]=parseInt(o.width()),o.find(\".elfinder-contextmenu-sub\").css(m),t.UA.iOS&&e(\"div.elfinder div.overflow-scrolling-touch\").css(\"-webkit-overflow-scrolling\",\"auto\")},h=function(){o.hide().empty(),t.trigger(\"closecontextmenu\"),t.UA.iOS&&e(\"div.elfinder div.overflow-scrolling-touch\").css(\"-webkit-overflow-scrolling\",\"touch\")},f=function(i,r){var s=!1,c={},p=[],f=0===r[0].indexOf(t.cwd().volumeid,0),m=0;n.data(\"cmdMaps\")&&e.each(n.data(\"cmdMaps\"),function(e,t){return 0==r[0].indexOf(e,0)?(c=t,!1):void 0}),f||t.disabledCmds&&e.each(t.disabledCmds,function(e,t){return 0==r[0].indexOf(e,0)?(p=t,!1):void 0}),m=t.selected().length,m>1&&o.append('<div class=\"ui-corner-top ui-widget-header elfinder-contextmenu-header\"><span>'+t.i18n(\"selectedItems\",\"\"+m)+\"</span></div>\"),e.each(l[i]||[],function(n,i){var l,m,g,v;if(\"|\"==i&&s)return o.append('<div class=\"elfinder-contextmenu-separator\"/>'),s=!1,void 0;if(c[i]&&(i=c[i]),l=t.command(i),!l||f||t.searchStatus.state&&l.disableOnSearch||(l.__disabled=l._disabled,l._disabled=!(l.alwaysEnabled||(t._commands[i]?-1===e.inArray(i,p):!1)),e.each(l.linkedCmds,function(n,i){var a;(a=t.command(i))&&(a.__disabled=a._disabled,a._disabled=!(a.alwaysEnabled||(t._commands[i]?-1===e.inArray(i,p):!1)))})),l&&-1!=l.getstate(r)){if(l.variants){if(!l.variants.length)return;m=u(l.title,l.name,function(){}).on(\"touchend\",function(){m.data(\"touching\",!0),setTimeout(function(){m.data(\"touching\",!1)},50)}).on(\"click touchend\",\".\"+a,function(t){t.stopPropagation(),m.data(\"touching\")?(m.data(\"touching\",!1),e(this).removeClass(\"ui-state-hover\"),t.preventDefault()):\"click\"==t.type&&(o.hide(),l.exec(r,e(this).data(\"exec\")))}),g=e('<div class=\"ui-front ui-corner-all elfinder-contextmenu-sub\"/>').appendTo(m.append('<span class=\"elfinder-contextmenu-arrow\"/>')),v=function(){var t,n,i,a=e(window),r=e(m).offset().left,o=e(m).offset().top,s=e(m).outerWidth(),l=g.outerWidth(),d=g.outerHeight(),c=a.scrollLeft()+a.width(),u=a.scrollTop()+a.height(),p=5;i=r+s+l+p-c,t=i>0?s-i:s,i=o+5+d+p-u,n=i>0?5-i:5;var h={left:t,top:n};g.css(h).toggle()},m.addClass(\"elfinder-contextmenu-group\").hover(function(){v()}),e.each(l.variants,function(t,n){g.append(e('<div class=\"'+d+\" \"+a+'\"><span>'+n[1]+\"</span></div>\").data(\"exec\",n[0]))})}else m=u(l.title,l.name,function(){h(),l.exec(r)}),l.extra&&l.extra.node?m.append(e('<span class=\"elfinder-button-icon elfinder-button-icon-'+(l.extra.icon||\"\")+' elfinder-contextmenu-extra-icon\"/>').append(l.extra.node)):m.remove(\".elfinder-contextmenu-extra-icon\");o.append(m),s=!0}l&&\"undefined\"!=typeof l.__disabled&&(l._disabled=l.__disabled,delete l.__disabled,e.each(l.linkedCmds,function(e,n){var i;(i=t.command(n))&&(i._disabled=i.__disabled,delete i.__disabled)}))})},m=function(t){e.each(t,function(e,t){var n;\"|\"===t?o.append('<div class=\"elfinder-contextmenu-separator\"/>'):t.label&&\"function\"==typeof t.callback&&(n=u(t.label,t.icon,function(){!t.remain&&h(),t.callback()}),o.append(n))})};t.one(\"load\",function(){var e=t.getUI(\"cwd\");t.bind(\"contextmenu\",function(t){var n=t.data;n.type&&\"files\"===n.type||e.trigger(\"unselectall\"),h(),n.type&&n.targets?f(n.type,n.targets):n.raw&&m(n.raw),o.children().length&&p(n.x,n.y)}).one(\"destroy\",function(){o.remove()}).bind(\"disable select\",function(){!n.data(\"mouseEvInternal\")&&h(),n.data(\"mouseEvInternal\",!1)}).getUI().click(h)})})},e.fn.elfindercwd=function(t,n){return this.not(\".elfinder-cwd\").each(function(){var i=t.UA.Mobile,a=\"list\"==t.viewType,r=\"select.\"+t.namespace,o=\"unselect.\"+t.namespace,s=\"disable.\"+t.namespace,l=\"enable.\"+t.namespace,d=\"class\",c=t.res(d,\"cwdfile\"),u=\".\"+c,p=\"ui-selected\",h=t.res(d,\"disabled\"),f=t.res(d,\"draggable\"),m=t.res(d,\"droppable\"),g=t.res(d,\"hover\"),v=t.res(d,\"adroppable\"),b=c+\"-tmp\",y=t.options.loadTmbs>0?t.options.loadTmbs:5,w=\"\",x=[],k={},C=[],T=function(){for(var e=\"\",n=t.options.uiOptions.cwd.listView.columns,i=0;i<n.length;i++)e+=\"<td>{\"+n[i]+\"}</td>\";return e},I={icon:'<div id=\"{id}\" class=\"'+c+(t.UA.Touch?\" elfinder-touch\":\"\")+' {permsclass} {dirclass} ui-corner-all\" title=\"{tooltip}\"><div class=\"elfinder-cwd-file-wrapper ui-corner-all\"><div class=\"elfinder-cwd-icon {mime} ui-corner-all\" unselectable=\"on\" {style}/>{marker}</div><div class=\"elfinder-cwd-filename\" title=\"{nametitle}\">{name}</div></div>',row:'<tr id=\"{id}\" class=\"'+c+(t.UA.Touch?\" elfinder-touch\":\"\")+' {permsclass} {dirclass}\" title=\"{tooltip}\"><td><div class=\"elfinder-cwd-file-wrapper\"><span class=\"elfinder-cwd-icon {mime}\"/>{marker}<span class=\"elfinder-cwd-filename\">{name}</span></div></td>'+T()+\"</tr>\"},F=t.res(\"tpl\",\"perms\"),S=t.res(\"tpl\",\"lock\"),M=t.res(\"tpl\",\"symlink\"),P={id:function(e){return t.cwdHash2Id(e.hash)},name:function(e){return name=t.escape(e.name),!a&&(name=name.replace(/([_.])/g,\"&#8203;$1\")),name},nametitle:function(e){return t.escape(e.name)},permsclass:function(e){return t.perms2class(e)},perm:function(e){return t.formatPermissions(e)},dirclass:function(e){return\"directory\"==e.mime?\"directory\":\"\"},mime:function(e){return t.mime2class(e.mime)},size:function(e){return t.formatSize(e.size)},date:function(e){return t.formatDate(e)},kind:function(e){return t.mime2kind(e)},mode:function(e){return e.perm?t.formatFileMode(e.perm):\"\"},modestr:function(e){return e.perm?t.formatFileMode(e.perm,\"string\"):\"\"},modeoct:function(e){return e.perm?t.formatFileMode(e.perm,\"octal\"):\"\"},modeboth:function(e){return e.perm?t.formatFileMode(e.perm,\"both\"):\"\"},marker:function(e){return(e.alias||\"symlink-broken\"==e.mime?M:\"\")+(e.read&&e.write?\"\":F)+(e.locked?S:\"\")},tooltip:function(e){var n=t.formatDate(e)+(e.size>0?\" (\"+t.formatSize(e.size)+\")\":\"\"),i=\"\";return i=w&&e.path?t.escape(e.path.replace(/\\/[^\\/]*$/,\"\")):e.tooltip?t.escape(e.tooltip).replace(/\\r/g,\"&#13;\"):\"\",i?i+\"&#13;\"+n:n}},A=function(e){return I[a?\"row\":\"icon\"].replace(/\\{([a-z]+)\\}/g,function(t,n){return P[n]?P[n](e):e[n]?e[n]:\"\"})},O=!1,D=function(t,n){function i(e,t){return e[t+\"All\"](\"[id]:not(.\"+h+\"):not(.elfinder-cwd-parent):first\")}var s,l,d,c,u,f=e.ui.keyCode,m=t==f.LEFT||t==f.UP,g=et.find(\"[id].\"+p);if(g.length)if(s=g.filter(m?\":first\":\":last\"),d=i(s,m?\"prev\":\"next\"),d.length)if(a||t==f.LEFT||t==f.RIGHT)l=d;else if(c=s.position().top,u=s.position().left,l=s,m){do l=l.prev(\"[id]\");while(l.length&&!(l.position().top<c&&l.position().left<=u));l.hasClass(h)&&(l=i(l,\"next\"))}else{do l=l.next(\"[id]\");while(l.length&&!(l.position().top>c&&l.position().left>=u));l.hasClass(h)&&(l=i(l,\"prev\")),l.length||(d=et.find(\"[id]:not(.\"+h+\"):last\"),d.position().top>c&&(l=d))}else l=s;else l=et.find(\"[id]:not(.\"+h+\"):not(.elfinder-cwd-parent):\"+(m?\"last\":\"first\"));l&&l.length&&!l.hasClass(\"elfinder-cwd-parent\")&&(n?l=s.add(s[m?\"prevUntil\":\"nextUntil\"](\"#\"+l.attr(\"id\"))).add(l):g.trigger(o),l.trigger(r),R(l.filter(m?\":first\":\":last\")),_())},U=[],z=function(n){e(\"#\"+t.cwdHash2Id(n)).trigger(r)},E=function(){var n=t.cwd().hash;et.find(\"[id]:not(.\"+p+\"):not(.elfinder-cwd-parent)\").trigger(r),U=x.length?e.map(x,function(e){return e.hash}):e.map(t.files(),function(e){return e.phash==n?e.hash:null}),_()},j=function(){U.length&&(O=!1,U=[],et.find(\"[id].\"+p).trigger(o),_())},_=function(){t.trigger(\"select\",{selected:U})},R=function(e){var t=e.position().top,n=e.outerHeight(!0),i=tt.scrollTop(),a=tt.innerHeight();t+n>i+a?tt.scrollTop(parseInt(t+n-a)):i>t&&tt.scrollTop(t)},H=[],N=function(e){for(var t=H.length;t--;)if(H[t].hash==e)return t;return-1},q=\"scroll.\"+t.namespace,L={filter:u,stop:_,delay:250,selected:function(t,n){e(n.selected).trigger(r)},unselected:function(t,n){e(n.unselected).trigger(o)}},$=function(){var n=function(){var o,s,l,d=[],c=!1,u=[],h={},f=H._last||et.find(\"[id]:last\"),m=!f.length,g=H._place||(a?et.children(\"table\").children(\"tbody\"):et);if(m&&(tt._top=0),tt._mousedown&&tt._top!=tt.scrollTop())return tt._top=tt.scrollTop(),setTimeout(function(){n()},50),void 0;if(delete H._timer,!H.length)return nt.hide(),tt.off(q);for(;(!f.length||(o=f.position().top-(tt.height()+tt.scrollTop()+t.options.showThreshold))<=0)&&(s=H.splice(0,t.options.showFiles-(o||0)/(H._hpi||1))).length&&(l=[],d=e.map(s,function(e){return e.hash&&e.name?(\"directory\"==e.mime&&(c=!0),e.tmb&&(1===e.tmb?u.push(e.hash):h[e.hash]=e.tmb),k[e.hash]&&l.push(e.hash),A(e)):null}),(m||!H.length)&&nt.hide(),g.append(d.join(\"\")),l.length&&t.trigger(\"lockfiles\",{files:l}),f=et.find(\"[id]:last\"),m&&tt.scrollTop(0),(m||!H._hpi)&&Q(g,s.length),!m););H._last=f,B(h),u.length&&K(u),c&&!i&&W(),U.length&&g.find(\"[id]:not(.\"+p+\"):not(.elfinder-cwd-parent)\").each(function(){var n=t.cwdId2Hash(this.id);-1!==e.inArray(n,U)&&e(this).trigger(r)})};H._timer&&clearTimeout(H._timer),!H._timer&&n(),H._timer=setTimeout(function(){n()},100)},V=e.extend({},t.droppable,{over:function(n,i){var a,r,o,s=e(this),l=i.helper,c=n.shiftKey||n.ctrlKey||n.metaKey;return n.stopPropagation(),l.data(\"dropover\",l.data(\"dropover\")+1),s.data(\"dropover\",!0),l.data(\"namespace\")!==t.namespace?(s.removeClass(v),!1):(s.hasClass(t.res(d,\"cwdfile\"))?(a=t.cwdId2Hash(s.attr(\"id\")),s.data(\"dropover\",a)):(a=t.cwd().hash,t.cwd().write&&s.data(\"dropover\",a)),o=t.file(l.data(\"files\")[0]).phash===a,s.data(\"dropover\")===a?e.each(l.data(\"files\"),function(e,t){return t===a||o&&!c&&!l.hasClass(\"elfinder-drag-helper-plus\")?(s.removeClass(v),!1):void 0}):s.removeClass(v),l.data(\"locked\")||o?r=\"elfinder-drag-helper-plus\":(r=\"elfinder-drag-helper-move\",c&&(r+=\" elfinder-drag-helper-plus\")),s.hasClass(v)&&l.addClass(r),setTimeout(function(){s.hasClass(v)&&l.addClass(r)},20),void 0)},out:function(t,n){var i=n.helper;t.stopPropagation(),i.removeClass(\"elfinder-drag-helper-move elfinder-drag-helper-plus\").data(\"dropover\",Math.max(i.data(\"dropover\")-1,0)),e(this).removeData(\"dropover\").removeClass(v)\n },deactivate:function(){e(this).removeData(\"dropover\").removeClass(v)}}),W=function(){var e=et.find(\".directory:not(.\"+m+\",.elfinder-na,.elfinder-ro)\");t.isCommandEnabled(\"paste\")&&e.droppable(V),t.isCommandEnabled(\"upload\")&&e.addClass(\"native-droppable\")},B=function(n){var i,a=t.option(\"tmbUrl\"),r=!0;return e.each(n,function(n,o){var s=e(\"#\"+t.cwdHash2Id(n));s.length?function(t,n){e(\"<img/>\").load(function(){t.find(\".elfinder-cwd-icon\").css(\"background\",\"url('\"+n+\"') center center no-repeat\")}).attr(\"src\",n)}(s,t.searchStatus.state?t.tmb(n):a+o):(r=!1,-1!=(i=N(n))&&(H[i].tmb=o))}),r},K=function(e){var n=[];return t.oldAPI?(t.request({data:{cmd:\"tmb\",current:t.cwd().hash},preventFail:!0}).done(function(e){B(e.images||[])&&e.tmb&&K()}),void 0):(n=n=e.splice(0,y),n.length&&t.request({data:{cmd:\"tmb\",targets:n},preventFail:!0}).done(function(t){B(t.images||[])&&K(e)}),void 0)},J=function(n){var r,o,s,l,d=a?et.find(\"tbody\"):et,c=n.length,u=[],p={},h=!1,f=function(e){for(var n,i=et.find(\"[id]:first\");i.length;){if(n=t.file(t.cwdId2Hash(i.attr(\"id\"))),!i.hasClass(\"elfinder-cwd-parent\")&&n&&t.compare(e,n)<0)return i;i=i.next(\"[id]\")}},m=function(e){var n,i=H.length;for(n=0;i>n;n++)if(t.compare(e,H[n])<0)return n;return i||-1};for(c&&tt.removeClass(\"elfinder-cwd-wrapper-empty\");c--;)r=n[c],o=r.hash,e(\"#\"+t.cwdHash2Id(o)).length||((s=f(r))&&s.length?s.before(A(r)):(l=m(r))>=0?H.splice(l,0,r):d.append(A(r)),e(\"#\"+t.cwdHash2Id(o)).length&&(\"directory\"==r.mime?h=!0:r.tmb&&(1===r.tmb?u.push(o):p[o]=r.tmb)));Q(d),B(p),u.length&&K(u),h&&!i&&W()},G=function(n){var i,a,r,o=n.length;if(!t.cwd().hash&&\"open\"!==t.currentReqCmd)return e.each(C.reverse(),function(e,n){return t.files()[n]?(t.one(t.currentReqCmd,function(e,t){!t.cwd().hash&&t.exec(\"open\",n)}),!1):void 0}),void 0;for(;o--;)if(i=n[o],(a=e(\"#\"+t.cwdHash2Id(i))).length)try{a.remove()}catch(s){t.debug(\"error\",s)}else-1!=(r=N(i))&&H.splice(r,1);et.children().length<1&&(tt.addClass(\"elfinder-cwd-wrapper-empty\"),et.hide(),setTimeout(function(){et.show()},0))},X={name:t.i18n(\"name\"),perm:t.i18n(\"perms\"),date:t.i18n(\"modify\"),size:t.i18n(\"size\"),kind:t.i18n(\"kind\"),modestr:t.i18n(\"mode\"),modeoct:t.i18n(\"mode\"),modeboth:t.i18n(\"mode\")},Y=function(){for(var n=\"\",i=\"\",a=t.options.uiOptions.cwd.listView.columns,r=e.extend({},X,t.options.uiOptions.cwd.listView.columnsCustomName),o=0;o<a.length;o++)n=\"undefined\"!=typeof r[a[o]]?r[a[o]]:t.i18n(a[o]),i+='<td class=\"elfinder-cwd-view-th-'+a[o]+'\">'+n+\"</td>\";return i},Q=function(e,t){var n;e=e||(a?et.find(\"tbody\"):et),H.length>0&&(e.css({height:\"auto\"}),n=e.height(),t&&(H._hpi=n/t),nt.css({top:H._hpi*H.length+n+\"px\"}).show())},Z=function(i,r){var o=t.cwd().hash;C=t.parents(o),j();try{et.empty()}catch(s){et.html(\"\")}if(et.removeClass(\"elfinder-cwd-view-icons elfinder-cwd-view-list\").addClass(\"elfinder-cwd-view-\"+(a?\"list\":\"icons\")),et.css(\"height\",\"auto\"),nt.hide(),tt[a?\"addClass\":\"removeClass\"](\"elfinder-cwd-wrapper-list\")._padding=parseInt(tt.css(\"padding-top\"))+parseInt(tt.css(\"padding-bottom\")),t.UA.iOS&&tt.removeClass(\"overflow-scrolling-touch\").addClass(\"overflow-scrolling-touch\"),a&&et.html('<table><thead><tr class=\"ui-state-default'+(t.UA.Touch?\" elfinder-touch\":\"\")+'\"><td class=\"elfinder-cwd-view-th-name\">'+X.name+\"</td>\"+Y()+\"</tr></thead><tbody/></table>\"),H=e.map(i,function(e){return r||e.phash==o?e:null}),H=t.sortFiles(H),tt[!r&&H.length<1?\"addClass\":\"removeClass\"](\"elfinder-cwd-wrapper-empty\").on(q,$).trigger(q),o=t.cwd().phash,n.oldSchool&&o&&!w){var l=e.extend(!0,{},t.file(o),{name:\"..\",mime:\"directory\"});l=e(A(l)).addClass(\"elfinder-cwd-parent\").bind(\"mousedown click mouseup touchstart touchmove touchend dblclick mouseenter\",function(e){e.preventDefault(),e.stopPropagation()}).dblclick(function(){t.exec(\"open\",t.cwdId2Hash(this.id))}),(a?et.find(\"tbody\"):et).prepend(l)}r||!t.cwd().write?tt.removeClass(\"native-droppable\").droppable(\"disable\"):(tt[t.isCommandEnabled(\"upload\")?\"addClass\":\"removeClass\"](\"native-droppable\"),tt.droppable(\"enable\"))},et=e(this).addClass(\"ui-helper-clearfix elfinder-cwd\").attr(\"unselectable\",\"on\").on(\"click.\"+t.namespace,u,function(n){var i,a,s,l,d,c=this.id?e(this):e(this).parents(\"[id]:first\");if(et.data(\"longtap\"))return n.stopPropagation(),void 0;if(n.stopImmediatePropagation(),n.shiftKey&&(i=c.prevAll(\".\"+p+\":first\"),a=c.nextAll(\".\"+p+\":first\"),s=i.length,l=a.length),n.shiftKey&&(s||l))d=s?c.prevUntil(\"#\"+i.attr(\"id\")):c.nextUntil(\"#\"+a.attr(\"id\")),d.add(c).trigger(r);else if(n.ctrlKey||n.metaKey)c.trigger(c.hasClass(p)?o:r);else{if(c.data(\"touching\")&&c.hasClass(p))return c.data(\"touching\",null),t.dblclick({file:t.cwdId2Hash(this.id)}),void 0;j(),c.trigger(r)}_()}).on(\"dblclick.\"+t.namespace,u,function(){t.dblclick({file:t.cwdId2Hash(this.id)})}).on(\"touchstart.\"+t.namespace,u,function(n){if(n.stopPropagation(),\"INPUT\"!=n.target.nodeName&&\"TEXTAREA\"!=n.target.nodeName){var i=this.id?e(this):e(this).parents(\"[id]:first\"),a=i.prevAll(\".\"+p+\":first\").length+i.nextAll(\".\"+p+\":first\").length;et.data(\"longtap\",null),i.addClass(g).data(\"touching\",!0).data(\"tmlongtap\",setTimeout(function(){et.data(\"longtap\",!0),i.hasClass(p)&&a>0?(i.trigger(o),_()):(\"TD\"!=n.target.nodeName||t.selected().length>0)&&(i.trigger(r),_(),t.trigger(\"contextmenu\",{type:\"files\",targets:t.selected(),x:n.originalEvent.touches[0].pageX,y:n.originalEvent.touches[0].pageY}))},500))}}).on(\"touchmove.\"+t.namespace+\" touchend.\"+t.namespace,u,function(n){if(n.stopPropagation(),\"INPUT\"!=n.target.nodeName&&\"TEXTAREA\"!=n.target.nodeName){var i=this.id?e(this):e(this).parents(\"[id]:first\");clearTimeout(i.data(\"tmlongtap\")),\"touchmove\"==n.type?(i.data(\"touching\",null),i.removeClass(g)):i.data(\"touching\")&&!et.data(\"longtap\")&&i.hasClass(p)&&(n.preventDefault(),i.data(\"touching\",null),t.dblclick({file:t.cwdId2Hash(this.id)}))}}).on(\"mouseenter.\"+t.namespace,u,function(){var n=e(this),o=null,s=a?n:n.children(\"div.elfinder-cwd-file-wrapper,div.elfinder-cwd-filename\");i||n.hasClass(b)||s.hasClass(f+\" \"+h)||s.on(\"mousedown\",function(n){n.shiftKey&&!t.UA.IE&&et.data(\"selectable\")&&(et.selectable(\"destroy\").data(\"selectable\",!1),setTimeout(function(){et.selectable(L).data(\"selectable\",!0)},10)),s.draggable(\"option\",\"disabled\",n.shiftKey),n.shiftKey?s.attr(\"draggable\",\"true\"):s.attr(\"draggable\",\"false\").draggable(\"option\",\"cursorAt\",{left:50-parseInt(e(n.currentTarget).css(\"margin-left\")),top:47})}).on(\"dragstart\",function(n){var i=n.dataTransfer||n.originalEvent.dataTransfer||null;if(o=null,i&&!t.UA.IE){var a,s=this.id?e(this):e(this).parents(\"[id]:first\"),l=e(\"<span>\"),d=\"\",c=null,u=null,p=[],h=function(n){var i,a=n.mime;return i='<div class=\"elfinder-cwd-icon '+t.mime2class(a)+' ui-corner-all\"/>',n.tmb&&1!==n.tmb&&(i=e(i).css(\"background\",\"url('\"+t.option(\"tmbUrl\")+n.tmb+\"') center center no-repeat\").get(0).outerHTML),i},f=[];if(s.trigger(r),_(),e.each(U,function(n,i){var a=t.file(i),r=a.url;if(a&&\"directory\"!==a.mime){if(r){if(\"1\"==r)return f.push(i),!0}else r=t.url(a.hash);r&&(r=t.convAbsUrl(r),p.push(i),e(\"<a>\").attr(\"href\",r).text(r).appendTo(l),d+=r+\"\\n\",c||(c=a.mime+\":\"+a.name+\":\"+r),u||(u=r+\"\\n\"+a.name))}}),f.length)return e.each(f,function(e,n){var i=t.file(n);i.url=\"\",t.request({data:{cmd:\"url\",target:n},notify:{type:\"url\",cnt:1},preventDefault:!0}).always(function(e){i.url=e.url?e.url:\"1\"})}),!1;if(!d)return!1;i.setDragImage&&(o=e('<div class=\"elfinder-drag-helper html5-native\"></div>').append(h(t.file(p[0]))).appendTo(e(document.body)),(a=p.length)>1&&o.append(h(t.file(p[a-1]))+'<span class=\"elfinder-drag-num\">'+a+\"</span>\"),i.setDragImage(o.get(0),50,47)),i.effectAllowed=\"copyLink\",i.setData(\"DownloadURL\",c),i.setData(\"text/x-moz-url\",u),i.setData(\"text/uri-list\",d),i.setData(\"text/plain\",d),i.setData(\"text/html\",l.html()),i.setData(\"elfinderfrom\",window.location.href+t.cwd().hash),i.setData(\"elfinderfrom:\"+i.getData(\"elfinderfrom\"),\"\")}}).on(\"dragend\",function(){j(),o&&o.remove()}).draggable(t.draggable)}).on(r,u,function(){var n=e(this),i=t.cwdId2Hash(n.attr(\"id\"));O||n.hasClass(h)||(n.addClass(p).children().addClass(g),-1===e.inArray(i,U)&&U.push(i))}).on(o,u,function(){var n,i=e(this),a=t.cwdId2Hash(i.attr(\"id\"));O||(e(this).removeClass(p).children().removeClass(g),n=e.inArray(a,U),-1!==n&&U.splice(n,1))}).on(s,u,function(){var t=e(this).removeClass(g+\" \"+p).addClass(h),n=t.children(),i=a?t:n;n.removeClass(g+\" \"+p),t.hasClass(m)&&t.droppable(\"disable\"),i.hasClass(f)&&i.draggable(\"disable\")}).on(l,u,function(){var t=e(this).removeClass(h),n=a?t:t.children();t.hasClass(m)&&t.droppable(\"enable\"),n.hasClass(f)&&n.draggable(\"enable\")}).on(\"scrolltoview\",u,function(){R(e(this))}).on(\"mouseenter.\"+t.namespace+\" mouseleave.\"+t.namespace,u,function(n){t.trigger(\"hover\",{hash:t.cwdId2Hash(e(this).attr(\"id\")),type:n.type}),e(this).toggleClass(g,\"mouseenter\"==n.type)}).on(\"contextmenu.\"+t.namespace,function(n){var i=e(n.target).closest(\".\"+c);i.length&&(\"TD\"!=n.target.nodeName||e.inArray(t.cwdId2Hash(i.get(0).id),t.selected())>-1)&&(n.stopPropagation(),n.preventDefault(),i.hasClass(h)||i.data(\"touching\")||(i.hasClass(p)||(j(),i.trigger(r),_()),t.trigger(\"contextmenu\",{type:\"files\",targets:t.selected(),x:n.pageX,y:n.pageY})))}).on(\"click.\"+t.namespace,function(e){return et.data(\"longtap\")?(e.stopPropagation(),void 0):(!e.shiftKey&&!e.ctrlKey&&!e.metaKey&&j(),void 0)}).on(\"create.\"+t.namespace,function(n,i){var r=a?et.find(\"tbody\"):et,o=r.find(\".elfinder-cwd-parent\"),i=e(A(i)).addClass(b),s=t.selected();s.length?t.trigger(\"lockfiles\",{files:s}):j(),o.length?o.after(i):r.prepend(i),et.parent().scrollTop(0)}).on(\"unselectall\",j).on(\"selectfile\",function(n,i){e(\"#\"+t.cwdHash2Id(i)).trigger(r),_()}),tt=e('<div class=\"elfinder-cwd-wrapper\"/>').droppable(e.extend({},V,{autoDisable:!1})).on(\"contextmenu\",function(e){e.preventDefault(),t.trigger(\"contextmenu\",{type:\"cwd\",targets:[t.cwd().hash],x:e.pageX,y:e.pageY})}).on(\"touchstart.\"+t.namespace,function(n){var i=e(this);et.data(\"longtap\",null),i.data(\"touching\",!0),i.data(\"tmlongtap\",setTimeout(function(){et.data(\"longtap\",!0),t.trigger(\"contextmenu\",{type:\"cwd\",targets:[t.cwd().hash],x:n.originalEvent.touches[0].pageX,y:n.originalEvent.touches[0].pageY})},500))}).on(\"touchmove.\"+t.namespace+\" touchend.\"+t.namespace,function(){clearTimeout(e(this).data(\"tmlongtap\"))}).on(\"mousedown\",function(){tt._mousedown=!0}).on(\"mouseup\",function(){tt._mousedown=!1}),nt=e(\"<div>&nbsp;</div>\").css({position:\"absolute\",width:\"1px\",height:\"1px\"}).hide(),it=null,at=function(t){var n=function(){var t=0;tt.siblings(\"div.elfinder-panel:visible\").each(function(){t+=e(this).outerHeight(!0)}),tt.height(ot.height()-t-tt._padding)};t&&n(),it&&clearTimeout(it),it=setTimeout(function(){!t&&n();var e,i;et.css(\"height\",\"auto\"),e=tt[0].clientHeight-parseInt(tt.css(\"padding-top\"))-parseInt(tt.css(\"padding-bottom\")),i=et.outerHeight(!0),e>i&&et.height(e)},20)},rt=e(this).parent().resize(at),ot=rt.children(\".elfinder-workzone\").append(tt.append(this).append(nt));i?e(\"body\").on(\"touchstart touchmove touchend\",function(){}):et.selectable(L).data(\"selectable\",!0),t.one(\"init\",function(){var e,n=document.createElement(\"style\");document.head.appendChild(n),e=n.sheet,e.insertRule('.elfinder-cwd-wrapper-empty .elfinder-cwd:after{ content:\"'+t.i18n(\"emptyFolder\")+'\" }',0),e.insertRule('.ui-droppable.elfinder-cwd-wrapper-empty .elfinder-cwd:after{ content:\"'+t.i18n(\"emptyFolder\"+(i?\"LTap\":\"Drop\"))+'\" }',1),e.insertRule('.ui-droppable.elfinder-cwd-wrapper-empty.ui-droppable-disabled .elfinder-cwd:after{ content:\"'+t.i18n(\"emptyFolder\")+'\" }',2)}).bind(\"open\",function(e){Z(e.data.files),at()}).bind(\"search\",function(e){x=e.data.files,Z(x,!0),tt.addClass(\"elfinder-search-result\"),t.autoSync(\"stop\"),at()}).bind(\"searchend\",function(e){x=[],w&&(w=\"\",e.data&&e.data.noupdate||Z(t.files())),tt.removeClass(\"elfinder-search-result\"),t.autoSync(),at()}).bind(\"searchstart\",function(e){w=e.data.query}).bind(\"sortchange\",function(){Z(w?x:t.files(),!!w),at()}).bind(\"viewchange\",function(){var n=t.selected(),i=\"list\"==t.storage(\"view\");i!=a&&(a=i,Z(w?x:t.files(),!!w),e.each(n,function(e,t){z(t)}),_()),at()}).bind(\"resize\",function(){var e=a?et.find(\"tbody\"):et;at(!0),Q(e,e.find(\"[id]\").length)}).bind(\"add\",function(){at()}).bind(\"changeclipboard\",function(t){k={},t.data&&t.data.clipboard&&t.data.clipboard.length&&e.each(t.data.clipboard,function(e,t){t.cut&&(k[t.hash]=!0)})}).add(function(n){var i=t.cwd().hash,a=w?e.map(n.data.added||[],function(e){return-1===e.name.indexOf(w)?null:e}):e.map(n.data.added||[],function(e){return e.phash==i?e:null});J(a)}).change(function(n){var i=t.cwd().hash,a=t.selected();w?e.each(n.data.changed||[],function(t,n){G([n.hash]),-1!==n.name.indexOf(w)&&(J([n]),-1!==e.inArray(n.hash,a)&&z(n.hash))}):e.each(e.map(n.data.changed||[],function(e){return e.phash==i?e:null}),function(t,n){G([n.hash]),J([n]),-1!==e.inArray(n.hash,a)&&z(n.hash)}),_()}).remove(function(e){G(e.data.removed||[]),_()}).dragstart(function(t){var n=e(t.data.target),i=t.data.originalEvent;n.hasClass(u.substr(1))&&(n.hasClass(p)||(!(i.ctrlKey||i.metaKey||i.shiftKey)&&j(),n.trigger(r),_())),et.selectable(\"disable\").removeClass(h),O=!0}).dragstop(function(){et.selectable(\"enable\"),O=!1}).bind(\"lockfiles unlockfiles selectfiles unselectfiles\",function(n){var i,a,d={lockfiles:s,unlockfiles:l,selectfiles:r,unselectfiles:o},c=d[n.type],u=n.data.files||[],p=u.length,h=n.data.helper||e();if(p>0&&(i=t.parents(u[0])),!h.data(\"locked\")){for(;p--;)e(\"#\"+t.cwdHash2Id(u[p])).trigger(c);_()}tt.data(\"dropover\")&&-1!==i.indexOf(tt.data(\"dropover\"))&&(a=\"lockfiles\"!==n.type,h.toggleClass(\"elfinder-drag-helper-plus\",a),tt.toggleClass(v,a))}).bind(\"mkdir mkfile duplicate upload rename archive extract paste multiupload\",function(n){if(\"upload\"!=n.type||!n.data._multiupload){var i=t.cwd().hash;j(),e.each(n.data.added||[],function(e,t){t&&t.phash==i&&z(t.hash)}),_()}}).shortcut({pattern:\"ctrl+a\",description:\"selectall\",callback:E}).shortcut({pattern:\"left right up down shift+left shift+right shift+up shift+down\",description:\"selectfiles\",type:\"keydown\",callback:function(e){D(e.keyCode,e.shiftKey)}}).shortcut({pattern:\"home\",description:\"selectffile\",callback:function(){j(),R(et.find(\"[id]:first\").trigger(r)),_()}}).shortcut({pattern:\"end\",description:\"selectlfile\",callback:function(){j(),R(et.find(\"[id]:last\").trigger(r)),_()}})}),this},e.fn.elfinderdialog=function(t){var n;return\"string\"==typeof t&&(n=this.closest(\".ui-dialog\")).length&&(\"open\"==t?\"none\"==n.css(\"display\")&&n.fadeIn(120,function(){n.trigger(\"open\")}):\"close\"==t?\"none\"!=n.css(\"display\")&&n.hide().trigger(\"close\"):\"destroy\"==t?n.hide().remove():\"toTop\"==t?n.trigger(\"totop\"):\"posInit\"==t&&n.trigger(\"posinit\")),t=e.extend({},e.fn.elfinderdialog.defaults,t),this.filter(\":not(.ui-dialog-content)\").each(function(){var n=e(this).addClass(\"ui-dialog-content ui-widget-content\"),i=n.parent(),a=\"elfinder-dialog-active\",r=\"elfinder-dialog\",o=\"elfinder-dialog-notify\",s=\"ui-state-hover\",l=parseInt(1e6*Math.random()),d=i.children(\".elfinder-overlay\"),c=e('<div class=\"ui-dialog-buttonset\"/>'),u=e('<div class=\" ui-helper-clearfix ui-dialog-buttonpane ui-widget-content\"/>').append(c),p=0,h=-1!=window.navigator.platform.indexOf(\"Win\"),f=e('<div class=\"ui-front ui-dialog ui-widget ui-widget-content ui-corner-all ui-draggable std42-dialog  '+r+\" \"+t.cssClass+'\"/>').hide().append(n).appendTo(i).draggable({handle:\".ui-dialog-titlebar\",containment:\"document\",stop:function(){f.css({height:t.height})}}).css({width:t.width,height:t.height}).mousedown(function(){setTimeout(function(){f.trigger(\"totop\")},10)}).on(\"open\",function(){var a=e(this),s=a.outerWidth()>i.width()-10?i.width()-10:null;s&&a.css({width:s,left:\"5px\"}),f.hasClass(o)||i.find(\".\"+r+\":visible\").not(\".\"+o).each(function(){var t=e(this),n=parseInt(t.css(\"top\")),i=parseInt(t.css(\"left\")),a=parseInt(f.css(\"top\")),r=parseInt(f.css(\"left\"));t[0]==f[0]||n!=a&&i!=r||f.css({top:n+(s?15:10)+\"px\",left:(s?5:i+10)+\"px\"})}),f.trigger(\"totop\"),\"function\"==typeof t.open&&e.proxy(t.open,n[0])()}).on(\"close\",function(){var a=i.find(\".elfinder-dialog:visible\");e(this).data(\"modal\")&&d.elfinderoverlay(\"hide\"),a.length?a.find(\":last\").trigger(\"totop\"):setTimeout(function(){i.mousedown().click()},10),\"function\"==typeof t.close?e.proxy(t.close,n[0])():t.destroyOnClose&&f.hide().remove()}).on(\"totop\",function(){var t=e(this);i.find(\".\"+r+\":visible\").removeClass(a+\" ui-front\"),f.addClass(a+\" ui-front\"),t.find(\"input,textarea\").length||t.find(\".ui-button:\"+(h?\"first\":\"last\")).focus().end().find(\":text:first\").focus(),t.data(\"modal\")&&d.is(\":hidden\")&&d.elfinderoverlay(\"show\")}).on(\"posinit\",function(){var e=t.position;e||(e={top:Math.max(0,parseInt((i.height()-f.outerHeight())/2-42))+\"px\",left:Math.max(0,parseInt((i.width()-f.outerWidth())/2))+\"px\"}),f.css(e)}).data({modal:t.modal});f.trigger(\"posinit\"),t.closeOnEscape&&e(document).on(\"keyup.\"+l,function(t){t.keyCode==e.ui.keyCode.ESCAPE&&f.hasClass(a)&&(n.elfinderdialog(\"close\"),e(document).off(\"keyup.\"+l))}),f.prepend(e('<div class=\"ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix\">'+t.title+\"</div>\").prepend(e('<a href=\"#\" class=\"ui-dialog-titlebar-close ui-corner-all\"><span class=\"ui-icon ui-icon-closethick\"/></a>').mousedown(function(e){e.preventDefault(),n.elfinderdialog(\"close\")}))),e.each(t.buttons,function(i,a){var r=e('<button type=\"button\" class=\"ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only\"><span class=\"ui-button-text\">'+i+\"</span></button>\").click(e.proxy(a,n[0])).hover(function(n){t.btnHoverFocus?e(this)[\"mouseenter\"==n.type?\"focus\":\"blur\"]():e(this).toggleClass(s,\"mouseenter\"==n.type)}).focus(function(){e(this).addClass(s)}).blur(function(){e(this).removeClass(s)}).keydown(function(t){var n;t.stopPropagation(),t.keyCode==e.ui.keyCode.ENTER?(t.preventDefault(),e(this).click()):t.keyCode==e.ui.keyCode.TAB||t.keyCode==e.ui.keyCode.RIGHT?(t.preventDefault(),n=e(this).next(\".ui-button\"),n.length?n.focus():e(this).parent().children(\".ui-button:first\").focus()):t.keyCode==e.ui.keyCode.LEFT&&(t.preventDefault(),n=e(this).prev(\".ui-button\"),n.length?n.focus():e(this).parent().children(\".ui-button:last\").focus())});h?c.append(r):c.prepend(r)}),c.children().length&&(f.append(u),f.show(),u.find(\"button\").each(function(t,n){p+=e(n).outerWidth(!0)}),f.hide(),p+=20,f.width()<p&&f.width(p)),t.resizable&&e.fn.resizable&&f.resizable({minWidth:t.minWidth,minHeight:t.minHeight,alsoResize:this}),\"function\"==typeof t.create&&e.proxy(t.create,this)(),t.autoOpen&&n.elfinderdialog(\"open\")}),this},e.fn.elfinderdialog.defaults={cssClass:\"\",title:\"\",modal:!1,resizable:!0,autoOpen:!0,closeOnEscape:!0,destroyOnClose:!1,buttons:{},btnHoverFocus:!0,position:null,width:320,height:\"auto\",minWidth:200,minHeight:110},e.fn.elfindermkdirbutton=function(t){return this.each(function(){var n=e(this).elfinderbutton(t);t.change(function(){n.attr(\"title\",t.value)})})},e.fn.elfindernavbar=function(t,n){return this.not(\".elfinder-navbar\").each(function(){var i,a=e(this).addClass(\"ui-state-default elfinder-navbar\"),r=a.parent().resize(function(){a.height(o.height()-s)}),o=r.children(\".elfinder-workzone\").append(a),s=a.outerHeight()-a.height(),l=\"ltr\"==t.direction;if(e.fn.resizable){if(i=a.resizable({handles:l?\"e\":\"w\",minWidth:n.minWidth||150,maxWidth:n.maxWidth||500}).on(\"resize scroll\",function(){clearTimeout(e(this).data(\"posinit\")),e(this).data(\"posinit\",setTimeout(function(){var e=t.UA.Opera&&a.scrollLeft()?20:2;i.css({top:parseInt(a.scrollTop())+\"px\",left:l?\"auto\":parseInt(a.scrollLeft()+e),right:l?-1*parseInt(a.scrollLeft()-e):\"auto\"})},50))}).find(\".ui-resizable-handle\").addClass(\"ui-front\"),t.UA.Touch){var d=function(){i.data(\"closed\")?(i.data(\"closed\",!1).css({backgroundColor:\"transparent\"}),a.css({width:i.data(\"width\")}).trigger(\"resize\")):(i.data(\"closed\",!0).css({backgroundColor:\"inherit\"}),a.css({width:8})),i.data({startX:null,endX:null})};i.data({closed:!1,width:a.width()}).on(\"touchstart\",function(e){i.data(\"startX\",e.originalEvent.touches[0].pageX)}).on(\"touchmove\",function(e){var t=e.originalEvent.touches[0].pageX,n=i.data(\"startX\"),a=l?n&&t>n:n>t,r=l?n>t:n&&t>n;(a||r)&&d()}).on(\"touchend\",function(){i.data(\"startX\")&&d()}),t.UA.Mobile&&(i.data(\"defWidth\",a.width()),e(window).on(\"resize\",function(){var e=a.parent().width()/2;i.data(\"defWidth\")>e?a.width(e):a.width(i.data(\"defWidth\")),i.data(\"width\",a.width())}))}t.one(\"open\",function(){setTimeout(function(){a.trigger(\"resize\")},150)})}}),this},e.fn.elfinderoverlay=function(t){if(this.filter(\":not(.elfinder-overlay)\").each(function(){t=e.extend({},t),e(this).addClass(\"ui-front ui-widget-overlay elfinder-overlay\").hide().mousedown(function(e){e.preventDefault(),e.stopPropagation()}).data({cnt:0,show:\"function\"==typeof t.show?t.show:function(){},hide:\"function\"==typeof t.hide?t.hide:function(){}})}),\"show\"==t){var n=this.eq(0),i=n.data(\"cnt\")+1,a=n.data(\"show\");n.data(\"cnt\",i),n.is(\":hidden\")&&(n.show(),a())}if(\"hide\"==t){var n=this.eq(0),i=n.data(\"cnt\")-1,r=n.data(\"hide\");n.data(\"cnt\",i),0==i&&n.is(\":visible\")&&(n.hide(),r())}return this},e.fn.elfinderpanel=function(t){return this.each(function(){var n=e(this).addClass(\"elfinder-panel ui-state-default ui-corner-all\"),i=\"margin-\"+(\"ltr\"==t.direction?\"left\":\"right\");t.one(\"load\",function(){var e=t.getUI(\"navbar\");n.css(i,parseInt(e.outerWidth(!0))),e.on(\"resize\",function(){n.is(\":visible\")&&n.css(i,parseInt(e.outerWidth(!0)))})})})},e.fn.elfinderpath=function(t){return this.each(function(){var n=\"\",i=\"\",a=[],r=e(this).addClass(\"elfinder-path\").html(\"&nbsp;\").on(\"click\",\"a\",function(i){var r=e(this).attr(\"href\").substr(5);i.preventDefault(),r!=t.cwd().hash&&(n?t.exec(\"search\",n,{target:r,mime:a.join(\" \")}):t.exec(\"open\",r))}).prependTo(t.getUI(\"statusbar\").show());t.bind(\"open searchend parents\",function(){var o=[];n=\"\",i=\"\",a=[],e.each(t.parents(t.cwd().hash),function(e,n){o.push('<a href=\"#elf_'+n+'\">'+t.escape(t.file(n).name)+\"</a>\")}),r.html(o.join(t.option(\"separator\")))}).bind(\"searchstart\",function(e){e.data&&(n=e.data.query||\"\",i=e.data.target||\"\",a=e.data.mimes||[])}).bind(\"search\",function(){var n=[],a=\"\";i?(e.each(t.parents(i),function(e,i){n.push('<a href=\"#elf_'+i+'\">'+t.escape(t.file(i).name)+\"</a>\")}),a=n.join(t.option(\"separator\"))):a=t.i18n(\"btnAll\"),r.html(t.i18n(\"searcresult\")+\": \"+a)})})},e.fn.elfinderplaces=function(t,n){return this.each(function(){var i={},a=\"class\",r=t.res(a,\"navdir\"),o=t.res(a,\"navcollapse\"),s=t.res(a,\"navexpand\"),l=t.res(a,\"hover\"),d=t.res(a,\"treeroot\"),c=t.res(a,\"adroppable\"),u=t.res(\"tpl\",\"placedir\"),p=t.res(\"tpl\",\"perms\"),h=e(t.res(\"tpl\",\"navspinner\")),f=\"places\"+(n.suffix?n.suffix:\"\"),m=null,g=function(e){return e.substr(6)},v=function(e){return\"place-\"+e},b=function(){var n=[],a=[];n=e.map(S.children().find(\"[id]\"),function(e){return g(e.id)}),e.each(n.reverse(),function(e,t){a.push(t+\"#\"+i[t].name)}),t.storage(f,a.join(\",\"))},y=function(n,i){return e(u.replace(/\\{id\\}/,v(n?n.hash:i)).replace(/\\{name\\}/,t.escape(n?n.name:i)).replace(/\\{cssclass\\}/,n?(t.UA.Touch?\"elfinder-touch \":\"\")+t.perms2class(n):\"\").replace(/\\{permissions\\}/,!n||n.read&&n.write?\"\":p).replace(/\\{title\\}/,n&&n.path?t.escape(n.path):\"\").replace(/\\{symlink\\}/,\"\").replace(/\\{style\\}/,\"\"))},w=function(e){var n,a;return\"directory\"!==e.mime?!1:(a=e.hash,t.files().hasOwnProperty(a)||t.trigger(\"tree\",{tree:[e]}),n=y(e,a),e.notfound&&n.addClass(\"ui-state-disabled\"),i[a]=e,S.prepend(n),F.addClass(o),!0)},x=function(t){var n,a=null;return i[t]&&(delete i[t],n=e(\"#\"+v(t)),n.length&&(a=n.text(),n.parent().remove(),S.children().length||(F.removeClass(o),M.removeClass(s),S.slideToggle(!1)))),a},k=function(n){var i=e(\"#\"+v(n)),a=i.parent(),r=a.prev(\"div\"),o=\"ui-state-hover\",s=t.getUI(\"contextmenu\");m&&clearTimeout(m),r.length&&(s.find(\":first\").data(\"placesHash\",n),i.addClass(o),a.insertBefore(r),r=a.prev(\"div\"),m=setTimeout(function(){i.removeClass(o),s.find(\":first\").data(\"placesHash\")===n&&s.hide().empty()},1500)),r.length||(i.removeClass(o),s.hide().empty())},C=function(t,n){var a=t.hash,r=e(\"#\"+v(n||a)),o=y(t,a);return r.length>0?(t.notfound&&o.addClass(\"ui-state-disabled\"),r.parent().replaceWith(o),i[a]=t,!0):!1},T=function(){e.each(i,function(n,i){var a=t.file(n)||i,o=y(a,n),s=null;return a||o.hide(),S.children().length&&(e.each(S.children(),function(){var t=e(this);return a.name.localeCompare(t.children(\".\"+r).text())<0?s=!o.insertBefore(t):void 0}),null!==s)?!0:(!e(\"#\"+v(n)).length&&S.append(o),void 0)}),b()},I=y({hash:\"root-\"+t.namespace,name:t.i18n(n.name,\"places\"),read:!0,write:!0}),F=I.children(\".\"+r).addClass(d).click(function(e){e.stopPropagation(),F.hasClass(o)&&(M.toggleClass(s),S.slideToggle(),t.storage(\"placesState\",M.hasClass(s)?1:0))}).append(e('<span class=\"elfinder-button-icon elfinder-button-icon-sort elfinder-places-root-icon\" title=\"'+t.i18n(\"cmdsort\")+'\"/>').on(\"click\",function(e){e.stopPropagation(),S.empty(),T()})),S=I.children(\".\"+t.res(a,\"navsubtree\")).sortable({appendTo:\"body\",revert:!1,helper:function(n){var i=e(n.target).parent();return i.children().removeClass(\"ui-state-hover\"),e('<div class=\"ui-widget elfinder-place-drag elfinder-'+t.direction+'\"/>').append(e('<div class=\"elfinder-navbar\"/>').show().append(i.clone()))},stop:function(t,n){var i=e(n.item[0]),a=M.offset().top,r=M.offset().left,o=M.width(),s=M.height(),l=t.pageX,d=t.pageY;l>r&&r+o>l&&d>a&&d+s>d||(x(g(i.children(\":first\").attr(\"id\"))),b())},update:function(){b()}}),M=e(this).addClass(t.res(a,\"tree\")+\" elfinder-places ui-corner-all\").hide().append(I).appendTo(t.getUI(\"navbar\")).on(\"mouseenter mouseleave\",\".\"+r,function(t){e(this).toggleClass(\"ui-state-hover\",\"mouseenter\"==t.type)}).on(\"click\",\".\"+r,function(n){var i=e(this);return i.data(\"longtap\")?(n.stopPropagation(),void 0):(t.exec(\"open\",i.attr(\"id\").substr(6)),void 0)}).on(\"contextmenu\",\".\"+r+\":not(.\"+d+\")\",function(n){var i=e(this),a=i.attr(\"id\").substr(6);n.preventDefault(),t.trigger(\"contextmenu\",{raw:[{label:t.i18n(\"moveUp\"),icon:\"up\",remain:!0,callback:function(){k(a),b()}},\"|\",{label:t.i18n(\"rmFromPlaces\"),icon:\"rm\",callback:function(){x(a),b()}}],x:n.pageX,y:n.pageY}),i.addClass(\"ui-state-hover\"),t.getUI(\"contextmenu\").children().on(\"mouseenter\",function(){i.addClass(\"ui-state-hover\")}),t.bind(\"closecontextmenu\",function(){i.removeClass(\"ui-state-hover\")})}).droppable({tolerance:\"pointer\",accept:\".elfinder-cwd-file-wrapper,.elfinder-tree-dir,.elfinder-cwd-file\",hoverClass:t.res(\"class\",\"adroppable\"),classes:{\"ui-droppable-hover\":t.res(\"class\",\"adroppable\")},over:function(n,a){var r=a.helper,o=e.map(r.data(\"files\"),function(e){return\"directory\"!==t.file(e).mime||i[e]?null:e});n.stopPropagation(),r.data(\"dropover\",r.data(\"dropover\")+1),o.length>0?r.addClass(\"elfinder-drag-helper-plus\"):e(this).removeClass(c),t.trigger(\"unlockfiles\",{files:r.data(\"files\"),helper:r})},out:function(n,i){var a=i.helper;n.stopPropagation(),a.removeClass(\"elfinder-drag-helper-move elfinder-drag-helper-plus\").data(\"dropover\",Math.max(a.data(\"dropover\")-1,0)),e(this).removeData(\"dropover\").removeClass(c),t.trigger(\"unlockfiles\",{files:a.data(\"files\"),helper:a})},drop:function(n,a){var r=a.helper,o=!0;e.each(r.data(\"files\"),function(e,n){var a=t.file(n);a&&\"directory\"==a.mime&&!i[a.hash]?w(a):o=!1}),b(),o&&r.hide()}}).on(\"touchstart\",\".\"+r+\":not(.\"+d+\")\",function(n){var i=e(this).attr(\"id\").substr(6),a=e(this).addClass(l).data(\"longtap\",null).data(\"tmlongtap\",setTimeout(function(){a.data(\"longtap\",!0),t.trigger(\"contextmenu\",{raw:[{label:t.i18n(\"rmFromPlaces\"),icon:\"rm\",callback:function(){x(i),b()}}],x:n.originalEvent.touches[0].pageX,y:n.originalEvent.touches[0].pageY})},500))}).on(\"touchmove touchend\",\".\"+r+\":not(.\"+d+\")\",function(t){clearTimeout(e(this).data(\"tmlongtap\")),\"touchmove\"==t.type&&e(this).removeClass(l)});e(this).on(\"regist\",function(t,n){var a=!1;e.each(n,function(e,t){t&&\"directory\"==t.mime&&!i[t.hash]&&w(t)&&(a=!0)}),a&&b()}),t.one(\"load\",function(){var n,a;t.oldAPI||(M.show().parent().show(),i={},n=e.map((t.storage(f)||\"\").split(\",\"),function(e){return e||null}),e.each(n,function(e,t){var n=t.split(\"#\");i[n[0]]=n[1]?n[1]:n[0]}),t.trigger(\"placesload\",{dirs:i,storageKey:f},!0),a=Object.keys(i),a.length&&(F.prepend(h),t.request({data:{cmd:\"info\",targets:a},preventDefault:!0}).done(function(n){var a={};e.each(n.files,function(e,t){var n=t.hash;a[n]=t}),e.each(i,function(e,t){w(a[e]||{hash:e,name:t,mime:\"directory\",notfound:!0})}),t.storage(\"placesState\")>0&&F.click()}).always(function(){h.remove()})),t.change(function(t){var n=!1;e.each(t.data.changed,function(e,t){i[t.hash]&&(\"directory\"!==t.mime?x(t.hash)&&(n=!0):C(t)&&(n=!0))}),n&&b()}).bind(\"rename\",function(t){var n=!1;t.data.removed&&e.each(t.data.removed,function(e,i){t.data.added[e]&&C(t.data.added[e],i)&&(n=!0)}),n&&b()}).bind(\"rm paste\",function(t){var n=[],i=!1;t.data.removed&&e.each(t.data.removed,function(e,t){var i=x(t);i&&n.push(i)}),n.length&&(i=!0),t.data.added&&n.length&&e.each(t.data.added,function(t,i){1!==e.inArray(i.name,n)&&\"directory\"==i.mime&&w(i)}),i&&b()}).bind(\"sync\",function(){var n=Object.keys(i);n.length&&(F.prepend(h),t.request({data:{cmd:\"info\",targets:n},preventDefault:!0}).done(function(n){var a={},r=!1,o=t.cwd().hash;e.each(n.files||[],function(e,n){var i=n.hash;a[i]=n,t.files().hasOwnProperty(n.hash)||t.trigger(\"tree\",{tree:[n]})}),e.each(i,function(e,t){!t.notfound!=!!a[e]?t.phash===o||a[e]&&\"directory\"!==a[e].mime?x(e)&&(r=!0):C(a[e]||{hash:e,name:t.name,mime:\"directory\",notfound:!0})&&(r=!0):a[e]&&a[e].phash!=o&&C(a[e])}),r&&b()}).always(function(){h.remove()}))}))})})},e.fn.elfindersearchbutton=function(t){return this.each(function(){var n=!1,i=t.fm,a=function(e){return i.namespace+e},r=i.getUI(\"toolbar\"),o=i.res(\"class\",\"searchbtn\"),s=e(this).hide().addClass(\"ui-widget-content elfinder-button \"+o),l=function(){u&&u.slideUp();var r=e.trim(c.val()),o=!e(\"#\"+a(\"SearchFromAll\")).prop(\"checked\"),s=e(\"#\"+a(\"SearchMime\")).prop(\"checked\");o&&(o=e(\"#\"+a(\"SearchFromVol\")).prop(\"checked\")?i.root(i.cwd().hash):i.cwd().hash),s&&(s=r,r=\".\"),r?t.exec(r,o,s).done(function(){n=!0,c.focus()}).fail(function(){d()}):i.trigger(\"searchend\")},d=function(){u&&u.slideUp(),c.val(\"\"),n&&(n=!1,i.trigger(\"searchend\"))},c=e('<input type=\"text\" size=\"42\"/>').focus(function(){u&&u.slideDown()}).blur(function(){u&&(u.data(\"infocus\")?u.data(\"infocus\",!1):u.slideUp())}).appendTo(s).keypress(function(e){e.stopPropagation()}).keydown(function(e){e.stopPropagation(),13==e.keyCode&&l(),27==e.keyCode&&(e.preventDefault(),d())}),u=i.api<2.1?null:e('<div class=\"ui-front ui-widget ui-widget-content elfinder-button-menu ui-corner-all\"/>').append(e('<div class=\"buttonset\"/>').append(e('<input id=\"'+a(\"SearchFromCwd\")+'\" name=\"serchfrom\" type=\"radio\" checked=\"checked\"/><label for=\"'+a(\"SearchFromCwd\")+'\">'+i.i18n(\"btnCwd\")+\"</label>\"),e('<input id=\"'+a(\"SearchFromVol\")+'\" name=\"serchfrom\" type=\"radio\"/><label for=\"'+a(\"SearchFromVol\")+'\">'+i.i18n(\"btnVolume\")+\"</label>\"),e('<input id=\"'+a(\"SearchFromAll\")+'\" name=\"serchfrom\" type=\"radio\"/><label for=\"'+a(\"SearchFromAll\")+'\">'+i.i18n(\"btnAll\")+\"</label>\")),e('<div class=\"buttonset\"/>').append(e('<input id=\"'+a(\"SearchName\")+'\" name=\"serchcol\" type=\"radio\" checked=\"checked\"/><label for=\"'+a(\"SearchName\")+'\">'+i.i18n(\"btnFileName\")+\"</label>\"),e('<input id=\"'+a(\"SearchMime\")+'\" name=\"serchcol\" type=\"radio\"/><label for=\"'+a(\"SearchMime\")+'\">'+i.i18n(\"btnMime\")+\"</label>\"))).hide().css(\"overflow\",\"hidden\").appendTo(s);e('<span class=\"ui-icon ui-icon-search\" title=\"'+t.title+'\"/>').appendTo(s).click(l),e('<span class=\"ui-icon ui-icon-close\"/>').appendTo(s).click(d),e(function(){u&&(u.find(\"div.buttonset\").buttonset(),e(\"#\"+a(\"SearchFromAll\")).next(\"label\").attr(\"title\",i.i18n(\"searchTarget\",i.i18n(\"btnAll\"))),e(\"#\"+a(\"SearchMime\")).next(\"label\").attr(\"title\",i.i18n(\"searchMime\")),u.find(\"input\").on(\"mousedown\",function(){u.data(\"infocus\",!0)}).on(\"click\",function(){e.trim(c.val())&&l()}))}),r.on(\"load\",function(){var e=s.parent();if(e.length){if(r.children(\".\"+o).remove(),r.prepend(s.show()),e.remove(),i.UA.ltIE7){var t=s.children(\"ltr\"==i.direction?\".ui-icon-close\":\".ui-icon-search\");\n t.css({right:\"\",left:parseInt(s.width())-t.outerWidth(!0)})}i.resize()}}),i.select(function(){c.blur()}).bind(\"searchend\",function(){c.val(\"\")}).bind(\"open parents\",function(){var t=[],n=i.file(i.root(i.cwd().hash));n&&(e.each(i.parents(i.cwd().hash),function(e,n){t.push(i.file(n).name)}),e(\"#\"+a(\"SearchFromCwd\")).next(\"label\").attr(\"title\",i.i18n(\"searchTarget\",t.join(i.option(\"separator\")))),e(\"#\"+a(\"SearchFromVol\")).next(\"label\").attr(\"title\",i.i18n(\"searchTarget\",n.name)))}).shortcut({pattern:\"ctrl+f f3\",description:t.title,callback:function(){c.select().focus()}})})},e.fn.elfindersortbutton=function(t){return this.each(function(){var n=t.fm,i=t.name,a=\"class\",r=n.res(a,\"disabled\"),o=n.res(a,\"hover\"),s=\"elfinder-button-menu-item\",l=s+\"-selected\",d=l+\"-asc\",c=l+\"-desc\",u=e(this).addClass(\"ui-state-default elfinder-button elfinder-menubutton elfiner-button-\"+i).attr(\"title\",t.title).append('<span class=\"elfinder-button-icon elfinder-button-icon-'+i+'\"/>').hover(function(){!u.hasClass(r)&&u.toggleClass(o)}).click(function(e){u.hasClass(r)||(e.stopPropagation(),p.is(\":hidden\")&&t.fm.getUI().click(),p.slideToggle(100))}),p=e('<div class=\"ui-front ui-widget ui-widget-content elfinder-button-menu ui-corner-all\"/>').hide().appendTo(u).on(\"mouseenter mouseleave\",\".\"+s,function(){e(this).toggleClass(o)}).on(\"click\",\".\"+s,function(e){e.preventDefault(),e.stopPropagation(),f()}),h=function(){p.children(\":not(:last)\").removeClass(l+\" \"+d+\" \"+c).filter('[rel=\"'+n.sortType+'\"]').addClass(l+\" \"+(\"asc\"==n.sortOrder?d:c)),p.children(\":last\").toggleClass(l,n.sortStickFolders)},f=function(){p.hide()};e.each(n.sortRules,function(t){p.append(e('<div class=\"'+s+'\" rel=\"'+t+'\"><span class=\"ui-icon ui-icon-arrowthick-1-n\"/><span class=\"ui-icon ui-icon-arrowthick-1-s\"/>'+n.i18n(\"sort\"+t)+\"</div>\").data(\"type\",t))}),p.children().click(function(){var i=e(this).attr(\"rel\");t.exec([],{type:i,order:i==n.sortType?\"asc\"==n.sortOrder?\"desc\":\"asc\":n.sortOrder,stick:n.sortStickFolders})}),e('<div class=\"'+s+\" \"+s+'-separated\"><span class=\"ui-icon ui-icon-check\"/>'+n.i18n(\"sortFoldersFirst\")+\"</div>\").appendTo(p).click(function(){t.exec([],{type:n.sortType,order:n.sortOrder,stick:!n.sortStickFolders})}),n.bind(\"disable select\",f).getUI().click(f),n.bind(\"sortchange\",h),p.children().length>1?t.change(function(){u.toggleClass(r,t.disabled()),h()}).change():u.addClass(r)})},e.fn.elfinderstat=function(t){return this.each(function(){var n=e(this).addClass(\"elfinder-stat-size\"),i=e('<div class=\"elfinder-stat-selected\"/>').on(\"click\",\"a\",function(n){var i=e(this).data(\"hash\");n.preventDefault(),t.exec(\"opendir\",[i])}),a=t.i18n(\"size\"),r=t.i18n(\"items\"),o=t.i18n(\"selected\"),s=function(i,o){var s=0,l=0;e.each(i,function(e,t){o&&t.phash!=o||(s++,l+=parseInt(t.size)||0)}),n.html(r+\": \"+s+\", \"+a+\": \"+t.formatSize(l))},l=!1;t.getUI(\"statusbar\").prepend(n).append(i).show(),t.bind(\"open reload add remove change searchend\",function(){s(t.files(),t.cwd().hash)}).bind(\"searchend\",function(){l=!1}).search(function(e){l=!0,s(e.data.files)}).select(function(){var n,r=0,s=0,d=t.selectedFiles(),c=[];return 1==d.length?(n=d[0],r=n.size,l&&c.push('<a href=\"#elf_'+n.phash+'\" data-hash=\"'+n.hash+'\">'+(n.path?n.path.replace(/\\/[^\\/]*$/,\"\"):\"..\")+\"</a>\"),c.push(t.escape(n.name)),i.html(c.join(\"/\")+(r>0?\", \"+t.formatSize(r):\"\")),void 0):(e.each(d,function(e,t){s++,r+=parseInt(t.size)||0}),i.html(s?o+\": \"+s+\", \"+a+\": \"+t.formatSize(r):\"&nbsp;\"),void 0)})})},e.fn.elfindertoolbar=function(t,n){return this.not(\".elfinder-toolbar\").each(function(){var i,a,r,o,s,l=t._commands,d=e(this).addClass(\"ui-helper-clearfix ui-widget-header ui-corner-top elfinder-toolbar\"),c=n||[],u=null,p=\"\";d.prev().length&&d.parent().prepend(this);var h=function(t){var n;for(d.empty(),i=c.length;i--;)if(c[i]){for(o=e('<div class=\"ui-widget-content ui-corner-all elfinder-buttonset\"/>'),a=c[i].length;a--;)n=c[i][a],t&&-1!==e.inArray(n,t)||!(r=l[n])||(s=\"elfinder\"+r.options.ui,e.fn[s]&&o.prepend(e(\"<div/>\")[s](r)));o.children().length&&d.prepend(o),o.children(\":gt(0)\").before('<span class=\"ui-widget-content elfinder-toolbar-button-separator\"/>')}d.children().length?d.show():d.hide(),d.trigger(\"load\")};h(),t.bind(\"open sync\",function(){var n=[],i=t.option(\"disabled\");u&&u.toString()===i.sort().toString()||h(i&&i.length?i:null),u=i.concat().sort(),p!==JSON.stringify(t.commandMap)&&(p=JSON.stringify(t.commandMap),Object.keys(t.commandMap).length&&e.each(t.commandMap,function(i,a){var r=t._commands[a],o=r?\"elfinder\"+r.options.ui:null;if(o&&e.fn[o]){n.push(i);var s=e(\"div.elfinder-buttonset div.elfinder-button\").has(\"span.elfinder-button-icon-\"+i);s.length&&!s.next().has(\"span.elfinder-button-icon-\"+a).length&&(s.after(e(\"<div/>\")[o](t._commands[a]).data(\"origin\",i)),s.hide())}}),e.each(e(\"div.elfinder-button\"),function(){var t=e(this).data(\"origin\");t&&-1==e.inArray(t,n)&&(e(\"span.elfinder-button-icon-\"+e(this).data(\"origin\")).parent().show(),e(this).remove())}))})}),this},e.fn.elfindertree=function(t,n){var i=t.res(\"class\",\"tree\");return this.not(\".\"+i).each(function(){var a=\"class\",r=t.UA.Mobile,o=t.res(a,\"treeroot\"),s=n.openRootOnLoad,l=n.openCwdOnOpen,d=t.res(a,\"navsubtree\"),c=t.res(a,\"treedir\"),u=\"span.\"+c,p=t.res(a,\"navcollapse\"),h=t.res(a,\"navexpand\"),f=\"elfinder-subtree-loaded\",m=t.res(a,\"navarrow\"),g=t.res(a,\"active\"),v=t.res(a,\"adroppable\"),b=t.res(a,\"hover\"),y=t.res(a,\"disabled\"),w=t.res(a,\"draggable\"),x=t.res(a,\"droppable\"),k=\"elfinder-navbar-wrapper-pastable\",C=\"elfinder-navbar-wrapper-uploadable\",T=function(e){var t=$.offset().left;return e>=t&&e<=t+$.width()},I=t.droppable.drop,F=e.extend(!0,{},t.droppable,{over:function(n,i){var a,r,o=e(this),s=i.helper,l=b+\" \"+v;return n.stopPropagation(),s.data(\"dropover\",s.data(\"dropover\")+1),o.data(\"dropover\",!0),i.helper.data(\"namespace\")!==t.namespace?(o.removeClass(l),!1):(o.addClass(b),o.is(\".\"+p+\":not(.\"+h+\")\")&&o.data(\"expandTimer\",setTimeout(function(){o.children(\".\"+m).click()},500)),a=t.navId2Hash(o.attr(\"id\")),o.data(\"dropover\",a),e.each(i.helper.data(\"files\"),function(e,n){return n===a||t.file(n).phash===a&&!i.helper.hasClass(\"elfinder-drag-helper-plus\")?(o.removeClass(l),!1):void 0}),s.data(\"locked\")?r=\"elfinder-drag-helper-plus\":(r=\"elfinder-drag-helper-move\",(n.shiftKey||n.ctrlKey||n.metaKey)&&(r+=\" elfinder-drag-helper-plus\")),o.hasClass(v)&&s.addClass(r),setTimeout(function(){o.hasClass(v)&&s.addClass(r)},20),void 0)},out:function(t,n){var i=e(this),a=n.helper;t.stopPropagation(),a.removeClass(\"elfinder-drag-helper-move elfinder-drag-helper-plus\").data(\"dropover\",Math.max(a.data(\"dropover\")-1,0)),i.data(\"expandTimer\")&&clearTimeout(i.data(\"expandTimer\")),i.removeData(\"dropover\").removeClass(b+\" \"+v)},deactivate:function(){e(this).removeData(\"dropover\").removeClass(b+\" \"+v)},drop:function(e,t){T(e.clientX)&&I.call(this,e,t)}}),S=e(t.res(\"tpl\",\"navspinner\")),M=t.res(\"tpl\",\"navdir\"),P=t.res(\"tpl\",\"perms\"),A=(t.res(\"tpl\",\"lock\"),t.res(\"tpl\",\"symlink\")),O={id:function(e){return t.navHash2Id(e.hash)},cssclass:function(e){var i=(t.UA.Touch?\"elfinder-touch \":\"\")+(e.phash?\"\":o)+\" \"+c+\" \"+t.perms2class(e);return e.dirs&&!e.link&&(i+=\" \"+p),n.getClass&&(i+=\" \"+n.getClass(e)),e.csscls&&(i+=\" \"+t.escape(e.csscls)),i},permissions:function(e){return e.read&&e.write?\"\":P},symlink:function(e){return e.alias?A:\"\"},style:function(e){return e.icon?\"style=\\\"background-image:url('\"+t.escape(e.icon)+\"')\\\"\":\"\"}},D=function(e){return e.name=t.escape(e.i18||e.name),M.replace(/(?:\\{([a-z]+)\\})/gi,function(t,n){return e[n]||(O[n]?O[n](e):\"\")})},U=function(t){return e.map(t||[],function(e){return\"directory\"==e.mime?e:null})},z=function(n){return n?e(\"#\"+t.navHash2Id(n)).next(\".\"+d):L},E=function(n,i){var a,r,o=n.children(\":first\");for(r=t.naturalCompare;o.length;){if(a=t.file(t.navId2Hash(o.children(\"[id]\").attr(\"id\"))),(a=t.file(t.navId2Hash(o.children(\"[id]\").attr(\"id\"))))&&r(i.name,a.name)<0)return o;o=o.next()}return e(\"\")},j=function(n){for(var i,a,o,s,l,d=n.length,c=[],u=n.length,p={},h=!0;u--;)i=n[u],e(\"#\"+t.navHash2Id(i.hash)).length||((a=z(i.phash)).length?i.phash&&((s=!a.children().length)||(o=E(a,i)).length)?s?(p[i.phash]||(p[i.phash]=[]),p[i.phash].push(i)):o.before(D(i)):(a[h||i.phash?\"append\":\"prepend\"](D(i)),h=!1,i.phash||(l=e(\"#\"+t.navHash2Id(i.hash)).parent(),!i.disabled||i.disabled.length<1?l.addClass(k+\" \"+C):(-1===e.inArray(\"paste\",i.disabled)&&l.addClass(k),-1===e.inArray(\"upload\",i.disabled)&&l.addClass(C)))):c.push(i));return Object.keys(p).length&&e.each(p,function(t,n){var i=z(t),a=[];n.sort(_),e.each(n,function(e,t){a.push(D(t))}),i.append(a.join(\"\"))}),c.length&&c.length<d?j(c):(d&&!r&&N(),void 0)},_=function(e,n){return t.naturalCompare(e.name,n.name)},R=function(){var n=e(\"#\"+t.navHash2Id(t.cwd().hash));if(n.length){var i=L.parent().stop(!1,!0),a=i.offset().top,r=i.height(),o=a+r-n.outerHeight(),s=n.offset().top;(a>s||s>o)&&i.animate({scrollTop:i.scrollTop()+s-a-r/3},{duration:\"fast\"})}},H=function(i,a){var r,c,v,b,y,w,x=t.cwd(),k=x.hash,C=e(\"#\"+t.navHash2Id(k)),i=i||!1,a=a||[];if(s&&(r=e(\"#\"+t.navHash2Id(t.root())),r.hasClass(f)&&r.addClass(h).next(\".\"+d).show(),s=!1),C.hasClass(g)||(L.find(u+\".\"+g).removeClass(g),C.addClass(g)),n.syncTree||!C.length){if(C.length)return i||(C.addClass(f),l&&C.hasClass(p)&&C.addClass(h).next(\".\"+d).slideDown()),b=C.parentsUntil(\".\"+o).filter(\".\"+d),y=b.length,w=1,b.show().prev(u).addClass(h,function(){!i&&y==w++&&R()}),!y&&!i&&R(),void 0;if(t.newAPI){if(c=t.file(k),c&&c.phash&&(v=e(\"#\"+t.navHash2Id(c.phash)),v.length&&v.hasClass(f)))return j([c]),H(i),void 0;v=x.root?e(\"#\"+t.navHash2Id(x.root)):null,v&&(S.insertBefore(v.children(\".\"+m)),v.removeClass(p)),t.request({data:{cmd:\"parents\",target:k},preventFail:!0}).done(function(n){t.api<2.1&&(n.tree=n.tree.concat([x])),a=e.merge(a,U(n.tree)),j(a),q(a,f),k==x.hash&&H(i)}).always(function(){v&&(S.remove(),v.addClass(p+\" \"+f))})}}},N=function(e){var t,n=100;e||(L.find(\"div.\"+C).find(u+\":not(.elfinder-ro,.elfinder-na)\").addClass(\"native-droppable\"),e=L.find(\"div.\"+k).find(u+\":not(.\"+x+\",.elfinder-ro,.elfinder-na)\")),e.length>n&&(t=e.slice(n),e=e.slice(0,n)),e.droppable(F),t&&setTimeout(function(){N(t)},20)},q=function(n,i){var a=i==f?\".\"+p+\":not(.\"+f+\")\":\":not(.\"+p+\")\";e.each(n,function(n,r){e(\"#\"+t.navHash2Id(r.phash)+a).filter(function(){return e(this).next(\".\"+d).children().length>0}).addClass(i)})},L=e(this).addClass(i).on(\"mouseenter mouseleave\",u,function(n){var i=e(this),a=\"mouseenter\"==n.type;i.hasClass(v+\" \"+y)||(!r&&a&&!i.hasClass(o+\" \"+w+\" elfinder-na elfinder-wo\")&&i.draggable(t.draggable),i.toggleClass(b,a))}).on(\"dropover dropout drop\",u,function(t){e(this)[\"dropover\"==t.type?\"addClass\":\"removeClass\"](v+\" \"+b)}).on(\"click\",u,function(n){var i=e(this),a=t.navId2Hash(i.attr(\"id\"));return t.file(a),i.data(\"longtap\")?(n.stopPropagation(),void 0):(t.trigger(\"searchend\",{noupdate:!0}),a==t.cwd().hash||i.hasClass(y)?i.hasClass(p)&&i.children(\".\"+m).click():t.exec(\"open\",a),void 0)}).on(\"touchstart\",u,function(n){n.stopPropagation();var i=n.originalEvent,a=e(this).addClass(b).data(\"longtap\",null).data(\"tmlongtap\",setTimeout(function(){a.data(\"longtap\",!0),t.trigger(\"contextmenu\",{type:\"navbar\",targets:[t.navId2Hash(a.attr(\"id\"))],x:i.touches[0].pageX,y:i.touches[0].pageY})},500))}).on(\"touchmove touchend\",u,function(t){t.stopPropagation(),clearTimeout(e(this).data(\"tmlongtap\")),\"touchmove\"==t.type&&e(this).removeClass(b)}).on(\"click\",u+\".\"+p+\" .\"+m,function(n){var i,a=e(this),r=a.parent(u),o=r.next(\".\"+d),s=30;n.stopPropagation(),r.hasClass(f)?(r.toggleClass(h),i=r.hasClass(h)?o.children().length+o.find(\"div.elfinder-navbar-subtree[style*=block]\").children().length:o.find(\"div:visible\").length,i>s?(o.toggle(),t.draggingUiHelper&&t.draggingUiHelper.data(\"refreshPositions\",1)):o.stop(!0,!0).slideToggle(\"normal\",function(){t.draggingUiHelper&&t.draggingUiHelper.data(\"refreshPositions\",1)})):(S.insertBefore(a),r.removeClass(p),t.request({cmd:\"tree\",target:t.navId2Hash(r.attr(\"id\"))}).done(function(e){j(U(e.tree)),o.children().length&&(r.addClass(p+\" \"+h),o.children().length>s?(o.show(),t.draggingUiHelper&&t.draggingUiHelper.data(\"refreshPositions\",1)):o.stop(!0,!0).slideDown(\"normal\",function(){t.draggingUiHelper&&t.draggingUiHelper.data(\"refreshPositions\",1)})),H(!0)}).always(function(){S.remove(),r.addClass(f)}))}).on(\"contextmenu\",u,function(n){var i=e(this);n.preventDefault(),t.trigger(\"contextmenu\",{type:\"navbar\",targets:[t.navId2Hash(e(this).attr(\"id\"))],x:n.pageX,y:n.pageY}),i.addClass(\"ui-state-hover\"),t.getUI(\"contextmenu\").children().on(\"mouseenter\",function(){i.addClass(\"ui-state-hover\")}),t.bind(\"closecontextmenu\",function(){i.removeClass(\"ui-state-hover\")})}),$=t.getUI(\"navbar\").append(L).show();t.open(function(n){var i=n.data,a=U(i.files),r=t.getUI(\"contextmenu\");i.init&&L.empty(),t.UA.iOS&&$.removeClass(\"overflow-scrolling-touch\").addClass(\"overflow-scrolling-touch\"),a.length&&(r.data(\"cmdMaps\")||r.data(\"cmdMaps\",{}),j(a),q(a,f),e.each(a,function(e,t){t.volumeid&&t.uiCmdMap&&Object.keys(t.uiCmdMap).length&&!r.data(\"cmdMaps\")[t.volumeid]&&(r.data(\"cmdMaps\")[t.volumeid]=t.uiCmdMap)})),H(!1,a)}).add(function(e){var t=U(e.data.added);t.length&&(j(t),q(t,p))}).change(function(n){for(var i,a,o,s,l,c,p,m,g,v=U(n.data.changed),b=v.length,y=b;y--;)if(i=v[y],(a=e(\"#\"+t.navHash2Id(i.hash))).length){if(i.phash){if(s=a.closest(\".\"+d),l=z(i.phash),c=a.parent().next(),p=E(l,i),!l.length)continue;(l[0]!==s[0]||c.get(0)!==p.get(0))&&(p.length?p.before(a):l.append(a))}m=a.hasClass(h),g=a.hasClass(f),o=e(D(i)),a.replaceWith(o.children(u)),i.dirs&&(m||g)&&(a=e(\"#\"+t.navHash2Id(i.hash)))&&a.next(\".\"+d).children().length&&(m&&a.addClass(h),g&&a.addClass(f))}H(),b&&!r&&N()}).remove(function(n){for(var i,a,r=n.data.removed,o=r.length;o--;)(i=e(\"#\"+t.navHash2Id(r[o]))).length&&(a=i.closest(\".\"+d),i.parent().detach(),a.children().length||a.hide().prev(u).removeClass(p+\" \"+h+\" \"+f))}).bind(\"lockfiles unlockfiles\",function(n){var i=\"lockfiles\"==n.type,a=n.data.helper?n.data.helper.data(\"locked\"):!1,r=i&&!a?\"disable\":\"enable\",o=e.map(n.data.files||[],function(e){var n=t.file(e);return n&&\"directory\"==n.mime?e:null});e.each(o,function(n,o){var s=e(\"#\"+t.navHash2Id(o));s.length&&!a&&(s.hasClass(w)&&s.draggable(r),s.hasClass(x)&&s.droppable(r),s[i?\"addClass\":\"removeClass\"](y))})})}),this},e.fn.elfinderuploadbutton=function(t){return this.each(function(){var n=e(this).elfinderbutton(t).off(\"click\"),i=e(\"<form/>\").appendTo(n),a=e('<input type=\"file\" multiple=\"true\" title=\"'+t.fm.i18n(\"selectForUpload\")+'\"/>').change(function(){var n=e(this);n.val()&&(t.exec({input:n.remove()[0]}),a.clone(!0).appendTo(i))}).on(\"dragover\",function(e){e.originalEvent.dataTransfer.dropEffect=\"copy\"});i.append(a.clone(!0)),t.change(function(){i[t.disabled()?\"hide\":\"show\"]()}).change()})},e.fn.elfinderviewbutton=function(t){return this.each(function(){var n=e(this).elfinderbutton(t),i=n.children(\".elfinder-button-icon\");t.change(function(){var e=\"icons\"==t.value;i.toggleClass(\"elfinder-button-icon-view-list\",e),n.attr(\"title\",t.fm.i18n(e?\"viewlist\":\"viewicons\"))})})},e.fn.elfinderworkzone=function(){var t=\"elfinder-workzone\";return this.not(\".\"+t).each(function(){var n=e(this).addClass(t),i=n.outerHeight(!0)-n.height(),a=n.parent();a.add(window).on(\"resize\",function(){var r=a.height();a.children(\":visible:not(.\"+t+\")\").each(function(){var t=e(this);\"absolute\"!=t.css(\"position\")&&\"fixed\"!=t.css(\"position\")&&(r-=t.outerHeight(!0))}),n.height(r-i)})}),this},elFinder.prototype.commands.archive=function(){var t,n=this,i=n.fm,a=[];this.variants=[],this.disableOnSearch=!1,i.bind(\"open reload\",function(){n.variants=[],e.each(a=i.option(\"archivers\").create||[],function(e,t){n.variants.push([t,i.mime2kind(t)])}),n.change()}),this.getstate=function(n){var r,n=this.files(n),o=n.length,s=i.cwd().write;return s&&i.searchStatus.state>1&&(r=i.cwd().volumeid,s=o===e.map(n,function(e){return e.read&&0===e.hash.indexOf(r)?e:null}).length),s&&!this._disabled&&a.length&&(o||t&&\"pending\"==t.state())?0:-1},this.exec=function(r,o){var s,l,d=this.files(r),c=d.length,u=o||a[0],p=i.cwd(),h=[\"errArchive\",\"errPerm\",\"errCreatingTempDir\",\"errFtpDownloadFile\",\"errFtpUploadFile\",\"errFtpMkdir\",\"errArchiveExec\",\"errExtractExec\",\"errRm\"];if(t=e.Deferred().fail(function(e){e&&i.error(e)}),!(this.enabled()&&c&&a.length&&-1!==e.inArray(u,a)))return t.reject();if(!p.write)return t.reject(h);for(s=0;c>s;s++)if(!d[s].read)return t.reject(h);return n.mime=u,n.prefix=(c>1?\"Archive\":d[0].name)+\".\"+i.option(\"archivers\").createext[u],n.data={targets:n.hashes(r),type:u},l=e.proxy(i.res(\"mixin\",\"make\"),n)(),t.reject(),l}},elFinder.prototype.commands.back=function(){this.alwaysEnabled=!0,this.updateOnSelect=!1,this.shortcuts=[{pattern:\"ctrl+left backspace\"}],this.getstate=function(){return this.fm.history.canBack()?0:-1},this.exec=function(){return this.fm.history.back()}},elFinder.prototype.commands.chmod=function(){this.updateOnSelect=!1;var t=this,n=this.fm,i={0:\"owner\",1:\"group\",2:\"other\"},a={read:n.i18n(\"read\"),write:n.i18n(\"write\"),execute:n.i18n(\"execute\"),perm:n.i18n(\"perm\"),kind:n.i18n(\"kind\"),files:n.i18n(\"files\")},r=function(e){return!isNaN(parseInt(e,8)&&parseInt(e,8)<=511)||e.match(/^([r-][w-][x-]){3}$/i)};this.tpl={main:'<div class=\"ui-helper-clearfix elfinder-info-title\"><span class=\"elfinder-cwd-icon {class} ui-corner-all\"/>{title}</div>{dataTable}',itemTitle:'<strong>{name}</strong><span id=\"elfinder-info-kind\">{kind}</span>',groupTitle:\"<strong>{items}: {num}</strong>\",dataTable:'<table id=\"{id}-table-perm\"><tr><td>{0}</td><td>{1}</td><td>{2}</td></tr></table><div class=\"\">'+a.perm+': <input id=\"{id}-perm\" type=\"text\" size=\"4\" maxlength=\"3\" value=\"{value}\"></div>',fieldset:'<fieldset id=\"{id}-fieldset-{level}\"><legend>{f_title}{name}</legend><input type=\"checkbox\" value=\"4\" id=\"{id}-read-{level}-perm\"{checked-r}> <label for=\"{id}-read-{level}-perm\">'+a.read+\"</label><br>\"+'<input type=\"checkbox\" value=\"6\" id=\"{id}-write-{level}-perm\"{checked-w}> <label for=\"{id}-write-{level}-perm\">'+a.write+\"</label><br>\"+'<input type=\"checkbox\" value=\"5\" id=\"{id}-execute-{level}-perm\"{checked-x}> <label for=\"{id}-execute-{level}-perm\">'+a.execute+\"</label><br>\"},this.shortcuts=[{}],this.getstate=function(e){var n=this.fm;return e=e||n.selected(),0==e.length&&(e=[n.cwd().hash]),!this._disabled&&t.checkstate(this.files(e))?0:-1},this.checkstate=function(t){var n=t.length;if(!n)return!1;var i=e.map(t,function(e){return e.isowner&&e.perm&&r(e.perm)&&(1==n||\"directory\"!=e.mime)?e:null}).length;return n==i?!0:!1},this.exec=function(t){var n=this.files(t);n.length||(t=[this.fm.cwd().hash],n=this.files(t));var o,s,l=this.fm,d=e.Deferred().always(function(){l.enable()}),c=this.tpl,t=this.hashes(t),u=n.length,p=n[0],h=l.namespace+\"-perm-\"+p.hash,f=c.main,m=' checked=\"checked\"',g=function(){var e={};return e[l.i18n(\"btnApply\")]=v,e[l.i18n(\"btnCancel\")]=function(){I.elfinderdialog(\"close\")},e},v=function(){var n=e.trim(e(\"#\"+h+\"-perm\").val());return r(n)?(I.elfinderdialog(\"close\"),l.request({data:{cmd:\"chmod\",targets:t,mode:n},notify:{type:\"chmod\",cnt:u}}).fail(function(e){d.reject(e)}).done(function(e){d.resolve(e)}),void 0):!1},b=function(){for(var t,n=\"\",a=0;3>a;a++)t=0,e(\"#\"+h+\"-read-\"+i[a]+\"-perm\").is(\":checked\")&&(t=4|t),e(\"#\"+h+\"-write-\"+i[a]+\"-perm\").is(\":checked\")&&(t=2|t),e(\"#\"+h+\"-execute-\"+i[a]+\"-perm\").is(\":checked\")&&(t=1|t),n+=t.toString(8);e(\"#\"+h+\"-perm\").val(n)},y=function(t){for(var n,a=0;3>a;a++)n=parseInt(t.slice(a,a+1),8),e(\"#\"+h+\"-read-\"+i[a]+\"-perm\").prop(\"checked\",!1),e(\"#\"+h+\"-write-\"+i[a]+\"-perm\").prop(\"checked\",!1),e(\"#\"+h+\"-execute-\"+i[a]+\"-perm\").prop(\"checked\",!1),4==(4&n)&&e(\"#\"+h+\"-read-\"+i[a]+\"-perm\").prop(\"checked\",!0),2==(2&n)&&e(\"#\"+h+\"-write-\"+i[a]+\"-perm\").prop(\"checked\",!0),1==(1&n)&&e(\"#\"+h+\"-execute-\"+i[a]+\"-perm\").prop(\"checked\",!0);b()},w=function(e){for(var t,n,i,a=\"777\",r=\"\",o=e.length,s=0;o>s;s++){t=C(e[s].perm),r=\"\";for(var l=0;3>l;l++)n=parseInt(t.slice(l,l+1),8),i=parseInt(a.slice(l,l+1),8),4!=(4&n)&&4==(4&i)&&(i-=4),2!=(2&n)&&2==(2&i)&&(i-=2),1!=(1&n)&&1==(1&i)&&(i-=1),r+=i.toString(8);a=r}return a},x=function(e){return e?\":\"+e:\"\"},k=function(e,t){for(var n,r,o=\"\",s=c.dataTable,d=0;3>d;d++)n=parseInt(e.slice(d,d+1),8),o+=n.toString(8),r=c.fieldset.replace(\"{f_title}\",l.i18n(i[d])).replace(\"{name}\",x(t[i[d]])).replace(/\\{level\\}/g,i[d]),s=s.replace(\"{\"+d+\"}\",r).replace(\"{checked-r}\",4==(4&n)?m:\"\").replace(\"{checked-w}\",2==(2&n)?m:\"\").replace(\"{checked-x}\",1==(1&n)?m:\"\");return s=s.replace(\"{value}\",o).replace(\"{valueCaption}\",a.perm)},C=function(e){if(isNaN(parseInt(e,8))){for(var t=e.split(\"\"),n=[],i=0,a=t.length;a>i;i++)0===i||3===i||6===i?t[i].match(/[r]/i)?n.push(1):t[i].match(/[-]/)&&n.push(0):1===i||4===i||7===i?t[i].match(/[w]/i)?n.push(1):t[i].match(/[-]/)&&n.push(0):t[i].match(/[x]/i)?n.push(1):t[i].match(/[-]/)&&n.push(0);n.splice(3,0,\",\"),n.splice(7,0,\",\");for(var r=n.join(\"\"),o=r.split(\",\"),s=[],l=0,d=o.length;d>l;l++){var c=parseInt(o[l],2).toString(8);s.push(c)}e=s.join(\"\")}else e=parseInt(e,8).toString(8);return e},T={title:this.title,width:\"auto\",buttons:g(),close:function(){e(this).elfinderdialog(\"destroy\")}},I=l.getUI().find(\"#\"+h),F=\"\";return I.length?(I.elfinderdialog(\"toTop\"),e.Deferred().resolve()):(f=f.replace(\"{class}\",u>1?\"elfinder-cwd-icon-group\":l.mime2class(p.mime)),u>1?o=c.groupTitle.replace(\"{items}\",l.i18n(\"items\")).replace(\"{num}\",u):(o=c.itemTitle.replace(\"{name}\",p.name).replace(\"{kind}\",l.mime2kind(p)),p.tmb&&(F=l.option(\"tmbUrl\")+p.tmb)),s=k(w(n),1==n.length?n[0]:{}),f=f.replace(\"{title}\",o).replace(\"{dataTable}\",s).replace(/{id}/g,h),I=l.dialog(f,T),I.attr(\"id\",h),F&&e(\"<img/>\").on(\"load\",function(){I.find(\".elfinder-cwd-icon\").css(\"background\",'url(\"'+F+'\") center center no-repeat')}).attr(\"src\",F),e(\"#\"+h+\"-table-perm :checkbox\").on(\"click\",function(){b(\"perm\")}),e(\"#\"+h+\"-perm\").on(\"keydown\",function(e){var t=e.keyCode;return e.stopPropagation(),13==t?(v(),void 0):void 0}).on(\"focus\",function(){e(this).select()}).on(\"keyup\",function(){3==e(this).val().length&&(e(this).select(),y(e(this).val()))}),d)}},elFinder.prototype.commands.copy=function(){this.shortcuts=[{pattern:\"ctrl+c ctrl+insert\"}],this.getstate=function(t){var t=this.files(t),n=t.length;return!this._disabled&&n&&e.map(t,function(e){return e.phash&&e.read?e:null}).length==n?0:-1},this.exec=function(t){var n=this.fm,i=e.Deferred().fail(function(e){n.error(e)});return e.each(this.files(t),function(e,t){return t.read&&t.phash?void 0:!i.reject([\"errCopy\",t.name,\"errPerm\"])}),\"rejected\"==i.state()?i:i.resolve(n.clipboard(this.hashes(t)))}},elFinder.prototype.commands.cut=function(){this.shortcuts=[{pattern:\"ctrl+x shift+insert\"}],this.getstate=function(t){var t=this.files(t),n=t.length;return!this._disabled&&n&&e.map(t,function(e){return e.phash&&e.read&&!e.locked?e:null}).length==n?0:-1},this.exec=function(t){var n=this.fm,i=e.Deferred().fail(function(e){n.error(e)});return e.each(this.files(t),function(e,t){return t.read&&t.phash?t.locked?!i.reject([\"errLocked\",t.name]):void 0:!i.reject([\"errCopy\",t.name,\"errPerm\"])}),\"rejected\"==i.state()?i:i.resolve(n.clipboard(this.hashes(t),!0))}},elFinder.prototype.commands.zipdl=function(){},elFinder.prototype.commands.download=function(){var t=this,n=this.fm,i=!1,a=function(a){var r=!1,o=\"\";if(n.searchStatus.state>1&&\"\"===n.searchStatus.target)a=e.map(a,function(e){return n.isCommandEnabled(\"download\",e)?e:null}),o=n.root(a[0]),e.each(a,function(e,t){return(r=o!==n.root(t))?!1:void 0}),i=!r&&n.command(\"zipdl\")&&n.isCommandEnabled(\"zipdl\",o);else{if(!n.isCommandEnabled(\"download\",a[0]))return[];i=n.command(\"zipdl\")&&n.isCommandEnabled(\"zipdl\",a[0])}return i?t.files(a):e.map(t.files(a),function(e){return\"directory\"==e.mime?null:e})};this.linkedCmds=[\"zipdl\"],this.shortcuts=[{pattern:\"shift+enter\"}],this.getstate=function(t){var t=this.hashes(t),i=t.length,r=this.options.maxRequests||10,o=n.command(\"zipdl\"),s=!1,l=\"\";return i>0&&n.searchStatus.state>1&&\"\"===n.searchStatus.target&&(l=n.root(t[0]),e.each(t,function(e,t){return(s=l!==n.root(t))?!1:void 0})),s||!o||o._disabled?!this._disabled&&i&&r>=i&&(!n.UA.IE&&!n.UA.Mobile||1==i)&&i==a(t).length?0:-1:!this._disabled&&i?0:-1},n.bind(\"contextmenu\",function(n){var i,a,r=t.fm,o=null,s=function(t){var n=t.url||r.url(t.hash);return{icon:\"link\",node:e(\"<a/>\").attr({href:n,target:\"_blank\",title:r.i18n(\"link\")}).text(t.name).on(\"mousedown click touchstart touchmove touchend contextmenu\",function(e){var t=r.getUI(\"contextmenu\");e.stopPropagation(),t.data(\"mouseEvInternal\",!0),setTimeout(function(){t.data(\"mouseEvInternal\",!1)},500)}).on(\"dragstart\",function(n){var i=n.dataTransfer||n.originalEvent.dataTransfer||null;if(o=null,i){var a=function(t){var n,i=t.mime;return n='<div class=\"elfinder-cwd-icon '+r.mime2class(i)+' ui-corner-all\"/>',t.tmb&&1!==t.tmb&&(n=e(n).css(\"background\",\"url('\"+r.option(\"tmbUrl\")+t.tmb+\"') center center no-repeat\").get(0).outerHTML),n};i.effectAllowed=\"copyLink\",i.setDragImage&&(o=e('<div class=\"elfinder-drag-helper html5-native\">').append(a(t)).appendTo(e(document.body)),i.setDragImage(o.get(0),50,47)),r.UA.IE||(i.setData(\"elfinderfrom\",window.location.href+t.phash),i.setData(\"elfinderfrom:\"+i.getData(\"elfinderfrom\"),\"\"))}}).on(\"dragend\",function(){o&&o.remove()})}};if(t.extra=null,n.data&&(i=n.data.targets||[],1===i.length&&(a=r.file(i[0]))&&\"directory\"!==a.mime))if(\"1\"!=a.url)t.extra=s(a);else{var l;t.extra={icon:\"link\",node:e(\"<a/>\").attr({href:\"#\",title:r.i18n(\"getLink\"),draggable:\"false\"}).text(a.name).on(\"click\",function(e){var t=l.parent();e.stopPropagation(),e.preventDefault(),t.removeClass(\"ui-state-disabled\").addClass(\"elfinder-button-icon-spinner\"),r.request({data:{cmd:\"url\",target:a.hash},preventDefault:!0}).always(function(e){if(t.removeClass(\"elfinder-button-icon-spinner\"),e.url){var n=r.file(a.hash);n.url=e.url,l.replaceWith(s(a).node)}else t.addClass(\"ui-state-disabled\")})})},l=t.extra.node,l.ready(function(){setTimeout(function(){l.parent().addClass(\"ui-state-disabled\").css(\"pointer-events\",\"auto\")},10)})}}),this.exec=function(t){var n,r,t=this.hashes(t),o=this.fm,s=(o.options.url,a(t)),l=e.Deferred(),d=\"\";if(!s.length)return l.reject();var c=e(\"<a>\").hide().appendTo(e(\"body\")),u=\"string\"==typeof c.get(0).download;if(i&&(s.length>1||\"directory\"===s[0].mime))return l=o.request({data:{cmd:\"zipdl\",targets:t},notify:{type:\"zipdl\",cnt:1,hideCnt:!0,multi:!0},cancel:!0,preventDefault:!0}).done(function(n){var i,a,c,p,h={},f=\"dlw\"+ +new Date;n.error?(o.error(n.error),l.reject()):n.zipdl&&(i=n.zipdl,!u&&o.UA.Mobile?(r=o.options.url+(-1===o.options.url.indexOf(\"?\")?\"?\":\"&\")+\"cmd=zipdl&download=1\",e.each([t[0],i.file,i.name,i.mime],function(e,t){r+=\"&targets%5B%5D=\"+encodeURIComponent(t)}),e.each(o.options.customData,function(e,t){r+=\"&\"+encodeURIComponent(e)+\"=\"+encodeURIComponent(t)}),r+=\"&\"+encodeURIComponent(i.name),c=e(\"<a/>\").attr(\"href\",r).attr(\"download\",encodeURIComponent(i.name)).attr(\"target\",\"_blank\").on(\"click\",function(){o.trigger(\"download\",{files:s}),l.resolve(t),a.elfinderdialog(\"close\")}).append('<span class=\"elfinder-button-icon elfinder-button-icon-download\"></span>'+o.escape(i.name)),h[o.i18n(\"btnCancel\")]=function(){a.elfinderdialog(\"close\")},a=o.dialog(c,{title:o.i18n(\"link\"),buttons:h,width:\"200px\"})):(p=e('<form action=\"'+o.options.url+'\" method=\"post\" target=\"'+f+'\" style=\"display:none\"/>').append('<input type=\"hidden\" name=\"cmd\" value=\"zipdl\"/>').append('<input type=\"hidden\" name=\"download\" value=\"1\"/>'),e.each([t[0],i.file,i.name,i.mime],function(e,t){p.append('<input type=\"hidden\" name=\"targets[]\" value=\"'+o.escape(t)+'\"/>')}),e.each(o.options.customData,function(e,t){p.append('<input type=\"hidden\" name=\"'+e+'\" value=\"'+o.escape(t)+'\"/>')}),p.attr(\"target\",f).appendTo(\"body\"),d=e('<iframe style=\"display:none\" name=\"'+f+'\">').appendTo(\"body\").ready(function(){p.submit().remove(),o.trigger(\"download\",{files:s}),l.resolve(t),setTimeout(function(){d.remove()},o.UA.Firefox?2e4:1e3)})))}).fail(function(e){e&&o.error(e),l.reject()}).always(function(){c.remove()}),o.trigger(\"download\",{files:s}),l;for(n=0;n<s.length;n++)r=o.openUrl(s[n].hash,!0),u?c.attr(\"href\",r).attr(\"download\",encodeURIComponent(s[n].name)).attr(\"target\",\"_blank\").get(0).click():o.UA.Mobile?setTimeout(function(){window.open(r)||o.error(\"errPopup\")},100):d+='<iframe class=\"downloader\" id=\"downloader-'+s[n].hash+'\" style=\"display:none\" src=\"'+r+'\"/>';return c.remove(),e(d).appendTo(\"body\").ready(function(){setTimeout(function(){e(d).each(function(){e(\"#\"+e(this).attr(\"id\")).remove()})},o.UA.Firefox?2e4+1e4*n:1e3)}),o.trigger(\"download\",{files:s}),l.resolve(t)}},elFinder.prototype.commands.duplicate=function(){var t=this.fm;this.getstate=function(n){var n=this.files(n),i=n.length;return!this._disabled&&i&&t.cwd().write&&e.map(n,function(e){return e.phash&&e.read&&e.phash===t.cwd().hash?e:null}).length==i?0:-1},this.exec=function(t){var n=this.fm,i=this.files(t),a=i.length,r=e.Deferred().fail(function(e){e&&n.error(e)});return a&&-1!==this.getstate(t)?(e.each(i,function(e,t){return t.read&&n.file(t.phash).write?void 0:!r.reject([\"errCopy\",t.name,\"errPerm\"])}),\"rejected\"==r.state()?r:n.request({data:{cmd:\"duplicate\",targets:this.hashes(t)},notify:{type:\"copy\",cnt:a}})):r.reject()}},elFinder.prototype.commands.edit=function(){var t=this,n=this.fm,i=n.res(\"mimes\",\"text\")||[],a=function(e){return e.replace(/\\s+$/,\"\")},r=function(n){return e.map(n,function(n){return 0!==n.mime.indexOf(\"text/\")&&-1===e.inArray(n.mime,i)||!n.mime.indexOf(\"text/rtf\")||t.onlyMimes.length&&-1===e.inArray(n.mime,t.onlyMimes)||!n.read||!n.write?null:n})},o=function(r,o,s){var l=e.Deferred(),d=e('<textarea class=\"elfinder-file-edit\" rows=\"20\" id=\"'+r+'-ta\">'+n.escape(s)+\"</textarea>\"),c=d.val(),u=function(){d.editor&&d.editor.save(d[0],d.editor.instance),c=d.val(),l.notifyWith(d)},p=function(){var e=function(){l.reject(),d.elfinderdialog(\"close\")};d.editor&&d.editor.save(d[0],d.editor.instance),a(c)!==a(d.val())?(c=d.val(),n.confirm({title:t.title,text:\"confirmNotSave\",accept:{label:\"btnSaveClose\",callback:function(){u(),e()}},cancel:{label:\"btnClose\",callback:e}})):e()},h=function(){u(),p()},f={title:n.escape(o.name),width:t.options.dialogWidth||450,buttons:{},btnHoverFocus:!1,closeOnEscape:!1,close:function(){var i=e(this),r=function(){d.editor&&d.editor.close(d[0],d.editor.instance),i.elfinderdialog(\"destroy\")};d.editor&&d.editor.save(d[0],d.editor.instance),a(c)!==a(d.val())?n.confirm({title:t.title,text:\"confirmNotSave\",accept:{label:\"btnSaveClose\",callback:function(){u(),r()}},cancel:{label:\"btnClose\",callback:r}}):r()},open:function(){n.disable(),d.focus(),d[0].setSelectionRange&&d[0].setSelectionRange(0,0),d.editor&&(d.editor.instance=d.editor.load(d[0])||null,d.editor.focus(d[0],d.editor.instance))}},m=function(t,n){if(n=n||i.concat(\"text/\"),-1!==e.inArray(t,n))return!0;var a,r;for(r=n.length,a=0;r>a;a++)if(0===t.indexOf(n[a]))return!0;return!1},g=function(e,t){if(!t||!t.length)return!0;var n,i,a=e.replace(/^.+\\.([^.]+)|(.+)$/,\"$1$2\").toLowerCase();for(i=t.length,n=0;i>n;n++)if(a===t[n].toLowerCase())return!0;return!1};return d.getContent=function(){return d.val()},e.each(t.options.editors||[],function(e,t){return m(o.mime,t.mimes||null)&&g(o.name,t.exts||null)&&\"function\"==typeof t.load&&\"function\"==typeof t.save?(d.editor={load:t.load,save:t.save,close:\"function\"==typeof t.close?t.close:function(){},focus:\"function\"==typeof t.focus?t.focus:function(){},instance:null,doSave:u,doCancel:p,doClose:h,file:o},!1):void 0}),d.editor||d.keydown(function(e){var t,n,i=e.keyCode;e.stopPropagation(),9==i&&(e.preventDefault(),this.setSelectionRange&&(t=this.value,n=this.selectionStart,this.value=t.substr(0,n)+\"\t\"+t.substr(this.selectionEnd),n+=1,this.setSelectionRange(n,n))),(e.ctrlKey||e.metaKey)&&((81==i||87==i)&&(e.preventDefault(),p()),83==i&&(e.preventDefault(),u()))}).on(\"mouseenter\",function(){this.focus()}),f.buttons[n.i18n(\"btnSave\")]=u,f.buttons[n.i18n(\"btnSaveClose\")]=h,f.buttons[n.i18n(\"btnCancel\")]=p,n.dialog(d,f).attr(\"id\",r),l.promise()\n },s=function(i,a){var r,l=i.hash,d=(n.options,e.Deferred()),c=\"edit-\"+n.namespace+\"-\"+i.hash,u=n.getUI().find(\"#\"+c),p=a?1:0;return u.length?(u.elfinderdialog(\"toTop\"),d.resolve()):i.read&&i.write?(n.request({data:{cmd:\"get\",target:l,conv:p},notify:{type:\"file\",cnt:1},syncOnFail:!0}).done(function(e){e.doconv?n.confirm({title:t.title,text:\"confirmConvUTF8\",accept:{label:\"btnConv\",callback:function(){d=s(i,1)}},cancel:{label:\"btnCancel\",callback:function(){d.reject()}}}):o(c,i,e.content).progress(function(){var e=this;n.request({options:{type:\"post\"},data:{cmd:\"put\",target:l,content:e.getContent()},notify:{type:\"save\",cnt:1},syncOnFail:!0}).fail(function(e){d.reject(e)}).done(function(t){t.changed&&t.changed.length&&n.change(t),d.resolve(t),setTimeout(function(){e.focus(),e.editor&&e.editor.focus(e[0],e.editor.instance)},50)})})}).fail(function(e){d.reject(e)}),d.promise()):(r=[\"errOpen\",i.name,\"errPerm\"],n.error(r),d.reject(r))};this.shortcuts=[{pattern:\"ctrl+e\"}],this.init=function(){this.onlyMimes=this.options.mimes||[]},this.getstate=function(e){var e=this.files(e),t=e.length;return!this._disabled&&t&&r(e).length==t?0:-1},this.exec=function(t){var n,i=r(this.files(t)),a=[];if(this.disabled())return e.Deferred().reject();for(;n=i.shift();)a.push(s(n));return a.length?e.when.apply(null,a):e.Deferred().reject()}},elFinder.prototype.commands.extract=function(){var t=this,n=t.fm,i=[],a=function(t){return e.map(t,function(t){return t.read&&-1!==e.inArray(t.mime,i)?t:null})};this.variants=[],this.disableOnSearch=!0,n.bind(\"open reload\",function(){i=n.option(\"archivers\").extract||[],t.variants=[[\"makedir\",n.i18n(\"cmdmkdir\")],[\"intohere\",n.i18n(\"btnCwd\")]],t.change()}),this.getstate=function(e){var e=this.files(e),t=e.length;return!this._disabled&&t&&this.fm.cwd().write&&a(e).length==t?0:-1},this.exec=function(t,a){var r,o,s,l=this.files(t),d=e.Deferred(),c=l.length,u=\"makedir\"==a?1:0,p=!1,h=!1,f=0,m=e.map(n.files(t),function(e){return e.name}),g={};e.map(n.files(t),function(e){g[e.name]=e});var v=function(e){switch(e){case\"overwrite_all\":p=!0;break;case\"omit_all\":h=!0}},b=function(t){t.read&&n.file(t.phash).write?-1===e.inArray(t.mime,i)?(o=[\"errExtract\",t.name,\"errNoArchive\"],n.error(o),d.reject(o)):n.request({data:{cmd:\"extract\",target:t.hash,makedir:u},notify:{type:\"extract\",cnt:1},syncOnFail:!0}).fail(function(e){\"rejected\"!=d.state()&&d.reject(e)}).done(function(){}):(o=[\"errExtract\",t.name,\"errPerm\"],n.error(o),d.reject(o))},y=function(t,i){var a=t[i],o=a.name.replace(/\\.((tar\\.(gz|bz|bz2|z|lzo))|cpio\\.gz|ps\\.gz|xcf\\.(gz|bz2)|[a-z0-9]{1,4})$/gi,\"\"),l=e.inArray(o,m)>=0,w=function(){c>i+1?y(t,i+1):d.resolve()};!u&&l&&\"directory\"!=g[o].mime?n.confirm({title:n.i18n(\"ntfextract\"),text:[\"errExists\",o,\"confirmRepl\"],accept:{label:\"btnYes\",callback:function(e){if(s=e?\"overwrite_all\":\"overwrite\",v(s),p||h){if(p){for(r=i;c>r;r++)b(t[r]);d.resolve()}}else\"overwrite\"==s&&b(a),c>i+1?y(t,i+1):d.resolve()}},reject:{label:\"btnNo\",callback:function(e){s=e?\"omit_all\":\"omit\",v(s),!p&&!h&&c>i+1?y(t,i+1):h&&d.resolve()}},cancel:{label:\"btnCancel\",callback:function(){d.resolve()}},all:c>i+1}):u?(b(a),w()):0==f?n.confirm({title:n.i18n(\"cmdextract\"),text:[n.i18n(\"cmdextract\")+' \"'+a.name+'\"',\"confirmRepl\"],accept:{label:\"btnYes\",callback:function(e){e&&(f=1),b(a),w()}},reject:{label:\"btnNo\",callback:function(e){e&&(f=-1),w()}},cancel:{label:\"btnCancel\",callback:function(){d.resolve()}},all:c>i+1}):(f>0&&b(a),w())};return this.enabled()&&c&&i.length?(c>0&&y(l,0),d):d.reject()}},elFinder.prototype.commands.forward=function(){this.alwaysEnabled=!0,this.updateOnSelect=!0,this.shortcuts=[{pattern:\"ctrl+right\"}],this.getstate=function(){return this.fm.history.canForward()?0:-1},this.exec=function(){return this.fm.history.forward()}},elFinder.prototype.commands.getfile=function(){var t=this,n=this.fm,i=function(n){var i=t.options;return n=e.map(n,function(e){return\"directory\"!=e.mime||i.folders?e:null}),i.multiple||1==n.length?n:[]};this.alwaysEnabled=!0,this.callback=n.options.getFileCallback,this._disabled=\"function\"==typeof this.callback,this.getstate=function(e){var e=this.files(e),t=e.length;return this.callback&&t&&i(e).length==t?0:-1},this.exec=function(n){var i,a,r,o=this.fm,s=this.options,l=this.files(n),d=l.length,c=o.option(\"url\"),u=o.option(\"tmbUrl\"),p=e.Deferred().done(function(e){o.trigger(\"getfile\",{files:e}),t.callback(e,o),\"close\"==s.oncomplete?o.hide():\"destroy\"==s.oncomplete&&o.destroy()}),h=function(){return s.onlyURL?s.multiple?e.map(l,function(e){return e.url}):l[0].url:s.multiple?l:l[0]},f=[];if(-1==this.getstate(n))return p.reject();for(i=0;d>i;i++){if(a=l[i],\"directory\"==a.mime&&!s.folders)return p.reject();a.baseUrl=c,\"1\"==a.url?f.push(o.request({data:{cmd:\"url\",target:a.hash},notify:{type:\"url\",cnt:1,hideCnt:!0},preventDefault:!0}).done(function(e){if(e.url){var t=o.file(this.hash);t.url=this.url=e.url}}.bind(a))):a.url=o.url(a.hash),a.path=o.path(a.hash),a.tmb&&1!=a.tmb&&(a.tmb=u+a.tmb),a.width||a.height||(a.dim?(r=a.dim.split(\"x\"),a.width=r[0],a.height=r[1]):-1!==a.mime.indexOf(\"image\")&&f.push(o.request({data:{cmd:\"dim\",target:a.hash},notify:{type:\"dim\",cnt:1,hideCnt:!0},preventDefault:!0}).done(function(e){if(e.dim){var t=e.dim.split(\"x\"),n=o.file(this.hash);n.width=this.width=t[0],n.height=this.height=t[1]}}.bind(a))))}return f.length?(e.when.apply(null,f).always(function(){p.resolve(h(l))}),p):p.resolve(h(l))}},elFinder.prototype.commands.help=function(){var t=this.fm,n=this,i='<div class=\"elfinder-help-link\"> <a href=\"{url}\" target=\"_blank\">{link}</a></div>',a='<div class=\"elfinder-help-team\"><div>{author}</div>{work}</div>',r=/\\{url\\}/,o=/\\{link\\}/,s=/\\{author\\}/,l=/\\{work\\}/,d=\"replace\",c=\"ui-priority-primary\",u=\"ui-priority-secondary\",p=\"elfinder-help-license\",h='<li class=\"ui-state-default ui-corner-top\"><a href=\"#{id}\">{title}</a></li>',f=['<div class=\"ui-tabs ui-widget ui-widget-content ui-corner-all elfinder-help\">','<ul class=\"ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all\">'],m='<div class=\"elfinder-help-shortcut\"><div class=\"elfinder-help-shortcut-pattern\">{pattern}</div> {descrip}</div>',g='<div class=\"elfinder-help-separator\"/>',v=function(){f.push('<div id=\"about\" class=\"ui-tabs-panel ui-widget-content ui-corner-bottom\"><div class=\"elfinder-help-logo\"/>'),f.push(\"<h3>elFinder</h3>\"),f.push('<div class=\"'+c+'\">'+t.i18n(\"webfm\")+\"</div>\"),f.push('<div class=\"'+u+'\">'+t.i18n(\"ver\")+\": \"+t.version+\", \"+t.i18n(\"protocolver\")+': <span id=\"apiver\"></span></div>'),f.push('<div class=\"'+u+'\">jQuery/jQuery UI: '+e().jquery+\"/\"+e.ui.version+\"</div>\"),f.push(g),f.push(i[d](r,\"http://elfinder.org/\")[d](o,t.i18n(\"homepage\"))),f.push(i[d](r,\"https://github.com/Studio-42/elFinder/wiki\")[d](o,t.i18n(\"docs\"))),f.push(i[d](r,\"https://github.com/Studio-42/elFinder\")[d](o,t.i18n(\"github\"))),f.push(i[d](r,\"http://twitter.com/elrte_elfinder\")[d](o,t.i18n(\"twitter\"))),f.push(g),f.push('<div class=\"'+c+'\">'+t.i18n(\"team\")+\"</div>\"),f.push(a[d](s,'Dmitry \"dio\" Levashov &lt;dio@std42.ru&gt;')[d](l,t.i18n(\"chiefdev\"))),f.push(a[d](s,\"Troex Nevelin &lt;troex@fury.scancode.ru&gt;\")[d](l,t.i18n(\"maintainer\"))),f.push(a[d](s,\"Alexey Sukhotin &lt;strogg@yandex.ru&gt;\")[d](l,t.i18n(\"contributor\"))),f.push(a[d](s,\"Naoki Sawada &lt;hypweb@gmail.com&gt;\")[d](l,t.i18n(\"contributor\"))),t.i18[t.lang].translator&&f.push(a[d](s,t.i18[t.lang].translator)[d](l,t.i18n(\"translator\")+\" (\"+t.i18[t.lang].language+\")\")),f.push(g),f.push('<div class=\"'+p+'\">'+t.i18n(\"icons\")+': Pixelmixer, <a href=\"http://p.yusukekamiyamane.com\" target=\"_blank\">Fugue</a></div>'),f.push(g),f.push('<div class=\"'+p+'\">Licence: BSD Licence</div>'),f.push('<div class=\"'+p+'\">Copyright \u00a9 2009-2016, Studio 42</div>'),f.push('<div class=\"'+p+'\">\u201e \u2026'+t.i18n(\"dontforget\")+\" \u201d</div>\"),f.push(\"</div>\")},b=function(){var n=t.shortcuts();f.push('<div id=\"shortcuts\" class=\"ui-tabs-panel ui-widget-content ui-corner-bottom\">'),n.length?(f.push('<div class=\"ui-widget-content elfinder-help-shortcuts\">'),e.each(n,function(e,t){f.push(m.replace(/\\{pattern\\}/,t[0]).replace(/\\{descrip\\}/,t[1]))}),f.push(\"</div>\")):f.push('<div class=\"elfinder-help-disabled\">'+t.i18n(\"shortcutsof\")+\"</div>\"),f.push(\"</div>\")},y=function(){f.push('<div id=\"help\" class=\"ui-tabs-panel ui-widget-content ui-corner-bottom\">'),f.push('<a href=\"http://elfinder.org/forum/\" target=\"_blank\" class=\"elfinder-dont-panic\"><span>DON\\'T PANIC</span></a>'),f.push(\"</div>\")},w=\"\";this.alwaysEnabled=!0,this.updateOnSelect=!1,this.state=0,this.shortcuts=[{pattern:\"f1\",description:this.title}],setTimeout(function(){var i=n.options.view||[\"about\",\"shortcuts\",\"help\"];e.each(i,function(e,n){f.push(h[d](/\\{id\\}/,n)[d](/\\{title\\}/,t.i18n(n)))}),f.push(\"</ul>\"),-1!==e.inArray(\"about\",i)&&v(),-1!==e.inArray(\"shortcuts\",i)&&b(),-1!==e.inArray(\"help\",i)&&y(),f.push(\"</div>\"),w=e(f.join(\"\")),w.find(\".ui-tabs-nav li\").hover(function(){e(this).toggleClass(\"ui-state-hover\")}).children().click(function(t){var n=e(this);t.preventDefault(),t.stopPropagation(),n.hasClass(\"ui-tabs-selected\")||(n.parent().addClass(\"ui-tabs-selected ui-state-active\").siblings().removeClass(\"ui-tabs-selected\").removeClass(\"ui-state-active\"),w.find(\".ui-tabs-panel\").hide().filter(n.attr(\"href\")).show())}).filter(\":first\").click()},200),this.getstate=function(){return 0},this.exec=function(){this.dialog||(w.find(\"#apiver\").text(this.fm.api),this.dialog=this.fm.dialog(w,{title:this.title,width:530,autoOpen:!1,destroyOnClose:!1})),this.dialog.elfinderdialog(\"open\").find(\".ui-tabs-nav li a:first\").click()}},elFinder.prototype.commands.home=function(){this.title=\"Home\",this.alwaysEnabled=!0,this.updateOnSelect=!1,this.shortcuts=[{pattern:\"ctrl+home ctrl+shift+up\",description:\"Home\"}],this.getstate=function(){var e=this.fm.root(),t=this.fm.cwd().hash;return e&&t&&e!=t?0:-1},this.exec=function(){return this.fm.exec(\"open\",this.fm.root())}},elFinder.prototype.commands.info=function(){var t=this.fm,n=\"elfinder-info-spinner\",i=\"elfinder-info-button\",a={calc:t.i18n(\"calc\"),size:t.i18n(\"size\"),unknown:t.i18n(\"unknown\"),path:t.i18n(\"path\"),aliasfor:t.i18n(\"aliasfor\"),modify:t.i18n(\"modify\"),perms:t.i18n(\"perms\"),locked:t.i18n(\"locked\"),dim:t.i18n(\"dim\"),kind:t.i18n(\"kind\"),files:t.i18n(\"files\"),folders:t.i18n(\"folders\"),items:t.i18n(\"items\"),yes:t.i18n(\"yes\"),no:t.i18n(\"no\"),link:t.i18n(\"link\"),owner:t.i18n(\"owner\"),group:t.i18n(\"group\"),perm:t.i18n(\"perm\"),getlink:t.i18n(\"getLink\")};this.tpl={main:'<div class=\"ui-helper-clearfix elfinder-info-title\"><span class=\"elfinder-cwd-icon {class} ui-corner-all\"/>{title}</div><table class=\"elfinder-info-tb\">{content}</table>',itemTitle:'<strong>{name}</strong><span class=\"elfinder-info-kind\">{kind}</span>',groupTitle:\"<strong>{items}: {num}</strong>\",row:\"<tr><td>{label} : </td><td>{value}</td></tr>\",spinner:'<span>{text}</span> <span class=\"'+n+\" \"+n+'-{name}\"/>'},this.alwaysEnabled=!0,this.updateOnSelect=!1,this.shortcuts=[{pattern:\"ctrl+i\"}],this.init=function(){e.each(a,function(e,n){a[e]=t.i18n(n)})},this.getstate=function(){return 0},this.exec=function(t){var r=this.files(t);r.length||(r=this.files([this.fm.cwd().hash]));var o,s,l,d,c,u=this.fm,p=this.options,h=this.tpl,f=h.row,m=r.length,g=[],v=h.main,b=\"{label}\",y=\"{value}\",w=[],x={title:this.title,width:\"auto\",close:function(){e(this).elfinderdialog(\"destroy\"),e.each(w,function(e,t){var n=t&&t.xhr?t.xhr:null;n&&\"pending\"==n.state()&&(n.quiet=!0,n.abort())})}},k=[],C=function(e,t){I.find(\".\"+n+\"-\"+t).parent().html(e)},T=u.namespace+\"-info-\"+e.map(r,function(e){return e.hash}).join(\"-\"),I=u.getUI().find(\"#\"+T),F=[];if(!m)return e.Deferred().reject();if(I.length)return I.elfinderdialog(\"toTop\"),e.Deferred().resolve();if(1==m){if(l=r[0],v=v.replace(\"{class}\",u.mime2class(l.mime)),d=h.itemTitle.replace(\"{name}\",u.escape(l.i18||l.name)).replace(\"{kind}\",u.mime2kind(l)),l.tmb&&(s=u.option(\"tmbUrl\")+l.tmb),l.read?\"directory\"!=l.mime||l.alias?o=u.formatSize(l.size):(o=h.spinner.replace(\"{text}\",a.calc).replace(\"{name}\",\"size\"),k.push(l.hash)):o=a.unknown,g.push(f.replace(b,a.size).replace(y,o)),l.alias&&g.push(f.replace(b,a.aliasfor).replace(y,l.alias)),g.push(f.replace(b,a.path).replace(y,u.escape(u.path(l.hash,!0)))),l.read){var S,M=u.escape(l.name);if(\"1\"==l.url)g.push(f.replace(b,a.link).replace(y,'<button class=\"'+i+\" \"+n+'-url\">'+a.getlink+\"</button>\"));else{if(p.nullUrlDirLinkSelf&&\"directory\"==l.mime&&null===l.url){var P=window.location;S=P.pathname+P.search+\"#elf_\"+l.hash}else S=u.url(l.hash);g.push(f.replace(b,a.link).replace(y,'<a href=\"'+S+'\" target=\"_blank\">'+M+\"</a>\"))}}l.dim?g.push(f.replace(b,a.dim).replace(y,l.dim)):-1!==l.mime.indexOf(\"image\")&&(l.width&&l.height?g.push(f.replace(b,a.dim).replace(y,l.width+\"x\"+l.height)):(g.push(f.replace(b,a.dim).replace(y,h.spinner.replace(\"{text}\",a.calc).replace(\"{name}\",\"dim\"))),w.push(u.request({data:{cmd:\"dim\",target:l.hash},preventDefault:!0}).fail(function(){C(a.unknown,\"dim\")}).done(function(e){if(C(e.dim||a.unknown,\"dim\"),e.dim){var t=e.dim.split(\"x\"),n=u.file(l.hash);n.width=t[0],n.height=t[1]}})))),g.push(f.replace(b,a.modify).replace(y,u.formatDate(l))),g.push(f.replace(b,a.perms).replace(y,u.formatPermissions(l))),g.push(f.replace(b,a.locked).replace(y,l.locked?a.yes:a.no)),l.owner&&g.push(f.replace(b,a.owner).replace(y,l.owner)),l.group&&g.push(f.replace(b,a.group).replace(y,l.group)),l.perm&&g.push(f.replace(b,a.perm).replace(y,u.formatFileMode(l.perm))),p.custom&&e.each(p.custom,function(t,n){n.mimes&&!e.map(n.mimes,function(e){return l.mime===e||0===l.mime.indexOf(e+\"/\")?!0:null}).length||n.hashRegex&&!l.hash.match(n.hashRegex)||(g.push(f.replace(b,u.i18n(n.label)).replace(y,n.tpl.replace(\"{id}\",T))),n.action&&\"function\"==typeof n.action&&F.push(n.action))})}else v=v.replace(\"{class}\",\"elfinder-cwd-icon-group\"),d=h.groupTitle.replace(\"{items}\",a.items).replace(\"{num}\",m),c=e.map(r,function(e){return\"directory\"==e.mime?1:null}).length,c?(g.push(f.replace(b,a.kind).replace(y,c==m?a.folders:a.folders+\" \"+c+\", \"+a.files+\" \"+(m-c))),g.push(f.replace(b,a.size).replace(y,h.spinner.replace(\"{text}\",a.calc).replace(\"{name}\",\"size\"))),k=e.map(r,function(e){return e.hash})):(o=0,e.each(r,function(e,t){var n=parseInt(t.size);n>=0&&o>=0?o+=n:o=\"unknown\"}),g.push(f.replace(b,a.kind).replace(y,a.files)),g.push(f.replace(b,a.size).replace(y,u.formatSize(o))));v=v.replace(\"{title}\",d).replace(\"{content}\",g.join(\"\")),I=u.dialog(v,x),I.attr(\"id\",T),l&&\"1\"==l.url&&I.on(\"click\",\".\"+n+\"-url\",function(){e(this).parent().html(h.spinner.replace(\"{text}\",u.i18n(\"ntfurl\")).replace(\"{name}\",\"url\")),u.request({data:{cmd:\"url\",target:l.hash},preventDefault:!0}).fail(function(){C(M,\"url\")}).done(function(e){if(e.url){C('<a href=\"'+e.url+'\" target=\"_blank\">'+M+\"</a>\"||M,\"url\");var t=u.file(l.hash);t.url=e.url}else C(M,\"url\")})}),s&&e(\"<img/>\").load(function(){I.find(\".elfinder-cwd-icon\").css(\"background\",'url(\"'+s+'\") center center no-repeat')}).attr(\"src\",s),k.length&&w.push(u.request({data:{cmd:\"size\",targets:k},preventDefault:!0}).fail(function(){C(a.unknown,\"size\")}).done(function(e){var t=parseInt(e.size);C(t>=0?u.formatSize(t):a.unknown,\"size\")})),F.length&&e.each(F,function(e,t){try{t(l,u,I)}catch(n){u.debug(\"error\",n)}})}},elFinder.prototype.commands.mkdir=function(){var t=this.fm,n=this;this.value=\"\",this.disableOnSearch=!0,this.updateOnSelect=!1,this.mime=\"directory\",this.prefix=\"untitled folder\",this.exec=e.proxy(t.res(\"mixin\",\"make\"),this),this.shortcuts=[{pattern:\"ctrl+shift+n\"}],this.options={ui:\"mkdirbutton\"},t.bind(\"select\",function(e){var i=e.data&&e.data.selected?e.data.selected:[];n.title=i.length?t.i18n(\"cmdmkdirin\"):t.i18n(\"cmdmkdir\"),n.update(void 0,n.title)}),this.getstate=function(n){var i=t.cwd(),n=n&&n[0]!=i.hash?this.files(n):[],a=n.length;return this._disabled||!i.write||a&&e.map(n,function(e){return e.phash&&e.read&&!e.locked?e:null}).length!=a?-1:0}},elFinder.prototype.commands.mkfile=function(){this.disableOnSearch=!0,this.updateOnSelect=!1,this.mime=\"text/plain\",this.prefix=\"untitled file.txt\",this.exec=e.proxy(this.fm.res(\"mixin\",\"make\"),this),this.getstate=function(){return!this._disabled&&this.fm.cwd().write?0:-1}},elFinder.prototype.commands.netmount=function(){var t=this;this.alwaysEnabled=!0,this.updateOnSelect=!1,this.drivers=[],this.handlers={load:function(){this.drivers=this.fm.netDrivers}},this.getstate=function(){return this.drivers.length?0:-1},this.exec=function(){var n=t.fm,i=e.Deferred(),a=t.options,r=function(){var r,o={protocol:e(\"<select/>\").change(function(){var e=this.value;l.find(\".elfinder-netmount-tr\").hide(),l.find(\".elfinder-netmount-tr-\"+e).show(),\"function\"==typeof a[e].select&&a[e].select(n)})},s={title:n.i18n(\"netMountDialogTitle\"),resizable:!1,modal:!0,destroyOnClose:!0,close:function(){delete t.dialog,\"pending\"==i.state()&&i.reject()},buttons:{}},l=e('<table class=\"elfinder-info-tb elfinder-netmount-tb\"/>'),d=e(\"<div/>\");return l.append(e(\"<tr/>\").append(e(\"<td>\"+n.i18n(\"protocol\")+\"</td>\")).append(e(\"<td/>\").append(o.protocol))),e.each(t.drivers,function(t,i){o.protocol.append('<option value=\"'+i+'\">'+n.i18n(i)+\"</option>\"),e.each(a[i].inputs,function(t,a){a.attr(\"name\",t),\"hidden\"!=a.attr(\"type\")?(a.addClass(\"ui-corner-all elfinder-netmount-inputs-\"+i),l.append(e(\"<tr/>\").addClass(\"elfinder-netmount-tr elfinder-netmount-tr-\"+i).append(e(\"<td>\"+n.i18n(t)+\"</td>\")).append(e(\"<td/>\").append(a)))):(a.addClass(\"elfinder-netmount-inputs-\"+i),d.append(a))})}),l.append(d),l.find(\".elfinder-netmount-tr\").hide(),s.buttons[n.i18n(\"btnMount\")]=function(){var a=o.protocol.val(),r={cmd:\"netmount\",protocol:a};return e.each(l.find(\"input.elfinder-netmount-inputs-\"+a),function(t,n){var i;i=\"function\"==typeof n.val?e.trim(n.val()):e.trim(n.value),i&&(r[n.name]=i)}),r.host?(n.request({data:r,notify:{type:\"netmount\",cnt:1,hideCnt:!0}}).done(function(e){e.added&&e.added.length&&n.exec(\"open\",e.added[0].hash),i.resolve()}).fail(function(e){i.reject(e)}),t.dialog.elfinderdialog(\"close\"),void 0):n.trigger(\"error\",{error:\"errNetMountHostReq\"})},s.buttons[n.i18n(\"btnCancel\")]=function(){t.dialog.elfinderdialog(\"close\")},r=n.dialog(l,s),r.ready(function(){o.protocol.change(),r.elfinderdialog(\"posInit\")}),r};return n.bind(\"netmount\",function(e){var t=e.data||null;t&&t.protocol&&a[t.protocol]&&\"function\"==typeof a[t.protocol].done&&a[t.protocol].done(n,t)}),t.dialog||(t.dialog=r()),i.promise()}},elFinder.prototype.commands.netunmount=function(){this.alwaysEnabled=!0,this.updateOnSelect=!1,this.drivers=[],this.handlers={load:function(){this.drivers=this.fm.netDrivers}},this.getstate=function(e){var t=this.fm;return e&&this.drivers.length&&!this._disabled&&t.file(e[0]).netkey?0:-1},this.exec=function(t){var n=this,i=this.fm,a=e.Deferred().fail(function(e){e&&i.error(e)}),r=i.file(t[0]);return this._disabled?a.reject():(\"pending\"==a.state()&&i.confirm({title:n.title,text:i.i18n(\"confirmUnmount\",r.name),accept:{label:\"btnUnmount\",callback:function(){i.request({data:{cmd:\"netmount\",protocol:\"netunmount\",host:r.netkey,user:r.hash,pass:\"dum\"},notify:{type:\"netunmount\",cnt:1,hideCnt:!0},preventFail:!0}).fail(function(e){a.reject(e)}).done(function(e){var t=i.root()==r.hash;if(e.removed=[r.hash],i.remove(e),t){var n=i.files();for(var o in n)if(\"directory\"==i.file(o).mime){i.exec(\"open\",o);break}}a.resolve()})}},cancel:{label:\"btnCancel\",callback:function(){a.reject()}}}),a)}},elFinder.prototype.commands.open=function(){this.alwaysEnabled=!0,this._handlers={dblclick:function(e){e.preventDefault(),this.exec()},\"select enable disable reload\":function(e){this.update(\"disable\"==e.type?-1:void 0)}},this.shortcuts=[{pattern:\"ctrl+down numpad_enter\"+(\"mac\"!=this.fm.OS&&\" enter\")}],this.getstate=function(t){var t=this.files(t),n=t.length;return 1==n?0:n&&!this.fm.UA.Mobile?e.map(t,function(e){return\"directory\"==e.mime?null:e}).length==n?0:-1:-1},this.exec=function(t,n){var i,a,r,o,s,l,d,c,u,p,h,f,m=this.fm,g=e.Deferred().fail(function(e){e&&m.error(e)}),v=this.files(t),b=v.length,y=\"object\"==typeof n?n.thash:!1;if(!b&&!y)return g.reject();if(y||1==b&&(i=v[0])&&\"directory\"==i.mime)return y||!i||i.read?m.request({data:{cmd:\"open\",target:y||i.hash},notify:{type:\"open\",cnt:1,hideCnt:!0},syncOnFail:!0}):g.reject([\"errOpen\",i.name,\"errPerm\"]);if(v=e.map(v,function(e){return\"directory\"!=e.mime?e:null}),b!=v.length)return g.reject();try{u=new RegExp(m.option(\"dispInlineRegex\"))}catch(w){u=!1}for(p=e(\"<a>\").hide().appendTo(e(\"body\")),h=\"string\"==typeof p.get(0).download,b=v.length;b--;){if(i=v[b],!i.read)return g.reject([\"errOpen\",i.name,\"errPerm\"]);if(f=u&&i.mime.match(u),a=m.openUrl(i.hash,!f),m.UA.Mobile||!f)if(h)!f&&p.attr(\"download\",i.name),p.attr(\"href\",a).attr(\"target\",\"_blank\").get(0).click();else{var x=window.open(a);if(!x)return g.reject(\"errPopup\")}else{s=d=Math.round(2*e(window).width()/3),l=c=Math.round(2*e(window).height()/3),parseInt(i.width)&&parseInt(i.height)?(s=parseInt(i.width),l=parseInt(i.height)):i.dim&&(r=i.dim.split(\"x\"),s=parseInt(r[0]),l=parseInt(r[1])),d>=s&&c>=l?(d=s,c=l):s-d>l-c?c=Math.round(l*(d/s)):d=Math.round(s*(c/l)),o=\"width=\"+d+\",height=\"+c,0===a.indexOf(m.options.url)&&(a=\"\");var x=window.open(a,\"new_window\",o+\",top=50,left=50,scrollbars=yes,resizable=yes\");if(!x)return g.reject(\"errPopup\");if(\"\"===a){var k=document.createElement(\"form\");k.action=m.options.url,k.method=\"POST\",k.target=\"new_window\",k.style.display=\"none\";var C=e.extend({},m.options.customData,{cmd:\"file\",target:i.hash});e.each(C,function(e,t){var n=document.createElement(\"input\");n.name=e,n.value=t,k.appendChild(n)}),document.body.appendChild(k),k.submit()}x.focus()}}return p.remove(),g.resolve(t)}},elFinder.prototype.commands.opendir=function(){this.alwaysEnabled=!0,this.getstate=function(){var e,t=this.fm.selected(),n=t.length;return 1!==n?-1:(e=this.fm.getUI(\"cwd\").parent(),e.hasClass(\"elfinder-search-result\")?0:-1)},this.exec=function(t){var n,i=this.fm,a=e.Deferred(),r=this.files(t),o=r.length,s=null;return o&&r[0].phash?(n=r[0].phash,i.file(n)||(s=i.request({data:{cmd:\"parents\",target:n},syncOnFail:!1})),e.when(s).done(function(){i.trigger(\"searchend\",{noupdate:!0}),i.request({data:{cmd:\"open\",target:n},notify:{type:\"open\",cnt:1,hideCnt:!0},syncOnFail:!1})}),a):a.reject()}},elFinder.prototype.commands.paste=function(){this.updateOnSelect=!1,this.handlers={changeclipboard:function(){this.update()}},this.shortcuts=[{pattern:\"ctrl+v shift+insert\"}],this.getstate=function(t){if(this._disabled)return-1;if(t){if(e.isArray(t)){if(1!=t.length)return-1;t=this.fm.file(t[0])}}else t=this.fm.cwd();return this.fm.clipboard().length&&\"directory\"==t.mime&&t.write?0:-1},this.exec=function(t){var n,i,a=this,r=a.fm,t=t?this.files(t)[0]:r.cwd(),o=r.clipboard(),s=o.length,l=s?o[0].cut:!1,d=l?\"errMove\":\"errCopy\",c=[],u=[],p=e.Deferred().fail(function(e){e&&r.error(e)}).always(function(){r.unlockfiles({files:e.map(o,function(e){return e.hash})})}),h=function(t){return t.length&&r._commands.duplicate?r.exec(\"duplicate\",t):e.Deferred().resolve()},f=function(n){var i,o=e.Deferred(),s=[],d={},c=function(t,n){for(var i=[],a=t.length;a--;)-1!==e.inArray(t[a].name,n)&&i.unshift(a);return i},u=function(e){var t=s[e],i=n[t],a=e==s.length-1;i&&r.confirm({title:r.i18n(l?\"moveFiles\":\"copyFiles\"),text:[\"errExists\",i.name,\"confirmRepl\"],all:!a,accept:{label:\"btnYes\",callback:function(t){a||t?h(n):u(++e)}},reject:{label:\"btnNo\",callback:function(t){var i;if(t)for(i=s.length;e<i--;)n[s[i]].remove=!0;else n[s[e]].remove=!0;a||t?h(n):u(++e)}},cancel:{label:\"btnCancel\",callback:function(){o.resolve()}},buttons:[{label:\"btnBackup\",callback:function(t){var i;if(t)for(i=s.length;e<i--;)n[s[i]].rename=!0;else n[s[e]].rename=!0;a||t?h(n):u(++e)}}]})},p=function(t){var i={};t&&(e.isArray(t)?t.length&&(\"string\"==typeof t[0]?s=c(n,t):(e.each(t,function(e,t){i[t.name]=t.hash}),s=c(n,e.map(i,function(e,t){return t})),e.each(n,function(e,t){i[t.name]&&(d[i[t.name]]=t.name)}))):(s=c(n,e.map(t,function(e){return e})),d=t)),s.length?u(0):h(n)},h=function(n){var i,a=[],n=e.map(n,function(e){return e.rename&&a.push(e.name),e.remove?null:e}),s=n.length;return s?(i=n[0].phash,n=e.map(n,function(e){return e.hash}),r.request({data:{cmd:\"paste\",dst:t.hash,targets:n,cut:l?1:0,src:i,renames:a,hashes:d,suffix:r.options.backupSuffix},notify:{type:l?\"move\":\"copy\",cnt:s}}).done(function(e){if(o.resolve(e),e&&e.added&&e.added[0]){var t=r.getUI(\"cwd\").find(\"#\"+r.cwdHash2Id(e.added[0].hash));t.length&&t.trigger(\"scrolltoview\")}}).always(function(){r.unlockfiles({files:n})}),void 0):o.resolve()};return r.isCommandEnabled(a.name,t.hash)&&n.length?(r.oldAPI?h(n):r.option(\"copyOverwrite\")?(i=e.map(n,function(e){return e.name}),t.hash==r.cwd().hash?p(e.map(r.files(),function(e){return e.phash==t.hash?{hash:e.hash,name:e.name}:null})):r.request({data:{cmd:\"ls\",target:t.hash,intersect:i},notify:{type:\"prepare\",cnt:1,hideCnt:!0},preventFail:!0}).always(function(e){p(e.list)})):h(n),o):o.resolve()};return s&&t&&\"directory\"==t.mime?t.write?(n=r.parents(t.hash),e.each(o,function(a,s){return s.read?l&&s.locked?!p.reject([\"errLocked\",s.name]):-1!==e.inArray(s.hash,n)?!p.reject([\"errCopyInItself\",s.name]):(i=r.parents(s.hash),i.pop(),-1!==e.inArray(t.hash,i)&&e.map(i,function(e){var n=r.file(e);return n.phash==t.hash&&n.name==s.name?n:null}).length?!p.reject([\"errReplByChild\",s.name]):(s.phash==t.hash?u.push(s.hash):c.push({hash:s.hash,phash:s.phash,name:s.name}),void 0)):!p.reject([d,o[0].name,\"errPerm\"])}),\"rejected\"==p.state()?p:e.when(h(u),f(c)).always(function(){l&&r.clipboard([])})):p.reject([d,o[0].name,\"errPerm\"]):p.reject()}},elFinder.prototype.commands.places=function(){var t=this,n=this.fm,i=function(n){return e.map(t.files(n),function(e){return\"directory\"==e.mime?e:null})},a=null;this.getstate=function(e){var e=this.hashes(e),t=e.length;return a&&t&&t==i(e).length?0:-1},this.exec=function(e){var t=this.files(e);a.trigger(\"regist\",[t])},n.one(\"load\",function(){a=n.ui.places})},elFinder.prototype.commands.quicklook=function(){var t,n,i,a,r=this,o=r.fm,s=0,l=1,d=2,c=s,u=\"elfinder-quicklook-navbar-icon\",p=\"elfinder-quicklook-fullscreen\",h=function(t){e(document).trigger(e.Event(\"keydown\",{keyCode:t,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1}))},f=function(e){return{opacity:0,width:20,height:\"list\"==o.view?1:20,top:e.offset().top+\"px\",left:e.offset().left+\"px\"}},m=function(){var i=e(window),a=Math.min(t,e(window).width()-10),r=Math.min(n,e(window).height()-80);return{opacity:1,width:a,height:r,top:parseInt((i.height()-r-60)/2+i.scrollTop()),left:parseInt((i.width()-a)/2+i.scrollLeft())}},g=function(e){var t=document.createElement(e.substr(0,e.indexOf(\"/\"))),n=!1;try{n=t.canPlayType&&t.canPlayType(e)}catch(i){}return n&&\"\"!==n&&\"no\"!=n},v=e('<div class=\"elfinder-quicklook-title\"/>'),b=e(\"<div/>\"),y=e('<div class=\"elfinder-quicklook-info\"/>'),w=e('<div class=\"'+u+\" \"+u+'-fullscreen\"/>').mousedown(function(t){var n=r.window,a=n.hasClass(p),s=\"scroll.\"+o.namespace,l=e(window);t.stopPropagation(),a?(n.css(n.data(\"position\")).unbind(\"mousemove\"),l.unbind(s).trigger(r.resize).unbind(r.resize),x.unbind(\"mouseenter\").unbind(\"mousemove\")):(n.data(\"position\",{left:n.css(\"left\"),top:n.css(\"top\"),width:n.width(),height:n.height()}).css({width:\"100%\",height:\"100%\"}),e(window).bind(s,function(){n.css({left:parseInt(e(window).scrollLeft())+\"px\",top:parseInt(e(window).scrollTop())+\"px\"})}).bind(r.resize,function(){r.preview.trigger(\"changesize\")}).trigger(s).trigger(r.resize),n.bind(\"mousemove\",function(){x.stop(!0,!0).show().delay(3e3).fadeOut(\"slow\")}).mousemove(),x.mouseenter(function(){x.stop(!0,!0).show()}).mousemove(function(e){e.stopPropagation()})),x.attr(\"style\",\"\").draggable(a?\"destroy\":{}),n.toggleClass(p),e(this).toggleClass(u+\"-fullscreen-off\");var d=n;i.is(\".ui-resizable\")&&(d=d.add(i)),e.fn.resizable&&!o.UA.Touch&&d.resizable(a?\"enable\":\"disable\").removeClass(\"ui-state-disabled\")}),x=e('<div class=\"elfinder-quicklook-navbar\"/>').append(e('<div class=\"'+u+\" \"+u+'-prev\"/>').mousedown(function(){h(37)})).append(w).append(e('<div class=\"'+u+\" \"+u+'-next\"/>').mousedown(function(){h(39)})).append('<div class=\"elfinder-quicklook-navbar-separator\"/>').append(e('<div class=\"'+u+\" \"+u+'-close\"/>').mousedown(function(){r.window.trigger(\"close\")}));this.resize=\"resize.\"+o.namespace,this.info=e('<div class=\"elfinder-quicklook-info-wrapper\"/>').append(b).append(y),this.preview=e('<div class=\"elfinder-quicklook-preview ui-helper-clearfix\"/>').bind(\"change\",function(){r.info.attr(\"style\",\"\").hide(),b.removeAttr(\"class\").attr(\"style\",\"\"),y.html(\"\")}).bind(\"update\",function(t){var n,i=r.fm,a=(r.preview,t.file),o='<div class=\"elfinder-quicklook-info-data\">{value}</div>';a?(!a.read&&t.stopImmediatePropagation(),r.window.data(\"hash\",a.hash),r.preview.unbind(\"changesize\").trigger(\"change\").children().remove(),v.html(i.escape(a.name)),y.html(o.replace(/\\{value\\}/,i.escape(a.name))+o.replace(/\\{value\\}/,i.mime2kind(a))+(\"directory\"==a.mime?\"\":o.replace(/\\{value\\}/,i.formatSize(a.size)))+o.replace(/\\{value\\}/,i.i18n(\"modify\")+\": \"+i.formatDate(a))),b.addClass(\"elfinder-cwd-icon ui-corner-all \"+i.mime2class(a.mime)),a.tmb&&e(\"<img/>\").hide().appendTo(r.preview).load(function(){b.css(\"background\",'url(\"'+n+'\") center center no-repeat'),e(this).remove()}).attr(\"src\",n=i.tmb(a.hash)),r.info.delay(100).fadeIn(10)):t.stopImmediatePropagation()}),this.window=e('<div class=\"ui-front ui-helper-reset ui-widget elfinder-quicklook\" style=\"position:absolute\"/>').click(function(e){e.stopPropagation()}).append(e('<div class=\"elfinder-quicklook-titlebar\"/>').append(v).append(e('<span class=\"ui-icon ui-icon-circle-close\"/>').mousedown(function(e){e.stopPropagation(),r.window.trigger(\"close\")}))).append(this.preview.add(x)).append(r.info.hide()).draggable({handle:\"div.elfinder-quicklook-titlebar\"}).bind(\"open\",function(){var e,t=r.window,n=r.value;r.closed()&&n&&(e=a.find(\"#\"+o.cwdHash2Id(n.hash))).length&&(x.attr(\"style\",\"\"),c=l,e.trigger(\"scrolltoview\"),t.css(f(e)).show().animate(m(),550,function(){c=d,r.update(1,r.value)}))}).bind(\"close\",function(){var e=r.window,t=r.preview.trigger(\"change\"),n=(r.value,a.find(\"#\"+o.cwdHash2Id(e.data(\"hash\")))),i=function(){c=s,e.hide(),t.children().remove(),r.update(0,r.value)};r.opened()&&(c=l,e.hasClass(p)&&w.mousedown(),n.length?e.animate(f(n),500,i):i())}),this.alwaysEnabled=!0,this.value=null,this.handlers={select:function(){this.update(void 0,this.fm.selectedFiles()[0])},error:function(){r.window.is(\":visible\")&&r.window.data(\"hash\",\"\").trigger(\"close\")},\"searchshow searchhide\":function(){this.opened()&&this.window.trigger(\"close\")}},this.shortcuts=[{pattern:\"space\"}],this.support={audio:{ogg:g('audio/ogg; codecs=\"vorbis\"'),mp3:g(\"audio/mpeg;\"),wav:g('audio/wav; codecs=\"1\"'),m4a:g(\"audio/x-m4a;\")||g(\"audio/aac;\")},video:{ogg:g('video/ogg; codecs=\"theora\"'),webm:g('video/webm; codecs=\"vp8, vorbis\"'),mp4:g('video/mp4; codecs=\"avc1.42E01E\"')||g('video/mp4; codecs=\"avc1.42E01E, mp4a.40.2\"')}},this.closed=function(){return c==s},this.opened=function(){return c==d},this.init=function(){var s=this.options,l=this.window,d=this.preview;t=s.width>0?parseInt(s.width):450,n=s.height>0?parseInt(s.height):300,o.one(\"load\",function(){i=o.getUI(),a=o.getUI(\"cwd\"),l.appendTo(\"body\"),e(document).keydown(function(e){27==e.keyCode&&r.opened()&&l.trigger(\"close\")}),e.fn.resizable&&!o.UA.Touch&&l.resizable({handles:\"se\",minWidth:350,minHeight:120,resize:function(){d.trigger(\"changesize\")}}),r.change(function(){r.opened()&&(r.value?d.trigger(e.Event(\"update\",{file:r.value})):l.trigger(\"close\"))}),e.each(o.commands.quicklook.plugins||[],function(e,t){\"function\"==typeof t&&new t(r)}),d.bind(\"update\",function(){r.info.show()})})},this.getstate=function(){return 1==this.fm.selected().length?c==d?1:0:-1},this.exec=function(){this.enabled()&&this.window.trigger(this.opened()?\"close\":\"open\")},this.hideinfo=function(){this.info.stop(!0).hide()}},elFinder.prototype.commands.quicklook.plugins=[function(t){var n=[\"image/jpeg\",\"image/png\",\"image/gif\"],i=t.preview;e.each(navigator.mimeTypes,function(t,i){var a=i.type;\n-0===a.indexOf(\"image/\")&&e.inArray(a,n)&&n.push(a)}),i.bind(\"update\",function(a){var r,o=a.file;-1!==e.inArray(o.mime,n)&&(a.stopImmediatePropagation(),r=e(\"<img/>\").hide().appendTo(i).load(function(){setTimeout(function(){var e=(r.width()/r.height()).toFixed(2);i.bind(\"changesize\",function(){var t,n,a=parseInt(i.width()),o=parseInt(i.height());e<(a/o).toFixed(2)?(n=o,t=Math.floor(n*e)):(t=a,n=Math.floor(t/e)),r.width(t).height(n).css(\"margin-top\",o>n?Math.floor((o-n)/2):0)}).trigger(\"changesize\"),t.hideinfo(),r.fadeIn(100)},1)}).attr(\"src\",t.fm.openUrl(o.hash)))})},function(t){var n=[\"text/html\",\"application/xhtml+xml\"],i=t.preview,a=t.fm;i.bind(\"update\",function(r){var o,s=r.file;-1!==e.inArray(s.mime,n)&&(r.stopImmediatePropagation(),i.one(\"change\",function(){\"pending\"==o.state()&&o.reject()}),o=a.request({data:{cmd:\"get\",target:s.hash,current:s.phash,conv:1},preventDefault:!0}).done(function(n){t.hideinfo(),doc=e('<iframe class=\"elfinder-quicklook-preview-html\"/>').appendTo(i)[0].contentWindow.document,doc.open(),doc.write(n.content),doc.close()}))})},function(t){var n=t.fm,i=n.res(\"mimes\",\"text\"),a=t.preview;a.bind(\"update\",function(r){var o,s=r.file,l=s.mime;(0===l.indexOf(\"text/\")||-1!==e.inArray(l,i))&&(r.stopImmediatePropagation(),a.one(\"change\",function(){\"pending\"==o.state()&&o.reject()}),o=n.request({data:{cmd:\"get\",target:s.hash,conv:1},preventDefault:!0}).done(function(i){t.hideinfo(),e('<div class=\"elfinder-quicklook-preview-text-wrapper\"><pre class=\"elfinder-quicklook-preview-text\">'+n.escape(i.content)+\"</pre></div>\").appendTo(a)}))})},function(t){var n=t.fm,i=\"application/pdf\",a=t.preview,r=!1;n.UA.Safari&&\"mac\"==n.OS||n.UA.IE?r=!0:e.each(navigator.plugins,function(t,n){e.each(n,function(e,t){return t.type==i?!(r=!0):void 0})}),r&&a.bind(\"update\",function(r){var o,s=r.file;s.mime==i&&(r.stopImmediatePropagation(),a.one(\"change\",function(){o.unbind(\"load\").remove()}),o=e('<iframe class=\"elfinder-quicklook-preview-pdf\"/>').hide().appendTo(a).load(function(){t.hideinfo(),o.show()}).attr(\"src\",n.url(s.hash)))})},function(t){var n=t.fm,i=\"application/x-shockwave-flash\",a=t.preview,r=!1;e.each(navigator.plugins,function(t,n){e.each(n,function(e,t){return t.type==i?!(r=!0):void 0})}),r&&a.bind(\"update\",function(r){var o,s=r.file;s.mime==i&&(r.stopImmediatePropagation(),t.hideinfo(),a.append(o=e('<embed class=\"elfinder-quicklook-preview-flash\" pluginspage=\"http://www.macromedia.com/go/getflashplayer\" src=\"'+n.url(s.hash)+'\" quality=\"high\" type=\"application/x-shockwave-flash\" />')))})},function(t){var n,i=t.preview,a=!!t.options.autoplay,r={\"audio/mpeg\":\"mp3\",\"audio/mpeg3\":\"mp3\",\"audio/mp3\":\"mp3\",\"audio/x-mpeg3\":\"mp3\",\"audio/x-mp3\":\"mp3\",\"audio/x-wav\":\"wav\",\"audio/wav\":\"wav\",\"audio/x-m4a\":\"m4a\",\"audio/aac\":\"m4a\",\"audio/mp4\":\"m4a\",\"audio/x-mp4\":\"m4a\",\"audio/ogg\":\"ogg\"};i.bind(\"update\",function(o){var s=o.file,l=r[s.mime];t.support.audio[l]&&(o.stopImmediatePropagation(),n=e('<audio class=\"elfinder-quicklook-preview-audio\" controls preload=\"auto\" autobuffer><source src=\"'+t.fm.openUrl(s.hash)+'\" /></audio>').appendTo(i),a&&n[0].play())}).bind(\"change\",function(){n&&n.parent().length&&(n[0].pause(),n.remove(),n=null)})},function(t){var n,i=t.preview,a=!!t.options.autoplay,r={\"video/mp4\":\"mp4\",\"video/x-m4v\":\"mp4\",\"video/ogg\":\"ogg\",\"application/ogg\":\"ogg\",\"video/webm\":\"webm\"};i.bind(\"update\",function(o){var s=o.file,l=r[s.mime];t.support.video[l]&&(o.stopImmediatePropagation(),t.hideinfo(),n=e('<video class=\"elfinder-quicklook-preview-video\" controls preload=\"auto\" autobuffer><source src=\"'+t.fm.openUrl(s.hash)+'\" /></video>').appendTo(i),a&&n[0].play())}).bind(\"change\",function(){n&&n.parent().length&&(n[0].pause(),n.remove(),n=null)})},function(t){var n,i=t.preview,a=[];e.each(navigator.plugins,function(t,n){e.each(n,function(e,t){(0===t.type.indexOf(\"audio/\")||0===t.type.indexOf(\"video/\"))&&a.push(t.type)})}),i.bind(\"update\",function(r){var o,s=r.file,l=s.mime;-1!==e.inArray(s.mime,a)&&(r.stopImmediatePropagation(),(o=0===l.indexOf(\"video/\"))&&t.hideinfo(),n=e('<embed src=\"'+t.fm.openUrl(s.hash)+'\" type=\"'+l+'\" class=\"elfinder-quicklook-preview-'+(o?\"video\":\"audio\")+'\"/>').appendTo(i))}).bind(\"change\",function(){n&&n.parent().length&&(n.remove(),n=null)})}],elFinder.prototype.commands.reload=function(){var t=this,n=!1;this.alwaysEnabled=!0,this.updateOnSelect=!0,this.shortcuts=[{pattern:\"ctrl+shift+r f5\"}],this.getstate=function(){return 0},this.init=function(){this.fm.bind(\"search searchend\",function(e){n=\"search\"==e.type})},this.fm.bind(\"contextmenu\",function(){var n=t.fm;if(n.options.sync>=1e3){var i;t.extra={icon:\"accept\",node:e(\"<span/>\").attr({title:n.i18n(\"autoSync\")}).on(\"click\",function(e){e.stopPropagation(),e.preventDefault(),i.parent().toggleClass(\"ui-state-disabled\",n.options.syncStart).parent().removeClass(\"ui-state-hover\"),n.options.syncStart=!n.options.syncStart,n.autoSync(n.options.syncStart?null:\"stop\")})},i=t.extra.node,i.ready(function(){setTimeout(function(){i.parent().toggleClass(\"ui-state-disabled\",!n.options.syncStart).css(\"pointer-events\",\"auto\")},10)})}}),this.exec=function(){var t=this.fm;if(!n){var i=t.sync(),a=setTimeout(function(){t.notify({type:\"reload\",cnt:1,hideCnt:!0}),i.always(function(){t.notify({type:\"reload\",cnt:-1})})},t.notifyDelay);return i.always(function(){clearTimeout(a),t.trigger(\"reload\")})}e(\"div.elfinder-toolbar > div.\"+t.res(\"class\",\"searchbtn\")+\" > span.ui-icon-search\").click()}},elFinder.prototype.commands.rename=function(){this.shortcuts=[{pattern:\"f2\"+(\"mac\"==this.fm.OS?\" enter\":\"\")}],this.getstate=function(e){var e=this.files(e);return this._disabled||1!=e.length||!e[0].phash||e[0].locked?-1:0},this.exec=function(t){var n,i=this.fm,a=i.getUI(\"cwd\"),r=t||(i.selected().length?i.selected():!1)||[i.cwd().hash],o=r.length,s=i.file(r.shift()),l=\".elfinder-cwd-filename\",d=t&&t._type?t._type:i.selected().length?\"files\":\"navbar\",c=\"navbar\"===d,u=e(\"#\"+i[c?\"navHash2Id\":\"cwdHash2Id\"](s.hash)),p=i.cwd().hash==s.hash,h=\"files\"===d&&\"list\"!=i.storage(\"view\"),f=function(){w.is(\":hidden\")||w.addClass(\"ui-front\").elfinderoverlay(\"hide\").off(\"click\",x),y.removeClass(\"ui-front\").css(\"position\",\"\"),h?v.css(\"max-height\",\"\"):c||y.css(\"width\",\"\").parent(\"td\").css(\"overflow\",\"\")},m=e.Deferred().done(function(e){p&&i.exec(\"open\",e.added[0].hash)}).fail(function(e){var t=g.parent(),n=i.escape(s.name);h&&(n=n.replace(/([_.])/g,\"&#8203;$1\")),c?g.replaceWith(n):t.length?(g.remove(),t.html(n)):(u.find(l).html(n),setTimeout(function(){a.find(\"#\"+i.cwdHash2Id(s.hash)).click()},50)),e&&i.error(e)}).always(function(){f(),i.enable()}),g=e(h?\"<textarea/>\":'<input type=\"text\"/>').on(\"keyup text\",function(){h?(this.style.height=\"1px\",this.style.height=this.scrollHeight+\"px\"):n&&(this.style.width=n+\"px\",this.scrollWidth>n&&(this.style.width=this.scrollWidth+10+\"px\"))}).keydown(function(t){t.stopPropagation(),t.stopImmediatePropagation(),t.keyCode==e.ui.keyCode.ESCAPE?m.reject():t.keyCode==e.ui.keyCode.ENTER&&g.blur()}).mousedown(function(e){e.stopPropagation()}).click(function(e){e.stopPropagation()}).dblclick(function(e){e.stopPropagation(),e.preventDefault()}).blur(function(){var t=e.trim(g.val()),n=(g.parent(),!0);if(y.length){if(g[0].setSelectionRange&&g[0].setSelectionRange(0,0),t==s.name)return m.reject();if(i.options.validName&&i.options.validName.test)try{n=i.options.validName.test(t)}catch(r){n=!1}if(!t||\"..\"===t||!n)return i.error(\"errInvName\"),!1;if(i.fileByName(t,s.phash))return i.error([\"errExists\",t]),!1;f(),(c?y:v).html(i.escape(t)),i.lockfiles({files:[s.hash]}),i.request({data:{cmd:\"rename\",target:s.hash,name:t},notify:{type:\"rename\",cnt:1}}).fail(function(){m.reject(),i.sync()}).done(function(e){if(m.resolve(e),!c&&e&&e.added&&e.added[0]){var t=a.find(\"#\"+i.cwdHash2Id(e.added[0].hash));t.length&&t.trigger(\"scrolltoview\")}}).always(function(){i.unlockfiles({files:[s.hash]})})}}),v=c?u.contents().filter(function(){return 3==this.nodeType&&e(this).parent().attr(\"id\")===i.navHash2Id(s.hash)}):u.find(l),b=s.name.replace(/\\.((tar\\.(gz|bz|bz2|z|lzo))|cpio\\.gz|ps\\.gz|xcf\\.(gz|bz2)|[a-z0-9]{1,4})$/gi,\"\"),y=v.parent(),w=i.getUI().children(\".elfinder-overlay\"),x=function(e){e.stopPropagation(),m.reject()};return y.addClass(\"ui-front\").css(\"position\",\"relative\"),c?v.replaceWith(g.val(s.name)):(h?v.css(\"max-height\",\"none\"):c||(n=y.width(),y.width(n-15).parent(\"td\").css(\"overflow\",\"visible\")),v.empty().append(g.val(s.name))),i.UA.Mobile&&w.on(\"click\",x).removeClass(\"ui-front\").elfinderoverlay(\"show\"),o>1||this.getstate([s.hash])<0?m.reject():s&&v.length?s.locked?m.reject([\"errLocked\",s.name]):(i.one(\"select\",function(){g.parent().length&&s&&-1===e.inArray(s.hash,i.selected())&&g.blur()}),g.trigger(\"keyup\"),g.select().focus(),g[0].setSelectionRange&&g[0].setSelectionRange(0,b.length),m):m.reject(\"errCmdParams\",this.title)}},elFinder.prototype.commands.resize=function(){this.updateOnSelect=!1,this.getstate=function(){var e=this.fm.selectedFiles();return!this._disabled&&1==e.length&&e[0].read&&e[0].write&&-1!==e[0].mime.indexOf(\"image/\")?0:-1},this.exec=function(t){var n,i,a=this.fm,r=this.files(t),o=e.Deferred(),s=function(t,n){var i=\"image/jpeg\"===t.mime,r=e('<div class=\"elfinder-dialog-resize\"/>'),s='<input type=\"text\" size=\"5\"/>',l='<div class=\"elfinder-resize-row\"/>',d='<div class=\"elfinder-resize-label\"/>',c=e('<div class=\"elfinder-resize-control\"/>'),u=e('<div class=\"ui-front elfinder-resize-preview\"/>'),p=e('<div class=\"elfinder-resize-spinner\">'+a.i18n(\"ntfloadimg\")+\"</div>\"),h=e('<div class=\"elfinder-resize-handle\"/>'),f=e('<div class=\"elfinder-resize-handle\"/>'),m=e('<div class=\"elfinder-resize-uiresize\"/>'),g=e('<div class=\"elfinder-resize-uicrop\"/>'),v='<div class=\"ui-widget-content ui-corner-all elfinder-buttonset\"/>',b='<div class=\"ui-state-default elfinder-button\"/>',y='<span class=\"ui-widget-content elfinder-toolbar-button-separator\"/>',w=e('<div class=\"elfinder-resize-rotate\"/>'),x=e(b).attr(\"title\",a.i18n(\"rotate-cw\")).append(e('<span class=\"elfinder-button-icon elfinder-button-icon-rotate-l\"/>').click(function(){B-=90,nt.update(B)})),k=e(b).attr(\"title\",a.i18n(\"rotate-ccw\")).append(e('<span class=\"elfinder-button-icon elfinder-button-icon-rotate-r\"/>').click(function(){B+=90,nt.update(B)})),C=e(\"<span />\"),T=e('<div class=\"ui-state-default ui-corner-all elfinder-resize-reset\"><span class=\"ui-icon ui-icon-arrowreturnthick-1-w\"/></div>'),I=e('<div class=\"elfinder-resize-type\"/>').append('<input class=\"\" type=\"radio\" name=\"type\" id=\"'+n+'-resize\" value=\"resize\" checked=\"checked\" /><label for=\"'+n+'-resize\">'+a.i18n(\"resize\")+\"</label>\",'<input type=\"radio\" name=\"type\" id=\"'+n+'-crop\" value=\"crop\" /><label for=\"'+n+'-crop\">'+a.i18n(\"crop\")+\"</label>\",'<input type=\"radio\" name=\"type\" id=\"'+n+'-rotate\" value=\"rotate\" /><label for=\"'+n+'-rotate\">'+a.i18n(\"rotate\")+\"</label>\"),F=e(\"input\",I).attr(\"disabled\",\"disabled\").change(function(){var t=e(\"input:checked\",I).val();Z(),it(!0),at(!0),rt(!0),\"resize\"==t?(m.show(),w.hide(),g.hide(),it()):\"crop\"==t?(w.hide(),m.hide(),g.show(),at()):\"rotate\"==t&&(m.hide(),g.hide(),w.show(),rt())}),S=e('<input type=\"checkbox\" checked=\"checked\"/>').change(function(){q=!!S.prop(\"checked\"),et.fixHeight(),it(!0),it()}),M=e(s).change(function(){var e=parseInt(M.val()),t=parseInt(q?Math.round(e/_):P.val());e>0&&t>0&&(et.updateView(e,t),P.val(t))}),P=e(s).change(function(){var e=parseInt(P.val()),t=parseInt(q?Math.round(e*_):M.val());t>0&&e>0&&(et.updateView(t,e),M.val(t))}),A=e(s).change(function(){tt.updateView()}),O=e(s).change(function(){tt.updateView()}),D=e(s).change(function(){tt.updateView()}),U=e(s).change(function(){tt.updateView()}),z=i?e(s).val(a.option(\"jpgQuality\")).addClass(\"quality\").on(\"blur\",function(){var e=Math.min(100,Math.max(1,parseInt(this.value)));r.find(\"input.quality\").val(e)}):null,E=e('<input type=\"text\" size=\"3\" maxlength=\"3\" value=\"0\" />').change(function(){nt.update()}),j=e('<div class=\"elfinder-resize-rotate-slider\"/>').slider({min:0,max:360,value:E.val(),animate:!0,change:function(e,t){t.value!=j.slider(\"value\")&&nt.update(t.value)},slide:function(e,t){nt.update(t.value,!1)}}),_=1,R=1,H=0,N=0,q=!0,L=0,$=0,V=0,W=0,B=0,K=e(\"<img/>\").load(function(){p.remove(),H=K.width(),N=K.height(),_=H/N,et.updateView(H,N),h.append(K.show()).show(),M.val(H),P.val(N);var t=Math.min(L,$)/Math.sqrt(Math.pow(H,2)+Math.pow(N,2));V=H*t,W=N*t,F.button(\"enable\"),c.find(\"input,select\").removeAttr(\"disabled\").filter(\":text\").keydown(function(t){var n,i=t.keyCode;return t.stopPropagation(),i>=37&&40>=i||i==e.ui.keyCode.BACKSPACE||i==e.ui.keyCode.DELETE||65==i&&(t.ctrlKey||t.metaKey)||27==i?void 0:(9==i&&(n=e(this).parent()[t.shiftKey?\"prevAll\":\"nextAll\"](\"div.elfinder-resize-row\").children(\":text\"),n.length?n[0].focus():e(this).parent().parent().find(\":text:\"+(t.shiftKey?\"last\":\"first\")).focus()),13==i?(a.confirm({title:e(\"input:checked\",I).val(),text:\"confirmReq\",accept:{label:\"btnApply\",callback:function(){ot()}},cancel:{label:\"btnCancel\",callback:function(){}}}),void 0):(i>=48&&57>=i||i>=96&&105>=i||t.preventDefault(),void 0))}).filter(\":first\").focus(),it(),T.hover(function(){T.toggleClass(\"ui-state-hover\")}).click(Z)}).error(function(){p.text(\"Unable to load image\").css(\"background\",\"transparent\")}),J=e(\"<div/>\"),G=e(\"<img/>\"),X=e(\"<div/>\"),Y=e(\"<img/>\"),Q=function(e){return i?8*Math.round(e/8):Math.round(e)},Z=function(){M.val(H),P.val(N),et.updateView(H,N)},et={update:function(){M.val(Q(K.width()/R)),P.val(Q(K.height()/R))},updateView:function(e,t){e>L||t>$?e/L>t/$?(R=L/e,K.width(L).height(Math.ceil(t*R))):(R=$/t,K.height($).width(Math.ceil(e*R))):K.width(e).height(t),R=K.width()/e,C.text(\"1 : \"+(1/R).toFixed(2)),et.updateHandle()},updateHandle:function(){h.width(K.width()).height(K.height())},fixHeight:function(){var e,t;q&&(e=M.val(),t=Math.round(e/_),et.updateView(e,t),P.val(t))}},tt={update:function(){D.val(Q((f.data(\"w\")||f.width())/R)),U.val(Q((f.data(\"h\")||f.height())/R)),A.val(Math.round(((f.data(\"x\")||f.offset().left)-G.offset().left)/R)),O.val(Math.round(((f.data(\"y\")||f.offset().top)-G.offset().top)/R))},updateView:function(){var e=parseInt(A.val())*R+G.offset().left,t=parseInt(O.val())*R+G.offset().top,n=D.val()*R,i=U.val()*R;f.data({x:e,y:t,w:n,h:i}).width(Math.round(n)).height(Math.round(i)).offset({left:Math.round(e),top:Math.round(t)}),X.width(f.width()).height(f.height())},resize_update:function(){f.data({w:null,h:null}),tt.update(),X.width(f.width()).height(f.height())},drag_update:function(){f.data({x:null,y:null}),tt.update()}},nt={mouseStartAngle:0,imageStartAngle:0,imageBeingRotated:!1,update:function(e,t){\"undefined\"==typeof e&&(B=e=parseInt(E.val())),\"undefined\"==typeof t&&(t=!0),!t||a.UA.Opera||a.UA.ltIE8?Y.rotate(e):Y.animate({rotate:e+\"deg\"}),e%=360,0>e&&(e+=360),E.val(parseInt(e)),j.slider(\"value\",E.val())},execute:function(e){if(nt.imageBeingRotated){var t=nt.getCenter(Y),n=e.pageX-t[0],i=e.pageY-t[1],a=Math.atan2(i,n),r=a-nt.mouseStartAngle+nt.imageStartAngle;return r=Math.round(180*parseFloat(r)/Math.PI),e.shiftKey&&(r=15*Math.round((r+6)/15)),Y.rotate(r),r%=360,0>r&&(r+=360),E.val(r),j.slider(\"value\",E.val()),!1}},start:function(t){nt.imageBeingRotated=!0;var n=nt.getCenter(Y),i=t.pageX-n[0],a=t.pageY-n[1];return nt.mouseStartAngle=Math.atan2(a,i),nt.imageStartAngle=parseFloat(Y.rotate())*Math.PI/180,e(document).mousemove(nt.execute),!1},stop:function(){return nt.imageBeingRotated?(e(document).unbind(\"mousemove\",nt.execute),setTimeout(function(){nt.imageBeingRotated=!1},10),!1):void 0},getCenter:function(){var e=Y.rotate();Y.rotate(0);var t=Y.offset(),n=t.left+Y.width()/2,i=t.top+Y.height()/2;return Y.rotate(e),Array(n,i)}},it=function(t){e.fn.resizable&&(t?(h.filter(\":ui-resizable\").resizable(\"destroy\"),h.hide()):(h.show(),h.resizable({alsoResize:K,aspectRatio:q,resize:et.update,stop:et.fixHeight})))},at=function(t){e.fn.draggable&&e.fn.resizable&&(t?(f.filter(\":ui-resizable\").resizable(\"destroy\").filter(\":ui-draggable\").draggable(\"destroy\"),J.hide()):(J.show().width(K.width()).height(K.height()),G.width(K.width()).height(K.height()),X.width(K.width()).height(K.height()),f.width(G.width()).height(G.height()).offset(G.offset()).resizable({containment:J,resize:tt.resize_update,handles:\"all\"}).draggable({handle:X,containment:G,drag:tt.drag_update}),tt.update()))},rt=function(t){e.fn.draggable&&e.fn.resizable&&(t?Y.hide():Y.show().width(V).height(W).css(\"margin-top\",($-W)/2+\"px\").css(\"margin-left\",(L-V)/2+\"px\"))},ot=function(){var n,i,s,l,d,c,u=e(\"input:checked\",I).val();if(\"resize\"==u)n=parseInt(M.val())||0,i=parseInt(P.val())||0;else if(\"crop\"==u)n=parseInt(D.val())||0,i=parseInt(U.val())||0,s=parseInt(A.val())||0,l=parseInt(O.val())||0;else if(\"rotate\"==u){if(n=H,i=N,d=parseInt(E.val())||0,0>d||d>360)return a.error(\"Invalid rotate degree\");if(0==d||360==d)return a.error(\"Image dose not rotated\")}if(c=z?parseInt(z.val()):0,\"rotate\"!=u){if(0>=n||0>=i)return a.error(\"Invalid image size\");if(n==H&&i==N)return a.error(\"Image size not changed\")}r.elfinderdialog(\"close\"),a.request({data:{cmd:\"resize\",target:t.hash,width:n,height:i,x:s,y:l,degree:d,quality:c,mode:u},notify:{type:\"resize\",cnt:1}}).fail(function(e){o.reject(e)}).done(function(){o.resolve()})},st={},lt=\"elfinder-resize-handle-hline\",dt=\"elfinder-resize-handle-vline\",ct=\"elfinder-resize-handle-point\",ut=a.url(t.hash);Y.mousedown(nt.start),e(document).mouseup(nt.stop),m.append(e(l).append(e(d).text(a.i18n(\"width\")),M,T),e(l).append(e(d).text(a.i18n(\"height\")),P),e(l).append(e(\"<label/>\").text(a.i18n(\"aspectRatio\")).prepend(S)),z?e(l).append(e(d).text(a.i18n(\"quality\")),z,e(\"<span/>\").text(\" (1-100)\")):e(),e(l).append(e(d).text(a.i18n(\"scale\")),C)),g.append(e(l).append(e(d).text(\"X\"),A),e(l).append(e(d).text(\"Y\")).append(O),e(l).append(e(d).text(a.i18n(\"width\")),D),e(l).append(e(d).text(a.i18n(\"height\")),U),z?e(l).append(e(d).text(a.i18n(\"quality\")),z.clone(!0),e(\"<span/>\").text(\" (1-100)\")):e()),w.append(e(l).append(e(d).text(a.i18n(\"rotate\")),E,e(\"<span/>\").text(a.i18n(\"degree\")),e(v).append(x,e(y),k)),e(l).css(\"height\",\"20px\").append(j),z?e(l).append(e(d).text(a.i18n(\"quality\")),z.clone(!0),e(\"<span/>\").text(\" (1-100)\")):e()),r.append(I).on(\"resize\",function(e){e.stopPropagation()}),c.append(e(l),m,g.hide(),w.hide()).find(\"input,select\").attr(\"disabled\",\"disabled\"),h.append('<div class=\"'+lt+\" \"+lt+'-top\"/>','<div class=\"'+lt+\" \"+lt+'-bottom\"/>','<div class=\"'+dt+\" \"+dt+'-left\"/>','<div class=\"'+dt+\" \"+dt+'-right\"/>','<div class=\"'+ct+\" \"+ct+'-e\"/>','<div class=\"'+ct+\" \"+ct+'-se\"/>','<div class=\"'+ct+\" \"+ct+'-s\"/>'),u.append(p).append(h.hide()).append(K.hide()),f.css(\"position\",\"absolute\").append('<div class=\"'+lt+\" \"+lt+'-top\"/>','<div class=\"'+lt+\" \"+lt+'-bottom\"/>','<div class=\"'+dt+\" \"+dt+'-left\"/>','<div class=\"'+dt+\" \"+dt+'-right\"/>','<div class=\"'+ct+\" \"+ct+'-n\"/>','<div class=\"'+ct+\" \"+ct+'-e\"/>','<div class=\"'+ct+\" \"+ct+'-s\"/>','<div class=\"'+ct+\" \"+ct+'-w\"/>','<div class=\"'+ct+\" \"+ct+'-ne\"/>','<div class=\"'+ct+\" \"+ct+'-se\"/>','<div class=\"'+ct+\" \"+ct+'-sw\"/>','<div class=\"'+ct+\" \"+ct+'-nw\"/>'),u.append(J.css(\"position\",\"absolute\").hide().append(G,f.append(X))),u.append(Y.hide()),u.css(\"overflow\",\"hidden\"),r.append(u,c),st[a.i18n(\"btnApply\")]=ot,st[a.i18n(\"btnCancel\")]=function(){r.elfinderdialog(\"close\")},a.dialog(r,{title:a.escape(t.name),width:650,resizable:!1,destroyOnClose:!0,buttons:st,open:function(){var e=r.width()-20;u.width()>e&&u.width(e),L=u.width()-(h.outerWidth()-h.width()),$=u.height()-(h.outerHeight()-h.height()),K.attr(\"src\",ut+(-1===ut.indexOf(\"?\")?\"?\":\"&\")+\"_=\"+Math.random()),G.attr(\"src\",K.attr(\"src\")),Y.attr(\"src\",K.attr(\"src\"))}}).attr(\"id\",n),a.UA.ltIE8&&e(\".elfinder-dialog\").css(\"filter\",\"\"),T.css(\"left\",M.position().left+M.width()+12),X.css({opacity:.2,\"background-color\":\"#fff\",position:\"absolute\"}),f.css(\"cursor\",\"move\"),f.find(\".elfinder-resize-handle-point\").css({\"background-color\":\"#fff\",opacity:.5,\"border-color\":\"#000\"}),Y.css(\"cursor\",\"pointer\"),I.controlgroup?I.controlgroup():I.buttonset()};return r.length&&-1!==r[0].mime.indexOf(\"image/\")?(n=\"resize-\"+a.namespace+\"-\"+r[0].hash,i=a.getUI().find(\"#\"+n),i.length?(i.elfinderdialog(\"toTop\"),o.resolve()):(s(r[0],n),o)):o.reject()}},function(e){var t=function(e,t){var n=0;for(n in t)if(\"undefined\"!=typeof e[t[n]])return t[n];return e[t[n]]=\"\",t[n]};if(e.cssHooks.rotate={get:function(t){return e(t).rotate()},set:function(t,n){return e(t).rotate(n),n}},e.cssHooks.transform={get:function(e){var n=t(e.style,[\"WebkitTransform\",\"MozTransform\",\"OTransform\",\"msTransform\",\"transform\"]);return e.style[n]},set:function(e,n){var i=t(e.style,[\"WebkitTransform\",\"MozTransform\",\"OTransform\",\"msTransform\",\"transform\"]);return e.style[i]=n,n}},e.fn.rotate=function(e){if(\"undefined\"==typeof e){if(window.opera){var t=this.css(\"transform\").match(/rotate\\((.*?)\\)/);return t&&t[1]?Math.round(180*parseFloat(t[1])/Math.PI):0}var t=this.css(\"transform\").match(/rotate\\((.*?)\\)/);return t&&t[1]?parseInt(t[1]):0}return this.css(\"transform\",this.css(\"transform\").replace(/none|rotate\\(.*?\\)/,\"\")+\"rotate(\"+parseInt(e)+\"deg)\"),this},e.fx.step.rotate=function(t){0==t.state&&(t.start=e(t.elem).rotate(),t.now=t.start),e(t.elem).rotate(t.now)},\"undefined\"==typeof window.addEventListener&&\"undefined\"==typeof document.getElementsByClassName){var n=function(e){for(var t=e,n=t.offsetLeft,i=t.offsetTop;t.offsetParent&&(t=t.offsetParent,t==document.body||\"static\"==t.currentStyle.position);)t!=document.body&&t!=document.documentElement&&(n-=t.scrollLeft,i-=t.scrollTop),n+=t.offsetLeft,i+=t.offsetTop;return{x:n,y:i}},i=function(e){if(\"static\"==e.currentStyle.position){var t=n(e);e.style.position=\"absolute\",e.style.left=t.x+\"px\",e.style.top=t.y+\"px\"}},a=function(e,t){var n,a=1,r=1,o=1,s=1;if(\"undefined\"!=typeof e.style.msTransform)return!0;i(e),n=t.match(/rotate\\((.*?)\\)/);var l=n&&n[1]?parseInt(n[1]):0;l%=360,0>l&&(l=360+l);var d=l*Math.PI/180,c=Math.cos(d),u=Math.sin(d);a*=c,r*=-u,o*=u,s*=c,e.style.filter=(e.style.filter||\"\").replace(/progid:DXImageTransform\\.Microsoft\\.Matrix\\([^)]*\\)/,\"\")+(\"progid:DXImageTransform.Microsoft.Matrix(M11=\"+a+\",M12=\"+r+\",M21=\"+o+\",M22=\"+s+\",FilterType='bilinear',sizingMethod='auto expand')\");var p=parseInt(e.style.width||e.width||0),h=parseInt(e.style.height||e.height||0),d=l*Math.PI/180,f=Math.abs(Math.cos(d)),m=Math.abs(Math.sin(d)),g=(p-(p*f+h*m))/2,v=(h-(p*m+h*f))/2;return e.style.marginLeft=Math.floor(g)+\"px\",e.style.marginTop=Math.floor(v)+\"px\",!0},r=e.cssHooks.transform.set;e.cssHooks.transform.set=function(e,t){return r.apply(this,[e,t]),a(e,t),t}}}(jQuery),elFinder.prototype.commands.rm=function(){this.shortcuts=[{pattern:\"delete ctrl+backspace\"}],this.getstate=function(t){var n=this.fm;return t=t||n.selected(),!this._disabled&&t.length&&e.map(t,function(e){var t=n.file(e);return t&&t.phash&&!t.locked?e:null}).length==t.length?0:-1},this.exec=function(t){var n,i,a,r,o,s,l,d,c=this,u=this.fm,p=e.Deferred().fail(function(e){e&&u.error(e)}),h=this.files(t),f=h.length,m=(u.cwd().hash,'<div class=\"ui-helper-clearfix elfinder-rm-title\"><span class=\"elfinder-cwd-icon {class} ui-corner-all\"/>{title}<div class=\"elfinder-rm-desc\">{desc}</div></div>');return!f||this._disabled?p.reject():(e.each(h,function(e,t){return t.phash?t.locked?!p.reject([\"errLocked\",t.name]):void 0:!p.reject([\"errRm\",t.name,\"errPerm\"])}),\"pending\"==p.state()&&(n=this.hashes(t),f=h.length,l=[],f>1?(e.map(h,function(e){return\"directory\"==e.mime?1:null}).length||(o=0,e.each(h,function(e,t){if(!t.size||\"unknown\"==t.size)return o=\"unknown\",!1;var n=parseInt(t.size);n>=0&&o>=0&&(o+=n)}),l.push(u.i18n(\"size\")+\": \"+u.formatSize(o))),i=[e(m.replace(\"{class}\",\"elfinder-cwd-icon-group\").replace(\"{title}\",\"<strong>\"+u.i18n(\"items\")+\": \"+f+\"</strong>\").replace(\"{desc}\",l.join(\"<br>\")))]):(a=h[0],a.tmb&&(s=u.option(\"tmbUrl\")+a.tmb),a.size&&l.push(u.i18n(\"size\")+\": \"+u.formatSize(a.size)),l.push(u.i18n(\"modify\")+\": \"+u.formatDate(a)),r=u.escape(a.i18||a.name).replace(/([_.])/g,\"&#8203;$1\"),i=[e(m.replace(\"{class}\",u.mime2class(a.mime)).replace(\"{title}\",\"<strong>\"+r+\"</strong>\").replace(\"{desc}\",l.join(\"<br>\")))]),i.push(\"confirmRm\"),u.lockfiles({files:n}),d=u.confirm({title:c.title,text:i,accept:{label:\"btnRm\",callback:function(){u.request({data:{cmd:\"rm\",targets:n},notify:{type:\"rm\",cnt:f},preventFail:!0}).fail(function(e){p.reject(e)}).done(function(e){p.done(e)}).always(function(){u.unlockfiles({files:n})})}},cancel:{label:\"btnCancel\",callback:function(){u.unlockfiles({files:n}),u.selectfiles({files:n}),p.reject()}}}),s&&e(\"<img/>\").load(function(){d.find(\".elfinder-cwd-icon\").css(\"background\",'url(\"'+s+'\") center center no-repeat')}).attr(\"src\",s)),p)}},elFinder.prototype.commands.search=function(){this.title=\"Find files\",this.options={ui:\"searchbutton\"},this.alwaysEnabled=!0,this.updateOnSelect=!1,this.getstate=function(){return 0},this.exec=function(t,n,i){var a,r=this.fm;return\"string\"==typeof t&&t?(\"object\"==typeof n&&(i=n.mime||\"\",n=n.target||\"\"),n=n?n:\"\",i=i?e.trim(i).replace(\",\",\" \").split(\" \"):[],e.each(i,function(){return e.trim(this)}),r.trigger(\"searchstart\",{query:t,target:n,mimes:i}),a=r.request({data:{cmd:\"search\",q:t,target:n,mimes:i},notify:{type:\"search\",cnt:1,hideCnt:!0},cancel:!0})):(r.getUI(\"toolbar\").find(\".\"+r.res(\"class\",\"searchbtn\")+\" :text\").focus(),e.Deferred().reject())}},elFinder.prototype.commands.sort=function(){var t,n=this,i=n.fm;this.options={ui:\"sortbutton\"},i.bind(\"open sortchange\",function(){n.variants=[],e.each(i.sortRules,function(e){var t={type:e,order:e==i.sortType?\"asc\"==i.sortOrder?\"desc\":\"asc\":i.sortOrder},a=e==i.sortType?\"asc\"==t.order?\"n\":\"s\":\"\";n.variants.push([t,(a?'<span class=\"ui-icon ui-icon-arrowthick-1-'+a+'\"></span>':\"\")+\"&nbsp;\"+i.i18n(\"sort\"+e)])})}),i.bind(\"open sortchange viewchange search searchend\",function(){t&&clearTimeout(t),t=setTimeout(function(){var t=e(i.cwd).find(\"div.elfinder-cwd-wrapper-list table\");t.length&&e.each(i.sortRules,function(a){var r=t.find(\"thead tr td.elfinder-cwd-view-th-\"+a);if(r.length){var o,s=a==i.sortType,l={type:a,order:s?\"asc\"==i.sortOrder?\"desc\":\"asc\":i.sortOrder};s&&(r.addClass(\"ui-state-active\"),o=\"asc\"==i.sortOrder?\"n\":\"s\",e('<span class=\"ui-icon ui-icon-triangle-1-'+o+'\"/>').appendTo(r)),e(r).on(\"click\",function(e){e.stopPropagation(),n.exec([],l)}).hover(function(){e(this).addClass(\"ui-state-hover\")},function(){e(this).removeClass(\"ui-state-hover\")})}})},100)}),this.getstate=function(){return 0},this.exec=function(t,n){var i=this.fm,a=e.extend({type:i.sortType,order:i.sortOrder,stick:i.sortStickFolders},n);return this.fm.setSort(a.type,a.order,a.stick),e.Deferred().resolve()}},elFinder.prototype.commands.up=function(){this.alwaysEnabled=!0,this.updateOnSelect=!1,this.shortcuts=[{pattern:\"ctrl+up\"}],this.getstate=function(){return this.fm.cwd().phash?0:-1},this.exec=function(){return this.fm.cwd().phash?this.fm.exec(\"open\",this.fm.cwd().phash):e.Deferred().reject()}},elFinder.prototype.commands.upload=function(){var t=this.fm.res(\"class\",\"hover\");this.disableOnSearch=!0,this.updateOnSelect=!1,this.shortcuts=[{pattern:\"ctrl+u\"}],this.getstate=function(e){var t,n=this.fm,e=n.directUploadTarget?[n.directUploadTarget]:e||[n.cwd().hash];return this._disabled||1!=e.length||(t=n.file(e[0])),t&&\"directory\"==t.mime&&t.write?0:-1},this.exec=function(n){var i,a,r,o,s,l,d,c=this.fm,u=n&&n instanceof Array?n:null,p=!u&&n&&n.target?[n.target]:u,h=function(e){c.upload(e).fail(function(e){m.reject(e)}).done(function(e){var t=c.getUI(\"cwd\");if(m.resolve(e),e&&e.added&&e.added[0]){var n=t.find(\"#\"+c.cwdHash2Id(e.added[0].hash));n.length&&n.trigger(\"scrolltoview\")}})},f=function(e){i.elfinderdialog(\"close\"),u&&(e.target=u[0]),h(e)},m=e.Deferred();return this.getstate(p)<0?m.reject():(l=function(e){e.stopPropagation(),e.preventDefault();var t=!1,n=\"\",i=null,a=\"\",r=null,o=e._target||null;try{i=e.dataTransfer.getData(\"elfinderfrom\")}catch(e){}if(i&&(a=window.location.href+c.cwd().hash,!o&&i===a||o===a))return m.reject(),void 0;try{r=e.dataTransfer.getData(\"text/html\"),r.match(/<(?:img|a)/i)||(r=\"\")}catch(e){}r?(t=[r],n=\"html\"):e.dataTransfer&&e.dataTransfer.items&&e.dataTransfer.items.length?(t=e.dataTransfer,n=\"data\"):e.dataTransfer&&e.dataTransfer.files&&e.dataTransfer.files.length?(t=e.dataTransfer.files,n=\"files\"):(r=e.dataTransfer.getData(\"text\"))&&(t=[r],n=\"text\"),t?h({files:t,type:n,target:o}):m.reject()},!u&&n?(n.input||n.files?(n.type=\"files\",h(n)):n.dropEvt&&l(n.dropEvt),m):(d=function(t){var n,t=t.originalEvent||t,i=[],a=[];if(t.clipboardData){if(t.clipboardData.items&&t.clipboardData.items.length){a=t.clipboardData.items;for(var r=0;r<a.length;r++)\"file\"==t.clipboardData.items[r].kind&&(n=t.clipboardData.items[r].getAsFile(),i.push(n))}else t.clipboardData.files&&t.clipboardData.files.length&&(i=t.clipboardData.files);if(i.length)return f({files:i,type:\"files\"}),void 0}var o=t.target||t.srcElement;setTimeout(function(){if(o.innerHTML){e(o).find(\"img\").each(function(t,n){n.src.match(/^webkit-fake-url:\\/\\//)&&e(n).remove()});var t=o.innerHTML.replace(/<br[^>]*>/gi,\" \"),n=t.match(/<[^>]+>/)?\"html\":\"text\";o.innerHTML=\"\",f({files:[t],type:n})}},1)},a=e('<input type=\"file\" multiple=\"true\"/>').change(function(){f({input:a[0],type:\"files\"})}).on(\"dragover\",function(e){e.originalEvent.dataTransfer.dropEffect=\"copy\"}),r=e('<div class=\"ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only\"><span class=\"ui-button-text\">'+c.i18n(\"selectForUpload\")+\"</span></div>\").append(e(\"<form/>\").append(a)).hover(function(){r.toggleClass(t)}),i=e('<div class=\"elfinder-upload-dialog-wrapper\"/>').append(r),s=e('<div class=\"ui-corner-all elfinder-upload-dropbox\" contenteditable=\"true\">'+c.i18n(\"dropFilesBrowser\")+\"</div>\").on(\"paste drop\",function(e){d(e)}).on(\"mousedown click\",function(){e(this).focus()}).on(\"focus\",function(){this.innerHTML=\"\"}).on(\"dragenter mouseover\",function(){s.addClass(t)}).on(\"dragleave mouseout\",function(){s.removeClass(t)}),c.dragUpload?(o=e('<div class=\"ui-corner-all elfinder-upload-dropbox\" contenteditable=\"true\">'+c.i18n(\"dropPasteFiles\")+\"</div>\").on(\"paste\",function(e){d(e)}).on(\"mousedown click\",function(){e(this).focus()}).on(\"focus\",function(){this.innerHTML=\"\"}).on(\"mouseover\",function(){e(this).addClass(t)}).on(\"mouseout\",function(){e(this).removeClass(t)}).prependTo(i).after('<div class=\"elfinder-upload-dialog-or\">'+c.i18n(\"or\")+\"</div>\")[0],o.addEventListener(\"dragenter\",function(n){n.stopPropagation(),n.preventDefault(),e(o).addClass(t)},!1),o.addEventListener(\"dragleave\",function(n){n.stopPropagation(),n.preventDefault(),e(o).removeClass(t)},!1),o.addEventListener(\"dragover\",function(n){n.stopPropagation(),n.preventDefault(),n.dataTransfer.dropEffect=\"copy\",e(o).addClass(t)},!1),o.addEventListener(\"drop\",function(e){i.elfinderdialog(\"close\"),u&&(e._target=u[0]),l(e)},!1)):s.prependTo(i).after('<div class=\"elfinder-upload-dialog-or\">'+c.i18n(\"or\")+\"</div>\")[0],c.dialog(i,{title:this.title+(u?\" - \"+c.escape(c.file(u[0]).name):\"\"),modal:!0,resizable:!1,destroyOnClose:!0}),m))}},elFinder.prototype.commands.view=function(){this.value=this.fm.viewType,this.alwaysEnabled=!0,this.updateOnSelect=!1,this.options={ui:\"viewbutton\"},this.getstate=function(){return 0},this.exec=function(){var e=this.fm.storage(\"view\",\"list\"==this.value?\"icons\":\"list\");this.fm.viewchange(),this.update(void 0,e)}}}(jQuery);\n\\ No newline at end of file\n+0===a.indexOf(\"image/\")&&e.inArray(a,n)&&n.push(a)}),i.bind(\"update\",function(a){var r,o=a.file;-1!==e.inArray(o.mime,n)&&(a.stopImmediatePropagation(),r=e(\"<img/>\").hide().appendTo(i).load(function(){setTimeout(function(){var e=(r.width()/r.height()).toFixed(2);i.bind(\"changesize\",function(){var t,n,a=parseInt(i.width()),o=parseInt(i.height());e<(a/o).toFixed(2)?(n=o,t=Math.floor(n*e)):(t=a,n=Math.floor(t/e)),r.width(t).height(n).css(\"margin-top\",o>n?Math.floor((o-n)/2):0)}).trigger(\"changesize\"),t.hideinfo(),r.fadeIn(100)},1)}).attr(\"src\",t.fm.openUrl(o.hash)))})},function(t){var n=[\"text/html\",\"application/xhtml+xml\"],i=t.preview,a=t.fm;i.bind(\"update\",function(r){var o,s=r.file;-1!==e.inArray(s.mime,n)&&(r.stopImmediatePropagation(),i.one(\"change\",function(){\"pending\"==o.state()&&o.reject()}),o=a.request({data:{cmd:\"get\",target:s.hash,current:s.phash,conv:1},preventDefault:!0}).done(function(n){t.hideinfo(),doc=e('<iframe class=\"elfinder-quicklook-preview-html\"/>').appendTo(i)[0].contentWindow.document,doc.open(),doc.write(n.content),doc.close()}))})},function(t){var n=t.fm,i=n.res(\"mimes\",\"text\"),a=t.preview;a.bind(\"update\",function(r){var o,s=r.file,l=s.mime;(0===l.indexOf(\"text/\")||-1!==e.inArray(l,i))&&(r.stopImmediatePropagation(),a.one(\"change\",function(){\"pending\"==o.state()&&o.reject()}),o=n.request({data:{cmd:\"get\",target:s.hash,conv:1},preventDefault:!0}).done(function(i){t.hideinfo(),e('<div class=\"elfinder-quicklook-preview-text-wrapper\"><pre class=\"elfinder-quicklook-preview-text\">'+n.escape(i.content)+\"</pre></div>\").appendTo(a)}))})},function(t){var n=t.fm,i=\"application/pdf\",a=t.preview,r=!1;n.UA.Safari&&\"mac\"==n.OS||n.UA.IE?r=!0:e.each(navigator.plugins,function(t,n){e.each(n,function(e,t){return t.type==i?!(r=!0):void 0})}),r&&a.bind(\"update\",function(r){var o,s=r.file;s.mime==i&&(r.stopImmediatePropagation(),a.one(\"change\",function(){o.unbind(\"load\").remove()}),o=e('<iframe class=\"elfinder-quicklook-preview-pdf\"/>').hide().appendTo(a).load(function(){t.hideinfo(),o.show()}).attr(\"src\",n.url(s.hash)))})},function(t){var n=t.fm,i=\"application/x-shockwave-flash\",a=t.preview,r=!1;e.each(navigator.plugins,function(t,n){e.each(n,function(e,t){return t.type==i?!(r=!0):void 0})}),r&&a.bind(\"update\",function(r){var o,s=r.file;s.mime==i&&(r.stopImmediatePropagation(),t.hideinfo(),a.append(o=e('<embed class=\"elfinder-quicklook-preview-flash\" pluginspage=\"http://www.macromedia.com/go/getflashplayer\" src=\"'+n.url(s.hash)+'\" quality=\"high\" type=\"application/x-shockwave-flash\" />')))})},function(t){var n,i=t.preview,a=!!t.options.autoplay,r={\"audio/mpeg\":\"mp3\",\"audio/mpeg3\":\"mp3\",\"audio/mp3\":\"mp3\",\"audio/x-mpeg3\":\"mp3\",\"audio/x-mp3\":\"mp3\",\"audio/x-wav\":\"wav\",\"audio/wav\":\"wav\",\"audio/x-m4a\":\"m4a\",\"audio/aac\":\"m4a\",\"audio/mp4\":\"m4a\",\"audio/x-mp4\":\"m4a\",\"audio/ogg\":\"ogg\"};i.bind(\"update\",function(o){var s=o.file,l=r[s.mime];t.support.audio[l]&&(o.stopImmediatePropagation(),n=e('<audio class=\"elfinder-quicklook-preview-audio\" controls preload=\"auto\" autobuffer><source src=\"'+t.fm.openUrl(s.hash)+'\" /></audio>').appendTo(i),a&&n[0].play())}).bind(\"change\",function(){n&&n.parent().length&&(n[0].pause(),n.remove(),n=null)})},function(t){var n,i=t.preview,a=!!t.options.autoplay,r={\"video/mp4\":\"mp4\",\"video/x-m4v\":\"mp4\",\"video/ogg\":\"ogg\",\"application/ogg\":\"ogg\",\"video/webm\":\"webm\"};i.bind(\"update\",function(o){var s=o.file,l=r[s.mime];t.support.video[l]&&(o.stopImmediatePropagation(),t.hideinfo(),n=e('<video class=\"elfinder-quicklook-preview-video\" controls preload=\"auto\" autobuffer><source src=\"'+t.fm.openUrl(s.hash)+'\" /></video>').appendTo(i),a&&n[0].play())}).bind(\"change\",function(){n&&n.parent().length&&(n[0].pause(),n.remove(),n=null)})},function(t){var n,i=t.preview,a=[];e.each(navigator.plugins,function(t,n){e.each(n,function(e,t){(0===t.type.indexOf(\"audio/\")||0===t.type.indexOf(\"video/\"))&&a.push(t.type)})}),i.bind(\"update\",function(r){var o,s=r.file,l=s.mime;-1!==e.inArray(s.mime,a)&&(r.stopImmediatePropagation(),(o=0===l.indexOf(\"video/\"))&&t.hideinfo(),n=e('<embed src=\"'+t.fm.openUrl(s.hash)+'\" type=\"'+l+'\" class=\"elfinder-quicklook-preview-'+(o?\"video\":\"audio\")+'\"/>').appendTo(i))}).bind(\"change\",function(){n&&n.parent().length&&(n.remove(),n=null)})}],elFinder.prototype.commands.reload=function(){var t=this,n=!1;this.alwaysEnabled=!0,this.updateOnSelect=!0,this.shortcuts=[{pattern:\"ctrl+shift+r f5\"}],this.getstate=function(){return 0},this.init=function(){this.fm.bind(\"search searchend\",function(e){n=\"search\"==e.type})},this.fm.bind(\"contextmenu\",function(){var n=t.fm;if(n.options.sync>=1e3){var i;t.extra={icon:\"accept\",node:e(\"<span/>\").attr({title:n.i18n(\"autoSync\")}).on(\"click\",function(e){e.stopPropagation(),e.preventDefault(),i.parent().toggleClass(\"ui-state-disabled\",n.options.syncStart).parent().removeClass(\"ui-state-hover\"),n.options.syncStart=!n.options.syncStart,n.autoSync(n.options.syncStart?null:\"stop\")})},i=t.extra.node,i.ready(function(){setTimeout(function(){i.parent().toggleClass(\"ui-state-disabled\",!n.options.syncStart).css(\"pointer-events\",\"auto\")},10)})}}),this.exec=function(){var t=this.fm;if(!n){var i=t.sync(),a=setTimeout(function(){t.notify({type:\"reload\",cnt:1,hideCnt:!0}),i.always(function(){t.notify({type:\"reload\",cnt:-1})})},t.notifyDelay);return i.always(function(){clearTimeout(a),t.trigger(\"reload\")})}e(\"div.elfinder-toolbar > div.\"+t.res(\"class\",\"searchbtn\")+\" > span.ui-icon-search\").click()}},elFinder.prototype.commands.rename=function(){this.shortcuts=[{pattern:\"f2\"+(\"mac\"==this.fm.OS?\" enter\":\"\")}],this.getstate=function(e){var e=this.files(e);return this._disabled||1!=e.length||!e[0].phash||e[0].locked?-1:0},this.exec=function(t){var n,i=this.fm,a=i.getUI(\"cwd\"),r=t||(i.selected().length?i.selected():!1)||[i.cwd().hash],o=r.length,s=i.file(r.shift()),l=\".elfinder-cwd-filename\",d=t&&t._type?t._type:i.selected().length?\"files\":\"navbar\",c=\"navbar\"===d,u=e(\"#\"+i[c?\"navHash2Id\":\"cwdHash2Id\"](s.hash)),p=i.cwd().hash==s.hash,h=\"files\"===d&&\"list\"!=i.storage(\"view\"),f=function(){w.is(\":hidden\")||w.addClass(\"ui-front\").elfinderoverlay(\"hide\").off(\"click\",x),y.removeClass(\"ui-front\").css(\"position\",\"\"),h?v.css(\"max-height\",\"\"):c||y.css(\"width\",\"\").parent(\"td\").css(\"overflow\",\"\")},m=e.Deferred().done(function(e){p&&i.exec(\"open\",e.added[0].hash)}).fail(function(e){var t=g.parent(),n=i.escape(s.name);h&&(n=n.replace(/([_.])/g,\"&#8203;$1\")),c?g.replaceWith(n):t.length?(g.remove(),t.html(n)):(u.find(l).html(n),setTimeout(function(){a.find(\"#\"+i.cwdHash2Id(s.hash)).click()},50)),e&&i.error(e)}).always(function(){f(),i.enable()}),g=e(h?\"<textarea/>\":'<input type=\"text\"/>').on(\"keyup text\",function(){h?(this.style.height=\"1px\",this.style.height=this.scrollHeight+\"px\"):n&&(this.style.width=n+\"px\",this.scrollWidth>n&&(this.style.width=this.scrollWidth+10+\"px\"))}).keydown(function(t){t.stopPropagation(),t.stopImmediatePropagation(),t.keyCode==e.ui.keyCode.ESCAPE?m.reject():t.keyCode==e.ui.keyCode.ENTER&&g.blur()}).mousedown(function(e){e.stopPropagation()}).click(function(e){e.stopPropagation()}).dblclick(function(e){e.stopPropagation(),e.preventDefault()}).blur(function(){var t=e.trim(g.val()),n=(g.parent(),!0);if(y.length){if(g[0].setSelectionRange&&g[0].setSelectionRange(0,0),t==s.name)return m.reject();if(i.options.validName&&i.options.validName.test)try{n=i.options.validName.test(t)}catch(r){n=!1}if(!t||\"..\"===t||!n)return i.error(\"errInvName\"),!1;if(i.fileByName(t,s.phash))return i.error([\"errExists\",t]),!1;f(),(c?y:v).html(i.escape(t)),i.lockfiles({files:[s.hash]}),i.request({data:{cmd:\"rename\",target:s.hash,name:t},notify:{type:\"rename\",cnt:1}}).fail(function(){m.reject(),i.sync()}).done(function(e){if(m.resolve(e),!c&&e&&e.added&&e.added[0]){var t=a.find(\"#\"+i.cwdHash2Id(e.added[0].hash));t.length&&t.trigger(\"scrolltoview\")}}).always(function(){i.unlockfiles({files:[s.hash]})})}}),v=c?u.contents().filter(function(){return 3==this.nodeType&&e(this).parent().attr(\"id\")===i.navHash2Id(s.hash)}):u.find(l),b=s.name.replace(/\\.((tar\\.(gz|bz|bz2|z|lzo))|cpio\\.gz|ps\\.gz|xcf\\.(gz|bz2)|[a-z0-9]{1,4})$/gi,\"\"),y=v.parent(),w=i.getUI().children(\".elfinder-overlay\"),x=function(e){e.stopPropagation(),m.reject()};return y.addClass(\"ui-front\").css(\"position\",\"relative\"),c?v.replaceWith(g.val(s.name)):(h?v.css(\"max-height\",\"none\"):c||(n=y.width(),y.width(n-15).parent(\"td\").css(\"overflow\",\"visible\")),v.empty().append(g.val(s.name))),i.UA.Mobile&&w.on(\"click\",x).removeClass(\"ui-front\").elfinderoverlay(\"show\"),o>1||this.getstate([s.hash])<0?m.reject():s&&v.length?s.locked?m.reject([\"errLocked\",s.name]):(i.one(\"select\",function(){g.parent().length&&s&&-1===e.inArray(s.hash,i.selected())&&g.blur()}),g.trigger(\"keyup\"),g.select().focus(),g[0].setSelectionRange&&g[0].setSelectionRange(0,b.length),m):m.reject(\"errCmdParams\",this.title)}},elFinder.prototype.commands.resize=function(){this.updateOnSelect=!1,this.getstate=function(){var e=this.fm.selectedFiles();return!this._disabled&&1==e.length&&e[0].read&&e[0].write&&-1!==e[0].mime.indexOf(\"image/\")?0:-1},this.exec=function(t){var n,i,a=this.fm,r=this.files(t),o=e.Deferred(),s=function(t,n){var i=\"image/jpeg\"===t.mime,r=e('<div class=\"elfinder-dialog-resize\"/>'),s='<input type=\"text\" size=\"5\"/>',l='<div class=\"elfinder-resize-row\"/>',d='<div class=\"elfinder-resize-label\"/>',c=e('<div class=\"elfinder-resize-control\"/>'),u=e('<div class=\"ui-front elfinder-resize-preview\"/>'),p=e('<div class=\"elfinder-resize-spinner\">'+a.i18n(\"ntfloadimg\")+\"</div>\"),h=e('<div class=\"elfinder-resize-handle\"/>'),f=e('<div class=\"elfinder-resize-handle\"/>'),m=e('<div class=\"elfinder-resize-uiresize\"/>'),g=e('<div class=\"elfinder-resize-uicrop\"/>'),v='<div class=\"ui-widget-content ui-corner-all elfinder-buttonset\"/>',b='<div class=\"ui-state-default elfinder-button\"/>',y='<span class=\"ui-widget-content elfinder-toolbar-button-separator\"/>',w=e('<div class=\"elfinder-resize-rotate\"/>'),x=e(b).attr(\"title\",a.i18n(\"rotate-cw\")).append(e('<span class=\"elfinder-button-icon elfinder-button-icon-rotate-l\"/>').click(function(){B-=90,nt.update(B)})),k=e(b).attr(\"title\",a.i18n(\"rotate-ccw\")).append(e('<span class=\"elfinder-button-icon elfinder-button-icon-rotate-r\"/>').click(function(){B+=90,nt.update(B)})),C=e(\"<span />\"),T=e('<div class=\"ui-state-default ui-corner-all elfinder-resize-reset\"><span class=\"ui-icon ui-icon-arrowreturnthick-1-w\"/></div>'),I=e('<div class=\"elfinder-resize-type\"/>').append('<input class=\"\" type=\"radio\" name=\"type\" id=\"'+n+'-resize\" value=\"resize\" checked=\"checked\" /><label for=\"'+n+'-resize\">'+a.i18n(\"resize\")+\"</label>\",'<input type=\"radio\" name=\"type\" id=\"'+n+'-crop\" value=\"crop\" /><label for=\"'+n+'-crop\">'+a.i18n(\"crop\")+\"</label>\",'<input type=\"radio\" name=\"type\" id=\"'+n+'-rotate\" value=\"rotate\" /><label for=\"'+n+'-rotate\">'+a.i18n(\"rotate\")+\"</label>\"),F=e(\"input\",I).attr(\"disabled\",\"disabled\").change(function(){var t=e(\"input:checked\",I).val();Z(),it(!0),at(!0),rt(!0),\"resize\"==t?(m.show(),w.hide(),g.hide(),it()):\"crop\"==t?(w.hide(),m.hide(),g.show(),at()):\"rotate\"==t&&(m.hide(),g.hide(),w.show(),rt())}),S=e('<input type=\"checkbox\" checked=\"checked\"/>').change(function(){q=!!S.prop(\"checked\"),et.fixHeight(),it(!0),it()}),M=e(s).change(function(){var e=parseInt(M.val()),t=parseInt(q?Math.round(e/_):P.val());e>0&&t>0&&(et.updateView(e,t),P.val(t))}),P=e(s).change(function(){var e=parseInt(P.val()),t=parseInt(q?Math.round(e*_):M.val());t>0&&e>0&&(et.updateView(t,e),M.val(t))}),A=e(s).change(function(){tt.updateView()}),O=e(s).change(function(){tt.updateView()}),D=e(s).change(function(){tt.updateView()}),U=e(s).change(function(){tt.updateView()}),z=i?e(s).val(a.option(\"jpgQuality\")).addClass(\"quality\").on(\"blur\",function(){var e=Math.min(100,Math.max(1,parseInt(this.value)));r.find(\"input.quality\").val(e)}):null,E=e('<input type=\"text\" size=\"3\" maxlength=\"3\" value=\"0\" />').change(function(){nt.update()}),j=e('<div class=\"elfinder-resize-rotate-slider\"/>').slider({min:0,max:360,value:E.val(),animate:!0,change:function(e,t){t.value!=j.slider(\"value\")&&nt.update(t.value)},slide:function(e,t){nt.update(t.value,!1)}}),_=1,R=1,H=0,N=0,q=!0,L=0,$=0,V=0,W=0,B=0,K=e(\"<img/>\").load(function(){p.remove(),H=K.width(),N=K.height(),_=H/N,et.updateView(H,N),h.append(K.show()).show(),M.val(H),P.val(N);var t=Math.min(L,$)/Math.sqrt(Math.pow(H,2)+Math.pow(N,2));V=H*t,W=N*t,F.button(\"enable\"),c.find(\"input,select\").removeAttr(\"disabled\").filter(\":text\").keydown(function(t){var n,i=t.keyCode;return t.stopPropagation(),i>=37&&40>=i||i==e.ui.keyCode.BACKSPACE||i==e.ui.keyCode.DELETE||65==i&&(t.ctrlKey||t.metaKey)||27==i?void 0:(9==i&&(n=e(this).parent()[t.shiftKey?\"prevAll\":\"nextAll\"](\"div.elfinder-resize-row\").children(\":text\"),n.length?n[0].focus():e(this).parent().parent().find(\":text:\"+(t.shiftKey?\"last\":\"first\")).focus()),13==i?(a.confirm({title:e(\"input:checked\",I).val(),text:\"confirmReq\",accept:{label:\"btnApply\",callback:function(){ot()}},cancel:{label:\"btnCancel\",callback:function(){}}}),void 0):(i>=48&&57>=i||i>=96&&105>=i||t.preventDefault(),void 0))}).filter(\":first\").focus(),it(),T.hover(function(){T.toggleClass(\"ui-state-hover\")}).click(Z)}).error(function(){p.text(\"Unable to load image\").css(\"background\",\"transparent\")}),J=e(\"<div/>\"),G=e(\"<img/>\"),X=e(\"<div/>\"),Y=e(\"<img/>\"),Q=function(e){return i?8*Math.round(e/8):Math.round(e)},Z=function(){M.val(H),P.val(N),et.updateView(H,N)},et={update:function(){M.val(Q(K.width()/R)),P.val(Q(K.height()/R))},updateView:function(e,t){e>L||t>$?e/L>t/$?(R=L/e,K.width(L).height(Math.ceil(t*R))):(R=$/t,K.height($).width(Math.ceil(e*R))):K.width(e).height(t),R=K.width()/e,C.text(\"1 : \"+(1/R).toFixed(2)),et.updateHandle()},updateHandle:function(){h.width(K.width()).height(K.height())},fixHeight:function(){var e,t;q&&(e=M.val(),t=Math.round(e/_),et.updateView(e,t),P.val(t))}},tt={update:function(){D.val(Q((f.data(\"w\")||f.width())/R)),U.val(Q((f.data(\"h\")||f.height())/R)),A.val(Math.round(((f.data(\"x\")||f.offset().left)-G.offset().left)/R)),O.val(Math.round(((f.data(\"y\")||f.offset().top)-G.offset().top)/R))},updateView:function(){var e=parseInt(A.val())*R+G.offset().left,t=parseInt(O.val())*R+G.offset().top,n=D.val()*R,i=U.val()*R;f.data({x:e,y:t,w:n,h:i}).width(Math.round(n)).height(Math.round(i)).offset({left:Math.round(e),top:Math.round(t)}),X.width(f.width()).height(f.height())},resize_update:function(){f.data({w:null,h:null}),tt.update(),X.width(f.width()).height(f.height())},drag_update:function(){f.data({x:null,y:null}),tt.update()}},nt={mouseStartAngle:0,imageStartAngle:0,imageBeingRotated:!1,update:function(e,t){\"undefined\"==typeof e&&(B=e=parseInt(E.val())),\"undefined\"==typeof t&&(t=!0),!t||a.UA.Opera||a.UA.ltIE8?Y.rotate(e):Y.animate({rotate:e+\"deg\"}),e%=360,0>e&&(e+=360),E.val(parseInt(e)),j.slider(\"value\",E.val())},execute:function(e){if(nt.imageBeingRotated){var t=nt.getCenter(Y),n=e.pageX-t[0],i=e.pageY-t[1],a=Math.atan2(i,n),r=a-nt.mouseStartAngle+nt.imageStartAngle;return r=Math.round(180*parseFloat(r)/Math.PI),e.shiftKey&&(r=15*Math.round((r+6)/15)),Y.rotate(r),r%=360,0>r&&(r+=360),E.val(r),j.slider(\"value\",E.val()),!1}},start:function(t){nt.imageBeingRotated=!0;var n=nt.getCenter(Y),i=t.pageX-n[0],a=t.pageY-n[1];return nt.mouseStartAngle=Math.atan2(a,i),nt.imageStartAngle=parseFloat(Y.rotate())*Math.PI/180,e(document).mousemove(nt.execute),!1},stop:function(){return nt.imageBeingRotated?(e(document).unbind(\"mousemove\",nt.execute),setTimeout(function(){nt.imageBeingRotated=!1},10),!1):void 0},getCenter:function(){var e=Y.rotate();Y.rotate(0);var t=Y.offset(),n=t.left+Y.width()/2,i=t.top+Y.height()/2;return Y.rotate(e),Array(n,i)}},it=function(t){e.fn.resizable&&(t?(h.filter(\":ui-resizable\").resizable(\"destroy\"),h.hide()):(h.show(),h.resizable({alsoResize:K,aspectRatio:q,resize:et.update,stop:et.fixHeight})))},at=function(t){e.fn.draggable&&e.fn.resizable&&(t?(f.filter(\":ui-resizable\").resizable(\"destroy\").filter(\":ui-draggable\").draggable(\"destroy\"),J.hide()):(J.show().width(K.width()).height(K.height()),G.width(K.width()).height(K.height()),X.width(K.width()).height(K.height()),f.width(G.width()).height(G.height()).offset(G.offset()).resizable({containment:J,resize:tt.resize_update,handles:\"all\"}).draggable({handle:X,containment:G,drag:tt.drag_update}),tt.update()))},rt=function(t){e.fn.draggable&&e.fn.resizable&&(t?Y.hide():Y.show().width(V).height(W).css(\"margin-top\",($-W)/2+\"px\").css(\"margin-left\",(L-V)/2+\"px\"))},ot=function(){var n,i,s,l,d,c,u=e(\"input:checked\",I).val();if(\"resize\"==u)n=parseInt(M.val())||0,i=parseInt(P.val())||0;else if(\"crop\"==u)n=parseInt(D.val())||0,i=parseInt(U.val())||0,s=parseInt(A.val())||0,l=parseInt(O.val())||0;else if(\"rotate\"==u){if(n=H,i=N,d=parseInt(E.val())||0,0>d||d>360)return a.error(\"Invalid rotate degree\");if(0==d||360==d)return a.error(\"Image dose not rotated\")}if(c=z?parseInt(z.val()):0,\"rotate\"!=u){if(0>=n||0>=i)return a.error(\"Invalid image size\");if(n==H&&i==N)return a.error(\"Image size not changed\")}r.elfinderdialog(\"close\"),a.request({data:{cmd:\"resize\",target:t.hash,width:n,height:i,x:s,y:l,degree:d,quality:c,mode:u},notify:{type:\"resize\",cnt:1}}).fail(function(e){o.reject(e)}).done(function(){o.resolve()})},st={},lt=\"elfinder-resize-handle-hline\",dt=\"elfinder-resize-handle-vline\",ct=\"elfinder-resize-handle-point\",ut=a.openUrl(t.hash);Y.mousedown(nt.start),e(document).mouseup(nt.stop),m.append(e(l).append(e(d).text(a.i18n(\"width\")),M,T),e(l).append(e(d).text(a.i18n(\"height\")),P),e(l).append(e(\"<label/>\").text(a.i18n(\"aspectRatio\")).prepend(S)),z?e(l).append(e(d).text(a.i18n(\"quality\")),z,e(\"<span/>\").text(\" (1-100)\")):e(),e(l).append(e(d).text(a.i18n(\"scale\")),C)),g.append(e(l).append(e(d).text(\"X\"),A),e(l).append(e(d).text(\"Y\")).append(O),e(l).append(e(d).text(a.i18n(\"width\")),D),e(l).append(e(d).text(a.i18n(\"height\")),U),z?e(l).append(e(d).text(a.i18n(\"quality\")),z.clone(!0),e(\"<span/>\").text(\" (1-100)\")):e()),w.append(e(l).append(e(d).text(a.i18n(\"rotate\")),E,e(\"<span/>\").text(a.i18n(\"degree\")),e(v).append(x,e(y),k)),e(l).css(\"height\",\"20px\").append(j),z?e(l).append(e(d).text(a.i18n(\"quality\")),z.clone(!0),e(\"<span/>\").text(\" (1-100)\")):e()),r.append(I).on(\"resize\",function(e){e.stopPropagation()}),c.append(e(l),m,g.hide(),w.hide()).find(\"input,select\").attr(\"disabled\",\"disabled\"),h.append('<div class=\"'+lt+\" \"+lt+'-top\"/>','<div class=\"'+lt+\" \"+lt+'-bottom\"/>','<div class=\"'+dt+\" \"+dt+'-left\"/>','<div class=\"'+dt+\" \"+dt+'-right\"/>','<div class=\"'+ct+\" \"+ct+'-e\"/>','<div class=\"'+ct+\" \"+ct+'-se\"/>','<div class=\"'+ct+\" \"+ct+'-s\"/>'),u.append(p).append(h.hide()).append(K.hide()),f.css(\"position\",\"absolute\").append('<div class=\"'+lt+\" \"+lt+'-top\"/>','<div class=\"'+lt+\" \"+lt+'-bottom\"/>','<div class=\"'+dt+\" \"+dt+'-left\"/>','<div class=\"'+dt+\" \"+dt+'-right\"/>','<div class=\"'+ct+\" \"+ct+'-n\"/>','<div class=\"'+ct+\" \"+ct+'-e\"/>','<div class=\"'+ct+\" \"+ct+'-s\"/>','<div class=\"'+ct+\" \"+ct+'-w\"/>','<div class=\"'+ct+\" \"+ct+'-ne\"/>','<div class=\"'+ct+\" \"+ct+'-se\"/>','<div class=\"'+ct+\" \"+ct+'-sw\"/>','<div class=\"'+ct+\" \"+ct+'-nw\"/>'),u.append(J.css(\"position\",\"absolute\").hide().append(G,f.append(X))),u.append(Y.hide()),u.css(\"overflow\",\"hidden\"),r.append(u,c),st[a.i18n(\"btnApply\")]=ot,st[a.i18n(\"btnCancel\")]=function(){r.elfinderdialog(\"close\")},a.dialog(r,{title:a.escape(t.name),width:650,resizable:!1,destroyOnClose:!0,buttons:st,open:function(){var e=r.width()-20;u.width()>e&&u.width(e),L=u.width()-(h.outerWidth()-h.width()),$=u.height()-(h.outerHeight()-h.height()),K.attr(\"src\",ut+(-1===ut.indexOf(\"?\")?\"?\":\"&\")+\"_=\"+Math.random()),G.attr(\"src\",K.attr(\"src\")),Y.attr(\"src\",K.attr(\"src\"))}}).attr(\"id\",n),a.UA.ltIE8&&e(\".elfinder-dialog\").css(\"filter\",\"\"),T.css(\"left\",M.position().left+M.width()+12),X.css({opacity:.2,\"background-color\":\"#fff\",position:\"absolute\"}),f.css(\"cursor\",\"move\"),f.find(\".elfinder-resize-handle-point\").css({\"background-color\":\"#fff\",opacity:.5,\"border-color\":\"#000\"}),Y.css(\"cursor\",\"pointer\"),I.controlgroup?I.controlgroup():I.buttonset()};return r.length&&-1!==r[0].mime.indexOf(\"image/\")?(n=\"resize-\"+a.namespace+\"-\"+r[0].hash,i=a.getUI().find(\"#\"+n),i.length?(i.elfinderdialog(\"toTop\"),o.resolve()):(s(r[0],n),o)):o.reject()}},function(e){var t=function(e,t){var n=0;for(n in t)if(\"undefined\"!=typeof e[t[n]])return t[n];return e[t[n]]=\"\",t[n]};if(e.cssHooks.rotate={get:function(t){return e(t).rotate()},set:function(t,n){return e(t).rotate(n),n}},e.cssHooks.transform={get:function(e){var n=t(e.style,[\"WebkitTransform\",\"MozTransform\",\"OTransform\",\"msTransform\",\"transform\"]);return e.style[n]},set:function(e,n){var i=t(e.style,[\"WebkitTransform\",\"MozTransform\",\"OTransform\",\"msTransform\",\"transform\"]);return e.style[i]=n,n}},e.fn.rotate=function(e){if(\"undefined\"==typeof e){if(window.opera){var t=this.css(\"transform\").match(/rotate\\((.*?)\\)/);return t&&t[1]?Math.round(180*parseFloat(t[1])/Math.PI):0}var t=this.css(\"transform\").match(/rotate\\((.*?)\\)/);return t&&t[1]?parseInt(t[1]):0}return this.css(\"transform\",this.css(\"transform\").replace(/none|rotate\\(.*?\\)/,\"\")+\"rotate(\"+parseInt(e)+\"deg)\"),this},e.fx.step.rotate=function(t){0==t.state&&(t.start=e(t.elem).rotate(),t.now=t.start),e(t.elem).rotate(t.now)},\"undefined\"==typeof window.addEventListener&&\"undefined\"==typeof document.getElementsByClassName){var n=function(e){for(var t=e,n=t.offsetLeft,i=t.offsetTop;t.offsetParent&&(t=t.offsetParent,t==document.body||\"static\"==t.currentStyle.position);)t!=document.body&&t!=document.documentElement&&(n-=t.scrollLeft,i-=t.scrollTop),n+=t.offsetLeft,i+=t.offsetTop;return{x:n,y:i}},i=function(e){if(\"static\"==e.currentStyle.position){var t=n(e);e.style.position=\"absolute\",e.style.left=t.x+\"px\",e.style.top=t.y+\"px\"}},a=function(e,t){var n,a=1,r=1,o=1,s=1;if(\"undefined\"!=typeof e.style.msTransform)return!0;i(e),n=t.match(/rotate\\((.*?)\\)/);var l=n&&n[1]?parseInt(n[1]):0;l%=360,0>l&&(l=360+l);var d=l*Math.PI/180,c=Math.cos(d),u=Math.sin(d);a*=c,r*=-u,o*=u,s*=c,e.style.filter=(e.style.filter||\"\").replace(/progid:DXImageTransform\\.Microsoft\\.Matrix\\([^)]*\\)/,\"\")+(\"progid:DXImageTransform.Microsoft.Matrix(M11=\"+a+\",M12=\"+r+\",M21=\"+o+\",M22=\"+s+\",FilterType='bilinear',sizingMethod='auto expand')\");var p=parseInt(e.style.width||e.width||0),h=parseInt(e.style.height||e.height||0),d=l*Math.PI/180,f=Math.abs(Math.cos(d)),m=Math.abs(Math.sin(d)),g=(p-(p*f+h*m))/2,v=(h-(p*m+h*f))/2;return e.style.marginLeft=Math.floor(g)+\"px\",e.style.marginTop=Math.floor(v)+\"px\",!0},r=e.cssHooks.transform.set;e.cssHooks.transform.set=function(e,t){return r.apply(this,[e,t]),a(e,t),t}}}(jQuery),elFinder.prototype.commands.rm=function(){this.shortcuts=[{pattern:\"delete ctrl+backspace\"}],this.getstate=function(t){var n=this.fm;return t=t||n.selected(),!this._disabled&&t.length&&e.map(t,function(e){var t=n.file(e);return t&&t.phash&&!t.locked?e:null}).length==t.length?0:-1},this.exec=function(t){var n,i,a,r,o,s,l,d,c=this,u=this.fm,p=e.Deferred().fail(function(e){e&&u.error(e)}),h=this.files(t),f=h.length,m=(u.cwd().hash,'<div class=\"ui-helper-clearfix elfinder-rm-title\"><span class=\"elfinder-cwd-icon {class} ui-corner-all\"/>{title}<div class=\"elfinder-rm-desc\">{desc}</div></div>');return!f||this._disabled?p.reject():(e.each(h,function(e,t){return t.phash?t.locked?!p.reject([\"errLocked\",t.name]):void 0:!p.reject([\"errRm\",t.name,\"errPerm\"])}),\"pending\"==p.state()&&(n=this.hashes(t),f=h.length,l=[],f>1?(e.map(h,function(e){return\"directory\"==e.mime?1:null}).length||(o=0,e.each(h,function(e,t){if(!t.size||\"unknown\"==t.size)return o=\"unknown\",!1;var n=parseInt(t.size);n>=0&&o>=0&&(o+=n)}),l.push(u.i18n(\"size\")+\": \"+u.formatSize(o))),i=[e(m.replace(\"{class}\",\"elfinder-cwd-icon-group\").replace(\"{title}\",\"<strong>\"+u.i18n(\"items\")+\": \"+f+\"</strong>\").replace(\"{desc}\",l.join(\"<br>\")))]):(a=h[0],a.tmb&&(s=u.option(\"tmbUrl\")+a.tmb),a.size&&l.push(u.i18n(\"size\")+\": \"+u.formatSize(a.size)),l.push(u.i18n(\"modify\")+\": \"+u.formatDate(a)),r=u.escape(a.i18||a.name).replace(/([_.])/g,\"&#8203;$1\"),i=[e(m.replace(\"{class}\",u.mime2class(a.mime)).replace(\"{title}\",\"<strong>\"+r+\"</strong>\").replace(\"{desc}\",l.join(\"<br>\")))]),i.push(\"confirmRm\"),u.lockfiles({files:n}),d=u.confirm({title:c.title,text:i,accept:{label:\"btnRm\",callback:function(){u.request({data:{cmd:\"rm\",targets:n},notify:{type:\"rm\",cnt:f},preventFail:!0}).fail(function(e){p.reject(e)}).done(function(e){p.done(e)}).always(function(){u.unlockfiles({files:n})})}},cancel:{label:\"btnCancel\",callback:function(){u.unlockfiles({files:n}),u.selectfiles({files:n}),p.reject()}}}),s&&e(\"<img/>\").load(function(){d.find(\".elfinder-cwd-icon\").css(\"background\",'url(\"'+s+'\") center center no-repeat')}).attr(\"src\",s)),p)}},elFinder.prototype.commands.search=function(){this.title=\"Find files\",this.options={ui:\"searchbutton\"},this.alwaysEnabled=!0,this.updateOnSelect=!1,this.getstate=function(){return 0},this.exec=function(t,n,i){var a,r=this.fm;return\"string\"==typeof t&&t?(\"object\"==typeof n&&(i=n.mime||\"\",n=n.target||\"\"),n=n?n:\"\",i=i?e.trim(i).replace(\",\",\" \").split(\" \"):[],e.each(i,function(){return e.trim(this)}),r.trigger(\"searchstart\",{query:t,target:n,mimes:i}),a=r.request({data:{cmd:\"search\",q:t,target:n,mimes:i},notify:{type:\"search\",cnt:1,hideCnt:!0},cancel:!0})):(r.getUI(\"toolbar\").find(\".\"+r.res(\"class\",\"searchbtn\")+\" :text\").focus(),e.Deferred().reject())}},elFinder.prototype.commands.sort=function(){var t,n=this,i=n.fm;this.options={ui:\"sortbutton\"},i.bind(\"open sortchange\",function(){n.variants=[],e.each(i.sortRules,function(e){var t={type:e,order:e==i.sortType?\"asc\"==i.sortOrder?\"desc\":\"asc\":i.sortOrder},a=e==i.sortType?\"asc\"==t.order?\"n\":\"s\":\"\";n.variants.push([t,(a?'<span class=\"ui-icon ui-icon-arrowthick-1-'+a+'\"></span>':\"\")+\"&nbsp;\"+i.i18n(\"sort\"+e)])})}),i.bind(\"open sortchange viewchange search searchend\",function(){t&&clearTimeout(t),t=setTimeout(function(){var t=e(i.cwd).find(\"div.elfinder-cwd-wrapper-list table\");t.length&&e.each(i.sortRules,function(a){var r=t.find(\"thead tr td.elfinder-cwd-view-th-\"+a);if(r.length){var o,s=a==i.sortType,l={type:a,order:s?\"asc\"==i.sortOrder?\"desc\":\"asc\":i.sortOrder};s&&(r.addClass(\"ui-state-active\"),o=\"asc\"==i.sortOrder?\"n\":\"s\",e('<span class=\"ui-icon ui-icon-triangle-1-'+o+'\"/>').appendTo(r)),e(r).on(\"click\",function(e){e.stopPropagation(),n.exec([],l)}).hover(function(){e(this).addClass(\"ui-state-hover\")},function(){e(this).removeClass(\"ui-state-hover\")})}})},100)}),this.getstate=function(){return 0},this.exec=function(t,n){var i=this.fm,a=e.extend({type:i.sortType,order:i.sortOrder,stick:i.sortStickFolders},n);return this.fm.setSort(a.type,a.order,a.stick),e.Deferred().resolve()}},elFinder.prototype.commands.up=function(){this.alwaysEnabled=!0,this.updateOnSelect=!1,this.shortcuts=[{pattern:\"ctrl+up\"}],this.getstate=function(){return this.fm.cwd().phash?0:-1},this.exec=function(){return this.fm.cwd().phash?this.fm.exec(\"open\",this.fm.cwd().phash):e.Deferred().reject()}},elFinder.prototype.commands.upload=function(){var t=this.fm.res(\"class\",\"hover\");this.disableOnSearch=!0,this.updateOnSelect=!1,this.shortcuts=[{pattern:\"ctrl+u\"}],this.getstate=function(e){var t,n=this.fm,e=n.directUploadTarget?[n.directUploadTarget]:e||[n.cwd().hash];return this._disabled||1!=e.length||(t=n.file(e[0])),t&&\"directory\"==t.mime&&t.write?0:-1},this.exec=function(n){var i,a,r,o,s,l,d,c=this.fm,u=n&&n instanceof Array?n:null,p=!u&&n&&n.target?[n.target]:u,h=function(e){c.upload(e).fail(function(e){m.reject(e)}).done(function(e){var t=c.getUI(\"cwd\");if(m.resolve(e),e&&e.added&&e.added[0]){var n=t.find(\"#\"+c.cwdHash2Id(e.added[0].hash));n.length&&n.trigger(\"scrolltoview\")}})},f=function(e){i.elfinderdialog(\"close\"),u&&(e.target=u[0]),h(e)},m=e.Deferred();return this.getstate(p)<0?m.reject():(l=function(e){e.stopPropagation(),e.preventDefault();var t=!1,n=\"\",i=null,a=\"\",r=null,o=e._target||null;try{i=e.dataTransfer.getData(\"elfinderfrom\")}catch(e){}if(i&&(a=window.location.href+c.cwd().hash,!o&&i===a||o===a))return m.reject(),void 0;try{r=e.dataTransfer.getData(\"text/html\"),r.match(/<(?:img|a)/i)||(r=\"\")}catch(e){}r?(t=[r],n=\"html\"):e.dataTransfer&&e.dataTransfer.items&&e.dataTransfer.items.length?(t=e.dataTransfer,n=\"data\"):e.dataTransfer&&e.dataTransfer.files&&e.dataTransfer.files.length?(t=e.dataTransfer.files,n=\"files\"):(r=e.dataTransfer.getData(\"text\"))&&(t=[r],n=\"text\"),t?h({files:t,type:n,target:o}):m.reject()},!u&&n?(n.input||n.files?(n.type=\"files\",h(n)):n.dropEvt&&l(n.dropEvt),m):(d=function(t){var n,t=t.originalEvent||t,i=[],a=[];if(t.clipboardData){if(t.clipboardData.items&&t.clipboardData.items.length){a=t.clipboardData.items;for(var r=0;r<a.length;r++)\"file\"==t.clipboardData.items[r].kind&&(n=t.clipboardData.items[r].getAsFile(),i.push(n))}else t.clipboardData.files&&t.clipboardData.files.length&&(i=t.clipboardData.files);if(i.length)return f({files:i,type:\"files\"}),void 0}var o=t.target||t.srcElement;setTimeout(function(){if(o.innerHTML){e(o).find(\"img\").each(function(t,n){n.src.match(/^webkit-fake-url:\\/\\//)&&e(n).remove()});var t=o.innerHTML.replace(/<br[^>]*>/gi,\" \"),n=t.match(/<[^>]+>/)?\"html\":\"text\";o.innerHTML=\"\",f({files:[t],type:n})}},1)},a=e('<input type=\"file\" multiple=\"true\"/>').change(function(){f({input:a[0],type:\"files\"})}).on(\"dragover\",function(e){e.originalEvent.dataTransfer.dropEffect=\"copy\"}),r=e('<div class=\"ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only\"><span class=\"ui-button-text\">'+c.i18n(\"selectForUpload\")+\"</span></div>\").append(e(\"<form/>\").append(a)).hover(function(){r.toggleClass(t)}),i=e('<div class=\"elfinder-upload-dialog-wrapper\"/>').append(r),s=e('<div class=\"ui-corner-all elfinder-upload-dropbox\" contenteditable=\"true\">'+c.i18n(\"dropFilesBrowser\")+\"</div>\").on(\"paste drop\",function(e){d(e)}).on(\"mousedown click\",function(){e(this).focus()}).on(\"focus\",function(){this.innerHTML=\"\"}).on(\"dragenter mouseover\",function(){s.addClass(t)}).on(\"dragleave mouseout\",function(){s.removeClass(t)}),c.dragUpload?(o=e('<div class=\"ui-corner-all elfinder-upload-dropbox\" contenteditable=\"true\">'+c.i18n(\"dropPasteFiles\")+\"</div>\").on(\"paste\",function(e){d(e)}).on(\"mousedown click\",function(){e(this).focus()}).on(\"focus\",function(){this.innerHTML=\"\"}).on(\"mouseover\",function(){e(this).addClass(t)}).on(\"mouseout\",function(){e(this).removeClass(t)}).prependTo(i).after('<div class=\"elfinder-upload-dialog-or\">'+c.i18n(\"or\")+\"</div>\")[0],o.addEventListener(\"dragenter\",function(n){n.stopPropagation(),n.preventDefault(),e(o).addClass(t)},!1),o.addEventListener(\"dragleave\",function(n){n.stopPropagation(),n.preventDefault(),e(o).removeClass(t)},!1),o.addEventListener(\"dragover\",function(n){n.stopPropagation(),n.preventDefault(),n.dataTransfer.dropEffect=\"copy\",e(o).addClass(t)},!1),o.addEventListener(\"drop\",function(e){i.elfinderdialog(\"close\"),u&&(e._target=u[0]),l(e)},!1)):s.prependTo(i).after('<div class=\"elfinder-upload-dialog-or\">'+c.i18n(\"or\")+\"</div>\")[0],c.dialog(i,{title:this.title+(u?\" - \"+c.escape(c.file(u[0]).name):\"\"),modal:!0,resizable:!1,destroyOnClose:!0}),m))}},elFinder.prototype.commands.view=function(){this.value=this.fm.viewType,this.alwaysEnabled=!0,this.updateOnSelect=!1,this.options={ui:\"viewbutton\"},this.getstate=function(){return 0},this.exec=function(){var e=this.fm.storage(\"view\",\"list\"==this.value?\"icons\":\"list\");this.fm.viewchange(),this.update(void 0,e)}}}(jQuery);\n\\ No newline at end of file\n"], "label": 0, "cve": "CVE-2018-9110", "rank": 61, "commit": "c6b7f7a06e79d34bc1d7dea2b829553a5ad4bea8", "cve_attention_tokens": []}
{"cve_desc": "An issue was discovered in osTicket before 1.10.7 and 1.12.x before 1.12.1. The Ticket creation form allows users to upload files along with queries. It was found that the file-upload functionality has fewer (or no) mitigations implemented for file content checks; also, the output is not handled properly, causing persistent XSS that leads to cookie stealing or malicious actions. For example, a non-agent user can upload a .html file, and Content-Disposition will be set to inline instead of attachment.", "commit_msg": "Merge pull request #4901 from JediKev/issue/retained-deleted-listitem-errors\n\nissue: Retained Deleted ListItem Errors\n", "diff": [], "label": 0, "cve": "CVE-2019-14748", "rank": 25, "commit": "14bfc4cbf95b8c9a301e4fc007398d0b4db6c859", "cve_attention_tokens": []}
{"cve_desc": "Cross-site scripting (XSS) vulnerability in the URL downloader repository in repository/url/lib.php in Moodle through 2.3.11, 2.4.x before 2.4.10, 2.5.x before 2.5.6, and 2.6.x before 2.6.3 allows remote attackers to inject arbitrary web script or HTML via unspecified vectors.", "commit_msg": "MDL-44191 hack around MySQL 5.6 inability to lower auto_increment\n\n", "diff": ["diff --git a/lib/ddl/tests/ddl_test.php b/lib/ddl/tests/ddl_test.php\nindex d5e63a9fa3f..6fed8e1d4ea 100644\n--- a/lib/ddl/tests/ddl_test.php\n+++ b/lib/ddl/tests/ddl_test.php\n@@ -1655,7 +1655,8 @@ class core_ddl_testcase extends database_driver_testcase {\n         $DB->delete_records('testtable', array()); // This delete performs one DELETE.\n \n         $dbman->reset_sequence($table); // Using xmldb object.\n-        $this->assertEquals(1, $DB->insert_record('testtable', (object)array('course'=>13)));\n+        $this->assertEquals(1, $DB->insert_record('testtable', (object)array('course'=>13)),\n+            'Some versions of MySQL 5.6.x are known to not support lowering of auto-increment numbers.');\n \n         $DB->import_record('testtable', $record);\n         $dbman->reset_sequence($tablename); // Using string.\n", "diff --git a/lib/testing/classes/util.php b/lib/testing/classes/util.php\nindex ba4f4915170..097bbd1076f 100644\n--- a/lib/testing/classes/util.php\n+++ b/lib/testing/classes/util.php\n@@ -570,7 +570,67 @@ abstract class testing_util {\n \n         $empties = self::guess_unmodified_empty_tables();\n \n+        $borkedmysql = false;\n+        if ($DB->get_dbfamily() === 'mysql') {\n+            $version = $DB->get_server_info();\n+            if (version_compare($version['version'], '5.6.0') == 1 and version_compare($version['version'], '5.6.16') == -1) {\n+                // Everything that comes from Oracle is evil!\n+                //\n+                // See http://dev.mysql.com/doc/refman/5.6/en/alter-table.html\n+                // You cannot reset the counter to a value less than or equal to to the value that is currently in use.\n+                //\n+                // From 5.6.16 release notes:\n+                //   InnoDB: The ALTER TABLE INPLACE algorithm would fail to decrease the auto-increment value.\n+                //           (Bug #17250787, Bug #69882)\n+                $borkedmysql = true;\n+\n+            } else if (version_compare($version['version'], '10.0.0') == 1) {\n+                // And MariaDB is no better!\n+                // Let's hope they pick the patch sometime later...\n+                $borkedmysql = true;\n+            }\n+        }\n+\n+        if ($borkedmysql) {\n+            $mysqlsequences = array();\n+            $prefix = $DB->get_prefix();\n+            $rs = $DB->get_recordset_sql(\"SHOW TABLE STATUS LIKE ?\", array($prefix.'%'));\n+            foreach ($rs as $info) {\n+                $table = strtolower($info->name);\n+                if (strpos($table, $prefix) !== 0) {\n+                    // Incorrect table match caused by _ char.\n+                    continue;\n+                }\n+                if (!is_null($info->auto_increment)) {\n+                    $table = preg_replace('/^'.preg_quote($prefix, '/').'/', '', $table);\n+                    $mysqlsequences[$table] = $info->auto_increment;\n+                }\n+            }\n+        }\n+\n         foreach ($data as $table => $records) {\n+            if ($borkedmysql) {\n+                if (empty($records) and isset($empties[$table])) {\n+                    continue;\n+                }\n+\n+                if (isset($structure[$table]['id']) and $structure[$table]['id']->auto_increment) {\n+                    $current = $DB->get_records($table, array(), 'id ASC');\n+                    if ($current == $records) {\n+                        if (isset($mysqlsequences[$table]) and $mysqlsequences[$table] == $structure[$table]['id']->auto_increment) {\n+                            continue;\n+                        }\n+                    }\n+                }\n+\n+                // Use TRUNCATE as a workaround and reinsert everything.\n+                $DB->delete_records($table, null);\n+                foreach ($records as $record) {\n+                    $DB->import_record($table, $record, false, true);\n+                }\n+                continue;\n+            }\n+\n             if (empty($records)) {\n                 if (isset($empties[$table])) {\n                     // table was not modified and is empty\n"], "label": 0, "cve": "CVE-2014-0218", "rank": 64, "commit": "59f38981857e243180c72c8c4b1dbbebd2918b8c", "cve_attention_tokens": []}
{"cve_desc": "British Columbia Institute of Technology CodeIgniter 3.1.3 is vulnerable to HTTP Header Injection in the set_status_header() common function under Apache resulting in HTTP Header Injection flaws.", "commit_msg": "Merge pull request #5006 from tianhe1986/develop_common\n\nFix two bugs with Common Functions \n", "diff": ["diff --git a/system/core/Common.php b/system/core/Common.php\nindex 8437f7926..8b74db0a3 100644\n--- a/system/core/Common.php\n+++ b/system/core/Common.php\n@@ -319,17 +319,16 @@ if ( ! function_exists('get_mimes'))\n \n \t\tif (empty($_mimes))\n \t\t{\n-\t\t\tif (file_exists(APPPATH.'config/'.ENVIRONMENT.'/mimes.php'))\n-\t\t\t{\n-\t\t\t\t$_mimes = include(APPPATH.'config/'.ENVIRONMENT.'/mimes.php');\n-\t\t\t}\n-\t\t\telseif (file_exists(APPPATH.'config/mimes.php'))\n+\t\t\t$_mimes = array();\n+\n+\t\t\tif (file_exists(APPPATH.'config/mimes.php'))\n \t\t\t{\n-\t\t\t\t$_mimes = include(APPPATH.'config/mimes.php');\n+\t\t\t\t$_mimes = array_merge($_mimes, include(APPPATH.'config/mimes.php'));\n \t\t\t}\n-\t\t\telse\n+\n+\t\t\tif (file_exists(APPPATH.'config/'.ENVIRONMENT.'/mimes.php'))\n \t\t\t{\n-\t\t\t\t$_mimes = array();\n+\t\t\t\t$_mimes = array_merge($_mimes, include(APPPATH.'config/'.ENVIRONMENT.'/mimes.php'));\n \t\t\t}\n \t\t}\n \n@@ -719,6 +718,7 @@ if ( ! function_exists('remove_invisible_characters'))\n \t\t{\n \t\t\t$non_displayables[] = '/%0[0-8bcef]/i';\t// url encoded 00-08, 11, 12, 14, 15\n \t\t\t$non_displayables[] = '/%1[0-9a-f]/i';\t// url encoded 16-31\n+\t\t\t$non_displayables[] = '/%7f/i';\t// url encoded 127\n \t\t}\n \n \t\t$non_displayables[] = '/[\\x00-\\x08\\x0B\\x0C\\x0E-\\x1F\\x7F]+/S';\t// 00-08, 11, 12, 14-31, 127\n"], "label": 0, "cve": "CVE-2017-1000247", "rank": 14, "commit": "d60e51ba3bc542ead57d9d7b3b5f11e5c26a72e4", "cve_attention_tokens": []}
{"cve_desc": "Stored XSS viva .svg file upload in GitHub repository polonel/trudesk prior to v1.2.0.", "commit_msg": "chore(docker): test elasticsearch\n", "diff": ["diff --git a/docker-compose.yml b/docker-compose.yml\nindex 656d4880..1cf81cc5 100644\n--- a/docker-compose.yml\n+++ b/docker-compose.yml\n@@ -14,11 +14,23 @@ services:\n       TD_MONGODB_SERVER: mongo\n       TD_MONGODB_DATABASE: trudesk\n   mongo:\n-    image: mongo:3.6\n+    image: mongo:5.0-focal\n     restart: always\n     ports:\n       - \"27017:27017\"\n     volumes:\n       - mongo:/var/lib/mongo\n+  elasticsearch:\n+    image: elasticsearch:8.0.0\n+    restart: always\n+    environment:\n+      - xpack.security.enabled=false\n+      - xpack.security.http.ssl=false\n+    ports:\n+      - \"9200:9200\"\n+      - \"9300:9300\"\n+    volumes:\n+      - elasticsearch:/usr/share/elasticsearch/data\n volumes:\n-  mongo:\n\\ No newline at end of file\n+  mongo:\n+  elasticsearch:\n\\ No newline at end of file\n"], "label": 0, "cve": "CVE-2022-1045", "rank": 22, "commit": "005d8743530a3b2c4e2b03eee020a723e7d9f993", "cve_attention_tokens": []}
{"cve_desc": "The _checkPolkitPrivilege function in serviceHelper.py in Back In Time (aka backintime) 1.1.18 and earlier uses a deprecated polkit authorization method (unix-process) that is subject to a race condition (time of check, time of use). With this authorization method, the owner of a process requesting a polkit operation is checked by polkitd via /proc/<pid>/status, by which time the requesting process may have been replaced by a different process with the same PID that has different privileges then the original requester.", "commit_msg": "reformat docstrings, use double backtick\n\n", "diff": ["diff --git a/common/applicationinstance.py b/common/applicationinstance.py\nindex 1d80e093..8c5a0450 100644\n--- a/common/applicationinstance.py\n+++ b/common/applicationinstance.py\n@@ -59,7 +59,8 @@ class ApplicationInstance:\n                                 instance running\n \n         Returns:\n-            bool:               True if this is the only application instance\n+            bool:               ``True`` if this is the only application\n+                                instance\n         \"\"\"\n         #check if the pidfile exists\n         if not os.path.isfile( self.pid_file ):\n", "diff --git a/common/backintime.py b/common/backintime.py\nindex 5fac487c..e5fb1578 100644\n--- a/common/backintime.py\n+++ b/common/backintime.py\n@@ -72,7 +72,7 @@ def take_snapshot( cfg, force = True ):\n                                 or would be prevented (e.g. running on battery)\n \n     Returns:\n-        bool:                   True if successful\n+        bool:                   ``True`` if successful\n     \"\"\"\n     tools.load_env(cfg.get_cron_env_file())\n     ret = snapshots.Snapshots( cfg ).take_snapshot( force )\n@@ -478,7 +478,7 @@ def arg_parse(args):\n \n     Args:\n         args (argparse.Namespace):  Namespace that should be enhanced\n-                                    or None\n+                                    or ``None``\n \n     Returns:\n         argparser.Namespace:        new parsed Namespace\n@@ -492,7 +492,7 @@ def arg_parse(args):\n                         main Namespace that should get new arguments\n             subArgs (argparse.Namespace):\n                         second Namespace which have new arguments\n-                        that should be merged into `args`\n+                        that should be merged into ``args``\n         \"\"\"\n         for key, value in vars(subArgs).items():\n             #only add new values if it isn't set already or if there really IS a value\n@@ -606,14 +606,14 @@ def getConfig(args, check = True):\n     Args:\n         args (argparse.Namespace):\n                         previously parsed arguments\n-        check (bool):   if True check if config is valid\n+        check (bool):   if ``True`` check if config is valid\n \n     Returns:\n         config.Config:  current config with requested profile selected\n \n     Raises:\n-        SystemExit:     1 if `profile` or `profile_id` is no valid profile\n-                        2 if `check` is True and config is not configured\n+        SystemExit:     1 if ``profile`` or ``profile_id`` is no valid profile\n+                        2 if ``check`` is ``True`` and config is not configured\n     \"\"\"\n     cfg = config.Config(args.config)\n     logger.debug('config file: %s' % cfg._LOCAL_CONFIG_PATH)\n@@ -635,7 +635,7 @@ def getConfig(args, check = True):\n \n def setQuiet(args):\n     \"\"\"\n-    Redirect :py:data:`sys.stdout` to `/dev/null` if `--quiet` was set on\n+    Redirect :py:data:`sys.stdout` to ``/dev/null`` if ``--quiet`` was set on\n     commandline. Return the original :py:data:`sys.stdout` fileobject which can\n     be used to print absolute necessary information.\n \n", "diff --git a/common/configfile.py b/common/configfile.py\nindex 77b27390..4198d53c 100644\n--- a/common/configfile.py\n+++ b/common/configfile.py\n@@ -84,7 +84,7 @@ class ConfigFile(object):\n             filename (str): full path\n \n         Returns:\n-            bool:           True if successful\n+            bool:           ``True`` if successful\n         \"\"\"\n         try:\n             with open( filename, 'wt' ) as f:\n@@ -148,13 +148,13 @@ class ConfigFile(object):\n \n     def has_value( self, key ):\n         \"\"\"\n-        True if key is set.\n+        ``True`` if key is set.\n \n         Args:\n             key (str):  string used as key\n \n         Returns:\n-            bool:       True if the `key` is set\n+            bool:       ``True`` if the ``key`` is set\n         \"\"\"\n         return key in self.dict\n \n@@ -164,11 +164,11 @@ class ConfigFile(object):\n \n         Args:\n             key (str):              string used as key\n-            default_value (str):    return this if `key` is not set\n+            default_value (str):    return this if ``key`` is not set\n \n         Returns:\n-            str:                    value of `key` or `default_value`\n-                                    if `key` is not set.\n+            str:                    value of ``key`` or ``default_value``\n+                                    if ``key`` is not set.\n         \"\"\"\n         if key in self.dict:\n             return self.dict[ key ]\n@@ -191,11 +191,11 @@ class ConfigFile(object):\n \n         Args:\n             key (str):              string used as key\n-            default_value (int):    return this if `key` is not set\n+            default_value (int):    return this if ``key`` is not set\n \n         Returns:\n-            int:                    value of `key` or `default_value`\n-                                    if `key` is not set.\n+            int:                    value of ``key`` or ``default_value``\n+                                    if ``key`` is not set.\n         \"\"\"\n         try:\n             return int( self.dict[ key ] )\n@@ -258,10 +258,10 @@ class ConfigFile(object):\n             default_value (list):   defualt value\n \n         Returns:\n-            list:                   value of `key` or `default_value`\n-                                    if `key` is not set.\n+            list:                   value of ``key`` or ``default_value``\n+                                    if ``key`` is not set.\n \n-        `type_key` pattern examples::\n+        ``type_key`` pattern examples::\n \n             'str:value'               => return str values from key.value\n             'int:type'                => return int values from key.type\n@@ -314,7 +314,7 @@ class ConfigFile(object):\n             type_key (str): pattern of 'value-type:value-name'. See examples below.\n             value (list):   that should be stored\n \n-        `type_key` pattern examples::\n+        ``type_key`` pattern examples::\n \n             'str:value'               => return str values from key.value\n             'int:type'                => return int values from key.type\n@@ -496,7 +496,7 @@ class ConfigFileWithProfiles( ConfigFile ):\n             profile_id (str, int):  valid profile ID\n \n         Returns:\n-            bool:                   True if successful\n+            bool:                   ``True`` if successful\n         \"\"\"\n         if isinstance(profile_id, int):\n             profile_id = str(profile_id)\n@@ -519,7 +519,7 @@ class ConfigFileWithProfiles( ConfigFile ):\n             name (str): valid profile name\n \n         Returns:\n-            bool:       True if successful\n+            bool:       ``True`` if successful\n         \"\"\"\n         profiles = self.get_profiles()\n \n@@ -534,13 +534,13 @@ class ConfigFileWithProfiles( ConfigFile ):\n \n     def profile_exists( self, profile_id ):\n         \"\"\"\n-        True if the profile exists.\n+        ``True`` if the profile exists.\n \n         Args:\n             profile_id (str, int):  profile ID\n \n         Returns:\n-            bool:                   True if `profile_id` exists.\n+            bool:                   ``True`` if ``profile_id`` exists.\n         \"\"\"\n         if isinstance(profile_id, int):\n             profile_id = str(profile_id)\n@@ -548,13 +548,13 @@ class ConfigFileWithProfiles( ConfigFile ):\n \n     def profile_exists_by_name( self, name ):\n         \"\"\"\n-        True if the profile exists.\n+        ``True`` if the profile exists.\n \n         Args:\n             name (str): profile name\n \n         Returns:\n-            bool:       True if `name` exists.\n+            bool:       ``True`` if ``name`` exists.\n         \"\"\"\n         profiles = self.get_profiles()\n \n@@ -629,7 +629,7 @@ class ConfigFileWithProfiles( ConfigFile ):\n             profile_id (str, int):  valid profile ID\n \n         Returns:\n-            bool:   True if successful\n+            bool:   ``True`` if successful\n         \"\"\"\n         if isinstance(profile_id, int):\n             profile_id = str(profile_id)\n@@ -669,7 +669,7 @@ class ConfigFileWithProfiles( ConfigFile ):\n             profile_id (str, int):  valid profile ID\n \n         Returns:\n-            bool:                   True if successful.\n+            bool:                   ``True`` if successful.\n         \"\"\"\n         if isinstance(profile_id, int):\n             profile_id = str(profile_id)\n@@ -727,14 +727,14 @@ class ConfigFileWithProfiles( ConfigFile ):\n \n     def has_profile_value( self, key, profile_id = None ):\n         \"\"\"\n-        True if key is set in profile.\n+        ``True`` if key is set in profile.\n \n         Args:\n             key (str):              string used as key\n             profile_id (str, int):  valid profile ID\n \n         Returns:\n-            bool:                   True if `key` is set.\n+            bool:                   ``True`` if ``key`` is set.\n         \"\"\"\n         return self._get_profile_key_( key, profile_id ) in self.dict\n \n", "diff --git a/common/doc-dev/applicationinstance.rst b/common/doc-dev/applicationinstance.rst\nindex 6eec755b..7e9a2ab6 100644\n--- a/common/doc-dev/applicationinstance.rst\n+++ b/common/doc-dev/applicationinstance.rst\n@@ -5,4 +5,3 @@ applicationinstance module\n     :members:\n     :undoc-members:\n     :show-inheritance:\n-    :private-members:\n", "diff --git a/common/doc-dev/askpass.rst b/common/doc-dev/askpass.rst\nindex a94337cd..190042f3 100644\n--- a/common/doc-dev/askpass.rst\n+++ b/common/doc-dev/askpass.rst\n@@ -5,4 +5,3 @@ askpass module\n     :members:\n     :undoc-members:\n     :show-inheritance:\n-    :private-members:\n", "diff --git a/common/doc-dev/backintime.rst b/common/doc-dev/backintime.rst\nindex 0f16e453..201e2aa4 100644\n--- a/common/doc-dev/backintime.rst\n+++ b/common/doc-dev/backintime.rst\n@@ -5,4 +5,3 @@ backintime module\n     :members:\n     :undoc-members:\n     :show-inheritance:\n-    :private-members:\n", "diff --git a/common/doc-dev/bcolors.rst b/common/doc-dev/bcolors.rst\nindex f78122a9..6a213c9a 100644\n--- a/common/doc-dev/bcolors.rst\n+++ b/common/doc-dev/bcolors.rst\n@@ -5,4 +5,3 @@ bcolors module\n     :members:\n     :undoc-members:\n     :show-inheritance:\n-    :private-members:\n", "diff --git a/common/doc-dev/cli.rst b/common/doc-dev/cli.rst\nindex d0cfc50a..0f3af9b9 100644\n--- a/common/doc-dev/cli.rst\n+++ b/common/doc-dev/cli.rst\n@@ -5,4 +5,3 @@ cli module\n     :members:\n     :undoc-members:\n     :show-inheritance:\n-    :private-members:\n", "diff --git a/common/doc-dev/conf.py b/common/doc-dev/conf.py\nindex 759dd62a..d40cb93d 100644\n--- a/common/doc-dev/conf.py\n+++ b/common/doc-dev/conf.py\n@@ -108,6 +108,10 @@ pygments_style = 'sphinx'\n \n intersphinx_mapping = {'python': ('https://docs.python.org/3.4', None)}\n \n+# -- Napoleon include private members which have docstrings ---------------\n+\n+napoleon_include_private_with_doc = True\n+\n # -- Options for HTML output ----------------------------------------------\n \n # The theme to use for HTML and HTML Help pages.  See the documentation for\n", "diff --git a/common/doc-dev/config.rst b/common/doc-dev/config.rst\nindex 262afeb8..f504a639 100644\n--- a/common/doc-dev/config.rst\n+++ b/common/doc-dev/config.rst\n@@ -5,4 +5,3 @@ config module\n     :members:\n     :undoc-members:\n     :show-inheritance:\n-    :private-members:\n", "diff --git a/common/doc-dev/configfile.rst b/common/doc-dev/configfile.rst\nindex 979401a9..ad25cf36 100644\n--- a/common/doc-dev/configfile.rst\n+++ b/common/doc-dev/configfile.rst\n@@ -5,4 +5,3 @@ configfile module\n     :members:\n     :undoc-members:\n     :show-inheritance:\n-    :private-members:\n", "diff --git a/common/doc-dev/driveinfo.rst b/common/doc-dev/driveinfo.rst\nindex c4bc42e5..18da8cb7 100644\n--- a/common/doc-dev/driveinfo.rst\n+++ b/common/doc-dev/driveinfo.rst\n@@ -5,4 +5,3 @@ driveinfo module\n     :members:\n     :undoc-members:\n     :show-inheritance:\n-    :private-members:\n", "diff --git a/common/doc-dev/dummytools.rst b/common/doc-dev/dummytools.rst\nindex b3330e3c..0eee7995 100644\n--- a/common/doc-dev/dummytools.rst\n+++ b/common/doc-dev/dummytools.rst\n@@ -5,4 +5,3 @@ dummytools module\n     :members:\n     :undoc-members:\n     :show-inheritance:\n-    :private-members:\n", "diff --git a/common/doc-dev/encfstools.rst b/common/doc-dev/encfstools.rst\nindex 5f4443c7..822ef51f 100644\n--- a/common/doc-dev/encfstools.rst\n+++ b/common/doc-dev/encfstools.rst\n@@ -5,4 +5,3 @@ encfstools module\n     :members:\n     :undoc-members:\n     :show-inheritance:\n-    :private-members:\n", "diff --git a/common/doc-dev/exceptions.rst b/common/doc-dev/exceptions.rst\nindex 3ee2e85e..9f6229c5 100644\n--- a/common/doc-dev/exceptions.rst\n+++ b/common/doc-dev/exceptions.rst\n@@ -5,4 +5,3 @@ exceptions module\n     :members:\n     :undoc-members:\n     :show-inheritance:\n-    :private-members:\n", "diff --git a/common/doc-dev/guiapplicationinstance.rst b/common/doc-dev/guiapplicationinstance.rst\nindex 1dbd69cb..7f6c5340 100644\n--- a/common/doc-dev/guiapplicationinstance.rst\n+++ b/common/doc-dev/guiapplicationinstance.rst\n@@ -5,4 +5,3 @@ guiapplicationinstance module\n     :members:\n     :undoc-members:\n     :show-inheritance:\n-    :private-members:\n", "diff --git a/common/doc-dev/logger.rst b/common/doc-dev/logger.rst\nindex c2414933..9290a24f 100644\n--- a/common/doc-dev/logger.rst\n+++ b/common/doc-dev/logger.rst\n@@ -5,4 +5,3 @@ logger module\n     :members:\n     :undoc-members:\n     :show-inheritance:\n-    :private-members:\n", "diff --git a/common/doc-dev/mount.rst b/common/doc-dev/mount.rst\nindex b087d78a..37f7e655 100644\n--- a/common/doc-dev/mount.rst\n+++ b/common/doc-dev/mount.rst\n@@ -5,4 +5,3 @@ mount module\n     :members:\n     :undoc-members:\n     :show-inheritance:\n-    :private-members:\n", "diff --git a/common/doc-dev/password.rst b/common/doc-dev/password.rst\nindex 2d3157cd..17c5687e 100644\n--- a/common/doc-dev/password.rst\n+++ b/common/doc-dev/password.rst\n@@ -5,4 +5,3 @@ password module\n     :members:\n     :undoc-members:\n     :show-inheritance:\n-    :private-members:\n", "diff --git a/common/doc-dev/password_ipc.rst b/common/doc-dev/password_ipc.rst\nindex 7a7253ee..5d4ff90b 100644\n--- a/common/doc-dev/password_ipc.rst\n+++ b/common/doc-dev/password_ipc.rst\n@@ -5,4 +5,3 @@ password_ipc module\n     :members:\n     :undoc-members:\n     :show-inheritance:\n-    :private-members:\n", "diff --git a/common/doc-dev/pluginmanager.rst b/common/doc-dev/pluginmanager.rst\nindex ec2d9534..c2d8e9f7 100644\n--- a/common/doc-dev/pluginmanager.rst\n+++ b/common/doc-dev/pluginmanager.rst\n@@ -5,4 +5,3 @@ pluginmanager module\n     :members:\n     :undoc-members:\n     :show-inheritance:\n-    :private-members:\n", "diff --git a/common/doc-dev/progress.rst b/common/doc-dev/progress.rst\nindex 42164fa5..af7833c2 100644\n--- a/common/doc-dev/progress.rst\n+++ b/common/doc-dev/progress.rst\n@@ -5,4 +5,3 @@ progress module\n     :members:\n     :undoc-members:\n     :show-inheritance:\n-    :private-members:\n", "diff --git a/common/doc-dev/snapshots.rst b/common/doc-dev/snapshots.rst\nindex 91170c50..07b9c9d2 100644\n--- a/common/doc-dev/snapshots.rst\n+++ b/common/doc-dev/snapshots.rst\n@@ -5,4 +5,3 @@ snapshots module\n     :members:\n     :undoc-members:\n     :show-inheritance:\n-    :private-members:\n", "diff --git a/common/doc-dev/sshMaxArg.rst b/common/doc-dev/sshMaxArg.rst\nindex 56e6e540..62f1e137 100644\n--- a/common/doc-dev/sshMaxArg.rst\n+++ b/common/doc-dev/sshMaxArg.rst\n@@ -5,4 +5,3 @@ sshMaxArg module\n     :members:\n     :undoc-members:\n     :show-inheritance:\n-    :private-members:\n", "diff --git a/common/doc-dev/sshtools.rst b/common/doc-dev/sshtools.rst\nindex 3e12af41..f30dcca5 100644\n--- a/common/doc-dev/sshtools.rst\n+++ b/common/doc-dev/sshtools.rst\n@@ -5,4 +5,3 @@ sshtools module\n     :members:\n     :undoc-members:\n     :show-inheritance:\n-    :private-members:\n", "diff --git a/common/doc-dev/tools.rst b/common/doc-dev/tools.rst\nindex 4fff9f25..1fcb26fe 100644\n--- a/common/doc-dev/tools.rst\n+++ b/common/doc-dev/tools.rst\n@@ -5,4 +5,3 @@ tools module\n     :members:\n     :undoc-members:\n     :show-inheritance:\n-    :private-members:\n", "diff --git a/common/mount.py b/common/mount.py\nindex a1eb70ff..7bedbcea 100644\n--- a/common/mount.py\n+++ b/common/mount.py\n@@ -35,8 +35,9 @@ class Mount(object):\n     and checks on the low-level :py:class:`MountControl` subclass backends for\n     BackInTime.\n \n-    If `cfg` is `None` this will load the default config. If `profile_id` is\n-    `None` it will use `cfg.get_current_profile()`.\n+    If ``cfg`` is ``None`` this will load the default config. If ``profile_id``\n+    is ``None`` it will use\n+    :py:func:`configfile.ConfigFileWithProfiles.get_current_profile`.\n \n     If the current profile uses Password-Cache and the Password-Cache is not\n     running this will try to start it.\n@@ -44,9 +45,9 @@ class Mount(object):\n     Args:\n         cfg (config.Config):    current config\n         profile_id (str):       profile ID that should be used\n-        tmp_mount (bool):       if True mount to a temporary destination\n-        parent (QWidget):       parent widget for QDialogs or `None` if there is\n-                                no parent\n+        tmp_mount (bool):       if ``True`` mount to a temporary destination\n+        parent (QWidget):       parent widget for QDialogs or ``None`` if there\n+                                is no parent\n         read_only (bool):       mount source read-only\n     \"\"\"\n     def __init__(self,\n@@ -93,16 +94,16 @@ class Mount(object):\n \n     def mount(self, mode = None, check = True, plugins = True, **kwargs):\n         \"\"\"\n-        High-level `mount`. Check if the selected `mode` need to be mounted,\n+        High-level `mount`. Check if the selected ``mode`` need to be mounted,\n         select the low-level backend and mount it.\n \n         Args:\n             mode (str):     mode to use. One of 'local', 'ssh', 'local_encfs' or\n                             'ssh_encfs'\n-            check (bool):   if True run\n+            check (bool):   if ``True`` run\n                             :py:func:`MountControl.pre_mount_check` before\n                             mounting\n-            plugins (bool): if True run\n+            plugins (bool): if ``True`` run\n                             :py:func:`pluginmanager.PluginManager.do_mount`\n                             before mount\n             **kwargs:       keyword arguments paste to low-level\n@@ -149,13 +150,13 @@ class Mount(object):\n     def umount(self, hash_id = None, plugins = True):\n         \"\"\"\n         High-level `unmount`. Unmount the low-level backend. This will read\n-        unmount infos written next to the mountpoint identified by `hash_id`\n+        unmount infos written next to the mountpoint identified by ``hash_id``\n         and unmount it.\n \n         Args:\n             hash_id (bool): Hash ID used as mountpoint before that should get\n                             unmounted\n-            plugins (bool): if True run\n+            plugins (bool): if ``True`` run\n                             :py:func:`pluginmanager.PluginManager.do_unmount`\n                             before unmount\n \n@@ -193,7 +194,7 @@ class Mount(object):\n         High-level check. Run :py:func:`MountControl.pre_mount_check` to check\n         if all conditions for :py:func:`Mount.mount` are set.\n \n-        Should be called with `first_run = True` to check if new settings are\n+        Should be called with ``first_run = True`` to check if new settings are\n         correct before saving them.\n \n         Args:\n@@ -206,7 +207,7 @@ class Mount(object):\n                                 :py:class:`MountControl` subclass backend\n \n         Returns:\n-            bool:               True if all checks where okay\n+            bool:               ``True`` if all checks where okay\n \n         Raises:\n             exceptions.MountException:\n@@ -231,9 +232,9 @@ class Mount(object):\n \n     def remount(self, new_profile_id, mode = None, hash_id = None, **kwargs):\n         \"\"\"\n-        High-level `remount`. Unmount the old profile presented by `hash_id` and\n-        mount new profile `new_profile_id` with mode `mode`. If old and new\n-        mounts are the same just add new symlinks and keep the mount.\n+        High-level `remount`. Unmount the old profile presented by ``hash_id``\n+        and mount new profile ``new_profile_id`` with mode ``mode``. If old and\n+        new mounts are the same just add new symlinks and keep the mount.\n \n         Args map to profiles::\n \n@@ -301,8 +302,8 @@ class MountControl(object):\n     \"\"\"\n     This is the low-level mount API. This should be subclassed by backends.\n \n-    Subclasses should have it's own __init__ but must also call the\n-    inherited __init__.\n+    Subclasses should have it's own ``__init__`` but **must** also call the\n+    inherited ``__init__``.\n \n     You **must** overwrite methods:\\n\n         :py:func:`MountControl._mount`\n@@ -324,15 +325,15 @@ class MountControl(object):\n         cfg (config.Config):    current config\n         profile_id (str):       profile ID that should be used\n         hash_id (str):          ???\n-        tmp_mount (bool):       if True mount to a temporary destination\n+        tmp_mount (bool):       if ``True`` mount to a temporary destination\n         parent (QWidget):       parent widget for QDialogs or ``None`` if there\n                                 is no parent\n-        symlink (bool):         if True set symlink to mountpoint\n+        symlink (bool):         if ``True`` set symlink to mountpoint\n         mode (str):             one of ``local``, ``local_encfs``, ``ssh`` or\n                                 ``ssh_encfs``\n         hash_collision (int):   global value used to prevent hash collisions on\n                                 mountpoints\n-        read_only (bool):       if True mount source read-only\n+        read_only (bool):       if ``True`` mount source read-only\n     \"\"\"\n \n     CHECK_FUSE_GROUP = False\n@@ -372,7 +373,7 @@ class MountControl(object):\n     def set_default_args(self):\n         \"\"\"\n         Set some arguments which are necessary for all backends.\n-        `self.all_kwargs` need to be filled through `self.setattr_kwargs()`\n+        ``self.all_kwargs`` need to be filled through :py:func:`setattr_kwargs`\n         before calling this.\n         \"\"\"\n         #self.destination should contain all arguments that are nessesary for\n@@ -407,7 +408,7 @@ class MountControl(object):\n         mount lock and symlink and release mountprocess lock.\n \n         Args:\n-            check (bool):   if True run :py:func:`pre_mount_check` before\n+            check (bool):   if ``True`` run :py:func:`pre_mount_check` before\n                             mounting\n \n         Returns:\n@@ -486,7 +487,7 @@ class MountControl(object):\n \n     def _mount(self):\n         \"\"\"\n-        Backend mount method. This need to get overwritten in the backend which\n+        Backend mount method. This **must** be overwritten in the backend which\n         subclasses :py:class:`MountControl`.\n         \"\"\"\n         raise NotImplementedError('_mount need to be overwritten in backend')\n@@ -509,11 +510,11 @@ class MountControl(object):\n     def pre_mount_check(self, first_run = False):\n         \"\"\"\n         Check what ever conditions must be given for the mount to be done\n-        successful. This can be overwritten in backends which\n+        successful. This **can** be overwritten in backends which\n         subclasses :py:class:`MountControl`.\n \n         Returns:\n-            bool:       True if all checks where okay\n+            bool:       ``True`` if all checks where okay\n \n         Raises:\n             exceptions.MountException:\n@@ -527,11 +528,11 @@ class MountControl(object):\n \n     def post_mount_check(self):\n         \"\"\"\n-        Check if the mount was successful. This can be overwritten in backends\n-        which subclasses :py:class:`MountControl`.\n+        Check if the mount was successful. This **can** be overwritten in\n+        backends which subclasses :py:class:`MountControl`.\n \n         Returns:\n-            bool:       True if all checks where okay\n+            bool:       ``True`` if all checks where okay\n \n         Raises:\n             exceptions.MountException:\n@@ -544,11 +545,11 @@ class MountControl(object):\n \n     def pre_umount_check(self):\n         \"\"\"\n-        Check if backend is safe to umount. This can be overwritten in backends\n-        which subclasses :py:class:`MountControl`.\n+        Check if backend is safe to umount. This **can** be overwritten in\n+        backends which subclasses :py:class:`MountControl`.\n \n         Returns:\n-            bool:       True if all checks where okay\n+            bool:       ``True`` if all checks where okay\n \n         Raises:\n             exceptions.MountException:\n@@ -562,11 +563,11 @@ class MountControl(object):\n \n     def post_umount_check(self):\n         \"\"\"\n-        Check if unmount was successful. This can be overwritten in backends\n+        Check if unmount was successful. This **can** be overwritten in backends\n         which subclasses :py:class:`MountControl`.\n \n         Returns:\n-            bool:       True if all checks where okay\n+            bool:       ``True`` if all checks where okay\n \n         Raises:\n             exceptions.MountException:\n@@ -613,7 +614,7 @@ class MountControl(object):\n         Check if the mountpoint is already mounted.\n \n         Returns:\n-            bool:   True if mountpoint is mounted\n+            bool:   ``True`` if mountpoint is mounted\n \n         Raises:\n             exceptions.MountException:\n@@ -636,20 +637,20 @@ class MountControl(object):\n             |                              different processes modifying\n             |                              mountpoints at one time\n             |\n-            |\\ <hash_id>/              <=  `self.hash_id_path`\n+            |\\ <hash_id>/              <=  ``self.hash_id_path``\n             |            \\                 will be shared by all profiles with\n             |            |                 the same mount settings\n             |            |\n-            |            |\\ mountpoint/<=  `self.mountpoint`\n+            |            |\\ mountpoint/<=  ``self.mountpoint``\n             |            |                 real mountpoint\n             |            |\n-            |            |\\ umount     <=  `self.umount_info`\n+            |            |\\ umount     <=  ``self.umount_info``\n             |            |                 json file with all nessesary args\n             |            |                 for unmount\n             |            |\n-            |            \\  locks/     <=  `self.lock_path`\n+            |            \\  locks/     <=  ``self.lock_path``\n             |                              for each process you have a\n-            |                              `<pid>.lock` file\n+            |                              ``<pid>.lock`` file\n             |\n             |\\ <profile id>_<pid>/     <=  sym-link to the right path. return by\n             |                              config.get_snapshots_path\n@@ -672,7 +673,7 @@ class MountControl(object):\n         mounts at the same time.\n \n         Args:\n-            timeout (int):  wait `timeout` seconds before fail acquiring\n+            timeout (int):  wait ``timeout`` seconds before fail acquiring\n                             the lock\n \n         Raises:\n@@ -726,7 +727,7 @@ class MountControl(object):\n         Check for locks on the current mountpoint.\n \n         Returns:\n-            bool:   True if there are any locks\n+            bool:   ``True`` if there are any locks\n         \"\"\"\n         lock_suffix = '.lock'\n         return self.check_locks(self.lock_path, lock_suffix)\n@@ -747,7 +748,7 @@ class MountControl(object):\n \n     def check_locks(self, path, lock_suffix):\n         \"\"\"\n-        Check if there are active locks ending with `lock_suffix` in `path`.\n+        Check if there are active locks ending with ``lock_suffix`` in ``path``.\n         If the process owning the lock doesn't exist anymore this will remove\n         the lock.\n \n@@ -756,7 +757,7 @@ class MountControl(object):\n             lock_suffix (str):  last part of locks name\n \n         Returns:\n-            bool:               True if there are active locks in `path`\n+            bool:               ``True`` if there are active locks in ``path``\n         \"\"\"\n         for f in os.listdir(path):\n             if not f[-len(lock_suffix):] == lock_suffix:\n@@ -783,14 +784,14 @@ class MountControl(object):\n \n     def setattr_kwargs(self, arg, default, store = True, **kwargs):\n         \"\"\"\n-        Set attribute `arg` in local namespace (self.arg). Also collect all args\n-        in `self.all_kwargs` which will be hashed later and used as mountpoint\n-        name and also be written as unmount_info.\n+        Set attribute ``arg`` in local namespace (self.arg). Also collect all\n+        args in ``self.all_kwargs`` which will be hashed later and used as\n+        mountpoint name and also be written as unmount_info.\n \n         Args:\n             arg (str):      argument name\n-            default:        default value used if `arg` is not in `kwargs`\n-            store (bool):   if True add `arg` to `self.all_kwargs`\n+            default:        default value used if ``arg`` is not in ``kwargs``\n+            store (bool):   if ``True`` add ``arg`` to ``self.all_kwargs``\n             **kwargs:       arguments given on backend constructor\n         \"\"\"\n         if arg in kwargs:\n@@ -804,8 +805,8 @@ class MountControl(object):\n \n     def write_umount_info(self):\n         \"\"\"\n-        Write content of `self.all_kwargs` to file\n-        `~/.local/share/backintime/mnt/<hash_id>/umount`.\n+        Write content of ``self.all_kwargs`` to file\n+        ``~/.local/share/backintime/mnt/<hash_id>/umount``.\n         This will be used to unmount the filesystem later.\n         \"\"\"\n         data_string = json.dumps(self.all_kwargs)\n@@ -815,14 +816,14 @@ class MountControl(object):\n \n     def read_umount_info(self, umount_info = None):\n         \"\"\"\n-        Read keyword arguments from file `umount_info`.\n+        Read keyword arguments from file ``umount_info``.\n \n         Args:\n-            umount_info (str):  full path to <hash_id>/umount file. If `None`\n-                                current `<hash_id>/umount` file will be used\n+            umount_info (str):  full path to <hash_id>/umount file. If ``None``\n+                                current ``<hash_id>/umount`` file will be used\n \n         Returns:\n-            dict:               previously written `self.all_kwargs`\n+            dict:               previously written ``self.all_kwargs``\n         \"\"\"\n         if umount_info is None:\n             umount_info = self.umount_info\n@@ -833,7 +834,7 @@ class MountControl(object):\n \n     def compare_umount_info(self, umount_info = None):\n         \"\"\"\n-        Compare current `self.all_kwargs` with those from file `umount_info`.\n+        Compare current ``self.all_kwargs`` with those from file ``umount_info``.\n \n         This should prevent hash collisions of two different mounts.\n \n@@ -841,8 +842,8 @@ class MountControl(object):\n             umount_info (str):  full path to <hash_id>/umount file\n \n         Returns:\n-            bool:               True if `self.all_kwargs` and `kwargs` read from\n-                                `umount_info` file are identiacal\n+            bool:               ``True`` if ``self.all_kwargs`` and ``kwargs``\n+                                read from ``umount_info`` file are identiacal\n         \"\"\"\n         #run self.all_kwargs through json first\n         current_kwargs = json.loads(json.dumps(self.all_kwargs))\n@@ -858,7 +859,7 @@ class MountControl(object):\n \n     def compare_remount(self, old_hash_id):\n         \"\"\"\n-        Compare mount arguments between current and `old_hash_id`. If they are\n+        Compare mount arguments between current and ``old_hash_id``. If they are\n         identical we could reuse the mount and don't need to remount.\n \n         Args:\n@@ -874,16 +875,16 @@ class MountControl(object):\n \n     def set_symlink(self, profile_id = None, hash_id = None, tmp_mount = None):\n         \"\"\"\n-        If `self.symlink` is True set symlink\n-        `~/.local/share/backintime/mnt/<profile id>_<pid>`. Target will be\n+        If ``self.symlink`` is ``True`` set symlink\n+        ``~/.local/share/backintime/mnt/<profile id>_<pid>``. Target will be\n         either the mountpoint or a subfolder of the mountpoint if\n-        `self.symlink_subfolder` is set.\n+        ``self.symlink_subfolder`` is set.\n \n         Args:\n-            profile_id (str):   Profile ID that should be linked. If `None` use\n-                                `self.profile_id`\n+            profile_id (str):   Profile ID that should be linked. If ``None``\n+                                use ``self.profile_id``\n             hash_id (str):      Hash ID of mountpoint where this sysmlink should\n-                                point to. If `None` use `self.hash_id`\n+                                point to. If ``None`` use ``self.hash_id``\n             tmp_mount (bool):   Set a temporary symlink just for testing new\n                                 settings\n         \"\"\"\n@@ -909,7 +910,7 @@ class MountControl(object):\n \n     def remove_symlink(self, profile_id = None, tmp_mount = None):\n         \"\"\"\n-        Remove symlink `~/.local/share/backintime/mnt/<profile id>_<pid>`\n+        Remove symlink ``~/.local/share/backintime/mnt/<profile id>_<pid>``\n \n         Args:\n             profile_id (str):   Profile ID for the symlink\n@@ -928,26 +929,26 @@ class MountControl(object):\n \n     def hash(self, s):\n         \"\"\"\n-        Create a CRC32 hash of string `s`.\n+        Create a CRC32 hash of string ``s``.\n \n         Args:\n             s (str):    string that should be hashed\n \n         Returns:\n-            str:        hash of string `s`\n+            str:        hash of string ``s``\n         \"\"\"\n         return('%X' % (crc32(s.encode()) & 0xFFFFFFFF))\n \n     def get_hash_id_path(self, hash_id = None):\n         \"\"\"\n-        Get path `~/.local/share/backintime/mnt/<hash_id>`.\n+        Get path ``~/.local/share/backintime/mnt/<hash_id>``.\n \n         Args:\n-            hash_id (str):  Unique identifier for a mountpoint. If `None` use\n-                            `self.hash_id`\n+            hash_id (str):  Unique identifier for a mountpoint. If ``None`` use\n+                            ``self.hash_id``\n \n         Returns:\n-            str:            full path to `<hash_id>`\n+            str:            full path to ``<hash_id>``\n         \"\"\"\n         if hash_id is None:\n             hash_id = self.hash_id\n@@ -955,36 +956,36 @@ class MountControl(object):\n \n     def get_mountpoint(self, hash_id = None):\n         \"\"\"\n-        Get path `~/.local/share/backintime/mnt/<hash_id>/mountpoint`.\n+        Get path ``~/.local/share/backintime/mnt/<hash_id>/mountpoint``.\n \n         Args:\n             hash_id (str):  Unique identifier for a mountpoint\n \n         Returns:\n-            str:            full path to `<hash_id>/mountpoint``\n+            str:            full path to ``<hash_id>/mountpoint``\n         \"\"\"\n         return os.path.join(self.get_hash_id_path(hash_id), 'mountpoint')\n \n     def get_lock_path(self, hash_id = None):\n         \"\"\"\n-        Get path `~/.local/share/backintime/mnt/<hash_id>/locks`.\n+        Get path ``~/.local/share/backintime/mnt/<hash_id>/locks``.\n \n         Args:\n             hash_id (str):  Unique identifier for a mountpoint\n \n         Returns:\n-            str:            full path to `<hash_id>/locks``\n+            str:            full path to ``<hash_id>/locks```\n         \"\"\"\n         return os.path.join(self.get_hash_id_path(hash_id), 'locks')\n \n     def get_umount_info(self, hash_id = None):\n         \"\"\"\n-        Get path `~/.local/share/backintime/mnt/<hash_id>/umount`.\n+        Get path ``~/.local/share/backintime/mnt/<hash_id>/umount``.\n \n         Args:\n             hash_id (str):  Unique identifier for a mountpoint\n \n         Returns:\n-            str:            full path to `<hash_id>/umount``\n+            str:            full path to ``<hash_id>/umount```\n         \"\"\"\n         return os.path.join(self.get_hash_id_path(hash_id), 'umount')\n", "diff --git a/common/snapshots.py b/common/snapshots.py\nindex f1b345ad..e9c06df1 100644\n--- a/common/snapshots.py\n+++ b/common/snapshots.py\n@@ -247,7 +247,7 @@ class Snapshots:\n \n     def get_uid(self, name, callback = None, backup = None):\n         \"\"\"\n-        Get the User identifier (UID) for the user in `name`.\n+        Get the User identifier (UID) for the user in ``name``.\n         name->uid will be cached to speed up subsequent requests.\n \n         Args:\n@@ -288,7 +288,7 @@ class Snapshots:\n \n     def get_gid(self, name, callback = None, backup = None):\n         \"\"\"\n-        Get the Group identifier (GID) for the group in `name`.\n+        Get the Group identifier (GID) for the group in ``name``.\n         name->gid will be cached to speed up subsequent requests.\n \n         Args:\n@@ -384,8 +384,8 @@ class Snapshots:\n \n         Args:\n             callback (method):  callable instance which will handle the message\n-            ok (bool):          True if the logged action was successful\n-                                or False if it failed\n+            ok (bool):          ``True`` if the logged action was successful\n+                                or ``False`` if it failed\n             msg (str):          message that should be send to callback\n         \"\"\"\n         if not callback is None:\n@@ -471,9 +471,9 @@ class Snapshots:\n                 backup = False,\n                 no_backup = False):\n         \"\"\"\n-        Restore one or more files from snapshot `sid` to either original\n+        Restore one or more files from snapshot ``sid`` to either original\n         or a different destination. Restore is done with rsync. If available\n-        permissions will be restored from `fileinfo.bz2`.\n+        permissions will be restored from ``fileinfo.bz2``.\n \n         Args:\n             sid (SID):                  snapshot from whom to restore\n@@ -492,10 +492,10 @@ class Snapshots:\n             backup (bool):              create backup files (\\*.backup.YYYYMMDD)\n                                         before changing or deleting local files.\n                                         This will override\n-                                        `config.is_backup_on_restore_enabled()`\n+                                        :py:func:`config.Config.is_backup_on_restore_enabled`\n             no_backup(bool):            do not backup files before changing or\n                                         deleting local files. This will override\n-                                        `config.is_backup_on_restore_enabled()`\n+                                        :py:func:`config.Config.is_backup_on_restore_enabled`\n         \"\"\"\n         instance = applicationinstance.ApplicationInstance( self.config.get_restore_instance_file(), False, flock = True)\n         if instance.check():\n@@ -644,21 +644,21 @@ class Snapshots:\n \n     def remove_snapshot( self, sid, execute = True, quote = '\\\"'):\n         \"\"\"\n-        Fix permissions than remove snapshot `sid` or just return necessary\n-        commands to remove if `execute` is False.\n+        Fix permissions than remove snapshot ``sid`` or just return necessary\n+        commands to remove if ``execute`` is ``False``.\n \n         Args:\n             sid (SID):              snapshot to remove\n-            execute (bool):         if True remove immediately else just return\n-                                    the commands to remove the snapshot\n+            execute (bool):         if ``True`` remove immediately else just\n+                                    return the commands to remove the snapshot\n             quote (str):            use this string to quote names. Depending on\n                                     the way the command is called it need\n                                     different quotes\n \n         Returns:\n             tuple:                  two commands (str) for fixing permissions\n-                                    and removing snapshot. Only if `execute` is\n-                                    False\n+                                    and removing snapshot. Only if ``execute``\n+                                    is ``False``\n         \"\"\"\n         if len( sid.sid ) <= 1:\n             return\n@@ -685,7 +685,7 @@ class Snapshots:\n                             not scheduled or the machine is running on battery\n \n         Returns:\n-            bool:           True if successful created a new snapshot\n+            bool:           ``True`` if successful created a new snapshot\n         \"\"\"\n         ret_val, ret_error = False, True\n         sleep = True\n@@ -837,8 +837,8 @@ class Snapshots:\n             line (str): stdout line from rsync\n \n         Returns:\n-            str:        `line` if it had no progress infos. None if `line` was a\n-                        progress\n+            str:        ``line`` if it had no progress infos. ``None`` if\n+                        ``line`` was a progress\n         \"\"\"\n         m = self.reRsyncProgress.match(line)\n         if m:\n@@ -865,9 +865,9 @@ class Snapshots:\n             line (str):     stdout line from rsync\n             params (list):  list of two bool '[error, changes]'. Using siteefect\n                             on changing list items will change original\n-                            list, too. If rsync reported an error `params[0]`\n-                            will be set to True. If rsync reported a changed\n-                            file `params[1]` will be set to True\n+                            list, too. If rsync reported an error ``params[0]``\n+                            will be set to ``True``. If rsync reported a changed\n+                            file ``params[1]`` will be set to ``True``\n         \"\"\"\n         if not line:\n             return\n@@ -898,7 +898,7 @@ class Snapshots:\n             params (list):  list of two bool '[error, changes]'. Using siteefect\n                             on changing list items will change original\n                             list, too. If rsync reported a changed file\n-                            `params[1]` will be set to True\n+                            ``params[1]`` will be set to ``True``\n         \"\"\"\n         if len(line) >= 13:\n             if line.startswith( 'BACKINTIME: ' ):\n@@ -908,7 +908,7 @@ class Snapshots:\n \n     def make_dirs(self, path):\n         \"\"\"\n-        Wrapper for :py:func:`tools.make_dirs()`. Create directories `path`\n+        Wrapper for :py:func:`tools.make_dirs()`. Create directories ``path``\n         recursive and return success. If not successful send error-message to\n         log.\n \n@@ -916,7 +916,7 @@ class Snapshots:\n             path (str): fullpath to directories that should be created\n \n         Returns:\n-            bool:       True if successful\n+            bool:       ``True`` if successful\n         \"\"\"\n         if not tools.make_dirs(path):\n             logger.error(\"Can't create folder: %s\" % path, self)\n@@ -927,7 +927,8 @@ class Snapshots:\n \n     def _save_path_info(self, fileinfo, path):\n         \"\"\"\n-        Collect permission infos about `path` and store them into `fileinfo`.\n+        Collect permission infos about ``path`` and store them into\n+        ``fileinfo``.\n \n         Args:\n             fileinfo (FileInfoDict):\n@@ -947,7 +948,7 @@ class Snapshots:\n     def _take_snapshot(self, sid, now, include_folders):\n         \"\"\"\n         This is the main backup routine. It will take a new snapshot and store\n-        permissions of included files and folders into `fileinfo.bz2`.\n+        permissions of included files and folders into ``fileinfo.bz2``.\n \n         Args:\n             sid (SID):                  snapshot ID which the new snapshot\n@@ -955,16 +956,17 @@ class Snapshots:\n             now (datetime.datetime):    date and time when this snapshot was\n                                         started\n             include_folders (list):     folders to include. list of\n-                                        tuples (item, int) where `int` is 0\n-                                        if `item` is a folder or 1 if `item`\n+                                        tuples (item, int) where ``int`` is 0\n+                                        if ``item`` is a folder or 1 if ``item``\n                                         is a file\n \n         Returns:\n-            list:                       list of two bool (`ret_val`, `ret_error`)\n-                                        where `ret_val` is True if a new\n+            list:                       list of two bool\n+                                        (``ret_val``, ``ret_error``)\n+                                        where ``ret_val`` is ``True`` if a new\n                                         snapshot has been created and\n-                                        `ret_error` is True if there was an\n-                                        error during taking the snapshot\n+                                        ``ret_error`` is ``True`` if there was\n+                                        an error during taking the snapshot\n         \"\"\"\n         self.set_take_snapshot_message( 0, _('...') )\n \n@@ -1242,7 +1244,8 @@ class Snapshots:\n                                 min_date,\n                                 max_date):\n         \"\"\"\n-        Add all snapshots between `min_date` and `max_date` to `keep_snapshots`.\n+        Add all snapshots between ``min_date`` and ``max_date`` to\n+        ``keep_snapshots``.\n \n         Args:\n             snapshots (list):           full list of :py:class:`SID` objects\n@@ -1274,8 +1277,8 @@ class Snapshots:\n                                   min_date,\n                                   max_date):\n         \"\"\"\n-        Add only the first snapshot between `min_date` and `max_date` to\n-        `keep_snapshots`.\n+        Add only the first snapshot between ``min_date`` and ``max_date`` to\n+        ``keep_snapshots``.\n \n         Args:\n             snapshots (list):           full list of :py:class:`SID` objects\n@@ -1304,8 +1307,8 @@ class Snapshots:\n \n     def inc_month(self, date):\n         \"\"\"\n-        First day of next month of `date` with respect on new years. So if\n-        `date` is December this will return 1st of January next year.\n+        First day of next month of ``date`` with respect on new years. So if\n+        ``date`` is December this will return 1st of January next year.\n \n         Args:\n             date (datetime.date):   old date that should be increased\n@@ -1322,8 +1325,9 @@ class Snapshots:\n \n     def dec_month(self, date):\n         \"\"\"\n-        First day of previous month of `date` with respect on previous years.\n-        So if `date` is January this will return 1st of December previous year.\n+        First day of previous month of ``date`` with respect on previous years.\n+        So if ``date`` is January this will return 1st of December previous\n+        year.\n \n         Args:\n             date (datetime.date):   old date that should be decreased\n@@ -1351,13 +1355,13 @@ class Snapshots:\n             now_full (datetime.datetime):   date and time when take_snapshot was\n                                             started\n             keep_all (int):                 keep all snapshots for the\n-                                            last `keep_all` days\n+                                            last ``keep_all`` days\n             keep_one_per_day (int):         keep one snapshot per day for the\n-                                            last `keep_one_per_day` days\n+                                            last ``keep_one_per_day`` days\n             keep_one_per_week (int):        keep one snapshot per week for the\n-                                            last `keep_one_per_week` weeks\n+                                            last ``keep_one_per_week`` weeks\n             keep_one_per_month (int):       keep one snapshot per month for the\n-                                            last `keep_one_per_month` months\n+                                            last ``keep_one_per_month`` months\n         \"\"\"\n         snapshots = listSnapshots(self.config)\n         logger.debug(\"Considered: %s\" %snapshots, self)\n@@ -1603,7 +1607,7 @@ class Snapshots:\n \n     def _stat_free_space_local(self, path):\n         \"\"\"\n-        Get free space on filsystem containing `path` in MiB using\n+        Get free space on filsystem containing ``path`` in MiB using\n         :py:func:`os.statvfs()`. Depending on remote SFTP server this might fail\n         on sshfs mounted shares.\n \n@@ -1623,8 +1627,8 @@ class Snapshots:\n \n     def _stat_free_space_ssh(self):\n         \"\"\"\n-        Get free space on remote filsystem in MiB. This will call `df` on remote\n-        host and parse its output.\n+        Get free space on remote filsystem in MiB. This will call ``df`` on\n+        remote host and parse its output.\n         \"\"\"\n         if self.config.get_snapshots_mode() not in ('ssh', 'ssh_encfs'):\n             return None\n@@ -1647,20 +1651,20 @@ class Snapshots:\n \n     def _execute( self, cmd, callback = None, user_data = None, filters = () ):\n         \"\"\"\n-        Execute command `cmd` and return its returncode. Returncode is\n-        multiplied by 256. Commands stdout can be send to handler `callback`.\n+        Execute command ``cmd`` and return its returncode. Returncode is\n+        multiplied by 256. Commands stdout can be send to handler ``callback``.\n \n         Args:\n             cmd (str):          command that should be executed\n             callback (method):  function that will be called with every new line\n                                 on stdout. Need to handle two arguments.\n-            user_data (str):    additional arg send to `callback`\n+            user_data (str):    additional arg send to ``callback``\n             filters (tuple):    tuple of methods that get called for each stdout\n                                 line from command before the line is past to\n-                                `callback`\n+                                ``callback``\n \n         Returns:\n-            int:                returncode of command `cmd` multiplied by 256\n+            int:                returncode of command ``cmd`` multiplied by 256\n         \"\"\"\n         logger.debug(\"Call command \\\"%s\\\"\" %cmd, self, 1)\n         ret_val = 0\n@@ -1704,18 +1708,18 @@ class Snapshots:\n                    flag_deep_check = False,\n                    list_equal_to = ''):\n         \"\"\"\n-        Filter snapshots from `snapshots_list` based on whether `base_path`\n+        Filter snapshots from ``snapshots_list`` based on whether ``base_path``\n         file is included and optional if the snapshot is unique or equal to\n-        `list_equal_to`.\n+        ``list_equal_to``.\n \n         Args:\n             base_sid (SID):         snapshot ID that contained the original\n-                                    file `base_path`\n+                                    file ``base_path``\n             base_path (str):        path to file on root filesystem.\n             snapshots_list (list):  List of :py:class:`SID` objects that should\n                                     be filtered\n-            list_diff_only (bool):  if True only return unique snapshots. Which\n-                                    means if a file is exactly the same in\n+            list_diff_only (bool):  if ``True`` only return unique snapshots.\n+                                    Which means if a file is exactly the same in\n                                     different snapshots only the first snapshot\n                                     will be listed\n             flag_deep_check (bool): use md5sum to check uniqueness of files.\n@@ -1783,19 +1787,19 @@ class Snapshots:\n \n     def cmd_ssh(self, cmd, quote = False, use_modes = ['ssh', 'ssh_encfs'] ):\n         \"\"\"\n-        Add ssh, nice and ionice command to `cmd` to run that command on\n+        Add ssh, nice and ionice command to ``cmd`` to run that command on\n         remote host.\n \n         Args:\n             cmd (str):          command\n-            quote (bool):       wrap single tick (') quotemarks around `cmd`\n+            quote (bool):       wrap single tick (') quotemarks around ``cmd``\n             use_modes (list):   list of modes in which the result should\n-                                change to `ssh USER@HOST cmd` instead of\n-                                just `cmd`\n+                                change to ``ssh USER@HOST cmd`` instead of\n+                                just ``cmd``\n \n         Returns:\n             str:                command with or without ssh prefix based on\n-                                `use_modes` and current mode\n+                                ``use_modes`` and current mode\n         \"\"\"\n         mode = self.config.get_snapshots_mode()\n         if mode in ['ssh', 'ssh_encfs'] and mode in use_modes:\n@@ -1858,14 +1862,15 @@ class Snapshots:\n         Args:\n             path (str):         destination path\n             use_modes (list):   list of modes in which the result should\n-                                change to `user@host:path` instead of\n-                                just `path`\n+                                change to ``user@host:path`` instead of\n+                                just ``path``\n \n         Returns:\n-            str:                quoted `path` like '\"/foo\"'\n+            str:                quoted ``path`` like '\"/foo\"'\n                                 or if the current mode is using ssh and\n-                                current mode is in `use_modes` a combination\n-                                of user, host and `path` like ''user@host:\"/foo\"''\n+                                current mode is in ``use_modes`` a combination\n+                                of user, host and ``path``\n+                                like ''user@host:\"/foo\"''\n         \"\"\"\n         mode = self.config.get_snapshots_mode()\n         if mode in ['ssh', 'ssh_encfs'] and mode in use_modes:\n@@ -1877,10 +1882,10 @@ class Snapshots:\n \n     def delete_path(self, sid, path):\n         \"\"\"\n-        Delete `path` and all files and folder inside in snapshot `sid`.\n+        Delete ``path`` and all files and folder inside in snapshot ``sid``.\n \n         Args:\n-            sid (SID):  snapshot ID in which `path` should be deleted\n+            sid (SID):  snapshot ID in which ``path`` should be deleted\n             path (str): path to delete\n         \"\"\"\n         def handle_error(fn, path, excinfo):\n@@ -1914,13 +1919,13 @@ class Snapshots:\n \n     def create_last_snapshot_symlink(self, sid):\n         \"\"\"\n-        Create symlink 'last_snapshot' to snapshot `sid`\n+        Create symlink 'last_snapshot' to snapshot ``sid``\n \n         Args:\n             sid (SID):  snapshot that should be linked.\n \n         Returns:\n-            bool:       True if successful\n+            bool:       ``True`` if successful\n         \"\"\"\n         if sid is None:\n             return\n@@ -1940,7 +1945,7 @@ class Snapshots:\n \n     def flockExclusive(self):\n         \"\"\"\n-        Block :py:func:`take_snapshots` from other profiles or users\n+        Block :py:func:`take_snapshot` from other profiles or users\n         and run them serialized\n         \"\"\"\n         if self.config.use_global_flock():\n@@ -1971,8 +1976,8 @@ class Snapshots:\n \n         Args:\n             includeFolders (list):  folders to include. list of tuples (item, int)\n-                                    Where `int` is 0 if `item` is a folder or\n-                                    1 if `item` is a file\n+                                    Where ``int`` is ``0`` if ``item`` is a\n+                                    folder or ``1`` if ``item`` is a file\n             excludeFolders (list):  list of folders to exclude\n \n         Returns:\n@@ -2024,9 +2029,10 @@ class Snapshots:\n         First string need to come before exclude, second after exclude.\n \n         Args:\n-            includeFolders (list):  folders to include. list of tuples (item, int)\n-                                    Where `int` is 0 if `item` is a folder or\n-                                    1 if `item` is a file\n+            includeFolders (list):  folders to include. list of\n+                                    tuples (item, int) where ``int`` is ``0``\n+                                    if ``item`` is a folder or ``1`` if ``item``\n+                                    is a file\n \n         Returns:\n             tuple:                  two item tuple of\n@@ -2064,7 +2070,8 @@ class Snapshots:\n \n class FileInfoDict(dict):\n     \"\"\"\n-    A `dict` that maps a path (as `bytes`) to (`int`, `bytes`, `bytes`).\n+    A :py:class:`dict` that maps a path (as :py:class:`bytes`) to a\n+    tuple (:py:class:`int`, :py:class:`bytes`, :py:class:`bytes`).\n     \"\"\"\n     def __setitem__(self, key, value):\n         assert isinstance(key, bytes), \"key '{}' is not bytes instance\".format(key)\n@@ -2086,11 +2093,12 @@ class SID(object):\n         cfg (config.Config):    current config\n \n     Raises:\n-        ValueError:             if `date` is `str` instance and doesn't match\n-                                the snapshot ID format\n+        ValueError:             if ``date`` is :py:class:`str` instance and\n+                                doesn't match the snapshot ID format\n                                 (20151218-173512-123 or 20151218-173512)\n-        TypeError:              if `date` is not `str`, `datetime.date` or\n-                                `datetime.datetime` type\n+        TypeError:              if ``date`` is not :py:class:`str`,\n+                                :py:class:`datetime.date` or\n+                                :py:class:`datetime.datetime` type\n     \"\"\"\n     __cValidSID = re.compile(r'^\\d{8}-\\d{6}(?:-\\d{3})?$')\n \n@@ -2132,7 +2140,7 @@ class SID(object):\n                         an other :py:class:`SID` or str instance\n \n         Returns:\n-            bool:       True if other is equal\n+            bool:       ``True`` if other is equal\n         \"\"\"\n         if isinstance(other, SID):\n             return self.sid == other.sid and self.profileID == other.profileID\n@@ -2153,7 +2161,7 @@ class SID(object):\n                         an other :py:class:`SID` or str instance\n \n         Returns:\n-            bool:       True if other is lower\n+            bool:       ``True`` if other is lower\n         \"\"\"\n         if isinstance(other, SID):\n             return self.sid < other.sid\n@@ -2301,7 +2309,7 @@ class SID(object):\n                             of the path\n \n         Returns:\n-            bool:           True if successful\n+            bool:           ``True`` if successful\n         \"\"\"\n         if not os.path.isdir(self.config.get_snapshots_full_path(self.profileID)):\n             logger.error('Snapshots path {} doesn\\'t exist. Unable to make dirs for snapshot ID {}'.format(\n@@ -2313,22 +2321,22 @@ class SID(object):\n \n     def exists(self):\n         \"\"\"\n-        True if the snapshot folder and the \"backup\" folder inside exist\n+        ``True`` if the snapshot folder and the \"backup\" folder inside exist\n \n         Returns:\n-            bool:   True if exists\n+            bool:   ``True`` if exists\n         \"\"\"\n         return os.path.isdir(self.path()) and os.path.isdir(self.pathBackup())\n \n     def canOpenPath(self, path):\n         \"\"\"\n-        True if path is a file inside this snapshot\n+        ``True`` if path is a file inside this snapshot\n \n         Args:\n             path (str): path from local filesystem (no snapshot path)\n \n         Returns:\n-            bool:       True if file exists\n+            bool:       ``True`` if file exists\n         \"\"\"\n         fullPath = self.pathBackup(path)\n         if not os.path.exists(fullPath):\n@@ -2409,7 +2417,7 @@ class SID(object):\n             enable (bool): set or remove flag\n \n         Returns:\n-            bool:           True if flag is set\n+            bool:           ``True`` if flag is set\n         \"\"\"\n         failedFile = self.path(self.FAILED)\n         return os.path.isfile(failedFile)\n@@ -2543,7 +2551,7 @@ class SID(object):\n         Make the snapshot path writeable so we can change files inside\n \n         Returns:\n-            bool:   True if successful\n+            bool:   ``True`` if successful\n         \"\"\"\n         path = self.path()\n         rw = os.stat(path).st_mode | stat.S_IWUSR\n@@ -2613,7 +2621,7 @@ class NewSnapshot(GenericNonSnapshot):\n             enable (bool): set or remove flag\n \n         Returns:\n-            bool:           True if flag is set\n+            bool:           ``True`` if flag is set\n         \"\"\"\n         return os.path.exists(self.path(self.SAVETOCONTINUE))\n \n", "diff --git a/common/tools.py b/common/tools.py\nindex 574f4082..95ce0e59 100644\n--- a/common/tools.py\n+++ b/common/tools.py\n@@ -94,8 +94,8 @@ def get_backintime_path(*path):\n \n def register_backintime_path(*path):\n     \"\"\"\n-    Add BackInTime path `path` to :py:data:`sys.path` so subsequent imports can\n-    discover them.\n+    Add BackInTime path ``path`` to :py:data:`sys.path` so subsequent imports\n+    can discover them.\n \n     Args:\n         *path (str):    paths that should be joind to 'backintime'\n@@ -113,7 +113,7 @@ def running_from_source():\n     Check if BackInTime is running from source (without installing).\n \n     Returns:\n-        bool:   True if BackInTime is running from source\n+        bool:   ``True`` if BackInTime is running from source\n     \"\"\"\n     return os.path.isfile(get_backintime_path('common', 'backintime'))\n \n@@ -132,8 +132,8 @@ def get_git_ref_hash():\n     from source.\n \n     Returns:\n-        tuple:  two items of either str instance if running from source\n-                or None\n+        tuple:  two items of either :py:class:`str` instance if running from\n+                source or ``None``\n     \"\"\"\n     ref, hashid = None, None\n     gitPath = os.path.abspath(os.path.join(__file__, os.pardir, os.pardir, '.git'))\n@@ -161,17 +161,17 @@ def get_git_ref_hash():\n \n def read_file( path, default_value = None ):\n     \"\"\"\n-    Read the file in `path` or its '.gz' compressed variant and return its\n-    content or `default_value` if `path` does not exist.\n+    Read the file in ``path`` or its '.gz' compressed variant and return its\n+    content or ``default_value`` if ``path`` does not exist.\n \n     Args:\n         path (str):             full path to file that should be read.\n                                 '.gz' will be added automatically if the file\n                                 is compressed\n-        default_value (str):    default if `path` does not exist\n+        default_value (str):    default if ``path`` does not exist\n \n     Returns:\n-        str:                    content of file in `path`\n+        str:                    content of file in ``path``\n     \"\"\"\n     ret_val = default_value\n \n@@ -189,17 +189,17 @@ def read_file( path, default_value = None ):\n \n def read_file_lines( path, default_value = None ):\n     \"\"\"\n-    Read the file in `path` or its '.gz' compressed variant and return its\n-    content as a list of lines or `default_value` if `path` does not exist.\n+    Read the file in ``path`` or its '.gz' compressed variant and return its\n+    content as a list of lines or ``default_value`` if ``path`` does not exist.\n \n     Args:\n         path (str):             full path to file that should be read.\n                                 '.gz' will be added automatically if the file\n                                 is compressed\n-        default_value (list):   default if `path` does not exist\n+        default_value (list):   default if ``path`` does not exist\n \n     Returns:\n-        list:                   content of file in `path` splitted by lines.\n+        list:                   content of file in ``path`` splitted by lines.\n     \"\"\"\n     ret_val = default_value\n \n@@ -217,14 +217,14 @@ def read_file_lines( path, default_value = None ):\n \n def read_command_output( cmd ):\n     \"\"\"\n-    Read stdout from command `cmd`.\n+    Read stdout from command ``cmd``.\n \n     Args:\n         cmd (str):  command that should be called\n \n     Returns:\n-        str:        stdout from command `cmd` or '' if calling `cmd` raised an\n-                    exception\n+        str:        stdout from command ``cmd`` or '' if calling ``cmd`` raised\n+                    an exception\n     \"\"\"\n     ret_val = ''\n \n@@ -239,13 +239,13 @@ def read_command_output( cmd ):\n \n def check_command( cmd ):\n     \"\"\"\n-    Check if command `cmd` is a file in 'PATH' environ.\n+    Check if command ``cmd`` is a file in 'PATH' environ.\n \n     Args:\n         cmd (str):  command\n \n     Returns:\n-        bool:       True if command `cmd` is in 'PATH' environ\n+        bool:       ``True`` if command ``cmd`` is in 'PATH' environ\n     \"\"\"\n     cmd = cmd.strip()\n \n@@ -258,14 +258,14 @@ def check_command( cmd ):\n \n def which(cmd):\n     \"\"\"\n-    Get the fullpath of executable command `cmd`. Works like\n+    Get the fullpath of executable command ``cmd``. Works like\n     command-line 'which' command.\n \n     Args:\n         cmd (str):  command\n \n     Returns:\n-        str:        fullpath of command `cmd` or None if command is\n+        str:        fullpath of command ``cmd`` or ``None`` if command is\n                     not available\n     \"\"\"\n     pathenv = os.getenv('PATH', '')\n@@ -279,13 +279,13 @@ def which(cmd):\n \n def make_dirs( path ):\n     \"\"\"\n-    Create directories `path` recursive and return success.\n+    Create directories ``path`` recursive and return success.\n \n     Args:\n         path (str): fullpath to directories that should be created\n \n     Returns:\n-        bool:       True if successful\n+        bool:       ``True`` if successful\n     \"\"\"\n     path = path.rstrip( os.sep )\n     if not path:\n@@ -303,14 +303,14 @@ def make_dirs( path ):\n \n def mkdir(path, mode = 0o755):\n     \"\"\"\n-    Create directory `path`.\n+    Create directory ``path``.\n \n     Args:\n         path (str): full path to directory that should be created\n         mode (int): numeric permission mode\n \n     Returns:\n-        bool:       True if successful\n+        bool:       ``True`` if successful\n     \"\"\"\n     if os.path.isdir(path):\n         try:\n@@ -338,7 +338,7 @@ def pids():\n \n def process_name(pid):\n     \"\"\"\n-    Get the name of the process with `pid`.\n+    Get the name of the process with ``pid``.\n \n     Args:\n         pid (int):  Process Indicator\n@@ -358,7 +358,8 @@ def process_name(pid):\n \n def process_cmdline(pid):\n     \"\"\"\n-    Get the cmdline (command that spawnd this process) of the process with `pid`.\n+    Get the cmdline (command that spawnd this process) of the process with\n+    ``pid``.\n \n     Args:\n         pid (int):  Process Indicator\n@@ -375,7 +376,7 @@ def process_cmdline(pid):\n \n def pids_with_name(name):\n     \"\"\"\n-    Get all processes currently running with name `name`.\n+    Get all processes currently running with name ``name``.\n \n     Args:\n         name (str): name of a process like 'python3' or 'backintime'\n@@ -387,28 +388,28 @@ def pids_with_name(name):\n \n def process_exists(name):\n     \"\"\"\n-    Check if process `name` is currently running.\n+    Check if process ``name`` is currently running.\n \n     Args:\n         name (str): name of a process like 'python3' or 'backintime'\n \n     Returns:\n-        bool:       True if there is a process running with `name`\n+        bool:       ``True`` if there is a process running with ``name``\n     \"\"\"\n     return len(pids_with_name(name)) > 0\n \n def is_process_alive(pid):\n     \"\"\"\n-    Check if the process with PID `pid` is alive.\n+    Check if the process with PID ``pid`` is alive.\n \n     Args:\n         pid (int):  Process Indicator\n \n     Returns:\n-        bool:       True if the process with PID `pid` is alive\n+        bool:       ``True`` if the process with PID ``pid`` is alive\n \n     Raises:\n-        ValueError: If `pid` is 0 because 'kill(0, SIG)' would send SIG to all\n+        ValueError: If ``pid`` is 0 because 'kill(0, SIG)' would send SIG to all\n                     processes\n     \"\"\"\n     if pid < 0:\n@@ -435,19 +436,19 @@ def check_x_server():\n     Check if there is a X11 server running on this system.\n \n     Returns:\n-        bool:   True if X11 server is running\n+        bool:   ``True`` if X11 server is running\n     \"\"\"\n     return 0 == os.system( 'xdpyinfo >/dev/null 2>&1' )\n \n def prepare_path( path ):\n     \"\"\"\n-    Removes trailing slash '/' from `path`.\n+    Removes trailing slash '/' from ``path``.\n \n     Args:\n         path (str): absolut path\n \n     Returns:\n-        str:        path `path` without trailing but with leading slash\n+        str:        path ``path`` without trailing but with leading slash\n     \"\"\"\n     path = path.strip( \"/\" )\n     path = os.sep + path\n@@ -459,7 +460,7 @@ def power_status_available():\n     :py:func:`tools.on_battery` would return the correct power status.\n \n     Returns:\n-        bool:   True if :py:func:`tools.on_battery` can report power status\n+        bool:   ``True`` if :py:func:`tools.on_battery` can report power status\n     \"\"\"\n     if dbus:\n         try:\n@@ -477,7 +478,7 @@ def on_battery():\n     Checks if the system is on battery power.\n \n     Returns:\n-        bool:   True if system is running on battery\n+        bool:   ``True`` if system is running on battery\n     \"\"\"\n     if dbus:\n         try:\n@@ -493,17 +494,17 @@ def on_battery():\n \n def _execute( cmd, callback = None, user_data = None ):\n     \"\"\"\n-    Execute command `cmd` and return its returncode. Returncode is\n-    multiplied by 256. Commands stdout can be send to handler `callback`.\n+    Execute command ``cmd`` and return its returncode. Returncode is\n+    multiplied by 256. Commands stdout can be send to handler ``callback``.\n \n     Args:\n         cmd (str):          command that should be executed\n         callback (method):  function that will be called with every new line\n                             on stdout. Need to handle two arguments.\n-        user_data (str):    additional arg send to `callback`\n+        user_data (str):    additional arg send to ``callback``\n \n     Returns:\n-        int:                returncode of command `cmd` multiplied by 256\n+        int:                returncode of command ``cmd`` multiplied by 256\n     \"\"\"\n     logger.debug(\"Call command \\\"%s\\\"\" %cmd, traceDepth = 1)\n     ret_val = 0\n@@ -564,15 +565,15 @@ def get_rsync_caps(data = None):\n \n def get_rsync_prefix( config, no_perms = True, use_modes = ['ssh', 'ssh_encfs'] ):\n     \"\"\"\n-    Get rsync command and all args based on current profile in `config`.\n+    Get rsync command and all args based on current profile in ``config``.\n \n     Args:\n         config (config.Config): current config\n         no_perms (bool):        don't sync permissions (--no-p --no-g --no-o)\n-                                if True.\n-                                :py:func:`config.Config.preserve_acl` == True or\n-                                :py:func:`config.Config.preserve_xattr` == True\n-                                will overwrite this to False\n+                                if ``True``.\n+                                :py:func:`config.Config.preserve_acl` == ``True`` or\n+                                :py:func:`config.Config.preserve_xattr` == ``True``\n+                                will overwrite this to ``False``\n         use_modes (list):       if current mode is in this list add additional\n                                 args for that mode\n \n@@ -660,7 +661,7 @@ def temp_failure_retry(func, *args, **kwargs):\n \n def _get_md5sum_from_path(path):\n     \"\"\"\n-    Calculate md5sum for file in `path`.\n+    Calculate md5sum for file in ``path``.\n \n     Args:\n         path (str): full path to file\n@@ -679,7 +680,7 @@ def _get_md5sum_from_path(path):\n \n def check_cron_pattern(s):\n     \"\"\"\n-    Check if `s` is a valid cron pattern.\n+    Check if ``s`` is a valid cron pattern.\n     Examples::\n \n         0,10,13,15,17,20,23\n@@ -689,7 +690,7 @@ def check_cron_pattern(s):\n         s (str):    pattern to check\n \n     Returns:\n-        bool:       True if `s` is a valid cron pattern\n+        bool:       ``True`` if ``s`` is a valid cron pattern\n     \"\"\"\n     if s.find(' ') >= 0:\n         return False\n@@ -711,7 +712,7 @@ def check_cron_pattern(s):\n #TODO: check if this is still necessary\n def check_home_encrypt():\n     \"\"\"\n-    Return True if users home is encrypted\n+    Return ``True`` if users home is encrypted\n     \"\"\"\n     home = os.path.expanduser('~')\n     if not os.path.ismount(home):\n@@ -736,7 +737,7 @@ def check_home_encrypt():\n \n def load_env(f):\n     \"\"\"\n-    Load environ variables from file `f` into current environ.\n+    Load environ variables from file ``f`` into current environ.\n     Do not overwrite existing environ variables.\n \n     Args:\n@@ -811,7 +812,7 @@ def set_password(*args):\n \n def get_mountpoint(path):\n     \"\"\"\n-    Get the mountpoint of `path`. If your HOME is on a separate partition\n+    Get the mountpoint of ``path``. If your HOME is on a separate partition\n     get_mountpoint('/home/user/foo') would return '/home'.\n \n     Args:\n@@ -829,7 +830,7 @@ def get_mountpoint(path):\n \n def get_mount_args(path):\n     \"\"\"\n-    Get all /etc/mtab args for the filesystem of `path` as a list.\n+    Get all /etc/mtab args for the filesystem of ``path`` as a list.\n     Example::\n \n         [DEVICE,      MOUNTPOINT, FILESYSTEM_TYPE, OPTIONS,    DUMP, PASS]\n@@ -852,7 +853,7 @@ def get_mount_args(path):\n \n def get_device(path):\n     \"\"\"\n-    Get the device for the filesystem of `path`.\n+    Get the device for the filesystem of ``path``.\n     Example::\n \n         /dev/sda1\n@@ -872,7 +873,7 @@ def get_device(path):\n \n def get_filesystem(path):\n     \"\"\"\n-    Get the filesystem type for the filesystem of `path`.\n+    Get the filesystem type for the filesystem of ``path``.\n \n     Args:\n         path (str): full path\n@@ -887,7 +888,7 @@ def get_filesystem(path):\n \n def get_uuid(dev):\n     \"\"\"\n-    Get the UUID for the block device `dev`.\n+    Get the UUID for the block device ``dev``.\n \n     Args:\n         dev (str):  block device path\n@@ -914,7 +915,7 @@ def get_uuid(dev):\n \n def get_uuid_from_path(path):\n     \"\"\"\n-    Get the UUID for the for the filesystem of `path`.\n+    Get the UUID for the for the filesystem of ``path``.\n \n     Args:\n         path (str): full path\n@@ -941,18 +942,18 @@ def get_filesystem_mount_info():\n \n def wrap_line(msg, size=950, delimiters='\\t ', new_line_indicator = 'CONTINUE: '):\n     \"\"\"\n-    Wrap line `msg` into multiple lines with each shorter than `size`. Try to\n-    break the line on `delimiters`. New lines will start with\n-    `new_line_indicator`.\n+    Wrap line ``msg`` into multiple lines with each shorter than ``size``. Try\n+    to break the line on ``delimiters``. New lines will start with\n+    ``new_line_indicator``.\n \n     Args:\n         msg (str):                  string that should get wrapped\n         size (int):                 maximum lenght of returned strings\n-        delimiters (str):           try to break `msg` on these characters\n+        delimiters (str):           try to break ``msg`` on these characters\n         new_line_indicator (str):   start new lines with this string\n \n     Yields:\n-        str:                        lines with max `size` lenght\n+        str:                        lines with max ``size`` lenght\n     \"\"\"\n     if len(new_line_indicator) >= size - 1:\n         new_line_indicator = ''\n@@ -975,7 +976,7 @@ def syncfs():\n     Sync any data buffered in memory to disk.\n \n     Returns:\n-        bool:   True if successful\n+        bool:   ``True`` if successful\n     \"\"\"\n     if check_command('sync'):\n         return(_execute('sync') == 0)\n@@ -998,7 +999,7 @@ def isRoot():\n     Check if we are root.\n \n     Returns:\n-        bool:   True if we are root\n+        bool:   ``True`` if we are root\n     \"\"\"\n     return os.geteuid() == 0\n \n@@ -1007,7 +1008,7 @@ def usingSudo():\n     Check if 'sudo' was used to start this process.\n \n     Returns:\n-        bool:   True if process was started with sudo\n+        bool:   ``True`` if process was started with sudo\n     \"\"\"\n     return isRoot() and os.getenv('HOME', '/root') != '/root'\n \n@@ -1017,16 +1018,16 @@ re_separate_asterisk = re.compile(r'(?:^\\*+[^/\\*]|[^/\\*]\\*+[^/\\*]|[^/\\*]\\*+|\\*+[\n \n def patternHasNotEncryptableWildcard(pattern):\n     \"\"\"\n-    Check if `pattern` has wildcards '[ ] ? \\*'.\n-    but return False for foo/\\*, foo/\\*/bar, \\*/bar or \\*\\*/bar\n+    Check if ``pattern`` has wildcards ``[ ] ? *``.\n+    but return ``False`` for ``foo/*``, ``foo/*/bar``, ``*/bar`` or ``**/bar``\n \n     Args:\n         pattern (str):  path or pattern to check\n \n     Returns:\n-        bool:           True if `pattern` has wildcards '[ ] ? \\*' but\n-                        False if wildcard look like\n-                        'foo/\\*', 'foo/\\*/bar', '\\*/bar' or '\\*\\*/bar'\n+        bool:           ``True`` if ``pattern`` has wildcards ``[ ] ? *`` but\n+                        ``False`` if wildcard look like\n+                        ``foo/*``, ``foo/*/bar``, ``*/bar`` or ``**/bar``\n     \"\"\"\n     if not re_wildcard.search(pattern) is None:\n         return True\n@@ -1040,7 +1041,7 @@ ANACRON_TIME_FORMAT = '%Y%m%d'\n \n def readTimeStamp(f):\n     \"\"\"\n-    Read date string from file `f` and try to return datetime.\n+    Read date string from file ``f`` and try to return datetime.\n \n     Args:\n         f (str):            full path to timestamp file\n@@ -1060,7 +1061,7 @@ def readTimeStamp(f):\n \n def writeTimeStamp(f):\n     \"\"\"\n-    Write current date and time into file `f`.\n+    Write current date and time into file ``f``.\n \n     Args:\n         f (str):            full path to timestamp file\n@@ -1212,7 +1213,7 @@ def writeCrontab(lines):\n                     lines that should be written to crontab\n \n     Returns:\n-        bool:       True if successful\n+        bool:       ``True`` if successful\n     \"\"\"\n     assert isinstance(lines, (list, tuple)), 'lines is not list or tuple type: %s' % lines\n     with tempfile.NamedTemporaryFile(mode = 'wt') as f:\n@@ -1236,20 +1237,20 @@ def writeCrontab(lines):\n \n def splitCommands(cmds, head = '', tail = '', maxLength = 0):\n     \"\"\"\n-    Split a list of commands `cmds` into multiple commands with each length\n-    lower than `maxLength`.\n+    Split a list of commands ``cmds`` into multiple commands with each length\n+    lower than ``maxLength``.\n \n     Args:\n         cmds (list):            commands\n-        head (str):             command that need to run first on every iteration\n-                                of `cmds`\n+        head (str):             command that need to run first on every\n+                                iteration of ``cmds``\n         tail (str):             command that need to run after every iteration\n-                                of `cmds`\n+                                of ``cmds``\n         maxLength (int):        maximum length a command could be.\n                                 Don't split if <= 0\n \n     Yields:\n-        str:                    new command with length < `maxLength`\n+        str:                    new command with length < ``maxLength``\n \n     Example::\n \n@@ -1267,11 +1268,12 @@ class UniquenessSet:\n     Check for uniqueness or equality of files.\n \n     Args:\n-        dc (bool):              if True use deep check which will compare files\n-                                md5sums if they are of same size but no hardlinks\n-                                (don't have the same inode). If False use files\n-                                size and mtime\n-        follow_symlink (bool):  if True check symlinks target instead of the link\n+        dc (bool):              if ``True`` use deep check which will compare\n+                                files md5sums if they are of same size but no\n+                                hardlinks (don't have the same inode).\n+                                If ``False`` use files size and mtime\n+        follow_symlink (bool):  if ``True`` check symlinks target instead of the\n+                                link\n         list_equal_to (str):    full path to file. If not empty only return\n                                 equal files to the given path instead of\n                                 unique files.\n@@ -1291,17 +1293,17 @@ class UniquenessSet:\n \n     def check_for(self, input_path):\n         \"\"\"\n-        Check file `input_path` for either uniqueness or equality\n-        (depending on `list_equal_to` from constructor).\n+        Check file ``input_path`` for either uniqueness or equality\n+        (depending on ``list_equal_to`` from constructor).\n \n         Args:\n             input_path (str):   full path to file\n \n         Returns:\n-            bool:               True if file is unique and `list_equal_to` is\n-                                empty.\n-                                Or True if file is equal to file in\n-                                `list_equal_to`\n+            bool:               ``True`` if file is unique and ``list_equal_to``\n+                                is empty.\n+                                Or ``True`` if file is equal to file in\n+                                ``list_equal_to``\n         \"\"\"\n         # follow symlinks ?\n         path = input_path\n@@ -1315,13 +1317,13 @@ class UniquenessSet:\n \n     def check_unique(self, path):\n         \"\"\"\n-        Check file `path` for uniqueness and store a unique key for `path`.\n+        Check file ``path`` for uniqueness and store a unique key for ``path``.\n \n         Args:\n             path (str): full path to file\n \n         Returns:\n-            bool:       True if file is unique\n+            bool:       ``True`` if file is unique\n         \"\"\"\n         # check\n         if self.deep_check:\n@@ -1360,13 +1362,14 @@ class UniquenessSet:\n \n     def check_equal(self, path):\n         \"\"\"\n-        Check if `path` is equal to the file in `list_equal_to` from constructor.\n+        Check if ``path`` is equal to the file in ``list_equal_to`` from\n+        constructor.\n \n         Args:\n             path (str): full path to file\n \n         Returns:\n-            bool:       True if file is equal\n+            bool:       ``True`` if file is equal\n         \"\"\"\n         st = os.stat(path)\n         if self.deep_check:\n"], "label": 0, "cve": "CVE-2017-7572", "rank": 20, "commit": "f46185dfb11ceffb8bc314aec4d7c8e37c9b9d64", "cve_attention_tokens": []}
{"cve_desc": "Session fixation vulnerability in Jenkins before 1.551 and LTS before 1.532.2 allows remote attackers to hijack web sessions via vectors involving the \"override\" of Jenkins cookies.", "commit_msg": "[FIXED JENKINS-21023] Rewrote WorkspaceCleanupThread to determine where workspaces for known items should be, rather than looking for directories that look like they might be workspaces.\nOne key advantage is that this correctly handles the new default workspace location on the master.\nAnother is that this allows folders to be correctly skipped, and jobs in folders to be correctly deleted.\nA subtler advantage would be handling of configured nondefault workspace locations, and compatibility with WorkspaceLocator.\n(Orphaned workspaces from deleted jobs are not removed, but these were not removed before either.)\n", "diff": ["diff --git a/changelog.html b/changelog.html\nindex 6f14a5d434..36335a10b5 100644\n--- a/changelog.html\n+++ b/changelog.html\n@@ -67,6 +67,9 @@ Upcoming changes</a>\n   <li class=bug>\n     f:combobox is narrow.\n     (<a href=\"https://issues.jenkins-ci.org/browse/JENKINS-21612\">issue 21612</a>)\n+  <li class=bug>\n+    The workspace cleanup thread failed to handle the modern workspace location on master, and mishandled folders.\n+    (<a href=\"https://issues.jenkins-ci.org/browse/JENKINS-21023\">issue 21023</a>)\n   <li class=bug>\n     Fixed missing help items on \"Configure Global Security\" page\n     (<a href=\"https://issues.jenkins-ci.org/browse/JENKINS-19832\">issue 19832</a>)\n", "diff --git a/core/src/main/java/hudson/model/WorkspaceCleanupThread.java b/core/src/main/java/hudson/model/WorkspaceCleanupThread.java\nindex 52bf53daea..e0d0f7b13f 100644\n--- a/core/src/main/java/hudson/model/WorkspaceCleanupThread.java\n+++ b/core/src/main/java/hudson/model/WorkspaceCleanupThread.java\n@@ -23,18 +23,18 @@\n  */\n package hudson.model;\n \n+import hudson.Extension;\n import hudson.FilePath;\n import hudson.Util;\n-import hudson.Extension;\n-import jenkins.model.Jenkins;\n-\n-import java.io.File;\n-import java.io.FileFilter;\n import java.io.IOException;\n-import java.io.Serializable;\n+import java.util.ArrayList;\n import java.util.Date;\n import java.util.List;\n+import java.util.logging.Level;\n import java.util.logging.Logger;\n+import javax.annotation.Nonnull;\n+import jenkins.model.Jenkins;\n+import jenkins.model.ModifiableTopLevelItemGroup;\n \n /**\n  * Clean up old left-over workspaces from slaves.\n@@ -47,7 +47,7 @@ public class WorkspaceCleanupThread extends AsyncPeriodicWork {\n         super(\"Workspace clean-up\");\n     }\n \n-    public long getRecurrencePeriod() {\n+    @Override public long getRecurrencePeriod() {\n         return DAY;\n     }\n \n@@ -55,121 +55,87 @@ public class WorkspaceCleanupThread extends AsyncPeriodicWork {\n         Jenkins.getInstance().getExtensionList(AsyncPeriodicWork.class).get(WorkspaceCleanupThread.class).run();\n     }\n \n-    // so that this can be easily accessed from sub-routine.\n-    private TaskListener listener;\n-\n-    protected void execute(TaskListener listener) throws InterruptedException, IOException {\n-        try {\n-            if(disabled) {\n-                LOGGER.fine(\"Disabled. Skipping execution\");\n-                return;\n-            }\n-            \n-            this.listener = listener;\n-\n-            Jenkins h = Jenkins.getInstance();\n-            for (Node n : h.getNodes())\n-                if (n instanceof Slave) process((Slave)n);\n-\n-            process(h);\n-        } finally {\n-            this.listener = null;\n+    @Override protected void execute(TaskListener listener) throws InterruptedException, IOException {\n+        if (disabled) {\n+            LOGGER.fine(\"Disabled. Skipping execution\");\n+            return;\n         }\n-    }\n-\n-    private void process(Jenkins h) throws IOException, InterruptedException {\n-        File jobs = new File(h.getRootDir(), \"jobs\");\n-        File[] dirs = jobs.listFiles(DIR_FILTER);\n-        if(dirs==null)      return;\n-        for (File dir : dirs) {\n-            FilePath ws = new FilePath(new File(dir, \"workspace\"));\n-            if(shouldBeDeleted(dir.getName(),ws,h)) {\n-                delete(ws);\n+        List<Node> nodes = new ArrayList<Node>();\n+        Jenkins j = Jenkins.getInstance();\n+        nodes.add(j);\n+        nodes.addAll(j.getNodes());\n+        for (TopLevelItem item : j.getAllItems(TopLevelItem.class)) {\n+            if (item instanceof ModifiableTopLevelItemGroup) { // no such thing as TopLevelItemGroup, and ItemGroup offers no access to its type parameter\n+                continue; // children will typically have their own workspaces as subdirectories; probably no real workspace of its own\n+            }\n+            listener.getLogger().println(\"Checking \" + item.getFullDisplayName());\n+            for (Node node : nodes) {\n+                FilePath ws = node.getWorkspaceFor(item);\n+                if (ws == null) {\n+                    continue; // offline, fine\n+                }\n+                boolean check;\n+                try {\n+                    check = shouldBeDeleted(item, ws, node);\n+                } catch (IOException x) {\n+                    x.printStackTrace(listener.error(\"Failed to check \" + node.getDisplayName()));\n+                    continue;\n+                } catch (InterruptedException x) {\n+                    x.printStackTrace(listener.error(\"Failed to check \" + node.getDisplayName()));\n+                    continue;\n+                }\n+                if (check) {\n+                    listener.getLogger().println(\"Deleting \" + ws + \" on \" + node.getDisplayName());\n+                    try {\n+                        ws.deleteRecursive();\n+                    } catch (IOException x) {\n+                        x.printStackTrace(listener.error(\"Failed to delete \" + ws + \" on \" + node.getDisplayName()));\n+                    } catch (InterruptedException x) {\n+                        x.printStackTrace(listener.error(\"Failed to delete \" + ws + \" on \" + node.getDisplayName()));\n+                    }\n+                }\n             }\n         }\n     }\n \n-    private boolean shouldBeDeleted(String workspaceDirectoryName, FilePath dir, Node n) throws IOException, InterruptedException {\n+    private boolean shouldBeDeleted(@Nonnull TopLevelItem item, FilePath dir, Node n) throws IOException, InterruptedException {\n         // TODO: the use of remoting is not optimal.\n         // One remoting can execute \"exists\", \"lastModified\", and \"delete\" all at once.\n-        TopLevelItem item = Jenkins.getInstance().getItem(workspaceDirectoryName);\n-\n-        if(!dir.exists())\n+        // (Could even invert master loop so that one FileCallable takes care of all known items.)\n+        if(!dir.exists()) {\n+            LOGGER.log(Level.FINE, \"Directory {0} does not exist\", dir);\n             return false;\n+        }\n \n         // if younger than a month, keep it\n         long now = new Date().getTime();\n         if(dir.lastModified() + 30 * DAY > now) {\n-            LOGGER.fine(\"Directory \"+dir+\" is only \"+ Util.getTimeSpanString(now-dir.lastModified())+\" old, so not deleting\");\n+            LOGGER.log(Level.FINE, \"Directory {0} is only {1} old, so not deleting\", new Object[] {dir, Util.getTimeSpanString(now-dir.lastModified())});\n             return false;\n         }\n \n-        // Could mean that directory doesn't belong to a job. But can also mean that it's a custom workspace belonging to a job.\n-        // So better leave it alone - will still be deleted after 30 days - until we have a proper check for custom workspaces.\n-        // TODO: implement proper check for custom workspaces.\n-        // TODO: If we do the above, could also be good to add checkbox that lets users configure a workspace to never be auto-cleaned.\n-        if(item==null) {\n-            return false;\n-        }\n+        // TODO could also be good to add checkbox that lets users configure a workspace to never be auto-cleaned.\n \n         if (item instanceof AbstractProject<?,?>) {\n             AbstractProject<?,?> p = (AbstractProject<?,?>) item;\n             Node lb = p.getLastBuiltOn();\n-            LOGGER.finer(\"Directory \"+dir+\" is last built on \"+lb);\n+            LOGGER.log(Level.FINER, \"Directory {0} is last built on {1}\", new Object[] {dir, lb});\n             if(lb!=null && lb.equals(n)) {\n                 // this is the active workspace. keep it.\n-                LOGGER.fine(\"Directory \"+dir+\" is the last workspace for \"+p);\n+                LOGGER.log(Level.FINE, \"Directory {0} is the last workspace for {1}\", new Object[] {dir, p});\n                 return false;\n             }\n             \n             if(!p.getScm().processWorkspaceBeforeDeletion(p,dir,n)) {\n-                LOGGER.fine(\"Directory deletion of \"+dir+\" is vetoed by SCM\");\n+                LOGGER.log(Level.FINE, \"Directory deletion of {0} is vetoed by SCM\", dir);\n                 return false;\n             }\n         }\n \n-        LOGGER.finer(\"Going to delete directory \"+dir);\n+        LOGGER.log(Level.FINER, \"Going to delete directory {0}\", dir);\n         return true;\n     }\n \n-    private void process(Slave s) throws InterruptedException {\n-        listener.getLogger().println(\"Scanning \"+s.getNodeName());\n-\n-        try {\n-            FilePath path = s.getWorkspaceRoot();\n-            if(path==null)  return;\n-\n-            List<FilePath> dirs = path.list(DIR_FILTER);\n-            if(dirs ==null) return;\n-            for (FilePath dir : dirs) {\n-                if(shouldBeDeleted(dir.getName(),dir,s))\n-                    delete(dir);\n-            }\n-        } catch (IOException e) {\n-            e.printStackTrace(listener.error(\"Failed on \"+s.getNodeName()));\n-        }\n-    }\n-\n-    private void delete(FilePath dir) throws InterruptedException {\n-        try {\n-            listener.getLogger().println(\"Deleting \"+dir);\n-            dir.deleteRecursive();\n-        } catch (IOException e) {\n-            e.printStackTrace(listener.error(\"Failed to delete \"+dir));\n-        }\n-    }\n-\n-\n-    private static class DirectoryFilter implements FileFilter, Serializable {\n-        public boolean accept(File f) {\n-            return f.isDirectory();\n-        }\n-        private static final long serialVersionUID = 1L;\n-    }\n-    private static final FileFilter DIR_FILTER = new DirectoryFilter();\n-\n-    private static final long DAY = 1000*60*60*24;\n-\n     private static final Logger LOGGER = Logger.getLogger(WorkspaceCleanupThread.class.getName());\n \n     /**\n", "diff --git a/test/src/test/java/hudson/model/WorkspaceCleanupThreadTest.java b/test/src/test/java/hudson/model/WorkspaceCleanupThreadTest.java\nnew file mode 100644\nindex 0000000000..3e31815e44\n--- /dev/null\n+++ b/test/src/test/java/hudson/model/WorkspaceCleanupThreadTest.java\n@@ -0,0 +1,155 @@\n+/*\n+ * The MIT License\n+ *\n+ * Copyright 2014 Jesse Glick.\n+ *\n+ * Permission is hereby granted, free of charge, to any person obtaining a copy\n+ * of this software and associated documentation files (the \"Software\"), to deal\n+ * in the Software without restriction, including without limitation the rights\n+ * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n+ * copies of the Software, and to permit persons to whom the Software is\n+ * furnished to do so, subject to the following conditions:\n+ *\n+ * The above copyright notice and this permission notice shall be included in\n+ * all copies or substantial portions of the Software.\n+ *\n+ * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+ * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+ * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+ * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+ * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+ * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+ * THE SOFTWARE.\n+ */\n+\n+package hudson.model;\n+\n+import hudson.FilePath;\n+import hudson.FilePath.FileCallable;\n+import hudson.remoting.VirtualChannel;\n+import hudson.slaves.DumbSlave;\n+import hudson.util.StreamTaskListener;\n+import java.io.File;\n+import java.io.IOException;\n+import java.util.logging.ConsoleHandler;\n+import java.util.logging.Handler;\n+import java.util.logging.Level;\n+import java.util.logging.Logger;\n+import static org.junit.Assert.*;\n+import org.junit.Assume;\n+import org.junit.BeforeClass;\n+import org.junit.Rule;\n+import org.junit.Test;\n+import org.jvnet.hudson.test.Bug;\n+import org.jvnet.hudson.test.JenkinsRule;\n+import org.jvnet.hudson.test.MockFolder;\n+\n+public class WorkspaceCleanupThreadTest {\n+\n+    // TODO test that new workspaces are skipped\n+    // TODO test that SCM.processWorkspaceBeforeDeletion can reject\n+\n+    @Rule public JenkinsRule r = new JenkinsRule();\n+\n+    private static final Logger logger = Logger.getLogger(WorkspaceCleanupThread.class.getName());\n+    @BeforeClass public static void logging() {\n+        logger.setLevel(Level.ALL);\n+        Handler handler = new ConsoleHandler();\n+        handler.setLevel(Level.ALL);\n+        logger.addHandler(handler);\n+    }\n+    \n+    @Test public void cleanUpSlaves() throws Exception {\n+        DumbSlave s1 = r.createOnlineSlave();\n+        FreeStyleProject p = r.createFreeStyleProject();\n+        p.setAssignedNode(s1);\n+        FreeStyleBuild b1 = r.assertBuildStatusSuccess(p.scheduleBuild2(0));\n+        assertEquals(s1, b1.getBuiltOn());\n+        FilePath ws1 = b1.getWorkspace();\n+        assertNotNull(ws1);\n+        ws1.act(new Detouch());\n+        DumbSlave s2 = r.createOnlineSlave();\n+        p.setAssignedNode(s2);\n+        FreeStyleBuild b2 = r.assertBuildStatusSuccess(p.scheduleBuild2(0));\n+        assertEquals(s2, b2.getBuiltOn());\n+        FilePath ws2 = b2.getWorkspace();\n+        assertNotNull(ws2);\n+        ws2.act(new Detouch());\n+        p.setAssignedNode(r.jenkins);\n+        FreeStyleBuild b3 = r.assertBuildStatusSuccess(p.scheduleBuild2(0));\n+        assertEquals(r.jenkins, b3.getBuiltOn());\n+        assertEquals(r.jenkins, p.getLastBuiltOn());\n+        new WorkspaceCleanupThread().execute(StreamTaskListener.fromStdout());\n+        assertFalse(ws1.exists());\n+        assertFalse(ws2.exists());\n+    }\n+\n+    @Bug(21023)\n+    @Test public void modernMasterWorkspaceLocation() throws Exception {\n+        FreeStyleProject p = r.createFreeStyleProject();\n+        FreeStyleBuild b1 = r.assertBuildStatusSuccess(p.scheduleBuild2(0));\n+        assertEquals(r.jenkins, b1.getBuiltOn());\n+        FilePath ws1 = b1.getWorkspace();\n+        assertNotNull(ws1);\n+        ws1.act(new Detouch());\n+        DumbSlave s = r.createOnlineSlave();\n+        p.setAssignedNode(s);\n+        FreeStyleBuild b2 = r.assertBuildStatusSuccess(p.scheduleBuild2(0));\n+        assertEquals(s, b2.getBuiltOn());\n+        FilePath ws2 = b2.getWorkspace();\n+        assertNotNull(ws2);\n+        ws2.act(new Detouch());\n+        assertEquals(s, p.getLastBuiltOn());\n+        new WorkspaceCleanupThread().execute(StreamTaskListener.fromStdout());\n+        assertFalse(ws1.exists());\n+        assertTrue(ws2.exists());\n+    }\n+\n+    @Bug(21023)\n+    @Test public void jobInFolder() throws Exception {\n+        MockFolder d = r.createFolder(\"d\");\n+        FreeStyleProject p1 = d.createProject(FreeStyleProject.class, \"p\");\n+        FreeStyleBuild b1 = r.assertBuildStatusSuccess(p1.scheduleBuild2(0));\n+        assertEquals(r.jenkins, b1.getBuiltOn());\n+        FilePath ws1 = b1.getWorkspace();\n+        assertNotNull(ws1);\n+        ws1.act(new Detouch());\n+        DumbSlave s1 = r.createOnlineSlave();\n+        p1.setAssignedNode(s1);\n+        FreeStyleBuild b2 = r.assertBuildStatusSuccess(p1.scheduleBuild2(0));\n+        assertEquals(s1, b2.getBuiltOn());\n+        FilePath ws2 = b2.getWorkspace();\n+        assertNotNull(ws2);\n+        ws2.act(new Detouch());\n+        DumbSlave s2 = r.createOnlineSlave();\n+        p1.setAssignedNode(s2);\n+        FreeStyleBuild b3 = r.assertBuildStatusSuccess(p1.scheduleBuild2(0));\n+        assertEquals(s2, b3.getBuiltOn());\n+        FilePath ws3 = b3.getWorkspace();\n+        assertNotNull(ws3);\n+        ws3.act(new Detouch());\n+        assertEquals(s2, p1.getLastBuiltOn());\n+        FreeStyleProject p2 = d.createProject(FreeStyleProject.class, \"p2\");\n+        p2.setAssignedNode(s1);\n+        FreeStyleBuild b4 = r.assertBuildStatusSuccess(p2.scheduleBuild2(0));\n+        assertEquals(s1, b4.getBuiltOn());\n+        FilePath ws4 = b4.getWorkspace();\n+        assertNotNull(ws4);\n+        ws4.act(new Detouch());\n+        assertEquals(s1, p2.getLastBuiltOn());\n+        ws2.getParent().act(new Detouch()); // ${s1.rootPath}/workspace/d/\n+        new WorkspaceCleanupThread().execute(StreamTaskListener.fromStdout());\n+        assertFalse(ws1.exists());\n+        assertFalse(ws2.exists());\n+        assertTrue(ws3.exists());\n+        assertTrue(ws4.exists());\n+    }\n+\n+    private static final class Detouch implements FileCallable<Void> {\n+        @Override public Void invoke(File f, VirtualChannel channel) throws IOException, InterruptedException {\n+            Assume.assumeTrue(\"failed to reset lastModified on \" + f, f.setLastModified(0));\n+            return null;\n+        }\n+    }\n+\n+}\n"], "label": 0, "cve": "CVE-2014-2066", "rank": 3, "commit": "cd526e99e63ae362f2d1ce1a04c3c68a38032a5c", "cve_attention_tokens": []}
{"cve_desc": "An issue was discovered in OpenSC through 0.19.0 and 0.20.x through 0.20.0-rc3. libopensc/pkcs15-prkey.c has an incorrect free operation in sc_pkcs15_decode_prkdf_entry.", "commit_msg": "pkcs15-prkey: Free allocated data on all error exit paths\n\nThanks oss-fuzz\n\nhttps://bugs.chromium.org/p/oss-fuzz/issues/detail?id=18790\n\n", "diff": ["diff --git a/src/libopensc/pkcs15-prkey.c b/src/libopensc/pkcs15-prkey.c\nindex 6ec339b9..5127565d 100644\n--- a/src/libopensc/pkcs15-prkey.c\n+++ b/src/libopensc/pkcs15-prkey.c\n@@ -299,6 +299,7 @@ int sc_pkcs15_decode_prkdf_entry(struct sc_pkcs15_card *p15card,\n \n \tif (!p15card->app || !p15card->app->ddo.aid.len) {\n \t\tif (!p15card->file_app) {\n+\t\t\tsc_pkcs15_free_key_params(&info.params);\n \t\t\treturn SC_ERROR_INTERNAL;\n \t\t}\n \t\tr = sc_pkcs15_make_absolute_path(&p15card->file_app->path, &info.path);\n"], "label": 0, "cve": "CVE-2019-19480", "rank": 4, "commit": "c4dcac5de77825e79763c9cd5f58aa8bde22f0b2", "cve_attention_tokens": ["prkey", "prkdf"]}
{"cve_desc": "The SSI printenv command in Apache Tomcat 9.0.0.M1 to 9.0.0.17, 8.5.0 to 8.5.39 and 7.0.0 to 7.0.93 echoes user provided data without escaping and is, therefore, vulnerable to XSS. SSI is disabled by default. The printenv command is intended for debugging and is unlikely to be present in a production website.", "commit_msg": "Expand the SSI documentation\n\nProvide more information on the supported directives and their\nattributes.\nPatch provided by nightwatchcyber.\n", "diff": ["diff --git a/webapps/docs/changelog.xml b/webapps/docs/changelog.xml\nindex 8f80f1b10e..c410f5220d 100644\n--- a/webapps/docs/changelog.xml\n+++ b/webapps/docs/changelog.xml\n@@ -71,6 +71,15 @@\n       </fix>\n     </changelog>\n   </subsection>\n+  <subsection name=\"Web applications\">\n+    <changelog>\n+      <fix>\n+        <bug>63184</bug>: Expand the SSI documentation to provide more\n+        information on the supported directives and their attributes. Patch\n+        provided by nightwatchcyber. (markt)\n+      </fix>\n+    </changelog>\n+  </subsection>\n </section>\n <section name=\"Tomcat 9.0.17 (markt)\" rtext=\"release in progress\">\n   <subsection name=\"Catalina\">\n", "diff --git a/webapps/docs/ssi-howto.xml b/webapps/docs/ssi-howto.xml\nindex 0601eeb52b..8d672de771 100644\n--- a/webapps/docs/ssi-howto.xml\n+++ b/webapps/docs/ssi-howto.xml\n@@ -146,27 +146,63 @@ false.</li>\n <p>The directives are:</p>\n <ul>\n <li>\n-<strong>config</strong> - <code>&lt;!--#config timefmt=&quot;%B %Y&quot; --&gt;</code>\n-Used to set the format of dates and other items processed by SSI\n+<strong>config</strong> - <code>&lt;!--#config errmsg=&quot;Error occured&quot; sizefmt=&quot;abbrev&quot;\n+timefmt=&quot;%B %Y&quot; --&gt;</code>\n+Used to set SSI error message, the format of dates and file sizes processed by SSI.<br/>\n+All are optional but at least one must be used. The available options are as follows:\n+<br/>\n+<strong>errmsg</strong> - error message used for SSI errors<br/>\n+<strong>sizefmt</strong> - format used for sizes in the <strong>fsize</strong> directive<br/>\n+<strong>timefmt</strong> - format used for timestamps in the <strong>flastmod</strong> directive<br/>\n </li>\n <li>\n-<strong>echo</strong> -   <code>&lt;!--#echo var=&quot;VARIABLE_NAME&quot; --&gt;</code>\n+<strong>echo</strong> -   <code>&lt;!--#echo var=&quot;VARIABLE_NAME&quot; encoding=&quot;entity&quot; --&gt;</code>\n will be replaced by the value of the variable.\n+<br/>\n+The optional <strong>encoding</strong> parameter specifies the type of encoding to use.\n+Valid values are <strong>entity</strong> (default), <strong>url</strong> or <strong>none</strong>.\n+NOTE: Using an encoding other than <strong>entity</strong> can lead to security issues.\n </li>\n <li>\n-<strong>exec</strong> -  Used to run commands on the host system.\n+<strong>exec</strong> - <code>&lt;!--#exec cmd=&quot;file-name&quot; --&gt;</code>\n+Used to run commands on the host system.\n+</li>\n+<li>\n+<strong>exec</strong> - <code>&lt;!--#exec cgi=&quot;file-name&quot; --&gt;</code>\n+This acts the same as the <strong>include virtual</strong> directive, and doesn't actually execute any commands.\n+</li>\n+<li>\n+<strong>include</strong> -  <code>&lt;!--#include file=&quot;file-name&quot; --&gt;</code>\n+inserts the contents. The path is interpreted relative to the document where this directive\n+is being used, and IS NOT a &quot;virtual&quot; path relative to either the context root or the server root.\n </li>\n <li>\n <strong>include</strong> -  <code>&lt;!--#include virtual=&quot;file-name&quot; --&gt;</code>\n-inserts the contents\n+inserts the contents. The path is interpreted as a &quot;virtual&quot; path which is\n+relative to either the context root or the server root (depending on the <strong>isVirtualWebappRelative</strong>\n+parameter).\n </li>\n <li>\n <strong>flastmod</strong> - <code>&lt;!--#flastmod file=&quot;filename.shtml&quot; --&gt;</code>\n-Returns the time that a file was lost modified.\n+Returns the time that a file was last modified. The path is interpreted relative to the document where this directive\n+is being used, and IS NOT a &quot;virtual&quot; path relative to either the context root or the server root.\n+</li>\n+<li>\n+<strong>flastmod</strong> - <code>&lt;!--#flastmod virtual=&quot;filename.shtml&quot; --&gt;</code>\n+Returns the time that a file was last modified. The path is interpreted as a &quot;virtual&quot; path which is\n+relative to either the context root or the server root (depending on the <strong>isVirtualWebappRelative</strong>\n+parameter).\n </li>\n <li>\n <strong>fsize</strong> - <code>&lt;!--#fsize file=&quot;filename.shtml&quot; --&gt;</code>\n-Returns the size of a file.\n+Returns the size of a file. The path is interpreted relative to the document where this directive\n+is being used, and IS NOT a &quot;virtual&quot; path relative to either the context root or the server root.\n+</li>\n+<li>\n+<strong>fsize</strong> - <code>&lt;!--#fsize virtual=&quot;filename.shtml&quot; --&gt;</code>\n+Returns the size of a file. The path is interpreted as a &quot;virtual&quot; path which is\n+relative to either the context root or the server root (depending on the <strong>isVirtualWebappRelative</strong>\n+parameter).\n </li>\n <li>\n <strong>printenv</strong> - <code>&lt;!--#printenv --&gt;</code>\n@@ -195,6 +231,12 @@ Apache Introduction to SSI</a> for more information on using SSI directives.</p>\n </section>\n \n <section name=\"Variables\">\n+<p>\n+SSI variables are implemented via request attributes on the <b>javax.servlet.ServletRequest</b> object\n+and are not limited to the SSI servlet. Variables starting with the names\n+\"java.\", \"javax.\", \"sun\" or \"org.apache.catalina.ssi.SSIMediator.\" are reserved\n+and cannot be used.\n+</p>\n <p>The SSI servlet currently implements the following variables:\n </p>\n <table class=\"defaultTable\">\n@@ -395,4 +437,4 @@ with &quot;\\&quot;</td>\n \n </body>\n \n-</document>\n+</document>\n\\ No newline at end of file\n"], "label": 0, "cve": "CVE-2019-0221", "rank": 3, "commit": "7774a2b8e37eef752775d1c0893b03c6502f23ae", "cve_attention_tokens": ["printenv", "ssi"]}
{"cve_desc": "An error in the implementation of an autosubscribe feature in the check_stream_exists route of the Zulip group chat application server before 1.4.3 allowed an authenticated user to subscribe to a private stream that should have required an invitation from an existing member to join. The issue affects all previously released versions of the Zulip server.", "commit_msg": "lint: Clean up W503 PEP-8 warning.\n\n", "diff": ["diff --git a/api/zulip/__init__.py b/api/zulip/__init__.py\nindex e34922423d..4f674151bc 100644\n--- a/api/zulip/__init__.py\n+++ b/api/zulip/__init__.py\n@@ -79,9 +79,9 @@ class CountingBackoff(object):\n \n     def _check_success_timeout(self):\n         # type: () -> None\n-        if (self.timeout_success_equivalent is not None\n-            and self.last_attempt_time != 0\n-                and time.time() - self.last_attempt_time > self.timeout_success_equivalent):\n+        if (self.timeout_success_equivalent is not None and\n+            self.last_attempt_time != 0 and\n+                time.time() - self.last_attempt_time > self.timeout_success_equivalent):\n             self.number_of_retries = 0\n \n class RandomExponentialBackoff(CountingBackoff):\n", "diff --git a/bots/jabber_mirror_backend.py b/bots/jabber_mirror_backend.py\nindex cb97683650..48cc29a381 100755\n--- a/bots/jabber_mirror_backend.py\n+++ b/bots/jabber_mirror_backend.py\n@@ -75,9 +75,9 @@ def jid_to_zulip(jid):\n def zulip_to_jid(email, jabber_domain):\n     # type: (str, str) -> JID\n     jid = JID(email, domain=jabber_domain)\n-    if (options.zulip_email_suffix\n-        and options.zulip_email_suffix in jid.username\n-            and not jid.username.endswith(\"-bot\")):\n+    if (options.zulip_email_suffix and\n+        options.zulip_email_suffix in jid.username and\n+            not jid.username.endswith(\"-bot\")):\n         jid.username = jid.username.rpartition(options.zulip_email_suffix)[0]\n     return jid\n \n@@ -366,10 +366,10 @@ option does not affect login credentials.'''.replace(\"\\n\", \" \"))\n         default=None,\n         action='store',\n         help=\"Your Jabber JID.  If a resource is specified, \"\n-        + \"it will be used as the nickname when joining MUCs.  \"\n-        + \"Specifying the nickname is mostly useful if you want \"\n-        + \"to run the public mirror from a regular user instead of \"\n-        + \"from a dedicated account.\")\n+             \"it will be used as the nickname when joining MUCs.  \"\n+             \"Specifying the nickname is mostly useful if you want \"\n+             \"to run the public mirror from a regular user instead of \"\n+             \"from a dedicated account.\")\n     jabber_group.add_option('--jabber-password',\n                             default=None,\n                             action='store',\n@@ -378,7 +378,7 @@ option does not affect login credentials.'''.replace(\"\\n\", \" \"))\n                             default=None,\n                             action='store',\n                             help=\"Your Jabber conference domain (E.g. conference.jabber.example.com).  \"\n-                            + \"If not specifed, \\\"conference.\\\" will be prepended to your JID's domain.\")\n+                                 \"If not specifed, \\\"conference.\\\" will be prepended to your JID's domain.\")\n     jabber_group.add_option('--no-use-tls',\n                             default=None,\n                             action='store_true')\n@@ -413,8 +413,8 @@ option does not affect login credentials.'''.replace(\"\\n\", \" \"))\n         pass\n     for option in (\"jid\", \"jabber_password\", \"conference_domain\", \"mode\", \"zulip_email_suffix\",\n                    \"jabber_server_address\", \"jabber_server_port\"):\n-        if (getattr(options, option) is None\n-                and config.has_option(\"jabber_mirror\", option)):\n+        if (getattr(options, option) is None and\n+                config.has_option(\"jabber_mirror\", option)):\n             setattr(options, option, config.get(\"jabber_mirror\", option))\n \n     for option in (\"no_use_tls\",):\n@@ -435,7 +435,7 @@ option does not affect login credentials.'''.replace(\"\\n\", \" \"))\n \n     if None in (options.jid, options.jabber_password):\n         config_error(\"You must specify your Jabber JID and Jabber password either \"\n-                     + \"in the Zulip configuration file or on the commandline\")\n+                     \"in the Zulip configuration file or on the commandline\")\n \n     zulipToJabber = ZulipToJabberBot(zulip.init_from_options(options, \"JabberMirror/\" + __version__))\n     # This won't work for open realms that don't have a consistent domain\n", "diff --git a/bots/zephyr_mirror_backend.py b/bots/zephyr_mirror_backend.py\nindex 0a31eb9d7d..386e078e82 100755\n--- a/bots/zephyr_mirror_backend.py\n+++ b/bots/zephyr_mirror_backend.py\n@@ -104,8 +104,8 @@ def unwrap_lines(body):\n     previous_line = lines[0]\n     for line in lines[1:]:\n         line = line.rstrip()\n-        if (re.match(r'^\\W', line, flags=re.UNICODE)\n-                and re.match(r'^\\W', previous_line, flags=re.UNICODE)):\n+        if (re.match(r'^\\W', line, flags=re.UNICODE) and\n+                re.match(r'^\\W', previous_line, flags=re.UNICODE)):\n             result += previous_line + \"\\n\"\n         elif (line == \"\" or\n               previous_line == \"\" or\n", "diff --git a/contrib_bots/bots/commute_bot/commute_bot.py b/contrib_bots/bots/commute_bot/commute_bot.py\nindex ad4e0c8e05..f184fe010b 100644\n--- a/contrib_bots/bots/commute_bot/commute_bot.py\n+++ b/contrib_bots/bots/commute_bot/commute_bot.py\n@@ -171,16 +171,16 @@ class CommuteHandler(object):\n \n         # determines if fare information is available\n         try:\n-            fare = ('Fare: ' + variable_list[\"fare\"][\"currency\"]\n-                    + variable_list[\"fare\"][\"text\"])\n+            fare = ('Fare: ' + variable_list[\"fare\"][\"currency\"] +\n+                    variable_list[\"fare\"][\"text\"])\n             output += '\\n' + fare\n         except (KeyError, IndexError):\n             pass\n \n         # determines if traffic duration information is available\n         try:\n-            traffic_duration = ('Duration in traffic: '\n-                                + variable_list[\"duration_in_traffic\"]\n+            traffic_duration = ('Duration in traffic: ' +\n+                                variable_list[\"duration_in_traffic\"]\n                                 [\"text\"])\n             output += '\\n' + traffic_duration\n         except (KeyError, IndexError):\n@@ -208,13 +208,13 @@ class CommuteHandler(object):\n                 return request.json()\n             else:\n                 self.send_info(message,\n-                               \"Something went wrong. Please try again.\"\n-                               + \" Error: {error_num}.\\n{error_text}\"\n+                               \"Something went wrong. Please try again.\" +\n+                               \" Error: {error_num}.\\n{error_text}\"\n                                .format(error_num=request.status_code,\n                                        error_text=request.text), client)\n                 return\n-        r = requests.get('https://maps.googleapis.com/maps/api/'\n-                         + 'distancematrix/json', params=params)\n+        r = requests.get('https://maps.googleapis.com/maps/api/' +\n+                         'distancematrix/json', params=params)\n         result = validate_requests(r)\n         return result\n \n", "diff --git a/contrib_bots/bots/foursquare/foursquare.py b/contrib_bots/bots/foursquare/foursquare.py\nindex c70d1154cb..22ce9248b1 100644\n--- a/contrib_bots/bots/foursquare/foursquare.py\n+++ b/contrib_bots/bots/foursquare/foursquare.py\n@@ -120,9 +120,9 @@ Example Inputs:\n             return\n \n         if received_json['meta']['code'] == 200:\n-            response_msg = ('Food nearby ' + params['near']\n-                            + ' coming right up:\\n'\n-                            + self.format_json(received_json['response']['venues']))\n+            response_msg = ('Food nearby ' + params['near'] +\n+                            ' coming right up:\\n' +\n+                            self.format_json(received_json['response']['venues']))\n             self.send_info(message, response_msg, client)\n             return\n \n", "diff --git a/scripts/lib/zulip_tools.py b/scripts/lib/zulip_tools.py\nindex 0499461196..e10a26f225 100755\n--- a/scripts/lib/zulip_tools.py\n+++ b/scripts/lib/zulip_tools.py\n@@ -67,18 +67,18 @@ def get_deployment_lock(error_rerun_script):\n             got_lock = True\n             break\n         except OSError:\n-            print(WARNING + \"Another deployment in progress; waiting for lock... \"\n-                  + \"(If no deployment is running, rmdir %s)\" % (LOCK_DIR,) + ENDC)\n+            print(WARNING + \"Another deployment in progress; waiting for lock... \" +\n+                  \"(If no deployment is running, rmdir %s)\" % (LOCK_DIR,) + ENDC)\n             sys.stdout.flush()\n             time.sleep(3)\n \n     if not got_lock:\n-        print(FAIL + \"Deployment already in progress.  Please run\\n\"\n-              + \"  %s\\n\" % (error_rerun_script,)\n-              + \"manually when the previous deployment finishes, or run\\n\"\n-              + \"  rmdir %s\\n\"  % (LOCK_DIR,)\n-              + \"if the previous deployment crashed.\"\n-              + ENDC)\n+        print(FAIL + \"Deployment already in progress.  Please run\\n\" +\n+              \"  %s\\n\" % (error_rerun_script,) +\n+              \"manually when the previous deployment finishes, or run\\n\" +\n+              \"  rmdir %s\\n\"  % (LOCK_DIR,) +\n+              \"if the previous deployment crashed.\" +\n+              ENDC)\n         sys.exit(1)\n \n def release_deployment_lock():\n@@ -98,9 +98,9 @@ def run(args, **kwargs):\n         subprocess.check_call(args, **kwargs)\n     except subprocess.CalledProcessError:\n         print()\n-        print(WHITEONRED + \"Error running a subcommand of %s: %s\" % (sys.argv[0], \" \".join(args))\n-              + ENDC)\n-        print(WHITEONRED + \"Actual error output for the subcommand is just above this.\"\n-              + ENDC)\n+        print(WHITEONRED + \"Error running a subcommand of %s: %s\" % (sys.argv[0], \" \".join(args)) +\n+              ENDC)\n+        print(WHITEONRED + \"Actual error output for the subcommand is just above this.\" +\n+              ENDC)\n         print()\n         raise\n", "diff --git a/tools/check-templates b/tools/check-templates\nindex 628ffff14c..ac41931bb3 100755\n--- a/tools/check-templates\n+++ b/tools/check-templates\n@@ -83,14 +83,14 @@ def check_html_templates(templates, modified_only, all_dups):\n                               if ids in IGNORE_IDS and len(fns) > 1}\n \n         for ids, fns in ignorable_ids_dict.items():\n-            logging.warning(\"Duplicate ID(s) detected :Id '\" + ids\n-                            + \"' present at following files:\")\n+            logging.warning(\"Duplicate ID(s) detected :Id '\" + ids +\n+                            \"' present at following files:\")\n             for fn in fns:\n                 print(fn)\n \n     for ids, fns in bad_ids_dict.items():\n-        logging.error(\"Duplicate ID(s) detected :Id '\" + ids\n-                      + \"' present at following files:\")\n+        logging.error(\"Duplicate ID(s) detected :Id '\" + ids +\n+                      \"' present at following files:\")\n         for fn in fns:\n             print(fn)\n \n", "diff --git a/tools/compile-handlebars-templates b/tools/compile-handlebars-templates\nindex d11dccaea0..cb5cce1e70 100755\n--- a/tools/compile-handlebars-templates\n+++ b/tools/compile-handlebars-templates\n@@ -24,10 +24,10 @@ def get_templates():\n \n def run():\n     # type: () -> None\n-    subprocess.check_call(['node', 'node_modules/.bin/handlebars']\n-                          + get_templates()\n-                          + ['--output', os.path.join(STATIC_PATH, 'templates/compiled.js'),\n-                             '--known', 'if,unless,each,with'])\n+    subprocess.check_call(['node', 'node_modules/.bin/handlebars'] +\n+                          get_templates() +\n+                          ['--output', os.path.join(STATIC_PATH, 'templates/compiled.js'),\n+                           '--known', 'if,unless,each,with'])\n \n def run_forever():\n     # type: () -> None\n", "diff --git a/tools/lint-all b/tools/lint-all\nindex 3ac2145666..12ac74b6c9 100755\n--- a/tools/lint-all\n+++ b/tools/lint-all\n@@ -87,7 +87,6 @@ def check_pep8(files):\n         # ignored. It either doesn't fit with the style of the project or should\n         # actually be cleaned up.\n         #\n-        'W503',\n         'E114', 'E115', 'E121', 'E123', 'E126', 'E226', 'E241', 'E261', 'E302',\n         'E305', 'E306', 'E401', 'E501', 'E702', 'E711', 'E712', 'E713', 'E714',\n         'E741',\n@@ -622,8 +621,8 @@ def run():\n             # type: () -> int\n             if len(by_lang['js']) == 0:\n                 return 0\n-            result = subprocess.call(['node', 'node_modules/.bin/eslint', '--quiet']\n-                                     + by_lang['js'])\n+            result = subprocess.call(['node', 'node_modules/.bin/eslint', '--quiet'] +\n+                                     by_lang['js'])\n             return result\n \n         @lint\n", "diff --git a/tools/minify-js b/tools/minify-js\nindex a679a8d8d8..046448c3e0 100755\n--- a/tools/minify-js\n+++ b/tools/minify-js\n@@ -109,8 +109,8 @@ for js_group, filespec in six.iteritems(JS_SPECS):\n                  for filename in filespec.get('minifed_source_filenames', [])]\n \n     out_file = os.path.join(MIN_DIR, os.path.basename(filespec['output_filename']))\n-    map_file = os.path.join(MAP_DIR, os.path.basename(filespec['output_filename'])\n-                            + '.map')\n+    map_file = os.path.join(MAP_DIR, os.path.basename(filespec['output_filename']) +\n+                            '.map')\n \n     if (not 'force_minify' in filespec) and \\\n        (prev_deploy and len(set(in_files) & changed_files) == 0):\n", "diff --git a/tools/update-prod-static b/tools/update-prod-static\nindex d730e50725..d1ff92c991 100755\n--- a/tools/update-prod-static\n+++ b/tools/update-prod-static\n@@ -32,8 +32,8 @@ fp = open('var/log/update-prod-static.log', 'w')\n setup_node_modules(npm_args=['--production'], stdout=fp, stderr=fp)\n \n # Compile Handlebars templates and minify JavaScript.\n-subprocess.check_call(['./tools/minify-js']\n-                      + (['--prev-deploy', prev_deploy] if prev_deploy else []),\n+subprocess.check_call(['./tools/minify-js'] +\n+                      (['--prev-deploy', prev_deploy] if prev_deploy else []),\n                       stdout=fp, stderr=fp)\n \n # Build emoji\n", "diff --git a/zerver/decorator.py b/zerver/decorator.py\nindex 9bddf430f3..62e8d423e4 100644\n--- a/zerver/decorator.py\n+++ b/zerver/decorator.py\n@@ -94,9 +94,9 @@ def require_post(func):\n     @wraps(func)\n     def wrapper(request, *args, **kwargs):\n         # type: (HttpRequest, *Any, **Any) -> HttpResponse\n-        if (request.method != \"POST\"\n-            and not (request.method == \"SOCKET\"\n-                     and request.META['zulip.emulated_method'] == \"POST\")):\n+        if (request.method != \"POST\" and\n+            not (request.method == \"SOCKET\" and\n+                 request.META['zulip.emulated_method'] == \"POST\")):\n             if request.method == \"SOCKET\":\n                 err_method = \"SOCKET/%s\" % (request.META['zulip.emulated_method'],)\n             else:\n@@ -191,11 +191,11 @@ def validate_api_key(request, role, api_key, is_webhook=False):\n     except AttributeError:\n         # Deployment objects don't have realms\n         pass\n-    if (not check_subdomain(get_subdomain(request), profile.realm.subdomain)\n+    if (not check_subdomain(get_subdomain(request), profile.realm.subdomain) and\n         # Allow access to localhost for Tornado\n-        and not (settings.RUNNING_INSIDE_TORNADO and\n-                 request.META[\"SERVER_NAME\"] == \"127.0.0.1\" and\n-                 request.META[\"REMOTE_ADDR\"] == \"127.0.0.1\")):\n+        not (settings.RUNNING_INSIDE_TORNADO and\n+             request.META[\"SERVER_NAME\"] == \"127.0.0.1\" and\n+             request.META[\"REMOTE_ADDR\"] == \"127.0.0.1\")):\n         logging.warning(\"User %s attempted to access API on wrong subdomain %s\" % (\n             profile.email, get_subdomain(request)))\n         raise JsonableError(_(\"Account is not associated with this subdomain\"))\n@@ -486,17 +486,17 @@ def is_local_addr(addr):\n # secret, and also the originating IP (for now).\n def authenticate_notify(request):\n     # type: (HttpRequest) -> bool\n-    return (is_local_addr(request.META['REMOTE_ADDR'])\n-            and request.POST.get('secret') == settings.SHARED_SECRET)\n+    return (is_local_addr(request.META['REMOTE_ADDR']) and\n+            request.POST.get('secret') == settings.SHARED_SECRET)\n \n def client_is_exempt_from_rate_limiting(request):\n     # type: (HttpRequest) -> bool\n \n     # Don't rate limit requests from Django that come from our own servers,\n     # and don't rate-limit dev instances\n-    return ((request.client and request.client.name.lower() == 'internal')\n-            and (is_local_addr(request.META['REMOTE_ADDR']) or\n-            settings.DEBUG_RATE_LIMITING))\n+    return ((request.client and request.client.name.lower() == 'internal') and\n+            (is_local_addr(request.META['REMOTE_ADDR']) or\n+             settings.DEBUG_RATE_LIMITING))\n \n def internal_notify_view(view_func):\n     # type: (ViewFuncT) -> ViewFuncT\n", "diff --git a/zerver/lib/actions.py b/zerver/lib/actions.py\nindex 02ce2e84e0..7d7b1d2daf 100644\n--- a/zerver/lib/actions.py\n+++ b/zerver/lib/actions.py\n@@ -122,8 +122,8 @@ def log_event(event):\n         os.mkdir(settings.EVENT_LOG_DIR)\n \n     template = os.path.join(settings.EVENT_LOG_DIR,\n-                            '%s.' + platform.node()\n-                            + datetime.datetime.now().strftime('.%Y-%m-%d'))\n+                            '%s.' + platform.node() +\n+                            datetime.datetime.now().strftime('.%Y-%m-%d'))\n \n     with lockfile(template % ('lock',)):\n         with open(template % ('events',), 'a') as log:\n@@ -1128,8 +1128,8 @@ def recipient_for_emails(emails, not_forged_mirror_message,\n \n     # If the private message is just between the sender and\n     # another person, force it to be a personal internally\n-    if (len(recipient_profile_ids) == 2\n-            and sender.id in recipient_profile_ids):\n+    if (len(recipient_profile_ids) == 2 and\n+            sender.id in recipient_profile_ids):\n         recipient_profile_ids.remove(sender.id)\n \n     if len(recipient_profile_ids) > 1:\n", "diff --git a/zerver/lib/migrate.py b/zerver/lib/migrate.py\nindex 63e39a608e..2d259f486a 100644\n--- a/zerver/lib/migrate.py\n+++ b/zerver/lib/migrate.py\n@@ -55,12 +55,12 @@ def add_bool_columns(db, table, cols):\n     coltype = 'boolean'\n     val = 'false'\n \n-    stmt = (('ALTER TABLE %s ' % (table,))\n-            + ', '.join(['ADD %s %s' % (col, coltype) for col in cols]))\n+    stmt = (('ALTER TABLE %s ' % (table,)) +\n+            ', '.join(['ADD %s %s' % (col, coltype) for col in cols]))\n     timed_ddl(db, stmt)\n \n-    stmt = (('ALTER TABLE %s ' % (table,))\n-            + ', '.join(['ALTER %s SET DEFAULT %s' % (col, val) for col in cols]))\n+    stmt = (('ALTER TABLE %s ' % (table,)) +\n+            ', '.join(['ALTER %s SET DEFAULT %s' % (col, val) for col in cols]))\n     timed_ddl(db, stmt)\n \n     vals = [val] * len(cols)\n@@ -69,8 +69,8 @@ def add_bool_columns(db, table, cols):\n     stmt = 'ANALYZE %s' % (table,)\n     timed_ddl(db, stmt)\n \n-    stmt = (('ALTER TABLE %s ' % (table,))\n-            + ', '.join(['ALTER %s SET NOT NULL' % (col,) for col in cols]))\n+    stmt = (('ALTER TABLE %s ' % (table,)) +\n+            ', '.join(['ALTER %s SET NOT NULL' % (col,) for col in cols]))\n     timed_ddl(db, stmt)\n \n def create_index_if_nonexistant(db, table, col, index):\n", "diff --git a/zerver/lib/rest.py b/zerver/lib/rest.py\nindex 54dbde6363..c346425533 100644\n--- a/zerver/lib/rest.py\n+++ b/zerver/lib/rest.py\n@@ -84,8 +84,8 @@ def rest_dispatch(request, **kwargs):\n \n         # for some special views (e.g. serving a file that has been\n         # uploaded), we support using the same url for web and API clients.\n-        if ('override_api_url_scheme' in view_flags\n-                and request.META.get('HTTP_AUTHORIZATION', None) is not None):\n+        if ('override_api_url_scheme' in view_flags and\n+                request.META.get('HTTP_AUTHORIZATION', None) is not None):\n             # This request  API based authentication.\n             target_function = authenticated_rest_api_view()(target_function)\n         # /json views (web client) validate with a session token (cookie)\n", "diff --git a/zerver/middleware.py b/zerver/middleware.py\nindex 600bef1fdf..bd80f38344 100644\n--- a/zerver/middleware.py\n+++ b/zerver/middleware.py\n@@ -350,8 +350,8 @@ class SessionHostDomainMiddleware(SessionMiddleware):\n     def process_response(self, request, response):\n         # type: (HttpRequest, HttpResponse) -> HttpResponse\n         if settings.REALMS_HAVE_SUBDOMAINS:\n-            if (not request.path.startswith(\"/static/\") and not request.path.startswith(\"/api/\")\n-                    and not request.path.startswith(\"/json/\")):\n+            if (not request.path.startswith(\"/static/\") and not request.path.startswith(\"/api/\") and\n+                    not request.path.startswith(\"/json/\")):\n                 subdomain = get_subdomain(request)\n                 if (request.get_host() == \"127.0.0.1:9991\" or request.get_host() == \"localhost:9991\"):\n                     return redirect(\"%s%s\" % (settings.EXTERNAL_URI_SCHEME,\n", "diff --git a/zerver/tests/test_narrow.py b/zerver/tests/test_narrow.py\nindex ebada777b7..4f133d2618 100644\n--- a/zerver/tests/test_narrow.py\n+++ b/zerver/tests/test_narrow.py\n@@ -470,8 +470,8 @@ class GetOldMessagesTest(ZulipTestCase):\n             return ','.join(sorted(set([r['email'] for r in dr] + [me])))\n \n         personals = [m for m in get_user_messages(get_user_profile_by_email(me))\n-                     if m.recipient.type == Recipient.PERSONAL\n-                     or m.recipient.type == Recipient.HUDDLE]\n+                     if m.recipient.type == Recipient.PERSONAL or\n+                     m.recipient.type == Recipient.HUDDLE]\n         if not personals:\n             # FIXME: This is bad.  We should use test data that is guaranteed\n             # to contain some personals for every user.  See #617.\n", "diff --git a/zerver/tornado/application.py b/zerver/tornado/application.py\nindex 274d3e9fd0..9ec71f8cff 100644\n--- a/zerver/tornado/application.py\n+++ b/zerver/tornado/application.py\n@@ -16,8 +16,8 @@ def create_tornado_application():\n             )\n \n     # Application is an instance of Django's standard wsgi handler.\n-    return tornado.web.Application([(url, AsyncDjangoHandler) for url in urls]\n-                                   + get_sockjs_router().urls,\n+    return tornado.web.Application(([(url, AsyncDjangoHandler) for url in urls] +\n+                                    get_sockjs_router().urls),\n                                    debug=settings.DEBUG,\n                                    # Disable Tornado's own request logging, since we have our own\n                                    log_function=lambda x: None)\n", "diff --git a/zerver/tornado/event_queue.py b/zerver/tornado/event_queue.py\nindex f8bf197693..a70831654a 100644\n--- a/zerver/tornado/event_queue.py\n+++ b/zerver/tornado/event_queue.py\n@@ -169,8 +169,8 @@ class ClientDescriptor(object):\n         if not hasattr(self, 'queue_timeout'):\n             self.queue_timeout = IDLE_EVENT_QUEUE_TIMEOUT_SECS\n \n-        return (self.current_handler_id is None\n-                and now - self.last_connection_time >= self.queue_timeout)\n+        return (self.current_handler_id is None and\n+                now - self.last_connection_time >= self.queue_timeout)\n \n     def connect_handler(self, handler_id, client_name):\n         # type: (int, Text) -> None\n@@ -408,8 +408,8 @@ def gc_event_queues():\n     # not have a current handler.\n     do_gc_event_queues(to_remove, affected_users, affected_realms)\n \n-    logging.info(('Tornado removed %d idle event queues owned by %d users in %.3fs.'\n-                  + '  Now %d active queues, %s')\n+    logging.info(('Tornado removed %d idle event queues owned by %d users in %.3fs.' +\n+                  '  Now %d active queues, %s')\n                  % (len(to_remove), len(affected_users), time.time() - start,\n                     len(clients), handler_stats_string()))\n     statsd.gauge('tornado.active_queues', len(clients))\n", "diff --git a/zerver/views/messages.py b/zerver/views/messages.py\nindex 776f162898..a26cc8326f 100644\n--- a/zerver/views/messages.py\n+++ b/zerver/views/messages.py\n@@ -373,9 +373,9 @@ def narrow_parameter(json):\n \n         # We have to support a legacy tuple format.\n         if isinstance(elem, list):\n-            if (len(elem) != 2\n-                or any(not isinstance(x, str) and not isinstance(x, Text)\n-                       for x in elem)):\n+            if (len(elem) != 2 or\n+                any(not isinstance(x, str) and not isinstance(x, Text)\n+                    for x in elem)):\n                 raise ValueError(\"element is not a string pair\")\n             return dict(operator=elem[0], operand=elem[1])\n \n", "diff --git a/zerver/views/streams.py b/zerver/views/streams.py\nindex 36f9535db9..983a2ae7a0 100644\n--- a/zerver/views/streams.py\n+++ b/zerver/views/streams.py\n@@ -121,8 +121,8 @@ def principal_to_user_profile(agent, principal):\n     except UserProfile.DoesNotExist:\n         principal_doesnt_exist = True\n \n-    if (principal_doesnt_exist\n-            or agent.realm != principal_user_profile.realm):\n+    if (principal_doesnt_exist or\n+            agent.realm != principal_user_profile.realm):\n         # We have to make sure we don't leak information about which users\n         # are registered for Zulip in a different realm.  We could do\n         # something a little more clever and check the domain part of the\n", "diff --git a/zproject/local_settings.py b/zproject/local_settings.py\nindex 0687906187..13b86fe564 100644\n--- a/zproject/local_settings.py\n+++ b/zproject/local_settings.py\n@@ -22,8 +22,8 @@ PRODUCTION = config_file.has_option('machine', 'deploy_type')\n # Zulip run by Zulip, Inc.  We will eventually be able to get rid of\n # them and just have the PRODUCTION flag, but we need them for now.\n ZULIP_COM_STAGING = PRODUCTION and config_file.get('machine', 'deploy_type') == 'zulip.com-staging'\n-ZULIP_COM = ((PRODUCTION and config_file.get('machine', 'deploy_type') == 'zulip.com-prod')\n-             or ZULIP_COM_STAGING)\n+ZULIP_COM = ((PRODUCTION and config_file.get('machine', 'deploy_type') == 'zulip.com-prod') or\n+             ZULIP_COM_STAGING)\n if not ZULIP_COM:\n     raise Exception(\"You should create your own local settings from prod_settings_template.\")\n \n"], "label": 0, "cve": "CVE-2017-0881", "rank": 37, "commit": "22d1aa396ba892f99d620ee516f2ed8ab5abc300", "cve_attention_tokens": []}
{"cve_desc": "Heap-based buffer overflow in the j2k_encode_entry function in Pillow 2.5.0 through 3.1.1 allows remote attackers to cause a denial of service (memory corruption) via a crafted Jpeg2000 file.", "commit_msg": "3.2.0-dev versioning\n\n", "diff": ["diff --git a/PIL/__init__.py b/PIL/__init__.py\nindex e251cfa1c..62386d059 100644\n--- a/PIL/__init__.py\n+++ b/PIL/__init__.py\n@@ -12,7 +12,7 @@\n # ;-)\n \n VERSION = '1.1.7'  # PIL version\n-PILLOW_VERSION = '3.1.0'  # Pillow\n+PILLOW_VERSION = '3.2.0.dev0'  # Pillow\n \n _plugins = ['BmpImagePlugin',\n             'BufrStubImagePlugin',\n", "diff --git a/_imaging.c b/_imaging.c\nindex 3f86938bc..de1fa5be5 100644\n--- a/_imaging.c\n+++ b/_imaging.c\n@@ -71,7 +71,7 @@\n  * See the README file for information on usage and redistribution.\n  */\n \n-#define PILLOW_VERSION \"3.1.0\"\n+#define PILLOW_VERSION \"3.2.0.dev0\"\n \n #include \"Python.h\"\n \n", "diff --git a/appveyor.yml b/appveyor.yml\nindex 749629356..6d858c615 100644\n--- a/appveyor.yml\n+++ b/appveyor.yml\n@@ -1,4 +1,4 @@\n-version: 3.1.0.{build}\n+version: 3.2.pre.{build}\n clone_folder: c:\\pillow\n init:\n - ECHO %PYTHON%\n", "diff --git a/setup.py b/setup.py\nindex f31a1468d..f669e2319 100644\n--- a/setup.py\n+++ b/setup.py\n@@ -90,7 +90,7 @@ except (ImportError, OSError):\n \n \n NAME = 'Pillow'\n-PILLOW_VERSION = '3.1.0'\n+PILLOW_VERSION = '3.2.0.dev0'\n TCL_ROOT = None\n JPEG_ROOT = None\n JPEG2K_ROOT = None\n"], "label": 0, "cve": "CVE-2016-3076", "rank": 32, "commit": "8d518a3f4d7d76769ac76f5ee31a946fe26a02d8", "cve_attention_tokens": ["jpeg"]}
{"cve_desc": "An issue was discovered in OpenEMR before 5.0.1 Patch 7. There is SQL Injection in the make_task function in /interface/forms/eye_mag/php/taskman_functions.php via /interface/forms/eye_mag/taskman.php.", "commit_msg": "calendar fixes and unserialize fixes (#2457)\n\n\n\n", "diff": ["diff --git a/interface/cmsportal/portal.inc.php b/interface/cmsportal/portal.inc.php\nindex e647e964a..7cf772758 100644\n--- a/interface/cmsportal/portal.inc.php\n+++ b/interface/cmsportal/portal.inc.php\n@@ -48,7 +48,7 @@ function cms_portal_call($args)\n \n     curl_close($phandle);\n   // With JSON-over-HTTP we would use json_decode($presult,TRUE) here.\n-    return unserialize($presult);\n+    return unserialize($presult, ['allowed_classes' => false]);\n }\n \n // Look up the OpenEMR patient matching this request. More or less than 1 is an error.\n", "diff --git a/interface/main/calendar/add_edit_event.php b/interface/main/calendar/add_edit_event.php\nindex 6bb6190d9..b724af4b8 100644\n--- a/interface/main/calendar/add_edit_event.php\n+++ b/interface/main/calendar/add_edit_event.php\n@@ -466,7 +466,7 @@ if (empty($collectthis)) {\n                         // get the original event's repeat specs\n                         $origEvent = sqlQuery(\"SELECT pc_recurrspec FROM openemr_postcalendar_events \".\n                         \" WHERE pc_aid = ? AND pc_multiple=?\", array($provider,$row['pc_multiple']));\n-                        $oldRecurrspec = unserialize($origEvent['pc_recurrspec']);\n+                        $oldRecurrspec = unserialize($origEvent['pc_recurrspec'], ['allowed_classes' => false]);\n                         $selected_date = date(\"Ymd\", strtotime($_POST['selected_date']));\n                         if ($oldRecurrspec['exdate'] != \"\") {\n                             $oldRecurrspec['exdate'] .= \",\".$selected_date;\n@@ -636,7 +636,7 @@ if (empty($collectthis)) {\n                 if ($_POST['recurr_affect'] == 'current') {\n                     // get the original event's repeat specs\n                     $origEvent = sqlQuery(\"SELECT pc_recurrspec FROM openemr_postcalendar_events WHERE pc_eid = ?\", array($eid));\n-                    $oldRecurrspec = unserialize($origEvent['pc_recurrspec']);\n+                    $oldRecurrspec = unserialize($origEvent['pc_recurrspec'], ['allowed_classes' => false]);\n                     $selected_date = date(\"Ymd\", strtotime($_POST['selected_date']));\n                     if ($oldRecurrspec['exdate'] != \"\") {\n                         $oldRecurrspec['exdate'] .= \",\".$selected_date;\n@@ -767,7 +767,7 @@ if (empty($collectthis)) {\n                     // get the original event's repeat specs\n                     $origEvent = sqlQuery(\"SELECT pc_recurrspec FROM openemr_postcalendar_events \".\n                     \" WHERE pc_aid <=> ? AND pc_multiple=?\", array($provider,$row['pc_multiple']));\n-                    $oldRecurrspec = unserialize($origEvent['pc_recurrspec']);\n+                    $oldRecurrspec = unserialize($origEvent['pc_recurrspec'], ['allowed_classes' => false]);\n                     $selected_date = date(\"Y-m-d\", strtotime($_POST['selected_date']));\n                     if ($oldRecurrspec['exdate'] != \"\") {\n                         $oldRecurrspec['exdate'] .= \",\".$selected_date;\n@@ -808,7 +808,7 @@ if (empty($collectthis)) {\n \n                 // get the original event's repeat specs\n                 $origEvent = sqlQuery(\"SELECT pc_recurrspec FROM openemr_postcalendar_events WHERE pc_eid = ?\", array($eid));\n-                $oldRecurrspec = unserialize($origEvent['pc_recurrspec']);\n+                $oldRecurrspec = unserialize($origEvent['pc_recurrspec'], ['allowed_classes' => false]);\n                 $selected_date = date(\"Ymd\", strtotime($_POST['selected_date']));\n                 if ($oldRecurrspec['exdate'] != \"\") {\n                     $oldRecurrspec['exdate'] .= \",\".$selected_date;\n@@ -924,7 +924,7 @@ if (empty($collectthis)) {\n         $multiple_value = $row['pc_multiple'];\n \n         // parse out the repeating data, if any\n-        $rspecs = unserialize($row['pc_recurrspec']); // extract recurring data\n+        $rspecs = unserialize($row['pc_recurrspec'], ['allowed_classes' => false]); // extract recurring data\n         $repeattype = $rspecs['event_repeat_freq_type'];\n         $repeatfreq = $rspecs['event_repeat_freq'];\n         $repeatexdate = $rspecs['exdate']; // repeating date exceptions\n", "diff --git a/interface/main/calendar/config.php b/interface/main/calendar/config.php\nindex 4f02f2530..ae883b8ec 100644\n--- a/interface/main/calendar/config.php\n+++ b/interface/main/calendar/config.php\n@@ -32,7 +32,6 @@ if (!$disable_utf8_flag) {\n \n $pnconfig['modname'] = \"PostCalendar\";\n $pnconfig['startpage'] = \"PostCalendar\";\n-$pnconfig['language'] = \"eng\";\n $pnconfig['dbtype'] = 'mysqli_mod';\n $pnconfig['dbtabletype'] = 'MyISAM';\n $pnconfig['dbhost'] = $host;\n@@ -42,49 +41,6 @@ $pnconfig['dbpass'] = $pass;\n $pnconfig['dbname'] = $dbase;\n $pnconfig['system'] = '0';\n $pnconfig['prefix'] = 'openemr';\n-$pnconfig['encoded'] = '0';\n-\n-\n-$pntable = array();\n-$session_info = $prefix . '_session_info';\n-$pntable['session_info'] = $session_info;\n-$pntable['session_info_column'] = array (\n-        'sessid'    => $session_info .\n-        '.pn_sessid', 'ipaddr'    => $session_info .\n-        '.pn_ipaddr','firstused' => $session_info .\n-        '.pn_firstused','lastused'  => $session_info .\n-        '.pn_lastused','uid'       => $session_info .\n-        '.pn_uid','vars'      => $session_info .\n-        '.pn_vars');\n-// ----------------------------------------------------------------------\n-// For debugging (Pablo Roca)\n-//\n-// $debug - debugger windows active\n-//          0 = No\n-//          1 = Yes\n-//\n-// $debug_sql - show SQL in lens debug\n-//          0 = No\n-//          1 = Yes\n-// ----------------------------------------------------------------------\n-global $pndebug;\n-$pndebug['debug']          = 0;\n-$pndebug['debug_sql']      = 0;\n-\n-// ----------------------------------------------------------------------\n-// You have finished configuring the database. Now you can start to\n-// change your site settings in the Administration Section.\n-//\n-// Thanks for choosing PostNuke.\n-// ----------------------------------------------------------------------\n-\n-// ----------------------------------------------------------------------\n-// if there is a personal_config.php in the folder where is config.php\n-// we add it. (This HAS to be at the end, after all initialization.)\n-// ----------------------------------------------------------------------\n-if (@file_exists(\"personal_config.php\")) {\n-    include(\"personal_config.php\");\n-}\n \n // ----------------------------------------------------------------------\n // Make config file backwards compatible (deprecated)\n", "diff --git a/interface/main/calendar/findfirstapp.php b/interface/main/calendar/findfirstapp.php\ndeleted file mode 100644\nindex 3d6b855a3..000000000\n--- a/interface/main/calendar/findfirstapp.php\n+++ /dev/null\n@@ -1,20 +0,0 @@\n-<?php\n-include_once(\"../../globals.php\");\n-include_once(\"$srcdir/calendar.inc\");\n-include_once(\"$srcdir/patient.inc\");\n-?>\n-<html>\n-<head>\n-\n-<link rel=\"stylesheet\" href=\"<?php echo $css_header;?>\" type=\"text/css\">\n-\n-</head>\n-<body bgcolor=\"#FFFFFF\" >\n-<form>\n-\n-<input type=submit value=\"<?php xl('Find', 'e'); ?>\" />\n-\n-</form>\n-\n-</body>\n-</html>\n", "diff --git a/interface/main/calendar/includes/pnAPI.php b/interface/main/calendar/includes/pnAPI.php\nindex b93e1843d..2c285e48f 100644\n--- a/interface/main/calendar/includes/pnAPI.php\n+++ b/interface/main/calendar/includes/pnAPI.php\n@@ -33,52 +33,26 @@\n  *        Patch for php 4.2.x or greater\n  */\n \n-if (phpversion() >= \"4.2.0\") {\n-    if (ini_get('register_globals') != 1) {\n-        $supers = array('_REQUEST',\n-                                '_ENV',\n-                                '_SERVER',\n-                                '_POST',\n-                                '_GET',\n-                                '_COOKIE',\n-                                '_SESSION',\n-                                '_FILES',\n-                                '_GLOBALS' );\n-\n-        foreach ($supers as $__s) {\n-            if ((isset($$__s) == true) && (is_array($$__s) == true)) {\n-                extract($$__s, EXTR_OVERWRITE);\n-            }\n+if (ini_get('register_globals') != 1) {\n+    $supers = array('_REQUEST',\n+                            '_ENV',\n+                            '_SERVER',\n+                            '_POST',\n+                            '_GET',\n+                            '_COOKIE',\n+                            '_SESSION',\n+                            '_FILES',\n+                            '_GLOBALS' );\n+\n+    foreach ($supers as $__s) {\n+        if ((isset($$__s) == true) && (is_array($$__s) == true)) {\n+            extract($$__s, EXTR_OVERWRITE);\n         }\n-\n-        unset($supers);\n     }\n-} else {\n-    if (ini_get('register_globals') != 1) {\n-        $supers = array('HTTP_POST_VARS',\n-                                'HTTP_GET_VARS',\n-                                'HTTP_COOKIE_VARS',\n-                                'GLOBALS',\n-                                'HTTP_SESSION_VARS',\n-                                'HTTP_SERVER_VARS',\n-                                'HTTP_ENV_VARS'\n-                                 );\n-\n-        foreach ($supers as $__s) {\n-            if ((isset($$__s) == true) && (is_array($$__s) == true)) {\n-                extract($$__s, EXTR_OVERWRITE);\n-            }\n-        }\n \n-        unset($supers);\n-    }\n+    unset($supers);\n }\n \n-/*\n- * Yes/no integer\n- */\n-define('_PNYES', 1);\n-define('_PNNO', 0);\n \n /*\n  * State of modules\n@@ -89,12 +63,6 @@ define('_PNMODULE_STATE_ACTIVE', 3);\n define('_PNMODULE_STATE_MISSING', 4);\n define('_PNMODULE_STATE_UPGRADED', 5);\n \n-/*\n- * 'All' and 'unregistered' for user and group permissions\n- */\n-define('_PNPERMS_ALL', '-1');\n-define('_PNPERMS_UNREGISTERED', '0');\n-\n /*\n  * Core version informations - should be upgraded on each release for\n  * better control on config settings\n@@ -153,7 +121,6 @@ function pnConfigInit()\n         $dbresult->MoveNext();\n         if (($k != 'dbtype') && ($k != 'dbhost') && ($k != 'dbuname') && ($k != 'dbpass')\n                 && ($k != 'dbname') && ($k != 'system') && ($k != 'prefix') && ($k != 'encoded')) {\n-            $v =@unserialize($v);\n             $pnconfig[$k] = $v;\n         }\n     }\n@@ -208,7 +175,7 @@ function pnConfigGetVar($name)\n          * Get data\n          */\n         list ($result) = $dbresult->fields;\n-        $result = unserialize($result);\n+        $result = unserialize($result, ['allowed_classes' => false]);\n \n         /*\n          * Some caching\n@@ -224,116 +191,6 @@ function pnConfigGetVar($name)\n     return $result;\n }\n \n-/**\n- * set a configuration variable\n- * @param name the name of the variable\n- * @param value the value of the variable\n- * @returns bool\n- * @return true on success, false on failure\n- */\n-function pnConfigSetVar($name, $value)\n-{\n-    /*\n-     * The database parameter are not allowed to change\n-     */\n-    if (empty($name) || ($name == 'dbtype') || ($name == 'dbhost') || ($name == 'dbuname') || ($name == 'dbpass')\n-            || ($name == 'dbname') || ($name == 'system') || ($name == 'prefix') || ($name == 'encoded')) {\n-        return false;\n-    }\n-\n-    /*\n-     * Test on missing record\n-     *\n-     * Also solve SF-bug #580951\n-     */\n-    $must_insert = true;\n-    global $pnconfig;\n-    foreach ($pnconfig as $k => $v) {\n-        /*\n-         * Test if the key name is in the array\n-         */\n-        if ($k == $name) {\n-            /*\n-             * Set flag\n-             */\n-            $must_insert = false;\n-            /*\n-             * Test on change. If not, just quit now\n-             */\n-            if ($v == $value) {\n-                return true;\n-            }\n-\n-            /*\n-             * End loop after success\n-             */\n-            break;\n-        }\n-    }\n-\n-    /*\n-     * Fetch base data\n-     */\n-    list($dbconn) = pnDBGetConn();\n-    $pntable = pnDBGetTables();\n-    $table = $pntable['module_vars'];\n-    $columns = &$pntable['module_vars_column'];\n-\n-    /*\n-     * Update the table\n-     */\n-    if ($must_insert) {\n-        /*\n-         * Insert\n-         */\n-        $query = \"INSERT INTO $table\n-                  ($columns[modname],\n-                   $columns[name],\n-                   $columns[value])\n-                  VALUES ('\" . pnVarPrepForStore(_PN_CONFIG_MODULE) . \"',\n-                          '\" . pnVarPrepForStore($name) . \"',\n-                          '\" . pnVarPrepForStore(serialize($value)). \"')\";\n-    } else {\n-        /*\n-         * Update\n-         */\n-         $query = \"UPDATE $table\n-                   SET $columns[value]='\" . pnVarPrepForStore(serialize($value)) . \"'\n-                   WHERE $columns[modname]='\" . pnVarPrepForStore(_PN_CONFIG_MODULE) . \"'\n-                   AND $columns[name]='\" . pnVarPrepForStore($name) . \"'\";\n-    }\n-\n-    $dbconn->Execute($query);\n-    if ($dbconn->ErrorNo() != 0) {\n-        return false;\n-    }\n-\n-    /*\n-     * Update my vars\n-     */\n-    $pnconfig[$name] = $value;\n-\n-    return true;\n-}\n-\n-\n-/**\n- * delete a configuration variable\n- * @param name the name of the variable\n- * @returns bool\n- * @return true on success, false on failure\n- */\n-function pnConfigDelVar($name)\n-{\n-    global $pnconfig;\n-\n-    if (empty($name)) {\n-        return false;\n-    }\n-\n-    // Don't allow deleting at current\n-    return false;\n-}\n \n /**\n  * Initialise PostNuke\n@@ -344,12 +201,6 @@ function pnConfigDelVar($name)\n  */\n function pnInit()\n {\n-    // proper error_repoting\n-    // e_all for development\n-    // error_reporting(E_ALL);\n-    // without warnings and notices for release\n-    error_reporting(E_ALL & ~E_NOTICE & ~E_WARNING & ~E_DEPRECATED);\n-\n     // Hack for some weird PHP systems that should have the\n     // LC_* constants defined, but don't\n     if (!defined('LC_TIME')) {\n@@ -363,132 +214,31 @@ function pnInit()\n \n     require_once ADODB_DIR . '/adodb.inc.php';\n \n-    // Temporary fix for hacking the hlpfile global\n-    // TODO - remove with pre-0.71 code\n-    global $hlpfile;\n-    $hlpfile = '';\n-\n     // Initialise and load configuration\n-    global $pnconfig, $pndebug;\n+    global $pnconfig;\n     $pnconfig = array();\n-    include 'config.php';\n-\n-\n-    // Set up multisites\n-    // added this @define for .71, ugly ?\n-    // i guess the E_ALL stuff.\n-    @define('WHERE_IS_PERSO', '');\n+    require 'config.php';\n \n     // Initialise and load pntables\n     global $pntable;\n     $pntable = array();\n-    // if a multisite has its own pntables.\n-    if (file_exists(WHERE_IS_PERSO.'pntables.php')) {\n-        include WHERE_IS_PERSO.'pntables.php';\n-    } else {\n-        require 'pntables.php';\n-    }\n-\n-    // Decode encoded DB parameters\n-    if ($pnconfig['encoded']) {\n-        $pnconfig['dbuname'] = base64_decode($pnconfig['dbuname']);\n-        $pnconfig['dbpass'] = base64_decode($pnconfig['dbpass']);\n-        $pnconfig['encoded'] = 0;\n-    }\n+    require 'pntables.php';\n \n     // Connect to database\n     if (!pnDBInit()) {\n         die('Database initialisation failed');\n     }\n \n-    // debugger if required\n-    if ($pndebug['debug']) {\n-        include_once 'includes/lensdebug.inc.php';\n-        global $dbg, $debug_sqlcalls;\n-        $dbg = new LensDebug();\n-        $debug_sqlcalls = 0;\n-    }\n-\n     // Build up old config array\n     pnConfigInit();\n \n-    // Set compression on if desired\n-    //\n-    if (pnConfigGetVar('UseCompression') == 1) {\n-        ob_start(\"ob_gzhandler\");\n-    }\n-\n-    // Other includes\n-    include 'includes/pnSession.php';\n-    include 'includes/pnUser.php';\n-\n-    // Start session\n-    if (!pnSessionSetup()) {\n-        die('Session setup failed');\n-    }\n-\n-    if (!pnSessionInit()) {\n-        die('Session initialisation failed');\n-    }\n-\n-    include 'includes/security.php';\n-\n-    // See if a language update is required\n-    $newlang = pnVarCleanFromInput('newlang');\n-    if (!empty($newlang)) {\n-        $lang = $newlang;\n-        pnSessionSetVar('lang', $newlang);\n-    } else {\n-        $lang = pnSessionGetVar('lang');\n-    }\n-\n-    // Load global language defines\n-    if (isset($lang) && file_exists('language/' . pnVarPrepForOS($lang) . '/global.php')) {\n-        $currentlang = $lang;\n-    } else {\n-        $currentlang = pnConfigGetVar('language');\n-        pnSessionSetVar('lang', $currentlang);\n-    }\n-\n-    include 'language/' . pnVarPrepForOS($currentlang) . '/global.php';\n-\n-    include 'modules/NS-Languages/api.php';\n-\n-        // Cross-Site Scripting attack defense - Sent by larsneo\n-        // some syntax checking against injected javascript\n-\n-        $pnAntiCrackerMode = pnConfigGetVar('pnAntiCracker');\n-\n-    if ($pnAntiCrackerMode == 1) {\n-        pnSecureInput();\n-    }\n-\n-    // Banner system\n-    include 'includes/pnBanners.php';\n-\n     // Other other includes\n-    include 'includes/advblocks.php';\n-    include 'includes/counter.php';\n-    include 'includes/pnHTML.php';\n-    include 'includes/pnMod.php';\n-    include 'includes/queryutil.php';\n-    include 'includes/xhtml.php';\n-    include 'includes/oldfuncs.php';\n-\n-    // Handle referer\n-    if (pnConfigGetVar('httpref') == 1) {\n-        include 'referer.php';\n-        httpreferer();\n-    }\n+    require 'includes/pnHTML.php';\n+    require 'includes/pnMod.php';\n \n     return true;\n }\n \n-function pninclude_once($file)\n-{\n-    include_once($file);\n-}\n-\n function pnDBInit()\n {\n     // Get database parameters\n@@ -546,10 +296,10 @@ function pnDBInit()\n     }\n \n     // Sync MySQL time zone with PHP time zone.\n-    $dbconn->Execute(\"SET time_zone = '\" . (new DateTime())->format(\"P\") . \"'\");\n+    $dbconn->Execute(\"SET time_zone = '\" . add_escape_custom((new DateTime())->format(\"P\")) . \"'\");\n \n     if ($GLOBALS['debug_ssl_mysql_connection']) {\n-        error_log(\"CHECK SSL CIPHER IN CALENDAR ADODB: \" . print_r($dbconn->Execute(\"SHOW STATUS LIKE 'Ssl_cipher';\")->fields, true));\n+        error_log(\"CHECK SSL CIPHER IN CALENDAR ADODB: \" . errorLogEscape(print_r($dbconn->Execute(\"SHOW STATUS LIKE 'Ssl_cipher';\")->fields, true)));\n     }\n \n     return true;\n@@ -622,10 +372,6 @@ function pnVarCleanFromInput()\n             continue;\n         }\n \n-        if (!pnSecAuthAction(0, '::', '::', ACCESS_ADMIN)) {\n-            $ourvar = preg_replace($search, $replace, $ourvar);\n-        }\n-\n         // Add to result array\n         array_push($resarray, $ourvar);\n     }\n@@ -638,23 +384,6 @@ function pnVarCleanFromInput()\n     }\n }\n \n-/**\n- * strip slashes\n- *\n- * stripslashes on multidimensional arrays.\n- * Used in conjunction with pnVarCleanFromInput\n- * @access private\n- * @param any variables or arrays to be stripslashed\n- */\n-function pnStripslashes(&$value)\n-{\n-    if (!is_array($value)) {\n-        $value = stripslashes($value);\n-    } else {\n-        array_walk($value, 'pnStripslashes');\n-    }\n-}\n-\n /**\n  * ready user output\n  * <br>\n@@ -733,18 +462,6 @@ function pnVarPrepHTMLDisplay()\n \n     if (!isset($allowedhtml)) {\n         $allowedhtml = array();\n-        foreach (pnConfigGetVar('AllowableHTML') as $k => $v) {\n-            switch ($v) {\n-                case 0:\n-                    break;\n-                case 1:\n-                    $allowedhtml[] = \"|<(/?$k)\\s*/?>|i\";\n-                    break;\n-                case 2:\n-                    $allowedhtml[] = \"|<(/?$k(\\s+.*?)?)>|i\";\n-                    break;\n-            }\n-        }\n     }\n \n     $resarray = array();\n@@ -807,9 +524,7 @@ function pnVarPrepForStore()\n     $resarray = array();\n     foreach (func_get_args() as $ourvar) {\n         // Prepare var\n-        if (!get_magic_quotes_runtime()) {\n-            $ourvar = add_escape_custom($ourvar);\n-        }\n+        $ourvar = add_escape_custom($ourvar);\n \n         // Add to array\n         array_push($resarray, $ourvar);\n@@ -853,63 +568,7 @@ function pnVarPrepForOS()\n         $ourvar = preg_replace($search, $replace, $ourvar);\n \n         // Prepare var\n-        if (!get_magic_quotes_runtime()) {\n-            $ourvar = addslashes($ourvar);\n-        }\n-\n-        // Add to array\n-        array_push($resarray, $ourvar);\n-    }\n-\n-    // Return vars\n-    if (func_num_args() == 1) {\n-        return $resarray[0];\n-    } else {\n-        return $resarray;\n-    }\n-}\n-\n-/**\n- * remove censored words\n- */\n-function pnVarCensor()\n-{\n-    static $docensor;\n-    if (!isset($docensor)) {\n-        $docensor = pnConfigGetVar('CensorMode');\n-    }\n-\n-    static $search = array();\n-    if (empty($search)) {\n-        $repsearch = array('/o/i',\n-                           '/e/i',\n-                           '/a/i',\n-                           '/i/i');\n-        $repreplace = array('0',\n-                            '3',\n-                            '@',\n-                            '1');\n-        $censoredwords = pnConfigGetVar('CensorList');\n-        foreach ($censoredwords as $censoredword) {\n-            // Simple word\n-            $search[] = \"/\\b$censoredword\\b/i\";\n-\n-            // Common replacements\n-            $mungedword = preg_replace($repsearch, $repreplace, $censoredword);\n-            if ($mungedword != $censoredword) {\n-                $search[] = \"/\\b$mungedword\\b/\";\n-            }\n-        }\n-    }\n-\n-    $replace = pnConfigGetVar('CensorReplace');\n-\n-    $resarray = array();\n-    foreach (func_get_args() as $ourvar) {\n-        if ($docensor) {\n-            // Parse out nasty words\n-            $ourvar = preg_replace($search, $replace, $ourvar);\n-        }\n+        $ourvar = addslashes($ourvar);\n \n         // Add to array\n         array_push($resarray, $ourvar);\n@@ -923,158 +582,6 @@ function pnVarCensor()\n     }\n }\n \n-/**\n- * validate a user variable\n- * @access public\n- * @author Damien Bonvillain\n- * @author Gregor J. Rothfuss\n- * @since 1.23 - 2002/02/01\n- * @param var the variable to validate\n- * @param type the type of the validation to perform\n- * @param args optional array with validation-specific settings\n- * @returns bool\n- * @return true if the validation was successful, false otherwise\n- */\n-function pnVarValidate($var, $type, $args = 0)\n-{\n-    switch ($type) {\n-        case 'email':\n-            // all characters must be 7 bit ascii\n-            $length = strlen($var);\n-            $idx = 0;\n-            while ($length--) {\n-                $c = $var[$idx++];\n-                if (ord($c) > 127) {\n-                    return false;\n-                }\n-            }\n-\n-            $regexp = '/^(?:[^\\s\\000-\\037\\177\\(\\)<>@,;:\\\\\"\\[\\]]\\.?)+@(?:[^\\s\\000-\\037\\177\\(\\)<>@,;:\\\\\\\"\\[\\]]\\.?)+\\.[a-z]{2,6}$/Ui';\n-            if (preg_match($regexp, $var)) {\n-                return true;\n-            } else {\n-                return false;\n-            }\n-            break;\n-\n-        case 'url':\n-             // all characters must be 7 bit ascii\n-             $length = strlen($var);\n-             $idx = 0;\n-            while ($length--) {\n-                $c = $var[$idx++];\n-                if (ord($c) > 127) {\n-                    return false;\n-                }\n-            }\n-\n-                $regexp = '/^([!\\$\\046-\\073=\\077-\\132_\\141-\\172~]|(?:%[a-f0-9]{2}))+$/i';\n-            if (!preg_match($regexp, $var)) {\n-                return false;\n-            }\n-\n-                $url_array = @parse_url($var);\n-            if (empty($url_array)) {\n-                return false;\n-            } else {\n-                return !empty($url_array['scheme']);\n-            }\n-            break;\n-    }\n-}\n-\n-/**\n- * check an assertion\n- * <br>\n- * Check an assertion to ensure that it is valid.  If not, then die\n- * @param assertion the assertion\n- * @param filename the filename the assertion occurs in\n- * @param line the line number the assertion occurs in\n- */\n-function pnAssert($assertion, $file = 'Unknown', $line = 'Unknown', $msg = '')\n-{\n-    if ($assertion) {\n-        return;\n-    }\n-\n-    // Assertion failed - log it\n-    if (!empty($msg)) {\n-        die(\"Assertion failed in $file at line $line - $msg\");\n-    } else {\n-        die(\"Assertion failed in $file at line $line\");\n-    }\n-}\n-\n-/**\n- * get status message from previous operation\n- * <br>\n- * Obtains any status message, and also destroys\n- * it from the session to prevent duplication\n- * @returns string\n- * @return the status message\n- */\n-function pnGetStatusMsg()\n-{\n-    $msg = pnSessionGetVar('statusmsg');\n-    pnSessionDelVar('statusmsg');\n-    $errmsg = pnSessionGetVar('errormsg');\n-    pnSessionDelVar('errormsg');\n-\n-    // Error message overrides status message\n-    if (!empty($errmsg)) {\n-        return $errmsg;\n-    }\n-\n-    return $msg;\n-}\n-\n-function pnThemeLoad($thistheme)\n-{\n-    static $loaded = 0;\n-\n-    if ($loaded) {\n-        return true;\n-    }\n-\n-    // Lots of nasty globals for back-compatability with older themes\n-    global $bgcolor1;\n-    global $bgcolor2;\n-    global $bgcolor3;\n-    global $bgcolor4;\n-    global $bgcolor5;\n-    global $sepcolor;\n-    global $textcolor1;\n-    global $textcolor2;\n-    global $postnuke_theme;\n-    global $thename;\n-\n-    // modification mouzaia .71\n-\n-    // is this really useful ?\n-/*  $themefile = 'themes/' . pnVarPrepForOS(pnUserGetTheme()) . '/theme.php';\n-    if (!file_exists($themefile)) {\n-        return false;\n-    }\n-*/\n-// eugenio themeover 20020413\n-    if (@file(WHERE_IS_PERSO.\"themes/$thistheme/theme.php\")) {\n-        include WHERE_IS_PERSO.\"themes/$thistheme/theme.php\";\n-    } else {\n-        include \"themes/$thistheme/theme.php\";\n-    }\n-\n-    // end of modification\n-        $loaded = 1;\n-        return true;\n-}\n-\n-function pnThemeGetVar($name)\n-{\n-    global $$name;\n-    if (isset($$name)) {\n-        return $$name;\n-    }\n-}\n \n /**\n  * get base URI for PostNuke\n@@ -1135,393 +642,3 @@ function pnGetBaseURL()\n \n     return \"$path/\";\n }\n-\n-/**\n- * Carry out a redirect\n- * @param the URL to redirect to\n- * @returns void\n- */\n-function pnRedirect($redirecturl)\n-{\n-    // Always close session before redirect\n-    if (function_exists('session_write_close')) {\n-        session_write_close();\n-    }\n-\n-    if (preg_match('!^http!', $redirecturl)) {\n-        // Absolute URL - simple redirect\n-        Header(\"Location: $redirecturl\");\n-        return;\n-    } else {\n-        // Removing leading slashes from redirect url\n-        $redirecturl = preg_replace('!^/*!', '', $redirecturl);\n-\n-        // Get base URL\n-        $baseurl = pnGetBaseURL();\n-\n-        Header(\"Location: $baseurl$redirecturl\");\n-    }\n-}\n-\n-/**\n- * check to see if this is a local referral\n- * @returns bool\n- * @return true if locally referred, false if not\n- */\n-function pnLocalReferer()\n-{\n-    global $HTTP_SERVER_VARS;\n-\n-    if (empty($HTTP_SERVER_VARS['HTTP_HOST'])) {\n-        $server = getenv('HTTP_HOST');\n-    } else {\n-        $server = $HTTP_SERVER_VARS['HTTP_HOST'];\n-    }\n-\n-    if (empty($HTTP_SERVER_VARS['HTTP_REFERER'])) {\n-        $referer = getenv('HTTP_REFERER');\n-    } else {\n-        $referer = $HTTP_SERVER_VARS['HTTP_REFERER'];\n-    }\n-\n-    if (empty($referer) || preg_match(\"!^http://$server/!\", $referer)) {\n-        return true;\n-    } else {\n-        return false;\n-    }\n-}\n-\n-// Hack - we need this for themes, but will get rid of it soon\n-if (!function_exists('GetUserTime')) {\n-    function GetUserTime($time)\n-    {\n-        if (pnUserLoggedIn()) {\n-            $time += (pnUserGetVar('timezone_offset') - pnConfigGetVar('timezone_offset')) * 3600;\n-        }\n-\n-        return($time);\n-    }\n-}\n-\n-/**\n- * send an email\n- * @param to - recipient of the email\n- * @param subject - title of the email\n- * @param message - body of the email\n- * @param headers - extra headers for the email\n- * @param debug - if 1, echo mail content\n- * @returns bool\n- * @return true if the email was sent, false if not\n- */\n-function pnMail($to, $subject, $message, $headers, $debug = 0)\n-{\n-    // Language translations\n-    switch (pnUserGetLang()) {\n-        case 'rus':\n-            if (!empty($headers)) {\n-                $headers .= \"\\n\";\n-            }\n-\n-            $headers .= \"Content-Type: text/plain; charset=koi8-r\";\n-            $subject = convert_cyr_string($subject, \"w\", \"k\");\n-            $message = convert_cyr_string($message, \"w\", \"k\");\n-            $headers = convert_cyr_string($headers, \"w\", \"k\");\n-            break;\n-    }\n-\n-    // Debug\n-    if ($debug) {\n-        echo \"Mail To: \".$to.\"<br>\";\n-        echo \"Mail Subject: \".$subject.\"<br>\";\n-        echo \"Mail Message: \".$message.\"<br>\";\n-        echo \"Mail Headers: \".$headers.\"<br>\";\n-    }\n-\n-    // Mail message\n-    // do not display error messages [class007]\n-    $return = @mail($to, $subject, $message, $headers);\n-    return $return;\n-}\n-\n-/* Protects better diverse attempts of Cross-Site Scripting\n-   attacks, thanks to webmedic, Timax, larsneo.\n- */\n-\n-function pnSecureInput()\n-{\n-\n-/*      Lets validate the current php version and set globals\n-        accordingly.\n-        Do not change this value unless you know what you are\n-        doing you have been warned!\n- */\n-\n-//require('includes/htmlfilter.inc');\n-\n-    if (phpversion() >= \"4.2.0\") {\n-        $HTTP_GET_VARS          = $_GET;\n-        $HTTP_POST_VARS         = $_POST;\n-        $HTTP_COOKIE_VARS       = $_COOKIE;\n-    } else {\n-        global $HTTP_GET_VARS, $HTTP_POST_VARS, $HTTP_COOKIE_VARS;\n-    }\n-\n-// Cross-Site Scripting attack defense - Sent by larsneo\n-// some syntax checking against injected javascript\n-// extended by Neo\n-\n-    if (count($HTTP_GET_VARS) > 0) {\n-        /*        Lets now sanitize the GET vars\n-         */\n-\n-\n-        foreach ($HTTP_GET_VARS as $secvalue) {\n-            if (!is_array($secvalue)) {\n-                if ((preg_match(\"/<[^>]*script*\\\"?[^>]*>/i\", $secvalue)) ||\n-                        (preg_match(\"/.*[[:space:]](or|and)[[:space:]].*(=|like).*/i\", $secvalue)) ||\n-                        (preg_match(\"/<[^>]*object*\\\"?[^>]*>/i\", $secvalue)) ||\n-                        (preg_match(\"/<[^>]*iframe*\\\"?[^>]*>/i\", $secvalue)) ||\n-                        (preg_match(\"/<[^>]*applet*\\\"?[^>]*>/i\", $secvalue)) ||\n-                        (preg_match(\"/<[^>]*meta*\\\"?[^>]*>/i\", $secvalue)) ||\n-                        (preg_match(\"/<[^>]*style*\\\"?[^>]*>/i\", $secvalue)) ||\n-                        (preg_match(\"/<[^>]*form*\\\"?[^>]*>/i\", $secvalue)) ||\n-                        (preg_match(\"/<[^>]*window.*\\\"?[^>]*>/i\", $secvalue)) ||\n-                        (preg_match(\"/<[^>]*alert*\\\"?[^>]*>/i\", $secvalue)) ||\n-                        (preg_match(\"/<[^>]*img*\\\"?[^>]*>/i\", $secvalue)) ||\n-                        (preg_match(\"/<[^>]*document.*\\\"?[^>]*>/i\", $secvalue)) ||\n-                        (preg_match(\"/<[^>]*cookie*\\\"?[^>]*>/i\", $secvalue)) ||\n-                        (preg_match(\"/\\\"/i\", $secvalue))) {\n-                        //pnMailHackAttempt(__FILE__,__LINE__,'pnSecurity Alert','Intrusion detection.');\n-                        //Header(\"Location: index.php\");\n-                }\n-            }\n-        }\n-    }\n-\n-/*        Lets now sanitize the POST vars\n- */\n-\n-    if (count($HTTP_POST_VARS) > 0) {\n-        foreach ($HTTP_POST_VARS as $secvalue) {\n-            if (!is_array($secvalue)) {\n-                if ((preg_match(\"/<[^>]*script*\\\"?[^>]*>/i\", $secvalue)) ||\n-                        (preg_match(\"/<[^>]*object*\\\"?[^>]*>/i\", $secvalue)) ||\n-                        (preg_match(\"/<[^>]*iframe*\\\"?[^>]*>/i\", $secvalue)) ||\n-                        (preg_match(\"/<[^>]*applet*\\\"?[^>]*>/i\", $secvalue)) ||\n-                        (preg_match(\"/<[^>]*window.*\\\"?[^>]*>/i\", $secvalue)) ||\n-                        (preg_match(\"/<[^>]*alert*\\\"?[^>]*>/i\", $secvalue)) ||\n-                        (preg_match(\"/<[^>]*document.*\\\"?[^>]*>/i\", $secvalue)) ||\n-                        (preg_match(\"/<[^>]*cookie*\\\"?[^>]*>/i\", $secvalue)) ||\n-                        (preg_match(\"/<[^>]*meta*\\\"?[^>]*>/i\", $secvalue))\n-                        ) {\n-                        //pnMailHackAttempt(__FILE__,__LINE__,'pnSecurity Alert','Intrusion detection.');\n-                        //Header(\"Location: index.php\");\n-                }\n-            }\n-        }\n-    }\n-\n-/*        Lets now sanitize the COOKIE vars\n- */\n-\n-    if (count($HTTP_COOKIE_VARS) > 0) {\n-        foreach ($HTTP_COOKIE_VARS as $secvalue) {\n-            if (!is_array($secvalue)) {\n-                if ((preg_match(\"/<[^>]*script*\\\"?[^>]*>/i\", $secvalue)) ||\n-                        (preg_match(\"/.*[[:space:]](or|and)[[:space:]].*(=|like).*/i\", $secvalue)) ||\n-                        (preg_match(\"/<[^>]*object*\\\"?[^>]*>/i\", $secvalue)) ||\n-                        (preg_match(\"/<[^>]*iframe*\\\"?[^>]*>/i\", $secvalue)) ||\n-                        (preg_match(\"/<[^>]*applet*\\\"?[^>]*>/i\", $secvalue)) ||\n-                        (preg_match(\"/<[^>]*meta*\\\"?[^>]*>/i\", $secvalue)) ||\n-                        (preg_match(\"/<[^>]*style*\\\"?[^>]*>/i\", $secvalue)) ||\n-                        (preg_match(\"/<[^>]*form*\\\"?[^>]*>/i\", $secvalue)) ||\n-                        (preg_match(\"/<[^>]*window.*\\\"?[^>]*>/i\", $secvalue)) ||\n-                        (preg_match(\"/<[^>]*alert*\\\"?[^>]*>/i\", $secvalue)) ||\n-                        (preg_match(\"/<[^>]*document.*\\\"?[^>]*>/i\", $secvalue)) ||\n-                        (preg_match(\"/<[^>]*cookie*\\\"?[^>]*>/i\", $secvalue)) ||\n-                        (preg_match(\"/<[^>]*img*\\\"?[^>]*>/i\", $secvalue))\n-                        ) {\n-                        pnMailHackAttempt(__FILE__, __LINE__, 'pnSecurity Alert', 'Intrusion detection.');\n-                        //Header(\"Location: index.php\");\n-                }\n-            }\n-        }\n-    }\n-} # End of secure Input\n-\n-/*         Function that compares the current php version on the\n-        system with the target one\n- */\n-\n-// Deprecate function reverting to php detecion function\n-\n-function pnPhpVersionCheck($vercheck)\n-{\n-\n-    $minver = str_replace(\".\", \"\", $vercheck);\n-    $curver = str_replace(\".\", \"\", phpversion());\n-\n-    if ($curver >= $minver) {\n-        return true;\n-    } else {\n-        return false;\n-    }\n-}\n-\n-function pnMailHackAttempt(\n-    $detecting_file = \"(no filename available)\",\n-    $detecting_line = \"(no line number available)\",\n-    $hack_type = \"(no type given)\",\n-    $message = \"(no message given)\"\n-) {\n-\n-# Backwards compatibility fix with php 4.0.x and 4.1.x or greater Neo\n-\n-    if (phpversion() >= \"4.2.0\") {\n-        $_pv  = $_POST;\n-        $_gv  = $_GET;\n-        $_rv  = $_REQUEST;\n-        $_sv  = $_SERVER;\n-        $_ev  = $_ENV;\n-        $_cv  = $_COOKIE;\n-        $_fv  = $_FILES;\n-        $_snv = $_SESSION;\n-    } else {\n-        global $HTTP_POST_VARS, $HTTP_GET_VARS, $HTTP_SERVER_VARS, $HTTP_ENV_VARS, $HTTP_COOKIE_VARS, $HTTP_POST_FILES, $HTTP_SESSION_VARS;\n-\n-        $_pv  = $HTTP_POST_VARS;\n-        $_gv  = $HTTP_GET_VARS;\n-        $_rv  = array();\n-        $_sv  = $HTTP_SERVER_VARS;\n-        $_ev  = $HTTP_ENV_VARS;\n-        $_cv  = $HTTP_COOKIE_VARS;\n-        $_fv  = $HTTP_POST_FILES;\n-        $_snv = $HTTP_SESSION_VARS;\n-    }\n-\n-        $output         =        \"Attention site admin of \".pnConfigGetVar('sitename').\",\\n\";\n-        $output        .=        \"On \".ml_ftime(_DATEBRIEF, ( GetUserTime(time()) ));\n-        $output        .=        \" at \". ml_ftime(_TIMEBRIEF, ( GetUserTime(time()) ));\n-        $output        .=        \" the Postnuke code has detected that somebody tried to\"\n-                           .\" send information to your site that may have been intended\"\n-                           .\" as a hack. Do not panic, it may be harmless: maybe this\"\n-                           .\" detection was triggered by something you did! Anyway, it\"\n-                           .\" was detected and blocked. \\n\";\n-        $output        .=        \"The suspicious activity was recognized in $detecting_file \"\n-                              .\"on line $detecting_line, and is of the type $hack_type. \\n\";\n-        $output        .=        \"Additional information given by the code which detected this: \".$message;\n-        $output        .=        \"\\n\\nBelow you will find a lot of information obtained about \"\n-                           .\"this attempt, that may help you to find  what happened and \"\n-                           .\"maybe who did it.\\n\\n\";\n-\n-        $output        .=        \"\\n=====================================\\n\";\n-        $output        .=        \"Information about this user:\\n\";\n-        $output        .=        \"=====================================\\n\";\n-\n-    if (!pnUserLoggedIn()) {\n-        $output        .=  \"This person is not logged in.\\n\";\n-    } else {\n-        $output .=        \"Postnuke username:  \".pnUserGetVar('uname') .\"\\n\"\n-                           .\"Registered email of this Postnuke user: \". pnUserGetVar('email').\"\\n\"\n-                           .\"Registered real name of this Postnuke user: \".pnUserGetVar('name') .\"\\n\";\n-    }\n-\n-        $output        .=        \"IP numbers: [note: when you are dealing with a real cracker \"\n-                           .\"these IP numbers might not be from the actual computer he is \"\n-                           .\"working on]\"\n-                           .\"\\n\\t IP according to HTTP_CLIENT_IP: \".getenv('HTTP_CLIENT_IP')\n-                           .\"\\n\\t IP according to REMOTE_ADDR: \".getenv('REMOTE_ADDR')\n-                           .\"\\n\\t IP according to GetHostByName(\\$REMOTE_ADDR): \".GetHostByName($REMOTE_ADDR)\n-                           .\"\\n\\n\";\n-\n-        $output .=        \"\\n=====================================\\n\";\n-        $output .=        \"Information in the \\$_REQUEST array\\n\";\n-        $output .=        \"=====================================\\n\";\n-\n-    while (list ( $key, $value ) = each($_rv)) {\n-        $output .= \"REQUEST * $key : $value\\n\";\n-    }\n-\n-        $output .=        \"\\n=====================================\\n\";\n-        $output .=        \"Information in the \\$_GET array\\n\";\n-        $output .=        \"This is about variables that may have been \";\n-        $output .=        \"in the URL string or in a 'GET' type form.\\n\";\n-        $output        .=        \"=====================================\\n\";\n-\n-    while (list ( $key, $value ) = each($_gv)) {\n-        $output .= \"GET * $key : $value\\n\";\n-    }\n-\n-        $output        .=        \"\\n=====================================\\n\";\n-        $output        .=        \"Information in the \\$_POST array\\n\";\n-        $output        .=        \"This is about visible and invisible form elements.\\n\";\n-        $output        .=        \"=====================================\\n\";\n-\n-    while (list ( $key, $value ) = each($_pv)) {\n-        $output .= \"POST * $key : $value\\n\";\n-    }\n-\n-        $output        .=        \"\\n=====================================\\n\";\n-        $output        .=         \"Browser information\\n\";\n-        $output        .=        \"=====================================\\n\";\n-\n-        global $HTTP_USER_AGENT;\n-        $output        .=        \"HTTP_USER_AGENT: \".$HTTP_USER_AGENT .\"\\n\";\n-\n-        $browser = (array) get_browser();\n-    while (list ( $key, $value ) = each($browser)) {\n-        $output .= \"BROWSER * $key : $value\\n\";\n-    }\n-\n-        $output        .=        \"\\n=====================================\\n\";\n-        $output        .=        \"Information in the \\$_SERVER array\\n\";\n-        $output        .=        \"=====================================\\n\";\n-\n-    while (list ( $key, $value ) = each($_sv)) {\n-        $output .= \"SERVER * $key : $value\\n\";\n-    }\n-\n-        $output        .=        \"\\n=====================================\\n\";\n-        $output        .=        \"Information in the \\$_ENV array\\n\";\n-        $output        .=        \"=====================================\\n\";\n-\n-    while (list ( $key, $value ) = each($_ev)) {\n-        $output .= \"ENV * $key : $value\\n\";\n-    }\n-\n-        $output        .=        \"\\n=====================================\\n\";\n-        $output        .=  \"Information in the \\$_COOKIE array\\n\";\n-        $output        .=        \"=====================================\\n\";\n-\n-    while (list ( $key, $value ) = each($_cv)) {\n-        $output .= \"COOKIE * $key : $value\\n\";\n-    }\n-\n-        $output        .=        \"\\n=====================================\\n\";\n-        $output        .=        \"Information in the \\$_FILES array\\n\";\n-        $output        .=        \"=====================================\\n\";\n-\n-    while (list ( $key, $value ) = each($_fv)) {\n-        $output .= \"FILES * $key : $value\\n\";\n-    }\n-\n-        $output        .=        \"\\n=====================================\\n\";\n-        $output        .=        \"Information in the \\$_SESSION array\\n\";\n-        $output .=  \"This is session info. The variables\\n\";\n-        $output .=  \"  starting with PNSV are PostNukeSessionVariables.\\n\";\n-        $output        .=        \"=====================================\\n\";\n-\n-    while (list ( $key, $value ) = each($_snv)) {\n-        $output .= \"SESSION * $key : $value\\n\";\n-    }\n-\n-        $sitename = pnConfigGetVar('sitename');\n-        $adminmail = pnConfigGetVar('adminmail');\n-\n-        $headers = \"From: $sitename <$adminmail>\\n\"\n-                          .\"X-Priority: 1 (Highest)\\n\";\n-\n-        pnMail($adminmail, 'Attempted hack on your site? (type: '.$hack_type.')', $output, $headers);\n-\n-        return;\n-}\n", "diff --git a/interface/main/calendar/includes/pnHTML.php b/interface/main/calendar/includes/pnHTML.php\nindex 984af9fb9..76349ac75 100644\n--- a/interface/main/calendar/includes/pnHTML.php\n+++ b/interface/main/calendar/includes/pnHTML.php\n@@ -87,14 +87,6 @@ define('_PNH_PARSEINPUT', 1);\n  * $myhtml = new pnHTML();\n  * $myhtml->Start();\n  *\n- * // Add table showing encoding information\n- * $myhtml->TableStart('Colors and Their Encodings', array('Color', 'Encoding'));\n- * foreach ($colors as $color) {\n- *     $info = array($color['name'], $color['encoding']);\n- *     $myhtml->TableAddRow($info);\n- * }\n- * $myhtml->TableEnd();\n- *\n  * // Add form to select a color\n  * $myhtml->Text('&lt;P&gt;&lt;P&gt;');\n  * $myhtml->FormStart('colorchosen.php');\n@@ -273,19 +265,6 @@ class pnHTML\n         return $pre;\n     }\n \n-    /**\n-     * Set the form to allow file uploads to take place\n-     *\n-     * @access public\n-     * @since 1.13 - 2002/01/23\n-     * @return boolean Always returns true\n-     * @see FormStart(), FormFile()\n-     */\n-    function UploadMode()\n-    {\n-        $this->fileupload = 1;\n-        return true;\n-    }\n \n     /*==============================================================================*\n      |                            Methods: Output                                   |\n@@ -384,163 +363,6 @@ class pnHTML\n         }\n     }\n \n-    /**\n-     *\n-     * @access public\n-     * @author Greg 'Adam Baum'\n-     * @since 1.13 - 2002/01/23\n-     * @param integer $startnum start iteam\n-     * @param integer $total total number of items present\n-     * @param string $urltemplate template for url, will replace '%%' with item number\n-     * @param integer $perpage number of links to display (default=10)\n-     */\n-    function Pager($startnum, $total, $urltemplate, $perpage = 10)\n-    {\n-        // Quick check to ensure that we have work to do\n-        if ($total <= $perpage) {\n-            return true;\n-        }\n-\n-        $compoutput = new pnHTML();\n-\n-        if (empty($startnum)) {\n-            $startnum = 1;\n-        }\n-\n-        if (empty($perpage)) {\n-            $perpage = 10;\n-        }\n-\n-        // Make << and >> do paging properly\n-        // Display subset of pages if large number\n-\n-        // Check that we are needed\n-        if ($total <= $perpage) {\n-            return;\n-        }\n-\n-        // Show startnum link\n-        if ($startnum != 1) {\n-            $url = preg_replace('/%%/', 1, $urltemplate);\n-            $compoutput->URL($url, '<<');\n-        } else {\n-            $compoutput->Text('<<');\n-        }\n-\n-        $compoutput->Text(' ');\n-\n-        // Show following items\n-        $pagenum = 1;\n-\n-        for ($curnum = 1; $curnum <= $total; $curnum += $perpage) {\n-            if (($startnum < $curnum) || ($startnum > ($curnum + $perpage - 1))) {\n-                // Not on this page - show link\n-                $url = preg_replace('/%%/', $curnum, $urltemplate);\n-                $compoutput->URL($url, $pagenum);\n-                $compoutput->Text(' ');\n-            } else {\n-                // On this page - show text\n-                $compoutput->Text($pagenum.' ');\n-            }\n-\n-            $pagenum++;\n-        }\n-\n-        if (($curnum >= $perpage+1) && ($startnum < $curnum-$perpage)) {\n-            $url = preg_replace('/%%/', $curnum-$perpage, $urltemplate);\n-            $compoutput->URL($url, '>>');\n-        } else {\n-            $compoutput->Text('>>');\n-        }\n-\n-        if ($this->GetOutputMode() == _PNH_RETURNOUTPUT) {\n-            $compoutput->SetOutputMode(_PNH_RETURNOUTPUT);\n-            return $compoutput->PrintPage();\n-        } else {\n-            $this->output .= $compoutput->GetOutput();\n-        }\n-    }\n-\n-    /**\n-     * Redirect the user to another page\n-     *\n-     * This function is broken, do not use it!\n-     *\n-     * @access public\n-     * @param string $url URL to redirect to\n-     * @param integer $waittime Seconds to wait before redirecting\n-     * @return string An HTML string if <code>ReturnHTML()</code> has been called,\n-     * otherwise null\n-     * @todo This function is broken, do not use it!\n-     */\n-    function Redirect($url, $waittime = 3)\n-    {\n-        global $HTTP_SERVER_VARS;\n-\n-        $server = $HTTP_SERVER_VARS['HTTP_HOST'];\n-        if (empty($server)) {\n-            $server = getenv('HTTP_HOST');\n-        }\n-\n-        $self = $HTTP_SERVER_VARS['PHP_SELF'];\n-        if (empty($self)) {\n-            $self = getenv('PHP_SELF');\n-        }\n-\n-        // Removing leading slashes from path\n-        $path = preg_replace('!^/*!', '', dirname($self));\n-\n-        // Removing leading slashes from redirect url\n-        $url = preg_replace('!^/*!', '', $url);\n-\n-        // Make redirect line\n-        if (empty($path)) {\n-            $output = \"Location: http://$server/$url\";\n-        } else {\n-            $output = \"Location: http://$server/$path/$url\";\n-        }\n-\n-        if ($this->GetOutputMode() == _PNH_RETURNOUTPUT) {\n-            return $output;\n-        } else {\n-            $this->header[] = $output;\n-        }\n-    }\n-\n-    /**\n-     * composite function for generic confirmation of action\n-     *\n-     * @param string $confirm_text Confirmation message to display\n-     * @param string $confirm_url URL to go to if confirm button is clicked\n-     * @param string $cancel_text Link text cor the cancel message\n-     * @param string $cancel_url URL to go to is action is canceled\n-     * @param array $arg An array of args to create hidden fields for\n-     *\n-     * @access public\n-     */\n-    function ConfirmAction($confirm_text, $confirm_url, $cancel_text, $cancel_url, $arg = array ())\n-    {\n-        $compoutput = new pnHTML();\n-        $compoutput->FormStart($confirm_url);\n-\n-        $compoutput->Text($confirm_text);\n-        $compoutput->Linebreak(2);\n-        $arg['confirm'] = 1;\n-        $arg['authid'] = pnSecGenAuthKey();\n-        $arg['confirmation'] = 1;\n-        $compoutput->FormHidden($arg);\n-        $compoutput->FormSubmit(_CONFIRM);\n-        $compoutput->Linebreak(2);\n-        $compoutput->URL($cancel_url, $cancel_text);\n-        $compoutput->FormEnd();\n-        if ($this->GetOutputMode() == _PNH_RETURNOUTPUT) {\n-            $compoutput->SetOutputMode(_PNH_RETURNOUTPUT);\n-            return $compoutput->PrintPage();\n-        } else {\n-            $compoutput->SetOutputMode(_PNH_RETURNOUTPUT);\n-            $this->output .= $compoutput->GetOutput();\n-        }\n-    }\n \n     /*==============================================================================*\n      |                             Methods: Text                                    |\n@@ -567,49 +389,6 @@ class pnHTML\n         }\n     }\n \n-    /**\n-     * Add free-form text to the object's buffer as a title\n-     *\n-     * @access public\n-     * @param string $text the text string to add\n-     * @return string An HTML string if <code>ReturnHTML()</code> has been called,\n-     * otherwise null\n-     */\n-    function Title($text)\n-    {\n-        $output = '<center><font class=\"pn-title\">';\n-\n-        if ($this->GetInputMode() == _PNH_PARSEINPUT) {\n-            $output .= pnVarPrepForDisplay($text);\n-        } else {\n-            $output .= $text;\n-        }\n-\n-        $output .= '</font></center><br />';\n-\n-        if ($this->GetOutputMode() == _PNH_RETURNOUTPUT) {\n-            return $output;\n-        } else {\n-            $this->output .= $output;\n-        }\n-    }\n-\n-    /**\n-     * add bold text to the object's buffer\n-     *\n-     * @access public\n-     * @param string $text the text string to add\n-     * @return string An HTML string if <code>ReturnHTML()</code> has been called,\n-     * otherwise null\n-     */\n-    function BoldText($text)\n-    {\n-        if ($this->GetOutputMode() == _PNH_RETURNOUTPUT) {\n-            return '<b>'.pnVarPrepForDisplay($text).'</b>';\n-        } else {\n-            $this->output .= '<b>'.pnVarPrepForDisplay($text).'</b>';\n-        }\n-    }\n \n     /**\n      * Add line break\n@@ -633,250 +412,6 @@ class pnHTML\n         }\n     }\n \n-    /**\n-     * Add HTML tags for a hotlink.\n-     *\n-     * @access public\n-     * @since 1.13 - 2002/01/23\n-     * @param string $url the URL of the link\n-     * @param string $text the text that the URL is anchored to\n-     * @return string An HTML string if <code>ReturnHTML()</code> has been called,\n-     * otherwise null\n-     */\n-    function URL($url, $text)\n-    {\n-        if (empty($url)) {\n-            return;\n-        }\n-\n-        $output = '<a href=\"'.$url.'\">';\n-        if (!empty($text)) {\n-            if ($this->GetInputMode() == _PNH_PARSEINPUT) {\n-                $text = pnVarPrepForDisplay($text);\n-            }\n-\n-            $output .= $text;\n-        }\n-\n-        $output .= '</a>';\n-\n-        if ($this->GetOutputMode() == _PNH_RETURNOUTPUT) {\n-            return $output;\n-        } else {\n-            $this->output .= $output;\n-        }\n-    }\n-\n-    /*==============================================================================*\n-     |                           Methods: Tables                                    |\n-     *==============================================================================*/\n-\n-    /**\n-     * Add HTML tags for the start of a table.\n-     *\n-     * @access public\n-     * @param string $title the title of the table\n-     * @param array $headers an array of column headings\n-     * @param integer $border size of table borders\n-     * @param string $width the width of the table.  can be null if no width needs\n-     * to be specified\n-     * @return string An HTML string if <code>ReturnHTML()</code> has been called,\n-     * otherwise null\n-     */\n-    function TableStart($title = '', $headers = array(), $border = 0, $width = '100%', $cellpadding = 0, $cellspacing = 0)\n-    {\n-\n-        // Wrap the user table in our own invisible table to make the title sit properly\n-        $output = '<table border=\"'.$border.'\"'.((empty($width)) ? '' : ' width=\"'.$width.'\"').' cellpadding=\"'.$cellpadding.'\" cellspacing=\"'.$cellspacing.\"\\\">\\n\";\n-        if (!empty($title)) {\n-            if ($this->GetInputMode() == _PNH_PARSEINPUT) {\n-                $title = pnVarPrepForDisplay($title);\n-            }\n-\n-            $output .= '<tr><th align=\"center\">'. $title .'</th></tr>' . \"\\n\";\n-        }\n-\n-        $output .= \"<tr><td>\\n\";\n-\n-        if ($this->GetInputMode() == _PNH_PARSEINPUT) {\n-            $border = pnVarPrepForDisplay($border);\n-        }\n-\n-        $output .= '<table border=\"' . $border . '\" width=\"100%\">';\n-\n-        // Add column headers\n-        if (!empty($headers)) {\n-            $output .= '<tr>';\n-            foreach ($headers as $head) {\n-                if (empty($head)) {\n-                    $head = '&nbsp;';\n-                }\n-\n-                if ($this->GetInputMode() == _PNH_PARSEINPUT) {\n-                    $head = pnVarPrepForDisplay($head);\n-                }\n-\n-                $output .= '<th>' . $head . '</th>';\n-            }\n-\n-            $output .= '</tr>';\n-        }\n-\n-        if ($this->GetOutputMode() == _PNH_RETURNOUTPUT) {\n-            return $output;\n-        } else {\n-            $this->output .= $output;\n-        }\n-    }\n-\n-    /**\n-     * Add HTML tags for the start of a table row.\n-     *\n-     * @access public\n-     * @param string $align Default horizantal alignment for all columns on this row\n-     * @param string $valign Default vertical alignment for all columns on this row\n-     * @return string An HTML string if <code>ReturnHTML()</code> has been called,\n-     * otherwise null\n-     */\n-    function TableRowStart($align = 'center', $valign = 'middle')\n-    {\n-        $output = '<tr align=\"'.$align.'\" valign=\"'.$valign.'\">';\n-        if ($this->GetOutputMode() == _PNH_RETURNOUTPUT) {\n-            return $output;\n-        } else {\n-            $this->output .= $output;\n-        }\n-    }\n-\n-    /**\n-     * Add HTML tags for the start of a table column.\n-     *\n-     * @access public\n-     * @param integer $colspan number of columns that this column spans\n-     * @param string $align Horizantal alignment of the column\n-     * @param string $valign Vertical alignment of this column\n-     * @param integer $rowspan Total rows this column uses\n-     * @return string An HTML string if <code>ReturnHTML()</code> has been called,\n-     * otherwise null\n-     */\n-    function TableColStart($colspan = 1, $align = 'center', $valign = 'middle', $rowspan = 1)\n-    {\n-        $output = '<td colspan=\"'.$colspan.'\" rowspan=\"'.$rowspan.'\" align=\"'.$align.'\" valign=\"'.$valign.'\">';\n-        if ($this->GetOutputMode() == _PNH_RETURNOUTPUT) {\n-            return $output;\n-        } else {\n-            $this->output .= $output;\n-        }\n-    }\n-\n-    /**\n-     * Add HTML tags for the end of a table column.\n-     *\n-     * @access public\n-     * @return string An HTML string if <code>ReturnHTML()</code> has been called,\n-     * otherwise null\n-     */\n-    function TableColEnd()\n-    {\n-        $output = '</td>';\n-        if ($this->GetOutputMode() == _PNH_RETURNOUTPUT) {\n-            return $output;\n-        } else {\n-            $this->output .= $output;\n-        }\n-    }\n-\n-    /**\n-     * Add HTML tags for the end of a table row.\n-     *\n-     * @access public\n-     * @return string An HTML string if <code>ReturnHTML()</code> has been called,\n-     * otherwise null\n-     */\n-    function TableRowEnd()\n-    {\n-        $output = '</tr>';\n-        if ($this->GetOutputMode() == _PNH_RETURNOUTPUT) {\n-            return $output;\n-        } else {\n-            $this->output .= $output;\n-        }\n-    }\n-\n-    /**\n-     * Add HTML tags for the end of a table.\n-     *\n-     * @access public\n-     * @return string An HTML string if <code>ReturnHTML()</code> has been called,\n-     * otherwise null\n-     */\n-    function TableEnd()\n-    {\n-        $output = '</table></td></tr></table>';\n-        if ($this->GetOutputMode() == _PNH_RETURNOUTPUT) {\n-            return $output;\n-        } else {\n-            $this->output .= $output;\n-        }\n-    }\n-\n-    /**\n-     * Add HTML tags for a row of a table.\n-     *\n-     * @access public\n-     * @param array $row an array of row entries\n-     * @param string $align (optional) the alignment of the row, which can be\n-     * one of <code>'left'</code>, <code>'center'</code> or <code>'right'</code>\n-     * @return string An HTML string if <code>ReturnHTML()</code> has been called,\n-     * otherwise null\n-     */\n-    function TableAddRow($row, $align = 'center', $valign = 'middle')\n-    {\n-        if (empty($row)) {\n-            return;\n-        }\n-\n-        $output = '<tr align=\"'.$align.'\" valign=\"'.$valign.'\">';\n-        // test to see if we are using the latest array style\n-        if (is_array($row[0])) {\n-            // new style\n-            foreach ($row as $rowitem) {\n-                if (!isset($rowitem['content'])) {\n-                    $rowitem['content'] = '&nbsp;';\n-                }\n-\n-                if ($this->GetInputMode()) {\n-                    $rowitem['content'] = pnVarPrepForDisplay($rowitem['content']);\n-                }\n-\n-                $output .= '<td'\n-                    .((empty($rowitem['align'])) ? '' : ' align=\"'.$rowitem['align'].'\"')\n-                    .((empty($rowitem['valign'])) ? '' : ' valign=\"'.$rowitem['valign'].'\"')\n-                    .'>'.$rowitem['content'].'</td>'\n-                ;\n-            }\n-        } else {\n-            // old style\n-            foreach ($row as $rowitem) {\n-                if (!isset($rowitem)) {\n-                    $rowitem = '&nbsp;';\n-                }\n-\n-                if ($this->GetInputMode() == _PNH_PARSEINPUT) {\n-                    $rowitem = pnVarPrepForDisplay($rowitem);\n-                }\n-\n-                $output .= '<td>' . $rowitem . '</td>';\n-            }\n-        }\n-\n-        $output .= '</tr>';\n-        if ($this->GetOutputMode() == _PNH_RETURNOUTPUT) {\n-            return $output;\n-        } else {\n-            $this->output .= $output;\n-        }\n-    }\n \n     /*==============================================================================*\n      |                             Methods: Forms                                   |\n@@ -951,86 +486,6 @@ class pnHTML\n         }\n     }\n \n-    /**\n-     * Add HTML tags for a text field as part of a form.\n-     *\n-     * @access public\n-     * @param string $fieldname the name of the text field\n-     * @param string $contents (optional) the inital value of the text field\n-     * @param integer $size (optional) the size of the text field on the page\n-     * in number of characters\n-     * @param integer $maxlength (optional) the maximum number of characters the\n-     * text field can hold\n-     * @param boolean $password (optional) field acts as a password field\n-     * @param string $accesskey (optional) accesskey to active this item\n-     * @return string An HTML string if <code>ReturnHTML()</code> has been called,\n-     * otherwise null\n-     */\n-    function FormText($fieldname, $contents = '', $size = 16, $maxlength = 64, $password = false, $accesskey = '')\n-    {\n-        if (empty($fieldname)) {\n-            return;\n-        }\n-\n-        $this->tabindex++;\n-        $output = '<input'\n-            .' type=\"'.(($password) ? 'password' : 'text').'\"'\n-            .' name=\"'.pnVarPrepForDisplay($fieldname).'\"'\n-            .' id=\"'.pnVarPrepForDisplay($fieldname).'\"'\n-            .' value=\"'.pnVarPrepForDisplay($contents).'\"'\n-            .' size=\"'.pnVarPrepForDisplay($size).'\"'\n-            .' maxlength=\"'.pnVarPrepForDisplay($maxlength).'\"'\n-            .((empty($accesskey)) ? '' : ' accesskey=\"'.pnVarPrepForDisplay($accesskey).'\"')\n-            .' tabindex=\"'.$this->tabindex.'\"'\n-            .' />'\n-        ;\n-        if ($this->GetOutputMode() == _PNH_RETURNOUTPUT) {\n-            return $output;\n-        } else {\n-            $this->output .= $output;\n-        }\n-    }\n-\n-    /**\n-     * Add HTML tags for a text area as part of a form\n-     *\n-     * @access public\n-     * @param string $fieldname the name of the text area filed\n-     * @param string $contents the initial value of the text area field\n-     * @param integer $rows the number of rows that the text area\n-     |        should cover\n-     * @param integer $cols the number of columns that the text area\n-     |        should cover\n-     * @param string $wrap (optional) wordwrap mode to use, either <code>'soft'</code> or <code>'hard'</code>\n-     * @param string $accesskey (optional) accesskey to active this item\n-     * @return string An HTML string if <code>ReturnHTML()</code> has been called,\n-     * otherwise null\n-     */\n-    function FormTextArea($fieldname, $contents = '', $rows = 6, $cols = 40, $wrap = 'soft', $accesskey = '')\n-    {\n-        if (empty($fieldname)) {\n-            return;\n-        }\n-\n-        $this->tabindex++;\n-        $output = '<textarea'\n-            .' name=\"'.pnVarPrepForDisplay($fieldname).'\"'\n-            .' id=\"'.pnVarPrepForDisplay($fieldname).'\"'\n-            .' wrap=\"'.(($wrap = 'soft') ? 'soft' : 'hard').'\"' // not proper HTML, but too useful to abandon yet\n-            .' rows=\"'.pnVarPrepForDisplay($rows).'\"'\n-            .' cols=\"'.pnVarPrepForDisplay($cols).'\"'\n-            .((empty($accesskey)) ? '' : ' accesskey=\"'.pnVarPrepForDisplay($accesskey).'\"')\n-            .' tabindex=\"'.$this->tabindex.'\"'\n-            .'>'\n-            .pnVarPrepForDisplay($contents)\n-            .'</textarea>'\n-        ;\n-        if ($this->GetOutputMode() == _PNH_RETURNOUTPUT) {\n-            return $output;\n-        } else {\n-            $this->output .= $output;\n-        }\n-    }\n \n     /**\n      * Add HTML tags for a hidden field as part of a form.\n@@ -1155,79 +610,4 @@ class pnHTML\n             $this->output .= $output;\n         }\n     }\n-\n-    /**\n-     * Add HTML tags for a checkbox or radio button field as part of a form.\n-     *\n-     * @access public\n-     * @since 1.13 - 2002/01/23\n-     * @param string $fieldname the name of the checkbox field\n-     * @param string $value (optional) the value of the checkbox field\n-     * @param boolean $checked (optional) the field is checked\n-     * @param string $type (optional) the type of field this is, either\n-     * <code>'checkbox'</code> or <code>'radio'</code>\n-     * @param string $accesskey (optional) accesskey to active this item\n-     * @return string An HTML string if <code>ReturnHTML()</code> has been called,\n-     * otherwise null\n-     */\n-    function FormCheckbox($fieldname, $checked = false, $value = '1', $type = 'checkbox', $accesskey = '')\n-    {\n-        if (empty($fieldname)) {\n-            return;\n-        }\n-\n-        $this->tabindex++;\n-        $output = '<input'\n-            .' type=\"'.(($type == 'checkbox') ? 'checkbox' : 'radio').'\"'\n-            .' name=\"'.pnVarPrepForDisplay($fieldname).'\"'\n-            .' id=\"'.pnVarPrepForDisplay($fieldname).'\"'\n-            .' value=\"'.pnVarPrepForDisplay($value).'\"'\n-            .(($checked) ? ' checked=\"checked\"' : '')\n-            .((empty($accesskey)) ? '' : ' accesskey=\"'.pnVarPrepForDisplay($accesskey).'\"')\n-            .' tabindex=\"'.$this->tabindex.'\"'\n-            .' />'\n-        ;\n-        if ($this->GetOutputMode() == _PNH_RETURNOUTPUT) {\n-            return $output;\n-        } else {\n-            $this->output .= $output;\n-        }\n-    }\n-\n-    /**\n-     * Add HTML tags for a file upload field as part of a form.\n-     *\n-     * @access public\n-     * @since 1.13 - 2002/01/23\n-     * @param string $fieldname the name of the field\n-     * @param integer $size (optional) the size of the field on the page in number\n-     * of characters\n-     * @param integer $maxsize (optional) the maximum file size allowed (in bytes)\n-     * @param string $accesskey (optional) accesskey to active this item\n-     * @return string An HTML string if <code>ReturnHTML()</code> has been called,\n-     * otherwise null\n-     */\n-    function FormFile($fieldname, $size = 32, $maxsize = 1000000, $accesskey = '')\n-    {\n-        if (empty($fieldname)) {\n-            return;\n-        }\n-\n-        $this->tabindex++;\n-        $output = '<input type=\"hidden\" name=\"MAX_FILE_SIZE\" value=\"'.pnVarPrepForDisplay($maxsize).'\" />';\n-        $output .= '<input'\n-            .' type=\"file\"'\n-            .' name=\"'.pnVarPrepForDisplay($fieldname).'\"'\n-            .' id=\"'.pnVarPrepForDisplay($fieldname).'\"'\n-            .' size=\"'.pnVarPrepForDisplay($size).'\"'\n-            .((empty($accesskey)) ? '' : ' accesskey=\"'.pnVarPrepForDisplay($accesskey).'\"')\n-            .' tabindex=\"'.$this->tabindex.'\"'\n-            .' />'\n-        ;\n-        if ($this->GetOutputMode() == _PNH_RETURNOUTPUT) {\n-            return $output;\n-        } else {\n-            $this->output .= $output;\n-        }\n-    }\n }\n", "diff --git a/interface/main/calendar/includes/pnMod.php b/interface/main/calendar/includes/pnMod.php\nindex 547233f04..adc0298fb 100644\n--- a/interface/main/calendar/includes/pnMod.php\n+++ b/interface/main/calendar/includes/pnMod.php\n@@ -119,40 +119,6 @@ function pnModSetVar($modname, $name, $value)\n }\n \n \n-/*\n- * pnModDelVar - delete a module variable\n- * Takes two parameters:\n- * - the name of the module\n- * - the name of the variable\n- */\n-function pnModDelVar($modname, $name)\n-{\n-    if ((empty($modname)) || (empty($name))) {\n-        return false;\n-    }\n-\n-    list($dbconn) = pnDBGetConn();\n-    $pntable = pnDBGetTables();\n-\n-    $modulevarstable = $pntable['module_vars'];\n-    $modulevarscolumn = &$pntable['module_vars_column'];\n-    $query = \"DELETE FROM $modulevarstable\n-              WHERE $modulevarscolumn[modname] = '\" . pnVarPrepForStore($modname) . \"'\n-              AND $modulevarscolumn[name] = '\" . pnVarPrepForStore($name) . \"'\";\n-    $dbconn->Execute($query);\n-\n-    if ($dbconn->ErrorNo() != 0) {\n-        return;\n-    }\n-\n-    global $pnmodvar;\n-    if (isset($pnmodvar[$modname][$name])) {\n-        unset($pnmodvar[$modname][$name]);\n-    }\n-\n-    return true;\n-}\n-\n /*\n  * pnModGetIDFromName - get module ID given its name\n  * Takes one parameter:\n@@ -226,7 +192,7 @@ function pnModGetInfo($modid)\n                      $modulescolumn[description],\n                      $modulescolumn[version]\n               FROM $modulestable\n-              WHERE $modulescolumn[id] = \" . pnVarPrepForStore($modid);\n+              WHERE $modulescolumn[id] = '\" . pnVarPrepForStore($modid) . \"'\";\n     $result = $dbconn->Execute($query);\n \n     if ($dbconn->ErrorNo() != 0) {\n@@ -251,126 +217,6 @@ function pnModGetInfo($modid)\n     return $resarray;\n }\n \n-/**\n- * get list of user modules\n- * @returns array\n- * @return array of module information arrays\n- */\n-function pnModGetUserMods()\n-{\n-    list($dbconn) = pnDBGetConn();\n-    $pntable = pnDBGetTables();\n-\n-    $modulestable = $pntable['modules'];\n-    $modulescolumn = &$pntable['modules_column'];\n-    $query = \"SELECT $modulescolumn[name],\n-                     $modulescolumn[type],\n-                     $modulescolumn[directory],\n-                     $modulescolumn[regid],\n-                     $modulescolumn[displayname],\n-                     $modulescolumn[description],\n-                     $modulescolumn[version]\n-              FROM $modulestable\n-              WHERE $modulescolumn[state] = \" . _PNMODULE_STATE_ACTIVE . \"\n-              AND $modulescolumn[user_capable] = 1\n-              ORDER BY $modulescolumn[name]\";\n-    $result = $dbconn->Execute($query);\n-\n-    if ($dbconn->ErrorNo() != 0) {\n-        return;\n-    }\n-\n-    if ($result->EOF) {\n-        return false;\n-    }\n-\n-    $resarray = array();\n-    while (list($name,\n-               $modtype,\n-               $directory,\n-               $regid,\n-               $displayname,\n-               $description,\n-               $version) = $result->fields) {\n-        $result->MoveNext();\n-\n-        $tmparray = array('name' => $name,\n-                          'type' => $modtype,\n-                          'directory' => $directory,\n-                          'regid' => $regid,\n-                          'displayname' => $displayname,\n-                          'description' => $description,\n-                          'version' => $version);\n-\n-        array_push($resarray, $tmparray);\n-    }\n-\n-    $result->Close();\n-\n-    return $resarray;\n-}\n-\n-/**\n- * get list of administration modules\n- * @returns array\n- * @return array of module information arrays\n- */\n-function pnModGetAdminMods()\n-{\n-    list($dbconn) = pnDBGetConn();\n-    $pntable = pnDBGetTables();\n-\n-    $modulestable = $pntable['modules'];\n-    $modulescolumn = &$pntable['modules_column'];\n-\n-    $query = \"SELECT $modulescolumn[name],\n-                     $modulescolumn[type],\n-                     $modulescolumn[directory],\n-                     $modulescolumn[regid],\n-                     $modulescolumn[displayname],\n-                     $modulescolumn[description],\n-                     $modulescolumn[version]\n-              FROM $modulestable\n-              WHERE $modulescolumn[state] = \" . _PNMODULE_STATE_ACTIVE . \"\n-              AND $modulescolumn[admin_capable] = 1\n-              AND $modulescolumn[directory] != 'NS-Admin'\n-              ORDER BY $modulescolumn[name]\";\n-\n-    $result = $dbconn->Execute($query);\n-\n-    if ($dbconn->ErrorNo() != 0) {\n-        return;\n-    }\n-\n-    if ($result->EOF) {\n-        return false;\n-    }\n-\n-    $resarray = array();\n-    while (list($name,\n-               $modtype,\n-               $directory,\n-               $regid,\n-               $displayname,\n-               $description,\n-               $version) = $result->fields) {\n-        $result->MoveNext();\n-\n-        $tmparray = array('name' => $name,\n-                          'type' => $modtype,\n-                          'directory' => $directory,\n-                          'regid' => $regid,\n-                          'displayname' => $displayname,\n-                          'description' => $description,\n-                          'version' => $version);\n-\n-        array_push($resarray, $tmparray);\n-    }\n-\n-    $result->Close();\n-\n-    return $resarray;\n-}\n \n /**\n  * load an API for a module\n@@ -409,7 +255,6 @@ function pnModAPILoad($modname, $type = 'user')\n     }\n \n     if ($result->EOF) {\n-        pnSessionSetVar('errmsg', \"Unknown module $modname\");\n         return false;\n     }\n \n@@ -425,21 +270,11 @@ function pnModAPILoad($modname, $type = 'user')\n     }\n \n     // Load the file\n-    include $osfile;\n+    require $osfile;\n     $loaded[\"$modname$type\"] = 1;\n \n-    // Load the module language files\n-    $currentlang = pnUserGetLang();\n-    $defaultlang = pnConfigGetVar('language');\n-    if (empty($defaultlang)) {\n-        $defaultlang = 'eng';\n-    }\n-\n-    list($oscurrentlang, $osdefaultlang) = pnVarPrepForOS($currentlang, $defaultlang);\n-    if (file_exists(\"modules/$osdirectory/pnlang/$oscurrentlang/{$ostype}api.php\")) {\n-        include \"modules/$osdirectory/pnlang/$oscurrentlang/{$ostype}api.php\";\n-    } elseif (file_exists(\"modules/$osdirectory/pnlang/$osdefaultlang/{$ostype}api.php\")) {\n-        include \"modules/$osdirectory/pnlang/$osdefaultlang/{$ostype}api.php\";\n+    if (file_exists(\"modules/$osdirectory/pnlang/eng/{$ostype}api.php\")) {\n+        require \"modules/$osdirectory/pnlang/eng/{$ostype}api.php\";\n     }\n \n     // Load datbase info\n@@ -554,19 +389,11 @@ function pnModLoad($modname, $type = 'user')\n     }\n \n     // Load file\n-    include $osfile;\n+    require $osfile;\n     $loaded[\"$modname$type\"] = 1;\n \n-    $defaultlang = pnConfigGetVar('language');\n-    if (empty($defaultlang)) {\n-        $defaultlang = 'eng';\n-    }\n-\n-    $currentlang = pnUserGetLang();\n-    if (file_exists(\"modules/$osdirectory/pnlang/$currentlang/$ostype.php\")) {\n-        include \"modules/$osdirectory/pnlang/\" . pnVarPrepForOS($currentlang) . \"/$ostype.php\";\n-    } elseif (file_exists(\"modules/$directory/pnlang/$defaultlang/$ostype.php\")) {\n-        include \"modules/$osdirectory/pnlang/\" . pnVarPrepForOS($defaultlang) . \"/$ostype.php\";\n+    if (file_exists(\"modules/$osdirectory/pnlang/eng/$ostype.php\")) {\n+        require \"modules/$osdirectory/pnlang/eng/$ostype.php\";\n     }\n \n     // Load datbase info\n@@ -584,7 +411,7 @@ function pnModLoad($modname, $type = 'user')\n  * @param args - arguments to pass to the function\n  * @returns mixed\n  */\n-function pnModAPIFunc($modname, $type = 'user', $func = 'main', $args = array())\n+function pnModAPIFunc($modname, $type, $func, $args = array())\n {\n \n     if (empty($modname)) {\n@@ -592,11 +419,11 @@ function pnModAPIFunc($modname, $type = 'user', $func = 'main', $args = array())\n     }\n \n     if (empty($type)) {\n-        $func = 'user';\n+        return false;\n     }\n \n     if (empty($func)) {\n-        $func = 'main';\n+        return false;\n     }\n \n     // Build function name and call function\n@@ -616,7 +443,7 @@ function pnModAPIFunc($modname, $type = 'user', $func = 'main', $args = array())\n  * @param args - argument array\n  * @returns mixed\n  */\n-function pnModFunc($modname, $type = 'user', $func = 'main', $args = array())\n+function pnModFunc($modname, $type, $func, $args = array())\n {\n \n     if (empty($modname)) {\n@@ -624,11 +451,11 @@ function pnModFunc($modname, $type = 'user', $func = 'main', $args = array())\n     }\n \n     if (empty($type)) {\n-        $func = 'user';\n+        return false;\n     }\n \n     if (empty($func)) {\n-        $func = 'main';\n+        return false;\n     }\n \n     // Build function name and call function\n@@ -754,193 +581,3 @@ function pnModAvailable($modname)\n         return false;\n     }\n }\n-\n-/**\n- * get name of current top-level module\n- * @returns string\n- * @return the name of the current top-level module, false if not in a module\n- */\n-function pnModGetName()\n-{\n-    $modname = pnVarCleanFromInput('module');\n-    if (empty($modname)) {\n-        $name = pnVarCleanFromInput('name');\n-        if (empty($name)) {\n-            global $ModName;\n-            if (empty($ModName)) {\n-                return false;\n-            }\n-\n-            $modname = preg_replace('/^NS-/', '', $ModName);\n-            return $modname;\n-        }\n-\n-        return $name;\n-    } else {\n-        $modname = preg_replace('/^NS-/', '', $modname);\n-        return $modname;\n-    }\n-}\n-\n-/**\n- * register a hook function\n- * @param hookobject the hook object\n- * @param hookaction the hook action\n- * @param hookarea the area of the hook (either 'GUI' or 'API')\n- * @param hookmodule name of the hook module\n- * @param hooktype name of the hook type\n- * @param hookfunc name of the hook function\n- */\n-function pnModRegisterHook(\n-    $hookobject,\n-    $hookaction,\n-    $hookarea,\n-    $hookmodule,\n-    $hooktype,\n-    $hookfunc\n-) {\n-\n-\n-    // Get database info\n-    list($dbconn) = pnDBGetConn();\n-    $pntable = pnDBGetTables();\n-    $hookstable = $pntable['hooks'];\n-    $hookscolumn = &$pntable['hooks_column'];\n-\n-    // Insert hook\n-    $sql = \"INSERT INTO $hookstable (\n-              $hookscolumn[id],\n-              $hookscolumn[object],\n-              $hookscolumn[action],\n-              $hookscolumn[tarea],\n-              $hookscolumn[tmodule],\n-              $hookscolumn[ttype],\n-              $hookscolumn[tfunc])\n-            VALUES (\n-              \" . pnVarPrepForStore($dbconn->GenId($hookstable)) . \",\n-              '\" . pnVarPrepForStore($hookobject) . \"',\n-              '\" . pnVarPrepForStore($hookaction) . \"',\n-              '\" . pnVarPrepForStore($hookarea) . \"',\n-              '\" . pnVarPrepForStore($hookmodule) . \"',\n-              '\" . pnVarPrepForStore($hooktype) . \"',\n-              '\" . pnVarPrepForStore($hookfunc) . \"')\";\n-    $dbconn->Execute($sql);\n-\n-    if ($dbconn->ErrorNo() != 0) {\n-        return false;\n-    }\n-\n-    return true;\n-}\n-\n-/**\n- * unregister a hook function\n- * @param hookobject the hook object\n- * @param hookaction the hook action\n- * @param hookarea the area of the hook (either 'GUI' or 'API')\n- * @param hookmodule name of the hook module\n- * @param hooktype name of the hook type\n- * @param hookfunc name of the hook function\n- */\n-function pnModUnregisterHook(\n-    $hookobject,\n-    $hookaction,\n-    $hookarea,\n-    $hookmodule,\n-    $hooktype,\n-    $hookfunc\n-) {\n-\n-\n-    // Get database info\n-    list($dbconn) = pnDBGetConn();\n-    $pntable = pnDBGetTables();\n-    $hookstable = $pntable['hooks'];\n-    $hookscolumn = &$pntable['hooks_column'];\n-\n-    // Remove hook\n-    $sql = \"DELETE FROM $hookstable\n-            WHERE $hookscolumn[object] = '\" . pnVarPrepForStore($hookobject) . \"'\n-             AND $hookscolumn[action] = '\" . pnVarPrepForStore($hookaction) . \"'\n-             AND $hookscolumn[tarea] = '\" . pnVarPrepForStore($hookarea) . \"'\n-             AND $hookscolumn[tmodule] = '\" . pnVarPrepForStore($hookmodule) . \"'\n-             AND $hookscolumn[ttype] = '\" . pnVarPrepForStore($hooktype) . \"'\n-             AND $hookscolumn[tfunc] = '\" . pnVarPrepForStore($hookfunc) . \"'\";\n-    $dbconn->Execute($sql);\n-\n-    if ($dbconn->ErrorNo() != 0) {\n-        return false;\n-    }\n-\n-    return true;\n-}\n-\n-/**\n- * carry out hook operations for module\n- * @param hookobject the object the hook is called for - either 'item' or 'category'\n- * @param hookaction the action the hook is called for - one of 'create', 'delete', 'transform', or 'display'\n- * @param hookid the id of the object the hook is called for (module-specific)\n- * @param extrainfo extra information for the hook, dependent on hookaction\n- * @returns string\n- * @return output from hooks\n- */\n-function pnModCallHooks($hookobject, $hookaction, $hookid, $extrainfo)\n-{\n-\n-    // Get database info\n-    list($dbconn) = pnDBGetConn();\n-    $pntable = pnDBGetTables();\n-    $hookstable = $pntable['hooks'];\n-    $hookscolumn = &$pntable['hooks_column'];\n-\n-    // Get applicable hooks\n-    $sql = \"SELECT $hookscolumn[tarea],\n-                   $hookscolumn[tmodule],\n-                   $hookscolumn[ttype],\n-                   $hookscolumn[tfunc]\n-            FROM $hookstable\n-            WHERE $hookscolumn[smodule] = '\" . pnVarPrepForStore(pnModGetName()) . \"'\n-            AND $hookscolumn[object] = '\" . pnVarPrepForStore($hookobject) . \"'\n-            AND $hookscolumn[action] = '\" . pnVarPrepForStore($hookaction) . \"'\";\n-    $result = $dbconn->Execute($sql);\n-\n-    if ($dbconn->ErrorNo() != 0) {\n-        return null;\n-    }\n-\n-    $output = '';\n-\n-    // Call each hook\n-    for (; !$result->EOF; $result->MoveNext()) {\n-        list($hookarea, $hookmodule, $hooktype, $hookfunc) = $result->fields;\n-        if ($hookarea == 'GUI') {\n-            if (pnModAvailable($hookmodule, $hooktype) &&\n-                pnModLoad($hookmodule, $hooktype)) {\n-                $output .= pnModFunc(\n-                    $hookmodule,\n-                    $hooktype,\n-                    $hookfunc,\n-                    array('objectid' => $hookid,\n-                    'extrainfo' => $extrainfo)\n-                );\n-            }\n-        } else {\n-            if (pnModAvailable($hookmodule, $hooktype) &&\n-                pnModAPILoad($hookmodule, $hooktype)) {\n-                $extrainfo = pnModAPIFunc(\n-                    $hookmodule,\n-                    $hooktype,\n-                    $hookfunc,\n-                    array('objectid' => $hookid,\n-                    'extrainfo' => $extrainfo)\n-                );\n-            }\n-        }\n-    }\n-\n-    if ($hookaction == 'display') {\n-        return $output;\n-    } else {\n-        return $extrainfo;\n-    }\n-}\n", "diff --git a/interface/main/calendar/includes/pnSession.php b/interface/main/calendar/includes/pnSession.php\ndeleted file mode 100644\nindex 0dae7ba3a..000000000\n--- a/interface/main/calendar/includes/pnSession.php\n+++ /dev/null\n@@ -1,485 +0,0 @@\n-<?php\n-\n-// $Id$\n-// ----------------------------------------------------------------------\n-// POST-NUKE Content Management System\n-// Copyright (C) 2001 by the Post-Nuke Development Team.\n-// http://www.postnuke.com/\n-// ----------------------------------------------------------------------\n-// Based on:\n-// PHP-NUKE Web Portal System - http://phpnuke.org/\n-// Thatware - http://thatware.org/\n-// ----------------------------------------------------------------------\n-// LICENSE\n-//\n-// This program is free software; you can redistribute it and/or\n-// modify it under the terms of the GNU General Public License (GPL)\n-// as published by the Free Software Foundation; either version 2\n-// of the License, or (at your option) any later version.\n-//\n-// This program is distributed in the hope that it will be useful,\n-// but WITHOUT ANY WARRANTY; without even the implied warranty of\n-// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n-// GNU General Public License for more details.\n-//\n-// To read the license please visit http://www.gnu.org/copyleft/gpl.html\n-// ----------------------------------------------------------------------\n-// Original Author of file: Jim McDonald\n-// Purpose of file: Session handling\n-// ----------------------------------------------------------------------\n-\n-/**\n- * Set up session handling\n- *\n- * Set all PHP options for PostNuke session handling\n- */\n-function pnSessionSetup()\n-{\n-    global $HTTP_SERVER_VARS;\n-    $path = pnGetBaseURI();\n-    if (empty($path)) {\n-        $path = '/';\n-    }\n-\n-    $host = $HTTP_SERVER_VARS['HTTP_HOST'];\n-    if (empty($host)) {\n-        $host = getenv('HTTP_HOST');\n-    }\n-\n-    $host = preg_replace('/:.*/', '', $host);\n-\n-    // PHP configuration variables\n-\n-    // Stop adding SID to URLs\n-    ini_set('session.use_trans_sid', 0);\n-\n-    // User-defined save handler\n-    ini_set('session.save_handler', 'user');\n-\n-    // How to store data\n-    ini_set('session.serialize_handler', 'php');\n-\n-    // Use cookie to store the session ID\n-    ini_set('session.use_cookies', 1);\n-\n-    // Name of our cookie\n-    ini_set('session.name', 'POSTNUKESID');\n-\n-    // Lifetime of our cookie\n-    $seclevel = pnConfigGetVar('seclevel');\n-    switch ($seclevel) {\n-        case 'High':\n-            // Session lasts duration of browser\n-            $lifetime = 0;\n-            // Referer check\n-            //ini_set('session.referer_check', \"$host$path\");\n-            ini_set('session.referer_check', \"$host\");\n-            break;\n-        case 'Medium':\n-            // Session lasts set number of days\n-            $lifetime = pnConfigGetVar('secmeddays') * 86400;\n-            break;\n-        case 'Low':\n-            // Session lasts unlimited number of days (well, lots, anyway)\n-            // (Currently set to 25 years)\n-            $lifetime = 788940000;\n-            break;\n-    }\n-\n-    ini_set('session.cookie_lifetime', $lifetime);\n-\n-    if (pnConfigGetVar('intranet') == false) {\n-        // Cookie path\n-        ini_set('session.cookie_path', $path);\n-\n-        // Cookie domain\n-        // only needed for multi-server multisites - adapt as needed\n-        //$domain = preg_replace('/^[^.]+/','',$host);\n-        //ini_set('session.cookie_domain', $domain);\n-    }\n-\n-    // Garbage collection\n-    ini_set('session.gc_probability', 1);\n-\n-    // Inactivity timeout for user sessions\n-    ini_set('session.gc_maxlifetime', pnConfigGetVar('secinactivemins') * 60);\n-\n-    // Auto-start session\n-    ini_set('session.auto_start', 1);\n-\n-    // Session handlers\n-    session_set_save_handler(\n-        \"pnSessionOpen\",\n-        \"pnSessionClose\",\n-        \"pnSessionRead\",\n-        \"pnSessionWrite\",\n-        \"pnSessionDestroy\",\n-        \"pnSessionGC\"\n-    );\n-    return true;\n-}\n-\n-/*\n- * Session variables here are a bit 'different'.  Because they sit in the\n- * global namespace we use a couple of helper functions to give them their\n- * own prefix, and also to force users to set new values for them if they\n- * require.  This avoids blatant or accidental over-writing of session\n- * variables.\n- *\n-*/\n-\n-/**\n- * Get a session variable\n- *\n- * @param name name of the session variable to get\n- */\n-function pnSessionGetVar($name)\n-{\n-    global $HTTP_SESSION_VARS;\n-\n-    $var = \"PNSV$name\";\n-\n-    global $$var;\n-    if (!empty($HTTP_SESSION_VARS[$var])) {\n-        return $HTTP_SESSION_VARS[$var];\n-    }\n-\n-    return;\n-}\n-\n-/**\n- * Set a session variable\n- * @param name name of the session variable to set\n- * @param value value to set the named session variable\n- */\n-function pnSessionSetVar($name, $value)\n-{\n-    global $HTTP_SESSION_VARS;\n-        $var = \"PNSV$name\";\n-\n-        global $$var;\n-    $$var = $value;\n-    $_SESSION[$var]=$value;\n-\n-        return true;\n-}\n-\n-/**\n- * Delete a session variable\n- * @param name name of the session variable to delete\n- */\n-function pnSessionDelVar($name)\n-{\n-    $var = \"PNSV$name\";\n-\n-    global $$var;\n-    // Fix for PHP >4.0.6 By John Barnett (johnpb)\n-    //unset($$var);\n-    unset($GLOBALS[$var]);\n-\n-    unset($_SESSION[$var]);\n-\n-    return true;\n-}\n-\n-/**\n- * Initialise session\n- */\n-function pnSessionInit()\n-{\n-\n-    global $HTTP_SERVER_VARS;\n-    list($dbconn) = pnDBGetConn();\n-    $pntable = pnDBGetTables();\n-\n-    // First thing we do is ensure that there is no attempted pollution\n-    // of the session namespace\n-    //--pennfirm\n-/*    foreach($GLOBALS as $k=>$v) {\n-        if (preg_match('/^PNSV/', $k)) {\n-            return false;\n-        }\n-    }\n-*/\n-    // Kick it\n-    if (!session_id) {\n-        session_start();\n-    }\n-\n-    // Have to re-write the cache control header to remove no-save, this\n-    // allows downloading of files to disk for application handlers\n-    // adam_baum - no-cache was stopping modules (andromeda) from caching the playlists, et al.\n-    // any strange behaviour encountered, revert to commented out code.\n-    //Header('Cache-Control: no-cache, must-revalidate, post-check=0, pre-check=0');\n-    Header('Cache-Control: cache');\n-\n-    $sessid = session_id();\n-\n-    // Get (actual) client IP addr\n-    $ipaddr = $HTTP_SERVER_VARS['REMOTE_ADDR'];\n-    if (empty($ipaddr)) {\n-        $ipaddr = getenv('REMOTE_ADDR');\n-    }\n-\n-    if (!empty($HTTP_SERVER_VARS['HTTP_CLIENT_IP'])) {\n-        $ipaddr = $HTTP_SERVER_VARS['HTTP_CLIENT_IP'];\n-    }\n-\n-    $tmpipaddr = getenv('HTTP_CLIENT_IP');\n-    if (!empty($tmpipaddr)) {\n-        $ipaddr = $tmpipaddr;\n-    }\n-\n-    if (!empty($HTTP_SERVER_VARS['HTTP_X_FORWARDED_FOR'])) {\n-        $ipaddr = preg_replace('/,.*/', '', $HTTP_SERVER_VARS['HTTP_X_FORWARDED_FOR']);\n-    }\n-\n-    $tmpipaddr = getenv('HTTP_X_FORWARDED_FOR');\n-    if (!empty($tmpipaddr)) {\n-        $ipaddr = preg_replace('/,.*/', '', $tmpipaddr);\n-    }\n-\n-    $sessioninfocolumn = &$pntable['session_info_column'];\n-    $sessioninfotable = $pntable['session_info'];\n-\n-    $query = \"SELECT $sessioninfocolumn[ipaddr]\n-              FROM $sessioninfotable\n-              WHERE $sessioninfocolumn[sessid] = '\" . pnVarPrepForStore($sessid) . \"'\";\n-\n-    $result = $dbconn->Execute($query);\n-    if ($dbconn->ErrorNo() != 0) {\n-        return false;\n-    }\n-\n-    if (!$result->EOF) {\n-// jgm - this has been commented out so that the nice AOL people\n-//       can view PN pages, will examine full implications of this\n-//       later\n-//        list($dbipaddr) = $result->fields;\n-        $result->Close();\n-\n-//        if ($ipaddr == $dbipaddr) {\n-            pnSessionCurrent($sessid);\n-//        } else {\n-//          // Mismatch - destroy the session\n-//          session_destroy();\n-//          pnRedirect('index.php');\n-//          return false;\n-//        }\n-    } else {\n-        pnSessionNew($sessid, $ipaddr);\n-\n-        // Generate a random number, used for\n-        // some authentication\n-        srand((double)microtime()*1000000);\n-        pnSessionSetVar('rand', rand());\n-    }\n-\n-    return true;\n-}\n-\n-/**\n- * Continue a current session\n- * @private\n- * @param sessid the session ID\n- */\n-function pnSessionCurrent($sessid)\n-{\n-    list($dbconn) = pnDBGetConn();\n-    $pntable = pnDBGetTables();\n-\n-    $sessioninfocolumn = &$pntable['session_info_column'];\n-    $sessioninfotable = $pntable['session_info'];\n-\n-    // Touch the last used time\n-    $query = \"UPDATE $sessioninfotable\n-              SET $sessioninfocolumn[lastused] = \" . time() . \"\n-              WHERE $sessioninfocolumn[sessid] = '\" . pnVarPrepForStore($sessid) . \"'\";\n-\n-    $result = $dbconn->Execute($query);\n-\n-    if ($dbconn->ErrorNo() != 0) {\n-        return false;\n-    }\n-\n-    return true;\n-}\n-\n-/**\n- * Create a new session\n- * @private\n- * @param sessid the session ID\n- * @param ipaddr the IP address of the host with this session\n- */\n-function pnSessionNew($sessid, $ipaddr)\n-{\n-    list($dbconn) = pnDBGetConn();\n-    $pntable = pnDBGetTables();\n-\n-    $sessioninfocolumn = &$pntable['session_info_column'];\n-    $sessioninfotable = $pntable['session_info'];\n-\n-    $query = \"INSERT INTO $sessioninfotable\n-                 ($sessioninfocolumn[sessid],\n-                  $sessioninfocolumn[ipaddr],\n-                  $sessioninfocolumn[uid],\n-                  $sessioninfocolumn[firstused],\n-                  $sessioninfocolumn[lastused])\n-              VALUES\n-                 ('\" . pnVarPrepForStore($sessid) . \"',\n-                  '\" . pnVarPrepForStore($ipaddr) . \"',\n-                  0,\n-                  \" . time() . \",\n-                  \" . time() . \")\";\n-\n-    $dbconn->Execute($query);\n-\n-    if ($dbconn->ErrorNo() != 0) {\n-        return false;\n-    }\n-\n-    return true;\n-}\n-\n-/**\n- * PHP function to open the session\n- * @private\n- */\n-function pnSessionOpen($path, $name)\n-{\n-    // Nothing to do - database opened elsewhere\n-    return true;\n-}\n-\n-/**\n- * PHP function to close the session\n- * @private\n- */\n-function pnSessionClose()\n-{\n-    // Nothing to do - database closed elsewhere\n-    return true;\n-}\n-\n-/**\n- * PHP function to read a set of session variables\n- * @private\n- */\n-function pnSessionRead($sessid)\n-{\n-    list($dbconn) = pnDBGetConn();\n-    $pntable = pnDBGetTables();\n-\n-    $sessioninfocolumn = &$pntable['session_info_column'];\n-    $sessioninfotable = $pntable['session_info'];\n-\n-    $query = \"SELECT $sessioninfocolumn[vars]\n-              FROM $sessioninfotable\n-              WHERE $sessioninfocolumn[sessid] = '\" . pnVarPrepForStore($sessid) . \"'\";\n-    $result = $dbconn->Execute($query);\n-\n-    if ($dbconn->ErrorNo() != 0) {\n-        return false;\n-    }\n-\n-    if (!$result->EOF) {\n-        list($value) = $result->fields;\n-    } else {\n-        $value = '';\n-    }\n-\n-    $result->Close();\n-\n-    return($value);\n-}\n-\n-/**\n- * PHP function to write a set of session variables\n- * @private\n- */\n-function pnSessionWrite($sessid, $vars)\n-{\n-    list($dbconn) = pnDBGetConn();\n-    $pntable = pnDBGetTables();\n-\n-    $sessioninfocolumn = &$pntable['session_info_column'];\n-    $sessioninfotable = $pntable['session_info'];\n-\n-    $query = \"UPDATE $sessioninfotable\n-              SET $sessioninfocolumn[vars] = '\" . pnVarPrepForStore($vars) . \"'\n-              WHERE $sessioninfocolumn[sessid] = '\" . pnVarPrepForStore($sessid) . \"'\";\n-    $dbconn->Execute($query);\n-\n-    if ($dbconn->ErrorNo() != 0) {\n-        return false;\n-    }\n-\n-    return true;\n-}\n-\n-/**\n- * PHP function to destroy a session\n- * @private\n- */\n-function pnSessionDestroy($sessid)\n-{\n-    list($dbconn) = pnDBGetConn();\n-    $pntable = pnDBGetTables();\n-\n-    $sessioninfocolumn = &$pntable['session_info_column'];\n-    $sessioninfotable = $pntable['session_info'];\n-\n-    $query = \"DELETE FROM $sessioninfotable\n-              WHERE $sessioninfocolumn[sessid] = '\" . pnVarPrepForStore($sessid) . \"'\";\n-    $dbconn->Execute($query);\n-\n-    if ($dbconn->ErrorNo() != 0) {\n-        return false;\n-    }\n-\n-    return true;\n-}\n-\n-/**\n- * PHP function to garbage collect session information\n- * @private\n- */\n-function pnSessionGC($maxlifetime)\n-{\n-    list($dbconn) = pnDBGetConn();\n-    $pntable = pnDBGetTables();\n-\n-    $sessioninfocolumn = &$pntable['session_info_column'];\n-    $sessioninfotable = $pntable['session_info'];\n-\n-    switch (pnConfigGetVar('seclevel')) {\n-        case 'Low':\n-            // Low security - delete session info if user decided not to\n-            //                remember themself\n-            $where = \"WHERE $sessioninfocolumn[vars] NOT LIKE '%PNSVrememberme|%'\n-                      AND $sessioninfocolumn[lastused] < \" . (time() - (pnConfigGetVar('secinactivemins') * 60));\n-            break;\n-        case 'Medium':\n-            // Medium security - delete session info if session cookie has\n-            //                   expired or user decided not to remember\n-            //                   themself\n-            $where = \"WHERE ($sessioninfocolumn[vars] NOT LIKE '%PNSVrememberme|%'\n-                        AND $sessioninfocolumn[lastused] < \" . (time() - (pnConfigGetVar('secinactivemins') * 60)) . \")\n-                      OR $sessioninfocolumn[firstused] < \" . (time() - (pnConfigGetVar('secmeddays') * 86400));\n-            break;\n-        case 'High':\n-        default:\n-            // High security - delete session info if user is inactive\n-            $where = \"WHERE $sessioninfocolumn[lastused] < \" . (time() - (pnConfigGetVar('secinactivemins') * 60));\n-            break;\n-    }\n-\n-    $query = \"DELETE FROM $sessioninfotable $where\";\n-    $dbconn->Execute($query);\n-\n-    if ($dbconn->ErrorNo() != 0) {\n-        return false;\n-    }\n-\n-    return true;\n-}\n", "diff --git a/interface/main/calendar/includes/pnUser.php b/interface/main/calendar/includes/pnUser.php\ndeleted file mode 100644\nindex 0605e77f7..000000000\n--- a/interface/main/calendar/includes/pnUser.php\n+++ /dev/null\n@@ -1,638 +0,0 @@\n-<?php\n-// File: $Id$\n-// ----------------------------------------------------------------------\n-// POST-NUKE Content Management System\n-// Copyright (C) 2001 by the Post-Nuke Development Team.\n-// http://www.postnuke.com/\n-// ----------------------------------------------------------------------\n-// Based on:\n-// PHP-NUKE Web Portal System - http://phpnuke.org/\n-// Thatware - http://thatware.org/\n-// ----------------------------------------------------------------------\n-// LICENSE\n-//\n-// This program is free software; you can redistribute it and/or\n-// modify it under the terms of the GNU General Public License (GPL)\n-// as published by the Free Software Foundation; either version 2\n-// of the License, or (at your option) any later version.\n-//\n-// This program is distributed in the hope that it will be useful,\n-// but WITHOUT ANY WARRANTY; without even the implied warranty of\n-// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n-// GNU General Public License for more details.\n-//\n-// To read the license please visit http://www.gnu.org/copyleft/gpl.html\n-// ----------------------------------------------------------------------\n-// Original Author of file: Jim McDonald\n-// Purpose of file: User functions\n-// ----------------------------------------------------------------------\n-\n-/*\n- *\n- * Defines\n- *\n- */\n-\n-/*\n- * Data types for User Properties\n- */\n-define('_UDCONST_MANDATORY', -1); // indicates a cord field that can't be removed'\n-define('_UDCONST_CORE', 0); // indicates a core field (HACK, to be removed?)\n-define('_UDCONST_STRING', 1);\n-define('_UDCONST_TEXT', 2);\n-define('_UDCONST_FLOAT', 3);\n-define('_UDCONST_INTEGER', 4);\n-\n-/**\n- * Log the user in\n- * @param uname the name of the user logging in\n- * @param pass the password of the user logging in\n- * @param whether or not to remember this login\n- * @returns bool\n- * @return true if the user successfully logged in, false otherwise\n- */\n-function pnUserLogIn($uname, $pass, $rememberme)\n-{\n-    list($dbconn) = pnDBGetConn();\n-    $pntable = pnDBGetTables();\n-\n-    if (!pnUserLoggedIn()) {\n-        // Get user information\n-        $userscolumn = &$pntable['users_column'];\n-        $userstable = $pntable['users'];\n-\n-        $query = \"SELECT $userscolumn[uid],\n-                         $userscolumn[pass]\n-                  FROM $userstable\n-                  WHERE $userscolumn[uname] = '\" . pnVarPrepForStore($uname) .\"'\";\n-        $result = $dbconn->Execute($query);\n-\n-        if ($result->EOF) {\n-            return false;\n-        }\n-\n-        list($uid, $realpass) = $result->fields;\n-        $result->Close();\n-\n-        // Confirm that passwords match\n-        if (!comparePasswords($pass, $realpass, $uname, substr($realpass, 0, 2))) {\n-            return false;\n-        }\n-\n-        // Set user session information (new table)\n-        $sessioninfocolumn = &$pntable['session_info_column'];\n-        $sessioninfotable = $pntable['session_info'];\n-        $query = \"UPDATE $sessioninfotable\n-                  SET $sessioninfocolumn[uid] = \" . pnVarPrepForStore($uid) . \"\n-                  WHERE $sessioninfocolumn[sessid] = '\" . pnVarPrepForStore(session_id()) . \"'\";\n-        $dbconn->Execute($query);\n-\n-        // Set session variables\n-        pnSessionSetVar('uid', (int)$uid);\n-\n-        if (!empty($rememberme)) {\n-            pnSessionSetVar('rememberme', 1);\n-        }\n-    }\n-\n-     return true;\n-}\n-\n-/**\n- * Compare Passwords\n-  */\n-function comparePasswords($givenpass, $realpass, $username, $cryptSalt = '')\n-{\n-    $compare2crypt = true;\n-    $compare2text = true;\n-    \n-    $system = pnConfigGetVar('system');\n-    \n-    $md5pass = md5($givenpass);\n-    if (strcmp($md5pass, $realpass) == 0) {\n-        return $md5pass;\n-    } elseif ($compare2crypt && $system != \"1\") {\n-        $crypted = false;\n-        if ($cryptSalt != '') {\n-            if (strcmp(crypt($givenpass, $cryptSalt), $realpass) == 0) {\n-                $crypted = true;\n-            }\n-        } else {\n-            if (strcmp(crypt($givenpass, $cryptSalt), $realpass) == 0) {\n-                $crypted = true;\n-            }\n-        }\n-\n-        if ($crypted) {\n-            updateUserPass($username, $md5pass);\n-            return $md5pass;\n-        }\n-    } elseif ($compare2text && strcmp($givenpass, $realpass) == 0) {\n-             updateUserPass($username, $md5pass);\n-             return $md5pass;\n-    }\n-    \n-    return false;\n-}\n-\n-/**\n- * Log the user out\n- * @public\n- * @returns bool\n- * @return true if the user successfully logged out, false otherwise\n- */\n-function pnUserLogOut()\n-{\n-    list($dbconn) = pnDBGetConn();\n-    $pntable = pnDBGetTables();\n-\n-    if (pnUserLoggedIn()) {\n-        // Reset user session information (new table)\n-        $sessioninfocolumn = &$pntable['session_info_column'];\n-        $sessioninfotable = $pntable['session_info'];\n-        $query = \"UPDATE $sessioninfotable\n-                  SET $sessioninfocolumn[uid] = 0\n-                  WHERE $sessioninfocolumn[sessid] = '\" . pnVarPrepForStore(session_id()) . \"'\";\n-        $dbconn->Execute($query);\n-\n-        pnSessionDelVar('rememberme');\n-        pnSessionDelVar('uid');\n-    }\n-}\n-\n-/**\n- * is the user logged in?\n- * @public\n- * @returns bool\n- * @returns true if the user is logged in, false if they are not\n- */\n-function pnUserLoggedIn()\n-{\n-    if (pnSessionGetVar('uid') || $_SESSION['authUser']) {\n-        return true;\n-    } else {\n-        return false;\n-    }\n-}\n-\n-/**\n- * get all user variables\n- * @access public\n- * @author Gregor J. Rothfuss\n- * @since 1.33 - 2002/02/07\n- * @param uid the user id of the user\n- * @returns array\n- * @return an associative array with all variables for a user\n- */\n-function pnUserGetVars($uid)\n-{\n-    list($dbconn) = pnDBGetConn();\n-    $pntable = pnDBGetTables();\n-    $vars = array();\n-\n-    // TODO: review this code for performance.\n-\n-    $propertiestable = $pntable['user_property'];\n-    $userstable = $pntable['users'];\n-    $datatable = $pntable['user_data'];\n-    $userscolumn = &$pntable['users_column'];\n-    $datacolumn = &$pntable['user_data_column'];\n-    $propcolumn = &$pntable['user_property_column'];\n-\n-    $query = \"SELECT $propcolumn[prop_label] as label, $datacolumn[uda_value] as value\n-              FROM $datatable, $propertiestable\n-              WHERE $datacolumn[uda_uid] = '\" . pnVarPrepForStore($uid) .\"' \"\n-              .\"AND $datacolumn[uda_propid] = $propcolumn[prop_id]\";\n-\n-    $result = $dbconn->Execute($query);\n-\n-    while (!$result->EOF) {\n-        $uservars = $result->GetRowAssoc(false);\n-        $vars[$uservars['label']] = $uservars['value'];\n-        $result->MoveNext();\n-    }\n-\n-    $result->Close();\n-\n-    $query = \"SELECT *\n-              FROM $userstable\n-              WHERE $userscolumn[uid] = \" . pnVarPrepForStore($uid);\n-    $result = $dbconn->Execute($query);\n-\n-    if ($result->EOF) {\n-        return false;\n-    }\n-\n-    $corevars = $result->GetRowAssoc(false);\n-    $result->Close();\n-\n-    $vars = array_merge($vars, $corevars);\n-\n-    // Aliasing if required\n-    if (empty($vars['uid'])) {\n-        $vars['uid'] = $vars['pn_uid'];\n-        $vars['email'] = $vars['pn_email'];\n-        $vars['femail'] = $vars['pn_femail'];\n-        $vars['name'] = $vars['pn_name'];\n-        $vars['theme'] = $vars['pn_theme'];\n-        $vars['timezone_offset'] = $vars['pn_timezone_offset'];\n-        $vars['uname'] = $vars['pn_uname'];\n-        $vars['ublock'] = $vars['pn_ublock'];\n-        $vars['ublockon'] = $vars['pn_ublockon'];\n-        $vars['user_avatar'] = $vars['pn_user_avatar'];\n-        $vars['user_icq'] = $vars['pn_user_icq'];\n-        $vars['user_aim'] = $vars['pn_user_aim'];\n-        $vars['user_yim'] = $vars['pn_user_yim'];\n-        $vars['user_msnm'] = $vars['pn_user_msnm'];\n-        $vars['user_from'] = $vars['pn_user_from'];\n-        $vars['user_occ'] = $vars['pn_user_occ'];\n-        $vars['user_intrest'] = $vars['pn_user_intrest'];\n-        $vars['user_sig'] = $vars['pn_user_sig'];\n-        $vars['bio'] = $vars['pn_bio'];\n-        $vars['url'] = $vars['pn_url'];\n-        $vars['storynum'] = $vars['pn_storynum'];\n-        $vars['umode'] = $vars['pn_umode'];\n-        $vars['uorder'] = $vars['pn_uorder'];\n-        $vars['thold'] = $vars['pn_thold'];\n-        $vars['noscore'] = $vars['pn_noscore'];\n-        $vars['commentmax'] = $vars['pn_commentmax'];\n-    }\n-\n-    return($vars);\n-}\n-\n-/**\n- * get a user variable\n- * @public\n- * @author Jim McDonald\n- * @param name the name of the variable\n- * @param uid the user to get the variable for\n- * @returns string\n- * @return the value of the user variable if successful, false otherwise\n- */\n-function pnUserGetVar($name, $uid = -1)\n-{\n-    static $vars = array();\n-\n-    if (empty($name)) {\n-        return;\n-    }\n-\n-    if ($uid == -1) {\n-        $uid = pnSessionGetVar('uid');\n-    }\n-\n-    if (empty($uid)) {\n-        return;\n-    }\n-\n-    // Get this user's variables if not already obtained\n-    if (!isset($vars[$uid])) {\n-        $vars[$uid] = pnUserGetVars($uid);\n-    }\n-\n-    // Return the variable\n-    if (isset($vars[$uid][$name])) {\n-        return $vars[$uid][$name];\n-    } else {\n-        return;\n-    }\n-}\n-\n-/**\n- * set a user variable\n- * @access public\n- * @author Gregor J. Rothfuss\n- * @since 1.23 - 2002/02/01\n- * @param name the name of the variable\n- * @param value the value of the variable\n- * @returns bool\n- * @return true if the set was successful, false otherwise\n- */\n-function pnUserSetVar($name, $value)\n-{\n-    list($dbconn) = pnDBGetConn();\n-    $pntable = pnDBGetTables();\n-\n-    if (empty($name)) {\n-        return false;\n-    }\n-\n-    $uid = pnSessionGetVar('uid');\n-    if (empty($uid)) {\n-        return false;\n-    }\n-\n-    $propertiestable = $pntable['user_property'];\n-    $datatable = $pntable['user_data'];\n-    $propcolumns = &$pntable['user_property_column'];\n-    $datacolumns = &$pntable['user_data_column'];\n-\n-    // Confirm that this is a known value\n-    $query = \"SELECT $propcolumns[prop_id],\n-                     $propcolumns[prop_dtype]\n-              FROM $propertiestable\n-              WHERE $propcolumns[prop_label] = '\" . pnVarPrepForStore($name) .\"'\";\n-    $result = $dbconn->Execute($query);\n-\n-    if ($result->EOF) {\n-        return false;\n-    }\n-\n-    list ($id, $type) = $result->fields;\n-    // check for existence of the variable in user data\n-    $query = \"SELECT $datacolumns[uda_id]\n-              FROM $datatable\n-              WHERE $datacolumns[uda_propid] = '\" . pnVarPrepForStore($id) .\"'\n-              AND $datacolumns[uda_uid] = '\" . pnVarPrepForStore($uid) .\"'\";\n-    $result = $dbconn->Execute($query);\n-\n-    // jgm - this won't work in databases that care about typing\n-    // but this should get fixed when we move to the dynamic user\n-    // variables setup\n-    // TODO: do some checking with $type to maybe do conditional sql\n-\n-    if ($result->EOF) {\n-           // record does not exist\n-\n-           $query = \"INSERT INTO $datatable\n-                  ($datacolumns[uda_propid],\n-                   $datacolumns[uda_uid],\n-                   $datacolumns[uda_value])\n-                   VALUES ('\".pnVarPrepForStore($id).\"',\n-                          '\".pnVarPrepForStore($uid).\"',\n-                          '\".pnVarPrepForStore($value).\"')\";\n-           $dbconn->Execute($query);\n-\n-        if ($dbconn->ErrorNo() != 0) {\n-            return false;\n-        }\n-    } else {\n-           // existing record\n-\n-           $query = \"UPDATE $datatable\n-                     SET $datacolumns[uda_value] = '\" . pnVarPrepForStore($value) . \"'\n-                     WHERE $datacolumns[uda_propid] = '\" . pnVarPrepForStore($id) .\"' AND\n-                     $datacolumns[uda_uid] = '\" . pnVarPrepForStore($uid) .\"'\";\n-           $dbconn->Execute($query);\n-\n-        if ($dbconn->ErrorNo() != 0) {\n-            return false;\n-        }\n-    }\n-\n-    return true;\n-}\n-\n-\n-/**\n- * delete the contents of a user variable\n- * @access public\n- * @author Gregor J. Rothfuss\n- * @since 1.23 - 2002/02/01\n- * @param name the name of the variable\n- * @returns bool\n- * @return true on success, false on failure\n- */\n-function pnUserDelVar($name)\n-{\n-    list($dbconn) = pnDBGetConn();\n-    $pntable = pnDBGetTables();\n-\n-    $propertiestable = $pntable['user_property'];\n-    $datatable = $pntable['user_data'];\n-    $propcolumns = &$pntable['user_property_column'];\n-    $datacolumns = &$pntable['user_data_column'];\n-\n-    // Prevent deletion of core fields (duh)\n-    if (empty($name) || ($name == 'uid') || ($name == 'email') ||\n-    ($name == 'password') || ($name == 'uname')) {\n-        return false;\n-    }\n-\n-    $uid = pnSessionGetVar('uid');\n-    if (empty($uid)) {\n-        return false;\n-    }\n-\n-    // get property id for cascading delete later\n-    $query = \"SELECT $propcolumns[prop_id] from $propertiestable\n-              WHERE $propcolumns[prop_label] = '\" . pnVarPrepForStore($name) .\"'\";\n-    $result = $dbconn->Execute($query);\n-\n-    if ($result->EOF) {\n-        return false;\n-    }\n-\n-    list ($id) = $result->fields;\n-\n-    $query = \"DELETE from $propertiestable\n-              WHERE $propcolumns[prop_id] = '\" . pnVarPrepForStore($id) .\"'\";\n-    $result = $dbconn->Execute($query);\n-\n-    if ($dbconn->ErrorNo() != 0) {\n-        return false;\n-    }\n-\n-    // delete variable from user data for all users\n-    $query = \"DELETE from $datatable\n-              WHERE $datacolumns[uda_propid] = '\" . pnVarPrepForStore($id) .\"'\";\n-    $dbconn->Execute($query);\n-\n-    if ($dbconn->ErrorNo() != 0) {\n-        return false;\n-    }\n-\n-    return true;\n-}\n-\n-/**\n- * get the user's theme\n- * @public\n- * @returns string\n- * @return the name of the user's theme\n- */\n-function pnUserGetTheme()\n-{\n-    // Order of theme priority:\n-    // - page-specific\n-    // - user\n-    // - system\n-    // - PostNuke\n-\n-    // Page-specific theme\n-    $pagetheme = pnVarCleanFromInput('theme');\n-    if (!empty($pagetheme)) {\n-        if (@opendir(\"themes/\" . pnVarPrepForOS($pagetheme))) {\n-            return $pagetheme;\n-        }\n-    }\n-\n-    if ((pnUserLoggedIn()) && (!pnConfigGetVar('theme_change'))) {\n-        $usertheme = pnUserGetVar('theme');\n-        // modification mouzaia .71\n-        if (!empty($usertheme)) {\n-            if (@opendir(WHERE_IS_PERSO.\"themes/\".pnVarPrepForOS($usertheme))) {\n-                return $usertheme;\n-            }\n-\n-            if (@opendir(\"themes/\" . pnVarPrepForOS($usertheme))) {\n-                return $usertheme;\n-            }\n-        }\n-    }\n-\n-    $systemtheme = pnConfigGetVar('Default_Theme');\n-    if (!empty($systemtheme)) {\n-        if (@opendir(WHERE_IS_PERSO.\"themes/\" . pnVarPrepForOS($systemtheme))) {\n-            return $systemtheme;\n-        }\n-\n-        if (@opendir(\"themes/\" . pnVarPrepForOS($systemtheme))) {\n-            return $systemtheme;\n-        }\n-    }\n-\n-// \twhy is this hard coded ??????\n-//  $defaulttheme = 'PostNuke';\n-    $defaulttheme = pnConfigGetVar('Default_Theme');\n-    if (@opendir(WHERE_IS_PERSO.\"themes/\" . pnVarPrepForOS($defaulttheme))) {\n-        return $defaulttheme;\n-    }\n-\n-    if (@opendir(\"themes/\" . pnVarPrepForOS($defaulttheme))) {\n-        return $defaulttheme;\n-    }\n-\n-    return false;\n-}\n-\n-/**\n- * get the user's language\n- * @public\n- * <br>\n- * jgm - the language parameter should be a user variable, not a\n- *       session variable\n- * @returns string\n- * @return the name of the user's language\n- */\n-function pnUserGetLang()\n-{\n-    $lang = pnSessionGetVar('lang');\n-    if (!empty($lang)) {\n-        return $lang;\n-    } else {\n-        return pnConfigGetVar('language');\n-    }\n-}\n-\n-/**\n- * get the options for commenting\n- * <br>\n- * This function is deprecated, use <code>pnUserGetcommentArray()</code> in\n- * conjunction with <code>pnModURL()</code> to produce relevant URLs\n- * @deprecated\n- * @public\n- * @returns string\n- * @return the comment options string\n- */\n-function pnUserGetCommentOptions()\n-{\n-    if (pnUserLoggedIn()) {\n-        $mode = pnUserGetVar('umode');\n-        $order = pnUserGetVar('uorder');\n-        $thold = pnUserGetVar('thold');\n-    }\n-\n-    if (empty($mode)) {\n-        $mode = 'thread';\n-    }\n-\n-    if (empty($order)) {\n-        $order = 0;\n-    }\n-\n-    if (empty($thold)) {\n-        $thold = 0;\n-    }\n-\n-    return(\"mode=$mode&amp;order=$order&amp;thold=$thold\");\n-}\n-\n-/**\n- * get the options for commenting\n- * @public\n- * @returns array\n- * @return the comment options array\n- */\n-function pnUserGetCommentOptionsArray()\n-{\n-    if (pnUserLoggedIn()) {\n-        $mode = pnUserGetVar('umode');\n-        $order = pnUserGetVar('uorder');\n-        $thold = pnUserGetVar('thold');\n-    }\n-\n-    if (empty($mode)) {\n-        $mode = 'thread';\n-    }\n-\n-    if (empty($order)) {\n-        $order = 0;\n-    }\n-\n-    if (empty($thold)) {\n-        $thold = 0;\n-    }\n-\n-    return array('mode' => $mode,\n-                 'order' => $order,\n-                 'thold' => $thold);\n-}\n-\n-/**\n- * get a list of user information\n- * @public\n- * @returns array\n- * @return array of user arrays\n- */\n-function pnUserGetAll()\n-{\n-    list($dbconn) = pnDBGetConn();\n-    $pntable = pnDBGetTables();\n-\n-    $userstable = $pntable['users'];\n-    $userscolumn = &$pntable['users_column'];\n-    $sql = \"SELECT $userscolumn[uname],\n-                   $userscolumn[uid],\n-                   $userscolumn[name],\n-                   $userscolumn[email],\n-                   $userscolumn[url],\n-                   $userscolumn[user_avatar]\n-            FROM $userstable\";\n-    $result = $dbconn->Execute($sql);\n-\n-    if ($dbconn->ErrorNo() != 0) {\n-        return;\n-    }\n-\n-    if ($result->EOF) {\n-        return false;\n-    }\n-\n-    $resarray = array();\n-    while (!$result->EOF) {\n-        list($uname, $uid, $name, $email, $url, $user_avatar) = $result->fields;\n-        $result->MoveNext();\n-        $resarray[$uid] = array('uname' => $uname,\n-                                'uid' => $uid,\n-                                'name' => $name,\n-                                'email' => $email,\n-                                'url' => $url,\n-                                'avatar' => $user_avatar);\n-    }\n-\n-    $result->Close();\n-\n-    return $resarray;\n-}\n", "diff --git a/interface/main/calendar/includes/pnre.inc.php b/interface/main/calendar/includes/pnre.inc.php\ndeleted file mode 100644\nindex ca561414a..000000000\n--- a/interface/main/calendar/includes/pnre.inc.php\n+++ /dev/null\n@@ -1,69 +0,0 @@\n-<?php\n-\n-function pnSecAuthAction($a, $b, $c, $d)\n-{\n-//\techo \"forcing auth to true\";\n-    return true;\n-}\n-\n-/**\n- * generate an authorisation key\n- * <br>\n- * The authorisation key is used to confirm that actions requested by a\n- * particular user have followed the correct path.  Any stage that an\n- * action could be made (e.g. a form or a 'delete' button) this function\n- * must be called and the resultant string passed to the client as either\n- * a GET or POST variable.  When the action then takes place it first calls\n- * <code>pnSecConfirmAuthKey()</code> to ensure that the operation has\n- * indeed been manually requested by the user and that the key is valid\n- *\n- * @public\n- * @param modname the module this authorisation key is for (optional)\n- * @returns string\n- * @return an encrypted key for use in authorisation of operations\n- */\n-function pnSecGenAuthKey($modname = '')\n-{\n-\n-    if (empty($modname)) {\n-        $modname = pnVarCleanFromInput('module');\n-    }\n-\n-// Date gives extra security but leave it out for now\n-//    $key = pnSessionGetVar('rand') . $modname . date ('YmdGi');\n-    $key = pnSessionGetVar('rand') . strtolower($modname);\n-    // Encrypt key\n-    $authid = md5($key);\n-    // Return encrypted key\n-    return $authid;\n-}\n-\n-\n-/**\n- * confirm an authorisation key is valid\n- * <br>\n- * See description of <code>pnSecGenAuthKey</code> for information on\n- * this function\n- * @public\n- * @returns bool\n- * @return true if the key is valid, false if it is not\n- */\n-function pnSecConfirmAuthKey($preview = false)\n-{\n-    list($module, $authid) = pnVarCleanFromInput('module', 'authid');\n-\n-    // Regenerate static part of key\n-    $partkey = pnSessionGetVar('rand') . strtolower($module);\n-    if ((md5($partkey)) == $authid) {\n-        // Match - generate new random number for next key and leave happy\n-        if (!$preview) {\n-            srand((double)microtime()*1000000);\n-            pnSessionSetVar('rand', rand());\n-        }\n-\n-        return true;\n-    }\n-\n-    // Not found, assume invalid\n-    return false;\n-}\n", "diff --git a/interface/main/calendar/includes/pntables.php b/interface/main/calendar/includes/pntables.php\ndeleted file mode 100644\nindex 128b440b6..000000000\n--- a/interface/main/calendar/includes/pntables.php\n+++ /dev/null\n@@ -1,668 +0,0 @@\n-<?php\n-// File: $Id$ $Name$\n-// ----------------------------------------------------------------------\n-// POST-NUKE Content Management System\n-// Copyright (C) 2001 by the Post-Nuke Development Team.\n-// http://www.postnuke.com/\n-// ----------------------------------------------------------------------\n-// Based on:\n-// Thatware - http://thatware.org/\n-// PHP-NUKE Web Portal System - http://phpnuke.org/\n-// ----------------------------------------------------------------------\n-// LICENSE\n-//\n-// This program is free software; you can redistribute it and/or\n-// modify it under the terms of the GNU General Public License (GPL)\n-// as published by the Free Software Foundation; either version 2\n-// of the License, or (at your option) any later version.\n-//\n-// This program is distributed in the hope that it will be useful,\n-// but WITHOUT ANY WARRANTY; without even the implied warranty of\n-// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n-// GNU General Public License for more details.\n-//\n-// To read the license please visit http://www.gnu.org/copyleft/gpl.html\n-// ----------------------------------------------------------------------\n-// Original Author of file:\n-// Purpose of file:\n-// ----------------------------------------------------------------------\n-\n-\n-$prefix = $pnconfig['prefix'];\n-\n-$pntable = array();\n-\n-$autonews = $prefix . '_autonews';\n-$pntable['autonews'] = $autonews;\n-$pntable['autonews_column'] = array ('anid'      => $autonews . '.pn_anid',\n-                                     'catid'     => $autonews . '.pn_catid',\n-                                     'aid'       => $autonews . '.pn_aid',\n-                                     'title'     => $autonews . '.pn_title',\n-                                     'time'      => $autonews . '.pn_time',\n-                                     'hometext'  => $autonews . '.pn_hometext',\n-                                     'bodytext'  => $autonews . '.pn_bodytext',\n-                                     'topic'     => $autonews . '.pn_topic',\n-                                     'informant' => $autonews . '.pn_informant',\n-                                     'notes'     => $autonews . '.pn_notes',\n-                                     'ihome'     => $autonews . '.pn_ihome',\n-                                     'alanguage' => $autonews . '.pn_language',\n-                                     'language'  => $autonews . '.pn_language',\n-                                     'withcomm'  => $autonews . '.pn_withcomm');\n-\n-$banner = $prefix . '_banner';\n-$pntable['banner'] = $banner;\n-$pntable['banner_column'] = array ('bid'      => $banner . '.pn_bid',\n-                                   'cid'      => $banner . '.pn_cid',\n-                                   'type'     => $banner . '.pn_type',\n-                                   'imptotal' => $banner . '.pn_imptotal',\n-                                   'impmade'  => $banner . '.pn_impmade',\n-                                   'clicks'   => $banner . '.pn_clicks',\n-                                   'imageurl' => $banner . '.pn_imageurl',\n-                                   'clickurl' => $banner . '.pn_clickurl',\n-                                   'date'     => $banner . '.pn_date');\n-\n-$bannerclient = $prefix . '_bannerclient';\n-$pntable['bannerclient'] = $bannerclient;\n-$pntable['bannerclient_column'] = array ('cid'       => $bannerclient . '.pn_cid',\n-                                         'name'      => $bannerclient . '.pn_name',\n-                                         'contact'   => $bannerclient . '.pn_contact',\n-                                         'email'     => $bannerclient . '.pn_email',\n-                                         'login'     => $bannerclient . '.pn_login',\n-                                         'passwd'    => $bannerclient . '.pn_passwd',\n-                                         'extrainfo' => $bannerclient . '.pn_extrainfo');\n-\n-$bannerfinish = $prefix . '_bannerfinish';\n-$pntable['bannerfinish'] = $bannerfinish;\n-$pntable['bannerfinish_column'] = array ('bid'         => $bannerfinish . '.pn_bid',\n-                                         'cid'         => $bannerfinish . '.pn_cid',\n-                                         'impressions' => $bannerfinish . '.pn_impressions',\n-                                         'clicks'      => $bannerfinish . '.pn_clicks',\n-                                         'datestart'   => $bannerfinish . '.pn_datestart',\n-                                         'dateend'     => $bannerfinish . '.pn_dateend');\n-\n-$blocks = $prefix . '_blocks';\n-$pntable['blocks'] = $blocks;\n-$pntable['blocks_column'] = array ('bid'         => $blocks . '.pn_bid',\n-                                   'bkey'        => $blocks . '.pn_bkey',\n-                                   'title'       => $blocks . '.pn_title',\n-                                   'content'     => $blocks . '.pn_content',\n-                                   'url'         => $blocks . '.pn_url',\n-                                   'mid'         => $blocks . '.pn_mid',\n-                                   'position'    => $blocks . '.pn_position',\n-                                   'weight'      => $blocks . '.pn_weight',\n-                                   'active'      => $blocks . '.pn_active',\n-                                   'refresh'     => $blocks . '.pn_refresh',\n-                                   'last_update' => $blocks . '.pn_last_update',\n-                                   'blanguage'   => $blocks . '.pn_language',\n-                                   'language'    => $blocks . '.pn_language');\n-\n-$blocks_buttons = $prefix . '_blocks_buttons';\n-$pntable['blocks_buttons'] = $blocks_buttons;\n-$pntable['blocks_buttons_column'] = array ('id'     => $blocks_buttons . '.pn_id',\n-                                           'bid'    => $blocks_buttons . '.pn_bid',\n-                                           'title'  => $blocks_buttons . '.pn_title',\n-                                           'url'    => $blocks_buttons . '.pn_url',\n-                                           'images' => $blocks_buttons . '.pn_images');\n-\n-$comments = $prefix . '_comments';\n-$pntable['comments'] = $comments;\n-$pntable['comments_column'] = array ('tid'       => $comments . '.pn_tid',\n-                                     'pid'       => $comments . '.pn_pid',\n-                                     'sid'       => $comments . '.pn_sid',\n-                                     'date'      => $comments . '.pn_date',\n-                                     'name'      => $comments . '.pn_name',\n-                                     'email'     => $comments . '.pn_email',\n-                                     'url'       => $comments . '.pn_url',\n-                                     'host_name' => $comments . '.pn_host_name',\n-                                     'subject'   => $comments . '.pn_subject',\n-                                     'comment'   => $comments . '.pn_comment',\n-                                     'score'     => $comments . '.pn_score',\n-                                     'reason'    => $comments . '.pn_reason');\n-\n-$counter = $prefix . '_counter';\n-$pntable['counter'] = $counter;\n-$pntable['counter_column'] = array ('type'  => $counter . '.pn_type',\n-                                    'var'   => $counter . '.pn_var',\n-                                    'count' => $counter . '.pn_count');\n-\n-$downloads_categories = $prefix . '_downloads_categories';\n-$pntable['downloads_categories'] = $downloads_categories;\n-$pntable['downloads_categories_column'] = array ('cid'          => $downloads_categories . '.pn_cid',\n-                                                 'title'        => $downloads_categories . '.pn_title',\n-                                                 'cdescription' => $downloads_categories . '.pn_description');\n-\n-$downloads_downloads = $prefix . '_downloads_downloads';\n-$pntable['downloads_downloads'] = $downloads_downloads;\n-$pntable['downloads_downloads_column'] = array ('lid'                   => $downloads_downloads . '.pn_lid',\n-                                                'cid'                   => $downloads_downloads . '.pn_cid',\n-                                                'sid'                   => $downloads_downloads . '.pn_sid',\n-                                                'title'                 => $downloads_downloads . '.pn_title',\n-                                                'url'                   => $downloads_downloads . '.pn_url',\n-                                                'description'           => $downloads_downloads . '.pn_description',\n-                                                'date'                  => $downloads_downloads . '.pn_date',\n-                                                'name'                  => $downloads_downloads . '.pn_name',\n-                                                'email'                 => $downloads_downloads . '.pn_email',\n-                                                'hits'                  => $downloads_downloads . '.pn_hits',\n-                                                'submitter'             => $downloads_downloads . '.pn_submitter',\n-                                                'downloadratingsummary' => $downloads_downloads . '.pn_ratingsummary',\n-                                                'totalvotes'            => $downloads_downloads . '.pn_totalvotes',\n-                                                'totalcomments'         => $downloads_downloads . '.pn_totalcomments',\n-                                                'filesize'              => $downloads_downloads . '.pn_filesize',\n-                                                'version'               => $downloads_downloads . '.pn_version',\n-                                                'homepage'              => $downloads_downloads . '.pn_homepage');\n-\n-$downloads_editorials = $prefix . '_downloads_editorials';\n-$pntable['downloads_editorials'] = $downloads_editorials;\n-$pntable['downloads_editorials_column'] = array ('downloadid'         => $downloads_editorials . '.pn_id',\n-                                                 'adminid'            => $downloads_editorials . '.pn_adminid',\n-                                                 'editorialtimestamp' => $downloads_editorials . '.pn_timestamp',\n-                                                 'editorialtext'      => $downloads_editorials . '.pn_text',\n-                                                 'editorialtitle'     => $downloads_editorials . '.pn_title');\n-\n-$downloads_modrequest = $prefix . '_downloads_modrequest';\n-$pntable['downloads_modrequest'] = $downloads_modrequest;\n-$pntable['downloads_modrequest_column'] = array ('requestid'       => $downloads_modrequest . '.pn_requestid',\n-                                                 'lid'             => $downloads_modrequest . '.pn_lid',\n-                                                 'cid'             => $downloads_modrequest . '.pn_cid',\n-                                                 'sid'             => $downloads_modrequest . '.pn_sid',\n-                                                 'title'           => $downloads_modrequest . '.pn_title',\n-                                                 'url'             => $downloads_modrequest . '.pn_url',\n-                                                 'description'     => $downloads_modrequest . '.pn_description',\n-                                                 'modifysubmitter' => $downloads_modrequest . '.pn_modifysubmitter',\n-                                                 'brokendownload'  => $downloads_modrequest . '.pn_brokendownload',\n-                                                 'name'            => $downloads_modrequest . '.pn_name',\n-                                                 'email'           => $downloads_modrequest . '.pn_email',\n-                                                 'filesize'        => $downloads_modrequest . '.pn_filesize',\n-                                                 'version'         => $downloads_modrequest . '.pn_version',\n-                                                 'homepage'        => $downloads_modrequest . '.pn_homepage');\n-\n-$downloads_newdownload = $prefix . '_downloads_newdownload';\n-$pntable['downloads_newdownload'] = $downloads_newdownload;\n-$pntable['downloads_newdownload_column'] = array ('lid'         => $downloads_newdownload . '.pn_lid',\n-                                                  'cid'         => $downloads_newdownload . '.pn_cid',\n-                                                  'sid'         => $downloads_newdownload . '.pn_sid',\n-                                                  'title'       => $downloads_newdownload . '.pn_title',\n-                                                  'url'         => $downloads_newdownload . '.pn_url',\n-                                                  'description' => $downloads_newdownload . '.pn_description',\n-                                                  'name'        => $downloads_newdownload . '.pn_name',\n-                                                  'email'       => $downloads_newdownload . '.pn_email',\n-                                                  'submitter'   => $downloads_newdownload . '.pn_submitter',\n-                                                  'filesize'    => $downloads_newdownload . '.pn_filesize',\n-                                                  'version'     => $downloads_newdownload . '.pn_version',\n-                                                  'homepage'    => $downloads_newdownload . '.pn_homepage');\n-\n-$downloads_subcategories = $prefix . '_downloads_subcategories';\n-$pntable['downloads_subcategories'] = $downloads_subcategories;\n-$pntable['downloads_subcategories_column'] = array ('sid'   => $downloads_subcategories . '.pn_sid',\n-                                                    'cid'   => $downloads_subcategories . '.pn_cid',\n-                                                    'title' => $downloads_subcategories . '.pn_title');\n-\n-$downloads_votedata = $prefix . '_downloads_votedata';\n-$pntable['downloads_votedata'] = $downloads_votedata;\n-$pntable['downloads_votedata_column'] = array ('ratingdbid'      => $downloads_votedata . '.pn_id',\n-                                               'ratinglid'       => $downloads_votedata . '.pn_lid',\n-                                               'ratinguser'      => $downloads_votedata . '.pn_user',\n-                                               'rating'          => $downloads_votedata . '.pn_rating',\n-                                               'ratinghostname'  => $downloads_votedata . '.pn_hostname',\n-                                               'ratingcomments'  => $downloads_votedata . '.pn_comments',\n-                                               'ratingtimestamp' => $downloads_votedata . '.pn_timestamp');\n-\n-$ephem = $prefix . '_ephem';\n-$pntable['ephem'] = $ephem;\n-$pntable['ephem_column'] = array ('eid'       => $ephem . '.pn_eid',\n-                                  'did'       => $ephem . '.pn_did',\n-                                  'mid'       => $ephem . '.pn_mid',\n-                                  'yid'       => $ephem . '.pn_yid',\n-                                  'content'   => $ephem . '.pn_content',\n-                                  'elanguage' => $ephem . '.pn_language',\n-                                  'language'  => $ephem . '.pn_language');\n-\n-$faqanswer = $prefix . '_faqanswer';\n-$pntable['faqanswer'] = $faqanswer;\n-$pntable['faqanswer_column'] = array ('id'          => $faqanswer . '.pn_id',\n-                                      'id_cat'      => $faqanswer . '.pn_id_cat',\n-                                      'question'    => $faqanswer . '.pn_question',\n-                                      'answer'      => $faqanswer . '.pn_answer',\n-                                      'submittedby' => $faqanswer . '.pn_submittedby');\n-\n-$faqcategories = $prefix . '_faqcategories';\n-$pntable['faqcategories'] = $faqcategories;\n-$pntable['faqcategories_column'] = array ('id_cat'     => $faqcategories . '.pn_id_cat',\n-                                          'categories' => $faqcategories . '.pn_categories',\n-                                          'flanguage'  => $faqcategories . '.pn_language',\n-                                          'language'   => $faqcategories . '.pn_language',\n-                                          'parent_id'  => $faqcategories . '.pn_parent_id');\n-\n-$group_membership = $prefix . '_group_membership';\n-$pntable['group_membership'] = $group_membership;\n-$pntable['group_membership_column'] = array ('gid' => $group_membership . '.pn_gid',\n-                                             'uid' => $group_membership . '.pn_uid');\n-\n-$group_perms = $prefix . '_group_perms';\n-$pntable['group_perms'] = $group_perms;\n-$pntable['group_perms_column'] = array ('pid'       => $group_perms . '.pn_pid',\n-                                        'gid'       => $group_perms . '.pn_gid',\n-                                        'sequence'  => $group_perms . '.pn_sequence',\n-                                        'realm'     => $group_perms . '.pn_realm',\n-                                        'component' => $group_perms . '.pn_component',\n-                                        'instance'  => $group_perms . '.pn_instance',\n-                                        'level'     => $group_perms . '.pn_level',\n-                                        'bond'      => $group_perms . '.pn_bond');\n-\n-$groups = $prefix . '_groups';\n-$pntable['groups'] = $groups;\n-$pntable['groups_column'] = array ('gid'  => $groups . '.pn_gid',\n-                                   'name' => $groups . '.pn_name');\n-\n-$headlines = $prefix . '_headlines';\n-$pntable['headlines'] = $headlines;\n-$pntable['headlines_column'] = array ('id'        => $headlines . '.pn_id',\n-                                      'sitename'  => $headlines . '.pn_sitename',\n-                                      'rssuser'   => $headlines . '.pn_rssuser',\n-                                      'rsspasswd' => $headlines . '.pn_rsspasswd',\n-                                      'use_proxy' => $headlines . '.pn_use_proxy',\n-                                      'rssurl'    => $headlines . '.pn_rssurl',\n-                                      'maxrows'   => $headlines . '.pn_maxrows',\n-                                      'siteurl'   => $headlines . '.pn_siteurl',\n-                                      'options'   => $headlines . '.pn_options');\n-\n-$hooks = $prefix . '_hooks';\n-$pntable['hooks'] = $hooks;\n-$pntable['hooks_column'] = array ('id'        => $hooks . '.pn_id',\n-                                  'object'    => $hooks . '.pn_object',\n-                                  'action'    => $hooks . '.pn_action',\n-                                  'smodule'   => $hooks . '.pn_smodule',\n-                                  'stype'     => $hooks . '.pn_stype',\n-                                  'tarea'     => $hooks . '.pn_tarea',\n-                                  'tmodule'   => $hooks . '.pn_tmodule',\n-                                  'ttype'     => $hooks . '.pn_ttype',\n-                                  'tfunc'     => $hooks . '.pn_tfunc');\n-\n-$languages_constant = $prefix.'_languages_constant';\n-$pntable['languages_constant']    = $languages_constant;\n-$pntable['languages_constant_column'] = array ('constant' => $languages_constant . '.pn_constant',\n-                                               'file'     => $languages_constant . '.pn_file');\n-\n-$languages_file = $prefix.'_languages_file';\n-$pntable['languages_file']     = $languages_file;\n-$pntable['languages_file_column'] = array ('target' => $languages_file . '.pn_target',\n-                                           'source' => $languages_file . '.pn_source');\n-                                               \n-$languages_translation = $prefix.'_languages_translation';\n-$pntable['languages_translation'] = $languages_translation;\n-$pntable['languages_translation_column'] = array ('language'    => $languages_translation . '.pn_language',\n-                                                  'constant'    => $languages_translation . '.pn_constant',\n-                                                  'translation' => $languages_translation . '.pn_translation',\n-                                                  'level'       => $languages_translation . '.pn_level');\n-\n-$links_categories = $prefix . '_links_categories';\n-$pntable['links_categories'] = $links_categories;\n-$pntable['links_categories_column'] = array ('cat_id'       => $links_categories . '.pn_cat_id',\n-                                             'parent_id'    => $links_categories . '.pn_parent_id',\n-                                             'title'        => $links_categories . '.pn_title',\n-                                             'cdescription' => $links_categories . '.pn_description');\n-\n-$links_editorials = $prefix . '_links_editorials';\n-$pntable['links_editorials'] = $links_editorials;\n-$pntable['links_editorials_column'] = array ('linkid'             => $links_editorials . '.pn_linkid',\n-                                             'adminid'            => $links_editorials . '.pn_adminid',\n-                                             'editorialtimestamp' => $links_editorials . '.pn_timestamp',\n-                                             'editorialtext'      => $links_editorials . '.pn_text',\n-                                             'editorialtitle'     => $links_editorials . '.pn_title');\n-\n-$links_links = $prefix . '_links_links';\n-$pntable['links_links'] = $links_links;\n-$pntable['links_links_column'] = array ('lid'               => $links_links . '.pn_lid',\n-                                        'cat_id'            => $links_links . '.pn_cat_id',\n-                                        'title'             => $links_links . '.pn_title',\n-                                        'url'               => $links_links . '.pn_url',\n-                                        'description'       => $links_links . '.pn_description',\n-                                        'date'              => $links_links . '.pn_date',\n-                                        'name'              => $links_links . '.pn_name',\n-                                        'email'             => $links_links . '.pn_email',\n-                                        'hits'              => $links_links . '.pn_hits',\n-                                        'submitter'         => $links_links . '.pn_submitter',\n-                                        'linkratingsummary' => $links_links . '.pn_ratingsummary',\n-                                        'totalvotes'        => $links_links . '.pn_totalvotes',\n-                                        'totalcomments'     => $links_links . '.pn_totalcomments');\n-\n-$links_modrequest = $prefix . '_links_modrequest';\n-$pntable['links_modrequest'] = $links_modrequest;\n-$pntable['links_modrequest_column'] = array ('requestid'       => $links_modrequest . '.pn_requestid',\n-                                             'lid'             => $links_modrequest . '.pn_lid',\n-                                             'cat_id'          => $links_modrequest . '.pn_cat_id',\n-                                             'sid'             => $links_modrequest . '.pn_sid',\n-                                             'title'           => $links_modrequest . '.pn_title',\n-                                             'url'             => $links_modrequest . '.pn_url',\n-                                             'description'     => $links_modrequest . '.pn_description',\n-                                             'modifysubmitter' => $links_modrequest . '.pn_modifysubmitter',\n-                                             'brokenlink'      => $links_modrequest . '.pn_brokenlink');\n-\n-$links_newlink = $prefix . '_links_newlink';\n-$pntable['links_newlink'] = $links_newlink;\n-$pntable['links_newlink_column'] = array ('lid'         => $links_newlink . '.pn_lid',\n-                                          'cat_id'      => $links_newlink . '.pn_cat_id',\n-                                          'title'       => $links_newlink . '.pn_title',\n-                                          'url'         => $links_newlink . '.pn_url',\n-                                          'description' => $links_newlink . '.pn_description',\n-                                          'name'        => $links_newlink . '.pn_name',\n-                                          'email'       => $links_newlink . '.pn_email',\n-                                          'submitter'   => $links_newlink . '.pn_submitter');\n-\n-$links_votedata = $prefix . '_links_votedata';\n-$pntable['links_votedata'] = $links_votedata;\n-$pntable['links_votedata_column'] = array ('ratingdbid'      => $links_votedata . '.pn_id',\n-                                           'ratinglid'       => $links_votedata . '.pn_lid',\n-                                           'ratinguser'      => $links_votedata . '.pn_user',\n-                                           'rating'          => $links_votedata . '.pn_rating',\n-                                           'ratinghostname'  => $links_votedata . '.pn_hostname',\n-                                           'ratingcomments'  => $links_votedata . '.pn_comments',\n-                                           'ratingtimestamp' => $links_votedata . '.pn_timestamp');\n-\n-$message = $prefix . '_message';\n-$pntable['message'] = $message;\n-$pntable['message_column'] = array ('mid'         => $message . '.pn_mid',\n-                                    'title'       => $message . '.pn_title',\n-                                    'content'     => $message . '.pn_content',\n-                                    'date'        => $message . '.pn_date',\n-                                    'expire'      => $message . '.pn_expire',\n-                                    'active'      => $message . '.pn_active',\n-                                    'view'        => $message . '.pn_view',\n-                                    'mlanguage'   => $message . '.pn_language',\n-                                    'language'    => $message . '.pn_language');\n-\n-$module_vars = $prefix . '_module_vars';\n-$pntable['module_vars'] = $module_vars;\n-$pntable['module_vars_column'] = array ('id'      => $module_vars . '.pn_id',\n-                                        'modname' => $module_vars . '.pn_modname',\n-                                        'name'    => $module_vars . '.pn_name',\n-                                        'value'   => $module_vars . '.pn_value');\n-\n-$modules = $prefix . '_modules';\n-$pntable['modules'] = $modules;\n-$pntable['modules_column'] = array ('id'            => $modules . '.pn_id',\n-                                    'name'          => $modules . '.pn_name',\n-                                    'type'          => $modules . '.pn_type',\n-                                    'displayname'   => $modules . '.pn_displayname',\n-                                    'description'   => $modules . '.pn_description',\n-                                    'regid'         => $modules . '.pn_regid',\n-                                    'directory'     => $modules . '.pn_directory',\n-                                    'version'       => $modules . '.pn_version',\n-                                    'admin_capable' => $modules . '.pn_admin_capable',\n-                                    'user_capable'  => $modules . '.pn_user_capable',\n-                                    'state'         => $modules . '.pn_state');\n-\n-$poll_check = $prefix . '_poll_check';\n-$pntable['poll_check'] = $poll_check;\n-$pntable['poll_check_column'] = array ('ip'   => $poll_check . '.pn_ip',\n-                                       'time' => $poll_check . '.pn_time');\n-\n-$poll_data = $prefix . '_poll_data';\n-$pntable['poll_data'] = $poll_data;\n-$pntable['poll_data_column'] = array ('pollid'      => $poll_data . '.pn_pollid',\n-                                      'optiontext'  => $poll_data . '.pn_optiontext',\n-                                      'optioncount' => $poll_data . '.pn_optioncount',\n-                                      'voteid'      => $poll_data . '.pn_voteid');\n-\n-$poll_desc = $prefix . '_poll_desc';\n-$pntable['poll_desc'] = $poll_desc;\n-$pntable['poll_desc_column'] = array ('pollid'    => $poll_desc . '.pn_pollid',\n-                                      'polltitle' => $poll_desc . '.pn_title',\n-                                      'timestamp' => $poll_desc . '.pn_timestamp',\n-                                      'voters'    => $poll_desc . '.pn_voters',\n-                                      'planguage' => $poll_desc . '.pn_language',\n-                                      'language'  => $poll_desc . '.pn_language');\n-\n-$pollcomments = $prefix . '_pollcomments';\n-$pntable['pollcomments'] = $pollcomments;\n-$pntable['pollcomments_column'] = array ('tid'       => $pollcomments . '.pn_tid',\n-                                         'pid'       => $pollcomments . '.pn_pid',\n-                                         'pollid'    => $pollcomments . '.pn_pollid',\n-                                         'date'      => $pollcomments . '.pn_date',\n-                                         'name'      => $pollcomments . '.pn_name',\n-                                         'email'     => $pollcomments . '.pn_email',\n-                                         'url'       => $pollcomments . '.pn_url',\n-                                         'host_name' => $pollcomments . '.pn_host_name',\n-                                         'subject'   => $pollcomments . '.pn_subject',\n-                                         'comment'   => $pollcomments . '.pn_comment',\n-                                         'score'     => $pollcomments . '.pn_score',\n-                                         'reason'    => $pollcomments . '.pn_reason');\n-\n-$priv_msgs = $prefix . '_priv_msgs';\n-$pntable['priv_msgs'] = $priv_msgs;\n-$pntable['priv_msgs_column'] = array ('msg_id'      => $priv_msgs . '.pn_msg_id',\n-                                      'msg_image'   => $priv_msgs . '.pn_msg_image',\n-                                      'subject'     => $priv_msgs . '.pn_subject',\n-                                      'from_userid' => $priv_msgs . '.pn_from_userid',\n-                                      'to_userid'   => $priv_msgs . '.pn_to_userid',\n-                                      'msg_time'    => $priv_msgs . '.pn_msg_time',\n-                                      'msg_text'    => $priv_msgs . '.pn_msg_text',\n-                                      'read_msg'    => $priv_msgs . '.pn_read_msg');\n-\n-$queue = $prefix . '_queue';\n-$pntable['queue'] = $queue;\n-$pntable['queue_column'] = array ('qid'       => $queue . '.pn_qid',\n-                                  'uid'       => $queue . '.pn_uid',\n-                                  'arcd'      => $queue . '.pn_arcd',\n-                                  'uname'     => $queue . '.pn_uname',\n-                                  'subject'   => $queue . '.pn_subject',\n-                                  'story'     => $queue . '.pn_story',\n-                                  'timestamp' => $queue . '.pn_timestamp',\n-                                  'topic'     => $queue . '.pn_topic',\n-                                  'alanguage' => $queue . '.pn_language',\n-                                  'language'  => $queue . '.pn_language',\n-                                  'bodytext'  => $queue . '.pn_bodytext');\n-\n-$realms = $prefix . '_realms';\n-$pntable['realms'] = $realms;\n-$pntable['realms_column'] = array ('rid'  => $realms . '.pn_rid',\n-                                   'name' => $realms . '.pn_name');\n-\n-$referer = $prefix . '_referer';\n-$pntable['referer'] = $referer;\n-$pntable['referer_column'] = array ('rid'       => $referer . '.pn_rid',\n-                                    'url'       => $referer . '.pn_url',\n-                                    'frequency' => $referer . '.pn_frequency');\n-\n-$related = $prefix . '_related';\n-$pntable['related'] = $related;\n-$pntable['related_column'] = array ('rid'  => $related . '.pn_rid',\n-                                    'tid'  => $related . '.pn_tid',\n-                                    'name' => $related . '.pn_name',\n-                                    'url'  => $related . '.pn_url');\n-\n-$reviews = $prefix . '_reviews';\n-$pntable['reviews'] = $reviews;\n-$pntable['reviews_column'] = array ('id'        => $reviews . '.pn_id',\n-                                    'date'      => $reviews . '.pn_date',\n-                                    'title'     => $reviews . '.pn_title',\n-                                    'text'      => $reviews . '.pn_text',\n-                                    'reviewer'  => $reviews . '.pn_reviewer',\n-                                    'email'     => $reviews . '.pn_email',\n-                                    'score'     => $reviews . '.pn_score',\n-                                    'cover'     => $reviews . '.pn_cover',\n-                                    'url'       => $reviews . '.pn_url',\n-                                    'url_title' => $reviews . '.pn_url_title',\n-                                    'hits'      => $reviews . '.pn_hits',\n-                                    'rlanguage' => $reviews . '.pn_language',\n-                                    'language'  => $reviews . '.pn_language');\n-\n-$reviews_add = $prefix . '_reviews_add';\n-$pntable['reviews_add'] = $reviews_add;\n-$pntable['reviews_add_column'] = array ('id'        => $reviews_add . '.pn_id',\n-                                        'date'      => $reviews_add . '.pn_date',\n-                                        'title'     => $reviews_add . '.pn_title',\n-                                        'text'      => $reviews_add . '.pn_text',\n-                                        'reviewer'  => $reviews_add . '.pn_reviewer',\n-                                        'email'     => $reviews_add . '.pn_email',\n-                                        'score'     => $reviews_add . '.pn_score',\n-                                        'url'       => $reviews_add . '.pn_url',\n-                                        'url_title' => $reviews_add . '.pn_url_title',\n-                                        'rlanguage' => $reviews_add . '.pn_language',\n-                                        'language'  => $reviews_add . '.pn_language');\n-\n-$reviews_comments = $prefix . '_reviews_comments';\n-$pntable['reviews_comments'] = $reviews_comments;\n-$pntable['reviews_comments_column'] = array ('cid'      => $reviews_comments . '.pn_cid',\n-                                             'rid'      => $reviews_comments . '.pn_rid',\n-                                             'userid'   => $reviews_comments . '.pn_userid',\n-                                             'date'     => $reviews_comments . '.pn_date',\n-                                             'comments' => $reviews_comments . '.pn_comments',\n-                                             'score'    => $reviews_comments . '.pn_score');\n-\n-$reviews_main = $prefix . '_reviews_main';\n-$pntable['reviews_main'] = $reviews_main;\n-$pntable['reviews_main_column'] = array ('title'      => $reviews_main . '.pn_title',\n-                                        'description' => $reviews_main . '.pn_description');\n-\n-$seccont = $prefix . '_seccont';\n-$pntable['seccont'] = $seccont;\n-$pntable['seccont_column'] = array ('artid'        => $seccont . '.pn_artid',\n-                                    'secid'        => $seccont . '.pn_secid',\n-                                    'title'        => $seccont . '.pn_title',\n-                                    'content'      => $seccont . '.pn_content',\n-                                    'counter'      => $seccont . '.pn_counter',\n-                                    'slanguage'    => $seccont . '.pn_language',\n-                                    'language'     => $seccont . '.pn_language');\n-\n-$sections = $prefix . '_sections';\n-$pntable['sections'] = $sections;\n-$pntable['sections_column'] = array ('secid'   => $sections . '.pn_secid',\n-                                     'secname' => $sections . '.pn_secname',\n-                                     'image'   => $sections . '.pn_image');\n-\n-$session_info = $prefix . '_session_info';\n-$pntable['session_info'] = $session_info;\n-$pntable['session_info_column'] = array ('sessid'    => $session_info . '.pn_sessid',\n-                                         'ipaddr'    => $session_info . '.pn_ipaddr',\n-                                         'firstused' => $session_info . '.pn_firstused',\n-                                         'lastused'  => $session_info . '.pn_lastused',\n-                                         'uid'       => $session_info . '.pn_uid',\n-                                         'vars'      => $session_info . '.pn_vars');\n-\n-$stats_date = $prefix . '_stats_date';\n-$pntable['stats_date'] = $stats_date;\n-$pntable['stats_date_column'] = array ('date'    => $stats_date . '.pn_date',\n-                                       'hits'    => $stats_date . '.pn_hits');\n-\n-$stats_hour = $prefix . '_stats_hour';\n-$pntable['stats_hour'] = $stats_hour;\n-$pntable['stats_hour_column'] = array ('hour'    => $stats_hour . '.pn_hour',\n-                                       'hits'    => $stats_hour . '.pn_hits');\n-\n-$stats_month = $prefix . '_stats_month';\n-$pntable['stats_month'] = $stats_month;\n-$pntable['stats_month_column'] = array ('month'  => $stats_month . '.pn_month',\n-                                        'hits'   => $stats_month . '.pn_hits');\n-\n-$stats_week = $prefix . '_stats_week';\n-$pntable['stats_week'] = $stats_week;\n-$pntable['stats_week_column'] = array ('weekday' => $stats_week . '.pn_weekday',\n-                                       'hits'    => $stats_week . '.pn_hits');\n-\n-$stories = $prefix . '_stories';\n-$pntable['stories'] = $stories;\n-$pntable['stories_column'] = array ('sid'           => $stories . '.pn_sid',\n-                                    'cid'           => $stories . '.pn_catid',\n-                                    'catid'         => $stories . '.pn_catid',  // for back compat\n-                                    'aid'           => $stories . '.pn_aid',\n-                                    'title'         => $stories . '.pn_title',\n-                                    'time'          => $stories . '.pn_time',\n-                                    'hometext'      => $stories . '.pn_hometext',\n-                                    'bodytext'      => $stories . '.pn_bodytext',\n-                                    'comments'      => $stories . '.pn_comments',\n-                                    'counter'       => $stories . '.pn_counter',\n-                                    'topic'         => $stories . '.pn_topic',\n-                                    'informant'     => $stories . '.pn_informant',\n-                                    'notes'         => $stories . '.pn_notes',\n-                                    'ihome'         => $stories . '.pn_ihome',\n-                                    'themeoverride' => $stories . '.pn_themeoverride',\n-                                    'alanguage'     => $stories . '.pn_language',\n-                                    'language'      => $stories . '.pn_language',\n-                                    'withcomm'      => $stories . '.pn_withcomm',\n-                        'format_type'   => $stories . '.pn_format_type');\n-\n-$stories_cat = $prefix . '_stories_cat';\n-$pntable['stories_cat'] = $stories_cat;\n-$pntable['stories_cat_column'] = array ('catid'          => $stories_cat . '.pn_catid',\n-                                        'title'          => $stories_cat . '.pn_title',\n-                                        'counter'        => $stories_cat . '.pn_counter',\n-                                        'themeoverride'  => $stories_cat . '.pn_themeoverride');\n-\n-$topics = $prefix . '_topics';\n-$pntable['topics'] = $topics;\n-$pntable['topics_column'] = array ('tid'        => $topics . '.pn_topicid',\n-                                   'topicid'    => $topics . '.pn_topicid', // for back compat\n-                                   'topicname'  => $topics . '.pn_topicname',\n-                                   'topicimage' => $topics . '.pn_topicimage',\n-                                   'topictext'  => $topics . '.pn_topictext',\n-                                   'counter'    => $topics . '.pn_counter');\n-\n-$user_data = $prefix . '_user_data';\n-$pntable['user_data'] = $user_data;\n-$pntable['user_data_column'] = array ('uda_id'       => $user_data . '.pn_uda_id',\n-                                       'uda_propid'  => $user_data . '.pn_uda_propid',\n-                                       'uda_uid'     => $user_data . '.pn_uda_uid',\n-                                       'uda_value'   => $user_data . '.pn_uda_value');\n-\n-$user_perms = $prefix . '_user_perms';\n-$pntable['user_perms'] = $user_perms;\n-$pntable['user_perms_column'] = array ('pid'       => $user_perms . '.pn_pid',\n-                                       'uid'       => $user_perms . '.pn_uid',\n-                                       'sequence'  => $user_perms . '.pn_sequence',\n-                                       'realm'     => $user_perms . '.pn_realm',\n-                                       'component' => $user_perms . '.pn_component',\n-                                       'instance'  => $user_perms . '.pn_instance',\n-                                       'level'     => $user_perms . '.pn_level',\n-                                       'bond'      => $user_perms . '.pn_bond');\n-\n-$user_property = $prefix . '_user_property';\n-$pntable['user_property'] = $user_property;\n-$pntable['user_property_column'] = array ('prop_id' => $user_property . '.pn_prop_id',\n-                                  'prop_label'      => $user_property . '.pn_prop_label',\n-                                  'prop_dtype'      => $user_property . '.pn_prop_dtype',\n-                                  'prop_length'     => $user_property . '.pn_prop_length',\n-                                  'prop_weight'     => $user_property . '.pn_prop_weight',\n-                                  'prop_validation' => $user_property . '.pn_prop_validation'\n-                                  );\n-\n-$userblocks = $prefix . '_userblocks';\n-$pntable['userblocks'] = $userblocks;\n-$pntable['userblocks_column'] = array ('uid'         => $userblocks . '.pn_uid',\n-                                       'bid'         => $userblocks . '.pn_bid',\n-                                       'active'      => $userblocks . '.pn_active',\n-                                       'lastupdate'  => $userblocks . '.pn_lastupdate');\n-\n-$users = $prefix . '_users';\n-$pntable['users'] = $users;\n-$pntable['users_column'] = array ('uid'             => $users . '.pn_uid',\n-                                  'name'            => $users . '.pn_name',\n-                                  'uname'           => $users . '.pn_uname',\n-                                  'email'           => $users . '.pn_email',\n-                                  'femail'          => $users . '.pn_femail',\n-                                  'url'             => $users . '.pn_url',\n-                                  'user_avatar'     => $users . '.pn_user_avatar',\n-                                  'user_regdate'    => $users . '.pn_user_regdate',\n-                                  'user_icq'        => $users . '.pn_user_icq',\n-                                  'user_occ'        => $users . '.pn_user_occ',\n-                                  'user_from'       => $users . '.pn_user_from',\n-                                  'user_intrest'    => $users . '.pn_user_intrest',\n-                                  'user_sig'        => $users . '.pn_user_sig',\n-                                  'user_viewemail'  => $users . '.pn_user_viewemail',\n-                                  'user_theme'      => $users . '.pn_user_theme',\n-                                  'user_aim'        => $users . '.pn_user_aim',\n-                                  'user_yim'        => $users . '.pn_user_yim',\n-                                  'user_msnm'       => $users . '.pn_user_msnm',\n-                                  'pass'            => $users . '.pn_pass',\n-                                  'storynum'        => $users . '.pn_storynum',\n-                                  'umode'           => $users . '.pn_umode',\n-                                  'uorder'          => $users . '.pn_uorder',\n-                                  'thold'           => $users . '.pn_thold',\n-                                  'noscore'         => $users . '.pn_noscore',\n-                                  'bio'             => $users . '.pn_bio',\n-                                  'ublockon'        => $users . '.pn_ublockon',\n-                                  'ublock'          => $users . '.pn_ublock',\n-                                  'theme'           => $users . '.pn_theme',\n-                                  'commentmax'      => $users . '.pn_commentmax',\n-                                  'counter'         => $users . '.pn_counter',\n-                                  'timezone_offset' => $users . '.pn_timezone_offset');\n", "diff --git a/interface/main/calendar/index.php b/interface/main/calendar/index.php\nindex c70991a95..2bd588b91 100644\n--- a/interface/main/calendar/index.php\n+++ b/interface/main/calendar/index.php\n@@ -1,39 +1,24 @@\n <?php\n-// File: $Id$ $Name$\n-// ----------------------------------------------------------------------\n-// POST-NUKE Content Management System\n-// Copyright (C) 2001 by the Post-Nuke Development Team.\n-// http://www.postnuke.com/\n-// ----------------------------------------------------------------------\n-// Based on:\n-// PHP-NUKE Web Portal System - http://phpnuke.org/\n-// Thatware - http://thatware.org/\n-// ----------------------------------------------------------------------\n-// LICENSE\n-//\n-// This program is free software; you can redistribute it and/or\n-// modify it under the terms of the GNU General Public License (GPL)\n-// as published by the Free Software Foundation; either version 2\n-// of the License, or (at your option) any later version.\n-//\n-// This program is distributed in the hope that it will be useful,\n-// but WITHOUT ANY WARRANTY; without even the implied warranty of\n-// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n-// GNU General Public License for more details.\n-//\n-// To read the license please visit http://www.gnu.org/copyleft/gpl.html\n-// ----------------------------------------------------------------------\n-// Original Author of this file: Francisco Burzi\n-// Purpose of this file: Directs to the start page as defined in config.php\n-// ----------------------------------------------------------------------\n-\n-// include base api\n-\n-//$ignoreAuth = true;\n+/**\n+ * POST-NUKE Content Management System\n+ * Based on:\n+ * PHP-NUKE Web Portal System - http://phpnuke.org/\n+ * Thatware - http://thatware.org/\n+ *\n+ * Purpose of this file: Directs to the start page as defined in config.php\n+ *\n+ * @author    Francisco Burzi\n+ * @author    Post-Nuke Development Team\n+ * @author    Brady Miller <brady.g.miller@gmail.com>\n+ * @copyright Copyright (c) 2001 by the Post-Nuke Development Team <http://www.postnuke.com/>\n+ * @copyright Copyright (c) 2019 Brady Miller <brady.g.miller@gmail.com>\n+ * @license   https://github.com/openemr/openemr/blob/master/LICENSE GNU General Public License 3\n+ */\n+\n+\n require_once(\"../../globals.php\");\n require_once(\"$srcdir/calendar.inc\");\n require_once(\"$srcdir/patient.inc\");\n-require_once \"includes/pnre.inc.php\";\n require_once 'includes/pnAPI.php';\n require_once(\"$srcdir/acl.inc\");\n \n@@ -75,9 +60,9 @@ if ($GLOBALS['login_into_facility']) {\n // override the cookie if the user doesn't have access to that facility any more\n if ($_SESSION['userauthorized'] != 1 && $GLOBALS['restrict_user_facility']) {\n     $facilities = getUserFacilities($_SESSION['authId']);\n-  // use the first facility the user has access to, unless...\n+    // use the first facility the user has access to, unless...\n     $_SESSION['pc_facility'] = $facilities[0]['id'];\n-  // if the cookie is in the users' facilities, use that.\n+    // if the cookie is in the users' facilities, use that.\n     foreach ($facilities as $facrow) {\n         if (($facrow['id'] == $_COOKIE['pc_facility']) && $GLOBALS['set_facility_cookie']) {\n             $_SESSION['pc_facility'] = $_COOKIE['pc_facility'];\n@@ -108,133 +93,95 @@ if (isset($_REQUEST['viewtype'])) {\n     $_SESSION['viewtype'] = $_REQUEST['viewtype'];\n }\n \n-\n-\n-\n-/*\n-print_r($_POST);\n-print_r($_GET);\n-print_r($_SESSION);\n-die;\n-*/\n-//print_r($_SESSION);\n // start PN\n pnInit();\n \n // Get variables\n list($module,\n      $func,\n-     $op,\n-     $name,\n-     $file,\n-     $type,) = pnVarCleanFromInput(\n+     $type) = pnVarCleanFromInput(\n          'module',\n          'func',\n-         'op',\n-         'name',\n-         'file',\n          'type'\n      );\n \n-// Defaults for variables\n-if (isset($catid)) {\n-    pnVarCleanFromInput('catid');\n+if ($module != \"PostCalendar\") {\n+    // exit if not using PostCalendar module\n+    exit;\n }\n \n-// check requested module and set to start module if not present\n-if (empty($name)) {\n-    $name = pnConfigGetVar('startpage');\n-    // fixed for the new style of loading modules and set start page for them [class007]\n-    if (empty($module)) {\n-        $module = $name;\n+if ($type == \"admin\") {\n+    if (!acl_check('admin', 'calendar')) {\n+        // exit if do not have access\n+        exit;\n+    }\n+    if (($func != \"modifyconfig\") &&\n+        ($func != \"clearCache\") &&\n+        ($func != \"testSystem\") &&\n+        ($func != \"categories\") &&\n+        ($func != \"categoriesConfirm\") &&\n+        ($func != \"categoriesUpdate\")) {\n+        // only support certain functions in admin use\n+        exit;\n     }\n }\n \n-// get module information\n-$modinfo = pnModGetInfo(pnModGetIDFromName($module));\n+if (empty($type)) {\n+    $type = 'user';\n+}\n \n-if ($modinfo['type'] == 2) {\n-    // New-new style of loading modules\n-    if (empty($type)) {\n-        $type = 'user';\n+if ($type == \"user\") {\n+    if (($func != \"view\") &&\n+        ($func != \"search\")) {\n+        // only support view and search functions in for non-admin use\n+        exit;\n     }\n+}\n \n-    if (empty($func)) {\n-        $func=\"main\";\n-    }\n+if (($type != \"user\") && ($type != \"admin\")) {\n+    // only support admin and user type\n+    exit;\n+}\n \n-    // it should be $module not $name [class007]\n-    if (pnModAvailable($module)) {\n-        if (pnModLoad($module, $type)) {\n-            // Run the function\n-            $return = pnModFunc($module, $type, $func);\n-        } else {\n-            $return = false;\n-        }\n-    } else {\n-        $return = false;\n-    }\n+// Defaults for variables\n+if (isset($catid)) {\n+    pnVarCleanFromInput('catid');\n+}\n \n-    // Sort out return of function.  Can be\n-    // true - finished\n-    // false - display error msg\n-    // text - return information\n-    if ((empty($return)) || ($return == false)) {\n-        // Failed to load the module\n-        $output = new pnHTML();\n-        $output->StartPage();\n-        $output->Text('Failed to load module ' . $module .' ( At function: \"'.$func.'\" )');\n-        $output->EndPage();\n-        $output->PrintPage();\n-        exit;\n-    } elseif (strlen($return) > 1) {\n-        // Text\n-        $output = new pnHTML();\n-        //$output->StartPage();\n-        $output->SetInputMode(_PNH_VERBATIMINPUT);\n-        $output->Text($return);\n-        $output->SetInputMode(_PNH_PARSEINPUT);\n-        //$output->EndPage();\n-        $output->PrintPage();\n+if (pnModAvailable($module)) {\n+    if (pnModLoad($module, $type)) {\n+        // Run the function\n+        $return = pnModFunc($module, $type, $func);\n     } else {\n-        // duh?\n+        $return = false;\n     }\n+} else {\n+    $return = false;\n+}\n \n+// Sort out return of function.  Can be\n+// true - finished\n+// false - display error msg\n+// text - return information\n+if ((empty($return)) || ($return == false)) {\n+    // Failed to load the module\n+    $output = new pnHTML();\n+    $output->StartPage();\n+    $output->Text('Failed to load module ' . text($module) .' ( At function: \"' . text($func) . '\" )');\n+    $output->EndPage();\n+    $output->PrintPage();\n     exit;\n+} elseif (strlen($return) > 1) {\n+    // Text\n+    $output = new pnHTML();\n+    //$output->StartPage();\n+    $output->SetInputMode(_PNH_VERBATIMINPUT);\n+    $output->Text($return);\n+    $output->SetInputMode(_PNH_PARSEINPUT);\n+    //$output->EndPage();\n+    $output->PrintPage();\n } else {\n-    // Old-old style of loading modules\n-    if (empty($op)) {\n-        $op = \"modload\";\n-    }\n-\n-    if (empty($file)) {\n-        $file=\"index\";\n-    }\n-\n-    include 'includes/legacy.php';\n-    switch ($op) {\n-        case 'modload':\n-            define(\"LOADED_AS_MODULE\", \"1\");\n-            // added for the module/system seperation [class007]\n-            if (file_exists('modules/' . pnVarPrepForOS($name) . '/' . pnVarPrepForOS($file) . '.php')) {\n-                include 'modules/' . pnVarPrepForOS($name) . '/'  . pnVarPrepForOS($file) . '.php';\n-            } else {\n-                // Failed to load the module\n-                $output = new pnHTML();\n-                //$output->StartPage();\n-                $output->Text('Failed to load module ' . $module);\n-                $output->EndPage();\n-                $output->PrintPage();\n-                exit;\n-            }\n-            break;\n-        default:\n-            // Failed to load the module\n-            $output = new pnHTML();\n-            //$output->StartPage();\n-            $output->Text('Sorry, you cannot access this file directly...');\n-            $output->EndPage();\n-            $output->PrintPage();\n-            break;\n-    }\n+    // duh?\n }\n+\n+exit;\n", "diff --git a/interface/main/calendar/modules/PostCalendar/INSTALL b/interface/main/calendar/modules/PostCalendar/INSTALL\ndeleted file mode 100644\nindex 3901895fc..000000000\n--- a/interface/main/calendar/modules/PostCalendar/INSTALL\n+++ /dev/null\n@@ -1,122 +0,0 @@\n-$Id$\n-========================================================================\n-Installation\n-========================================================================\n-\n-PLEASE ALSO READ THE DOCUMENTATION AVAILABLE ONLINE AT\n-\n-\thttp://www.postcalendar.tv/wiki\n-\n-\n-To install PostCalendar simply unzip/untar the distribution inside your \n-PostNuke html directory. This will create the ./modules/PostCalendar \n-directory and should contain all the files of the distribution.\n-\n-***NOTE: You'll need to CHMOD 777 the following directories:\n-\n-\t./modules/PostCalendar/pntemplates/compiled\n-\t./modules/PostCalendar/pntemplates/cache\n-\n-This allows Smarty to compile and cache your templates. If you're \n-on a windows platform, just make sure the directory has read/write \n-permissions for the web server.\n-\n-If you would like to change the path of these directories, you can \n-change the value of $this->compile_dir and $this->cache_dir in the \n-pcSmarty.class.php file to point to wherever you'd like templates to be \n-compiled. Moving this out of the webroot might not be that bad of an \n-idea. (I have not tested this as of yet)\n-\n-Now, enter the administration portion of your PostNuke site:\n-\n-    * Select MODULES Administration\n-    * Click on the REGENERATE link\n-    * Find the PostCalendar entry in the list\n-    * Click INITIALISE\n-    * After the list reloads, click ACTIVATE\n-\n-You should now have a fully functioning PostCalendar installation.\n-\n-You'll want to enter your site's Administration and configure \n-PostCalendar before you start to enter events. The installation \n-will set defaults for the calendar so that it works, but in \n-order to better suit your needs, it's best to change these as \n-early as possible.\n-\n-========================================================================\n-Upgrading\n-========================================================================\n-To upgrade PostCalendar you should first make a backup of you current\n-Database tables (using a tool like phpMyAdmin) and also backup your\n-current PostCalendar installation.  This will be useful in the event\n-an upgrade does not work for you.\n-\n-Next, unzip/untar the PostCalendar distribution inside your Postnuke\n-html directory.  This will create the modules/PostCalendar directory\n-and place all the necessary files there.\n-\n-***NOTE: You'll need to CHMOD 777 the following directories:\n-\n-\t./modules/PostCalendar/pntemplates/compiled\n-\t./modules/PostCalendar/pntemplates/cache\n-\n-This allows Smarty to compile and cache your templates. If you're \n-on a windows platform, just make sure the directory has read/write \n-permissions for the web server.\n-\n-If you would like to change the path of these directories, you can \n-change the value of $this->compile_dir and $this->cache_dir in the \n-pcSmarty.class.php file to point to wherever you'd like templates to be \n-compiled. Moving this out of the webroot might not be that bad of an \n-idea. (I have not tested this as of yet)\n-\n-***NOTE: DO NOT USE THE POSTNUKE MODULE ADMIN INTERFACE\n-         TO UPGRADE POSTCALENDAR.  DOING SO WILL BREAK\n-\t\t THE UPGRADE PROCESS. FOLLOW THE STEPS BELOW\n-\n-Enter the administration portion of your PostNuke site:\n-\n-    * Select POSTCALENDAR Administration\n-    * Click on the Upgrade PostCalendar Link\n-\n-If all went well, you should see a CONGRATULATIONS message.\n-If not, you should see an ERROR message.\n-\n-You should see link that says 'Upgrade PostCalendar 3.0x'\n-\n-You should now have a fully functioning PostCalendar installation.\n-\n-You'll want to configure PostCalendar before you start to enter events. \n-The installation will set defaults for the calendar so that it works, \n-but in order to better suit your needs, it's best to change these as \n-early as possible.  You should also check your old events and edit\n-them if necessary.  Events that have no end date should have the \n-appropriate repeating option for 'no end date' selected as this will\n-greatly speed up your calendar.\n-\n-========================================================================\n-Menu Configuration\n-========================================================================\n-You can link to PostCalendar by entering {PostCalendar} in a menu block.\n-\n-Using [PostCalendar] will also work, but this is for old style modules. \n-Using the method above will produce much better results.\n-\n-Goto your Block administration and edit/create the Menu block to hold \n-your link to PostCalendar.\n-\n-The Menu Block editing screen should look something like this:\n- \n-+--------------+----------------+-------------+--------+--------+-------+ \n-| Title        | URL            | Description | Delete | Insert | Blank |\n-+--------------+----------------+-------------+--------+--------+-------+ \n-| PostCalendar | {PostCalendar} | My Calendar |        |        |       |\n-+--------------+----------------+-------------+--------+--------+-------+        \n-\n-========================================================================\n-Admin Settings\n-========================================================================\n-\n-========================================================================\n-Blocks Configuration\n-========================================================================\n", "diff --git a/interface/main/calendar/modules/PostCalendar/TODO b/interface/main/calendar/modules/PostCalendar/TODO\ndeleted file mode 100644\nindex f80b24710..000000000\n--- a/interface/main/calendar/modules/PostCalendar/TODO\n+++ /dev/null\n@@ -1,4 +0,0 @@\n-$Id$\n-========================================================================\n-TODO\n-========================================================================\n", "diff --git a/interface/main/calendar/modules/PostCalendar/common.api.php b/interface/main/calendar/modules/PostCalendar/common.api.php\nindex f96c05508..0a06b3176 100755\n--- a/interface/main/calendar/modules/PostCalendar/common.api.php\n+++ b/interface/main/calendar/modules/PostCalendar/common.api.php\n@@ -118,18 +118,6 @@ define('_SETTING_DEFAULT_VIEW', pnModGetVar(__POSTCALENDAR__, 'pcDefaultView'));\n define('_SETTING_SAFE_MODE', pnModGetVar(__POSTCALENDAR__, 'pcSafeMode'));\n define('_SETTING_NOTIFY_ADMIN', pnModGetVar(__POSTCALENDAR__, 'pcNotifyAdmin'));\n define('_SETTING_NOTIFY_EMAIL', pnModGetVar(__POSTCALENDAR__, 'pcNotifyEmail'));\n-//=================================================================\n-//  Make checking basic permissions easier\n-//=================================================================\n-define('PC_ACCESS_ADMIN', pnSecAuthAction(0, 'PostCalendar::', 'null::null', ACCESS_ADMIN));\n-define('PC_ACCESS_DELETE', pnSecAuthAction(0, 'PostCalendar::', 'null::null', ACCESS_DELETE));\n-define('PC_ACCESS_ADD', pnSecAuthAction(0, 'PostCalendar::', 'null::null', ACCESS_ADD));\n-define('PC_ACCESS_EDIT', pnSecAuthAction(0, 'PostCalendar::', 'null::null', ACCESS_EDIT));\n-define('PC_ACCESS_MODERATE', pnSecAuthAction(0, 'PostCalendar::', 'null::null', ACCESS_MODERATE));\n-define('PC_ACCESS_COMMENT', pnSecAuthAction(0, 'PostCalendar::', 'null::null', ACCESS_COMMENT));\n-define('PC_ACCESS_READ', pnSecAuthAction(0, 'PostCalendar::', 'null::null', ACCESS_READ));\n-define('PC_ACCESS_OVERVIEW', pnSecAuthAction(0, 'PostCalendar::', 'null::null', ACCESS_OVERVIEW));\n-define('PC_ACCESS_NONE', pnSecAuthAction(0, 'PostCalendar::', 'null::null', ACCESS_NONE));\n //=========================================================================\n //  Require and Setup utility classes and functions\n //=========================================================================\n@@ -138,14 +126,8 @@ require_once(\"modules/$pcDir/pnincludes/Date/Calc.php\");\n //=========================================================================\n //  grab the global language file\n //=========================================================================\n-$userlang = pnUserGetLang();\n-if (file_exists(\"modules/$pcDir/pnlang/$userlang/global.php\")) {\n-    require_once(\"modules/$pcDir/pnlang/$userlang/global.php\");\n-} else {\n-    require_once(\"modules/$pcDir/pnlang/eng/global.php\");\n-}\n+require_once(\"modules/$pcDir/pnlang/eng/global.php\");\n \n-unset($userlang);\n //=========================================================================\n //  Setup Smarty defines\n //=========================================================================\n@@ -153,17 +135,6 @@ require_once(\"modules/$pcDir/pcSmarty.class.php\");\n //=========================================================================\n //  utility functions for postcalendar\n //=========================================================================\n-function pcDebugVar($in)\n-{\n-    echo '<pre>';\n-    if (is_array($in)) {\n-        print_r($in);\n-    } else {\n-        echo $in;\n-    }\n-\n-    echo '</pre>';\n-}\n function &pcVarPrepForDisplay($s)\n {\n     $s = nl2br(pnVarPrepForDisplay(postcalendar_removeScriptTags($s)));\n@@ -183,8 +154,8 @@ function pcGetTopicName($topicid)\n     $topics_column = &$pntable['topics_column'];\n     $sql = \"SELECT $topics_column[topicname]\n             FROM $topics_table\n-            WHERE $topics_column[topicid] = '$topicid'\";\n-    $result = $dbconn->Execute($sql);\n+            WHERE $topics_column[topicid] = ?\";\n+    $result = $dbconn->Execute($sql, [$topicid]);\n     if ($result === false) {\n         return '';\n     } else {\n@@ -224,9 +195,6 @@ function postcalendar_getDate($format = '%Y%m%d')\n                 $time = strtotime($_SESSION['lastcaldate']);\n             } else {\n                 $time = time();\n-                if (pnUserLoggedIn()) {\n-                    $time += (pnUserGetVar('timezone_offset') - pnConfigGetVar('timezone_offset')) * 3600;\n-                }\n             }\n \n             if (!isset($jumpday)) {\n@@ -256,23 +224,10 @@ function postcalendar_getDate($format = '%Y%m%d')\n function &postcalendar_today($format = '%Y%m%d')\n {\n     $time = time();\n-    if (pnUserLoggedIn()) {\n-        $time += (pnUserGetVar('timezone_offset') - pnConfigGetVar('timezone_offset')) * 3600;\n-    }\n \n     return strftime($format, $time);\n }\n \n-/**\n- * postcalendar_adminapi_pageSetup()\n- *\n- * sets up any necessary javascript for the page\n- * @return string javascript to insert into the page\n- */\n-function postcalendar_adminapi_pageSetup()\n-{\n-    return postcalendar_userapi_pageSetup();\n-}\n /**\n  * postcalendar_userapi_pageSetup()\n  *\n@@ -403,18 +358,6 @@ EOF;\n     return $output;\n }\n \n-/**\n- * postcalendar_adminapi_getmonthname()\n- *\n- * Returns the month name translated for the user's current language\n- *\n- * @param array $args['Date'] number of month to return\n- * @return string month name in user's language\n- */\n-function postcalendar_adminapi_getmonthname($args)\n-{\n-    return postcalendar_userapi_getmonthname($args);\n-}\n /**\n  * postcalendar_userapi_getmonthname()\n  *\n@@ -437,51 +380,10 @@ function postcalendar_userapi_getmonthname($args)\n                         '10' => _CALOCT, '11' => _CALNOV, '12' => _CALDEC);\n     return $month_name[date('m', $Date)];\n }\n-/**\n- *  Returns an array of form data for FormSelectMultiple\n- */\n-function postcalendar_adminapi_buildTimeSelect($args)\n-{\n-    return postcalendar_userapi_buildTimeSelect($args);\n-}\n-function postcalendar_userapi_buildTimeSelect($args)\n-{\n-    $inc = _SETTING_TIME_INCREMENT;\n-    extract($args);\n-    unset($args);\n-    $output = array('h'=>array(),'m'=>array());\n-    if ((bool)_SETTING_TIME_24HOUR) {\n-        $start=0;\n-        $end=23;\n-    } else {\n-        $start=1;\n-        $end=12;\n-        $hselected = $hselected > 12 ? $hselected-=12 : $hselected;\n-    }\n \n-    for ($c=0,$h=$start; $h<=$end; $h++,$c++) {\n-        $hour = sprintf('%02d', $h);\n-        $output['h'][$c]['id']         = pnVarPrepForStore($h);\n-        $output['h'][$c]['selected']   = $hselected == $hour;\n-        $output['h'][$c]['name']       = pnVarPrepForDisplay($hour);\n-    }\n-\n-    for ($c=0,$m=0; $m<=(60-$inc); $m+=$inc,$c++) {\n-        $min = sprintf('%02d', $m);\n-        $output['m'][$c]['id']         = pnVarPrepForStore($m);\n-        $output['m'][$c]['selected']   = $mselected == $min;\n-        $output['m'][$c]['name']       = pnVarPrepForDisplay($min);\n-    }\n-\n-    return $output;\n-}\n /**\n  *  Returns an array of form data for FormSelectMultiple\n  */\n-function postcalendar_adminapi_buildMonthSelect($args)\n-{\n-    return postcalendar_userapi_buildMonthSelect($args);\n-}\n function postcalendar_userapi_buildMonthSelect($args)\n {\n     extract($args);\n@@ -516,10 +418,6 @@ function postcalendar_userapi_buildMonthSelect($args)\n /**\n  *  Returns an array of form data for FormSelectMultiple\n  */\n-function postcalendar_adminapi_buildDaySelect($args)\n-{\n-    return postcalendar_userapi_buildDaySelect($args);\n-}\n function postcalendar_userapi_buildDaySelect($args)\n {\n     extract($args);\n@@ -554,10 +452,6 @@ function postcalendar_userapi_buildDaySelect($args)\n /**\n  *  Returns an array of form data for FormSelectMultiple\n  */\n-function postcalendar_adminapi_buildYearSelect($args)\n-{\n-    return postcalendar_userapi_buildYearSelect($args);\n-}\n function postcalendar_userapi_buildYearSelect($args)\n {\n     extract($args);\n@@ -593,10 +487,6 @@ function postcalendar_userapi_buildYearSelect($args)\n     return $output;\n }\n \n-function &postcalendar_adminapi_getCategories()\n-{\n-    return postcalendar_userapi_getCategories();\n-}\n function &postcalendar_userapi_getCategories()\n {\n     list($dbconn) = pnDBGetConn();\n@@ -622,10 +512,6 @@ function &postcalendar_userapi_getCategories()\n         list($catid,$catname,$constantid,$catcolor,$catdesc,\n             $rtype,$rspec,$rfreq,$duration,$limit,$end_date_flag,\n             $end_date_type,$end_date_freq,$end_all_day,$cattype,$active,$seq,$aco) = $result->fields;\n-        // check the category's permissions\n-        if (!pnSecAuthAction(0, 'PostCalendar::Category', \"$catname::$catid\", ACCESS_OVERVIEW)) {\n-            continue;\n-        }\n \n         $categories[$i]['id']     = $catid;\n         $categories[$i]['name']   = $catname;\n@@ -636,7 +522,7 @@ function &postcalendar_userapi_getCategories()\n         $categories[$i]['active']   = $active;\n         $categories[$i]['sequence']   = $seq;\n         $categories[$i]['event_repeat'] = $rtype;\n-        $rspecs = unserialize($rspec);\n+        $rspecs = unserialize($rspec, ['allowed_classes' => false]);\n         $categories[$i]['event_repeat_freq'] = $rspecs['event_repeat_freq'];\n         $categories[$i]['event_repeat_freq_type'] = $rspecs['event_repeat_freq_type'];\n         $categories[$i]['event_repeat_on_num'] = $rspecs['event_repeat_on_num'];\n@@ -658,10 +544,6 @@ function &postcalendar_userapi_getCategories()\n     return $categories;\n }\n \n-function &postcalendar_adminapi_getTopics()\n-{\n-    return postcalendar_userapi_getTopics();\n-}\n function &postcalendar_userapi_getTopics()\n {\n     list($dbconn) = pnDBGetConn();\n@@ -679,279 +561,13 @@ function &postcalendar_userapi_getTopics()\n     $data = array();\n     $i=0;\n     for (; !$topiclist->EOF; $topiclist->MoveNext()) {\n-        // check topic permissions\n-        if (pnSecAuthAction(0, 'PostCalendar::Topic', $topiclist->fields[2].'::'.$topiclist->fields[0], ACCESS_OVERVIEW)) {\n-            list($data[$i]['id'], $data[$i]['text'], $data[$i++]['name']) = $topiclist->fields;\n-        }\n+        list($data[$i]['id'], $data[$i]['text'], $data[$i++]['name']) = $topiclist->fields;\n     }\n \n     $topiclist->Close();\n     return $data;\n }\n \n-/**\n- *    postcalendar_adminapi_submitEvent()\n- *    submit an event\n- *    @param $args array of event data\n- *    @return bool true on success : false on failure;\n- */\n-function postcalendar_adminapi_submitEvent($args)\n-{\n-    return postcalendar_userapi_submitEvent($args);\n-}\n-/**\n- *    postcalendar_userapi_submitEvent()\n- *    submit an event\n- *    @param $args array of event data\n- *    @return bool true on success : false on failure;\n- */\n-function postcalendar_userapi_submitEvent($args)\n-{\n-    extract($args);\n-    unset($args);\n-\n-    list($dbconn) = pnDBGetConn();\n-    $pntable = pnDBGetTables();\n-\n-    //    determine if the event is to be published immediately or not\n-    //also whether is a special system only event i.e. _EVENT_TEMPORARY\n-    if (empty($event_status)) {\n-        if ((bool) _SETTING_DIRECT_SUBMIT || (bool) PC_ACCESS_ADMIN || ($event_sharing != SHARING_GLOBAL)) {\n-            $event_status = _EVENT_APPROVED;\n-        } else {\n-            $event_status = _EVENT_QUEUED;\n-        }\n-    } elseif ($event_status ==  _EVENT_TEMPORARY) {\n-        $event_status = _EVENT_TEMPORARY;\n-    } else {\n-        $event_status = _EVENT_QUEUED;\n-    }\n-\n-\n-    // set up some vars for the insert statement\n-    $startDate = $event_startyear.'-'.$event_startmonth.'-'.$event_startday;\n-    if ($event_endtype == 1) {\n-        $endDate = $event_endyear.'-'.$event_endmonth.'-'.$event_endday;\n-    } else {\n-        $endDate = '0000-00-00';\n-    }\n-\n-    if (!isset($event_allday)) {\n-        $event_allday = 0;\n-    }\n-\n-    if ((bool)_SETTING_TIME_24HOUR) {\n-        $startTime = $event_starttimeh.':'.$event_starttimem.':00';\n-    } else {\n-        if ($event_startampm == _AM_VAL) {\n-            $event_starttimeh = $event_starttimeh == 12 ? '00' : $event_starttimeh;\n-        } else {\n-            $event_starttimeh = $event_starttimeh != 12 ? $event_starttimeh+=12 : $event_starttimeh;\n-        }\n-\n-        $startTime = sprintf('%02d', $event_starttimeh).':'.sprintf('%02d', $event_starttimem).':00';\n-    }\n-\n-    if ($event_allday == 1) {\n-        $endTime = \"24:00:00\";\n-    } else {\n-        $endTime = date(\"H:i:00\", ($event_duration + strtotime($startTime)));\n-    }\n-\n-    // get rid of variables we no longer need to save memory\n-    unset(\n-        $event_startyear,\n-        $event_startmonth,\n-        $event_startday,\n-        $event_endyear,\n-        $event_endmonth,\n-        $event_endday,\n-        $event_starttimeh,\n-        $event_starttimem\n-    );\n-\n-    //pennfirm users need to be able to enter apps for different providers, this isn't aoplicable\n-    /*if(pnUserLoggedIn()) {\n-        $event_userid = pnUserGetVar('uid');\n-    } else {\n-        $event_userid = 0;\n-    }*/\n-\n-\n-    if ($pc_html_or_text == 'html') {\n-        $event_desc = ':html:'.$event_desc;\n-    } else {\n-        $event_desc = ':text:'.$event_desc;\n-    }\n-\n-    list($event_subject,$event_desc,$event_topic,$startDate,$endDate,\n-         $event_repeat,$startTime,$event_allday,$event_category,\n-         $event_location_info,$event_conttel,$event_contname,\n-         $event_contemail,$event_website,$event_fee,$event_status,\n-         $event_recurrspec,$event_duration,$event_sharing,$event_userid,$event_pid,\n-         $pc_event_id) = @pnVarPrepForStore(\n-             $event_subject,\n-             $event_desc,\n-             $event_topic,\n-             $startDate,\n-             $endDate,\n-             $event_repeat,\n-             $startTime,\n-             $event_allday,\n-             $event_category,\n-             $event_location_info,\n-             $event_conttel,\n-             $event_contname,\n-             $event_contemail,\n-             $event_website,\n-             $event_fee,\n-             $event_status,\n-             $event_recurrspec,\n-             $event_duration,\n-             $event_sharing,\n-             $event_userid,\n-             $event_pid,\n-             $pc_event_id\n-         );\n-\n-    if (!isset($is_update)) {\n-        $is_update = false;\n-    }\n-\n-    if ($is_update) {\n-        $sql = \"UPDATE $pntable[postcalendar_events]\n-                SET pc_title = '$event_subject',\n-                    pc_hometext = '$event_desc',\n-                    pc_topic = '$event_topic',\n-                    pc_eventDate = '$startDate',\n-                    pc_endDate = '$endDate',\n-                    pc_recurrtype = '$event_repeat',\n-                    pc_startTime = '$startTime',\n-                    pc_endTime = '$endTime',\n-                    pc_alldayevent = '$event_allday',\n-                    pc_catid = '$event_category',\n-                    pc_location = '$event_location_info',\n-                    pc_conttel = '$event_conttel',\n-                    pc_contname = '$event_contname',\n-                    pc_contemail = '$event_contemail',\n-                    pc_website = '$event_website',\n-                    pc_fee = '$event_fee',\n-                    pc_eventstatus = '$event_status',\n-                    pc_recurrspec = '$event_recurrspec',\n-                    pc_duration = '$event_duration',\n-                    pc_sharing = '$event_sharing',\n-                    pc_aid = '$event_userid',\n-                    pc_pid = '$event_pid'\n-                WHERE pc_eid = '$pc_event_id'\";\n-    } else {\n-        $pc_event_id = $dbconn->GenId($pntable['postcalendar_events']);\n-        $sql = \"INSERT INTO $pntable[postcalendar_events] (\n-                    pc_eid,\n-                    pc_title,\n-                    pc_time,\n-                    pc_hometext,\n-                    pc_topic,\n-                    pc_informant,\n-                    pc_eventDate,\n-                    pc_endDate,\n-                    pc_recurrtype,\n-                    pc_startTime,\n-                     pc_endTime,\n-                    pc_alldayevent,\n-                    pc_catid,\n-                    pc_location,\n-                    pc_conttel,\n-                    pc_contname,\n-                    pc_contemail,\n-                    pc_website,\n-                    pc_fee,\n-                    pc_eventstatus,\n-                    pc_recurrspec,\n-                    pc_duration,\n-                    pc_sharing,\n-                    pc_aid,\n-                    pc_pid)\n-                VALUES (\n-                    '$pc_event_id',\n-                    '$event_subject',\n-                    NOW(),\n-                    '$event_desc',\n-                    '$event_topic',\n-                    \" . $_SESSION['authUserID'] . \",\n-                    '$startDate',\n-                    '$endDate',\n-                    '$event_repeat',\n-                    '$startTime',\n-                    '$endTime',\n-                    '$event_allday',\n-                    '$event_category',\n-                    '$event_location_info',\n-                    '$event_conttel',\n-                    '$event_contname',\n-                    '$event_contemail',\n-                    '$event_website',\n-                    '$event_fee',\n-                    '$event_status',\n-                    '$event_recurrspec',\n-                    '$event_duration',\n-                    '$event_sharing',\n-                    '$event_userid',\n-                    '$event_pid'\n-                    )\";\n-    }\n-\n-    $result = $dbconn->Execute($sql);\n-    if ($result === false) {\n-        return false;\n-    } else {\n-        if ((bool)$is_update) {\n-            $eid = $pc_event_id;\n-        } else {\n-            $eid = $dbconn->PO_Insert_ID($pntable['postcalendar_events'], 'pc_eid');\n-        }\n-\n-        pc_notify($eid, $is_update);\n-        return true;\n-    }\n-}\n-\n-function pc_notify($eid, $is_update)\n-{\n-    if (!(bool)_SETTING_NOTIFY_ADMIN) {\n-        return true;\n-    }\n-\n-    $subject = _PC_NOTIFY_SUBJECT;\n-\n-    if ((bool)$is_update) {\n-        $message = _PC_NOTIFY_UPDATE_MSG;\n-    } else {\n-        $message = _PC_NOTIFY_NEW_MSG;\n-    }\n-\n-    $modinfo = pnModGetInfo(pnModGetIDFromName(__POSTCALENDAR__));\n-    $modversion = pnVarPrepForOS($modinfo['version']);\n-    unset($modinfo);\n-\n-    $message .= pnModURL(__POSTCALENDAR__, 'admin', 'adminevents', array('pc_event_id'=>$eid,'action'=>_ADMIN_ACTION_VIEW));\n-    $message .= \"\\n\\n\\n\\n\";\n-    $message .= \"----\\n\";\n-    $message .= \"PostCalendar $modversion\\n\";\n-    $message .= \"http://www.postcalendar.tv\";\n-\n-    mail(\n-        _SETTING_NOTIFY_EMAIL,\n-        $subject,\n-        $message,\n-        \"From: \" . _SETTING_NOTIFY_EMAIL . \"\\r\\n\"\n-          .\"X-Mailer: PHP/\" . phpversion() . \"\\r\\n\"\n-        .\"X-Mailer: PostCalendar/$modversion\"\n-    );\n-\n-    return true;\n-}\n-\n-\n function findFirstAvailable($period)\n {\n     //print_r($period);\n@@ -1085,869 +701,6 @@ function dtSecDur($date, $time, $dur)\n     return $time_sec + $dur;\n }\n \n-/**\n- *    postcalendar_adminapi_buildSubmitForm()\n- *    create event submit form\n- */\n-function postcalendar_adminapi_buildSubmitForm($args)\n-{\n-    return postcalendar_userapi_buildSubmitForm($args, true);\n-}\n-/**\n- *    postcalendar_userapi_buildSubmitForm()\n- *    create event submit form\n- */\n-function postcalendar_userapi_buildSubmitForm($args, $admin = false)\n-{\n-    $_SESSION['category'] = \"\";\n-    if (!PC_ACCESS_ADD) {\n-        return _POSTCALENDARNOAUTH;\n-    }\n-\n-    extract($args);\n-    unset($args);\n-    //since we seem to clobber category\n-    $cat = $category;\n-    $output = new pnHTML();\n-    $output->SetInputMode(_PNH_VERBATIMINPUT);\n-    // set up Smarty\n-    $tpl = new pcSmarty();\n-    $tpl->caching = false;\n-\n-    $template_name = pnModGetVar(__POSTCALENDAR__, 'pcTemplate');\n-\n-    if (!isset($template_name)) {\n-        $template_name ='default';\n-    }\n-\n-    //=================================================================\n-    //  Setup the correct config file path for the templates\n-    //=================================================================\n-    $modinfo = pnModGetInfo(pnModGetIDFromName(__POSTCALENDAR__));\n-    $modir = pnVarPrepForOS($modinfo['directory']);\n-    $modname = $modinfo['displayname'];\n-    $all_categories =& pnModAPIFunc(__POSTCALENDAR__, 'user', 'getCategories');\n-    //print_r($all_categories);\n-    unset($modinfo);\n-    $tpl->config_dir = \"modules/$modir/pntemplates/$template_name/config/\";\n-    //=================================================================\n-    //  PARSE MAIN\n-    //=================================================================\n-\n-\n-    $tpl->assign('webroot', $GLOBALS['web_root']);\n-    $tpl->assign_by_ref('TPL_NAME', $template_name);\n-    $tpl->assign('FUNCTION', pnVarCleanFromInput('func'));\n-    $tpl->assign_by_ref('ModuleName', $modname);\n-    $tpl->assign_by_ref('ModuleDirectory', $modir);\n-    $tpl->assign_by_ref('category', $all_categories);\n-    $tpl->assign('NewEventHeader', _PC_NEW_EVENT_HEADER);\n-    $tpl->assign('EventTitle', _PC_EVENT_TITLE);\n-    $tpl->assign('Required', _PC_REQUIRED);\n-    $tpl->assign('DateTimeTitle', _PC_DATE_TIME);\n-    $tpl->assign('AlldayEventTitle', _PC_ALLDAY_EVENT);\n-    $tpl->assign('TimedEventTitle', _PC_TIMED_EVENT);\n-    $tpl->assign('TimedDurationTitle', _PC_TIMED_DURATION);\n-    $tpl->assign('TimedDurationHoursTitle', _PC_TIMED_DURATION_HOURS);\n-    $tpl->assign('TimedDurationMinutesTitle', _PC_TIMED_DURATION_MINUTES);\n-    $tpl->assign('EventDescTitle', _PC_EVENT_DESC);\n-\n-    //the double book variable comes from the eventdata array that is\n-    //passed here and extracted, injection is not an issue here\n-    if (is_numeric($double_book)) {\n-        $tpl->assign('double_book', $double_book);\n-    }\n-\n-    //pennfirm begin patient info handling\n-    $ProviderID = pnVarCleanFromInput(\"provider_id\");\n-    if (is_numeric($ProviderID)) {\n-        $tpl->assign('ProviderID', $ProviderID);\n-        $tpl->assign('provider_id', $ProviderID);\n-    } elseif (is_numeric($event_userid) && $event_userid != 0) {\n-        $tpl->assign('ProviderID', $event_userid);\n-        $tpl->assign('provider_id', $event_userid);\n-    } else {\n-        if ($_SESSION['userauthorized'] == 1) {\n-            $tpl->assign('ProviderID', $_SESSION['authUserID']);\n-        } else {\n-            $tpl->assign('ProviderID', \"\");\n-        }\n-    }\n-\n-    $provinfo = getProviderInfo();\n-    $tpl->assign('providers', $provinfo);\n-    $PatientID = pnVarCleanFromInput(\"patient_id\");\n-    \n-    // limit the number of results returned by getPatientPID\n-    // this helps to prevent the server from stalling on a request with\n-    // no PID and thousands of PIDs in the database -- JRM\n-    // the function getPatientPID($pid, $given, $orderby, $limit, $start) <-- defined in library/patient.inc\n-    $plistlimit = 500;\n-    if (is_numeric($PatientID)) {\n-        $tpl->assign('PatientList', getPatientPID(array('pid'=>$PatientID, 'limit'=>$plistlimit)));\n-    } elseif (is_numeric($event_pid)) {\n-        $tpl->assign('PatientList', getPatientPID(array('pid'=>$event_pid, 'limit'=>$plistlimit)));\n-    } else {\n-        $tpl->assign('PatientList', getPatientPID(array('limit' =>$plistlimit)));\n-    }\n-\n-    $tpl->assign('event_pid', $event_pid);\n-    $tpl->assign('event_aid', $event_aid);\n-    $tpl->assign('event_category', pnVarCleanFromInput(\"event_category\"));\n-\n-    if (empty($event_patient_name)) {\n-        $patient_data = getPatientData($event_pid, $given = \"lname, fname\");\n-        $event_patient_name = $patient_data['lname'].\", \".$patient_data['fname'];\n-    }\n-\n-    $tpl->assign('patient_value', $event_patient_name);\n-\n-    //=================================================================\n-    //  PARSE INPUT_EVENT_TITLE\n-    //=================================================================\n-    $tpl->assign('InputEventTitle', 'event_subject');\n-    $tpl->assign('ValueEventTitle', pnVarPrepForDisplay($event_subject));\n-\n-    //=================================================================\n-    //  PARSE SELECT_DATE_TIME\n-    //=================================================================\n-\n-    // It seems that with Mozilla at least, <select> fields that are disabled\n-    // do not get passed as form data.  Therefore we ignore $double_book so\n-    // that the fields will not be disabled.  -- Rod 2005-03-22\n-\n-    $output->SetOutputMode(_PNH_RETURNOUTPUT);\n-    if (_SETTING_USE_INT_DATES) {\n-        $sel_data = pnModAPIFunc(__POSTCALENDAR__, 'user', 'buildDaySelect', array('pc_day'=>$day,'selected'=>$event_startday));\n-        $formdata = $output->FormSelectMultiple('event_startday', $sel_data, 0, 1, \"\", \"\", false, /* $double_book*/ '');\n-        $sel_data = pnModAPIFunc(__POSTCALENDAR__, 'user', 'buildMonthSelect', array('pc_month'=>$month,'selected'=>$event_startmonth));\n-        $formdata .= $output->FormSelectMultiple('event_startmonth', $sel_data, 0, 1, \"\", \"\", false, /* $double_book*/ '');\n-    } else {\n-        $sel_data = pnModAPIFunc(__POSTCALENDAR__, 'user', 'buildMonthSelect', array('pc_month'=>$month,'selected'=>$event_startmonth));\n-        $formdata = $output->FormSelectMultiple('event_startmonth', $sel_data, 0, 1, \"\", \"\", false, /* $double_book*/ '');\n-        $sel_data = pnModAPIFunc(__POSTCALENDAR__, 'user', 'buildDaySelect', array('pc_day'=>$day,'selected'=>$event_startday));\n-        $formdata .= $output->FormSelectMultiple('event_startday', $sel_data, 0, 1, \"\", \"\", false, /* $double_book*/ '');\n-    }\n-\n-    $sel_data = pnModAPIFunc(__POSTCALENDAR__, 'user', 'buildYearSelect', array('pc_year'=>$year,'selected'=>$event_startyear));\n-    $formdata .= $output->FormSelectMultiple('event_startyear', $sel_data, 0, 1, \"\", \"\", false, /* $double_book*/ '');\n-    $output->SetOutputMode(_PNH_KEEPOUTPUT);\n-    $tpl->assign('SelectDateTime', $formdata);\n-    $tpl->assign('InputAllday', 'event_allday');\n-    $tpl->assign('ValueAllday', '1');\n-    $tpl->assign('SelectedAllday', $event_allday==1 ? 'checked':'');\n-    $tpl->assign('InputTimed', 'event_allday');\n-    $tpl->assign('ValueTimed', '0');\n-    $tpl->assign('SelectedTimed', $event_allday==0 ? 'checked':'');\n-    $tpl->assign('STYLE', $GLOBALS['style']);\n-\n-    //=================================================================\n-    //  PARSE SELECT_END_DATE_TIME\n-    //=================================================================\n-    $output->SetOutputMode(_PNH_RETURNOUTPUT);\n-    //if there is no end date we want the box to read todays date instead of jan 01 1994 :)\n-    if ($event_endmonth == 0 && $event_endday ==0 && $event_endyear ==0) {\n-        $event_endmonth =$month;\n-        $event_endday = $day ;\n-        $event_endyear = $year;\n-    }\n-\n-    if (_SETTING_USE_INT_DATES) {\n-        $sel_data = pnModAPIFunc(__POSTCALENDAR__, 'user', 'buildDaySelect', array('pc_day'=>$day,'selected'=>$event_endday));\n-\n-        $formdata = $output->FormSelectMultiple('event_endday', $sel_data, 0, 1, \"\", \"\", false, /* $double_book*/ '');\n-        $sel_data = pnModAPIFunc(__POSTCALENDAR__, 'user', 'buildMonthSelect', array('pc_month'=>$month,'selected'=>$event_endmonth));\n-        $formdata .= $output->FormSelectMultiple('event_endmonth', $sel_data, 0, 1, \"\", \"\", false, /* $double_book*/ '');\n-    } else {\n-        $sel_data = pnModAPIFunc(__POSTCALENDAR__, 'user', 'buildMonthSelect', array('pc_month'=>$month,'selected'=>$event_endmonth));\n-        $formdata = $output->FormSelectMultiple('event_endmonth', $sel_data, 0, 1, \"\", \"\", false, /* $double_book*/ '');\n-        $sel_data = pnModAPIFunc(__POSTCALENDAR__, 'user', 'buildDaySelect', array('pc_day'=>$day,'selected'=>$event_endday));\n-        $formdata .= $output->FormSelectMultiple('event_endday', $sel_data, 0, 1, \"\", \"\", false, /* $double_book*/ '');\n-    }\n-\n-    $sel_data = pnModAPIFunc(__POSTCALENDAR__, 'user', 'buildYearSelect', array('pc_year'=>$year,'selected'=>$event_endyear));\n-    $formdata .= $output->FormSelectMultiple('event_endyear', $sel_data, 0, 1, \"\", \"\", false, /* $double_book*/ '');\n-    $output->SetOutputMode(_PNH_KEEPOUTPUT);\n-    $tpl->assign('SelectEndDate', $formdata);\n-    //=================================================================\n-    //  PARSE SELECT_TIMED_EVENT\n-    //=================================================================\n-    $stimes = pnModAPIFunc(__POSTCALENDAR__, 'user', 'buildTimeSelect', array('hselected'=>$event_starttimeh,'mselected'=>$event_starttimem));\n-    $output->SetOutputMode(_PNH_RETURNOUTPUT);\n-    $timed_hours = $output->FormSelectMultiple('event_starttimeh', $stimes['h'], 0, 1, \"\", \"\", false, /* $double_book*/ '');\n-    $timed_minutes = $output->FormSelectMultiple('event_starttimem', $stimes['m'], 0, 1, \"\", \"\", false, /* $double_book*/ '');\n-    if (!_SETTING_TIME_24HOUR) {\n-        $ampm = array();\n-        $ampm[0]['id']          = pnVarPrepForStore(_AM_VAL);\n-        $ampm[0]['name']        = pnVarPrepForDisplay(_PC_AM);\n-        $ampm[1]['id']          = pnVarPrepForStore(_PM_VAL);\n-        $ampm[1]['name']        = pnVarPrepForDisplay(_PC_PM);\n-        if ($event_startampm == \"AM\" || $event_startampm == _AM_VAL) {\n-            $ampm[0]['selected'] = 1;\n-        } else {\n-            $ampm[1]['selected'] = 1;\n-        }\n-\n-        $timed_ampm = $output->FormSelectMultiple('event_startampm', $ampm, 0, 1, \"\", \"\", false, /* $double_book*/ '');\n-    } else {\n-        $timed_ampm = '';\n-    }\n-\n-    $output->SetOutputMode(_PNH_KEEPOUTPUT);\n-    $tpl->assign('SelectTimedHours', $timed_hours);\n-    $tpl->assign('SelectTimedMinutes', $timed_minutes);\n-    $tpl->assign('SelectTimedAMPM', $timed_ampm);\n-    $tpl->assign('event_startday', $event_startday);\n-    $tpl->assign('event_startmonth', $event_startmonth);\n-    $tpl->assign('event_startyear', $event_startyear);\n-    $tpl->assign('event_starttimeh', $event_starttimeh);\n-    $tpl->assign('event_starttimem', $event_starttimem);\n-    $tpl->assign('event_startampm', $event_startampm);\n-    $tpl->assign('event_dur_hours', $event_dur_hours);\n-    $tpl->assign('event_dur_minutes', $event_dur_minutes);\n-\n-    //=================================================================\n-    //  PARSE SELECT_DURATION\n-    //=================================================================\n-    $event_dur_hours = (int) $event_dur_hours;\n-\n-    for ($i=0; $i<=24; $i+=1) {\n-        $TimedDurationHours[$i] = array('value'=>$i,\n-                                        'selected'=>($event_dur_hours==$i ? 'selected':''),\n-                                        'name'=>sprintf('%02d', $i));\n-    }\n-\n-    $tpl->assign('TimedDurationHours', $TimedDurationHours);\n-    $tpl->assign('InputTimedDurationHours', 'event_dur_hours');\n-    $found_time = false;\n-    for ($i=0; $i<60; $i+=_SETTING_TIME_INCREMENT) {\n-        $TimedDurationMinutes[$i] = array('value'=>$i,\n-                                          'selected'=>($event_dur_minutes==$i ? 'selected':''),\n-                                          'name'=>sprintf('%02d', $i));\n-        if ($TimedDurationMinutes[$i]['selected'] == 'selected') {\n-            $found_time = true;\n-        }\n-    }\n-\n-    if (!$found_time) {\n-        $TimedDurationMinutes[$i] = array('value'=>$event_dur_minutes,\n-                                            'selected'=>'selected',\n-                                            'name'=>sprintf('%02d', $event_dur_minutes));\n-    }\n-\n-    $tpl->assign('TimedDurationMinutes', $TimedDurationMinutes);\n-    $tpl->assign('hidden_event_dur_minutes', $event_dur_minutes);\n-    $tpl->assign('InputTimedDurationMinutes', 'event_dur_minutes');\n-    //=================================================================\n-    //  PARSE INPUT_EVENT_DESC\n-    //=================================================================\n-    $tpl->assign('InputEventDesc', 'event_desc');\n-    if (empty($pc_html_or_text)) {\n-        $display_type = substr($event_desc, 0, 6);\n-        if ($display_type == ':text:') {\n-            $pc_html_or_text = 'text';\n-            $event_desc = substr($event_desc, 6);\n-        } elseif ($display_type == ':html:') {\n-            $pc_html_or_text = 'html';\n-            $event_desc = substr($event_desc, 6);\n-        } else {\n-            $pc_html_or_text = 'text';\n-        }\n-\n-        unset($display_type);\n-    }\n-\n-    $tpl->assign('ValueEventDesc', pnVarPrepForDisplay($event_desc));\n-    $eventHTMLorText  = \"<select name=\\\"pc_html_or_text\\\">\";\n-    if ($pc_html_or_text == 'text') {\n-        $eventHTMLorText .= \"<option value=\\\"text\\\" selected=\\\"selected\\\">\"._PC_SUBMIT_TEXT.\"</option>\";\n-    } else {\n-        $eventHTMLorText .= \"<option value=\\\"text\\\">\"._PC_SUBMIT_TEXT.\"</option>\";\n-    }\n-\n-    if ($pc_html_or_text == 'html') {\n-        $eventHTMLorText .= \"<option value=\\\"html\\\" selected=\\\"selected\\\">\"._PC_SUBMIT_HTML.\"</option>\";\n-    } else {\n-        $eventHTMLorText .= \"<option value=\\\"html\\\">\"._PC_SUBMIT_HTML.\"</option>\";\n-    }\n-\n-    $eventHTMLorText .= \"</select>\";\n-    $tpl->assign('EventHTMLorText', $eventHTMLorText);\n-    //=================================================================\n-    //  PARSE select_event_topic_block\n-    //=================================================================\n-    $tpl->assign('displayTopics', _SETTING_DISPLAY_TOPICS);\n-    if ((bool)_SETTING_DISPLAY_TOPICS) {\n-        $a_topics =& postcalendar_userapi_getTopics();\n-        $topics = array();\n-        foreach ($a_topics as $topic) {\n-            array_push($topics, array('value'=>$topic['id'],\n-                                     'selected'=>($topic['id']==$event_topic ? 'selected':''),\n-                                     'name'=>$topic['text']));\n-        }\n-\n-        unset($a_topics);\n-        // only show this if we have topics to show\n-        if (count($topics) > 0) {\n-            $tpl->assign('topics', $topics);\n-            $tpl->assign('EventTopicTitle', _PC_EVENT_TOPIC);\n-            $tpl->assign('InputEventTopic', 'event_topic');\n-        }\n-    }\n-\n-    //=================================================================\n-    //  PARSE select_event_type_block\n-    //=================================================================\n-    $categories = array();\n-    foreach ($all_categories as $category) {\n-        array_push($categories, array('value'=>$category['id'],\n-                                     'selected'=>($category['id']==$event_category ? 'selected' : ''),\n-                                     'name'=>$category['name'],\n-                                     'color'=>$category['color'],\n-                                     'desc'=>$category['desc']));\n-    }\n-\n-    // only show this if we have categories to show\n-    // you should ALWAYS have at least one valid category\n-    if (count($categories) > 0) {\n-        $tpl->assign('categories', $categories);\n-        $tpl->assign('EventCategoriesTitle', _PC_EVENT_CATEGORY);\n-        $tpl->assign('InputEventCategory', 'event_category');\n-        $tpl->assign('hidden_event_category', $event_category);\n-    }\n-\n-    //=================================================================\n-    //  PARSE event_sharing_block\n-    //=================================================================\n-    $data = array();\n-    if (_SETTING_ALLOW_USER_CAL) {\n-        array_push($data, array(SHARING_PRIVATE,_PC_SHARE_PRIVATE));\n-        array_push($data, array(SHARING_PUBLIC,_PC_SHARE_PUBLIC));\n-        array_push($data, array(SHARING_BUSY,_PC_SHARE_SHOWBUSY));\n-    }\n-\n-    if (pnSecAuthAction(0, 'PostCalendar::', '::', ACCESS_ADMIN) || _SETTING_ALLOW_GLOBAL || !_SETTING_ALLOW_USER_CAL) {\n-        array_push($data, array(SHARING_GLOBAL,_PC_SHARE_GLOBAL));\n-    }\n-\n-    $sharing = array();\n-    foreach ($data as $cell) {\n-        array_push($sharing, array('value'=>$cell[0],\n-                                  'selected'=>((int) $event_sharing == $cell[0] ? 'selected' : ''),\n-                                  'name'=>$cell[1]));\n-    }\n-\n-    //pennfirm get list of providers from openemr code in calendar.inc\n-    $tpl->assign(\"user\", getCalendarProviderInfo());\n-\n-\n-    $tpl->assign('sharing', $sharing);\n-    $tpl->assign('EventSharingTitle', _PC_SHARING);\n-    $tpl->assign('InputEventSharing', 'event_sharing');\n-    //=================================================================\n-    //  location information\n-    //=================================================================\n-    $tpl->assign('EventLocationTitle', _PC_EVENT_LOCATION);\n-    $tpl->assign('InputLocation', 'event_location');\n-    $tpl->assign('ValueLocation', pnVarPrepForDisplay($event_location));\n-    $tpl->assign('EventStreetTitle', _PC_EVENT_STREET);\n-    $tpl->assign('InputStreet1', 'event_street1');\n-    $tpl->assign('ValueStreet1', pnVarPrepForDisplay($event_street1));\n-    $tpl->assign('InputStreet2', 'event_street2');\n-    $tpl->assign('ValueStreet2', pnVarPrepForDisplay($event_street2));\n-    $tpl->assign('EventCityTitle', _PC_EVENT_CITY);\n-    $tpl->assign('InputCity', 'event_city');\n-    $tpl->assign('ValueCity', pnVarPrepForDisplay($event_city));\n-    $tpl->assign('EventStateTitle', _PC_EVENT_STATE);\n-    $tpl->assign('InputState', 'event_state');\n-    $tpl->assign('ValueState', pnVarPrepForDisplay($event_state));\n-    $tpl->assign('EventPostalTitle', _PC_EVENT_POSTAL);\n-    $tpl->assign('InputPostal', 'event_postal');\n-    $tpl->assign('ValuePostal', pnVarPrepForDisplay($event_postal));\n-    //=================================================================\n-    //  contact information\n-    //=================================================================\n-    $tpl->assign('EventContactTitle', _PC_EVENT_CONTACT);\n-    $tpl->assign('InputContact', 'event_contname');\n-    $tpl->assign('ValueContact', pnVarPrepForDisplay($event_contname));\n-    $tpl->assign('EventPhoneTitle', _PC_EVENT_PHONE);\n-    $tpl->assign('InputPhone', 'event_conttel');\n-    $tpl->assign('ValuePhone', pnVarPrepForDisplay($event_conttel));\n-    $tpl->assign('EventEmailTitle', _PC_EVENT_EMAIL);\n-    $tpl->assign('InputEmail', 'event_contemail');\n-    $tpl->assign('ValueEmail', pnVarPrepForDisplay($event_contemail));\n-    $tpl->assign('EventWebsiteTitle', _PC_EVENT_WEBSITE);\n-    $tpl->assign('InputWebsite', 'event_website');\n-    $tpl->assign('ValueWebsite', pnVarPrepForDisplay($event_website));\n-    $tpl->assign('EventFeeTitle', _PC_EVENT_FEE);\n-    $tpl->assign('InputFee', 'event_fee');\n-    $tpl->assign('ValueFee', pnVarPrepForDisplay($event_fee));\n-    //=================================================================\n-    //  Repeating Information\n-    //=================================================================\n-    $tpl->assign('RepeatingHeader', _PC_REPEATING_HEADER);\n-    $tpl->assign('NoRepeatTitle', _PC_NO_REPEAT);\n-    $tpl->assign('RepeatTitle', _PC_REPEAT);\n-    $tpl->assign('RepeatOnTitle', _PC_REPEAT_ON);\n-    $tpl->assign('OfTheMonthTitle', _PC_OF_THE_MONTH);\n-    $tpl->assign('EndDateTitle', _PC_END_DATE);\n-    $tpl->assign('NoEndDateTitle', _PC_NO_END);\n-    $tpl->assign('InputNoRepeat', 'event_repeat');\n-    $tpl->assign('ValueNoRepeat', '0');\n-    $tpl->assign('SelectedNoRepeat', (int) $event_repeat==0 ? 'checked':'');\n-    $tpl->assign('InputRepeat', 'event_repeat');\n-    $tpl->assign('ValueRepeat', '1');\n-    $tpl->assign('SelectedRepeat', (int) $event_repeat==1 ? 'checked':'');\n-\n-    unset($in);\n-    $in = array(_PC_EVERY,_PC_EVERY_OTHER,_PC_EVERY_THIRD,_PC_EVERY_FOURTH);\n-    $keys = array(REPEAT_EVERY,REPEAT_EVERY_OTHER,REPEAT_EVERY_THIRD,REPEAT_EVERY_FOURTH);\n-    $repeat_freq = array();\n-    foreach ($in as $k => $v) {\n-        array_push($repeat_freq, array('value'=>$keys[$k],\n-                                      'selected'=>($keys[$k]==$event_repeat_freq?'selected':''),\n-                                      'name'=>$v));\n-    }\n-\n-    $tpl->assign('InputRepeatFreq', 'event_repeat_freq');\n-    if (empty($event_repeat_freq) || $event_repeat_freq < 1) {\n-        $event_repeat_freq = 1;\n-    }\n-\n-    $tpl->assign('InputRepeatFreqVal', $event_repeat_freq);\n-    $tpl->assign('repeat_freq', $repeat_freq);\n-    unset($in);\n-    $in = array(_PC_EVERY_DAY,_PC_EVERY_WORKDAY,_PC_EVERY_WEEK,_PC_EVERY_MONTH,_PC_EVERY_YEAR);\n-    $keys = array(REPEAT_EVERY_DAY,REPEAT_EVERY_WORK_DAY,REPEAT_EVERY_WEEK,REPEAT_EVERY_MONTH,REPEAT_EVERY_YEAR);\n-    $repeat_freq_type = array();\n-    foreach ($in as $k => $v) {\n-        array_push($repeat_freq_type, array('value'=>$keys[$k],\n-                                           'selected'=>($keys[$k]==$event_repeat_freq_type?'selected':''),\n-                                           'name'=>$v));\n-    }\n-\n-    $tpl->assign('InputRepeatFreqType', 'event_repeat_freq_type');\n-    $tpl->assign('repeat_freq_type', $repeat_freq_type);\n-\n-    $tpl->assign('InputRepeatOn', 'event_repeat');\n-    $tpl->assign('ValueRepeatOn', '2');\n-    $tpl->assign('SelectedRepeatOn', (int) $event_repeat==2 ? 'checked':'');\n-\n-    unset($in);\n-    $in = array(_PC_EVERY_1ST,_PC_EVERY_2ND,_PC_EVERY_3RD,_PC_EVERY_4TH,_PC_EVERY_LAST);\n-    $keys = array(REPEAT_ON_1ST,REPEAT_ON_2ND,REPEAT_ON_3RD,REPEAT_ON_4TH,REPEAT_ON_LAST);\n-    $repeat_on_num = array();\n-    foreach ($in as $k => $v) {\n-        array_push($repeat_on_num, array('value'=>$keys[$k],\n-                                        'selected'=>($keys[$k]==$event_repeat_on_num?'selected':''),\n-                                        'name'=>$v));\n-    }\n-\n-    $tpl->assign('InputRepeatOnNum', 'event_repeat_on_num');\n-    $tpl->assign('repeat_on_num', $repeat_on_num);\n-\n-    unset($in);\n-    $in = array(_PC_EVERY_SUN,_PC_EVERY_MON,_PC_EVERY_TUE,_PC_EVERY_WED,_PC_EVERY_THU,_PC_EVERY_FRI,_PC_EVERY_SAT);\n-    $keys = array(REPEAT_ON_SUN,REPEAT_ON_MON,REPEAT_ON_TUE,REPEAT_ON_WED,REPEAT_ON_THU,REPEAT_ON_FRI,REPEAT_ON_SAT);\n-    $repeat_on_day = array();\n-    foreach ($in as $k => $v) {\n-        array_push($repeat_on_day, array('value'=>$keys[$k],\n-                                        'selected'=>($keys[$k]==$event_repeat_on_day ? 'selected' : ''),\n-                                        'name'=>$v));\n-    }\n-\n-    $tpl->assign('InputRepeatOnDay', 'event_repeat_on_day');\n-    $tpl->assign('repeat_on_day', $repeat_on_day);\n-\n-    unset($in);\n-    $in = array(_PC_OF_EVERY_MONTH,_PC_OF_EVERY_2MONTH,_PC_OF_EVERY_3MONTH,_PC_OF_EVERY_4MONTH,_PC_OF_EVERY_6MONTH,_PC_OF_EVERY_YEAR);\n-    $keys = array(REPEAT_ON_MONTH,REPEAT_ON_2MONTH,REPEAT_ON_3MONTH,REPEAT_ON_4MONTH,REPEAT_ON_6MONTH,REPEAT_ON_YEAR);\n-    $repeat_on_freq = array();\n-    foreach ($in as $k => $v) {\n-        array_push($repeat_on_freq, array('value'=>$keys[$k],\n-                                         'selected'=>($keys[$k] == $event_repeat_on_freq ? 'selected' : ''),\n-                                         'name'=>$v));\n-    }\n-\n-    $tpl->assign('InputRepeatOnFreq', 'event_repeat_on_freq');\n-    if (empty($event_repeat_on_freq) || $event_repeat_on_freq < 1) {\n-        $event_repeat_on_freq = 1;\n-    }\n-\n-    $tpl->assign('InputRepeatOnFreqVal', $event_repeat_on_freq);\n-    $tpl->assign('repeat_on_freq', $repeat_on_freq);\n-    $tpl->assign('MonthsTitle', _PC_MONTHS);\n-\n-    //=================================================================\n-    //  PARSE INPUT_END_DATE\n-    //=================================================================\n-    $tpl->assign('InputEndOn', 'event_endtype');\n-    $tpl->assign('ValueEndOn', '1');\n-    $tpl->assign('SelectedEndOn', (int) $event_endtype==1 ? 'checked':'');\n-    //=================================================================\n-    //  PARSE INPUT_NO_END\n-    //=================================================================\n-    $tpl->assign('InputNoEnd', 'event_endtype');\n-    $tpl->assign('ValueNoEnd', '0');\n-    $tpl->assign('SelectedNoEnd', (int) $event_endtype==0 ? 'checked':'');\n-    $qstring = preg_replace(\"/provider_id=[0-9]*[&]{0,1}/\", \"\", $_SERVER['QUERY_STRING']);\n-    $tpl->assign('qstring', $qstring);\n-\n-    $output->SetOutputMode(_PNH_RETURNOUTPUT);\n-    $authkey = $output->FormHidden('authid', pnSecGenAuthKey());\n-    $output->SetOutputMode(_PNH_KEEPOUTPUT);\n-\n-    $form_hidden = \"<input type=\\\"hidden\\\" name=\\\"is_update\\\" value=\\\"$is_update\\\" />\";\n-    $form_hidden .= \"<input type=\\\"hidden\\\" name=\\\"pc_event_id\\\" value=\\\"$pc_event_id\\\" />\";\n-    $form_hidden .= \"<input type=\\\"hidden\\\" name=\\\"category\\\" value=\\\"$cat\\\" />\";\n-    if (isset($data_loaded)) {\n-        $form_hidden .= \"<input type=\\\"hidden\\\" name=\\\"data_loaded\\\" value=\\\"$data_loaded\\\" />\";\n-        $tpl->assign('FormHidden', $form_hidden);\n-    }\n-\n-    $form_submit = '<input type=hidden name=\"form_action\" value=\"commit\"/>\n-                   '.$authkey.'<input type=\"submit\" name=\"submit\" value=\"go\">' ;\n-    $tpl->assign('FormSubmit', $form_submit);\n-\n-    // do not cache this page\n-    if ($admin) {\n-        $output->Text($tpl->fetch($template_name.'/admin/submit.html'));\n-    }\n-\n-    //check flag no_nav, if true use much smaller submit form for find_patient.php, etc\n-    //elseif (pnVarCleanFromInput(\"no_nav\") == 1) {\n-    //    $output->Text($tpl->fetch($template_name.'/user/submit_no_nav.html'));\n-    //} else {\n-    //    $output->Text($tpl->fetch($template_name.'/user/submit.html'));\n-    //}\n-    $output->Text(postcalendar_footer());\n-    return $output->GetOutput();\n-}\n-\n-function &postcalendar_userapi_pcGetEventDetails($eid)\n-{\n-\n-    if (!isset($eid)) {\n-        return false;\n-    }\n-\n-    list($dbconn) = pnDBGetConn();\n-    $pntable = pnDBGetTables();\n-\n-    // link to the events tables\n-    $table      =  $pntable['postcalendar_events'];\n-    $cattable   =  $pntable['postcalendar_categories'];\n-\n-    $sql =  \"SELECT DISTINCT e.pc_eid,\n-                    e.pc_informant,\n-                    e.pc_catid,\n-                    e.pc_title,\n-                    e.pc_time,\n-                    e.pc_hometext,\n-                    e.pc_eventDate,\n-                    e.pc_duration,\n-                    e.pc_endDate,\n-                    e.pc_startTime,\n-                    e.pc_recurrtype,\n-                    e.pc_recurrfreq,\n-                    e.pc_recurrspec,\n-                    e.pc_topic,\n-                    e.pc_alldayevent,\n-                    e.pc_location,\n-                    e.pc_conttel,\n-                    e.pc_contname,\n-                    e.pc_contemail,\n-                    e.pc_website,\n-                    e.pc_fee,\n-                    e.pc_sharing,\n-                    c.pc_catcolor,\n-                    c.pc_catname,\n-                    c.pc_catdesc,\n-                    e.pc_pid,\n-                    e.pc_aid,\n-                    pd.pubpid\n-            FROM   ($table e, $cattable c)\n-            LEFT JOIN patient_data as pd ON (pd.pid = e.pc_pid)\n-            WHERE  (e.pc_eid = '$eid' AND c.pc_catid = e.pc_catid)\";\n-\n-    $result = $dbconn->Execute($sql);\n-    if ($dbconn->ErrorNo() != 0) {\n-        die($dbconn->ErrorMsg());\n-    }\n-\n-    $event = array();\n-    if (!isset($result)) {\n-        return $event;\n-    }\n-\n-    list($event['eid'],        $event['uname'],       $event['catid'],\n-         $event['title'],      $event['time'],        $event['hometext'],\n-         $event['eventDate'],  $event['duration'],    $event['endDate'],\n-         $event['startTime'],  $event['recurrtype'],  $event['recurrfreq'],\n-         $event['recurrspec'], $event['topic'],       $event['alldayevent'],\n-         $event['location'],   $event['conttel'],     $event['contname'],\n-         $event['contemail'],  $event['website'],     $event['fee'], $event['sharing'],\n-         $event['catcolor'],   $event['catname'],     $event['catdesc'], $event['pid'], $event['aid'],$event['pubpid']) = $result->fields;\n-    // there has to be a more intelligent way to do this\n-    @list($event['duration_hours'],$dmin) = @explode('.', ($event['duration']/60/60));\n-    $event['duration_minutes'] = substr(sprintf('%.2f', '.' . 60*($dmin/100)), 2, 2);\n-    //''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''\n-    $result->Close();\n-    //pennfirm fix to reflect openemr user/informant\n-    $userid = pnUserGetVar('uid');\n-\n-    // get the user id of event's author\n-    $users = pnUserGetAll();\n-    foreach ($users as $user) {\n-        if ($user['uname'] == $event['uname']) {\n-            $cuserid = $user['uid'];\n-            break;\n-        }\n-    }\n-\n-    unset($users);\n-\n-    // is this a public event to be shown as busy?\n-    if ($event['sharing'] == SHARING_PRIVATE && $cuserid != $userid) {\n-        // they are not supposed to see this\n-        return false;\n-    } elseif ($event['sharing'] == SHARING_BUSY && $cuserid != $userid) {\n-        // make it not display any information\n-        $event['title']     = _USER_BUSY_TITLE;\n-        $event['hometext']  = _USER_BUSY_MESSAGE;\n-        $event['location']  = '';\n-        $event['conttel']   = '';\n-        $event['contname']  = '';\n-        $event['contemail'] = '';\n-        $event['website']   = '';\n-        $event['fee']       = '';\n-    } else {\n-        $event['title']     = $event['title'];\n-        $event['hometext']  = $event['hometext'];\n-        $event['location']  = $event['location'];\n-        $event['conttel']   = $event['conttel'];\n-        $event['contname']  = $event['contname'];\n-        $event['contemail'] = $event['contemail'];\n-        $event['website']   = $event['website'];\n-        $event['fee']       = $event['fee'];\n-    }\n-\n-    $event['desc'] = $event['hometext'];\n-    $event['website'] = $event['website'];\n-    if (!empty($event['pid'])) {\n-        $event['patient_name'] = getPatientName($event['pid']);\n-    }\n-\n-    if (empty($event['aid'])) {\n-        $event['aid']= -1;\n-    }\n-\n-    return $event;\n-}\n-\n-/**\n- *  postcalendar_userapi_eventDetail\n- *  Creates the detailed event display and outputs html.\n- *  Accepts an array of key/value pairs\n- *  @param int $eid the id of the event to display\n- *  @return string html output\n- *  @access public\n- */\n-function postcalendar_adminapi_eventDetail($args)\n-{\n-    return postcalendar_userapi_eventDetail($args, true);\n-}\n-function postcalendar_userapi_eventDetail($args, $admin = false)\n-{\n-    if (!(bool)PC_ACCESS_READ) {\n-        return _POSTCALENDARNOAUTH;\n-    }\n-\n-    // get the theme globals :: is there a better way to do this?\n-    pnThemeLoad(pnUserGetTheme());\n-    global $bgcolor1, $bgcolor2, $bgcolor3, $bgcolor4, $bgcolor5;\n-    global $textcolor1, $textcolor2;\n-    $popup = pnVarCleanFromInput('popup');\n-    extract($args);\n-    unset($args);\n-    if (!isset($cacheid)) {\n-        $cacheid = null;\n-    }\n-\n-    if (!isset($eid)) {\n-        return false;\n-    }\n-\n-    if (!isset($nopop)) {\n-        $nopop = false;\n-    }\n-\n-    $uid = pnUserGetVar('uid');\n-    //=================================================================\n-    //  Find out what Template we're using\n-    //=================================================================\n-    $template_name = _SETTING_TEMPLATE;\n-    if (!isset($template_name)) {\n-        $template_name = 'default';\n-    }\n-\n-    //=================================================================\n-    //  Setup Smarty Template Engine\n-    //=================================================================\n-    $tpl = new pcSmarty();\n-\n-    if ($admin) {\n-        $template = $template_name.'/admin/details.html';\n-        $args['cacheid'] = '';\n-        $print=0;\n-        $Date =& postcalendar_getDate();\n-        $tpl->caching = false;\n-    } else {\n-        $template = $template_name.'/user/details.html';\n-    }\n-\n-    if (!$tpl->is_cached($template, $cacheid)) {\n-        // let's get the DB information\n-        list($dbconn) = pnDBGetConn();\n-        $pntable = pnDBGetTables();\n-        // get the event's information\n-        $event =& postcalendar_userapi_pcGetEventDetails($eid);\n-        // if the above is false, it's a private event for another user\n-        // we should not diplay this - so we just exit gracefully\n-        if ($event === false) {\n-            return false;\n-        }\n-\n-        //=================================================================\n-        //  get event's topic information\n-        //=================================================================\n-        $topics_table = $pntable['topics'];\n-        $topics_column = $pntable['topics_column'];\n-        $topicsql = \"SELECT $topics_column[topictext],$topics_column[topicimage]\n-                     FROM $topics_table\n-                     WHERE $topics_column[topicid] = $event[topic]\n-                     LIMIT 1\";\n-        $topic_result = $dbconn->Execute($topicsql);\n-        list($event['topictext'],$event['topicimg']) = $topic_result->fields;\n-        $location = unserialize($event['location']);\n-        $event['location'] = $location['event_location'];\n-        $event['street1']  = $location['event_street1'];\n-        $event['street2']  = $location['event_street2'];\n-        $event['city']     = $location['event_city'];\n-        $event['state']    = $location['event_state'];\n-        $event['postal']   = $location['event_postal'];\n-        $event['date']     = str_replace('-', '', $Date);\n-        //=================================================================\n-        //  populate the template\n-        //=================================================================\n-        if (!empty($event['location']) || !empty($event['street1']) ||\n-           !empty($event['street2']) || !empty($event['city']) ||\n-           !empty($event['state']) || !empty($event['postal'])) {\n-            $tpl->assign('LOCATION_INFO', true);\n-        } else {\n-            $tpl->assign('LOCATION_INFO', false);\n-        }\n-\n-        if (!empty($event['contname']) || !empty($event['contemail']) ||\n-           !empty($event['conttel']) || !empty($event['website'])) {\n-            $tpl->assign('CONTACT_INFO', true);\n-        } else {\n-            $tpl->assign('CONTACT_INFO', false);\n-        }\n-\n-        $display_type = substr($event['hometext'], 0, 6);\n-        if ($display_type == ':text:') {\n-            $prepFunction = 'pcVarPrepForDisplay';\n-            $event['hometext'] = substr($event['hometext'], 6);\n-        } elseif ($display_type == ':html:') {\n-            $prepFunction = 'pcVarPrepHTMLDisplay';\n-            $event['hometext'] = substr($event['hometext'], 6);\n-        } else {\n-            $prepFunction = 'pcVarPrepHTMLDisplay';\n-        }\n-\n-        unset($display_type);\n-        // prep the vars for output\n-        $event['title'] =& $prepFunction($event['title']);\n-        $event['hometext'] =& $prepFunction($event['hometext']);\n-        $event['desc'] =& $event['hometext'];\n-        $event['conttel'] =& $prepFunction($event['conttel']);\n-        $event['contname'] =& $prepFunction($event['contname']);\n-        $event['contemail'] =& $prepFunction($event['contemail']);\n-        $event['website'] =& $prepFunction(postcalendar_makeValidURL($event['website']));\n-        $event['fee'] =& $prepFunction($event['fee']);\n-        $event['location'] =& $prepFunction($event['location']);\n-        $event['street1'] =& $prepFunction($event['street1']);\n-        $event['street2'] =& $prepFunction($event['street2']);\n-        $event['city'] =& $prepFunction($event['city']);\n-        $event['state'] =& $prepFunction($event['state']);\n-        $event['postal'] =& $prepFunction($event['postal']);\n-\n-        $tpl->assign_by_ref('A_EVENT', $event);\n-        //=================================================================\n-        //  populate the template $ADMIN_OPTIONS\n-        //=================================================================\n-        $target='';\n-        if (_SETTING_OPEN_NEW_WINDOW) {\n-            $target = 'target=\"csCalendar\"';\n-        }\n-\n-        $admin_edit_url = $admin_delete_url = '';\n-        if (pnSecAuthAction(0, 'PostCalendar::', '::', ACCESS_ADMIN)) {\n-            $admin_edit_url     = pnModURL(__POSTCALENDAR__, 'admin', 'submit', array('pc_event_id'=>$eid));\n-            $admin_delete_url   = pnModURL(__POSTCALENDAR__, 'admin', 'adminevents', array('action'=>_ACTION_DELETE,'pc_event_id'=>$eid));\n-        }\n-\n-        $user_edit_url = $user_delete_url = '';\n-        if (pnUserLoggedIn()) {\n-            $logged_in_uname = $_SESSION['authUser'];\n-        } else {\n-            $logged_in_uname = '';\n-        }\n-\n-\n-        $can_edit = false;\n-        if (pnSecAuthAction(0, 'PostCalendar::', '::', ACCESS_ADD) && validateGroupStatus($logged_in_uname, getUsername($event['uname']))) {\n-            $user_edit_url     = pnModURL(__POSTCALENDAR__, 'user', 'submit', array('pc_event_id'=>$eid));\n-            $user_delete_url   = pnModURL(__POSTCALENDAR__, 'user', 'delete', array('pc_event_id'=>$eid));\n-            $can_edit = true;\n-        }\n-\n-        $tpl->assign('STYLE', $GLOBALS['style']);\n-        $tpl->assign_by_ref('ADMIN_TARGET', $target);\n-        $tpl->assign_by_ref('ADMIN_EDIT', $admin_edit_url);\n-        $tpl->assign_by_ref('ADMIN_DELETE', $admin_delete_url);\n-        $tpl->assign_by_ref('USER_TARGET', $target);\n-        $tpl->assign_by_ref('USER_EDIT', $user_edit_url);\n-        $tpl->assign_by_ref('USER_DELETE', $user_delete_url);\n-        $tpl->assign_by_ref('USER_CAN_EDIT', $can_edit);\n-    }\n-\n-    //=================================================================\n-    //  Parse the template\n-    //=================================================================\n-    if ($popup != 1 && $print != 1) {\n-        $output  = \"\\n\\n<!-- START POSTCALENDAR OUTPUT [-: HTTP://POSTCALENDAR.TV :-] -->\\n\\n\";\n-        $output .= $tpl->fetch($template, $cacheid);\n-        $output .= \"\\n\\n<!-- END POSTCALENDAR OUTPUT [-: HTTP://POSTCALENDAR.TV :-] -->\\n\\n\";\n-    } else {\n-        $theme = pnUserGetTheme();\n-        echo \"<html><head>\";\n-        echo \"<LINK REL=\\\"StyleSheet\\\" HREF=\\\"themes/$theme/style/styleNN.css\\\" TYPE=\\\"text/css\\\">\\n\\n\\n\";\n-        echo \"<style type=\\\"text/css\\\">\\n\";\n-        echo \"@import url(\\\"themes/$theme/style/style.css\\\"); \";\n-        echo \"</style>\\n\";\n-        echo \"</head><body>\\n\";\n-        $tpl->display($template, $cacheid);\n-        echo postcalendar_footer();\n-        echo \"\\n</body></html>\";\n-        session_write_close();\n-        exit;\n-    }\n-\n-    return $output;\n-}\n-\n function postcalendar_footer()\n {\n     // lets get the module's information\n@@ -1957,110 +710,6 @@ function postcalendar_footer()\n     return $footer;\n }\n \n-function postcalendar_smarty_pc_sort_day($params, &$smarty)\n-{\n-    extract($params);\n-\n-    if (empty($var)) {\n-        $smarty->trigger_error(\"sort_array: missing 'var' parameter\");\n-        return;\n-    }\n-\n-    if (!in_array('value', array_keys($params))) {\n-        $smarty->trigger_error(\"sort_array: missing 'value' parameter\");\n-        return;\n-    }\n-\n-    if (!in_array('order', array_keys($params))) {\n-        $order = 'asc';\n-    }\n-\n-    if (!in_array('inc', array_keys($params))) {\n-        $inc = '15';\n-    }\n-\n-    if (!in_array('start', array_keys($params))) {\n-        $sh = '08';\n-        $sm = '00';\n-    } else {\n-        list($sh,$sm) = explode(':', $start);\n-    }\n-\n-    if (!in_array('end', array_keys($params))) {\n-        $eh = '21';\n-        $em = '00';\n-    } else {\n-        list($eh,$em) = explode(':', $end);\n-    }\n-\n-    if (strtolower($order) == 'asc') {\n-        $function = 'sort_byTimeA';\n-    }\n-\n-    if (strtolower($order) == 'desc') {\n-        $function = 'sort_byTimeD';\n-    }\n-\n-    foreach ($value as $events) {\n-        usort($events, $function);\n-        $newArray = $events;\n-    }\n-\n-    // here we want to create an intelligent array of\n-    // columns and rows to build a nice day view\n-    $ch = $sh;\n-    $cm = $sm;\n-    while (\"$ch:$cm\" <= \"$eh:$em\") {\n-        $hours[\"$ch:$cm\"] = array();\n-        $cm += $inc;\n-        if ($cm >= 60) {\n-            $cm = '00';\n-            $ch = sprintf('%02d', $ch+1);\n-        }\n-    }\n-\n-    $alldayevents = array();\n-    foreach ($newArray as $event) {\n-        list($sh,$sm,$ss) = explode(':', $event['startTime']);\n-        $eh = sprintf('%02d', $sh + $event['duration_hours']);\n-        $em = sprintf('%02d', $sm + $event['duration_minutes']);\n-\n-        if ($event['alldayevent']) {\n-            // we need an entire column . save till later\n-            $alldayevents[] = $event;\n-        } else {\n-            //find open time slots - avoid overlapping\n-            $needed = array();\n-            $ch = $sh;\n-            $cm = $sm;\n-            //what times do we need?\n-            while (\"$ch:$cm\" < \"$eh:$em\") {\n-                $needed[] = \"$ch:$cm\";\n-                $cm += $inc;\n-                if ($cm >= 60) {\n-                    $cm = '00';\n-                    $ch = sprintf('%02d', $ch+1);\n-                }\n-            }\n-\n-            $i = 0;\n-            foreach ($needed as $time) {\n-                if ($i==0) {\n-                    $hours[$time][] = $event;\n-                    $key = count($hours[$time])-1;\n-                } else {\n-                    $hours[$time][$key] = 'continued';\n-                }\n-\n-                $i++;\n-            }\n-        }\n-    }\n-\n-    //pcDebugVar($hours);\n-    $smarty->assign_by_ref($var, $hours);\n-}\n-\n function sort_byCategoryA($a, $b)\n {\n     if ($a['catname'] < $b['catname']) {\n@@ -2133,44 +782,3 @@ function pc_clean($s)\n     $tmp = explode(' ', $s);\n     return join(\"'+' \", $tmp);\n }\n-\n-function &postcalendar_adminapi_getCategoryLimits()\n-{\n-    return postcalendar_userapi_getCategoryLimits();\n-}\n-function &postcalendar_userapi_getCategoryLimits()\n-{\n-    list($dbconn) = pnDBGetConn();\n-    $pntable = pnDBGetTables();\n-    $cat_table = $pntable['postcalendar_limits'];\n-    $sql = \"SELECT pc_limitid,pc_catid,pc_starttime,pc_endtime,\n-            pc_limit FROM $cat_table\n-            ORDER BY pc_limitid\";\n-    $result = $dbconn->Execute($sql);\n-\n-    if ($dbconn->ErrorNo() != 0) {\n-        return array();\n-    }\n-\n-    if (!isset($result)) {\n-        return array();\n-    }\n-\n-    $limits = array();\n-    for ($i=0; !$result->EOF; $result->MoveNext()) {\n-        list($limitid,$catid,$startTime,$endTime,$limit) = $result->fields;\n-        // check the category's permissions\n-        if (!pnSecAuthAction(0, 'PostCalendar::Category', \"$catname::$catid\", ACCESS_OVERVIEW)) {\n-            continue;\n-        }\n-\n-        $limits[$i]['limitid']  = $limitid;\n-        $limits[$i]['catid']       = $catid;\n-        $limits[$i]['startTime']= $startTime;\n-        $limits[$i]['endTime']    = $endTime;\n-        $limits[$i++]['limit']    = $limit;\n-    }\n-\n-    $result->Close();\n-    return $limits;\n-}\n", "diff --git a/interface/main/calendar/modules/PostCalendar/docs/changelog.txt b/interface/main/calendar/modules/PostCalendar/docs/changelog.txt\ndeleted file mode 100644\nindex c9811a5d5..000000000\n--- a/interface/main/calendar/modules/PostCalendar/docs/changelog.txt\n+++ /dev/null\n@@ -1,182 +0,0 @@\n-$Id$\n-\n-[PostCalendar 4.0.0]\n-\n-20030130\n-\t* integrated both Patch 1 and Patch 2 into this distribution\n-\n-20021223\n-\t* More intelligent Print View Handling\n-\t* Introduced $PRINT_VIEW Template Variable\n-\t\n-20021222\n-\t* Fixed event details in popup bug\n-\t* Fixed missing translation defines\n-\t* Fixed small navigation - added permission check for add\n-\t\n-[PostCalendar 3.9.9]\n-\n-20021219\n-\t* added admin email notification option\n-\t* smarty plugins now moved to own directory and in seperate files\n-\t* fixed minor display issues with small calendar month views\n-\t* added no events message to day view\n-\t* some language file changes\n-\t\n-20021218\n-\t* Safe Mode now Auto-Detected\n-\t* Remove Admin Setting for 'Is PHP Using Safe Mode?'\n-\n-[PostCalendar 3.9.8]\n-\n-20021218\n-\t* Fixes for username conflicts - username renamed to pc_username\n-\t* Pemission check tweaks\n-\t* More CSS Tweaks\n-\t* Fixed non-existent object in Test System\n-\t* Fixed _SETTING_DEFAULT_VIEW bug in pc_show_views plugin\n-\n-[PostCalendar 3.9.7]\n-\n-20021216\n-\t* Fixed webiste link getting lost \n-\t* Permissions should work as expected now\n-\t* Some template re-design and CSS Tweaks\n-\t* Fixed function () not found bug\n-\t* Fixed JavaScript Errors\n-\t* Fixed link/form targets in popup window\n-\t* Admin details now show original event start date\n-\n-[PostCalendar 3.9.6]\n-\n-20021212\n-\t* More Special Character Fixes\n-\t* Fixed loading of global.php\n-\t* removed pc_lid from pninit.php\n-\t* fixed upgrade script\n-\t\n-20021211\n-\t* Fixes for special characters\n-\n-[PostCalendar 3.9.5]\n-\n-20021210\n-\t* Topic Text now used instead of Topic Name\n-\t* Categories sorted by name\n-\t* More il8n in templates for date formats\n-\t* Removed pnHTML calls from most of Admin\t\n-\n-20021209\n-\t* Fixed colors in submit forms\n-\t* Added more robust repeating frequencies\n-\t* Modifed repeating logic\n-\t* Filter by all users\n-\t* Calendar block header css fixes\n-\t* Users can now edit/delete their own events\n-\t* HTML special character fixes\n-\n-[PostCalendar 3.9.4]\n-\n-20021208\n-\t* Fixed pcSmarty.class.php assign_by_ref bug\n-\t* More memory tweaks\n-\t* Error checking now works on Preview and Submit\n-\t* Added db indexes to help alleviate db query stress\n-\t* Cosmetic changes\n-\t\n-[PostCalendar 3.9.3]\n-\n-20021206\n-\t* Fixed event preview bug when not using topics\n-\t* Smarty now passes some values by reference\n-\n-[PostCalendar 3.9.2]\n-\n-20021206\n-\t* Fixed incorrect date display in event details\n-\t* Fixed issues with XForum\n-\t* New pcSafeMode Admin Setting\n-\t* Admin now uses details.html template\n-\t* Print view opens in new browser window\n-\t* Fixed smarty plugin showViews directory bug\n-\t* Event data is no longer loaded for YEAR views\n-\t* Some template tweaks\n-\t* Mouseovers added to calendar block month view\n-\n-[PostCalendar 3.9.1]\n-\n-20021204\n-\t* Fixed safe mode issues\n-\t* Fixed Print Bug\n-\t* Fixed list view templates for year and month\n-\t* Added pc_filter plugin\n-\t* Fixed pass-by-reference warning\n-\t* Fixed update of informant on event edit\n-\t* Fixed conflicts with postguestbook\n-\t* Fixed conflicts with XForum (unconfirmed)\n-\t* New Admin Image\n-\t\n-[PostCalendar 3.9.0]\n-\n-20021203 : rraymond\n-\t* Fixed upgrade procedure\n-\t* Optimized pcSmarty class\n-\t* Removed old TemplatePower and IT classes\n-\t* Preped for 3.9.0 release\n-\t\n-20021202 : rraymond\n-\t* New PostCalendar::Topic permission\n-    * New Order Param to pc_date_select\n-    * New User Param to pc_date_select\n-    * Print added to Details\n-    * Fixed latency issue on menu settings\n-    * Fixed postcalendar_footer() error on Print screens\n-    * Added pcUseCace admin setting\n-    * Added pcCacheLifetime admin setting\n-    * Private events now display Correctly\n-    * Optimzed Event SQL\n-    * Added Use Default admin option\n-    * Caching now REALLY works\n-    * Search is working\n-    * Added HTML or TEXT option to Add/Edit\n-    * Fixed Admin Prev/Next and Sort links\n-    * Optimized Year View template\n-    * Added some missing translations\n-    * Fixed garbled email addresses\n-    * updated event detail and preview templates\n-    * removed benchmarking results\n-    * removed some old unused files \n-\t\n-20021130 : rraymond\n-\t* New Permission PostCalendar::Topic\n-\t* Order parameter added to pc_date_select\n-\t* User parameter added to pc_date_select\n-\t* Added print function to event details\n-\t* Fixed Private event details display arror\n-\t* Print Screen fixes\n-\t* pcUseCache and pcCacheLifetime admin settings added\n-\t* pcDefaultView added to settings\n-\t* added link to reset settings to defaults\n-\t* the usual bug fixes\n-\t* search by keywords working\n-\t\n-[PostCalendar 3.0]\n-\n-PostNuke .71+ compatible\n-All new code, re-written from the ground up.\n-One block for all views \n-    (Calendar/Current Events/Upcoming Events)\n-All data now held in one table\n-Recurring events should now display correctly\n-New Global Settings\n-New mouseover javascript popup code (overLIB)\n-More powerful administration\n-New Block Settings\n-New event detail display\n-New day view\n-New week view\n-New month view\n-New year view\n-New add event to day links\n-Upgrade old tables in admin\n-And much more...\n", "diff --git a/interface/main/calendar/modules/PostCalendar/docs/credits.txt b/interface/main/calendar/modules/PostCalendar/docs/credits.txt\ndeleted file mode 100644\nindex ab52fd6a4..000000000\n--- a/interface/main/calendar/modules/PostCalendar/docs/credits.txt\n+++ /dev/null\n@@ -1,15 +0,0 @@\n-$Id$\n-========================================================================\n-Credits\n-========================================================================\n-\t\n-\tVersion 3.0\n-\t\tMahmood Al-Yousif\n-\t\tRoger Raymond (iansym)\n-\t\n-\tVersion 2.0\n-\t\tCraig Hamlin\n-\t\tHotBird\n-\n-\t\n-\tOriginally Based on Rob Sutton's Events Calendar\n", "diff --git a/interface/main/calendar/modules/PostCalendar/docs/help.txt b/interface/main/calendar/modules/PostCalendar/docs/help.txt\ndeleted file mode 100644\nindex e69de29bb..000000000\n", "diff --git a/interface/main/calendar/modules/PostCalendar/docs/license.txt b/interface/main/calendar/modules/PostCalendar/docs/license.txt\ndeleted file mode 100644\nindex 24d9ef04c..000000000\n--- a/interface/main/calendar/modules/PostCalendar/docs/license.txt\n+++ /dev/null\n@@ -1,281 +0,0 @@\n-\t\t    GNU GENERAL PUBLIC LICENSE\n-\t\t       Version 2, June 1991\n-\n- Copyright (C) 1989, 1991 Free Software Foundation, Inc.\n-                       59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n- Everyone is permitted to copy and distribute verbatim copies\n- of this license document, but changing it is not allowed.\n-\n-\t\t\t    Preamble\n-\n-  The licenses for most software are designed to take away your\n-freedom to share and change it.  By contrast, the GNU General Public\n-License is intended to guarantee your freedom to share and change free\n-software--to make sure the software is free for all its users.  This\n-General Public License applies to most of the Free Software\n-Foundation's software and to any other program whose authors commit to\n-using it.  (Some other Free Software Foundation software is covered by\n-the GNU Library General Public License instead.)  You can apply it to\n-your programs, too.\n-\n-  When we speak of free software, we are referring to freedom, not\n-price.  Our General Public Licenses are designed to make sure that you\n-have the freedom to distribute copies of free software (and charge for\n-this service if you wish), that you receive source code or can get it\n-if you want it, that you can change the software or use pieces of it\n-in new free programs; and that you know you can do these things.\n-\n-  To protect your rights, we need to make restrictions that forbid\n-anyone to deny you these rights or to ask you to surrender the rights.\n-These restrictions translate to certain responsibilities for you if you\n-distribute copies of the software, or if you modify it.\n-\n-  For example, if you distribute copies of such a program, whether\n-gratis or for a fee, you must give the recipients all the rights that\n-you have.  You must make sure that they, too, receive or can get the\n-source code.  And you must show them these terms so they know their\n-rights.\n-\n-  We protect your rights with two steps: (1) copyright the software, and\n-(2) offer you this license which gives you legal permission to copy,\n-distribute and/or modify the software.\n-\n-  Also, for each author's protection and ours, we want to make certain\n-that everyone understands that there is no warranty for this free\n-software.  If the software is modified by someone else and passed on, we\n-want its recipients to know that what they have is not the original, so\n-that any problems introduced by others will not reflect on the original\n-authors' reputations.\n-\n-  Finally, any free program is threatened constantly by software\n-patents.  We wish to avoid the danger that redistributors of a free\n-program will individually obtain patent licenses, in effect making the\n-program proprietary.  To prevent this, we have made it clear that any\n-patent must be licensed for everyone's free use or not licensed at all.\n-\n-  The precise terms and conditions for copying, distribution and\n-modification follow.\n-\n-\t\t    GNU GENERAL PUBLIC LICENSE\n-   TERMS AND CONDITIONS FOR COPYING, DISTRIBUTION AND MODIFICATION\n-\n-  0. This License applies to any program or other work which contains\n-a notice placed by the copyright holder saying it may be distributed\n-under the terms of this General Public License.  The \"Program\", below,\n-refers to any such program or work, and a \"work based on the Program\"\n-means either the Program or any derivative work under copyright law:\n-that is to say, a work containing the Program or a portion of it,\n-either verbatim or with modifications and/or translated into another\n-language.  (Hereinafter, translation is included without limitation in\n-the term \"modification\".)  Each licensee is addressed as \"you\".\n-\n-Activities other than copying, distribution and modification are not\n-covered by this License; they are outside its scope.  The act of\n-running the Program is not restricted, and the output from the Program\n-is covered only if its contents constitute a work based on the\n-Program (independent of having been made by running the Program).\n-Whether that is true depends on what the Program does.\n-\n-  1. You may copy and distribute verbatim copies of the Program's\n-source code as you receive it, in any medium, provided that you\n-conspicuously and appropriately publish on each copy an appropriate\n-copyright notice and disclaimer of warranty; keep intact all the\n-notices that refer to this License and to the absence of any warranty;\n-and give any other recipients of the Program a copy of this License\n-along with the Program.\n-\n-You may charge a fee for the physical act of transferring a copy, and\n-you may at your option offer warranty protection in exchange for a fee.\n-\n-  2. You may modify your copy or copies of the Program or any portion\n-of it, thus forming a work based on the Program, and copy and\n-distribute such modifications or work under the terms of Section 1\n-above, provided that you also meet all of these conditions:\n-\n-    a) You must cause the modified files to carry prominent notices\n-    stating that you changed the files and the date of any change.\n-\n-    b) You must cause any work that you distribute or publish, that in\n-    whole or in part contains or is derived from the Program or any\n-    part thereof, to be licensed as a whole at no charge to all third\n-    parties under the terms of this License.\n-\n-    c) If the modified program normally reads commands interactively\n-    when run, you must cause it, when started running for such\n-    interactive use in the most ordinary way, to print or display an\n-    announcement including an appropriate copyright notice and a\n-    notice that there is no warranty (or else, saying that you provide\n-    a warranty) and that users may redistribute the program under\n-    these conditions, and telling the user how to view a copy of this\n-    License.  (Exception: if the Program itself is interactive but\n-    does not normally print such an announcement, your work based on\n-    the Program is not required to print an announcement.)\n-\n-These requirements apply to the modified work as a whole.  If\n-identifiable sections of that work are not derived from the Program,\n-and can be reasonably considered independent and separate works in\n-themselves, then this License, and its terms, do not apply to those\n-sections when you distribute them as separate works.  But when you\n-distribute the same sections as part of a whole which is a work based\n-on the Program, the distribution of the whole must be on the terms of\n-this License, whose permissions for other licensees extend to the\n-entire whole, and thus to each and every part regardless of who wrote it.\n-\n-Thus, it is not the intent of this section to claim rights or contest\n-your rights to work written entirely by you; rather, the intent is to\n-exercise the right to control the distribution of derivative or\n-collective works based on the Program.\n-\n-In addition, mere aggregation of another work not based on the Program\n-with the Program (or with a work based on the Program) on a volume of\n-a storage or distribution medium does not bring the other work under\n-the scope of this License.\n-\n-  3. You may copy and distribute the Program (or a work based on it,\n-under Section 2) in object code or executable form under the terms of\n-Sections 1 and 2 above provided that you also do one of the following:\n-\n-    a) Accompany it with the complete corresponding machine-readable\n-    source code, which must be distributed under the terms of Sections\n-    1 and 2 above on a medium customarily used for software interchange; or,\n-\n-    b) Accompany it with a written offer, valid for at least three\n-    years, to give any third party, for a charge no more than your\n-    cost of physically performing source distribution, a complete\n-    machine-readable copy of the corresponding source code, to be\n-    distributed under the terms of Sections 1 and 2 above on a medium\n-    customarily used for software interchange; or,\n-\n-    c) Accompany it with the information you received as to the offer\n-    to distribute corresponding source code.  (This alternative is\n-    allowed only for noncommercial distribution and only if you\n-    received the program in object code or executable form with such\n-    an offer, in accord with Subsection b above.)\n-\n-The source code for a work means the preferred form of the work for\n-making modifications to it.  For an executable work, complete source\n-code means all the source code for all modules it contains, plus any\n-associated interface definition files, plus the scripts used to\n-control compilation and installation of the executable.  However, as a\n-special exception, the source code distributed need not include\n-anything that is normally distributed (in either source or binary\n-form) with the major components (compiler, kernel, and so on) of the\n-operating system on which the executable runs, unless that component\n-itself accompanies the executable.\n-\n-If distribution of executable or object code is made by offering\n-access to copy from a designated place, then offering equivalent\n-access to copy the source code from the same place counts as\n-distribution of the source code, even though third parties are not\n-compelled to copy the source along with the object code.\n-\n-  4. You may not copy, modify, sublicense, or distribute the Program\n-except as expressly provided under this License.  Any attempt\n-otherwise to copy, modify, sublicense or distribute the Program is\n-void, and will automatically terminate your rights under this License.\n-However, parties who have received copies, or rights, from you under\n-this License will not have their licenses terminated so long as such\n-parties remain in full compliance.\n-\n-  5. You are not required to accept this License, since you have not\n-signed it.  However, nothing else grants you permission to modify or\n-distribute the Program or its derivative works.  These actions are\n-prohibited by law if you do not accept this License.  Therefore, by\n-modifying or distributing the Program (or any work based on the\n-Program), you indicate your acceptance of this License to do so, and\n-all its terms and conditions for copying, distributing or modifying\n-the Program or works based on it.\n-\n-  6. Each time you redistribute the Program (or any work based on the\n-Program), the recipient automatically receives a license from the\n-original licensor to copy, distribute or modify the Program subject to\n-these terms and conditions.  You may not impose any further\n-restrictions on the recipients' exercise of the rights granted herein.\n-You are not responsible for enforcing compliance by third parties to\n-this License.\n-\n-  7. If, as a consequence of a court judgment or allegation of patent\n-infringement or for any other reason (not limited to patent issues),\n-conditions are imposed on you (whether by court order, agreement or\n-otherwise) that contradict the conditions of this License, they do not\n-excuse you from the conditions of this License.  If you cannot\n-distribute so as to satisfy simultaneously your obligations under this\n-License and any other pertinent obligations, then as a consequence you\n-may not distribute the Program at all.  For example, if a patent\n-license would not permit royalty-free redistribution of the Program by\n-all those who receive copies directly or indirectly through you, then\n-the only way you could satisfy both it and this License would be to\n-refrain entirely from distribution of the Program.\n-\n-If any portion of this section is held invalid or unenforceable under\n-any particular circumstance, the balance of the section is intended to\n-apply and the section as a whole is intended to apply in other\n-circumstances.\n-\n-It is not the purpose of this section to induce you to infringe any\n-patents or other property right claims or to contest validity of any\n-such claims; this section has the sole purpose of protecting the\n-integrity of the free software distribution system, which is\n-implemented by public license practices.  Many people have made\n-generous contributions to the wide range of software distributed\n-through that system in reliance on consistent application of that\n-system; it is up to the author/donor to decide if he or she is willing\n-to distribute software through any other system and a licensee cannot\n-impose that choice.\n-\n-This section is intended to make thoroughly clear what is believed to\n-be a consequence of the rest of this License.\n-\n-  8. If the distribution and/or use of the Program is restricted in\n-certain countries either by patents or by copyrighted interfaces, the\n-original copyright holder who places the Program under this License\n-may add an explicit geographical distribution limitation excluding\n-those countries, so that distribution is permitted only in or among\n-countries not thus excluded.  In such case, this License incorporates\n-the limitation as if written in the body of this License.\n-\n-  9. The Free Software Foundation may publish revised and/or new versions\n-of the General Public License from time to time.  Such new versions will\n-be similar in spirit to the present version, but may differ in detail to\n-address new problems or concerns.\n-\n-Each version is given a distinguishing version number.  If the Program\n-specifies a version number of this License which applies to it and \"any\n-later version\", you have the option of following the terms and conditions\n-either of that version or of any later version published by the Free\n-Software Foundation.  If the Program does not specify a version number of\n-this License, you may choose any version ever published by the Free Software\n-Foundation.\n-\n-  10. If you wish to incorporate parts of the Program into other free\n-programs whose distribution conditions are different, write to the author\n-to ask for permission.  For software which is copyrighted by the Free\n-Software Foundation, write to the Free Software Foundation; we sometimes\n-make exceptions for this.  Our decision will be guided by the two goals\n-of preserving the free status of all derivatives of our free software and\n-of promoting the sharing and reuse of software generally.\n-\n-\t\t\t    NO WARRANTY\n-\n-  11. BECAUSE THE PROGRAM IS LICENSED FREE OF CHARGE, THERE IS NO WARRANTY\n-FOR THE PROGRAM, TO THE EXTENT PERMITTED BY APPLICABLE LAW.  EXCEPT WHEN\n-OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR OTHER PARTIES\n-PROVIDE THE PROGRAM \"AS IS\" WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESSED\n-OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF\n-MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  THE ENTIRE RISK AS\n-TO THE QUALITY AND PERFORMANCE OF THE PROGRAM IS WITH YOU.  SHOULD THE\n-PROGRAM PROVE DEFECTIVE, YOU ASSUME THE COST OF ALL NECESSARY SERVICING,\n-REPAIR OR CORRECTION.\n-\n-  12. IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN WRITING\n-WILL ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MAY MODIFY AND/OR\n-REDISTRIBUTE THE PROGRAM AS PERMITTED ABOVE, BE LIABLE TO YOU FOR DAMAGES,\n-INCLUDING ANY GENERAL, SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES ARISING\n-OUT OF THE USE OR INABILITY TO USE THE PROGRAM (INCLUDING BUT NOT LIMITED\n-TO LOSS OF DATA OR DATA BEING RENDERED INACCURATE OR LOSSES SUSTAINED BY\n-YOU OR THIRD PARTIES OR A FAILURE OF THE PROGRAM TO OPERATE WITH ANY OTHER\n-PROGRAMS), EVEN IF SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE\n-POSSIBILITY OF SUCH DAMAGES.\n-\n-\t\t     END OF TERMS AND CONDITIONS\n-             \n", "diff --git a/interface/main/calendar/modules/PostCalendar/index.php b/interface/main/calendar/modules/PostCalendar/index.php\ndeleted file mode 100644\nindex 5a56710af..000000000\n--- a/interface/main/calendar/modules/PostCalendar/index.php\n+++ /dev/null\n@@ -1,38 +0,0 @@\n-<?php\n-/**\n- *  $Id$\n- *\n- *  PostCalendar::PostNuke Events Calendar Module\n- *  Copyright (C) 2002  The PostCalendar Team\n- *  http://postcalendar.tv\n- *\n- *  This program is free software; you can redistribute it and/or modify\n- *  it under the terms of the GNU General Public License as published by\n- *  the Free Software Foundation; either version 2 of the License, or\n- *  (at your option) any later version.\n- *\n- *  This program is distributed in the hope that it will be useful,\n- *  but WITHOUT ANY WARRANTY; without even the implied warranty of\n- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n- *  GNU General Public License for more details.\n- *\n- *  You should have received a copy of the GNU General Public License\n- *  along with this program; if not, write to the Free Software\n- *  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n- *\n- *  To read the license please read the docs/license.txt or visit\n- *  http://www.gnu.org/copyleft/gpl.html\n- *\n- */\n-\n-/*******************************************************\n-    This file is for the old module load routine\n-    You can now link the module in a menu using the\n-    module name enclosed with brackets\n-    (ex: [PostCalendar])\n- *******************************************************/\n-if (!defined(\"LOADED_AS_MODULE\")) {\n-    echo 'You may not access this module directly';\n-} else {\n-    pnRedirect(pnModURL(pnVarCleanFromInput('name'), 'user', 'main'));\n-}\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pcSmarty.class.php b/interface/main/calendar/modules/PostCalendar/pcSmarty.class.php\nindex 144c5b94a..e0cd12d5d 100644\n--- a/interface/main/calendar/modules/PostCalendar/pcSmarty.class.php\n+++ b/interface/main/calendar/modules/PostCalendar/pcSmarty.class.php\n@@ -28,9 +28,6 @@ class pcSmarty extends Smarty\n {\n     function __construct()\n     {\n-        $theme = pnUserGetTheme();\n-        $osTheme = pnVarPrepForOS($theme);\n-        pnThemeLoad($theme);\n         global $bgcolor1,$bgcolor2,$bgcolor3,$bgcolor4,$bgcolor5,$bgcolor6,$textcolor1,$textcolor2;\n \n         // call constructor\n@@ -74,7 +71,7 @@ class pcSmarty extends Smarty\n \n         $this->autoload_filters = array('output' => array('trimwhitespace'));\n \n-        $lang = pnUserGetLang();\n+        $lang = 'eng';\n         $func = pnVarCleanFromInput('func');\n         $print = pnVarCleanFromInput('print');\n         // assign theme globals\n@@ -98,15 +95,6 @@ class pcSmarty extends Smarty\n         $this->assign('24HOUR_TIME', _SETTING_TIME_24HOUR);\n         $this->assign_by_ref('MODULE_NAME', $pcDisplayName);\n         $this->assign_by_ref('MODULE_DIR', $pcDir);\n-        $this->assign('ACCESS_NONE', PC_ACCESS_NONE);\n-        $this->assign('ACCESS_OVERVIEW', PC_ACCESS_OVERVIEW);\n-        $this->assign('ACCESS_READ', PC_ACCESS_READ);\n-        $this->assign('ACCESS_COMMENT', PC_ACCESS_COMMENT);\n-        $this->assign('ACCESS_MODERATE', PC_ACCESS_MODERATE);\n-        $this->assign('ACCESS_EDIT', PC_ACCESS_EDIT);\n-        $this->assign('ACCESS_ADD', PC_ACCESS_ADD);\n-        $this->assign('ACCESS_DELETE', PC_ACCESS_DELETE);\n-        $this->assign('ACCESS_ADMIN', PC_ACCESS_ADMIN);\n         //=================================================================\n         //  Find out what Template we're using\n         //=================================================================\n@@ -129,6 +117,5 @@ class pcSmarty extends Smarty\n         $this->assign('TPL_IMAGE_PATH', $GLOBALS['rootdir'].\"/main/calendar/modules/$pcDir/pntemplates/$template_name/images\");\n         $this->assign('TPL_ROOTDIR', $GLOBALS['rootdir']);\n         $this->assign('TPL_STYLE_PATH', \"modules/$pcDir/pntemplates/$template_name/style\");\n-        $this->assign('THEME_PATH', \"themes/$osTheme\");\n     }\n }\n", "diff --git a/interface/main/calendar/modules/PostCalendar/plugins/function.pc_sort_day.php b/interface/main/calendar/modules/PostCalendar/plugins/function.pc_sort_day.php\ndeleted file mode 100644\nindex 4a8b3b199..000000000\n--- a/interface/main/calendar/modules/PostCalendar/plugins/function.pc_sort_day.php\n+++ /dev/null\n@@ -1,129 +0,0 @@\n-<?php\n-/**\n- *  $Id$\n- *\n- *  PostCalendar::PostNuke Events Calendar Module\n- *  Copyright (C) 2002  The PostCalendar Team\n- *  http://postcalendar.tv\n- *\n- *  This program is free software; you can redistribute it and/or modify\n- *  it under the terms of the GNU General Public License as published by\n- *  the Free Software Foundation; either version 2 of the License, or\n- *  (at your option) any later version.\n- *\n- *  This program is distributed in the hope that it will be useful,\n- *  but WITHOUT ANY WARRANTY; without even the implied warranty of\n- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n- *  GNU General Public License for more details.\n- *\n- *  You should have received a copy of the GNU General Public License\n- *  along with this program; if not, write to the Free Software\n- *  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n- *\n- *  To read the license please read the docs/license.txt or visit\n- *  http://www.gnu.org/copyleft/gpl.html\n- *\n- */\n-function smarty_function_pc_sort_day($params, &$smarty)\n-{\n-    extract($params);\n-\n-    if (empty($var)) {\n-        $smarty->trigger_error(\"sort_array: missing 'var' parameter\");\n-        return;\n-    }\n-\n-    if (!in_array('value', array_keys($params))) {\n-        $smarty->trigger_error(\"sort_array: missing 'value' parameter\");\n-        return;\n-    }\n-    \n-    if (!in_array('order', array_keys($params))) {\n-        $order = 'asc';\n-    }\n-    \n-    if (!in_array('inc', array_keys($params))) {\n-        $inc = '15';\n-    }\n-    \n-    if (!in_array('start', array_keys($params))) {\n-        $sh = '08';\n-        $sm = '00';\n-    } else {\n-        list($sh,$sm) = explode(':', $start);\n-    }\n-    \n-    if (!in_array('end', array_keys($params))) {\n-        $eh = '21';\n-        $em = '00';\n-    } else {\n-        list($eh,$em) = explode(':', $end);\n-    }\n-    \n-    if (strtolower($order) == 'asc') {\n-        $function = 'sort_byTimeA';\n-    }\n-\n-    if (strtolower($order) == 'desc') {\n-        $function = 'sort_byTimeD';\n-    }\n-    \n-    foreach ($value as $events) {\n-        usort($events, $function);\n-        $newArray = $events;\n-    }\n-    \n-    // here we want to create an intelligent array of\n-    // columns and rows to build a nice day view\n-    $ch = $sh;\n-    $cm = $sm;\n-    while (\"$ch:$cm\" <= \"$eh:$em\") {\n-        $hours[\"$ch:$cm\"] = array();\n-        $cm += $inc;\n-        if ($cm >= 60) {\n-            $cm = '00';\n-            $ch = sprintf('%02d', $ch+1);\n-        }\n-    }\n-    \n-    $alldayevents = array();\n-    foreach ($newArray as $event) {\n-        list($sh,$sm,$ss) = explode(':', $event['startTime']);\n-        $eh = sprintf('%02d', $sh + $event['duration_hours']);\n-        $em = sprintf('%02d', $sm + $event['duration_minutes']);\n-        \n-        if ($event['alldayevent']) {\n-            // we need an entire column . save till later\n-            $alldayevents[] = $event;\n-        } else {\n-            //find open time slots - avoid overlapping\n-            $needed = array();\n-            $ch = $sh;\n-            $cm = $sm;\n-            //what times do we need?\n-            while (\"$ch:$cm\" < \"$eh:$em\") {\n-                $needed[] = \"$ch:$cm\";\n-                $cm += $inc;\n-                if ($cm >= 60) {\n-                    $cm = '00';\n-                    $ch = sprintf('%02d', $ch+1);\n-                }\n-            }\n-\n-            $i = 0;\n-            foreach ($needed as $time) {\n-                if ($i==0) {\n-                    $hours[$time][] = $event;\n-                    $key = count($hours[$time])-1;\n-                } else {\n-                    $hours[$time][$key] = 'continued';\n-                }\n-\n-                $i++;\n-            }\n-        }\n-    }\n-\n-    //pcDebugVar($hours);\n-    $smarty->assign_by_ref($var, $hours);\n-}\n", "diff --git a/interface/main/calendar/modules/PostCalendar/plugins/function.pc_week_range.php b/interface/main/calendar/modules/PostCalendar/plugins/function.pc_week_range.php\ndeleted file mode 100644\nindex 327cf7c2e..000000000\n--- a/interface/main/calendar/modules/PostCalendar/plugins/function.pc_week_range.php\n+++ /dev/null\n@@ -1,87 +0,0 @@\n-<?php\n-/**\n- *  $Id$\n- *\n- *  PostCalendar::PostNuke Events Calendar Module\n- *  Copyright (C) 2002  The PostCalendar Team\n- *  http://postcalendar.tv\n- *\n- *  This program is free software; you can redistribute it and/or modify\n- *  it under the terms of the GNU General Public License as published by\n- *  the Free Software Foundation; either version 2 of the License, or\n- *  (at your option) any later version.\n- *\n- *  This program is distributed in the hope that it will be useful,\n- *  but WITHOUT ANY WARRANTY; without even the implied warranty of\n- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n- *  GNU General Public License for more details.\n- *\n- *  You should have received a copy of the GNU General Public License\n- *  along with this program; if not, write to the Free Software\n- *  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n- *\n- *  To read the license please read the docs/license.txt or visit\n- *  http://www.gnu.org/copyleft/gpl.html\n- *\n- */\n-function smarty_function_pc_week_range($args)\n-{\n-    // $args['date'] date to use for range building\n-    // $args['sep'] seperate the dates by this string\n-    // $args['format'] format all dates like this\n-    // $args['format1'] format date 1 like this\n-    // $args['format2'] format date 1 like this\n-    setlocale(LC_TIME, _PC_LOCALE);\n-    if (!isset($args['date'])) {\n-        $args['date'] = postcalendar_getDate();\n-    }\n-    \n-    $y = substr($args['date'], 0, 4);\n-    $m = substr($args['date'], 4, 2);\n-    $d = substr($args['date'], 6, 2);\n-    \n-    if (!isset($args['sep'])) {\n-        $args['sep'] = ' - ';\n-    }\n-\n-    if (!isset($args['format'])) {\n-        if (!isset($args['format1'])) {\n-            $args['format1'] = _SETTING_DATE_FORMAT;\n-        }\n-\n-        if (!isset($args['format2'])) {\n-            $args['format2'] = _SETTING_DATE_FORMAT;\n-        }\n-    } else {\n-        $args['format1'] = $args['format'];\n-        $args['format2'] = $args['format'];\n-    }\n-    \n-    // get the week date range for the supplied $date\n-    $dow = date('w', mktime(0, 0, 0, $m, $d, $y));\n-    if (_SETTING_FIRST_DAY_WEEK == 0) {\n-        $firstDay   = strftime($args['format1'], mktime(0, 0, 0, $m, ($d-$dow), $y));\n-        $lastDay    = strftime($args['format2'], mktime(0, 0, 0, $m, ($d+(6-$dow)), $y));\n-    } elseif (_SETTING_FIRST_DAY_WEEK == 1) {\n-        if ($dow == 0) {\n-            $sub = 6;\n-        } else {\n-            $sub = $dow-1;\n-        }\n-\n-        $firstDay   = strftime($args['format1'], mktime(0, 0, 0, $m, ($d-$sub), $y));\n-        $lastDay    = strftime($args['format2'], mktime(0, 0, 0, $m, ($d+(6-$sub)), $y));\n-    } elseif (_SETTING_FIRST_DAY_WEEK == 6) {\n-        if ($dow == 6) {\n-            $sub = 0;\n-        } else {\n-            $sub = $dow+1;\n-        }\n-\n-        $firstDay   = strftime($args['format1'], mktime(0, 0, 0, $m, ($d-$sub), $y));\n-        $lastDay    = strftime($args['format2'], mktime(0, 0, 0, $m, ($d+(6-$sub)), $y));\n-    }\n-\n-    // return the formated range\n-    echo $firstDay.$args['sep'].$lastDay;\n-}\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pnadmin.php b/interface/main/calendar/modules/PostCalendar/pnadmin.php\nindex 2db6c163b..9f2d84f57 100644\n--- a/interface/main/calendar/modules/PostCalendar/pnadmin.php\n+++ b/interface/main/calendar/modules/PostCalendar/pnadmin.php\n@@ -30,710 +30,19 @@\n //=========================================================================\n pnModAPILoad(__POSTCALENDAR__, 'admin');\n \n-/**\n- * the main administration function\n- * This function is the default function, and is called whenever the\n- * module is initiated without defining arguments.  As such it can\n- * be used for a number of things, but most commonly it either just\n- * shows the module menu and returns or calls whatever the module\n- * designer feels should be the default function (often this is the\n- * view() function)\n- */\n-function postcalendar_admin_main()\n-{\n-    if (!PC_ACCESS_ADMIN) {\n-        return _POSTCALENDAR_NOAUTH; }\n-    return postcalendar_admin_modifyconfig();\n-}\n-function postcalendar_admin_listapproved()\n-{\n-    return postcalendar_admin_showlist('', _EVENT_APPROVED, 'listapproved', _PC_APPROVED_ADMIN); }\n-function postcalendar_admin_listhidden()\n-{\n-    return postcalendar_admin_showlist('', _EVENT_HIDDEN, 'listhidden', _PC_HIDDEN_ADMIN); }\n-function postcalendar_admin_listqueued()\n-{\n-    return postcalendar_admin_showlist('', _EVENT_QUEUED, 'listqueued', _PC_QUEUED_ADMIN); }\n-function postcalendar_admin_showlist($e = '', $type, $function, $title, $msg = '')\n-{\n-    if (!PC_ACCESS_ADMIN) {\n-        return _POSTCALENDAR_NOAUTH; }\n-    $header = <<<EOF\n-\t<html>\n-\t<head></head>\n-\t<body bgcolor=\n-EOF;\n-    $header .= '\"' . $GLOBALS['style']['BGCOLOR2'] . '\">';\n-    $output .= $header;\n-    $output .= postcalendar_adminmenu();\n-\n-    if (!empty($e)) {\n-        $output .= '<div style=\"padding:5px; border:1px solid red; background-color: pink;\">';\n-        $output .= '<center><b>'.$e.'</b></center>';\n-        $output .= '</div><br />';\n-    }\n-\n-    if (!empty($msg)) {\n-        $output .= '<div style=\"padding:5px; border:1px solid green; background-color: lightgreen;\">';\n-        $output .= '<center><b>'.$msg.'</b></center>';\n-        $output .= '</div><br />';\n-    }\n-\n-    $offset_increment = _SETTING_HOW_MANY_EVENTS;\n-    if (empty($offset_increment)) {\n-        $offset_increment = 15;\n-    }\n-\n-    pnThemeLoad(pnUserGetTheme());\n-    // get the theme globals :: is there a better way to do this?\n-    global $bgcolor1, $bgcolor2, $bgcolor3, $bgcolor4, $bgcolor5;\n-    global $textcolor1, $textcolor2;\n-\n-    $offset = pnVarCleanFromInput('offset');\n-    $sort = pnVarCleanFromInput('sort');\n-    $sdir = pnVarCleanFromInput('sdir');\n-    if (!isset($sort)) {\n-        $sort = 'time';\n-    }\n-    if (!isset($sdir)) {\n-        $sdir = 1;\n-    }\n-    if (!isset($offset)) {\n-        $offset = 0;\n-    }\n-\n-    $result = pnModAPIFunc(\n-        __POSTCALENDAR__,\n-        'admin',\n-        'getAdminListEvents',\n-        array('type'=>$type,\n-                                 'sdir'=>$sdir,\n-                                 'sort'=>$sort,\n-                                 'offset'=>$offset,\n-        'offset_increment'=>$offset_increment)\n-    );\n-\n-    $output .= pnModAPIFunc(\n-        __POSTCALENDAR__,\n-        'admin',\n-        'buildAdminList',\n-        array('type'=>$type,\n-                                    'title'=>$title,\n-                                    'sdir'=>$sdir,\n-                                    'sort'=>$sort,\n-                                    'offset'=>$offset,\n-                                    'offset_increment'=>$offset_increment,\n-                                    'function'=>$function,\n-        'result'=>$result)\n-    );\n-\n-    $output .= \"</body></html>\";\n-    return $output;\n-}\n-\n-function postcalendar_admin_adminevents()\n-{\n-    if (!PC_ACCESS_ADMIN) {\n-        return _POSTCALENDAR_NOAUTH; }\n-\n-    $output = '';\n-    list($action,$pc_event_id,$thelist) = pnVarCleanFromInput('action', 'pc_event_id', 'thelist');\n-\n-    if (!isset($pc_event_id)) {\n-        $e  = _PC_NO_EVENT_SELECTED;\n-\n-        switch ($thelist) {\n-            case 'listqueued':\n-                $output .= postcalendar_admin_showlist($e, _EVENT_QUEUED, 'showlist');\n-                break;\n-\n-            case 'listhidden':\n-                $output .= postcalendar_admin_showlist($e, _EVENT_HIDDEN, 'showlist');\n-                break;\n-\n-            case 'listapproved':\n-                $output .= postcalendar_admin_showlist($e, _EVENT_APPROVED, 'showlist');\n-                break;\n-        }\n-        return $output;\n-    }\n-\n-    // main menu\n-    $output = postcalendar_adminmenu();\n-    $function = '';\n-    switch ($action) {\n-        case _ADMIN_ACTION_APPROVE:\n-            $function = 'approveevents';\n-            $are_you_sure_text = _PC_APPROVE_ARE_YOU_SURE;\n-            break;\n-\n-        case _ADMIN_ACTION_HIDE:\n-            $function = 'hideevents';\n-            $are_you_sure_text = _PC_HIDE_ARE_YOU_SURE;\n-            break;\n-\n-        case _ADMIN_ACTION_DELETE:\n-            $function = 'deleteevents';\n-            $are_you_sure_text = _PC_DELETE_ARE_YOU_SURE;\n-            break;\n-    }\n-\n-    if (!empty($function)) {\n-        $output .= '<form action=\"'.pnModUrl(__POSTCALENDAR__, 'admin', $function).'\" method=\"post\">';\n-        $output .= $are_you_sure_text.' ';\n-        $output .= '<input type=\"submit\" name=\"submit\" value=\"'._PC_ADMIN_YES.'\" />';\n-        $output .= '<br /><br />';\n-    }\n-    if (is_array($pc_event_id)) {\n-        foreach ($pc_event_id as $eid) {\n-            $output .= pnModAPIFunc(__POSTCALENDAR__, 'admin', 'eventDetail', array('eid'=>$eid,'nopop'=>true));\n-            $output .= '<br /><br />';\n-            $output .= '<input type=\"hidden\" name=\"pc_eid[]\" value=\"'.$eid.'\" />';\n-        }\n-    } else {\n-        $output .= pnModAPIFunc(__POSTCALENDAR__, 'admin', 'eventDetail', array('eid'=>$pc_event_id,'nopop'=>true));\n-        $output .= '<br /><br />';\n-        $output .= '<input type=\"hidden\" name=\"pc_eid[]\" value=\"'.$pc_event_id.'\" />';\n-    }\n-    if (!empty($function)) {\n-        $output .= $are_you_sure_text.' ';\n-        $output .= '<input type=\"submit\" name=\"submit\" value=\"'._PC_ADMIN_YES.'\" />';\n-        $output .= '</form>';\n-    }\n-\n-    return $output;\n-}\n-\n-function postcalendar_admin_approveevents()\n-{\n-    if (!PC_ACCESS_ADMIN) {\n-        return _POSTCALENDAR_NOAUTH; }\n-\n-    $pc_eid = pnVarCleanFromInput('pc_eid');\n-    $approve_list = '';\n-    foreach ($pc_eid as $eid) {\n-        if (!empty($approve_list)) {\n-            $approve_list .= ','; }\n-        $approve_list .= $eid;\n-    }\n-\n-    list($dbconn) = pnDBGetConn();\n-    $pntable = pnDBGetTables();\n-    $events_table = $pntable['postcalendar_events'];\n-    $events_column = &$pntable['postcalendar_events_column'];\n-\n-    $sql = \"UPDATE $events_table\n-            SET $events_column[eventstatus] = \"._EVENT_APPROVED.\"\n-            WHERE $events_column[eid] IN ($approve_list)\";\n-\n-    $dbconn->Execute($sql);\n-    if ($dbconn->ErrorNo() != 0) {\n-        $msg = _PC_ADMIN_EVENT_ERROR;\n-    } else {\n-        $msg = _PC_ADMIN_EVENTS_APPROVED;\n-    }\n-\n-    // clear the template cache\n-    $tpl = new pcSmarty();\n-    $tpl->clear_all_cache();\n-    return postcalendar_admin_showlist('', _EVENT_APPROVED, 'listapproved', _PC_APPROVED_ADMIN, $msg);\n-}\n-\n-function postcalendar_admin_hideevents()\n-{\n-    if (!PC_ACCESS_ADMIN) {\n-        return _POSTCALENDAR_NOAUTH; }\n-\n-    $pc_eid = pnVarCleanFromInput('pc_eid');\n-    $output = postcalendar_adminmenu();\n-    $event_list = '';\n-    foreach ($pc_eid as $eid) {\n-        if (!empty($event_list)) {\n-            $event_list .= ','; }\n-        $event_list .= $eid;\n-    }\n-\n-    list($dbconn) = pnDBGetConn();\n-    $pntable = pnDBGetTables();\n-    $events_table = $pntable['postcalendar_events'];\n-    $events_column = &$pntable['postcalendar_events_column'];\n-\n-    $sql = \"UPDATE $events_table\n-            SET $events_column[eventstatus] = \"._EVENT_HIDDEN.\"\n-            WHERE $events_column[eid] IN ($event_list)\";\n-\n-    $dbconn->Execute($sql);\n-    if ($dbconn->ErrorNo() != 0) {\n-        $msg = _PC_ADMIN_EVENT_ERROR;\n-    } else {\n-        $msg = _PC_ADMIN_EVENTS_HIDDEN;\n-    }\n-\n-    // clear the template cache\n-    $tpl = new pcSmarty();\n-    $tpl->clear_all_cache();\n-    return postcalendar_admin_showlist('', _EVENT_APPROVED, 'listapproved', _PC_APPROVED_ADMIN, $msg);\n-}\n-\n-function postcalendar_admin_deleteevents()\n-{\n-    if (!PC_ACCESS_ADMIN) {\n-        return _POSTCALENDAR_NOAUTH; }\n-\n-    $pc_eid = pnVarCleanFromInput('pc_eid');\n-    $output = postcalendar_adminmenu();\n-    $event_list = '';\n-    foreach ($pc_eid as $eid) {\n-        if (!empty($event_list)) {\n-            $event_list .= ','; }\n-        $event_list .= $eid;\n-    }\n-\n-    list($dbconn) = pnDBGetConn();\n-    $pntable = pnDBGetTables();\n-    $events_table = $pntable['postcalendar_events'];\n-    $events_column = &$pntable['postcalendar_events_column'];\n-\n-    $sql = \"DELETE FROM $events_table WHERE $events_column[eid] IN ($event_list)\";\n-\n-    $dbconn->Execute($sql);\n-    if ($dbconn->ErrorNo() != 0) {\n-        $msg = _PC_ADMIN_EVENT_ERROR;\n-    } else {\n-        $msg = _PC_ADMIN_EVENTS_DELETED;\n-    }\n-\n-    // clear the t\n-    $tpl = new pcSmarty();\n-    $tpl->clear_all_cache();\n-    return postcalendar_admin_showlist('', _EVENT_APPROVED, 'listapproved', _PC_APPROVED_ADMIN, $msg);\n-}\n-\n-function postcalendar_admin_edit($args)\n-{\n-    return postcalendar_admin_submit($args); }\n-function postcalendar_admin_submit($args)\n-{\n-    if (!PC_ACCESS_ADMIN) {\n-        return _POSTCALENDAR_NOAUTH; }\n-\n-    pnModAPILoad(__POSTCALENDAR__, 'user');\n-    $output = postcalendar_adminmenu();\n-\n-    // get the theme globals :: is there a better way to do this?\n-    pnThemeLoad(pnUserGetTheme());\n-    global $bgcolor1, $bgcolor2, $bgcolor3, $bgcolor4, $bgcolor5, $textcolor1, $textcolor2;\n-\n-    extract($args);\n-\n-    $Date = postcalendar_getDate();\n-    $year   = substr($Date, 0, 4);\n-    $month  = substr($Date, 4, 2);\n-    $day    = substr($Date, 6, 2);\n-\n-    // basic event information\n-    $event_subject      = pnVarCleanFromInput('event_subject');\n-    $event_desc         = pnVarCleanFromInput('event_desc');\n-    $event_sharing      = pnVarCleanFromInput('event_sharing');\n-    $event_category     = pnVarCleanFromInput('event_category');\n-    $event_topic        = pnVarCleanFromInput('event_topic');\n-\n-    // event start information\n-    $event_startmonth   = pnVarCleanFromInput('event_startmonth');\n-    $event_startday     = pnVarCleanFromInput('event_startday');\n-    $event_startyear    = pnVarCleanFromInput('event_startyear');\n-    $event_starttimeh   = pnVarCleanFromInput('event_starttimeh');\n-    $event_starttimem   = pnVarCleanFromInput('event_starttimem');\n-    $event_startampm    = pnVarCleanFromInput('event_startampm');\n-\n-    // event end information\n-    $event_endmonth     = pnVarCleanFromInput('event_endmonth');\n-    $event_endday       = pnVarCleanFromInput('event_endday');\n-    $event_endyear      = pnVarCleanFromInput('event_endyear');\n-    $event_endtype      = pnVarCleanFromInput('event_endtype');\n-    $event_dur_hours    = pnVarCleanFromInput('event_dur_hours');\n-    $event_dur_minutes  = pnVarCleanFromInput('event_dur_minutes');\n-    $event_duration     = (60*60*$event_dur_hours) + (60*$event_dur_minutes);\n-    $event_allday       = pnVarCleanFromInput('event_allday');\n-\n-    // location data\n-    $event_location     = pnVarCleanFromInput('event_location');\n-    $event_street1      = pnVarCleanFromInput('event_street1');\n-    $event_street2      = pnVarCleanFromInput('event_street2');\n-    $event_city         = pnVarCleanFromInput('event_city');\n-    $event_state        = pnVarCleanFromInput('event_state');\n-    $event_postal       = pnVarCleanFromInput('event_postal');\n-    $event_location_info = serialize(compact(\n-        'event_location',\n-        'event_street1',\n-        'event_street2',\n-        'event_city',\n-        'event_state',\n-        'event_postal'\n-    ));\n-    // contact data\n-    $event_contname     = pnVarCleanFromInput('event_contname');\n-    $event_conttel      = pnVarCleanFromInput('event_conttel');\n-    $event_contemail    = pnVarCleanFromInput('event_contemail');\n-    $event_website      = pnVarCleanFromInput('event_website');\n-    $event_fee          = pnVarCleanFromInput('event_fee');\n-\n-    // event repeating data\n-    $event_repeat       = pnVarCleanFromInput('event_repeat');\n-    $event_repeat_freq  = pnVarCleanFromInput('event_repeat_freq');\n-    $event_repeat_freq_type = pnVarCleanFromInput('event_repeat_freq_type');\n-    $event_repeat_on_num = pnVarCleanFromInput('event_repeat_on_num');\n-    $event_repeat_on_day = pnVarCleanFromInput('event_repeat_on_day');\n-    $event_repeat_on_freq = pnVarCleanFromInput('event_repeat_on_freq');\n-    $event_recurrspec = serialize(compact(\n-        'event_repeat_freq',\n-        'event_repeat_freq_type',\n-        'event_repeat_on_num',\n-        'event_repeat_on_day',\n-        'event_repeat_on_freq'\n-    ));\n-\n-    $pc_html_or_text = pnVarCleanFromInput('pc_html_or_text');\n-    $form_action = pnVarCleanFromInput('form_action');\n-    $pc_event_id = pnVarCleanFromInput('pc_event_id');\n-    $data_loaded = pnVarCleanFromInput('data_loaded');\n-    $is_update   = pnVarCleanFromInput('is_update');\n-    $authid      = pnVarCleanFromInput('authid');\n-\n-    if (pnUserLoggedIn()) {\n-        $uname = pnUserGetVar('uname'); } else {\n-        $uname = pnConfigGetVar('anonymous'); }\n-        if (!isset($event_repeat)) {\n-            $event_repeat = 0; }\n-\n-    // lets wrap all the data into array for passing to submit and preview functions\n-        if (!isset($pc_event_id) || empty($pc_event_id) || $data_loaded) {\n-            $eventdata = compact(\n-                'event_subject',\n-                'event_desc',\n-                'event_sharing',\n-                'event_category',\n-                'event_topic',\n-                'event_startmonth',\n-                'event_startday',\n-                'event_startyear',\n-                'event_starttimeh',\n-                'event_starttimem',\n-                'event_startampm',\n-                'event_endmonth',\n-                'event_endday',\n-                'event_endyear',\n-                'event_endtype',\n-                'event_dur_hours',\n-                'event_dur_minutes',\n-                'event_duration',\n-                'event_allday',\n-                'event_location',\n-                'event_street1',\n-                'event_street2',\n-                'event_city',\n-                'event_state',\n-                'event_postal',\n-                'event_location_info',\n-                'event_contname',\n-                'event_conttel',\n-                'event_contemail',\n-                'event_website',\n-                'event_fee',\n-                'event_repeat',\n-                'event_repeat_freq',\n-                'event_repeat_freq_type',\n-                'event_repeat_on_num',\n-                'event_repeat_on_day',\n-                'event_repeat_on_freq',\n-                'event_recurrspec',\n-                'uname',\n-                'Date',\n-                'year',\n-                'month',\n-                'day',\n-                'pc_html_or_text'\n-            );\n-            $eventdata['is_update'] = $is_update;\n-            $eventdata['pc_event_id'] = $pc_event_id;\n-            $eventdata['data_loaded'] = true;\n-        } else {\n-            $event = postcalendar_userapi_pcGetEventDetails($pc_event_id);\n-            $eventdata['event_subject'] = $event['title'];\n-            $eventdata['event_desc'] = $event['hometext'];\n-            $eventdata['event_sharing'] = $event['sharing'];\n-            $eventdata['event_category'] = $event['catid'];\n-            $eventdata['event_topic'] = $event['topic'];\n-            $eventdata['event_startmonth'] = substr($event['eventDate'], 5, 2);\n-            $eventdata['event_startday'] = substr($event['eventDate'], 8, 2);\n-            $eventdata['event_startyear'] = substr($event['eventDate'], 0, 4);\n-            $eventdata['event_starttimeh'] = substr($event['startTime'], 0, 2);\n-            $eventdata['event_starttimem'] = substr($event['startTime'], 3, 2);\n-            $eventdata['event_startampm'] = $eventdata['event_starttimeh'] < 12 ? _PC_AM : _PC_PM ;\n-            $eventdata['event_endmonth'] = substr($event['endDate'], 5, 2);\n-            $eventdata['event_endday'] = substr($event['endDate'], 8, 2);\n-            $eventdata['event_endyear'] = substr($event['endDate'], 0, 4);\n-            $eventdata['event_endtype'] = $event['endDate'] == '0000-00-00' ? '0' : '1' ;\n-            $eventdata['event_dur_hours'] = $event['duration_hours'];\n-            $eventdata['event_dur_minutes'] = $event['duration_minutes'];\n-            $eventdata['event_duration'] = $event['duration'];\n-            $eventdata['event_allday'] = $event['alldayevent'];\n-            $loc_data = unserialize($event['location']);\n-            $eventdata['event_location'] = $loc_data['event_location'];\n-            $eventdata['event_street1'] = $loc_data['event_street1'];\n-            $eventdata['event_street2'] = $loc_data['event_street2'];\n-            $eventdata['event_city'] = $loc_data['event_city'];\n-            $eventdata['event_state'] = $loc_data['event_state'];\n-            $eventdata['event_postal'] = $loc_data['event_postal'];\n-            $eventdata['event_location_info'] = $loc_data;\n-            $eventdata['event_contname'] = $event['contname'];\n-            $eventdata['event_conttel'] = $event['conttel'];\n-            $eventdata['event_contemail'] = $event['contemail'];\n-            $eventdata['event_website'] = $event['website'];\n-            $eventdata['event_fee'] = $event['fee'];\n-            $eventdata['event_repeat'] = $event['recurrtype'];\n-            $eventdata['event_pid'] = $event['pid'];\n-            $eventdata['event_aid'] = $event['aid'];\n-            $rspecs = unserialize($event['recurrspec']);\n-            $eventdata['event_repeat_freq'] = $rspecs['event_repeat_freq'];\n-            $eventdata['event_repeat_freq_type'] = $rspecs['event_repeat_freq_type'];\n-            $eventdata['event_repeat_on_num'] = $rspecs['event_repeat_on_num'];\n-            $eventdata['event_repeat_on_day'] = $rspecs['event_repeat_on_day'];\n-            $eventdata['event_repeat_on_freq'] = $rspecs['event_repeat_on_freq'];\n-            $eventdata['event_recurrspec'] = $rspecs;\n-            $eventdata['uname'] = $uname;\n-            $eventdata['Date'] = $Date;\n-            $eventdata['year'] = $year;\n-            $eventdata['month'] = $month;\n-            $eventdata['day'] = $day;\n-            $eventdata['is_update'] = true;\n-            $eventdata['pc_event_id'] = $pc_event_id;\n-            $eventdata['data_loaded'] = true;\n-            $eventdata['pc_html_or_text'] = $pc_html_or_text;\n-        }\n-\n-    // lets get the module's information\n-        $modinfo = pnModGetInfo(pnModGetIDFromName(__POSTCALENDAR__));\n-        $categories = pnModAPIFunc(__POSTCALENDAR__, 'user', 'getCategories');\n-\n-    //================================================================\n-    //\tERROR CHECKING\n-    //================================================================\n-        $required_vars = array('event_subject','event_desc');\n-        $required_name = array(_PC_EVENT_TITLE,_PC_EVENT_DESC);\n-        $error_msg = '';\n-        $reqCount = count($required_vars);\n-        for ($r=0; $r<$reqCount; $r++) {\n-            if (empty($$required_vars[$r]) || !preg_match('/\\S/i', $$required_vars[$r])) {\n-                $error_msg .= '<b>' . $required_name[$r] . '</b> ' . _PC_SUBMIT_ERROR4 . '<br />';\n-            }\n-        }\n-        unset($reqCount);\n-    // check repeating frequencies\n-        if ($event_repeat == REPEAT) {\n-            if (!isset($event_repeat_freq) ||  $event_repeat_freq < 1 || empty($event_repeat_freq)) {\n-                $error_msg .= _PC_SUBMIT_ERROR5 . '<br />';\n-            } elseif (!is_numeric($event_repeat_freq)) {\n-                $error_msg .= _PC_SUBMIT_ERROR6 . '<br />';\n-            }\n-        } elseif ($event_repeat == REPEAT_ON) {\n-            if (!isset($event_repeat_on_freq) || $event_repeat_on_freq < 1 || empty($event_repeat_on_freq)) {\n-                $error_msg .= _PC_SUBMIT_ERROR5 . '<br />';\n-            } elseif (!is_numeric($event_repeat_on_freq)) {\n-                $error_msg .= _PC_SUBMIT_ERROR6 . '<br />';\n-            }\n-        }\n-    // check date validity\n-        if (_SETTING_TIME_24HOUR) {\n-            $startTime = $event_starttimeh.':'.$event_starttimem;\n-            $endTime =   $event_endtimeh.':'.$event_endtimem;\n-        } else {\n-            if ($event_startampm == _AM_VAL) {\n-                $event_starttimeh = $event_starttimeh == 12 ? '00' : $event_starttimeh;\n-            } else {\n-                $event_starttimeh =  $event_starttimeh != 12 ? $event_starttimeh+=12 : $event_starttimeh;\n-            }\n-            $startTime = $event_starttimeh.':'.$event_starttimem;\n-        }\n-        $sdate = strtotime($event_startyear.'-'.$event_startmonth.'-'.$event_startday);\n-        $edate = strtotime($event_endyear.'-'.$event_endmonth.'-'.$event_endday);\n-        $tdate = strtotime(date('Y-m-d'));\n-        if ($edate < $sdate && $event_endtype == 1) {\n-            $error_msg .= _PC_SUBMIT_ERROR1 . '<br />';\n-        }\n-        if (!checkdate($event_startmonth, $event_startday, $event_startyear)) {\n-            $error_msg .= _PC_SUBMIT_ERROR2 . '<br />';\n-        }\n-        if (!checkdate($event_endmonth, $event_endday, $event_endyear)) {\n-            $error_msg .= _PC_SUBMIT_ERROR3 . '<br />';\n-        }\n-\n-    //================================================================\n-    //\tPreview the event\n-    //================================================================\n-        if ($form_action == 'preview') {\n-            if (!empty($error_msg)) {\n-                $preview = false;\n-                $output .= '<table border=\"0\" width=\"100%\" cellpadding=\"1\" cellspacing=\"0\"><tr><td bgcolor=\"red\">';\n-                $output .= '<table border=\"0\" width=\"100%\" cellpadding=\"1\" cellspacing=\"0\"><tr><td bgcolor=\"pink\">';\n-                $output .= '<center><b>' . _PC_SUBMIT_ERROR . '</b></center>';\n-                $output .= '<br />';\n-                $output .= $error_msg;\n-                $output .= '</td></td></table>';\n-                $output .= '</td></td></table>';\n-                $output .= '<br /><br />';\n-            } else {\n-                $output .= pnModAPIFunc(__POSTCALENDAR__, 'user', 'eventPreview', $eventdata);\n-                $output .= '<br />';\n-            }\n-        }\n-\n-    //================================================================\n-    //\tEnter the event into the DB\n-    //================================================================\n-        if ($form_action == 'commit') {\n-            //if (!pnSecConfirmAuthKey()) { return(_NO_DIRECT_ACCESS); }\n-            if (!empty($error_msg)) {\n-                $preview = false;\n-                $output .= '<table border=\"0\" width=\"100%\" cellpadding=\"1\" cellspacing=\"0\"><tr><td bgcolor=\"red\">';\n-                $output .= '<table border=\"0\" width=\"100%\" cellpadding=\"1\" cellspacing=\"0\"><tr><td bgcolor=\"pink\">';\n-                $output .= '<center><b>'._PC_SUBMIT_ERROR.'</b></center>';\n-                $output .= '<br />';\n-                $output .= $error_msg;\n-                $output .= '</td></td></table>';\n-                $output .= '</td></td></table>';\n-                $output .= '<br /><br />';\n-            } else {\n-                if (!pnModAPIFunc(__POSTCALENDAR__, 'admin', 'submitEvent', $eventdata)) {\n-                    $output .= '<center><div style=\"padding:5px; border:1px solid red; background-color: pink;\">';\n-                    $output .= \"<b>\"._PC_EVENT_SUBMISSION_FAILED.\"</b>\";\n-                    $output .= '</div></center><br />';\n-                    $output .= '<br />';\n-                } else {\n-                    // clear the Smarty cache\n-                    $tpl = new pcSmarty();\n-                    $tpl->clear_all_cache();\n-                    $output .= '<center><div style=\"padding:5px; border:1px solid green; background-color: lightgreen;\">';\n-                    if ($is_update) {\n-                        $output .= \"<b>\"._PC_EVENT_EDIT_SUCCESS.\"</b>\";\n-                    } else {\n-                        $output .= \"<b>\"._PC_EVENT_SUBMISSION_SUCCESS.\"</b>\";\n-                    }\n-                    $output .= '</div></center><br />';\n-                    $output .= '<br />';\n-                    // clear the form vars\n-                    $event_subject=$event_desc=$event_sharing=$event_category=$event_topic=\n-                    $event_startmonth=$event_startday=$event_startyear=$event_starttimeh=$event_starttimem=$event_startampm=\n-                    $event_endmonth=$event_endday=$event_endyear=$event_endtype=$event_dur_hours=$event_dur_minutes=\n-                    $event_duration=$event_allday=$event_location=$event_street1=$event_street2=$event_city=$event_state=\n-                    $event_postal=$event_location_info=$event_contname=$event_conttel=$event_contemail=\n-                    $event_website=$event_fee=$event_repeat=$event_repeat_freq=$event_repeat_freq_type=\n-                    $event_repeat_on_num=$event_repeat_on_day=$event_repeat_on_freq=$event_recurrspec=$uname=\n-                    $Date=$year=$month=$day=$pc_html_or_text=null;\n-                    $is_update = false;\n-                    $pc_event_id = 0;\n-                    // lets wrap all the data into array for passing to submit and preview functions\n-                    $eventdata = compact(\n-                        'event_subject',\n-                        'event_desc',\n-                        'event_sharing',\n-                        'event_category',\n-                        'event_topic',\n-                        'event_startmonth',\n-                        'event_startday',\n-                        'event_startyear',\n-                        'event_starttimeh',\n-                        'event_starttimem',\n-                        'event_startampm',\n-                        'event_endmonth',\n-                        'event_endday',\n-                        'event_endyear',\n-                        'event_endtype',\n-                        'event_dur_hours',\n-                        'event_dur_minutes',\n-                        'event_duration',\n-                        'event_allday',\n-                        'event_location',\n-                        'event_street1',\n-                        'event_street2',\n-                        'event_city',\n-                        'event_state',\n-                        'event_postal',\n-                        'event_location_info',\n-                        'event_contname',\n-                        'event_conttel',\n-                        'event_contemail',\n-                        'event_website',\n-                        'event_fee',\n-                        'event_repeat',\n-                        'event_repeat_freq',\n-                        'event_repeat_freq_type',\n-                        'event_repeat_on_num',\n-                        'event_repeat_on_day',\n-                        'event_repeat_on_freq',\n-                        'event_recurrspec',\n-                        'uname',\n-                        'Date',\n-                        'year',\n-                        'month',\n-                        'day',\n-                        'pc_html_or_text',\n-                        'is_update',\n-                        'pc_event_id'\n-                    );\n-                }\n-            }\n-        }\n-\n-        $output .= pnModAPIFunc('PostCalendar', 'admin', 'buildSubmitForm', $eventdata);\n-        return $output;\n-}\n-\n function postcalendar_admin_modifyconfig($msg = '', $showMenu = true)\n {\n-    if (!PC_ACCESS_ADMIN) {\n-        return _POSTCALENDAR_NOAUTH; }\n-\n     $output = new pnHTML();\n-    $pcModInfo = pnModGetInfo(pnModGetIDFromName(__POSTCALENDAR__));\n-    $pcDir = pnVarPrepForOS($pcModInfo['directory']);\n-\n-    $defaultsURL  = pnModURL(__POSTCALENDAR__, 'admin', 'resetDefaults');\n-    $defaultsText = _EDIT_PC_CONFIG_DEFAULT;\n-\n-    $jsColorPicker = <<<EOF\n-    <script LANGUAGE=\"Javascript\" SRC=\"modules/$pcDir/pnincludes/AnchorPosition.js\"></SCRIPT>\n-    <script LANGUAGE=\"Javascript\" SRC=\"modules/$pcDir/pnincludes/PopupWindow.js\"></SCRIPT>\n-    <script LANGUAGE=\"Javascript\" SRC=\"modules/$pcDir/pnincludes/ColorPicker2.js\"></SCRIPT>\n-    <script LANGUAGE=\"JavaScript\">\n-    var cp = new ColorPicker('window');\n-    // Runs when a color is clicked\n-    function pickColor(color) {\n-\t    field.value = color;\n-\t}\n-\n-    var field;\n-    function pick(anchorname) {\n-\t    field = document.forms.pcConfig.pcDayHighlightColor;\n-\t    cp.show(anchorname);\n-\t}\n-    </SCRIPT>\n-EOF;\n \n     $output->SetInputMode(_PNH_VERBATIMINPUT);\n-    $header = <<<EOF\n-\t<html>\n-\t<head></head>\n \n-EOF;\n-    $header .= \"<title>\".xl(\"Calendar\").\"</title>\";\n+    $header = \"<html><head><title>\" . xlt(\"Calendar\") . \"</title></head>\";\n     $header .= <<<EOF\n \t\n \t<body bgcolor=\n EOF;\n-    $header .= '\"' . $GLOBALS['style']['BGCOLOR2'] . '\">';\n+    $header .= '\"' . attr($GLOBALS['style']['BGCOLOR2']) . '\">';\n     $output->Text($header);\n-    $output->Text($jsColorPicker);\n     if ($showMenu) {\n         $output->Text(postcalendar_adminmenu());\n     }\n@@ -744,399 +53,13 @@ EOF;\n         $output->Text('</div></center><br />');\n     }\n \n-    $formURL = pnModUrl(__POSTCALENDAR__, 'admin', 'updateconfig');\n-    /*$output->Text(\"<form action=\\\"$formURL\\\" method=\\\"post\\\" enctype=\\\"application/x-www-form-urlencoded\\\" name=\\\"pcConfig\\\" id=\\\"pcConfig\\\">\");\n-    $output->Text('<table border=\"1\" cellpadding=\"5\" cellspacing=\"1\">');\n-    $output->Text('<tr><td align=\"left\">'._PC_ADMIN_GLOBAL_SETTINGS,'</td>');\n-\t$output->Text(\"<td nowrap><a href=\\\"$defaultsURL\\\">$defaultsText</a></td></tr>\");\n-\n-    $settings = array();\n-    $output->SetOutputMode(_PNH_RETURNOUTPUT);\n-    $i=0;\n-\n-\t// global PostCalendar config options\n-    $settings[$i][] = $output->Text(_PC_NOTIFY_ADMIN);\n-    $settings[$i++][] = $output->FormCheckBox('pcNotifyAdmin', pnModGetVar(__POSTCALENDAR__,'pcNotifyAdmin'));\n-    $settings[$i][] = $output->Text(_PC_NOTIFY_EMAIL);\n-\t$settings[$i++][] = $output->FormText('pcNotifyEmail', pnModGetVar(__POSTCALENDAR__,'pcNotifyEmail'));\n-\n-\t$settings[$i][] = $output->Text(_PC_ALLOW_DIRECT_SUBMIT);\n-    $settings[$i++][] = $output->FormCheckBox('pcAllowDirectSubmit', pnModGetVar(__POSTCALENDAR__,'pcAllowDirectSubmit'));\n-    $settings[$i][] = $output->Text(_PC_ALLOW_USER_CALENDAR);\n-    $settings[$i++][] = $output->FormCheckBox('pcAllowUserCalendar', pnModGetVar(__POSTCALENDAR__,'pcAllowUserCalendar'));\n-\t$settings[$i][] = $output->Text(_PC_ALLOW_SITEWIDE_SUBMIT);\n-    $settings[$i++][] = $output->FormCheckBox('pcAllowSiteWide', pnModGetVar(__POSTCALENDAR__,'pcAllowSiteWide'));\n-    $settings[$i][] = $output->Text(_PC_LIST_HOW_MANY);\n-    $settings[$i++][] = $output->FormText('pcListHowManyEvents', pnModGetVar(__POSTCALENDAR__,'pcListHowManyEvents'),5);\n-    $settings[$i][] = $output->Text(_PC_TIME24HOURS);\n-    $settings[$i++][] = $output->FormCheckBox('pcTime24Hours', pnModGetVar(__POSTCALENDAR__,'pcTime24Hours'));\n-\t$settings[$i][] = $output->Text(_PC_TIME_INCREMENT);\n-    $settings[$i++][] = $output->FormText('pcTimeIncrement', pnModGetVar(__POSTCALENDAR__,'pcTimeIncrement'),5);\n-    $settings[$i][] = $output->Text(_PC_EVENTS_IN_NEW_WINDOW);\n-    $settings[$i++][] = $output->FormCheckBox('pcEventsOpenInNewWindow', pnModGetVar(__POSTCALENDAR__,'pcEventsOpenInNewWindow'));\n-    $settings[$i][] = $output->Text(_PC_INTERNATIONAL_DATES);\n-    $settings[$i++][] = $output->FormCheckBox('pcUseInternationalDates', pnModGetVar(__POSTCALENDAR__,'pcUseInternationalDates'));\n-    $settings[$i][] = $output->Text(_PC_EVENT_DATE_FORMAT);\n-    $settings[$i++][] = $output->FormText('pcEventDateFormat', pnModGetVar(__POSTCALENDAR__,'pcEventDateFormat'));\n-    $settings[$i][] = $output->Text(_PC_DISPLAY_TOPICS);\n-    //$settings[$i++][] = $output->FormCheckBox('pcDisplayTopics', pnModGetVar(__POSTCALENDAR__,'pcDisplayTopics'));\n-    $settings[$i][] = $output->Text(_PC_FIRST_DAY_OF_WEEK);\n-        $options = array();\n-        $selected = pnModGetVar(__POSTCALENDAR__,'pcFirstDayOfWeek');\n-        $options[0]['id']       = '0';\n-        $options[0]['selected'] = ($selected == 0);\n-        $options[0]['name']     = _PC_SUNDAY;\n-        $options[1]['id']       = '1';\n-        $options[1]['selected'] = ($selected == 1);\n-        $options[1]['name']     = _PC_MONDAY;\n-        $options[2]['id']       = '6';\n-        $options[2]['selected'] = ($selected == 6);\n-        $options[2]['name']     = _PC_SATURDAY;\n-\t$settings[$i++][] = $output->FormSelectMultiple('pcFirstDayOfWeek', $options);\n-\t$settings[$i][] = $output->Text(_PC_DEFAULT_VIEW);\n-        $options = array();\n-        $selected = pnModGetVar(__POSTCALENDAR__,'pcDefaultView');\n-        $options[0]['id']       = 'day';\n-        $options[0]['selected'] = ($selected == 'day');\n-        $options[0]['name']     = _CAL_DAYVIEW;\n-        $options[1]['id']       = 'week';\n-        $options[1]['selected'] = ($selected == 'week');\n-        $options[1]['name']     = _CAL_WEEKVIEW;\n-        $options[2]['id']       = 'month';\n-        $options[2]['selected'] = ($selected == 'month');\n-        $options[2]['name']     = _CAL_MONTHVIEW;\n-\t\t$options[3]['id']       = 'year';\n-        $options[3]['selected'] = ($selected == 'year');\n-        $options[3]['name']     = _CAL_YEARVIEW;\n-    $settings[$i++][] = $output->FormSelectMultiple('pcDefaultView', $options);\n-    $settings[$i][] = $output->Text(_PC_DAY_HIGHLIGHT_COLOR . ' [<a HREF=\"#\" onClick=\"pick(\\'pick\\');return false;\" NAME=\"pick\" ID=\"pick\">pick</a>]');\n-    $settings[$i++][] = $output->FormText('pcDayHighlightColor', pnModGetVar(__POSTCALENDAR__,'pcDayHighlightColor'));\n-    $settings[$i][] = $output->Text(_PC_USE_JS_POPUPS);\n-    $settings[$i++][] = $output->FormCheckBox('pcUsePopups', pnModGetVar(__POSTCALENDAR__,'pcUsePopups'));\n-\t$settings[$i][] = $output->Text(_PC_USE_CACHE);\n-    $settings[$i++][] = $output->FormCheckBox('pcUseCache', pnModGetVar(__POSTCALENDAR__,'pcUseCache'));\n-\t$settings[$i][] = $output->Text(_PC_CACHE_LIFETIME);\n-    $settings[$i++][] = $output->FormText('pcCacheLifetime', pnModGetVar(__POSTCALENDAR__,'pcCacheLifetime'));\n-\n-    $templatelist = array();\n-    $handle = opendir('modules/'.$pcDir.'/pntemplates');\n-\t$hide_list = array('.','..','CVS','compiled','cache');\n-\twhile($f=readdir($handle))\n-    {   if(!in_array($f,$hide_list) && !ereg(\"[.]\",$f)) {\n-            $templatelist[] = $f;\n-        }\n-    }\n-    closedir($handle); unset($hide_list);\n-    sort($templatelist);\n-    $tcount = count($templatelist);\n-    $settings[$i][] = $output->Text(_PC_DEFAULT_TEMPLATE);\n-        $options = array();\n-        $selected = pnModGetVar(__POSTCALENDAR__,'pcTemplate');\n-        for($t=0;$t<$tcount;$t++) {\n-            $options[$t]['id']       = $templatelist[$t];\n-            $options[$t]['selected'] = ($selected == $templatelist[$t]);\n-            $options[$t]['name']     = $templatelist[$t];\n-        }\n-    $settings[$i++][] = $output->FormSelectMultiple('pcTemplate', $options);\n-\n-\n-    $output->SetOutputMode(_PNH_KEEPOUTPUT);\n-\n-    // Add row\n-    for($i = 0 ; $i < count($settings) ; $i++) {\n-        $output->TableAddRow($settings[$i], 'left');\n-    }\n-\n-    $output->Text('</table>');\n-    $output->FormSubmit(_PC_ADMIN_SUBMIT);\n-    $output->FormEnd();*/\n     $output->Text(\"</body></html>\");\n \n     return $output->GetOutput();\n }\n \n-function postcalendar_admin_resetDefaults()\n-{\n-    if (!PC_ACCESS_ADMIN) {\n-        return _POSTCALENDAR_NOAUTH; }\n-\n-    // remove all the PostCalendar variables from the DB\n-    pnModDelVar(__POSTCALENDAR__, 'pcTime24Hours');\n-    pnModDelVar(__POSTCALENDAR__, 'pcEventsOpenInNewWindow');\n-    pnModDelVar(__POSTCALENDAR__, 'pcUseInternationalDates');\n-    pnModDelVar(__POSTCALENDAR__, 'pcFirstDayOfWeek');\n-    pnModDelVar(__POSTCALENDAR__, 'pcDayHighlightColor');\n-    pnModDelVar(__POSTCALENDAR__, 'pcUsePopups');\n-    pnModDelVar(__POSTCALENDAR__, 'pcDisplayTopics');\n-    pnModDelVar(__POSTCALENDAR__, 'pcAllowDirectSubmit');\n-    pnModDelVar(__POSTCALENDAR__, 'pcListHowManyEvents');\n-    pnModDelVar(__POSTCALENDAR__, 'pcTimeIncrement');\n-    pnModDelVar(__POSTCALENDAR__, 'pcAllowSiteWide');\n-    pnModDelVar(__POSTCALENDAR__, 'pcAllowUserCalendar');\n-    pnModDelVar(__POSTCALENDAR__, 'pcEventDateFormat');\n-    pnModDelVar(__POSTCALENDAR__, 'pcTemplate');\n-    pnModDelVar(__POSTCALENDAR__, 'pcUseCache');\n-    pnModDelVar(__POSTCALENDAR__, 'pcCacheLifetime');\n-    pnModDelVar(__POSTCALENDAR__, 'pcDefaultView');\n-    pnModDelVar(__POSTCALENDAR__, 'pcNotifyAdmin');\n-    pnModDelVar(__POSTCALENDAR__, 'pcNotifyEmail');\n-\n-    // PostCalendar Default Settings\n-    pnModSetVar(__POSTCALENDAR__, 'pcTime24Hours', '0');\n-    pnModSetVar(__POSTCALENDAR__, 'pcEventsOpenInNewWindow', '0');\n-    pnModSetVar(__POSTCALENDAR__, 'pcUseInternationalDates', '0');\n-    pnModSetVar(__POSTCALENDAR__, 'pcFirstDayOfWeek', '0');\n-    pnModSetVar(__POSTCALENDAR__, 'pcDayHighlightColor', '#EEEEEE');\n-    pnModSetVar(__POSTCALENDAR__, 'pcUsePopups', '1');\n-    pnModSetVar(__POSTCALENDAR__, 'pcDisplayTopics', '0');\n-    pnModSetVar(__POSTCALENDAR__, 'pcAllowDirectSubmit', '0');\n-    pnModSetVar(__POSTCALENDAR__, 'pcListHowManyEvents', '15');\n-    pnModSetVar(__POSTCALENDAR__, 'pcTimeIncrement', '15');\n-    pnModSetVar(__POSTCALENDAR__, 'pcAllowSiteWide', '0');\n-    pnModSetVar(__POSTCALENDAR__, 'pcAllowUserCalendar', '1');\n-    pnModSetVar(__POSTCALENDAR__, 'pcEventDateFormat', '%Y-%m-%d');\n-    pnModSetVar(__POSTCALENDAR__, 'pcTemplate', 'default');\n-    pnModSetVar(__POSTCALENDAR__, 'pcUseCache', '1');\n-    pnModSetVar(__POSTCALENDAR__, 'pcCacheLifetime', '3600');\n-    pnModSetVar(__POSTCALENDAR__, 'pcDefaultView', 'month');\n-    pnModSetVar(__POSTCALENDAR__, 'pcNotifyAdmin', '0');\n-    pnModSetVar(__POSTCALENDAR__, 'pcNotifyEmail', pnConfigGetVar('adminmail'));\n-\n-    $tpl = new pcSmarty();\n-    $tpl->clear_all_cache();\n-\n-    return postcalendar_admin_modifyconfig('<center>'._PC_UPDATED_DEFAULTS.'</center>');\n-}\n-\n-function postcalendar_admin_updateconfig()\n-{\n-    if (!PC_ACCESS_ADMIN) {\n-        return _POSTCALENDAR_NOAUTH; }\n-\n-    list($pcTime24Hours, $pcEventsOpenInNewWindow, $pcUseInternationalDates,\n-         $pcFirstDayOfWeek, $pcDayHighlightColor, $pcUsePopups,\n-         $pcAllowDirectSubmit, $pcListHowManyEvents, $pcDisplayTopics,\n-         $pcEventDateFormat, $pcTemplate, $pcAllowSiteWide,\n-         $pcAllowUserCalendar, $pcTimeIncrement,$pcUseCache, $pcCacheLifetime,\n-         $pcDefaultView, $pcNotifyAdmin, $pcNotifyEmail) = pnVarCleanFromInput(\n-             'pcTime24Hours',\n-             'pcEventsOpenInNewWindow',\n-             'pcUseInternationalDates',\n-             'pcFirstDayOfWeek',\n-             'pcDayHighlightColor',\n-             'pcUsePopups',\n-             'pcAllowDirectSubmit',\n-             'pcListHowManyEvents',\n-             'pcDisplayTopics',\n-             'pcEventDateFormat',\n-             'pcTemplate',\n-             'pcAllowSiteWide',\n-             'pcAllowUserCalendar',\n-             'pcTimeIncrement',\n-             'pcUseCache',\n-             'pcCacheLifetime',\n-             'pcDefaultView',\n-             'pcNotifyAdmin',\n-             'pcNotifyEmail'\n-         );\n-\n-    // make sure we enter something into the DB\n-    if (!isset($pcTime24Hours)) {\n-        $pcTime24Hours = '0'; }\n-    if (!isset($pcEventsOpenInNewWindow)) {\n-        $pcEventsOpenInNewWindow='0'; }\n-    if (!isset($pcUseInternationalDates)) {\n-        $pcUseInternationalDates='0'; }\n-    if (!isset($pcFirstDayOfWeek)) {\n-        $pcFirstDayOfWeek='0'; }\n-    if (!isset($pcUsePopups)) {\n-        $pcUsePopups='0'; }\n-    if (!isset($pcAllowDirectSubmit)) {\n-        $pcAllowDirectSubmit='0'; }\n-    if (!isset($pcDisplayTopics)) {\n-        $pcDisplayTopics='0'; }\n-    if (!isset($pcTemplate)) {\n-        $pcTemplate='default'; }\n-    if (!isset($pcAllowSiteWide)) {\n-        $pcAllowSiteWide='0'; }\n-    if (!isset($pcAllowUserCalendar)) {\n-        $pcAllowUserCalendar='0'; }\n-    if (!isset($pcUseCache)) {\n-        $pcUseCache='0'; }\n-    if (!isset($pcDefaultView)) {\n-        $pcDefaultView='month'; }\n-    if (empty($pcCacheLifetime)) {\n-        $pcCacheLifetime='3600'; }\n-    if (empty($pcDayHighlightColor)) {\n-        $pcDayHighlightColor='#EEEEEE'; }\n-    if (empty($pcListHowManyEvents)) {\n-        $pcListHowManyEvents='15'; }\n-    if (empty($pcEventDateFormat)) {\n-        $pcEventDateFormat='%Y-%m-%d'; }\n-    if (empty($pcTimeIncrement)) {\n-        $pcTimeIncrement='15'; }\n-    if (empty($pcNotifyAdmin)) {\n-        $pcNotifyAdmin='0'; }\n-    if (empty($pcNotifyEmail)) {\n-        $pcNotifyEmail=pnConfigGetVar('adminmail'); }\n-\n-    // delete the old vars - we're doing this because PostNuke variable\n-    // handling sometimes has old values in the $GLOBALS we need to clear\n-    pnModDelVar(__POSTCALENDAR__, 'pcTime24Hours');\n-    pnModDelVar(__POSTCALENDAR__, 'pcEventsOpenInNewWindow');\n-    pnModDelVar(__POSTCALENDAR__, 'pcUseInternationalDates');\n-    pnModDelVar(__POSTCALENDAR__, 'pcFirstDayOfWeek');\n-    pnModDelVar(__POSTCALENDAR__, 'pcDayHighlightColor');\n-    pnModDelVar(__POSTCALENDAR__, 'pcUsePopups');\n-    pnModDelVar(__POSTCALENDAR__, 'pcAllowDirectSubmit');\n-    pnModDelVar(__POSTCALENDAR__, 'pcListHowManyEvents');\n-    pnModDelVar(__POSTCALENDAR__, 'pcDisplayTopics');\n-    pnModDelVar(__POSTCALENDAR__, 'pcEventDateFormat');\n-    pnModDelVar(__POSTCALENDAR__, 'pcTemplate');\n-    pnModDelVar(__POSTCALENDAR__, 'pcAllowSiteWide');\n-    pnModDelVar(__POSTCALENDAR__, 'pcAllowUserCalendar');\n-    pnModDelVar(__POSTCALENDAR__, 'pcTimeIncrement');\n-    pnModDelVar(__POSTCALENDAR__, 'pcDefaultView');\n-    pnModDelVar(__POSTCALENDAR__, 'pcUseCache');\n-    pnModDelVar(__POSTCALENDAR__, 'pcCacheLifetime');\n-    pnModDelVar(__POSTCALENDAR__, 'pcNotifyAdmin');\n-    pnModDelVar(__POSTCALENDAR__, 'pcNotifyEmail');\n-\n-    // set the new variables\n-    pnModSetVar(__POSTCALENDAR__, 'pcTime24Hours', $pcTime24Hours);\n-    pnModSetVar(__POSTCALENDAR__, 'pcEventsOpenInNewWindow', $pcEventsOpenInNewWindow);\n-    pnModSetVar(__POSTCALENDAR__, 'pcUseInternationalDates', $pcUseInternationalDates);\n-    pnModSetVar(__POSTCALENDAR__, 'pcFirstDayOfWeek', $pcFirstDayOfWeek);\n-    pnModSetVar(__POSTCALENDAR__, 'pcDayHighlightColor', $pcDayHighlightColor);\n-    pnModSetVar(__POSTCALENDAR__, 'pcUsePopups', $pcUsePopups);\n-    pnModSetVar(__POSTCALENDAR__, 'pcAllowDirectSubmit', $pcAllowDirectSubmit);\n-    pnModSetVar(__POSTCALENDAR__, 'pcListHowManyEvents', $pcListHowManyEvents);\n-    pnModSetVar(__POSTCALENDAR__, 'pcDisplayTopics', $pcDisplayTopics);\n-    pnModSetVar(__POSTCALENDAR__, 'pcEventDateFormat', $pcEventDateFormat);\n-    pnModSetVar(__POSTCALENDAR__, 'pcTemplate', $pcTemplate);\n-    pnModSetVar(__POSTCALENDAR__, 'pcAllowSiteWide', $pcAllowSiteWide);\n-    pnModSetVar(__POSTCALENDAR__, 'pcAllowUserCalendar', $pcAllowUserCalendar);\n-    pnModSetVar(__POSTCALENDAR__, 'pcTimeIncrement', $pcTimeIncrement);\n-    pnModSetVar(__POSTCALENDAR__, 'pcDefaultView', $pcDefaultView);\n-    pnModSetVar(__POSTCALENDAR__, 'pcUseCache', $pcUseCache);\n-    pnModSetVar(__POSTCALENDAR__, 'pcCacheLifetime', $pcCacheLifetime);\n-    pnModSetVar(__POSTCALENDAR__, 'pcNotifyAdmin', $pcNotifyAdmin);\n-    pnModSetVar(__POSTCALENDAR__, 'pcNotifyEmail', $pcNotifyEmail);\n-\n-    $tpl = new pcSmarty();\n-    $tpl->clear_all_cache();\n-\n-    return postcalendar_admin_modifyconfig('<center>'._PC_UPDATED.'</center>');\n-}\n-\n-function postcalendar_admin_categoriesOld($msg = '', $e = '')\n-{\n-    if (!PC_ACCESS_ADMIN) {\n-        return _POSTCALENDAR_NOAUTH; }\n-\n-    $output = new pnHTML();\n-    $output->SetInputMode(_PNH_VERBATIMINPUT);\n-\n-    $pcModInfo = pnModGetInfo(pnModGetIDFromName(__POSTCALENDAR__));\n-    $pcDir = pnVarPrepForOS($pcModInfo['directory']);\n-    $jsColorPicker = <<<EOF\n-    <script LANGUAGE=\"Javascript\" SRC=\"modules/$pcDir/pnincludes/AnchorPosition.js\"></SCRIPT>\n-    <script LANGUAGE=\"Javascript\" SRC=\"modules/$pcDir/pnincludes/PopupWindow.js\"></SCRIPT>\n-    <script LANGUAGE=\"Javascript\" SRC=\"modules/$pcDir/pnincludes/ColorPicker2.js\"></SCRIPT>\n-    <script LANGUAGE=\"JavaScript\">\n-    var cp = new ColorPicker('window');\n-    // Runs when a color is clicked\n-    function pickColor(color) {\n-\t    field.value = color;\n-\t}\n-\n-    var field;\n-    function pick(anchorname,target) {\n-\t    field = this.document.forms.cats.elements[target];\n-\t    cp.show(anchorname);\n-\t}\n-    </SCRIPT>\n-EOF;\n-    $header = <<<EOF\n-\t\t<html>\n-\t\t<head></head>\n-\t\t<body bgcolor=\n-EOF;\n-    $header .= '\"' . $GLOBALS['style']['BGCOLOR2'] . '\">';\n-    $output->Text($header);\n-    $output->Text($jsColorPicker);\n-    $output->Text(postcalendar_adminmenu());\n-\n-    if (!empty($e)) {\n-        $output->Text('<div style=\"padding:5px; border:1px solid red; background-color: pink;\">');\n-        $output->Text('<center><b>'.$e.'</b></center>');\n-        $output->Text('</div><br />');\n-    }\n-\n-    if (!empty($msg)) {\n-        $output->Text('<div style=\"padding:5px; border:1px solid green; background-color: lightgreen;\">');\n-        $output->Text('<center><b>'.$msg.'</b></center>');\n-        $output->Text('</div><br />');\n-    }\n-\n-    $cats = pnModAPIFunc(__POSTCALENDAR__, 'admin', 'getCategories');\n-    if (!is_array($cats)) {\n-        $output->Text($cats);\n-        return $output->GetOutput();\n-    }\n-\n-    $output->Text('<form name=\"cats\" method=\"post\" action=\"'.pnModURL(__POSTCALENDAR__, 'admin', 'categoriesConfirm').'\">');\n-    $output->Text('<table border=\"1\" cellpadding=\"5\" cellspacing=\"0\">');\n-    $output->Text('<tr><th>'._PC_CAT_DELETE.'</th><th>'._PC_CAT_NAME.'</th><th>'._PC_CAT_DESC.'</th><th>'._PC_CAT_COLOR.'</th></tr>');\n-    $i = 0;\n-    foreach ($cats as $cat) {\n-        $output->Text('<tr>');\n-            $output->Text('<td valign=\"top\" align=\"left\">');\n-                $output->FormHidden('id[]', $cat['id']);\n-                $output->FormCheckbox('del[]', false, $cat['id']);\n-            $output->Text('</td>');\n-            $output->Text('<td valign=\"top\" align=\"left\">');\n-                $output->FormText('name[]', $cat['name'], 20);\n-            $output->Text('</td>');\n-            $output->Text('<td valign=\"top\" align=\"left\">');\n-                $output->FormTextarea('desc[]', $cat['desc'], 3, 20);\n-            $output->Text('</td>');\n-            $output->Text('<td valign=\"top\" align=\"left\">');\n-                $output->FormText('color[]', $cat['color'], 10);\n-                $output->Text('[<a href=\"javascript:void(0);\" onClick=\"pick(\\'pick\\',\\''.($i+4).'\\'); return false;\" NAME=\"pick\" ID=\"pick\">pick</a>]');\n-            $output->Text('</td>');\n-            $output->Text('</tr>');\n-        $i+=5;\n-    }\n-        $output->Text('<tr>');\n-            $output->Text('<td><a href=\"'.pnModURL(__POSTCALENDAR__, 'admin', 'categoriesNew').'\">'._PC_CAT_NEW.'</a></td>');\n-            /*\n-            $output->Text('<td valign=\"top\" align=\"left\">');\n-                $output->Text(_PC_CAT_NEW);\n-            $output->Text('</td>');\n-            $output->Text('<td valign=\"top\" align=\"left\">');\n-                $output->FormText('newname','',20);\n-            $output->Text('</td>');\n-            $output->Text('<td valign=\"top\" align=\"left\">');\n-                $output->FormTextarea('newdesc','',3,20);\n-            $output->Text('</td>');\n-            $output->Text('<td valign=\"top\" align=\"left\">');\n-                $output->FormText('newcolor','',10);\n-\t\t\t\t$output->Text('[<a href=\"javascript:void(0);\" onClick=\"pick(\\'pick\\',\\'newcolor\\');return false;\" NAME=\"pick\" ID=\"pick\">pick</a>]');\n-            $output->Text('</td>');\n-            */\n-        $output->Text('</tr>');\n-    $output->Text('</table>');\n-    $output->FormSubmit(_PC_ADMIN_SUBMIT);\n-    $output->FormEnd();\n-    $output->Text(\"</body></html>\");\n-    return $output->GetOutput();\n-}\n function postcalendar_admin_categoriesConfirm()\n {\n-    if (!PC_ACCESS_ADMIN) {\n-        return _POSTCALENDAR_NOAUTH; }\n-\n     $output = new pnHTML();\n     $output->SetInputMode(_PNH_VERBATIMINPUT);\n     $header = <<<EOF\n@@ -1144,19 +67,18 @@ function postcalendar_admin_categoriesConfirm()\n \t<head></head>\n \t<body bgcolor=\n EOF;\n-    $header .= '\"' . $GLOBALS['style']['BGCOLOR2'] . '\">';\n+    $header .= '\"' . attr($GLOBALS['style']['BGCOLOR2']) . '\">';\n     $output->Text($header);\n     $output->Text(postcalendar_adminmenu());\n-\n-    list($id,$del,$name,$constantid,$value_cat_type,$desc,$color,\n-        $event_repeat,$event_repeat_freq,\n-        $event_repeat_freq_type,$event_repeat_on_num,\n-        $event_repeat_on_day,$event_repeat_on_freq,$durationh,$durationm,\n-        $end_date_flag,$end_date_type,$end_date_freq,$end_all_day,$active,$sequence,$aco,\n-        $newname,$newconstantid,$newdesc,$newcolor,$new_event_repeat,$new_event_repeat_freq,\n-        $new_event_repeat_freq_type,$new_event_repeat_on_num,$new_event_repeat_on_day,\n-        $new_event_repeat_on_freq,$new_durationh,$new_durationm,$new_limitid,$new_end_date_flag,\n-        $new_end_date_type,$new_end_date_freq,$new_end_all_day,$new_value_cat_type,$newactive,$newsequence,$newaco\n+    list($id, $del, $name, $constantid, $value_cat_type, $desc, $color,\n+        $event_repeat, $event_repeat_freq,\n+        $event_repeat_freq_type, $event_repeat_on_num,\n+        $event_repeat_on_day, $event_repeat_on_freq, $durationh, $durationm,\n+        $end_date_flag, $end_date_type, $end_date_freq, $end_all_day, $active, $sequence, $aco,\n+        $newname, $newconstantid, $newdesc, $newcolor, $new_event_repeat, $new_event_repeat_freq,\n+        $new_event_repeat_freq_type, $new_event_repeat_on_num, $new_event_repeat_on_day,\n+        $new_event_repeat_on_freq, $new_durationh, $new_durationm, $new_limitid, $new_end_date_flag,\n+        $new_end_date_type, $new_end_date_freq, $new_end_all_day, $new_value_cat_type, $newactive, $newsequence, $newaco\n         ) = pnVarCleanFromInput(\n             'id',\n             'del',\n@@ -1219,7 +141,7 @@ EOF;\n         }\n         $tmp = $color[$i];\n         if (strlen($tmp) != 7 || $tmp[0] != \"#\") {\n-            $e = $tmp.\" size \".strlen($tmp).\" at 0 \".$tmp[0];\n+            $e = $tmp . \" size \" . strlen($tmp) . \" at 0 \" . $tmp[0];\n             $output->Text(postcalendar_admin_categories($msg, \"You entered an invalid color(USE Pick) $e!\"));\n             return $output->GetOutput();\n         }\n@@ -1228,15 +150,17 @@ EOF;\n         if (!is_numeric($durationh[$i]) || !is_numeric($durationm[$i]) ||\n             !is_numeric($event_repeat_freq[$i]) ||\n             !is_numeric($event_repeat_on_freq[$i]) || !is_numeric($end_date_freq[$i])) {\n-            $output->Text(postcalendar_admin_categories($msg, \" Hours, Minutes and recurrence values must be numeric!\"));\n+            $output->Text(postcalendar_admin_categories(\n+                $msg,\n+                \" Hours, Minutes and recurrence values must be numeric!\"\n+            ));\n             return $output->GetOutput();\n         }\n     }\n-\n     if (!empty($newnam)) {\n         if (!is_numeric($new_durationh) || !is_numeric($new_durationm) ||\n             !is_numeric($new_event_repeat_freq) || !is_numeric($new_event_repeat_on_freq)\n-            || !is_numeric($new_end_date_freq) ) {\n+            || !is_numeric($new_end_date_freq)) {\n             $output->Text(postcalendar_admin_categories($msg, \"Hours, Minutes and recurrence values must be numeric!\"));\n             return $output->GetOutput();\n         }\n@@ -1249,7 +173,6 @@ EOF;\n         'event_repeat_on_day',\n         'event_repeat_on_freq'\n     ));\n-\n     $new_event_recurrspec = serialize(compact(\n         'new_event_repeat_freq',\n         'new_event_repeat_freq_type',\n@@ -1259,7 +182,7 @@ EOF;\n     ));\n     if (is_array($del)) {\n         $dels = implode(',', $del);\n-        $delText = _PC_DELETE_CATS . $dels .'.';\n+        $delText = _PC_DELETE_CATS . $dels . '.';\n     }\n     $output->FormStart(pnModURL(__POSTCALENDAR__, 'admin', 'categoriesUpdate'));\n     $output->Text(_PC_ARE_YOU_SURE);\n@@ -1279,7 +202,6 @@ EOF;\n             $output->Text(postcalendar_admin_categories($msg, \"Category Identifiers must be one word!\"));\n             return $output->GetOutput();\n         }\n-\n         $output->FormHidden('newname', $newname);\n         $output->FormHidden('newconstantid', $newconstantid);\n         $output->FormHidden('newdesc', $newdesc);\n@@ -1297,8 +219,7 @@ EOF;\n         $output->FormHidden(\"newactive\", $newactive);\n         $output->FormHidden(\"newsequence\", $newsequence);\n         $output->FormHidden(\"newaco\", $newaco);\n-\n-        $output->Text(_PC_ADD_CAT . $newname .'.');\n+        $output->Text(_PC_ADD_CAT . $newname . '.');\n         $output->Linebreak();\n     }\n     $output->Text(_PC_MODIFY_CATS);\n@@ -1323,14 +244,11 @@ EOF;\n     $output->Linebreak();\n     $output->FormSubmit(_PC_CATS_CONFIRM);\n     $output->FormEnd();\n-\n     return $output->GetOutput();\n }\n+\n function postcalendar_admin_categoriesUpdate()\n {\n-    if (!PC_ACCESS_ADMIN) {\n-        return _POSTCALENDAR_NOAUTH; }\n-\n     $output = new pnHTML();\n     $output->SetInputMode(_PNH_VERBATIMINPUT);\n \n@@ -1382,34 +300,36 @@ function postcalendar_admin_categoriesUpdate()\n             'newaco'\n         );\n \n-    $id = unserialize($id);\n-    $del = unserialize($del);\n-    $name = unserialize($name);\n-    $constantid = unserialize($constantid);\n-    $value_cat_type = unserialize($value_cat_type);\n-    $desc = unserialize($desc);\n-    $color = unserialize($color);\n-    $event_repeat_array = unserialize($event_repeat_array);\n-    $event_recurrspec_array = unserialize($event_recurrspec_array);\n-    $durationh = unserialize($durationh);\n-    $durationm = unserialize($durationm);\n-    $end_date_flag = unserialize($end_date_flag);\n-    $end_date_type = unserialize($end_date_type);\n-    $end_date_freq = unserialize($end_date_freq);\n-    $end_all_day = unserialize($end_all_day);\n-    $active = unserialize($active);\n-    $sequence = unserialize($sequence);\n-    $aco = unserialize($aco);\n+    $id = unserialize($id, ['allowed_classes' => false]);\n+    $del = unserialize($del, ['allowed_classes' => false]);\n+    $name = unserialize($name, ['allowed_classes' => false]);\n+    $constantid = unserialize($constantid, ['allowed_classes' => false]);\n+    $value_cat_type = unserialize($value_cat_type, ['allowed_classes' => false]);\n+    $desc = unserialize($desc, ['allowed_classes' => false]);\n+    $color = unserialize($color, ['allowed_classes' => false]);\n+    $event_repeat_array = unserialize($event_repeat_array, ['allowed_classes' => false]);\n+    $event_recurrspec_array = unserialize($event_recurrspec_array, ['allowed_classes' => false]);\n+    $durationh = unserialize($durationh, ['allowed_classes' => false]);\n+    $durationm = unserialize($durationm, ['allowed_classes' => false]);\n+    $end_date_flag = unserialize($end_date_flag, ['allowed_classes' => false]);\n+    $end_date_type = unserialize($end_date_type, ['allowed_classes' => false]);\n+    $end_date_freq = unserialize($end_date_freq, ['allowed_classes' => false]);\n+    $end_all_day = unserialize($end_all_day, ['allowed_classes' => false]);\n+    $active = unserialize($active, ['allowed_classes' => false]);\n+    $sequence = unserialize($sequence, ['allowed_classes' => false]);\n+    $aco = unserialize($aco, ['allowed_classes' => false]);\n     $updates = array();\n \n     if (isset($id)) {\n         foreach ($id as $k => $i) {\n             $found = false;\n-            if (count($del)) {\n-                foreach ($del as $d) {\n-                    if ($i == $d) {\n-                        $found = true;\n-                        break;\n+            if (!empty($del)) {\n+                if (count($del)) {\n+                    foreach ($del as $d) {\n+                        if ($i == $d) {\n+                            $found = true;\n+                            break;\n+                        }\n                     }\n                 }\n             }\n@@ -1446,7 +366,7 @@ function postcalendar_admin_categoriesUpdate()\n \t\t                             \t pc_active ='\".pnVarPrepForStore($active[$i]).\"',\n \t\t                             \t pc_seq = '\".pnVarPrepForStore($sequence[$k]).\"',\n \t\t                             \t aco_spec = '\".pnVarPrepForStore($aco[$k]).\"'\n-\t\t                             WHERE pc_catid=$i\";\n+\t\t                             WHERE pc_catid = '\" . pnVarPrepForStore($i) . \"'\";\n \n                 array_push($updates, $update_sql);\n                 unset($recurrspec);\n@@ -1467,7 +387,7 @@ function postcalendar_admin_categoriesUpdate()\n         }\n     }\n     if (isset($newname)) {\n-        $unpacked = unserialize($new_event_recurrspec);\n+        $unpacked = unserialize($new_event_recurrspec, ['allowed_classes' => false]);\n         unset($new_event_recurrspec);\n         $new_event_recurrspec['event_repeat_freq'] = $unpacked['new_event_repeat_freq'];\n         $new_event_recurrspec['event_repeat_freq_type'] = $unpacked['new_event_repeat_freq_type'];\n@@ -1492,7 +412,8 @@ function postcalendar_admin_categoriesUpdate()\n     }\n \n     if (empty($e)) {\n-        $msg = 'DONE'; }\n+        $msg = 'DONE';\n+    }\n     $output->Text(postcalendar_admin_categories($msg, $e));\n     return $output->GetOutput();\n }\n@@ -1502,8 +423,6 @@ function postcalendar_admin_categoriesUpdate()\n */\n function postcalendar_admin_categories($msg = '', $e = '', $args = array())\n {\n-    if (!PC_ACCESS_ADD) {\n-        return _POSTCALENDARNOAUTH; }\n     extract($args);\n     unset($args);\n \n@@ -1519,6 +438,8 @@ function postcalendar_admin_categories($msg = '', $e = '', $args = array())\n         $template_name ='default';\n     }\n \n+    $output->Text(postcalendar_adminmenu());\n+\n     if (!empty($e)) {\n         $output->Text('<div style=\"padding:5px; border:1px solid red; background-color: pink;\">');\n         $output->Text('<center><b>'.$e.'</b></center>');\n@@ -1655,7 +576,9 @@ function postcalendar_admin_categories($msg = '', $e = '', $args = array())\n     $tpl->assign('ValueNoEnd', '0');\n     $tpl->assign('ValueEnd', '1');\n \n-\n+    if (empty($end_date_type)) {\n+        $end_date_type = array();\n+    }\n     foreach ($in as $k => $v) {\n         array_push($end_date_type, array('value'=>$keys[$k],\n                                            'selected'=>($keys[$k]==$end_date_type?'selected':''),\n@@ -1664,7 +587,7 @@ function postcalendar_admin_categories($msg = '', $e = '', $args = array())\n     unset($in);\n \n \n-// End date gather date end\n+    // End date gather date end\n \n \n     unset($in);\n@@ -1732,7 +655,6 @@ function postcalendar_admin_categories($msg = '', $e = '', $args = array())\n     $tpl->assign('ACO_List', $acoList);\n \n     $output->SetOutputMode(_PNH_RETURNOUTPUT);\n-    $authkey = $output->FormHidden('authid', pnSecGenAuthKey());\n     $output->SetOutputMode(_PNH_KEEPOUTPUT);\n \n     $form_hidden = \"<input type=\\\"hidden\\\" name=\\\"is_update\\\" value=\\\"$is_update\\\" />\";\n@@ -1755,16 +677,7 @@ function postcalendar_admin_categories($msg = '', $e = '', $args = array())\n  */\n function postcalendar_adminmenu($upgraded = false)\n {\n-    if (!PC_ACCESS_ADMIN) {\n-        return _POSTCALENDAR_NOAUTH; }\n-\n-    pnThemeLoad(pnUserGetTheme());\n-    // get the theme globals :: is there a better way to do this?\n-    global $bgcolor1, $bgcolor2, $bgcolor3, $bgcolor4, $bgcolor5, $bgcolor6;\n-    global $textcolor1, $textcolor2;\n-\n-    $pcModInfo = pnModGetInfo(pnModGetIDFromName(__POSTCALENDAR__));\n-    $pcDir = pnVarPrepForOS($pcModInfo['directory']);\n+    global $bgcolor1, $bgcolor2;\n \n     @define('_AM_VAL', 1);\n     @define('_PM_VAL', 2);\n@@ -1773,57 +686,26 @@ function postcalendar_adminmenu($upgraded = false)\n     @define('_EVENT_QUEUED', 0);\n     @define('_EVENT_HIDDEN', -1);\n \n-    $adminURL     = pnModURL(__POSTCALENDAR__, 'admin', '');\n-    $settingsURL  = pnModURL(__POSTCALENDAR__, 'admin', 'modifyconfig');\n     $categoryURL  = pnModURL(__POSTCALENDAR__, 'admin', 'categories');\n-    $submitURL    = pnModURL(__POSTCALENDAR__, 'admin', 'submit');\n-    $approvedURL  = pnModURL(__POSTCALENDAR__, 'admin', 'listapproved');\n-    $hiddenURL    = pnModURL(__POSTCALENDAR__, 'admin', 'listhidden');\n-    $queuedURL    = pnModURL(__POSTCALENDAR__, 'admin', 'listqueued');\n     $cacheURL     = pnModURL(__POSTCALENDAR__, 'admin', 'clearCache');\n     $systemURL    = pnModURL(__POSTCALENDAR__, 'admin', 'testSystem');\n-    $limitsURL    = pnModURL(__POSTCALENDAR__, 'admin', 'categoryLimits');\n-\n-    $adminText    = _POSTCALENDAR;\n-    $settingsText = _EDIT_PC_CONFIG_GLOBAL;\n-    $categoryText = _EDIT_PC_CONFIG_CATEGORIES;\n-    $submitText   = _PC_CREATE_EVENT;\n-    $approvedText = \"Event List\";\n-    $hiddenText   = _PC_VIEW_HIDDEN;\n-    $queuedText   = \"Marked for Deletion\";\n-    $cacheText    = _PC_CLEAR_CACHE;\n-    $cacheText    = _PC_CLEAR_CACHE;\n-    $systemText   = _PC_TEST_SYSTEM;\n-    $limitsText   = _PC_CAT_LIMITS;\n-\n-    // check for upgrade\n-    $upgrade = '';\n-    if ($upgraded === false) {\n-        $upgrade = pc_isNewVersion();\n-    }\n \n+    $categoryText = text(_EDIT_PC_CONFIG_CATEGORIES);\n+    $cacheText    = text(_PC_CLEAR_CACHE);\n+    $systemText   = text(_PC_TEST_SYSTEM);\n \n     $output = <<<EOF\n <table border=\"0\" cellpadding=\"1\" cellspacing=\"0\" width=\"100%\" bgcolor=\"$bgcolor2\"><tr><td>\n <table border=\"0\" cellpadding=\"5\" cellspacing=\"0\" width=\"100%\" bgcolor=\"$bgcolor1\">\n \t<tr>\n-\t\t<td align=\"left\" valign=\"middle\"><a href=\"$adminURL\"><img\n-\t\t\tborder=\"0\" src=\"modules/$pcDir/pnimages/admin.gif\"></a></td>\n         <td width=\"100%\" align=\"left\" valign=\"middle\">\n \t\t\t<table border=\"0\" cellpadding=\"1\" cellspacing=\"0\"><tr><td bgcolor=\"$bgcolor2\">\n \t\t\t<table border=\"0\" cellpadding=\"5\" cellspacing=\"0\" width=\"100%\" bgcolor=\"$bgcolor1\">\n \t\t\t\t<tr>\n \t\t\t\t\t<td nowrap>\n-\t\t\t\t\t\t<!--<a href=\"$settingsURL\">$settingsText</a> |-->\n-\t\t\t\t\t\t<!--<a href=\"$submitURL\">$submitText</a> |-->\n \t\t\t\t\t\t<a href=\"$cacheURL\">$cacheText</a> |\n \t\t\t\t\t\t<a href=\"$systemURL\">$systemText</a> |\n-\t\t\t\t\t\t<a href=\"$categoryURL\">$categoryText</a> |\n-\t\t\t\t\t\t<a href=\"$limitsURL\">$limitsText</a><!-- |\n-\t\t\t\t\t\t<a href=\"$queuedURL\">$queuedText</a> |\n-\t\t\t\t\t\t<a href=\"$approvedURL\">$approvedText</a> |\n-\t\t\t\t\t\t<a href=\"$hiddenURL\">$hiddenText</a>-->\n-\t\t\t\t\t\t$upgrade\n+\t\t\t\t\t\t<a href=\"$categoryURL\">$categoryText</a>\n \t\t\t\t</tr>\n \t\t\t</table>\n \t\t\t</td></tr></table>\n@@ -1839,113 +721,25 @@ EOF;\n \n function postcalendar_admin_clearCache()\n {\n-    if (!PC_ACCESS_ADMIN) {\n-        return _POSTCALENDAR_NOAUTH;\n-    }\n-\n     $tpl = new pcSmarty();\n     //fmg: check that both subdirs to be cleared first exist and are writeable\n     $spec_err = '';\n \n     if (!file_exists($tpl->compile_dir)) {\n-        $spec_err .= \"Error: folder '$tpl->compile_dir' doesn't exist!<br>\";\n+        $spec_err .= \"Error: folder '\" .text($tpl->compile_dir) . \"' doesn't exist!<br>\";\n     } else if (!is_writeable($tpl->compile_dir)) {\n-        $spec_err .= \"Error: folder '$tpl->compile_dir' not writeable!<br>\";\n+        $spec_err .= \"Error: folder '\" . text($tpl->compile_dir) . \"' not writeable!<br>\";\n     }\n \n     //note: we don't abort on error... like before.\n     $tpl->clear_all_cache();\n     $tpl->clear_compiled_tpl();\n \n-    return postcalendar_admin_modifyconfig('<center>'.$spec_err._PC_CACHE_CLEARED.'</center>');\n-}\n-\n-function pc_isNewVersion()\n-{\n-    $pcModInfo = pnModGetInfo(pnModGetIDFromName(__POSTCALENDAR__));\n-    $pcDir = pnVarPrepForOS($pcModInfo['directory']);\n-    @include(\"modules/$pcDir/pnversion.php\");\n-\n-    if ($pcModInfo['version'] <> $modversion['version']) {\n-        $upgradeURL   = pnModURL(__POSTCALENDAR__, 'admin', 'upgrade');\n-        $upgradeText  = \"Upgrade PostCalendar $pcModInfo[version] to $modversion[version]\";\n-        $upgrade = \"<br /><br />[ <a href=\\\"$upgradeURL\\\">$upgradeText</a> ]\";\n-    } else {\n-        $upgrade = '';\n-    }\n-\n-    return $upgrade;\n-}\n-\n-// UPGRADE WORKAROUND SCRIPT - POSTNUKE BUG\n-function postcalendar_admin_upgrade()\n-{\n-    if (!PC_ACCESS_ADMIN) {\n-        return _POSTCALENDAR_NOAUTH; }\n-\n-    $pcModInfo = pnModGetInfo(pnModGetIDFromName(__POSTCALENDAR__));\n-    $pcDir = pnVarPrepForOS($pcModInfo['directory']);\n-    @include(\"modules/$pcDir/pnversion.php\");\n-    @include(\"modules/$pcDir/pninit.php\");\n-\n-    $result = postcalendar_upgrade($pcModInfo['version']);\n-\n-    if ($result === false) {\n-        $output  = postcalendar_adminmenu(false);\n-        $output .= '<div style=\"padding:5px; border:1px solid red; background-color: pink;\">';\n-        $output .= '<center><b>SORRY :: MODULE UPGRADE FAILED</b></center>';\n-        $output .= '</div><br />';\n-        return $output;\n-    }\n-\n-    // if we've gotten this far, then it's time to increment the version in the db\n-    list($dbconn) = pnDBGetConn();\n-    $pntable = pnDBGetTables();\n-    $modulestable = $pntable['modules'];\n-    $modulescolumn = &$pntable['modules_column'];\n-\n-    // Get module ID\n-    $modulestable = $pntable['modules'];\n-    $modulescolumn = &$pntable['modules_column'];\n-    $query = \"SELECT $modulescolumn[id]\n-              FROM $modulestable\n-              WHERE $modulescolumn[name] = '\". pnVarPrepForStore(__POSTCALENDAR__).\"'\";\n-    $result = $dbconn->Execute($query);\n-\n-    if ($result->EOF) {\n-        die(\"Failed to get module ID\"); }\n-\n-    list($mid) = $result->fields;\n-    $result->Close();\n-\n-    $sql = \"UPDATE $modulestable\n-            SET $modulescolumn[version] = '\".pnVarPrepForStore($modversion['version']).\"',\n-\t\t\t\t$modulescolumn[state] = '\".pnVarPrepForStore(_PNMODULE_STATE_ACTIVE).\"'\n-            WHERE $modulescolumn[id] = '\".pnVarPrepForStore($mid).\"'\";\n-\n-    // upgrade did not succeed\n-    if ($dbconn->Execute($sql) === false) {\n-        $output  = postcalendar_adminmenu(false);\n-        $output .= '<div style=\"padding:5px; border:1px solid red; background-color: pink;\">';\n-        $output .= '<center><b>SORRY :: MODULE UPGRADE FAILED</b><br />';\n-        $output .= $dbconn->ErrorMsg();\n-        $output .= '</center>';\n-        $output .= '</div><br />';\n-    }\n-    $output  = postcalendar_adminmenu(true);\n-    $output .= '<div style=\"padding:5px; border:1px solid green; background-color: lightgreen;\">';\n-    $output .= '<center><b>CONGRATULATIONS :: MODULE UPGRADE SUCCEEDED</b></center>';\n-    $output .= '</div><br />';\n-    return $output;\n+    return postcalendar_admin_modifyconfig('<center>'. $spec_err . text(_PC_CACHE_CLEARED) .'</center>');\n }\n \n function postcalendar_admin_testSystem()\n {\n-    global $bgcolor1,$bgcolor2;\n-\n-    if (!PC_ACCESS_ADMIN) {\n-        return _POSTCALENDAR_NOAUTH; }\n-\n     $modinfo = pnModGetInfo(pnModGetIDFromName(__POSTCALENDAR__));\n     $pcDir = pnVarPrepForOS($modinfo['directory']);\n     $version = $modinfo['version'];\n@@ -1954,13 +748,8 @@ function postcalendar_admin_testSystem()\n     $tpl = new pcSmarty();\n     $infos = array();\n \n-    if (phpversion() >= '4.1.0') {\n-        $__SERVER =& $_SERVER;\n-        $__ENV    =& $_ENV;\n-    } else {\n-        $__SERVER =& $HTTP_SERVER_VARS;\n-        $__ENV    =& $HTTP_ENV_VARS;\n-    }\n+    $__SERVER =& $_SERVER;\n+    $__ENV    =& $_ENV;\n \n     if (defined('_PN_VERSION_NUM')) {\n         $pnVersion = _PN_VERSION_NUM;\n@@ -2013,11 +802,11 @@ function postcalendar_admin_testSystem()\n     $info = $tpl->compile_dir;\n     $error = '';\n     if (!file_exists($tpl->compile_dir)) {\n-        $error .= \" compile dir doesn't exist! [$tpl->compile_dir]<br />\";\n+        $error .= \" compile dir doesn't exist! [\" . text($tpl->compile_dir) . \"]<br />\";\n     } else {\n         // dir exists -> check if it's writeable\n         if (!is_writeable($tpl->compile_dir)) {\n-            $error .= \" compile dir not writeable! [$tpl->compile_dir]<br />\";\n+            $error .= \" compile dir not writeable! [\" . text($tpl->compile_dir) . \"]<br />\";\n         }\n     }\n     if (strlen($error) > 0) {\n@@ -2030,7 +819,7 @@ function postcalendar_admin_testSystem()\n \t<head></head>\n \t<body bgcolor=\n EOF;\n-    $header .= '\"' . $GLOBALS['style']['BGCOLOR2'] . '\">';\n+    $header .= '\"' . attr($GLOBALS['style']['BGCOLOR2']) . '\">';\n     $output .= $header;\n     $output  = postcalendar_adminmenu();\n     $output .= '<table border=\"1\" cellpadding=\"3\" cellspacing=\"1\">';\n@@ -2046,337 +835,3 @@ EOF;\n     $output .= \"</body></html>\";\n     return $output;\n }\n-\n-function postcalendar_admin_categoryDetail($args)\n-{\n-    if (!PC_ACCESS_ADD) {\n-        return _POSTCALENDARNOAUTH; }\n-    extract($args);\n-    unset($args);\n-\n-    $output = new pnHTML();\n-    $output->SetInputMode(_PNH_VERBATIMINPUT);\n-    // set up Smarty\n-    $tpl = new pcSmarty();\n-    $tpl->caching = false;\n-\n-    $template_name = pnModGetVar(__POSTCALENDAR__, 'pcTemplate');\n-\n-    if (!isset($template_name)) {\n-        $template_name ='default';\n-    }\n-\n-    //=================================================================\n-    //  Setup the correct config file path for the templates\n-    //=================================================================\n-    $modinfo = pnModGetInfo(pnModGetIDFromName(__POSTCALENDAR__));\n-    $modir = pnVarPrepForOS($modinfo['directory']);\n-    $modname = $modinfo['displayname'];\n-    $all_categories = & pnModAPIFunc(__POSTCALENDAR__, 'user', 'getCategories');\n-    $all_details =& pnModAPIFunc(__POSTCALENDAR__, 'user', 'getCatDetails');\n-    unset($modinfo);\n-    $tpl->config_dir = \"modules/$modir/pntemplates/$template_name/config/\";\n-    //=================================================================\n-    //  PARSE MAIN\n-    //=================================================================\n-\n-\n-    $tpl->assign_by_ref('TPL_NAME', $template_name);\n-    $tpl->assign('FUNCTION', pnVarCleanFromInput('func'));\n-    $tpl->assign_by_ref('ModuleName', $modname);\n-    $tpl->assign_by_ref('ModuleDirectory', $modir);\n-    $tpl->assign('Category', \"Category\");\n-    $tpl->assign_by_ref('categories', $all_categories);\n-\n-    //=================================================================\n-    //  Repeating Information\n-    //=================================================================\n-    $tpl->assign('RepeatingHeader', _PC_REPEATING_HEADER);\n-    $tpl->assign('NoRepeatTitle', _PC_NO_REPEAT);\n-    $tpl->assign('RepeatTitle', _PC_REPEAT);\n-    $tpl->assign('RepeatOnTitle', _PC_REPEAT_ON);\n-    $tpl->assign('OfTheMonthTitle', _PC_OF_THE_MONTH);\n-    $tpl->assign('EndDateTitle', _PC_END_DATE);\n-    $tpl->assign('NoEndDateTitle', _PC_NO_END);\n-    $tpl->assign('InputNoRepeat', 'event_repeat');\n-    $tpl->assign('ValueNoRepeat', '0');\n-    $tpl->assign('SelectedNoRepeat', (int) $event_repeat==0 ? 'checked':'');\n-    $tpl->assign('InputRepeat', 'event_repeat');\n-    $tpl->assign('ValueRepeat', '1');\n-    $tpl->assign('SelectedRepeat', (int) $event_repeat==1 ? 'checked':'');\n-\n-    unset($in);\n-    $in = array(_PC_EVERY,_PC_EVERY_OTHER,_PC_EVERY_THIRD,_PC_EVERY_FOURTH);\n-    $keys = array(REPEAT_EVERY,REPEAT_EVERY_OTHER,REPEAT_EVERY_THIRD,REPEAT_EVERY_FOURTH);\n-    $repeat_freq = array();\n-    foreach ($in as $k => $v) {\n-        array_push($repeat_freq, array('value'=>$keys[$k],\n-                                      'selected'=>($keys[$k]==$event_repeat_freq?'selected':''),\n-                                      'name'=>$v));\n-    }\n-    $tpl->assign('InputRepeatFreq', 'event_repeat_freq');\n-    if (empty($event_repeat_freq) || $event_repeat_freq < 1) {\n-        $event_repeat_freq = 1;\n-    }\n-    $tpl->assign('InputRepeatFreqVal', $event_repeat_freq);\n-    $tpl->assign('repeat_freq', $repeat_freq);\n-    unset($in);\n-    $in = array(_PC_EVERY_DAY,_PC_EVERY_WORKDAY,_PC_EVERY_WEEK,_PC_EVERY_MONTH,_PC_EVERY_YEAR);\n-    $keys = array(REPEAT_EVERY_DAY,REPEAT_EVERY_WORK_DAY,REPEAT_EVERY_WEEK,REPEAT_EVERY_MONTH,REPEAT_EVERY_YEAR);\n-    $repeat_freq_type = array();\n-    foreach ($in as $k => $v) {\n-        array_push($repeat_freq_type, array('value'=>$keys[$k],\n-                                           'selected'=>($keys[$k]==$event_repeat_freq_type?'selected':''),\n-                                           'name'=>$v));\n-    }\n-    $tpl->assign('InputRepeatFreqType', 'event_repeat_freq_type');\n-    $tpl->assign('repeat_freq_type', $repeat_freq_type);\n-\n-    $tpl->assign('InputRepeatOn', 'event_repeat');\n-    $tpl->assign('ValueRepeatOn', '2');\n-    $tpl->assign('SelectedRepeatOn', (int) $event_repeat==2 ? 'checked':'');\n-\n-    unset($in);\n-    $in = array(_PC_EVERY_1ST,_PC_EVERY_2ND,_PC_EVERY_3RD,_PC_EVERY_4TH,_PC_EVERY_LAST);\n-    $keys = array(REPEAT_ON_1ST,REPEAT_ON_2ND,REPEAT_ON_3RD,REPEAT_ON_4TH,REPEAT_ON_LAST);\n-    $repeat_on_num = array();\n-    foreach ($in as $k => $v) {\n-        array_push($repeat_on_num, array('value'=>$keys[$k],\n-                                        'selected'=>($keys[$k]==$event_repeat_on_num?'selected':''),\n-                                        'name'=>$v));\n-    }\n-    $tpl->assign('InputRepeatOnNum', 'event_repeat_on_num');\n-    $tpl->assign('repeat_on_num', $repeat_on_num);\n-\n-    unset($in);\n-    $in = array(_PC_EVERY_SUN,_PC_EVERY_MON,_PC_EVERY_TUE,_PC_EVERY_WED,_PC_EVERY_THU,_PC_EVERY_FRI,_PC_EVERY_SAT);\n-    $keys = array(REPEAT_ON_SUN,REPEAT_ON_MON,REPEAT_ON_TUE,REPEAT_ON_WED,REPEAT_ON_THU,REPEAT_ON_FRI,REPEAT_ON_SAT);\n-    $repeat_on_day = array();\n-    foreach ($in as $k => $v) {\n-        array_push($repeat_on_day, array('value'=>$keys[$k],\n-                                        'selected'=>($keys[$k]==$event_repeat_on_day ? 'selected' : ''),\n-                                        'name'=>$v));\n-    }\n-    $tpl->assign('InputRepeatOnDay', 'event_repeat_on_day');\n-    $tpl->assign('repeat_on_day', $repeat_on_day);\n-\n-    unset($in);\n-    $in = array(_PC_OF_EVERY_MONTH,_PC_OF_EVERY_2MONTH,_PC_OF_EVERY_3MONTH,_PC_OF_EVERY_4MONTH,_PC_OF_EVERY_6MONTH,_PC_OF_EVERY_YEAR);\n-    $keys = array(REPEAT_ON_MONTH,REPEAT_ON_2MONTH,REPEAT_ON_3MONTH,REPEAT_ON_4MONTH,REPEAT_ON_6MONTH,REPEAT_ON_YEAR);\n-    $repeat_on_freq = array();\n-    foreach ($in as $k => $v) {\n-        array_push($repeat_on_freq, array('value'=>$keys[$k],\n-                                         'selected'=>($keys[$k] == $event_repeat_on_freq ? 'selected' : ''),\n-                                         'name'=>$v));\n-    }\n-    $tpl->assign('InputRepeatOnFreq', 'event_repeat_on_freq');\n-    if (empty($event_repeat_on_freq) || $event_repeat_on_freq < 1) {\n-        $event_repeat_on_freq = 1;\n-    }\n-    $tpl->assign('InputRepeatOnFreqVal', $event_repeat_on_freq);\n-    $tpl->assign('repeat_on_freq', $repeat_on_freq);\n-    $tpl->assign('MonthsTitle', _PC_MONTHS);\n-\n-    $output->SetOutputMode(_PNH_RETURNOUTPUT);\n-    $authkey = $output->FormHidden('authid', pnSecGenAuthKey());\n-    $output->SetOutputMode(_PNH_KEEPOUTPUT);\n-\n-    $form_hidden = \"<input type=\\\"hidden\\\" name=\\\"is_update\\\" value=\\\"$is_update\\\" />\";\n-    $form_hidden .= \"<input type=\\\"hidden\\\" name=\\\"pc_event_id\\\" value=\\\"$pc_event_id\\\" />\";\n-    if (isset($data_loaded)) {\n-        $form_hidden .= \"<input type=\\\"hidden\\\" name=\\\"data_loaded\\\" value=\\\"$data_loaded\\\" />\";\n-        $tpl->assign('FormHidden', $form_hidden);\n-    }\n-    $form_submit = '<input type=hidden name=\"form_action\" value=\"commit\"/>\n-\t\t\t\t   '.$authkey.'<input type=\"submit\" name=\"submit\" value=\"go\">' ;\n-    $tpl->assign('FormSubmit', $form_submit);\n-\n-    $output->Text($tpl->fetch($template_name.'/admin/submit_detail.html'));\n-\n-    $output->Text(postcalendar_footer());\n-    return $output->GetOutput();\n-}\n-\n-function postcalendar_admin_categoryLimits($msg = '', $e = '', $args = array())\n-{\n-    if (!PC_ACCESS_ADD) {\n-        return _POSTCALENDARNOAUTH; }\n-    extract($args);\n-    unset($args);\n-\n-    $output = new pnHTML();\n-    $output->SetInputMode(_PNH_VERBATIMINPUT);\n-    // set up Smarty\n-    $tpl = new pcSmarty();\n-    $tpl->caching = false;\n-\n-    $template_name = pnModGetVar(__POSTCALENDAR__, 'pcTemplate');\n-\n-    if (!isset($template_name)) {\n-        $template_name ='default';\n-    }\n-\n-    if (!empty($e)) {\n-        $output->Text('<div style=\"padding:5px; border:1px solid red; background-color: pink;\">');\n-        $output->Text('<center><b>'.$e.'</b></center>');\n-        $output->Text('</div><br />');\n-    }\n-\n-    if (!empty($msg)) {\n-        $output->Text('<div style=\"padding:5px; border:1px solid green; background-color: lightgreen;\">');\n-        $output->Text('<center><b>'.$msg.'</b></center>');\n-        $output->Text('</div><br />');\n-    }\n-\n-    //=================================================================\n-    //  Setup the correct config file path for the templates\n-    //=================================================================\n-    $modinfo = pnModGetInfo(pnModGetIDFromName(__POSTCALENDAR__));\n-    $modir = pnVarPrepForOS($modinfo['directory']);\n-    $modname = $modinfo['displayname'];\n-\n-    //print_r($all_categories);\n-    unset($modinfo);\n-    $tpl->assign('action', pnModURL(__POSTCALENDAR__, 'admin', 'categoryLimitsUpdate'));\n-    //===============================================================\n-    //  Setup titles for smarty\n-    //===============================================================\n-\n-    $tpl->assign('_PC_LIMIT_TITLE', _PC_LIMIT_TITLE);\n-    $tpl->assign('StartTimeTitle', _PC_LIMIT_START_TIME);\n-    $tpl->assign('EndTimeTile', _PC_LIMIT_END_TIME);\n-    $tpl->assign('LimitHoursTitle', _PC_TIMED_DURATION_HOURS);\n-    $tpl->assign('LimitMinutesTitle', _PC_TIMED_DURATION_MINUTES);\n-\n-    //=============================================================\n-    // Setup Vars for smarty\n-    //============================================================\n-    $tpl->assign('mer_title', 'mer');\n-    $mer = array('am','pm');\n-    $tpl->assign_by_ref('mer', $mer);\n-    $tpl->assign('starttimeh', 'starttimeh');\n-    $tpl->assign('starttimem', 'starttimem');\n-    $tpl->assign('endtimeh', 'endtimeh');\n-    $tpl->assign('endtimem', 'endtimem');\n-    $tpl->assign('InputLimit', 'limit');\n-    $tpl->assign('LimitTitle', _PC_LIMIT_TITLE);\n-    $tpl->assign('_PC_NEW_LIMIT_TITLE', _PC_NEW_LIMIT_TITLE);\n-    $tpl->assign('_PC_CAT_DELETE', _PC_CAT_DELETE);\n-    $tpl->assign('EndTimeTitle', _PC_LIMIT_END_TIME);\n-\n-    $hour_array =array('00','01','02','03','04','05','06','07','08','09','10','11','12',\n-                        '13','14','15','16','17','18','19','21','21','22','23');\n-    $min_array = array('00','05','10','15','20','25','30','35','40','45','50','55');\n-    $tpl->assign_by_ref('hour_array', $hour_array);\n-    $tpl->assign_by_ref('min_array', $min_array);\n-\n-    $categories =   pnModAPIFunc(__POSTCALENDAR__, 'user', 'getCategories');\n-    // create translations of category names if applicable\n-    $sizeAllCat = count($categories);\n-    for ($m = 0; $m < $sizeAllCat; $m++) {\n-        $tempCategory = $categories[$m][\"name\"];\n-        $categories[$m][\"name\"] = xl_appt_category($tempCategory);\n-    }\n-    $tpl->assign_by_ref('categories', $categories);\n-    $limits = pnModAPIFunc(__POSTCALENDAR__, 'user', 'getCategoryLimits');\n-    $tpl->assign_by_ref('limits', $limits);\n-    $tpl->assign('BGCOLOR2', $GLOBALS['style']['BGCOLOR2']);\n-    $tpl->assign(\"catTitle\", _PC_REP_CAT_TITLE_S);\n-    $tpl->assign(\"catid\", \"catid\");\n-    $form_submit = '<input type=hidden name=\"form_action\" value=\"commit\"/>\n-\t\t\t\t   '.$authkey.'<input type=\"submit\" name=\"submit\" value=\"' . xl('go') . '\">';\n-    $tpl->assign('FormSubmit', $form_submit);\n-\n-\n-     $output->Text($tpl->fetch($template_name.'/admin/submit_category_limit.html'));\n-    $output->Text(postcalendar_footer());\n-    return $output->GetOutput();\n-}\n-\n-function postcalendar_admin_categoryLimitsUpdate()\n-{\n-    if (!PC_ACCESS_ADMIN) {\n-        return _POSTCALENDAR_NOAUTH; }\n-\n-    $output = new pnHTML();\n-    $output->SetInputMode(_PNH_VERBATIMINPUT);\n-\n-    list($dbconn) = pnDBGetConn();\n-    $pntable = pnDBGetTables();\n-\n-    list($id,$del,$catId,$startTimeH,$startTimeM,$endTimeH,$endTimeM,$limit,\n-        $newCatId,$newStartTimeH,$newStartTimeM,$newEndTimeH,\n-        $newEndTimeM,$newLimit,\n-        ) = pnVarCleanFromInput(\n-            'id',\n-            'del',\n-            'catid',\n-            'starttimeh',\n-            'starttimem',\n-            'endtimeh',\n-            'endtimem',\n-            'limit',\n-            'newcatid',\n-            'newstarttimeh',\n-            'newstarttimem',\n-            'newendtimeh',\n-            'newendtimem',\n-            'newlimit'\n-        );\n-    $updates = array();\n-    if (isset($id)) {\n-        foreach ($id as $k => $i) {\n-            $found = false;\n-            if (count($del)) {\n-                foreach ($del as $d) {\n-                    if ($i == $d) {\n-                        $found = true;\n-                        break;\n-                    }\n-                }\n-            }\n-            if (!$found) {\n-                $start = date(\"H:i:s\", mktime($startTimeH[$k], $startTimeM[$k], 0));\n-                $end = date(\"H:i:s\", mktime($endTimeH[$k], $endTimeM[$k], 0));\n-                $update_sql = \"UPDATE $pntable[postcalendar_limits]\n-\t\t                             SET pc_catid='\".pnVarPrepForStore($catId[$k]).\"',\n-\t\t                                 pc_starttime='\".pnVarPrepForStore($start).\"',\n-\t\t                                 pc_endtime='\".pnVarPrepForStore($end).\"',\n-\t\t                                 pc_limit='\".pnVarPrepForStore($limit[$k]).\"'\n-\t\t                             WHERE pc_limitid=$i\";\n-                array_push($updates, $update_sql);\n-            }\n-        }\n-    }\n-\n-    $dels = implode(\",\", $del);\n-    $delete = \"DELETE FROM $pntable[postcalendar_limits] WHERE pc_limitid IN ($dels)\";\n-    $e =  $msg = '';\n-    if (!pnModAPIFunc(__POSTCALENDAR__, 'admin', 'updateCategoryLimit', array('updates'=>$updates))) {\n-        $e .= 'UPDATE FAILED';\n-    }\n-    if (isset($dels)) {\n-        if (!pnModAPIFunc(__POSTCALENDAR__, 'admin', 'deleteCategoryLimit', array('delete'=>$delete))) {\n-            $e .= 'DELETE FAILED';\n-        }\n-    }\n-    if (isset($newLimit) && $newLimit > 0) {\n-        $start = date(\"H:i:s\", mktime($newStartTimeH, $newStartTimeM, 0));\n-        $end = date(\"H:i:s\", mktime($newEndTimeH, $newEndTimeM, 0));\n-\n-        if (!pnModAPIFunc(\n-            __POSTCALENDAR__,\n-            'admin',\n-            'addCategoryLimit',\n-            array('catid'=>$newCatId,'starttime'=>$start,'endtime'=>$end,\n-            'limit'=>$newLimit)\n-        )) {\n-            $e .= 'INSERT FAILED';\n-        }\n-    }\n-\n-    if (empty($e)) {\n-        $msg = 'DONE'; }\n-    $output->Text(postcalendar_admin_categoryLimits($msg, $e));\n-    return $output->GetOutput();\n-}\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pnadminapi.php b/interface/main/calendar/modules/PostCalendar/pnadminapi.php\nindex 8735a8843..dab6674a1 100644\n--- a/interface/main/calendar/modules/PostCalendar/pnadminapi.php\n+++ b/interface/main/calendar/modules/PostCalendar/pnadminapi.php\n@@ -34,253 +34,7 @@ $pcDir = pnVarPrepForOS($pcModInfo['directory']);\n require_once(\"modules/$pcDir/common.api.php\");\n unset($pcModInfo, $pcDir);\n \n-function postcalendar_adminapi_buildHourSelect($args)\n-{\n-    extract($args);\n-    $time24hours = pnModGetVar(__POSTCALENDAR__, 'time24hours');\n-    \n-    if (!isset($hour)) {\n-        $hour = $time24hours ? date('H') : date('h');\n-    }\n-    \n-    $output = new pnHTML();\n-    $output->SetInputMode(_PNH_VERBATIMINPUT);\n-    \n-    $options = array();\n-    if ($time24hours) {\n-        for ($i = 0; $i < 24; $i++) {\n-            $sel = false;\n-            if ($i == $hour) {\n-                $sel = true;\n-            }\n-\n-            $options[$i]['id']       = $i;\n-            $options[$i]['selected'] = $sel;\n-            $options[$i]['name']     = $i < 10 ? '0'.$i : $i;\n-        }\n-    } else {\n-        for ($i = 0; $i < 12; $i++) {\n-            $sel = false;\n-            if ($i == $hour) {\n-                $sel = true;\n-            }\n-\n-            $options[$i]['id']       = $i+1;\n-            $options[$i]['selected'] = $sel;\n-            $options[$i]['name']     = $i+1 < 10 ? '0'.$i+1 : $i+1;\n-        }\n-    }\n-    \n-    $output->FormSelectMultiple('pc_hour', $options);\n-    return $output->GetOutput();\n-}\n-function postcalendar_adminapi_getAdminListEvents($args)\n-{\n-    extract($args);\n-    list($dbconn) = pnDBGetConn();\n-    $pntable = pnDBGetTables();\n-    $events_table = $pntable['postcalendar_events'];\n-    \n-    $sql = \"SELECT pc_eid,\n-                   pc_title, \n-                   pc_time \n-            FROM   $events_table\n-            WHERE  pc_eventstatus = $type \";\n-    if ($sort == 'time') {\n-        $sql .= \"ORDER BY pc_time \";\n-    } elseif ($sort == 'title') {\n-        $sql .= \"ORDER BY pc_title \";\n-    }\n-\n-    if ($sdir == 0) {\n-        $sql .= \"DESC \";\n-    } elseif ($sdir == 1) {\n-        $sql .= \"ASC \";\n-    }\n-\n-    $sql .= \"LIMIT  $offset,$offset_increment\";\n-    \n-    return $dbconn->Execute($sql);\n-}\n-\n-function postcalendar_adminapi_buildAdminList($args)\n-{\n-    extract($args);\n-    $output = new pnHTML();\n-    $output->SetInputMode(_PNH_VERBATIMINPUT);\n-    pnThemeLoad(pnUserGetTheme());\n-    // get the theme globals :: is there a better way to do this?\n-    global $bgcolor1, $bgcolor2, $bgcolor3, $bgcolor4, $bgcolor5;\n-    global $textcolor1, $textcolor2;\n-    \n-    $formUrl = pnModUrl(__POSTCALENDAR__, 'admin', 'adminevents');\n-    $output->FormStart($formUrl);\n-    $output->Text('<table border=\"0\" cellpadding=\"1\" cellspacing=\"0\" width=\"100%\" bgcolor=\"'.$bgcolor2.'\"><tr><td>');\n-    $output->Text('<table border=\"0\" cellpadding=\"5\" cellspacing=\"0\" width=\"100%\" bgcolor=\"'.$bgcolor1.'\"><tr><td>');\n-        $output->Text('<center><font size=\"4\"><b>'.$title.'</b></font></center>');\n-    $output->Text('</td></tr></table>');\n-    $output->Text('</td></tr></table>');\n-    \n-    $output->Linebreak();\n-    \n-    $output->Text('<table border=\"0\" cellpadding=\"1\" cellspacing=\"0\" width=\"100%\" bgcolor=\"'.$bgcolor2.'\"><tr><td>');\n-    $output->Text('<table border=\"0\" cellpadding=\"5\" cellspacing=\"0\" width=\"100%\" bgcolor=\"'.$bgcolor1.'\">');\n-    if (!$result || $result->EOF) {\n-        $output->Text('<tr><td width=\"100%\" bgcolor=\"'.$bgcolor1.'\" align=\"center\"><b>'._PC_NO_EVENTS.'</b></td></tr>');\n-    } else {\n-        $output->Text('<tr><td bgcolor=\"'.$bgcolor1.'\" align=\"center\"><b>'._PC_EVENTS.'</b></td></tr>');\n-        $output->Text('<table border=\"0\" cellpadding=\"2\" cellspacing=\"0\" width=\"100%\" bgcolor=\"'.$bgcolor1.'\">');\n-            \n-        // build sorting urls\n-        if (!isset($sdir)) {\n-            $sdir = 1;\n-        } else {\n-            $sdir = $sdir ? 0 : 1;\n-        }\n-            \n-            $title_sort_url = pnModUrl(__POSTCALENDAR__, 'admin', $function, array('offset'=>$offset,'sort'=>'title','sdir'=>$sdir));\n-            $time_sort_url = pnModUrl(__POSTCALENDAR__, 'admin', $function, array('offset'=>$offset,'sort'=>'time','sdir'=>$sdir));\n-            $output->Text('<tr><td>select</td><td><a href=\"'.$title_sort_url.'\">title</a></td><td><a href=\"'.$time_sort_url.'\">timestamp</a><td></tr>');\n-        // output the queued events\n-            $count=0;\n-        for (; !$result->EOF; $result->MoveNext()) {\n-            list($eid,$title,$timestamp) = $result->fields;\n-            $output->Text('<tr>');\n-            $output->Text('<td align=\"center\" valign=\"top\">');\n-                $output->FormCheckbox('pc_event_id[]', false, $eid);\n-            $output->Text('</td>');\n-            $output->Text('<td  align=\"left\" valign=\"top\" width=\"100%\">');\n-                $output->URL(\n-                    pnModURL(__POSTCALENDAR__, 'admin', 'edit', array('pc_event_id'=>$eid)),\n-                    pnVarPrepHTMLDisplay(postcalendar_removeScriptTags($title))\n-                );\n-                $output->Text('</td>');\n-                $output->Text('<td  align=\"left\" valign=\"top\" nowrap>');\n-                $output->Text($timestamp);\n-                $output->Text('</td>');\n-            $output->Text('</tr>');\n-                \n-            $count++;\n-        }\n-\n-            $output->Text('</table>');\n-    }\n-\n-    $output->Text('</td></tr></table>');\n-    if ($result->NumRows()) {\n-        $output->Linebreak();\n-    \n-    // action to take?\n-        $output->Text('<table border=\"0\" cellpadding=\"1\" cellspacing=\"0\" width=\"100%\" bgcolor=\"'.$bgcolor2.'\"><tr><td>');\n-        $output->Text('<table border=\"0\" cellpadding=\"5\" cellspacing=\"0\" width=\"100%\" bgcolor=\"'.$bgcolor1.'\"><tr>');\n-        $output->Text('<td align=\"left\" valign=\"middle\">');\n-            \n-            $seldata[0]['id'] = _ADMIN_ACTION_VIEW;\n-            $seldata[0]['selected'] = 1;\n-            $seldata[0]['name'] = _PC_ADMIN_ACTION_VIEW;\n-            \n-            $seldata[1]['id'] = _ADMIN_ACTION_APPROVE;\n-            $seldata[1]['selected'] = 0;\n-            $seldata[1]['name'] = _PC_ADMIN_ACTION_APPROVE;\n-            \n-            $seldata[2]['id'] = _ADMIN_ACTION_HIDE;\n-            $seldata[2]['selected'] = 0;\n-            $seldata[2]['name'] = _PC_ADMIN_ACTION_HIDE;\n-            \n-            $seldata[3]['id'] = _ADMIN_ACTION_DELETE;\n-            $seldata[3]['selected'] = 0;\n-            $seldata[3]['name'] = _PC_ADMIN_ACTION_DELETE;\n-            \n-            $output->FormSelectMultiple('action', $seldata);\n-            $output->FormHidden('thelist', $function);\n-            $output->FormSubmit(_PC_PERFORM_ACTION);\n-        $output->Text('</td>');\n-        $output->Text('</tr></table>');\n-        $output->Text('</td></tr></table>');\n-        $output->Linebreak();\n-    \n-    // start previous next links\n-        $output->Text('<table border=\"0\" cellpadding=\"1\" cellspacing=\"0\" width=\"100%\" bgcolor=\"'.$bgcolor2.'\"><tr><td>');\n-        $output->Text('<table border=\"0\" cellpadding=\"5\" cellspacing=\"0\" width=\"100%\" bgcolor=\"'.$bgcolor1.'\"><tr>');\n-        if ($offset > 1) {\n-            $output->Text('<td align=\"left\">');\n-            $next_link = pnModUrl(__POSTCALENDAR__, 'admin', $function, array('offset'=>$offset-$offset_increment,'sort'=>$sort,'sdir'=>$sdir));\n-            $output->Text('<a href=\"'.$next_link.'\"><< '._PC_PREV.' '.$offset_increment.'</a>');\n-            $output->Text('</td>');\n-        } else {\n-            $output->Text('<td align=\"left\"><< '._PC_PREV.'</td>');\n-        }\n-\n-        if ($result->NumRows() >= $offset_increment) {\n-            $output->Text('<td align=\"right\">');\n-            $next_link = pnModUrl(__POSTCALENDAR__, 'admin', $function, array('offset'=>$offset+$offset_increment,'sort'=>$sort,'sdir'=>$sdir));\n-            $output->Text('<a href=\"'.$next_link.'\">'._PC_NEXT.' '.$offset_increment.' >></a>');\n-            $output->Text('</td>');\n-        } else {\n-            $output->Text('<td align=\"right\">'._PC_NEXT.' >></td>');\n-        }\n-\n-        $output->Text('</tr></table>');\n-    }\n-\n-    $output->Text('</td></tr></table>');\n-    // end previous next links\n-    $output->FormEnd();\n-    \n-    return $output->GetOutput();\n-}\n-\n-function postcalendar_adminapi_buildMinSelect($args)\n-{\n-    extract($args);\n-    \n-    if (!isset($min)) {\n-        $min = date('i');\n-    }\n-    \n-    $output = new pnHTML();\n-    $output->SetInputMode(_PNH_VERBATIMINPUT);\n-    \n-    $options = array();\n-    for ($i = 0; $i <= 45; $i+5) {\n-        $options[$i]['id']       = $i;\n-        $options[$i]['selected'] = false;\n-        $options[$i]['name']     = $i < 10 ? '0'.$i+1 : $i+1;\n-    }\n-    \n-    $output->FormSelectMultiple('pc_min', $options);\n-    return $output->GetOutput();\n-}\n-\n-function postcalendar_adminapi_buildAMPMSelect($args)\n-{\n-    extract($args);\n-    \n-    $output = new pnHTML();\n-    $output->SetInputMode(_PNH_VERBATIMINPUT);\n-    \n-    $options = array();\n-    if (pnModGetVar(__POSTCALENDAR__, 'time24hours')) {\n-        return false;\n-    } else {\n-        $options[0]['id']        = 'AM';\n-        $options[0]['selected']  = '';\n-        $options[0]['name']      = 'AM';\n-        $options[1]['id']        = 'PM';\n-        $options[1]['selected']  = '';\n-        $options[1]['name']      = 'PM';\n-    }\n-    \n-    $output->FormSelectMultiple('pc_ampm', $options);\n-    return $output->GetOutput();\n-}\n \n-function postcalendar_adminapi_waiting($args)\n-{\n-    $output = new pnHTML();\n-    $output = \"waiting<br />\";\n-    return $output->GetOutput();\n-}\n \n function postcalendar_adminapi_updateCategories($args)\n {\n@@ -323,7 +77,7 @@ function postcalendar_adminapi_addCategories($args)\n \n     list($dbconn) = pnDBGetConn();\n     $pntable = pnDBGetTables();\n-    \n+\n     $name = pnVarPrepForStore($name);\n     $constantid = trim(pnVarPrepForStore($constantid));\n     $desc = trim(pnVarPrepForStore($desc));\n@@ -341,7 +95,7 @@ function postcalendar_adminapi_addCategories($args)\n     $active = pnVarPrepForStore($active);\n     $sequence = pnVarPrepForStore($sequence);\n     $aco = pnVarPrepForStore($aco);\n-    \n+\n     $sql = \"INSERT INTO $pntable[postcalendar_categories] \n                                 (pc_catid,pc_catname,pc_constant_id,pc_catdesc,pc_catcolor,\n                                 pc_recurrtype,pc_recurrspec,pc_recurrfreq,pc_duration,\n@@ -351,72 +105,9 @@ function postcalendar_adminapi_addCategories($args)\n                                 '$recurrtype','$recurrspec','$recurrfreq',\n                                 '$duration','$limitid','$end_date_flag','$end_date_type',\n                                 '$end_date_freq','$end_all_day','$value_cat_type','$active','$sequence','$aco')\";\n-                                \n-                                \n-    //print \"sql is $sql \\n\";\n-    $result = $dbconn->Execute($sql);\n-    if ($result === false) {\n-        print $dbconn->ErrorMsg();\n-        return false;\n-    }\n-\n-    return true;\n-}\n-\n-function postcalendar_adminapi_updateCategoryLimit($args)\n-{\n-    extract($args);\n-    if (!isset($updates)) {\n-        return false;\n-    }\n-\n-    list($dbconn) = pnDBGetConn();\n-    foreach ($updates as $update) {\n-        $result = $dbconn->Execute($update);\n-        if ($result === false) {\n-            return false;\n-        }\n-    }\n \n-    return true;\n-}\n-\n-function postcalendar_adminapi_deleteCategoryLimit($args)\n-{\n-    extract($args);\n-    if (!isset($delete)) {\n-        return false;\n-    }\n-\n-    list($dbconn) = pnDBGetConn();\n-    $result = $dbconn->Execute($delete);\n-    if ($result === false) {\n-        return false;\n-    }\n-\n-    return true;\n-}\n-function postcalendar_adminapi_addCategoryLimit($args)\n-{\n-    extract($args);\n-    if (!isset($catid)) {\n-        return false;\n-    }\n \n-    list($dbconn) = pnDBGetConn();\n-    $pntable = pnDBGetTables();\n-    \n-    $catid = pnVarPrepForStore($catid);\n-    $starttime = pnVarPrepForStore($starttime);\n-    $endtime = pnVarPrepForStore($endtime);\n-    $limit = pnVarPrepForStore($limit);\n-    \n-    $sql = \"INSERT INTO $pntable[postcalendar_limits] \n-                                (pc_limitid,pc_catid,pc_starttime,pc_endtime,\n-                                pc_limit)\n-                                VALUES ('','$catid','$starttime',\n-                                '$endtime','$limit')\";\n-    \n+    //print \"sql is $sql \\n\";\n     $result = $dbconn->Execute($sql);\n     if ($result === false) {\n         print $dbconn->ErrorMsg();\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pnblocks/calendar.php b/interface/main/calendar/modules/PostCalendar/pnblocks/calendar.php\ndeleted file mode 100644\nindex ceebc8e2d..000000000\n--- a/interface/main/calendar/modules/PostCalendar/pnblocks/calendar.php\n+++ /dev/null\n@@ -1,409 +0,0 @@\n-<?php\n-@define('__POSTCALENDAR__', 'PostCalendar');\n-/**\n- *  $Id$\n- *\n- *  PostCalendar::PostNuke Events Calendar Module\n- *  Copyright (C) 2002  The PostCalendar Team\n- *  http://postcalendar.tv\n- *\n- *  This program is free software; you can redistribute it and/or modify\n- *  it under the terms of the GNU General Public License as published by\n- *  the Free Software Foundation; either version 2 of the License, or\n- *  (at your option) any later version.\n- *\n- *  This program is distributed in the hope that it will be useful,\n- *  but WITHOUT ANY WARRANTY; without even the implied warranty of\n- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n- *  GNU General Public License for more details.\n- *\n- *  You should have received a copy of the GNU General Public License\n- *  along with this program; if not, write to the Free Software\n- *  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n- *\n- *  To read the license please read the docs/license.txt or visit\n- *  http://www.gnu.org/copyleft/gpl.html\n- *\n- */\n-// load the user api functions\n-pnModAPILoad(__POSTCALENDAR__, 'user');\n-\n-/**\n- * initialise block\n- */\n-function postcalendar_calendarblock_init()\n-{\n-    // Security\n-    pnSecAddSchema('PostCalendar:calendarblock:', 'Block title::');\n-}\n-\n-/**\n- * get information on block\n- */\n-function postcalendar_calendarblock_info()\n-{\n-    // Values\n-    return array('text_type' => __POSTCALENDAR__,\n-                 'module' => __POSTCALENDAR__,\n-                 'text_type_long' => 'Calendar Block',\n-                 'allow_multiple' => true,\n-                 'form_content' => false,\n-                 'form_refresh' => false,\n-                 'show_preview' => true);\n-}\n-\n-/**\n- * display block\n- */\n-function postcalendar_calendarblock_display($blockinfo)\n-{\n-    // You supposed to be here?\n-    if (!pnSecAuthAction(0, 'PostCalendar:calendarblock:', \"$blockinfo[title]::\", ACCESS_OVERVIEW)) {\n-        return false;\n-    }\n-    \n-    // find out what view we're using\n-    $template_view = pnVarCleanFromInput('tplview');\n-    if (!isset($template_view)) {\n-        $template_view ='default';\n-    }\n-    \n-    // find out what template we're using\n-    $template_name = _SETTING_TEMPLATE;\n-    if (!isset($template_name) || empty($template_name)) {\n-        $template_name ='default';\n-    }\n-    \n-    // What is today's correct date\n-    $Date =& postcalendar_getDate();\n-    \n-    // Get variables from content block\n-    $vars = unserialize($blockinfo['content']);\n-    $showcalendar   = $vars['pcbshowcalendar'];\n-    $showevents     = $vars['pcbeventoverview'];\n-    $eventslimit    = $vars['pcbeventslimit'];\n-    $nextevents     = $vars['pcbnextevents'];\n-    $pcbshowsslinks = $vars['pcbshowsslinks'];\n-    $pcbeventsrange = $vars['pcbeventsrange'];\n-    \n-    // Let's setup the info to build this sucka!\n-    $the_year   = substr($Date, 0, 4);\n-    $the_month  = substr($Date, 4, 2);\n-    $the_day    = substr($Date, 6, 2);\n-    $uid = pnUserGetVar('uid');\n-    \n-    $cacheid1 = $cacheid2 = $cacheid3 = '';\n-    $theme = pnUserGetTheme();\n-    \n-    pnThemeLoad($theme);\n-    global $bgcolor1, $bgcolor2, $bgcolor3, $bgcolor4, $bgcolor5;\n-    global $textcolor1, $textcolor2;\n-    \n-    // 20021125 - rraymond :: we have to do this to make it work with envolution\n-    $pcModInfo = pnModGetInfo(pnModGetIDFromName(__POSTCALENDAR__));\n-    $pcDir = pnVarPrepForOS($pcModInfo['directory']);\n-    require_once(\"modules/$pcDir/pnincludes/Smarty/Config_File.class.php\");\n-    unset($pcModInfo);\n-    \n-    // set up Smarty\n-    $tpl =& new pcSmarty();\n-    \n-    // setup the Smarty cache id\n-    $templates_cached = true;\n-    if ($showcalendar) {\n-        $cacheid1 = md5($Date.'M'.$template_view.$template_name.$showcalendar.$showevents.$nextevents.$uid.$theme);\n-        if (!$tpl->is_cached($template_name.'/views/calendarblock/month_view.html', $cacheid1)) {\n-            $templates_cached = false;\n-        }\n-    }\n-\n-    if ($showevents) {\n-        $cacheid2 = md5($Date.'T'.$template_view.$template_name.$showcalendar.$showevents.$nextevents.$uid.$theme);\n-        if (!$tpl->is_cached($template_name.'/views/calendarblock/todays_events.html', $cacheid2)) {\n-            $templates_cached = false;\n-        }\n-    }\n-\n-    if ($nextevents) {\n-        $cacheid3 = md5($Date.'U'.$template_view.$template_name.$showcalendar.$showevents.$nextevents.$uid.$theme);\n-        if (!$tpl->is_cached($template_name.'/views/calendarblock/upcoming_events.html', $cacheid3)) {\n-            $templates_cached = false;\n-        }\n-    }\n-    \n-    // start the output container\n-    $output = pnModAPIFunc(__POSTCALENDAR__, 'user', 'pageSetup');\n-    \n-    // if one of the templates is not cached, we need to run the following\n-    if (!$templates_cached) {\n-        // set up the next and previous months to move to\n-        $prev_month = Date_Calc::beginOfPrevMonth(1, $the_month, $the_year, '%Y%m%d');\n-        $next_month = Date_Calc::beginOfNextMonth(1, $the_month, $the_year, '%Y%m%d');\n-        $last_day   = Date_Calc::daysInMonth($the_month, $the_year);\n-        $pc_prev = pnModURL(__POSTCALENDAR__, 'user', 'view', array('tplview'=>$template_view,'viewtype'=>'month','Date'=>$prev_month));\n-        $pc_next = pnModURL(__POSTCALENDAR__, 'user', 'view', array('tplview'=>$template_view,'viewtype'=>'month','Date'=>$next_month));\n-        $pc_month_name = pnModAPIFunc(__POSTCALENDAR__, 'user', 'getmonthname', array('Date'=>mktime(0, 0, 0, $the_month, $the_day, $the_year)));\n-        $month_link_url = pnModURL(__POSTCALENDAR__, 'user', 'view', array('tplview'=>$template_view,'viewtype'=>'month','Date'=>date('Ymd', mktime(0, 0, 0, $the_month, 1, $the_year))));\n-        $month_link_text = $pc_month_name.' '.$the_year;\n-        //*******************************************************************\n-        //  Here we get the events for the current month view\n-        //*******************************************************************\n-        $day_of_week = 1;\n-        $pc_month_names = array(_CALJAN,_CALFEB,_CALMAR,_CALAPR,_CALMAY,_CALJUN,\n-                                _CALJUL,_CALAUG,_CALSEP,_CALOCT,_CALNOV,_CALDEC);\n-\n-        $pc_short_day_names = array(_CALSUNDAYSHORT, _CALMONDAYSHORT,\n-                                    _CALTUESDAYSHORT, _CALWEDNESDAYSHORT,\n-                                    _CALTHURSDAYSHORT, _CALFRIDAYSHORT,\n-                                    _CALSATURDAYSHORT);\n-\n-        $pc_long_day_names = array(_CALSUNDAY, _CALMONDAY,\n-                                   _CALTUESDAY, _CALWEDNESDAY,\n-                                   _CALTHURSDAY, _CALFRIDAY,\n-                                   _CALSATURDAY);\n-        switch (_SETTING_FIRST_DAY_WEEK) {\n-            case _IS_MONDAY:\n-                $pc_array_pos = 1;\n-                $first_day  = date('w', mktime(0, 0, 0, $the_month, 0, $the_year));\n-                $end_dow = date('w', mktime(0, 0, 0, $the_month, $last_day, $the_year));\n-                if ($end_dow != 0) {\n-                    $the_last_day = $last_day+(7-$end_dow);\n-                } else {\n-                    $the_last_day = $last_day;\n-                }\n-                break;\n-            case _IS_SATURDAY:\n-                $pc_array_pos = 6;\n-                $first_day  = date('w', mktime(0, 0, 0, $the_month, 2, $the_year));\n-                $end_dow = date('w', mktime(0, 0, 0, $the_month, $last_day, $the_year));\n-                if ($end_dow == 6) {\n-                    $the_last_day = $last_day+6;\n-                } elseif ($end_dow != 5) {\n-                    $the_last_day = $last_day+(5-$end_dow);\n-                } else {\n-                    $the_last_day = $last_day;\n-                }\n-                break;\n-            case _IS_SUNDAY:\n-            default:\n-                $pc_array_pos = 0;\n-                $first_day  = date('w', mktime(0, 0, 0, $the_month, 1, $the_year));\n-                $end_dow = date('w', mktime(0, 0, 0, $the_month, $last_day, $the_year));\n-                if ($end_dow != 6) {\n-                    $the_last_day = $last_day+(6-$end_dow);\n-                } else {\n-                    $the_last_day = $last_day;\n-                }\n-                break;\n-        }\n-\n-        $month_view_start = date('Y-m-d', mktime(0, 0, 0, $the_month, 1, $the_year));\n-        $month_view_end   = date('Y-m-t', mktime(0, 0, 0, $the_month, 1, $the_year));\n-        $today_date       = postcalendar_today('%Y-%m-%d');\n-        $starting_date    = date('m/d/Y', mktime(0, 0, 0, $the_month, 1-$first_day, $the_year));\n-        $ending_date      = date('m/t/Y', mktime(0, 0, 0, $the_month+$pcbeventsrange, 1, $the_year));\n-\n-        $eventsByDate =& pnModAPIFunc(__POSTCALENDAR__, 'user', 'pcGetEvents', array('start'=>$starting_date,'end'=>$ending_date));\n-        $calendarView = Date_Calc::getCalendarMonth($the_month, $the_year, '%Y-%m-%d');\n-\n-        $sdaynames = array();\n-        $numDays = count($pc_short_day_names);\n-        for ($i=0; $i < $numDays; $i++) {\n-            if ($pc_array_pos >= $numDays) {\n-                $pc_array_pos = 0;\n-            }\n-\n-            array_push($sdaynames, $pc_short_day_names[$pc_array_pos]);\n-            $pc_array_pos++;\n-        }\n-\n-        $daynames = array();\n-        $numDays = count($pc_long_day_names);\n-        for ($i=0; $i < $numDays; $i++) {\n-            if ($pc_array_pos >= $numDays) {\n-                $pc_array_pos = 0;\n-            }\n-\n-            array_push($daynames, $pc_long_day_names[$pc_array_pos]);\n-            $pc_array_pos++;\n-        }\n-\n-        $dates = array();\n-        while ($starting_date <= $ending_date) {\n-            array_push($dates, $starting_date);\n-            list($m,$d,$y) = explode('/', $starting_date);\n-            $starting_date = Date_Calc::nextDay($d, $m, $y, '%m/%d/%Y');\n-        }\n-\n-        $categories =& pnModAPIFunc(__POSTCALENDAR__, 'user', 'getCategories');\n-        if (isset($calendarView)) {\n-            $tpl->assign_by_ref('CAL_FORMAT', $calendarView);\n-        }\n-\n-        $tpl->assign_by_ref('A_MONTH_NAMES', $pc_month_names);\n-        $tpl->assign_by_ref('A_LONG_DAY_NAMES', $pc_long_day_names);\n-        $tpl->assign_by_ref('A_SHORT_DAY_NAMES', $pc_short_day_names);\n-        $tpl->assign_by_ref('S_LONG_DAY_NAMES', $daynames);\n-        $tpl->assign_by_ref('S_SHORT_DAY_NAMES', $sdaynames);\n-        $tpl->assign_by_ref('A_EVENTS', $eventsByDate);\n-        $tpl->assign_by_ref('A_CATEGORY', $categories);\n-        $tpl->assign_by_ref('PREV_MONTH_URL', $pc_prev);\n-        $tpl->assign_by_ref('NEXT_MONTH_URL', $pc_next);\n-        $tpl->assign_by_ref('MONTH_START_DATE', $month_view_start);\n-        $tpl->assign_by_ref('MONTH_END_DATE', $month_view_end);\n-        $tpl->assign_by_ref('TODAY_DATE', $today_date);\n-        $tpl->assign_by_ref('DATE', $Date);\n-        $tpl->assign_by_ref('DISPLAY_LIMIT', $eventslimit);\n-        $tpl->assign('TODAYS_EVENTS_TITLE', _PC_TODAYS_EVENTS);\n-        $tpl->assign('UPCOMING_EVENTS_TITLE', _PC_UPCOMING_EVENTS);\n-        $tpl->assign('NO_EVENTS', _PC_BLOCK_NO_EVENTS);\n-    }\n-    \n-    if ($showcalendar) {\n-        // we need to create a unique ID for caching purposes\n-        $output .= $tpl->fetch($template_name.'/views/calendarblock/month_view.html', $cacheid1);\n-    }\n-    \n-    if ($showevents) {\n-        if ($showcalendar) {\n-            $tpl->assign('SHOW_TITLE', 1);\n-        } else {\n-            $tpl->assign('SHOW_TITLE', 0);\n-        }\n-\n-        // we need to create a unique ID for caching purposes\n-        $output .= $tpl->fetch($template_name.'/views/calendarblock/todays_events.html', $cacheid2);\n-    }\n-    \n-    if ($nextevents) {\n-        if ($showcalendar || $showevents) {\n-            $tpl->assign('SHOW_TITLE', 1);\n-        } else {\n-            $tpl->assign('SHOW_TITLE', 0);\n-        }\n-\n-        // we need to create a unique ID for caching purposes\n-        $output .= $tpl->fetch($template_name.'/views/calendarblock/upcoming_events.html', $cacheid3);\n-    }\n-\n-    if ($pcbshowsslinks) {\n-        $output .= '<br /><br />';\n-        $submit_event_url = pnModURL(__POSTCALENDAR__, 'user', 'submit');\n-        $search_event_url = pnModURL(__POSTCALENDAR__, 'user', 'search');\n-        $output .= '<center>';\n-        if (PC_ACCESS_ADD) {\n-            $output .= '[ <a href=\"'.$submit_event_url.'\">'._PC_SUBMIT_EVENT.'</a> ] ';\n-        }\n-\n-        $output .= '[ <a href=\"'.$search_event_url.'\">'._PC_SEARCH_EVENT.'</a> ]';\n-        $output .= '</center>';\n-    }\n-\n-    // Populate block info and pass to theme\n-\n-    $blockinfo['content'] = $output;\n-    return themesideblock($blockinfo);\n-}\n-\n-\n-/**\n- * modify block settings ..\n- */\n-function postcalendar_calendarblock_modify($blockinfo)\n-{\n-    if (!pnSecAuthAction(0, 'PostCalendar:calendarblock:', \"$blockinfo[title]::\", ACCESS_ADMIN)) {\n-        return false;\n-    }\n-    \n-    // Create output object\n-    $output =& new pnHTML();\n-    // Get variables from content block\n-    $vars = unserialize($blockinfo['content']);\n-    $i=0;\n-    $output->SetOutputMode(_PNH_RETURNOUTPUT);\n-    \n-    $settings[$i][]     = $output->Text(_PC_BLOCK_SHOW_CALENDAR);\n-    $settings[$i++][]   = $output->FormCheckBox('pcbshowcalendar', @$vars['pcbshowcalendar']);\n-    \n-    $settings[$i][]     = $output->Text(_PC_BLOCK_EVENT_OVERVIEW);\n-    $settings[$i++][]   = $output->FormCheckBox('pcbeventoverview', @$vars['pcbeventoverview']);\n-    \n-    $settings[$i][]     = $output->Text(_PC_BLOCK_UPCOMING_EVENTS);\n-    $settings[$i++][]   = $output->FormCheckBox('pcbnextevents', @$vars['pcbnextevents']);\n-    \n-    $settings[$i][]     = $output->Text(_PC_SHOW_SS_LINKS);\n-    $settings[$i++][]   = $output->FormCheckBox('pcbshowsslinks', @$vars['pcbshowsslinks']);\n-    \n-    $settings[$i][]     = $output->Text(_PC_BLOCK_EVENTS_DISPLAY_LIMIT);\n-    $settings[$i++][]   = $output->FormText('pcbeventslimit', @$vars['pcbeventslimit'], 5);\n-    \n-    $settings[$i][]     = $output->Text(_PC_BLOCK_EVENTS_DISPLAY_RANGE);\n-    $settings[$i++][]   = $output->FormText('pcbeventsrange', @$vars['pcbeventsrange'], 5);\n-        \n-    $output->SetOutputMode(_PNH_KEEPOUTPUT);\n-\n-    // Add row\n-    $output->SetInputMode(_PNH_VERBATIMINPUT);\n-    for ($i=0; $i<count($settings); $i++) {\n-        $output->TableAddRow($settings[$i], 'left');\n-    }\n-\n-    $output->SetInputMode(_PNH_PARSEINPUT);\n-\n-    // Return output\n-    return $output->GetOutput();\n-}\n-\n-/**\n- * update block settings\n- */\n-function postcalendar_calendarblock_update($blockinfo)\n-{\n-    // Security check\n-    if (!pnSecAuthAction(0, 'PostCalendar:calendarblock:', \"$blockinfo[title]::\", ACCESS_ADMIN)) {\n-        return false;\n-    }\n-    \n-    list($vars['pcbshowcalendar'],\n-         $vars['pcbeventslimit'],\n-         $vars['pcbeventoverview'],\n-         $vars['pcbnextevents'],\n-         $vars['pcbeventsrange'],\n-         $vars['pcbshowsslinks']) = pnVarCleanFromInput(\n-             'pcbshowcalendar',\n-             'pcbeventslimit',\n-             'pcbeventoverview',\n-             'pcbnextevents',\n-             'pcbeventsrange',\n-             'pcbshowsslinks'\n-         );\n-    // set up defaults if not defined\n-    if (!isset($vars['pcbshowcalendar'])) {\n-        $vars['pcbshowcalendar']  = 0;\n-    }\n-\n-    if (!isset($vars['pcbeventslimit'])) {\n-        $vars['pcbeventslimit']   = 5;\n-    }\n-\n-    if (!isset($vars['pcbeventoverview'])) {\n-        $vars['pcbeventoverview'] = 0;\n-    }\n-\n-    if (!isset($vars['pcbnextevents'])) {\n-        $vars['pcbnextevents']    = 0;\n-    }\n-\n-    if (!isset($vars['pcbeventsrange'])) {\n-        $vars['pcbeventsrange']   = 6;\n-    }\n-\n-    if (!isset($vars['pcbshowsslinks'])) {\n-        $vars['pcbshowsslinks']   = 0;\n-    }\n-    \n-    $tpl =& new pcSmarty();\n-    $tpl->clear_all_cache();\n-    $blockinfo['content'] = serialize($vars);\n-    return $blockinfo;\n-}\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pnblocks/index.htm b/interface/main/calendar/modules/PostCalendar/pnblocks/index.htm\ndeleted file mode 100644\nindex e69de29bb..000000000\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pnimages/admin.gif b/interface/main/calendar/modules/PostCalendar/pnimages/admin.gif\ndeleted file mode 100644\nindex ed3e04fb0..000000000\nBinary files a/interface/main/calendar/modules/PostCalendar/pnimages/admin.gif and /dev/null differ\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pnimages/index.htm b/interface/main/calendar/modules/PostCalendar/pnimages/index.htm\ndeleted file mode 100644\nindex e69de29bb..000000000\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pnimages/new.gif b/interface/main/calendar/modules/PostCalendar/pnimages/new.gif\ndeleted file mode 100644\nindex 687f6aaf7..000000000\nBinary files a/interface/main/calendar/modules/PostCalendar/pnimages/new.gif and /dev/null differ\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pnimages/overlib.gif b/interface/main/calendar/modules/PostCalendar/pnimages/overlib.gif\ndeleted file mode 100644\nindex 83d864008..000000000\nBinary files a/interface/main/calendar/modules/PostCalendar/pnimages/overlib.gif and /dev/null differ\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pnimages/poweredbypc.gif b/interface/main/calendar/modules/PostCalendar/pnimages/poweredbypc.gif\ndeleted file mode 100644\nindex e12d3fb26..000000000\nBinary files a/interface/main/calendar/modules/PostCalendar/pnimages/poweredbypc.gif and /dev/null differ\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pnincludes/Benchmark/Timer.php b/interface/main/calendar/modules/PostCalendar/pnincludes/Benchmark/Timer.php\ndeleted file mode 100644\nindex e3bb70ba7..000000000\n--- a/interface/main/calendar/modules/PostCalendar/pnincludes/Benchmark/Timer.php\n+++ /dev/null\n@@ -1,147 +0,0 @@\n-<?php\n-//\n-// +----------------------------------------------------------------------+\n-// | PHP version 4.0                                                      |\n-// +----------------------------------------------------------------------+\n-// | Copyright (c) 1997-2001 The PHP Group                                |\n-// +----------------------------------------------------------------------+\n-// | This source file is subject to version 2.02 of the PHP license,      |\n-// | that is bundled with this package in the file LICENSE, and is        |\n-// | available at through the world-wide-web at                           |\n-// | http://www.php.net/license/2_02.txt.                                 |\n-// | If you did not receive a copy of the PHP license and are unable to   |\n-// | obtain it through the world-wide-web, please send a note to          |\n-// | license@php.net so we can mail you a copy immediately.               |\n-// +----------------------------------------------------------------------+\n-// | Authors: Sebastian Bergmann <sb@sebastian-bergmann.de>               |\n-// +----------------------------------------------------------------------+\n-//\n-// $Id$\n-//\n-\n-/**\n- * Benchmark::Timer\n- *\n- * Purpose:\n- *\n- *     Timing Script Execution, Generating Profiling Information\n- *\n- * Example:\n- *\n- *     $timer = new Benchmark_Timer;\n- *\n- *     $timer->start();\n- *     $timer->setMarker('Marker 1');\n- *     $timer->stop();\n- *\n- *     $profiling = $timer->getProfiling();\n- *\n- * @author   Sebastian Bergmann <sb@sebastian-bergmann.de>\n- * @version  $Revision$\n- * @access   public\n- */\n-\n-class Benchmark_Timer\n-{\n-    /**\n-     * Contains the markers\n-     *\n-     * @var    array\n-     * @access public\n-     */\n-    var $markers = array();\n-\n-    /**\n-     * Set \"Start\" marker.\n-     *\n-     * @see    setMarker(), stop()\n-     * @access public\n-     */\n-    function start()\n-    {\n-        $this->setMarker('Start');\n-    }\n-\n-    /**\n-     * Set \"Stop\" marker.\n-     *\n-     * @see    setMarker(), start()\n-     * @access public\n-     */\n-    function stop()\n-    {\n-        $this->setMarker('Stop');\n-    }\n-\n-    /**\n-     * Set marker.\n-     *\n-     * @param  string  name of the marker to be set\n-     * @see    start(), stop()\n-     * @access public\n-     */\n-    function setMarker($name)\n-    {\n-        $microtime = explode(' ', microtime());\n-        $this->markers[$name] = $microtime[1] . substr($microtime[0], 1);\n-    }\n-\n-    /**\n-     * Returns the time elapsed betweens two markers.\n-     *\n-     * @param  string  $start        start marker, defaults to \"Start\"\n-     * @param  string  $end          end marker, defaults to \"Stop\"\n-     * @return double  $time_elapsed time elapsed between $start and $end\n-     * @access public\n-     */\n-    function timeElapsed($start = 'Start', $end = 'Stop')\n-    {\n-        if (extension_loaded('bcmath')) {\n-            return bcsub($this->markers[$end], $this->markers[$start], 6);\n-        } else {\n-            return $this->markers[$end] - $this->markers[$start];\n-        }\n-    }\n-\n-    /**\n-     * Returns profiling information.\n-     *\n-     * $profiling[x]['name']  = name of marker x\n-     * $profiling[x]['time']  = time index of marker x\n-     * $profiling[x]['diff']  = execution time from marker x-1 to this marker x\n-     * $profiling[x]['total'] = total execution time up to marker x\n-     *\n-     * @return array $profiling\n-     * @access public\n-     */\n-    function getProfiling()\n-    {\n-        $i = 0;\n-        $total = 0;\n-        $result = array();\n-        \n-        foreach ($this->markers as $marker => $time) {\n-            if ($marker == 'Start') {\n-                $diff = '-';\n-            } else {\n-                if (extension_loaded('bcmath')) {\n-                    $diff  = bcsub($time, $temp, 6);\n-                    $total = bcadd($total, $diff, 6);\n-                } else {\n-                    $diff  = $time - $temp;\n-                    $total = $total + $diff;\n-                }\n-            }\n-            \n-            $result[$i]['name']  = $marker;\n-            $result[$i]['time']  = $time;\n-            $result[$i]['diff']  = $diff;\n-            $result[$i]['total'] = $total;\n-            \n-            $temp = $time;\n-            $i++;\n-        }\n-\n-        return $result;\n-    }\n-}\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pnincludes/overlib.js b/interface/main/calendar/modules/PostCalendar/pnincludes/overlib.js\ndeleted file mode 100644\nindex 98a025f84..000000000\n--- a/interface/main/calendar/modules/PostCalendar/pnincludes/overlib.js\n+++ /dev/null\n@@ -1,1274 +0,0 @@\n-//\\//////////////////////////////////////////////////////////////////////////////////\n-//\\  overLIB 3.51  --  This notice must remain untouched at all times.\n-//\\  Copyright Erik Bosrup 1998-2002. All rights reserved.\n-//\\\n-//\\  By Erik Bosrup (erik@bosrup.com).  Last modified 2002-11-01.\n-//\\  Portions by Dan Steinman (dansteinman.com). Additions by other people are\n-//\\  listed on the overLIB homepage.\n-//\\\n-//\\  Get the latest version at http://www.bosrup.com/web/overlib/\n-//\\\n-//\\  This script is published under an open source license. Please read the license\n-//\\  agreement online at: http://www.bosrup.com/web/overlib/license.html\n-//\\  If you have questions regarding the license please contact erik@bosrup.com.\n-//\\\n-//\\  This script library was originally created for personal use. By request it has\n-//\\  later been made public. This is free software. Do not sell this as your own\n-//\\  work, or remove this copyright notice. For full details on copying or changing\n-//\\  this script please read the license agreement at the link above.\n-//\\\n-//\\  Please give credit on sites that use overLIB and submit changes of the script\n-//\\  so other people can use them as well. This script is free to use, don't abuse.\n-//\\//////////////////////////////////////////////////////////////////////////////////\n-//\\mini\n-\n-\n-////////////////////////////////////////////////////////////////////////////////////\n-// CONSTANTS\n-// Don't touch these. :)\n-////////////////////////////////////////////////////////////////////////////////////\n-var INARRAY\t\t=\t1;\n-var CAPARRAY\t\t=\t2;\n-var STICKY\t\t=\t3;\n-var BACKGROUND\t\t=\t4;\n-var NOCLOSE\t\t=\t5;\n-var CAPTION\t\t=\t6;\n-var LEFT\t\t=\t7;\n-var RIGHT\t\t=\t8;\n-var CENTER\t\t=\t9;\n-var OFFSETX\t\t=\t10;\n-var OFFSETY\t\t=\t11;\n-var FGCOLOR\t\t=\t12;\n-var BGCOLOR\t\t=\t13;\n-var TEXTCOLOR\t\t=\t14;\n-var CAPCOLOR\t\t=\t15;\n-var CLOSECOLOR\t\t=\t16;\n-var WIDTH\t\t=\t17;\n-var BORDER\t\t=\t18;\n-var STATUS\t\t=\t19;\n-var AUTOSTATUS\t\t=\t20;\n-var AUTOSTATUSCAP\t=\t21;\n-var HEIGHT\t\t=\t22;\n-var CLOSETEXT\t\t=\t23;\n-var SNAPX\t\t=\t24;\n-var SNAPY\t\t=\t25;\n-var FIXX\t\t=\t26;\n-var FIXY\t\t=\t27;\n-var FGBACKGROUND\t=\t28;\n-var BGBACKGROUND\t=\t29;\n-var PADX\t\t=\t30; // PADX2 out\n-var PADY\t\t=\t31; // PADY2 out\n-var FULLHTML\t\t=\t34;\n-var ABOVE\t\t=\t35;\n-var BELOW\t\t=\t36;\n-var CAPICON\t\t=\t37;\n-var TEXTFONT\t\t=\t38;\n-var CAPTIONFONT\t\t=\t39;\n-var CLOSEFONT\t\t=\t40;\n-var TEXTSIZE\t\t=\t41;\n-var CAPTIONSIZE\t\t=\t42;\n-var CLOSESIZE\t\t=\t43;\n-var FRAME\t\t=\t44;\n-var TIMEOUT\t\t=\t45;\n-var FUNCTION\t\t=\t46;\n-var DELAY\t\t=\t47;\n-var HAUTO\t\t=\t48;\n-var VAUTO\t\t=\t49;\n-var CLOSECLICK\t\t=\t50;\n-var CSSOFF\t\t=\t51;\n-var CSSSTYLE\t\t=\t52;\n-var CSSCLASS\t\t=\t53;\n-var FGCLASS\t\t=\t54;\n-var BGCLASS\t\t=\t55;\n-var TEXTFONTCLASS\t=\t56;\n-var CAPTIONFONTCLASS\t=\t57;\n-var CLOSEFONTCLASS\t=\t58;\n-var PADUNIT\t\t=\t59;\n-var HEIGHTUNIT\t\t=\t60;\n-var WIDTHUNIT\t\t=\t61;\n-var TEXTSIZEUNIT\t=\t62;\n-var TEXTDECORATION\t=\t63;\n-var TEXTSTYLE\t\t=\t64;\n-var TEXTWEIGHT\t\t=\t65;\n-var CAPTIONSIZEUNIT\t=\t66;\n-var CAPTIONDECORATION\t=\t67;\n-var CAPTIONSTYLE\t=\t68;\n-var CAPTIONWEIGHT\t=\t69;\n-var CLOSESIZEUNIT\t=\t70;\n-var CLOSEDECORATION\t=\t71;\n-var CLOSESTYLE\t\t=\t72;\n-var CLOSEWEIGHT\t\t=\t73;\n-\n-\n-////////////////////////////////////////////////////////////////////////////////////\n-// DEFAULT CONFIGURATION\n-// You don't have to change anything here if you don't want to. All of this can be\n-// changed on your html page or through an overLIB call.\n-////////////////////////////////////////////////////////////////////////////////////\n-\n-// Main background color (the large area)\n-// Usually a bright color (white, yellow etc)\n-if (typeof ol_fgcolor == 'undefined') { var ol_fgcolor = \"#CCCCFF\";}\n-\t\n-// Border color and color of caption\n-// Usually a dark color (black, brown etc)\n-if (typeof ol_bgcolor == 'undefined') { var ol_bgcolor = \"#333399\";}\n-\t\n-// Text color\n-// Usually a dark color\n-if (typeof ol_textcolor == 'undefined') { var ol_textcolor = \"#000000\";}\n-\t\n-// Color of the caption text\n-// Usually a bright color\n-if (typeof ol_capcolor == 'undefined') { var ol_capcolor = \"#FFFFFF\";}\n-\t\n-// Color of \"Close\" when using Sticky\n-// Usually a semi-bright color\n-if (typeof ol_closecolor == 'undefined') { var ol_closecolor = \"#9999FF\";}\n-\n-// Font face for the main text\n-if (typeof ol_textfont == 'undefined') { var ol_textfont = \"Verdana,Arial,Helvetica\";}\n-\n-// Font face for the caption\n-if (typeof ol_captionfont == 'undefined') { var ol_captionfont = \"Verdana,Arial,Helvetica\";}\n-\n-// Font face for the close text\n-if (typeof ol_closefont == 'undefined') { var ol_closefont = \"Verdana,Arial,Helvetica\";}\n-\n-// Font size for the main text\n-// When using CSS this will be very small.\n-if (typeof ol_textsize == 'undefined') { var ol_textsize = \"1\";}\n-\n-// Font size for the caption\n-// When using CSS this will be very small.\n-if (typeof ol_captionsize == 'undefined') { var ol_captionsize = \"1\";}\n-\n-// Font size for the close text\n-// When using CSS this will be very small.\n-if (typeof ol_closesize == 'undefined') { var ol_closesize = \"1\";}\n-\n-// Width of the popups in pixels\n-// 100-300 pixels is typical\n-if (typeof ol_width == 'undefined') { var ol_width = \"200\";}\n-\n-// How thick the ol_border should be in pixels\n-// 1-3 pixels is typical\n-if (typeof ol_border == 'undefined') { var ol_border = \"1\";}\n-\n-// How many pixels to the right/left of the cursor to show the popup\n-// Values between 3 and 12 are best\n-if (typeof ol_offsetx == 'undefined') { var ol_offsetx = 10;}\n-\t\n-// How many pixels to the below the cursor to show the popup\n-// Values between 3 and 12 are best\n-if (typeof ol_offsety == 'undefined') { var ol_offsety = 10;}\n-\n-// Default text for popups\n-// Should you forget to pass something to overLIB this will be displayed.\n-if (typeof ol_text == 'undefined') { var ol_text = \"Default Text\"; }\n-\n-// Default caption\n-// You should leave this blank or you will have problems making non caps popups.\n-if (typeof ol_cap == 'undefined') { var ol_cap = \"\"; }\n-\n-// Decides if sticky popups are default.\n-// 0 for non, 1 for stickies.\n-if (typeof ol_sticky == 'undefined') { var ol_sticky = 0; }\n-\n-// Default background image. Better left empty unless you always want one.\n-if (typeof ol_background == 'undefined') { var ol_background = \"\"; }\n-\n-// Text for the closing sticky popups.\n-// Normal is \"Close\".\n-if (typeof ol_close == 'undefined') { var ol_close = \"Close\"; }\n-\n-// Default vertical alignment for popups.\n-// It's best to leave RIGHT here. Other options are LEFT and CENTER.\n-if (typeof ol_hpos == 'undefined') { var ol_hpos = RIGHT; }\n-\n-// Default status bar text when a popup is invoked.\n-if (typeof ol_status == 'undefined') { var ol_status = \"\"; }\n-\n-// If the status bar automatically should load either text or caption.\n-// 0=nothing, 1=text, 2=caption\n-if (typeof ol_autostatus == 'undefined') { var ol_autostatus = 0; }\n-\n-// Default height for popup. Often best left alone.\n-if (typeof ol_height == 'undefined') { var ol_height = -1; }\n-\n-// Horizontal grid spacing that popups will snap to.\n-// 0 makes no grid, anything else will cause a snap to that grid spacing.\n-if (typeof ol_snapx == 'undefined') { var ol_snapx = 0; }\n-\n-// Vertical grid spacing that popups will snap to.\n-// 0 makes no grid, andthing else will cause a snap to that grid spacing.\n-if (typeof ol_snapy == 'undefined') { var ol_snapy = 0; }\n-\n-// Sets the popups horizontal position to a fixed column.\n-// Anything above -1 will cause fixed position.\n-if (typeof ol_fixx == 'undefined') { var ol_fixx = -1; }\n-\n-// Sets the popups vertical position to a fixed row.\n-// Anything above -1 will cause fixed position.\n-if (typeof ol_fixy == 'undefined') { var ol_fixy = -1; }\n-\n-// Background image for the popups inside.\n-if (typeof ol_fgbackground == 'undefined') { var ol_fgbackground = \"\"; }\n-\n-// Background image for the popups frame.\n-if (typeof ol_bgbackground == 'undefined') { var ol_bgbackground = \"\"; }\n-\n-// How much horizontal left padding text should get by default when BACKGROUND is used.\n-if (typeof ol_padxl == 'undefined') { var ol_padxl = 1; }\n-\n-// How much horizontal right padding text should get by default when BACKGROUND is used.\n-if (typeof ol_padxr == 'undefined') { var ol_padxr = 1; }\n-\n-// How much vertical top padding text should get by default when BACKGROUND is used.\n-if (typeof ol_padyt == 'undefined') { var ol_padyt = 1; }\n-\n-// How much vertical bottom padding text should get by default when BACKGROUND is used.\n-if (typeof ol_padyb == 'undefined') { var ol_padyb = 1; }\n-\n-// If the user by default must supply all html for complete popup control.\n-// Set to 1 to activate, 0 otherwise.\n-if (typeof ol_fullhtml == 'undefined') { var ol_fullhtml = 0; }\n-\n-// Default vertical position of the popup. Default should normally be BELOW.\n-// ABOVE only works when HEIGHT is defined.\n-if (typeof ol_vpos == 'undefined') { var ol_vpos = BELOW; }\n-\n-// Default height of popup to use when placing the popup above the cursor.\n-if (typeof ol_aboveheight == 'undefined') { var ol_aboveheight = 0; }\n-\n-// Default icon to place next to the popups caption.\n-if (typeof ol_capicon == 'undefined') { var ol_capicon = \"\"; }\n-\n-// Default frame. We default to current frame if there is no frame defined.\n-if (typeof ol_frame == 'undefined') { var ol_frame = self; }\n-\n-// Default timeout. By default there is no timeout.\n-if (typeof ol_timeout == 'undefined') { var ol_timeout = 0; }\n-\n-// Default javascript funktion. By default there is none.\n-if (typeof ol_function == 'undefined') { var ol_function = null; }\n-\n-// Default timeout. By default there is no timeout.\n-if (typeof ol_delay == 'undefined') { var ol_delay = 0; }\n-\n-// If overLIB should decide the horizontal placement.\n-if (typeof ol_hauto == 'undefined') { var ol_hauto = 0; }\n-\n-// If overLIB should decide the vertical placement.\n-if (typeof ol_vauto == 'undefined') { var ol_vauto = 0; }\n-\n-\n-\n-// If the user has to click to close stickies.\n-if (typeof ol_closeclick == 'undefined') { var ol_closeclick = 0; }\n-\n-// This variable determines if you want to use CSS or inline definitions.\n-// CSSOFF=no CSS    CSSSTYLE=use CSS inline styles    CSSCLASS=use classes\n-if (typeof ol_css == 'undefined') { var ol_css = CSSOFF; }\n-\n-// Main background class (eqv of fgcolor)\n-// This is only used if CSS is set to use classes (ol_css = CSSCLASS)\n-if (typeof ol_fgclass == 'undefined') { var ol_fgclass = \"\"; }\n-\n-// Frame background class (eqv of bgcolor)\n-// This is only used if CSS is set to use classes (ol_css = CSSCLASS)\n-if (typeof ol_bgclass == 'undefined') { var ol_bgclass = \"\"; }\n-\n-// Main font class\n-// This is only used if CSS is set to use classes (ol_css = CSSCLASS)\n-if (typeof ol_textfontclass == 'undefined') { var ol_textfontclass = \"\"; }\n-\n-// Caption font class\n-// This is only used if CSS is set to use classes (ol_css = CSSCLASS)\n-if (typeof ol_captionfontclass == 'undefined') { var ol_captionfontclass = \"\"; }\n-\n-// Close font class\n-// This is only used if CSS is set to use classes (ol_css = CSSCLASS)\n-if (typeof ol_closefontclass == 'undefined') { var ol_closefontclass = \"\"; }\n-\n-// Unit to be used for the text padding above\n-// Only used if CSS inline styles are being used (ol_css = CSSSTYLE)\n-// Options include \"px\", \"%\", \"in\", \"cm\"\n-if (typeof ol_padunit == 'undefined') { var ol_padunit = \"px\";}\n-\n-// Unit to be used for height of popup\n-// Only used if CSS inline styles are being used (ol_css = CSSSTYLE)\n-// Options include \"px\", \"%\", \"in\", \"cm\"\n-if (typeof ol_heightunit == 'undefined') { var ol_heightunit = \"px\";}\n-\n-// Unit to be used for width of popup\n-// Only used if CSS inline styles are being used (ol_css = CSSSTYLE)\n-// Options include \"px\", \"%\", \"in\", \"cm\"\n-if (typeof ol_widthunit == 'undefined') { var ol_widthunit = \"px\";}\n-\n-// Font size unit for the main text\n-// Only used if CSS inline styles are being used (ol_css = CSSSTYLE)\n-if (typeof ol_textsizeunit == 'undefined') { var ol_textsizeunit = \"px\";}\n-\n-// Decoration of the main text (\"none\", \"underline\", \"line-through\" or \"blink\")\n-// Only used if CSS inline styles are being used (ol_css = CSSSTYLE)\n-if (typeof ol_textdecoration == 'undefined') { var ol_textdecoration = \"none\";}\n-\n-// Font style of the main text (\"normal\" or \"italic\")\n-// Only used if CSS inline styles are being used (ol_css = CSSSTYLE)\n-if (typeof ol_textstyle == 'undefined') { var ol_textstyle = \"normal\";}\n-\n-// Font weight of the main text (\"normal\", \"bold\", \"bolder\", \"lighter\", ect.)\n-// Only used if CSS inline styles are being used (ol_css = CSSSTYLE)\n-if (typeof ol_textweight == 'undefined') { var ol_textweight = \"normal\";}\n-\n-// Font size unit for the caption\n-// Only used if CSS inline styles are being used (ol_css = CSSSTYLE)\n-if (typeof ol_captionsizeunit == 'undefined') { var ol_captionsizeunit = \"px\";}\n-\n-// Decoration of the caption (\"none\", \"underline\", \"line-through\" or \"blink\")\n-// Only used if CSS inline styles are being used (ol_css = CSSSTYLE)\n-if (typeof ol_captiondecoration == 'undefined') { var ol_captiondecoration = \"none\";}\n-\n-// Font style of the caption (\"normal\" or \"italic\")\n-// Only used if CSS inline styles are being used (ol_css = CSSSTYLE)\n-if (typeof ol_captionstyle == 'undefined') { var ol_captionstyle = \"normal\";}\n-\n-// Font weight of the caption (\"normal\", \"bold\", \"bolder\", \"lighter\", ect.)\n-// Only used if CSS inline styles are being used (ol_css = CSSSTYLE)\n-if (typeof ol_captionweight == 'undefined') { var ol_captionweight = \"bold\";}\n-\n-// Font size unit for the close text\n-// Only used if CSS inline styles are being used (ol_css = CSSSTYLE)\n-if (typeof ol_closesizeunit == 'undefined') { var ol_closesizeunit = \"px\";}\n-\n-// Decoration of the close text (\"none\", \"underline\", \"line-through\" or \"blink\")\n-// Only used if CSS inline styles are being used (ol_css = CSSSTYLE)\n-if (typeof ol_closedecoration == 'undefined') { var ol_closedecoration = \"none\";}\n-\n-// Font style of the close text (\"normal\" or \"italic\")\n-// Only used if CSS inline styles are being used (ol_css = CSSSTYLE)\n-if (typeof ol_closestyle == 'undefined') { var ol_closestyle = \"normal\";}\n-\n-// Font weight of the close text (\"normal\", \"bold\", \"bolder\", \"lighter\", ect.)\n-// Only used if CSS inline styles are being used (ol_css = CSSSTYLE)\n-if (typeof ol_closeweight == 'undefined') { var ol_closeweight = \"normal\";}\n-\n-\n-\n-////////////////////////////////////////////////////////////////////////////////////\n-// ARRAY CONFIGURATION\n-// You don't have to change anything here if you don't want to. The following\n-// arrays can be filled with text and html if you don't wish to pass it from\n-// your html page.\n-////////////////////////////////////////////////////////////////////////////////////\n-\n-// Array with texts.\n-if (typeof ol_texts == 'undefined') { var ol_texts = new Array(\"Text 0\", \"Text 1\"); }\n-\n-// Array with captions.\n-if (typeof ol_caps == 'undefined') { var ol_caps = new Array(\"Caption 0\", \"Caption 1\"); }\n-\n-\n-////////////////////////////////////////////////////////////////////////////////////\n-// END CONFIGURATION\n-// Don't change anything below this line, all configuration is above.\n-////////////////////////////////////////////////////////////////////////////////////\n-\n-\n-\n-\n-\n-\n-\n-////////////////////////////////////////////////////////////////////////////////////\n-// INIT\n-////////////////////////////////////////////////////////////////////////////////////\n-\n-// Runtime variables init. Used for runtime only, don't change, not for config!\n-var o3_text = \"\";\n-var o3_cap = \"\";\n-var o3_sticky = 0;\n-var o3_background = \"\";\n-var o3_close = \"Close\";\n-var o3_hpos = RIGHT;\n-var o3_offsetx = 2;\n-var o3_offsety = 2;\n-var o3_fgcolor = \"\";\n-var o3_bgcolor = \"\";\n-var o3_textcolor = \"\";\n-var o3_capcolor = \"\";\n-var o3_closecolor = \"\";\n-var o3_width = 100;\n-var o3_border = 1;\n-var o3_status = \"\";\n-var o3_autostatus = 0;\n-var o3_height = -1;\n-var o3_snapx = 0;\n-var o3_snapy = 0;\n-var o3_fixx = -1;\n-var o3_fixy = -1;\n-var o3_fgbackground = \"\";\n-var o3_bgbackground = \"\";\n-var o3_padxl = 0;\n-var o3_padxr = 0;\n-var o3_padyt = 0;\n-var o3_padyb = 0;\n-var o3_fullhtml = 0;\n-var o3_vpos = BELOW;\n-var o3_aboveheight = 0;\n-var o3_capicon = \"\";\n-var o3_textfont = \"Verdana,Arial,Helvetica\";\n-var o3_captionfont = \"Verdana,Arial,Helvetica\";\n-var o3_closefont = \"Verdana,Arial,Helvetica\";\n-var o3_textsize = \"1\";\n-var o3_captionsize = \"1\";\n-var o3_closesize = \"1\";\n-var o3_frame = self;\n-var o3_timeout = 0;\n-var o3_timerid = 0;\n-var o3_allowmove = 0;\n-var o3_function = null; \n-var o3_delay = 0;\n-var o3_delayid = 0;\n-var o3_hauto = 0;\n-var o3_vauto = 0;\n-var o3_closeclick = 0;\n-\n-var o3_css = CSSOFF;\n-var o3_fgclass = \"\";\n-var o3_bgclass = \"\";\n-var o3_textfontclass = \"\";\n-var o3_captionfontclass = \"\";\n-var o3_closefontclass = \"\";\n-var o3_padunit = \"px\";\n-var o3_heightunit = \"px\";\n-var o3_widthunit = \"px\";\n-var o3_textsizeunit = \"px\";\n-var o3_textdecoration = \"\";\n-var o3_textstyle = \"\";\n-var o3_textweight = \"\";\n-var o3_captionsizeunit = \"px\";\n-var o3_captiondecoration = \"\";\n-var o3_captionstyle = \"\";\n-var o3_captionweight = \"\";\n-var o3_closesizeunit = \"px\";\n-var o3_closedecoration = \"\";\n-var o3_closestyle = \"\";\n-var o3_closeweight = \"\";\n-\n-\n-\n-// Display state variables\n-var o3_x = 0;\n-var o3_y = 0;\n-var o3_allow = 0;\n-var o3_showingsticky = 0;\n-var o3_removecounter = 0;\n-\n-// Our layer\n-var over = null;\n-var fnRef;\n-\n-// Decide browser version\n-var ns4 = (navigator.appName == 'Netscape' && parseInt(navigator.appVersion) == 4);\n-var ns6 = (document.getElementById)? true:false;\n-var ie4 = (document.all)? true:false;\n-if (ie4) var docRoot = 'document.body';\n-var ie5 = false;\n-if (ns4) {\n-\tvar oW = window.innerWidth;\n-\tvar oH = window.innerHeight;\n-\twindow.onresize = function () {if (oW!=window.innerWidth||oH!=window.innerHeight) location.reload();}\n-}\n-\n-\n-// Microsoft Stupidity Check(tm).\n-if (ie4) {\n-\tif ((navigator.userAgent.indexOf('MSIE 5') > 0) || (navigator.userAgent.indexOf('MSIE 6') > 0)) {\n-\t\tif(document.compatMode && document.compatMode == 'CSS1Compat') docRoot = 'document.documentElement';\n-\t\tie5 = true;\n-\t}\n-\tif (ns6) {\n-\t\tns6 = false;\n-\t}\n-}\n-\n-\n-// Capture events, alt. diffuses the overlib function.\n-if ( (ns4) || (ie4) || (ns6)) {\n-\tdocument.onmousemove = mouseMove\n-\tif (ns4) document.captureEvents(Event.MOUSEMOVE)\n-} else {\n-\toverlib = no_overlib;\n-\tnd = no_overlib;\n-\tver3fix = true;\n-}\n-\n-\n-// Fake function for 3.0 users.\n-function no_overlib() {\n-\treturn ver3fix;\n-}\n-\n-\n-\n-////////////////////////////////////////////////////////////////////////////////////\n-// PUBLIC FUNCTIONS\n-////////////////////////////////////////////////////////////////////////////////////\n-\n-\n-// overlib(arg0, ..., argN)\n-// Loads parameters into global runtime variables.\n-function overlib() {\n-\t\n-\t// Load defaults to runtime.\n-\to3_text = ol_text;\n-\to3_cap = ol_cap;\n-\to3_sticky = ol_sticky;\n-\to3_background = ol_background;\n-\to3_close = ol_close;\n-\to3_hpos = ol_hpos;\n-\to3_offsetx = ol_offsetx;\n-\to3_offsety = ol_offsety;\n-\to3_fgcolor = ol_fgcolor;\n-\to3_bgcolor = ol_bgcolor;\n-\to3_textcolor = ol_textcolor;\n-\to3_capcolor = ol_capcolor;\n-\to3_closecolor = ol_closecolor;\n-\to3_width = ol_width;\n-\to3_border = ol_border;\n-\to3_status = ol_status;\n-\to3_autostatus = ol_autostatus;\n-\to3_height = ol_height;\n-\to3_snapx = ol_snapx;\n-\to3_snapy = ol_snapy;\n-\to3_fixx = ol_fixx;\n-\to3_fixy = ol_fixy;\n-\to3_fgbackground = ol_fgbackground;\n-\to3_bgbackground = ol_bgbackground;\n-\to3_padxl = ol_padxl;\n-\to3_padxr = ol_padxr;\n-\to3_padyt = ol_padyt;\n-\to3_padyb = ol_padyb;\n-\to3_fullhtml = ol_fullhtml;\n-\to3_vpos = ol_vpos;\n-\to3_aboveheight = ol_aboveheight;\n-\to3_capicon = ol_capicon;\n-\to3_textfont = ol_textfont;\n-\to3_captionfont = ol_captionfont;\n-\to3_closefont = ol_closefont;\n-\to3_textsize = ol_textsize;\n-\to3_captionsize = ol_captionsize;\n-\to3_closesize = ol_closesize;\n-\to3_timeout = ol_timeout;\n-\to3_function = ol_function;\n-\to3_delay = ol_delay;\n-\to3_hauto = ol_hauto;\n-\to3_vauto = ol_vauto;\n-\to3_closeclick = ol_closeclick;\n-\t\n-\to3_css = ol_css;\n-\to3_fgclass = ol_fgclass;\n-\to3_bgclass = ol_bgclass;\n-\to3_textfontclass = ol_textfontclass;\n-\to3_captionfontclass = ol_captionfontclass;\n-\to3_closefontclass = ol_closefontclass;\n-\to3_padunit = ol_padunit;\n-\to3_heightunit = ol_heightunit;\n-\to3_widthunit = ol_widthunit;\n-\to3_textsizeunit = ol_textsizeunit;\n-\to3_textdecoration = ol_textdecoration;\n-\to3_textstyle = ol_textstyle;\n-\to3_textweight = ol_textweight;\n-\to3_captionsizeunit = ol_captionsizeunit;\n-\to3_captiondecoration = ol_captiondecoration;\n-\to3_captionstyle = ol_captionstyle;\n-\to3_captionweight = ol_captionweight;\n-\to3_closesizeunit = ol_closesizeunit;\n-\to3_closedecoration = ol_closedecoration;\n-\to3_closestyle = ol_closestyle;\n-\to3_closeweight = ol_closeweight;\n-\tfnRef = '';\n-\t\n-\n-\t// Special for frame support, over must be reset...\n-\tif ( (ns4) || (ie4) || (ns6) ) {\n-\t\tif (over) cClick();\n-\t\to3_frame = ol_frame;\n-\t\tif (ns4) over = o3_frame.document.overDiv\n-\t\tif (ie4) over = o3_frame.overDiv.style\n-\t\tif (ns6) over = o3_frame.document.getElementById(\"overDiv\");\n-\t}\n-\t\n-\t\n-\t// What the next argument is expected to be.\n-\tvar parsemode = -1, udf, v = null;\n-\t\n-\tvar ar = arguments;\n-\tudf = (!ar.length ? 1 : 0);\n-\n-\tfor (i = 0; i < ar.length; i++) {\n-\n-\t\tif (parsemode < 0) {\n-\t\t\t// Arg is maintext, unless its a PARAMETER\n-\t\t\tif (typeof ar[i] == 'number') {\n-\t\t\t\tudf = (ar[i] == FUNCTION ? 0 : 1);\n-\t\t\t\ti--;\n-\t\t\t} else {\n-\t\t\t\to3_text = ar[i];\n-\t\t\t}\n-\n-\t\t\tparsemode = 0;\n-\t\t} else {\n-\t\t\t// Note: NS4 doesn't like switch cases with vars.\n-\t\t\tif (ar[i] == INARRAY) { udf = 0; o3_text = ol_texts[ar[++i]]; continue; }\n-\t\t\tif (ar[i] == CAPARRAY) { o3_cap = ol_caps[ar[++i]]; continue; }\n-\t\t\tif (ar[i] == STICKY) { o3_sticky = 1; continue; }\n-\t\t\tif (ar[i] == BACKGROUND) { o3_background = ar[++i]; continue; }\n-\t\t\tif (ar[i] == NOCLOSE) { o3_close = \"\"; continue; }\n-\t\t\tif (ar[i] == CAPTION) { o3_cap = ar[++i]; continue; }\n-\t\t\tif (ar[i] == CENTER || ar[i] == LEFT || ar[i] == RIGHT) { o3_hpos = ar[i]; continue; }\n-\t\t\tif (ar[i] == OFFSETX) { o3_offsetx = ar[++i]; continue; }\n-\t\t\tif (ar[i] == OFFSETY) { o3_offsety = ar[++i]; continue; }\n-\t\t\tif (ar[i] == FGCOLOR) { o3_fgcolor = ar[++i]; continue; }\n-\t\t\tif (ar[i] == BGCOLOR) { o3_bgcolor = ar[++i]; continue; }\n-\t\t\tif (ar[i] == TEXTCOLOR) { o3_textcolor = ar[++i]; continue; }\n-\t\t\tif (ar[i] == CAPCOLOR) { o3_capcolor = ar[++i]; continue; }\n-\t\t\tif (ar[i] == CLOSECOLOR) { o3_closecolor = ar[++i]; continue; }\n-\t\t\tif (ar[i] == WIDTH) { o3_width = ar[++i]; continue; }\n-\t\t\tif (ar[i] == BORDER) { o3_border = ar[++i]; continue; }\n-\t\t\tif (ar[i] == STATUS) { o3_status = ar[++i]; continue; }\n-\t\t\tif (ar[i] == AUTOSTATUS) { o3_autostatus = (o3_autostatus == 1) ? 0 : 1; continue; }\n-\t\t\tif (ar[i] == AUTOSTATUSCAP) { o3_autostatus = (o3_autostatus == 2) ? 0 : 2; continue; }\n-\t\t\tif (ar[i] == HEIGHT) { o3_height = ar[++i]; o3_aboveheight = ar[i]; continue; } // Same param again.\n-\t\t\tif (ar[i] == CLOSETEXT) { o3_close = ar[++i]; continue; }\n-\t\t\tif (ar[i] == SNAPX) { o3_snapx = ar[++i]; continue; }\n-\t\t\tif (ar[i] == SNAPY) { o3_snapy = ar[++i]; continue; }\n-\t\t\tif (ar[i] == FIXX) { o3_fixx = ar[++i]; continue; }\n-\t\t\tif (ar[i] == FIXY) { o3_fixy = ar[++i]; continue; }\n-\t\t\tif (ar[i] == FGBACKGROUND) { o3_fgbackground = ar[++i]; continue; }\n-\t\t\tif (ar[i] == BGBACKGROUND) { o3_bgbackground = ar[++i]; continue; }\n-\t\t\tif (ar[i] == PADX) { o3_padxl = ar[++i]; o3_padxr = ar[++i]; continue; }\n-\t\t\tif (ar[i] == PADY) { o3_padyt = ar[++i]; o3_padyb = ar[++i]; continue; }\n-\t\t\tif (ar[i] == FULLHTML) { o3_fullhtml = 1; continue; }\n-\t\t\tif (ar[i] == BELOW || ar[i] == ABOVE) { o3_vpos = ar[i]; continue; }\n-\t\t\tif (ar[i] == CAPICON) { o3_capicon = ar[++i]; continue; }\n-\t\t\tif (ar[i] == TEXTFONT) { o3_textfont = ar[++i]; continue; }\n-\t\t\tif (ar[i] == CAPTIONFONT) { o3_captionfont = ar[++i]; continue; }\n-\t\t\tif (ar[i] == CLOSEFONT) { o3_closefont = ar[++i]; continue; }\n-\t\t\tif (ar[i] == TEXTSIZE) { o3_textsize = ar[++i]; continue; }\n-\t\t\tif (ar[i] == CAPTIONSIZE) { o3_captionsize = ar[++i]; continue; }\n-\t\t\tif (ar[i] == CLOSESIZE) { o3_closesize = ar[++i]; continue; }\n-\t\t\tif (ar[i] == FRAME) { opt_FRAME(ar[++i]); continue; }\n-\t\t\tif (ar[i] == TIMEOUT) { o3_timeout = ar[++i]; continue; }\n-\t\t\tif (ar[i] == FUNCTION) { udf = 0; if (typeof ar[i+1] != 'number') v = ar[++i]; opt_FUNCTION(v); continue; } \n-\t\t\tif (ar[i] == DELAY) { o3_delay = ar[++i]; continue; }\n-\t\t\tif (ar[i] == HAUTO) { o3_hauto = (o3_hauto == 0) ? 1 : 0; continue; }\n-\t\t\tif (ar[i] == VAUTO) { o3_vauto = (o3_vauto == 0) ? 1 : 0; continue; }\n-\t\t\tif (ar[i] == CLOSECLICK) { o3_closeclick = (o3_closeclick == 0) ? 1 : 0; continue; }\n-\t\t\tif (ar[i] == CSSOFF) { o3_css = ar[i]; continue; }\n-\t\t\tif (ar[i] == CSSSTYLE) { o3_css = ar[i]; continue; }\n-\t\t\tif (ar[i] == CSSCLASS) { o3_css = ar[i]; continue; }\n-\t\t\tif (ar[i] == FGCLASS) { o3_fgclass = ar[++i]; continue; }\n-\t\t\tif (ar[i] == BGCLASS) { o3_bgclass = ar[++i]; continue; }\n-\t\t\tif (ar[i] == TEXTFONTCLASS) { o3_textfontclass = ar[++i]; continue; }\n-\t\t\tif (ar[i] == CAPTIONFONTCLASS) { o3_captionfontclass = ar[++i]; continue; }\n-\t\t\tif (ar[i] == CLOSEFONTCLASS) { o3_closefontclass = ar[++i]; continue; }\n-\t\t\tif (ar[i] == PADUNIT) { o3_padunit = ar[++i]; continue; }\n-\t\t\tif (ar[i] == HEIGHTUNIT) { o3_heightunit = ar[++i]; continue; }\n-\t\t\tif (ar[i] == WIDTHUNIT) { o3_widthunit = ar[++i]; continue; }\n-\t\t\tif (ar[i] == TEXTSIZEUNIT) { o3_textsizeunit = ar[++i]; continue; }\n-\t\t\tif (ar[i] == TEXTDECORATION) { o3_textdecoration = ar[++i]; continue; }\n-\t\t\tif (ar[i] == TEXTSTYLE) { o3_textstyle = ar[++i]; continue; }\n-\t\t\tif (ar[i] == TEXTWEIGHT) { o3_textweight = ar[++i]; continue; }\n-\t\t\tif (ar[i] == CAPTIONSIZEUNIT) { o3_captionsizeunit = ar[++i]; continue; }\n-\t\t\tif (ar[i] == CAPTIONDECORATION) { o3_captiondecoration = ar[++i]; continue; }\n-\t\t\tif (ar[i] == CAPTIONSTYLE) { o3_captionstyle = ar[++i]; continue; }\n-\t\t\tif (ar[i] == CAPTIONWEIGHT) { o3_captionweight = ar[++i]; continue; }\n-\t\t\tif (ar[i] == CLOSESIZEUNIT) { o3_closesizeunit = ar[++i]; continue; }\n-\t\t\tif (ar[i] == CLOSEDECORATION) { o3_closedecoration = ar[++i]; continue; }\n-\t\t\tif (ar[i] == CLOSESTYLE) { o3_closestyle = ar[++i]; continue; }\n-\t\t\tif (ar[i] == CLOSEWEIGHT) { o3_closeweight = ar[++i]; continue; }\n-\t\t}\n-\t}\n-\tif (udf && o3_function) o3_text = o3_function();\n-\n-\tif (o3_delay == 0) {\n-\t\treturn overlib351();\n-\t} else {\n-\t\to3_delayid = setTimeout(\"overlib351()\", o3_delay);\n-\t\treturn false;\n-\t}\n-}\n-\n-\n-\n-// Clears popups if appropriate\n-function nd() {\n-\tif ( o3_removecounter >= 1 ) { o3_showingsticky = 0 };\n-\tif ( (ns4) || (ie4) || (ns6) ) {\n-\t\tif ( o3_showingsticky == 0 ) {\n-\t\t\to3_allowmove = 0;\n-\t\t\tif (over != null) hideObject(over);\n-\t\t} else {\n-\t\t\to3_removecounter++;\n-\t\t}\n-\t}\n-\t\n-\treturn true;\n-}\n-\n-\n-\n-\n-\n-\n-\n-////////////////////////////////////////////////////////////////////////////////////\n-// OVERLIB 3.51 FUNCTION\n-////////////////////////////////////////////////////////////////////////////////////\n-\n-\n-// This function decides what it is we want to display and how we want it done.\n-function overlib351() {\n-\n-\t// Make layer content\n-\tvar layerhtml;\n-\n-\tif (o3_background != \"\" || o3_fullhtml) {\n-\t\t// Use background instead of box.\n-\t\tlayerhtml = ol_content_background(o3_text, o3_background, o3_fullhtml);\n-\t} else {\n-\t\t// They want a popup box.\n-\n-\t\t// Prepare popup background\n-\t\tif (o3_fgbackground != \"\" && o3_css == CSSOFF) {\n-\t\t\to3_fgbackground = \"BACKGROUND=\\\"\"+o3_fgbackground+\"\\\"\";\n-\t\t}\n-\t\tif (o3_bgbackground != \"\" && o3_css == CSSOFF) {\n-\t\t\to3_bgbackground = \"BACKGROUND=\\\"\"+o3_bgbackground+\"\\\"\";\n-\t\t}\n-\n-\t\t// Prepare popup colors\n-\t\tif (o3_fgcolor != \"\" && o3_css == CSSOFF) {\n-\t\t\to3_fgcolor = \"BGCOLOR=\\\"\"+o3_fgcolor+\"\\\"\";\n-\t\t}\n-\t\tif (o3_bgcolor != \"\" && o3_css == CSSOFF) {\n-\t\t\to3_bgcolor = \"BGCOLOR=\\\"\"+o3_bgcolor+\"\\\"\";\n-\t\t}\n-\n-\t\t// Prepare popup height\n-\t\tif (o3_height > 0 && o3_css == CSSOFF) {\n-\t\t\to3_height = \"HEIGHT=\" + o3_height;\n-\t\t} else {\n-\t\t\to3_height = \"\";\n-\t\t}\n-\n-\t\t// Decide which kinda box.\n-\t\tif (o3_cap == \"\") {\n-\t\t\t// Plain\n-\t\t\tlayerhtml = ol_content_simple(o3_text);\n-\t\t} else {\n-\t\t\t// With caption\n-\t\t\tif (o3_sticky) {\n-\t\t\t\t// Show close text\n-\t\t\t\tlayerhtml = ol_content_caption(o3_text, o3_cap, o3_close);\n-\t\t\t} else {\n-\t\t\t\t// No close text\n-\t\t\t\tlayerhtml = ol_content_caption(o3_text, o3_cap, \"\");\n-\t\t\t}\n-\t\t}\n-\t}\n-\t\n-\t// We want it to stick!\n-\tif (o3_sticky) {\n-\t\tif (o3_timerid > 0) {\n-\t\t\tclearTimeout(o3_timerid);\n-\t\t\to3_timerid = 0;\n-\t\t}\n-\t\to3_showingsticky = 1;\n-\t\to3_removecounter = 0;\n-\t}\n-\t\n-\t// Write layer\n-\tlayerWrite(layerhtml);\n-\t\n-\t// Prepare status bar\n-\tif (o3_autostatus > 0) {\n-\t\to3_status = o3_text;\n-\t\tif (o3_autostatus > 1) {\n-\t\t\to3_status = o3_cap;\n-\t\t}\n-\t}\n-\n-\t// When placing the layer the first time, even stickies may be moved.\n-\to3_allowmove = 0;\n-\n-\t// Initiate a timer for timeout\n-\tif (o3_timeout > 0) {\n-\t\tif (o3_timerid > 0) clearTimeout(o3_timerid);\n-\t\to3_timerid = setTimeout(\"cClick()\", o3_timeout);\n-\t}\n-\n-\t// Show layer\n-\tdisp(o3_status);\n-\n-\t// Stickies should stay where they are.\t\n-\tif (o3_sticky) o3_allowmove = 0;\n-\n-\treturn (o3_status != '');\n-}\n-\n-\n-\n-////////////////////////////////////////////////////////////////////////////////////\n-// LAYER GENERATION FUNCTIONS\n-////////////////////////////////////////////////////////////////////////////////////\n-\n-// Makes simple table without caption\n-function ol_content_simple(text) {\n-\tif (o3_css == CSSCLASS) txt = \"<TABLE WIDTH=\"+o3_width+\" BORDER=0 CELLPADDING=\"+o3_border+\" CELLSPACING=0 class=\\\"\"+o3_bgclass+\"\\\"><TR><TD><TABLE WIDTH=100% BORDER=0 CELLPADDING=2 CELLSPACING=0 class=\\\"\"+o3_fgclass+\"\\\"><TR><TD VALIGN=TOP><FONT class=\\\"\"+o3_textfontclass+\"\\\">\"+text+\"</FONT></TD></TR></TABLE></TD></TR></TABLE>\";\n-\tif (o3_css == CSSSTYLE) txt = \"<TABLE WIDTH=\"+o3_width+\" BORDER=0 CELLPADDING=\"+o3_border+\" CELLSPACING=0 style=\\\"background-color: \"+o3_bgcolor+\"; height: \"+o3_height+o3_heightunit+\";\\\"><TR><TD><TABLE WIDTH=100% BORDER=0 CELLPADDING=2 CELLSPACING=0 style=\\\"color: \"+o3_fgcolor+\"; background-color: \"+o3_fgcolor+\"; height: \"+o3_height+o3_heightunit+\";\\\"><TR><TD VALIGN=TOP><FONT style=\\\"font-family: \"+o3_textfont+\"; color: \"+o3_textcolor+\"; font-size: \"+o3_textsize+o3_textsizeunit+\"; text-decoration: \"+o3_textdecoration+\"; font-weight: \"+o3_textweight+\"; font-style:\"+o3_textstyle+\"\\\">\"+text+\"</FONT></TD></TR></TABLE></TD></TR></TABLE>\";\n-\tif (o3_css == CSSOFF) txt = \"<TABLE WIDTH=\"+o3_width+\" BORDER=0 CELLPADDING=\"+o3_border+\" CELLSPACING=0 \"+o3_bgcolor+\" \"+o3_height+\"><TR><TD><TABLE WIDTH=100% BORDER=0 CELLPADDING=2 CELLSPACING=0 \"+o3_fgcolor+\" \"+o3_fgbackground+\" \"+o3_height+\"><TR><TD VALIGN=TOP><FONT FACE=\\\"\"+o3_textfont+\"\\\" COLOR=\\\"\"+o3_textcolor+\"\\\" SIZE=\\\"\"+o3_textsize+\"\\\">\"+text+\"</FONT></TD></TR></TABLE></TD></TR></TABLE>\";\n-\n-\tset_background(\"\");\n-\treturn txt;\n-}\n-\n-\n-\n-\n-// Makes table with caption and optional close link\n-function ol_content_caption(text, title, close) {\n-\tclosing = \"\";\n-\tcloseevent = \"onMouseOver\";\n-\n-\tif (o3_closeclick == 1) closeevent = \"onClick\";\n-\tif (o3_capicon != \"\") o3_capicon = \"<IMG SRC=\\\"\"+o3_capicon+\"\\\"> \";\n-\n-\tif (close != \"\") {\n-\t\tif (o3_css == CSSCLASS) closing = \"<TD ALIGN=RIGHT><A HREF=\\\"javascript:return \"+fnRef+\"cClick();\\\" \"+closeevent+\"=\\\"return \" + fnRef + \"cClick();\\\" class=\\\"\"+o3_closefontclass+\"\\\">\"+close+\"</A></TD>\";\n-\t\tif (o3_css == CSSSTYLE) closing = \"<TD ALIGN=RIGHT><A HREF=\\\"javascript:return \"+fnRef+\"cClick();\\\" \"+closeevent+\"=\\\"return \" + fnRef + \"cClick();\\\" style=\\\"color: \"+o3_closecolor+\"; font-family: \"+o3_closefont+\"; font-size: \"+o3_closesize+o3_closesizeunit+\"; text-decoration: \"+o3_closedecoration+\"; font-weight: \"+o3_closeweight+\"; font-style:\"+o3_closestyle+\";\\\">\"+close+\"</A></TD>\";\n-\t\tif (o3_css == CSSOFF) closing = \"<TD ALIGN=RIGHT><A HREF=\\\"javascript:return \"+fnRef+\"cClick();\\\" \"+closeevent+\"=\\\"return \" + fnRef + \"cClick();\\\"><FONT COLOR=\\\"\"+o3_closecolor+\"\\\" FACE=\\\"\"+o3_closefont+\"\\\" SIZE=\\\"\"+o3_closesize+\"\\\">\"+close+\"</FONT></A></TD>\";\n-\t}\n-\n-\tif (o3_css == CSSCLASS) txt = \"<TABLE WIDTH=\"+o3_width+\" BORDER=0 CELLPADDING=\"+o3_border+\" CELLSPACING=0 class=\\\"\"+o3_bgclass+\"\\\"><TR><TD><TABLE WIDTH=100% BORDER=0 CELLPADDING=0 CELLSPACING=0><TR><TD><FONT class=\\\"\"+o3_captionfontclass+\"\\\">\"+o3_capicon+title+\"</FONT></TD>\"+closing+\"</TR></TABLE><TABLE WIDTH=100% BORDER=0 CELLPADDING=2 CELLSPACING=0 class=\\\"\"+o3_fgclass+\"\\\"><TR><TD VALIGN=TOP><FONT class=\\\"\"+o3_textfontclass+\"\\\">\"+text+\"</FONT></TD></TR></TABLE></TD></TR></TABLE>\";\n-\tif (o3_css == CSSSTYLE) txt = \"<TABLE WIDTH=\"+o3_width+\" BORDER=0 CELLPADDING=\"+o3_border+\" CELLSPACING=0 style=\\\"background-color: \"+o3_bgcolor+\"; background-image: url(\"+o3_bgbackground+\"); height: \"+o3_height+o3_heightunit+\";\\\"><TR><TD><TABLE WIDTH=100% BORDER=0 CELLPADDING=0 CELLSPACING=0><TR><TD><FONT style=\\\"font-family: \"+o3_captionfont+\"; color: \"+o3_capcolor+\"; font-size: \"+o3_captionsize+o3_captionsizeunit+\"; font-weight: \"+o3_captionweight+\"; font-style: \"+o3_captionstyle+\"; text-decoration: \" + o3_captiondecoration + \";\\\">\"+o3_capicon+title+\"</FONT></TD>\"+closing+\"</TR></TABLE><TABLE WIDTH=100% BORDER=0 CELLPADDING=2 CELLSPACING=0 style=\\\"color: \"+o3_fgcolor+\"; background-color: \"+o3_fgcolor+\"; height: \"+o3_height+o3_heightunit+\";\\\"><TR><TD VALIGN=TOP><FONT style=\\\"font-family: \"+o3_textfont+\"; color: \"+o3_textcolor+\"; font-size: \"+o3_textsize+o3_textsizeunit+\"; text-decoration: \"+o3_textdecoration+\"; font-weight: \"+o3_textweight+\"; font-style:\"+o3_textstyle+\"\\\">\"+text+\"</FONT></TD></TR></TABLE></TD></TR></TABLE>\";\n-\tif (o3_css == CSSOFF) txt = \"<TABLE WIDTH=\"+o3_width+\" BORDER=0 CELLPADDING=\"+o3_border+\" CELLSPACING=0 \"+o3_bgcolor+\" \"+o3_bgbackground+\" \"+o3_height+\"><TR><TD><TABLE WIDTH=100% BORDER=0 CELLPADDING=0 CELLSPACING=0><TR><TD><B><FONT COLOR=\\\"\"+o3_capcolor+\"\\\" FACE=\\\"\"+o3_captionfont+\"\\\" SIZE=\\\"\"+o3_captionsize+\"\\\">\"+o3_capicon+title+\"</FONT></B></TD>\"+closing+\"</TR></TABLE><TABLE WIDTH=100% BORDER=0 CELLPADDING=2 CELLSPACING=0 \"+o3_fgcolor+\" \"+o3_fgbackground+\" \"+o3_height+\"><TR><TD VALIGN=TOP><FONT COLOR=\\\"\"+o3_textcolor+\"\\\" FACE=\\\"\"+o3_textfont+\"\\\" SIZE=\\\"\"+o3_textsize+\"\\\">\"+text+\"</FONT></TD></TR></TABLE></TD></TR></TABLE>\";\n-\n-\tset_background(\"\");\n-\treturn txt;\n-}\n-\n-// Sets the background picture, padding and lots more. :)\n-function ol_content_background(text, picture, hasfullhtml) {\n-\tvar txt;\n-\tif (hasfullhtml) {\n-\t\ttxt = text;\n-\t} else {\n-\t\tvar pU, hU, wU;\n-\t\tpU = (o3_padunit == '%' ? '%' : '');\n-\t\thU = (o3_heightunit == '%' ? '%' : '');\n-\t\twU = (o3_widthunit == '%' ? '%' : '');\n-\n-\t\tif (o3_css == CSSCLASS) txt = \"<TABLE WIDTH=\"+o3_width+\" BORDER=0 CELLPADDING=0 CELLSPACING=0 HEIGHT=\"+o3_height+\"><TR><TD COLSPAN=3 HEIGHT=\"+o3_padyt+\"></TD></TR><TR><TD WIDTH=\"+o3_padxl+\"></TD><TD VALIGN=TOP WIDTH=\"+(o3_width-o3_padxl-o3_padxr)+\"><FONT class=\\\"\"+o3_textfontclass+\"\\\">\"+text+\"</FONT></TD><TD WIDTH=\"+o3_padxr+\"></TD></TR><TR><TD COLSPAN=3 HEIGHT=\"+o3_padyb+\"></TD></TR></TABLE>\";\n-\t\tif (o3_css == CSSSTYLE) txt = \"<TABLE WIDTH=\"+o3_width+wU+\" BORDER=0 CELLPADDING=0 CELLSPACING=0 HEIGHT=\"+o3_height+hU+\"><TR><TD COLSPAN=3 HEIGHT=\"+o3_padyt+pU+\"></TD></TR><TR><TD WIDTH=\"+o3_padxl+pU+\"></TD><TD VALIGN=TOP WIDTH=\"+(o3_width-o3_padxl-o3_padxr)+pU+\"><FONT style=\\\"font-family: \"+o3_textfont+\"; color: \"+o3_textcolor+\"; font-size: \"+o3_textsize+o3_textsizeunit+\";\\\">\"+text+\"</FONT></TD><TD WIDTH=\"+o3_padxr+pU+\"></TD></TR><TR><TD COLSPAN=3 HEIGHT=\"+o3_padyb+pU+\"></TD></TR></TABLE>\";\n-\t\tif (o3_css == CSSOFF) txt = \"<TABLE WIDTH=\"+o3_width+\" BORDER=0 CELLPADDING=0 CELLSPACING=0 HEIGHT=\"+o3_height+\"><TR><TD COLSPAN=3 HEIGHT=\"+o3_padyt+\"></TD></TR><TR><TD WIDTH=\"+o3_padxl+\"></TD><TD VALIGN=TOP WIDTH=\"+(o3_width-o3_padxl-o3_padxr)+\"><FONT FACE=\\\"\"+o3_textfont+\"\\\" COLOR=\\\"\"+o3_textcolor+\"\\\" SIZE=\\\"\"+o3_textsize+\"\\\">\"+text+\"</FONT></TD><TD WIDTH=\"+o3_padxr+\"></TD></TR><TR><TD COLSPAN=3 HEIGHT=\"+o3_padyb+\"></TD></TR></TABLE>\";\n-\t}\n-\tset_background(picture);\n-\treturn txt;\n-}\n-\n-// Loads a picture into the div.\n-function set_background(pic) {\n-\tif (pic == \"\") {\n-\t\tif (ns4) over.background.src = null;\n-\t\tif (ie4) over.backgroundImage = \"none\";\n-\t\tif (ns6) over.style.backgroundImage = \"none\";\n-\t} else {\n-\t\tif (ns4) {\n-\t\t\tover.background.src = pic;\n-\t\t} else if (ie4) {\n-\t\t\tover.backgroundImage = \"url(\"+pic+\")\";\n-\t\t} else if (ns6) {\n-\t\t\tover.style.backgroundImage = \"url(\"+pic+\")\";\n-\t\t}\n-\t}\n-}\n-\n-\n-\n-////////////////////////////////////////////////////////////////////////////////////\n-// HANDLING FUNCTIONS\n-////////////////////////////////////////////////////////////////////////////////////\n-\n-\n-// Displays the popup\n-function disp(statustext) {\n-\tif ( (ns4) || (ie4) || (ns6) ) {\n-\t\tif (o3_allowmove == 0) \t{\n-\t\t\tplaceLayer();\n-\t\t\tshowObject(over);\n-\t\t\to3_allowmove = 1;\n-\t\t}\n-\t}\n-\n-\tif (statustext != \"\") {\n-\t\tself.status = statustext;\n-\t}\n-}\n-\n-// Decides where we want the popup.\n-function placeLayer() {\n-\tvar placeX, placeY;\n-\t\n-\t// HORIZONTAL PLACEMENT\n-\tif (o3_fixx > -1) {\n-\t\t// Fixed position\n-\t\tplaceX = o3_fixx;\n-\t} else {\n-\t\twinoffset = (ie4) ? eval('o3_frame.'+docRoot+'.scrollLeft') : o3_frame.pageXOffset;\n-\t\tif (ie4) iwidth = eval('o3_frame.'+docRoot+'.clientWidth');\n-\t\tif (ns4 || ns6) iwidth = o3_frame.innerWidth;\n-\t\t\n-\t\t// If HAUTO, decide what to use.\n-\t\tif (o3_hauto == 1) {\n-\t\t\tif ( (o3_x - winoffset) > ((eval(iwidth)) / 2)) {\n-\t\t\t\to3_hpos = LEFT;\n-\t\t\t} else {\n-\t\t\t\to3_hpos = RIGHT;\n-\t\t\t}\n-\t\t}\n-\t\t\n-\t\t// From mouse\n-\t\tif (o3_hpos == CENTER) { // Center\n-\t\t\tplaceX = o3_x+o3_offsetx-(o3_width/2);\n-\t\t\tif (placeX < winoffset) placeX = winoffset;\n-\t\t}\n-\t\tif (o3_hpos == RIGHT) { // Right\n-\t\t\tplaceX = o3_x+o3_offsetx;\n-\t\t\tif ( (eval(placeX) + eval(o3_width)) > (winoffset + iwidth) ) {\n-\t\t\t\tplaceX = iwidth + winoffset - o3_width;\n-\t\t\t\tif (placeX < 0) placeX = 0;\n-\t\t\t}\n-\t\t}\n-\t\tif (o3_hpos == LEFT) { // Left\n-\t\t\tplaceX = o3_x-o3_offsetx-o3_width;\n-\t\t\tif (placeX < winoffset) placeX = winoffset;\n-\t\t}\n-\t\n-\t\t// Snapping!\n-\t\tif (o3_snapx > 1) {\n-\t\t\tvar snapping = placeX % o3_snapx;\n-\t\t\tif (o3_hpos == LEFT) {\n-\t\t\t\tplaceX = placeX - (o3_snapx + snapping);\n-\t\t\t} else {\n-\t\t\t\t// CENTER and RIGHT\n-\t\t\t\tplaceX = placeX + (o3_snapx - snapping);\n-\t\t\t}\n-\t\t\tif (placeX < winoffset) placeX = winoffset;\n-\t\t}\n-\t}\n-\n-\t\n-\t\n-\t// VERTICAL PLACEMENT\n-\tif (o3_fixy > -1) {\n-\t\t// Fixed position\n-\t\tplaceY = o3_fixy;\n-\t} else {\n-\t\tscrolloffset = (ie4) ? eval('o3_frame.'+docRoot+'.scrollTop') : o3_frame.pageYOffset;\n-\n-\t\t// If VAUTO, decide what to use.\n-\t\tif (o3_vauto == 1) {\n-\t\t\tif (ie4) iheight = eval('o3_frame.'+docRoot+'.clientHeight');\n-\t\t\tif (ns4 || ns6) iheight = o3_frame.innerHeight;\n-\n-\t\t\tiheight = (eval(iheight)) / 2;\n-\t\t\tif ( (o3_y - scrolloffset) > iheight) {\n-\t\t\t\to3_vpos = ABOVE;\n-\t\t\t} else {\n-\t\t\t\to3_vpos = BELOW;\n-\t\t\t}\n-\t\t}\n-\n-\n-\t\t// From mouse\n-\t\tif (o3_vpos == ABOVE) {\n-\t\t\tif (o3_aboveheight == 0) {\n-\t\t\t\tvar divref = (ie4) ? o3_frame.document.all['overDiv'] : over;\n-\t\t\t\to3_aboveheight = (ns4) ? divref.clip.height : divref.offsetHeight;\n-\t\t\t}\n-\n-\t\t\tplaceY = o3_y - (o3_aboveheight + o3_offsety);\n-\t\t\tif (placeY < scrolloffset) placeY = scrolloffset;\n-\t\t} else {\n-\t\t\t// BELOW\n-\t\t\tplaceY = o3_y + o3_offsety;\n-\t\t}\n-\n-\t\t// Snapping!\n-\t\tif (o3_snapy > 1) {\n-\t\t\tvar snapping = placeY % o3_snapy;\n-\t\t\t\n-\t\t\tif (o3_aboveheight > 0 && o3_vpos == ABOVE) {\n-\t\t\t\tplaceY = placeY - (o3_snapy + snapping);\n-\t\t\t} else {\n-\t\t\t\tplaceY = placeY + (o3_snapy - snapping);\n-\t\t\t}\n-\t\t\t\n-\t\t\tif (placeY < scrolloffset) placeY = scrolloffset;\n-\t\t}\n-\t}\n-\n-\n-\t// Actually move the object.\t\n-\trepositionTo(over, placeX, placeY);\n-}\n-\n-\n-// Moves the layer\n-function mouseMove(e) {\n-\tif ( (ns4) || (ns6) ) {o3_x=e.pageX; o3_y=e.pageY;}\n-\tif (ie4) {o3_x=event.x; o3_y=event.y;}\n-\tif (ie5) {o3_x=eval('event.x+o3_frame.'+docRoot+'.scrollLeft'); o3_y=eval('event.y+o3_frame.'+docRoot+'.scrollTop');}\n-\t\n-\tif (o3_allowmove == 1) {\n-\t\tplaceLayer();\n-\t}\n-}\n-\n-// The Close onMouseOver function for stickies\n-function cClick() {\n-\thideObject(over);\n-\to3_showingsticky = 0;\n-\t\n-\treturn false;\n-}\n-\n-\n-// Makes sure target frame has overLIB\n-function compatibleframe(frameid) {\n-\tif (ns4) {\n-\t\tif (typeof frameid.document.overDiv =='undefined') return false;\n-\t} else if (ie4) {\n-\t\tif (typeof frameid.document.all[\"overDiv\"] =='undefined') return false;\n-\t} else if (ns6) {\n-\t\tif (frameid.document.getElementById('overDiv') == null) return false;\n-\t}\n-\n-\treturn true;\n-}\n-\n-\n-\n-////////////////////////////////////////////////////////////////////////////////////\n-// LAYER FUNCTIONS\n-////////////////////////////////////////////////////////////////////////////////////\n-\n-\n-// Writes to a layer\n-function layerWrite(txt) {\n-\ttxt += \"\\n\";\n-\t\n-\tif (ns4) {\n-\t\tvar lyr = o3_frame.document.overDiv.document\n-\t\tlyr.write(txt)\n-\t\tlyr.close()\n-\t} else if (ie4) {\n-\t\to3_frame.document.all[\"overDiv\"].innerHTML = txt\n-\t} else if (ns6) {\n-\t\trange = o3_frame.document.createRange();\n-\t\trange.setStartBefore(over);\n-\t\tdomfrag = range.createContextualFragment(txt);\n-\t\twhile (over.hasChildNodes()) {\n-\t\t\tover.removeChild(over.lastChild);\n-\t\t}\n-\t\tover.appendChild(domfrag);\n-\t}\n-}\n-\n-// Make an object visible\n-function showObject(obj) {\n-\tif (ns4) obj.visibility = \"show\";\n-\telse if (ie4) obj.visibility = \"visible\";\n-\telse if (ns6) obj.style.visibility = \"visible\";\n-}\n-\n-// Hides an object\n-function hideObject(obj) {\n-\tif (ns4) obj.visibility = \"hide\";\n-\telse if (ie4) obj.visibility = \"hidden\";\n-\telse if (ns6) obj.style.visibility = \"hidden\";\n-\n-\tif (o3_timerid > 0) clearTimeout(o3_timerid);\n-\tif (o3_delayid > 0) clearTimeout(o3_delayid);\n-\to3_timerid = 0;\n-\to3_delayid = 0;\n-\tself.status = \"\";\n-}\n-\n-// Move a layer\n-function repositionTo(obj,xL,yL) {\n-\tif ( (ns4) || (ie4) ) {\n-\t\tobj.left = (ie4 ? xL + 'px' : xL);\n-\t\tobj.top = (ie4 ? yL + 'px' : yL);\n-\t} else if (ns6) {\n-\t\tobj.style.left = xL + \"px\";\n-\t\tobj.style.top = yL+ \"px\";\n-\t}\n-}\n-\n-function getFrameRef(thisFrame, ofrm) {\n-\tvar retVal = '';\n-\tfor (var i=0; i<thisFrame.length; i++) {\n-\t\tif (thisFrame[i].length > 0) { \n-\t\t\tretVal = getFrameRef(thisFrame[i],ofrm);\n-\t\t\tif (retVal == '') continue;\n-\t\t} else if (thisFrame[i] != ofrm) continue;\n-\t\t\n-\t\tretVal = '['+i+']' + retVal;\n-\t\tbreak;\n-\t}\n-\t\n-\treturn retVal;\n-}\n-\n-\n-\n-\n-////////////////////////////////////////////////////////////////////////////////////\n-// PARSER FUNCTIONS\n-////////////////////////////////////////////////////////////////////////////////////\n-\n-\n-// Defines which frame we should point to.\n-function opt_FRAME(frm) {\n-\to3_frame = compatibleframe(frm) ? frm : ol_frame;\n-\n-\tif (o3_frame != ol_frame) {\n-\t\tvar tFrm = getFrameRef(top.frames, o3_frame);\n-\t\tvar sFrm = getFrameRef(top.frames, ol_frame);\n-\n-\t\tif (sFrm.length == tFrm.length) { \n-\t\t\tl = tFrm.lastIndexOf('['); \n-\t\t\tif (l) {\n-\t\t\t\twhile(sFrm.substring(0,l) != tFrm.substring(0,l)) l = tFrm.lastIndexOf('[',l-1);\n-\t\t\t\ttFrm = tFrm.substr(l);\n-\t\t\t\tsFrm = sFrm.substr(l);\n-\t\t\t}\n-\t\t}\n-\t\t\t\n-\t\tvar cnt = 0, p = '', str = tFrm;\n-\t\t\t\n-\t\twhile((k = str.lastIndexOf('[')) != -1) {\n-\t\t\tcnt++;\n-\t\t\tstr = str.substring(0,k);\n-\t\t}\n-\n-\t\tfor (var i=0; i<cnt; i++) p = p + 'parent.';\n-\t\tfnRef = p + 'frames' + sFrm + '.';\n-\t}\n-\n-\tif ( (ns4) || (ie4 || (ns6)) ) {\n-\t\tif (ns4) over = o3_frame.document.overDiv;\n-\t\tif (ie4) over = o3_frame.overDiv.style;\n-\t\tif (ns6) over = o3_frame.document.getElementById(\"overDiv\");\n-\t}\n-\n-\treturn 0;\n-}\n-\n-// Calls an external function\n-function opt_FUNCTION(callme) {\n-\to3_text = (callme ? callme() : (o3_function ? o3_function() : 'No Function'));\n-\treturn 0;\n-}\n-\n-\n-\n-\n-//end (For internal purposes.)\n-////////////////////////////////////////////////////////////////////////////////////\n-// OVERLIB 2 COMPATABILITY FUNCTIONS\n-// If you aren't upgrading you can remove the below section.\n-////////////////////////////////////////////////////////////////////////////////////\n-\n-// Converts old 0=left, 1=right and 2=center into constants.\n-function vpos_convert(d) {\n-\tif (d == 0) {\n-\t\td = LEFT;\n-\t} else {\n-\t\tif (d == 1) {\n-\t\t\td = RIGHT;\n-\t\t} else {\n-\t\t\td = CENTER;\n-\t\t}\n-\t}\n-\t\n-\treturn d;\n-}\n-\n-// Simple popup\n-function dts(d,text) {\n-\to3_hpos = vpos_convert(d);\n-\toverlib(text, o3_hpos, CAPTION, \"\");\n-}\n-\n-// Caption popup\n-function dtc(d,text, title) {\n-\to3_hpos = vpos_convert(d);\n-\toverlib(text, CAPTION, title, o3_hpos);\n-}\n-\n-// Sticky\n-function stc(d,text, title) {\n-\to3_hpos = vpos_convert(d);\n-\toverlib(text, CAPTION, title, o3_hpos, STICKY);\n-}\n-\n-// Simple popup right\n-function drs(text) {\n-\tdts(1,text);\n-}\n-\n-// Caption popup right\n-function drc(text, title) {\n-\tdtc(1,text,title);\n-}\n-\n-// Sticky caption right\n-function src(text,title) {\n-\tstc(1,text,title);\n-}\n-\n-// Simple popup left\n-function dls(text) {\n-\tdts(0,text);\n-}\n-\n-// Caption popup left\n-function dlc(text, title) {\n-\tdtc(0,text,title);\n-}\n-\n-// Sticky caption left\n-function slc(text,title) {\n-\tstc(0,text,title);\n-}\n-\n-// Simple popup center\n-function dcs(text) {\n-\tdts(2,text);\n-}\n-\n-// Caption popup center\n-function dcc(text, title) {\n-\tdtc(2,text,title);\n-}\n-\n-// Sticky caption center\n-function scc(text,title) {\n-\tstc(2,text,title);\n-}\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pninit.php b/interface/main/calendar/modules/PostCalendar/pninit.php\ndeleted file mode 100644\nindex 82e5db8d3..000000000\n--- a/interface/main/calendar/modules/PostCalendar/pninit.php\n+++ /dev/null\n@@ -1,711 +0,0 @@\n-<?php\n-@define('__POSTCALENDAR__', 'PostCalendar');\n-/**\n- *  $Id$\n- *\n- *  PostCalendar::PostNuke Events Calendar Module\n- *  Copyright (C) 2002  The PostCalendar Team\n- *  http://postcalendar.tv\n- *\n- *  This program is free software; you can redistribute it and/or modify\n- *  it under the terms of the GNU General Public License as published by\n- *  the Free Software Foundation; either version 2 of the License, or\n- *  (at your option) any later version.\n- *\n- *  This program is distributed in the hope that it will be useful,\n- *  but WITHOUT ANY WARRANTY; without even the implied warranty of\n- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n- *  GNU General Public License for more details.\n- *\n- *  You should have received a copy of the GNU General Public License\n- *  along with this program; if not, write to the Free Software\n- *  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n- *\n- *  To read the license please read the docs/license.txt or visit\n- *  http://www.gnu.org/copyleft/gpl.html\n- *\n- */\n-\n-/**\n- *  Initializes a new install of PostCalendar\n- *\n- *  This function will initialize a new installation of PostCalendar.\n- *  It is accessed via the PostNuke Admin interface and should\n- *  not be called directly.\n- *\n- *  @return  boolean    true/false\n- *  @access  public\n- *  @author  Roger Raymond <iansym@yahoo.com>\n- *  @copyright  The PostCalendar Team 2002\n- */\n-function postcalendar_init()\n-{\n-    list($dbconn) = pnDBGetConn();\n-    $pntable = pnDBGetTables();\n-    $events_table = $pntable['postcalendar_events'];\n-    $cat_table    = $pntable['postcalendar_categories'];\n-    \n-    // after reading some posts i've decided to adopt the new\n-    // $pntable style which does not append table names.\n-    // if you use joins in your SQL please remember this!\n-    $sql = \"CREATE TABLE $events_table (\n-            pc_eid int(11) unsigned NOT NULL auto_increment,\n-            pc_catid int(11) NOT NULL default '0',\n-            pc_aid varchar(30) NOT NULL default '',\n-            pc_title varchar(150) default '',\n-            pc_time datetime,\n-            pc_hometext text default '',\n-            pc_comments int(11) default '0',\n-            pc_counter mediumint(8) unsigned default '0',\n-            pc_topic int(3) NOT NULL default '1',\n-            pc_informant varchar(20) NOT NULL default '',\n-            pc_eventDate date NOT NULL default '0000-00-00',\n-            pc_endDate date NOT NULL default '0000-00-00',\n-            pc_duration bigint(20) NOT NULL default '0',\n-            pc_recurrtype int(1) NOT NULL default '0',\n-            pc_recurrspec text default '',\n-            pc_recurrfreq int(3) NOT NULL default '0',\n-            pc_startTime time,\n-            pc_endTime time,\n-            pc_alldayevent int(1) NOT NULL default '0',\n-            pc_location text default '',\n-            pc_conttel varchar(50) default '',\n-            pc_contname varchar(50) default '',\n-            pc_contemail varchar(255) default '',\n-            pc_website varchar(255) default '',\n-            pc_fee varchar(50) default '',\n-            pc_eventstatus int(11) NOT NULL default '0',\n-            pc_sharing int(11) NOT NULL default '0',\n-            pc_language varchar(30) default '',\n-            PRIMARY KEY (pc_eid),\n-\t\t\tKEY basic_event (pc_catid,pc_aid,pc_eventDate,pc_endDate,pc_eventstatus,pc_sharing,pc_topic)\n-\t\t\t)\";\n-    $dbconn->Execute($sql);\n-    if ($dbconn->ErrorNo() != 0) {\n-        pnSessionSetVar('errormsg', $dbconn->ErrorMsg());\n-        return false;\n-    }\n-    \n-    // create the category table\n-    $sql = \"CREATE TABLE $cat_table (\n-            pc_catid int(11) unsigned NOT NULL auto_increment,\n-            pc_catname varchar(100) NOT NULL default 'Undefined',\n-            pc_catcolor varchar(50) NOT NULL default '#EEEEEE',\n-            pc_catdesc text default '',\n-            PRIMARY KEY (pc_catid),\n-\t\t\tKEY basic_cat (pc_catname,pc_catcolor)\n-\t\t\t)\";\n-    $dbconn->Execute($sql);\n-    if ($dbconn->ErrorNo() != 0) {\n-        pnSessionSetVar('errormsg', $dbconn->ErrorMsg());\n-        return false;\n-    }\n-    \n-    // insert default category\n-    $catid = $dbconn->GenID($cat_table);\n-    $sql = \"INSERT INTO $cat_table (pc_catid, pc_catname, pc_catcolor, pc_catdesc)\n-\t        VALUES($catid,'Default','#EEEEEE','Default Category')\";\n-    $dbconn->Execute($sql);\n-    if ($dbconn->ErrorNo() != 0) {\n-        pnSessionSetVar('errormsg', $dbconn->ErrorMsg());\n-        return false;\n-    }\n-    \n-    // PostCalendar Default Settings\n-    pnModSetVar(__POSTCALENDAR__, 'pcTime24Hours', '0');\n-    pnModSetVar(__POSTCALENDAR__, 'pcEventsOpenInNewWindow', '0');\n-    pnModSetVar(__POSTCALENDAR__, 'pcUseInternationalDates', '0');\n-    pnModSetVar(__POSTCALENDAR__, 'pcFirstDayOfWeek', '0');\n-    pnModSetVar(__POSTCALENDAR__, 'pcDayHighlightColor', '#EEEEEE');\n-    pnModSetVar(__POSTCALENDAR__, 'pcUsePopups', '1');\n-    pnModSetVar(__POSTCALENDAR__, 'pcDisplayTopics', '0');\n-    pnModSetVar(__POSTCALENDAR__, 'pcAllowDirectSubmit', '0');\n-    pnModSetVar(__POSTCALENDAR__, 'pcListHowManyEvents', '15');\n-    pnModSetVar(__POSTCALENDAR__, 'pcTimeIncrement', '15');\n-    pnModSetVar(__POSTCALENDAR__, 'pcAllowSiteWide', '0');\n-    pnModSetVar(__POSTCALENDAR__, 'pcAllowUserCalendar', '1');\n-    pnModSetVar(__POSTCALENDAR__, 'pcEventDateFormat', '%Y-%m-%d');\n-    pnModSetVar(__POSTCALENDAR__, 'pcTemplate', 'default');\n-    pnModSetVar(__POSTCALENDAR__, 'pcUseCache', '1');\n-    pnModSetVar(__POSTCALENDAR__, 'pcCacheLifetime', '3600');\n-    pnModSetVar(__POSTCALENDAR__, 'pcDefaultView', 'month');\n-    pnModSetVar(__POSTCALENDAR__, 'pcNotifyAdmin', '0');\n-    pnModSetVar(__POSTCALENDAR__, 'pcNotifyEmail', pnConfigGetVar('adminmail'));\n-    return true;\n-}\n-\n-/**\n- *  Upgrades an old install of PostCalendar\n- *\n- *  This function is used to upgrade an old version\n- *  of PostCalendar.  It is accessed via the PostNuke\n- *  Admin interface and should not be called directly.\n- *\n- *  @return boolean true/false\n- *  @param  string  $oldversion Version we're upgrading\n- *  @access  public\n- *  @author  Roger Raymond <iansym@yahoo.com>\n- *  @copyright  The PostCalendar Team 2002\n- */\n-function postcalendar_upgrade($oldversion)\n-{\n-    /**\n-     *  Until PostNuke fixes the bugs\n-     *  with the module upgrade we are\n-     *  going to have to do it ourselves.\n-     *\n-     *  Please do not use the Modules admin\n-     *  to upgrade PostCalendar.  Use the\n-     *  link provided in the PostCalendar\n-     *  Admin section.\n-     */\n-    $pcModInfo = pnModGetInfo(pnModGetIDFromName(__POSTCALENDAR__));\n-    $pcDir = pnVarPrepForOS($pcModInfo['directory']);\n-    \n-    list($dbconn) = pnDBGetConn();\n-    $pntable = pnDBGetTables();\n-    $events_table   =  $pntable['postcalendar_events'];\n-    $cat_table      =  $pntable['postcalendar_categories'];\n-    \n-    switch ($oldversion) {\n-        case '3.0':\n-        case '3.01':\n-        case '3.02':\n-        case '3.03':\n-        case '3.04':\n-            // we need the Date_Calc class\n-            require_once(\"modules/$pcDir/pnincludes/Date/Calc.php\");\n-            \n-            // Update PostCalendar Variables\n-            pnModSetVar(__POSTCALENDAR__, 'pcTime24Hours', pnModGetVar(__POSTCALENDAR__, 'time24hours'));\n-            pnModSetVar(__POSTCALENDAR__, 'pcEventsOpenInNewWindow', pnModGetVar(__POSTCALENDAR__, 'eventsopeninnewwindow'));\n-            pnModSetVar(__POSTCALENDAR__, 'pcUseInternationalDates', pnModGetVar(__POSTCALENDAR__, 'useinternationaldates'));\n-            pnModSetVar(__POSTCALENDAR__, 'pcFirstDayOfWeek', pnModGetVar(__POSTCALENDAR__, 'firstdayofweek'));\n-            pnModSetVar(__POSTCALENDAR__, 'pcDayHighlightColor', pnModGetVar(__POSTCALENDAR__, 'dayhighlightcolor'));\n-            pnModSetVar(__POSTCALENDAR__, 'pcUsePopups', pnModGetVar(__POSTCALENDAR__, 'usepopups'));\n-            pnModSetVar(__POSTCALENDAR__, 'pcDisplayTopics', pnModGetVar(__POSTCALENDAR__, 'displaytopics'));\n-            pnModSetVar(__POSTCALENDAR__, 'pcAllowDirectSubmit', '0');\n-            pnModSetVar(__POSTCALENDAR__, 'pcListHowManyEvents', pnModGetVar(__POSTCALENDAR__, 'listhowmanyevents'));\n-            pnModSetVar(__POSTCALENDAR__, 'pcTimeIncrement', '15');\n-            pnModSetVar(__POSTCALENDAR__, 'pcAllowSiteWide', '0');\n-            pnModSetVar(__POSTCALENDAR__, 'pcAllowUserCalendar', '1');\n-            pnModSetVar(__POSTCALENDAR__, 'pcEventDateFormat', '%Y-%m-%d');\n-            pnModSetVar(__POSTCALENDAR__, 'pcTemplate', 'default');\n-            pnModSetVar(__POSTCALENDAR__, 'pcUseCache', '1');\n-            pnModSetVar(__POSTCALENDAR__, 'pcCacheLifetime', '3600');\n-            pnModSetVar(__POSTCALENDAR__, 'pcDefaultView', 'month');\n-            pnModSetVar(__POSTCALENDAR__, 'pcSafeMode', '0');\n-            \n-            // alter the events table and change some old columns\n-            $sql = \"ALTER TABLE $events_table\n-                    ADD pc_catid int(11) default '0' NOT NULL,\n-\t\t\t\t\tADD pc_duration bigint(20) default '0' NOT NULL,\n-                    ADD pc_sharing int(11) default '0' NOT NULL,\n-                    ADD pc_language varchar(30) default '',\n-\t\t\t\t\tCHANGE pc_eid pc_eid int(11) unsigned NOT NULL auto_increment,\n-                    CHANGE pc_location pc_location text,\n-                    CHANGE pc_conttel pc_conttel varchar(50),\n-                    CHANGE pc_contname pc_contname varchar(150),\n-                    CHANGE pc_contemail pc_contemail varchar(255),\n-                    CHANGE pc_website pc_website varchar(255),\n-                    CHANGE pc_fee pc_fee varchar(50),\n-                    CHANGE pc_recurrspec pc_recurrspec text default ''\n-                    \";\n-               \n-            $dbconn->Execute($sql);\n-            if ($dbconn->ErrorNo() != 0) {\n-                die('event table alter error : '.$dbconn->ErrorMsg());\n-                return false;\n-            }\n-            \n-            // create the new categories table\n-            $sql = \"CREATE TABLE $cat_table (\n-                    pc_catid int(11) unsigned NOT NULL auto_increment,\n-                    pc_catname varchar(100) NOT NULL default 'Undefined',\n-                    pc_catcolor varchar(50) NOT NULL default '#EEEEEE',\n-                    pc_catdesc text default '',\n-                    PRIMARY KEY(pc_catid)\n-                    )\";\n-            $dbconn->Execute($sql);\n-            if ($dbconn->ErrorNo() != 0) {\n-                die('cat table create error : '.$dbconn->ErrorMsg());\n-                return false;\n-            }\n-            \n-            // insert the current hardcoded categories into the new categories table\n-            $category1 = pnVarPrepForStore(pnModGetVar(__POSTCALENDAR__, 'category1'));\n-            $category2 = pnVarPrepForStore(pnModGetVar(__POSTCALENDAR__, 'category2'));\n-            $category3 = pnVarPrepForStore(pnModGetVar(__POSTCALENDAR__, 'category3'));\n-            $category4 = pnVarPrepForStore(pnModGetVar(__POSTCALENDAR__, 'category4'));\n-            $category5 = pnVarPrepForStore(pnModGetVar(__POSTCALENDAR__, 'category5'));\n-            \n-            $inserts = array(\n-                \"INSERT INTO $cat_table (pc_catid,pc_catname,pc_catcolor) VALUES ('1','$category1','#EEEEEE')\",\n-                \"INSERT INTO $cat_table (pc_catid,pc_catname,pc_catcolor) VALUES ('2','$category2','#00ff00')\",\n-                \"INSERT INTO $cat_table (pc_catid,pc_catname,pc_catcolor) VALUES ('3','$category3','#0000ff')\",\n-                \"INSERT INTO $cat_table (pc_catid,pc_catname,pc_catcolor) VALUES ('4','$category4','#ffffff')\",\n-                \"INSERT INTO $cat_table (pc_catid,pc_catname,pc_catcolor) VALUES ('5','$category5','#ffcc00')\"\n-                );\n-                \n-            foreach ($inserts as $insert) {\n-                $dbconn->Execute($insert);\n-                if ($dbconn->ErrorNo() != 0) {\n-                    die('cat table insert error : '.$dbconn->ErrorMsg());\n-                    return false;\n-                }\n-            }\n-            \n-            // update the current events to reflect the category system change\n-            $updates = array(\n-                \"UPDATE $events_table SET pc_catid = 1 WHERE pc_barcolor = 'r' \",\n-                \"UPDATE $events_table SET pc_catid = 2 WHERE pc_barcolor = 'g' \",\n-                \"UPDATE $events_table SET pc_catid = 3 WHERE pc_barcolor = 'b' \",\n-                \"UPDATE $events_table SET pc_catid = 4 WHERE pc_barcolor = 'w' \",\n-                \"UPDATE $events_table SET pc_catid = 5 WHERE pc_barcolor = 'y' \"\n-                );\n-            \n-            foreach ($updates as $update) {\n-                $dbconn->Execute($update);\n-                if ($dbconn->ErrorNo() != 0) {\n-                    die('event table update error : '.$dbconn->ErrorMsg());\n-                    return false;\n-                }\n-            }\n-            \n-            // alter the events table and drop the old barcolor column\n-            $sql = \"ALTER TABLE $events_table DROP pc_barcolor\";\n-            $dbconn->Execute($sql);\n-            if ($dbconn->ErrorNo() != 0) {\n-                die('cat table alter error : '.$dbconn->ErrorMsg());\n-                return false;\n-            }\n-            \n-            // remove the old vars as they are no longer needed\n-            pnModDelVar(__POSTCALENDAR__, 'category1');\n-            pnModDelVar(__POSTCALENDAR__, 'category2');\n-            pnModDelVar(__POSTCALENDAR__, 'category3');\n-            pnModDelVar(__POSTCALENDAR__, 'category4');\n-            pnModDelVar(__POSTCALENDAR__, 'category5');\n-            pnModDelVar(__POSTCALENDAR__, 'time24hours');\n-            pnModDelVar(__POSTCALENDAR__, 'eventsopeninnewwindow');\n-            pnModDelVar(__POSTCALENDAR__, 'useinternationaldates');\n-            pnModDelVar(__POSTCALENDAR__, 'firstdayofweek');\n-            pnModDelVar(__POSTCALENDAR__, 'dayhighlightcolor');\n-            pnModDelVar(__POSTCALENDAR__, 'displaytopics');\n-            pnModDelVar(__POSTCALENDAR__, 'usepopups');\n-            pnModDelVar(__POSTCALENDAR__, 'listhowmanyevents');\n-            pnModDelVar(__POSTCALENDAR__, 'allowdirectsubmit');\n-            pnModDelVar(__POSTCALENDAR__, 'showeventsinyear');\n-                        \n-            //======================================================\n-            //  now, ideally, we will convert old events to the new\n-            //  style. this consists of reconfiguring the repeating\n-            //  events vars.\n-            //\n-            //  we need to establish the current repeating\n-            //  conditions and convert them to the new system\n-            //======================================================\n-            //  old repeating defines\n-            //======================================================\n-            @define('_EVENT_NONE', -1);\n-            @define('_EVENT_DAILY', 0);\n-            @define('_EVENT_WEEKLY', 1);\n-            @define('_EVENT_MONTHLY', 2);\n-            @define('_EVENT_YEARLY', 3);\n-            @define('_RECUR_SAME_DAY', 0);\n-            @define('_RECUR_SAME_DATE', 1);\n-            //======================================================\n-            //  new repeating defines\n-            //  $recurrspec['event_repeat']\n-            //======================================================\n-            @define('NO_REPEAT', 0);\n-            @define('REPEAT', 1);\n-            @define('REPEAT_ON', 2);\n-            @define('REPEAT_DAYS', 3);\n-\n-        //======================================================\n-            //  $recurrspec['event_repeat_freq']\n-            //======================================================\n-            @define('REPEAT_EVERY', 1);\n-            @define('REPEAT_EVERY_OTHER', 2);\n-            @define('REPEAT_EVERY_THIRD', 3);\n-            @define('REPEAT_EVERY_FOURTH', 4);\n-            //======================================================\n-            //  $recurrspec['event_repeat_freq_type']\n-            //======================================================\n-            @define('REPEAT_EVERY_DAY', 0);\n-            @define('REPEAT_EVERY_WEEK', 1);\n-            @define('REPEAT_EVERY_MONTH', 2);\n-            @define('REPEAT_EVERY_YEAR', 3);\n-            //======================================================\n-            //  $recurrspec['event_repeat_on_num']\n-            //======================================================\n-            @define('REPEAT_ON_1ST', 1);\n-            @define('REPEAT_ON_2ND', 2);\n-            @define('REPEAT_ON_3RD', 3);\n-            @define('REPEAT_ON_4TH', 4);\n-            @define('REPEAT_ON_LAST', 5);\n-            //======================================================\n-            //  $recurrspec['event_repeat_on_day']\n-            //======================================================\n-            @define('REPEAT_ON_SUN', 0);\n-            @define('REPEAT_ON_MON', 1);\n-            @define('REPEAT_ON_TUE', 2);\n-            @define('REPEAT_ON_WED', 3);\n-            @define('REPEAT_ON_THU', 4);\n-            @define('REPEAT_ON_FRI', 5);\n-            @define('REPEAT_ON_SAT', 6);\n-            //======================================================\n-            //  $recurrspec['event_repeat_on_freq']\n-            //======================================================\n-            @define('REPEAT_ON_MONTH', 1);\n-            @define('REPEAT_ON_2MONTH', 2);\n-            @define('REPEAT_ON_3MONTH', 3);\n-            @define('REPEAT_ON_4MONTH', 4);\n-            @define('REPEAT_ON_6MONTH', 6);\n-            @define('REPEAT_ON_YEAR', 12);\n-            //======================================================\n-            //  Set Sharing Paramaters\n-            //======================================================\n-            @define('SHARING_PRIVATE', 0);\n-            @define('SHARING_PUBLIC', 1);\n-            @define('SHARING_BUSY', 2);\n-            @define('SHARING_GLOBAL', 3);\n-            //======================================================\n-            //  Here's some psuedo-code for the conversion\n-            //\n-            //  if _EVENT_NONE\n-            //      $rtype = NO_REPEAT\n-            //      $rspec = 0 for all;\n-            //      $duration = endTime - startTime\n-            //\n-            //  if _EVENT_DAILY\n-            //      $rtype = REPEAT\n-            //      $rspec = REPEAT_EVERY|REPEAT_EVERY_DAY\n-            //      $duration = endTime - startTime\n-            //\n-            //  if _EVENT_WEEKLY\n-            //      $rtype = REPEAT\n-            //      $rspec = REPEAT_EVERY|REPEAT_EVERY_WEEK\n-            //      $duration = endTime - startTime\n-            //\n-            //  if _EVENT_MONTHLY\n-            //      if _RECUR_SAME_DAY\n-            //          $rtype = REPEAT_ON\n-            //          $rspec = REPEAT_ON_NUM|REPEAT_ON_DAY|REPEAT_ON_FREQ\n-            //      if _RECUR_SAME_DATE\n-            //          $rtype = REPEAT\n-            //          $rspec = REPEAT_EVERY|REPEAT_EVERY_MONTH\n-            //      $duration = endTime - startTime\n-            //\n-            //  if _EVENT_YEARLY\n-            //      if _RECUR_SAME_DAY\n-            //          $rtype = REPEAT_ON\n-            //          $rspec = REPEAT_ON_NUM|REPEAT_ON_DAY|REPEAT_ON_FREQ\n-            //      if _RECUR_SAME_DATE\n-            //          $rtype = REPEAT\n-            //          $rspec = REPEAT_EVERY|REPEAT_EVERY_YEAR\n-            //      $duration = endTime - startTime\n-            //======================================================\n-            //  attempt reconfiguration\n-            //======================================================\n-            $sql = \"SELECT pc_eid, pc_eventDate, pc_startTime, pc_endTime, pc_recurrtype, pc_recurrfreq\n-                    FROM $events_table\";\n-            $result = $dbconn->Execute($sql);\n-            if ($dbconn->ErrorNo() != 0) {\n-                die($dbconn->ErrorMsg());\n-                return false;\n-            }\n-\n-            if (!isset($result)) {\n-                return false;\n-            }\n-\n-            // grab the results and start the conversion\n-            for (; !$result->EOF; $result->MoveNext()) {\n-                $recurrspec = array();\n-                list($eid,$eventdate,$start,$end,$rtype,$rfreq) = $result->fields;\n-\n-                if ($rtype == null) {\n-                    $rtype = _EVENT_NONE;\n-                }\n-\n-                switch ($rtype) {\n-                    case _EVENT_NONE:\n-                        $recurrtype = NO_REPEAT;\n-                        $recurrspec['event_repeat_freq']        = 0;\n-                        $recurrspec['event_repeat_freq_type']   = 0;\n-                        $recurrspec['event_repeat_on_num']      = 0;\n-                        $recurrspec['event_repeat_on_day']      = 0;\n-                        $recurrspec['event_repeat_on_freq']     = 0;\n-                        break;\n-                    \n-                    case _EVENT_DAILY:\n-                        $recurrtype = REPEAT;\n-                        $recurrspec['event_repeat_freq']        = REPEAT_EVERY;\n-                        $recurrspec['event_repeat_freq_type']   = REPEAT_EVERY_DAY;\n-                        $recurrspec['event_repeat_on_num']      = 0;\n-                        $recurrspec['event_repeat_on_day']      = 0;\n-                        $recurrspec['event_repeat_on_freq']     = 0;\n-                        break;\n-                    \n-                    case _EVENT_WEEKLY:\n-                        $recurrtype = REPEAT;\n-                        $recurrspec['event_repeat_freq']        = REPEAT_EVERY;\n-                        $recurrspec['event_repeat_freq_type']   = REPEAT_EVERY_WEEK;\n-                        $recurrspec['event_repeat_on_num']      = 0;\n-                        $recurrspec['event_repeat_on_day']      = 0;\n-                        $recurrspec['event_repeat_on_freq']     = 0;\n-                        break;\n-                    \n-                    case _EVENT_MONTHLY:\n-                        if ($rfreq == _RECUR_SAME_DATE) {\n-                            $recurrtype = REPEAT;\n-                            $recurrspec['event_repeat_freq']        = REPEAT_EVERY;\n-                            $recurrspec['event_repeat_freq_type']   = REPEAT_EVERY_MONTH;\n-                            $recurrspec['event_repeat_on_num']      = 0;\n-                            $recurrspec['event_repeat_on_day']      = 0;\n-                            $recurrspec['event_repeat_on_freq']     = 0;\n-                        } elseif ($rfreq == _RECUR_SAME_DAY) {\n-                            $recurrtype = REPEAT_ON;\n-                            list($y,$m,$d) = explode('-', $eventdate);\n-                            $recurrspec['event_repeat_freq']        = 0;\n-                            $recurrspec['event_repeat_freq_type']   = 0;\n-                            // event day of week\n-                            $edow = Date_Calc::dayOfWeek($d, $m, $y);\n-                            // date of first event day of week\n-                            $firstDay = Date_Calc::NWeekdayOfMonth(1, $edow, $m, $y, '%Y-%m-%d');\n-                            // find difference between 1st day and event day\n-                            list($y2,$m2,$d2) = explode('-', $firstDay);\n-                            $diff = Date_Calc::dateDiff($d, $m, $y, $d2, $m2, $y2);\n-                            // assuming $diff is going to be a multiple of 7\n-                            if ($diff > 0) {\n-                                $diff/=7;\n-                            }\n-\n-                            if ($diff > REPEAT_ON_4TH) {\n-                                $diff = REPEAT_ON_LAST;\n-                            }\n-\n-                            $recurrspec['event_repeat_on_num']      = $diff;\n-                            $recurrspec['event_repeat_on_day']      = $edow;\n-                            $recurrspec['event_repeat_on_freq']     = REPEAT_ON_MONTH;\n-                        }\n-                        break;\n-                    \n-                    case _EVENT_YEARLY:\n-                        if ($rfreq == _RECUR_SAME_DATE) {\n-                            $recurrtype = REPEAT;\n-                            $recurrspec['event_repeat_freq']        = REPEAT_EVERY;\n-                            $recurrspec['event_repeat_freq_type']   = REPEAT_EVERY_YEAR;\n-                            $recurrspec['event_repeat_on_num']      = 0;\n-                            $recurrspec['event_repeat_on_day']      = 0;\n-                            $recurrspec['event_repeat_on_freq']     = 0;\n-                        } elseif ($rfreq == _RECUR_SAME_DAY) {\n-                            $recurrtype = REPEAT_ON;\n-                            list($y,$m,$d) = explode('-', $eventdate);\n-                            $recurrspec['event_repeat_freq']        = 0;\n-                            $recurrspec['event_repeat_freq_type']   = 0;\n-                            // event day of week\n-                            $edow = Date_Calc::dayOfWeek($d, $m, $y);\n-                            // date of first event day of week\n-                            $firstDay = Date_Calc::NWeekdayOfMonth(1, $edow, $m, $y, '%Y-%m-%d');\n-                            // find difference between 1st day and event day\n-                            list($y2,$m2,$d2) = explode('-', $firstDay);\n-                            $diff = Date_Calc::dateDiff($d, $m, $y, $d2, $m2, $y2);\n-                            // assuming $diff is going to be a multiple of 7\n-                            if ($diff > 0) {\n-                                $diff/=7;\n-                            }\n-\n-                            if ($diff > REPEAT_ON_4TH) {\n-                                $diff = REPEAT_ON_LAST;\n-                            }\n-\n-                            $recurrspec['event_repeat_on_num']      = $diff;\n-                            $recurrspec['event_repeat_on_day']      = $edow;\n-                            $recurrspec['event_repeat_on_freq']     = REPEAT_ON_YEAR;\n-                        }\n-                        break;\n-                }\n-\n-                // ok, figure out the event's duration\n-                list($sh,$sm,$ss) = explode(':', $start);\n-                list($eh,$em,$es) = explode(':', $end);\n-                $stime = mktime($sh, $sm, $ss, 1, 1, 1970);\n-                // if the ending hour is less than the starting hour\n-                // assume that the event spans to the next day\n-                if ($eh < $sh) {\n-                    $etime = mktime($eh, $em, $es, 1, 2, 1970);\n-                } else {\n-                    $etime = mktime($eh, $em, $es, 1, 1, 1970);\n-                }\n-\n-                $duration = $etime - $stime;\n-                // prep the vars for the sql statement\n-                $eid = pnVarPrepForStore($eid);\n-                $recurrtype = pnVarPrepForStore($recurrtype);\n-                $recurrspec = pnVarPrepForStore(serialize($recurrspec));\n-                // create our sql statement\n-                $updatesql = \"UPDATE $events_table SET \n-                              pc_aid = '0',\n-\t\t\t\t\t\t\t  pc_recurrtype = $recurrtype,\n-                              pc_recurrspec = '$recurrspec',\n-                              pc_duration = $duration,\n-\t\t\t\t\t\t\t  pc_sharing = \".SHARING_GLOBAL.\"\n-                              WHERE pc_eid = $eid\";\n-                // execute our sql statement\n-                $dbconn->Execute($updatesql);\n-                if ($dbconn->ErrorNo() != 0) {\n-                    die($dbconn->ErrorMsg());\n-                    return false;\n-                }\n-\n-                // next event please\n-            }\n-\n-            // all done, proceed with next upgrade step if available/necessary\n-            return postcalendar_upgrade('3.1');\n-            break;\n-                   \n-        case '3.1':\n-        case '3.1.1':\n-        case '3.1.2':\n-        case '3.1.3':\n-        case '3.1.4':\n-            return postcalendar_upgrade('3.9.0');\n-            break;\n-        \n-        case '3.9.0':\n-        case '3.9.1':\n-        case '3.9.2':\n-            // ading pcSafeMode\n-            pnModSetVar(__POSTCALENDAR__, 'pcSafeMode', '0');\n-            return postcalendar_upgrade('3.9.3');\n-            break;\n-        \n-        case '3.9.3':\n-        case '3.9.3.1':\n-            // adding indexes\n-            $sql = \"ALTER TABLE $events_table \n-\t\t\t\t\tADD INDEX basic_event (pc_catid,pc_aid,pc_eventDate,pc_endDate,pc_eventstatus,pc_sharing,pc_topic)\";\n-            $dbconn->Execute($sql);\n-            if ($dbconn->ErrorNo() != 0) {\n-                die($dbconn->ErrorMsg());\n-                return false;\n-            }\n-\n-            // adding indexes\n-            $sql = \"ALTER TABLE $cat_table \n-\t\t\t\t\tADD INDEX basic_cat (pc_catname, pc_catcolor)\";\n-            $dbconn->Execute($sql);\n-            if ($dbconn->ErrorNo() != 0) {\n-                die($dbconn->ErrorMsg());\n-                return false;\n-            }\n-            return postcalendar_upgrade('3.9.4');\n-            break;\n-            \n-        case '3.9.4':\n-        case '3.9.5':\n-        case '3.9.6':\n-        case '3.9.7':\n-            return postcalendar_upgrade('3.9.8');\n-            break;\n-            \n-        case '3.9.8':\n-            pnModDelVar(__POSTCALENDAR__, 'pcSafeMode');\n-            pnModSetVar(__POSTCALENDAR__, 'pcNotifyAdmin', '0');\n-            pnModSetVar(__POSTCALENDAR__, 'pcNotifyEmail', pnConfigGetVar('adminmail'));\n-            break;\n-            \n-        case '3.9.9':\n-            break;\n-    }\n-    \n-    // if we get this far - load the userapi and clear the cache\n-    if (!pnModAPILoad(__POSTCALENDAR__, 'user')) {\n-        return false;\n-    }\n-\n-    $tpl =& new pcSmarty();\n-    $tpl->clear_all_cache();\n-    $tpl->clear_compiled_tpl();\n-    return true;\n-}\n-\n-/**\n- *  Deletes an install of PostCalendar\n- *\n- *  This function removes PostCalendar from you\n- *  PostNuke install and should be accessed via\n- *  the PostNuke Admin interface\n- *\n- *  @return  boolean    true/false\n- *  @access  public\n- *  @author  Roger Raymond <iansym@yahoo.com>\n- *  @copyright  The PostCalendar Team 2002\n- */\n-function postcalendar_delete()\n-{\n-    list($dbconn) = pnDBGetConn();\n-    $pntable = pnDBGetTables();\n-    $events_table  =  $pntable['postcalendar_events'];\n-    $cat_table     =  $pntable['postcalendar_categories'];\n-    $blocks_table  =  $pntable['blocks'];\n-    $blocks_column =& $pntable['blocks_column'];\n-    \n-    // get the module id\n-    $modid = pnModGetIDFromName(__POSTCALENDAR__);\n-    \n-    // remove the PostCalendar events table\n-    $sql = \"DROP TABLE $events_table\";\n-    $dbconn->Execute($sql);\n-    if ($dbconn->ErrorNo() != 0) {\n-        pnSessionSetVar('errormsg', $dbconn->ErrorMsg());\n-        return false;\n-    }\n-    \n-    // remove the PostCalendar categories table\n-    $sql = \"DROP TABLE $cat_table\";\n-    $dbconn->Execute($sql);\n-    if ($dbconn->ErrorNo() != 0) {\n-        pnSessionSetVar('errormsg', $dbconn->ErrorMsg());\n-        return false;\n-    }\n-    \n-    // remove all the PostCalendar variables from the DB\n-    pnModDelVar(__POSTCALENDAR__, 'pcTime24Hours');\n-    pnModDelVar(__POSTCALENDAR__, 'pcEventsOpenInNewWindow');\n-    pnModDelVar(__POSTCALENDAR__, 'pcUseInternationalDates');\n-    pnModDelVar(__POSTCALENDAR__, 'pcFirstDayOfWeek');\n-    pnModDelVar(__POSTCALENDAR__, 'pcDayHighlightColor');\n-    pnModDelVar(__POSTCALENDAR__, 'pcUsePopups');\n-    pnModDelVar(__POSTCALENDAR__, 'pcDisplayTopics');\n-    pnModDelVar(__POSTCALENDAR__, 'pcAllowDirectSubmit');\n-    pnModDelVar(__POSTCALENDAR__, 'pcListHowManyEvents');\n-    pnModDelVar(__POSTCALENDAR__, 'pcTimeIncrement');\n-    pnModDelVar(__POSTCALENDAR__, 'pcAllowSiteWide');\n-    pnModDelVar(__POSTCALENDAR__, 'pcAllowUserCalendar');\n-    pnModDelVar(__POSTCALENDAR__, 'pcEventDateFormat');\n-    pnModDelVar(__POSTCALENDAR__, 'pcTemplate');\n-    pnModDelVar(__POSTCALENDAR__, 'pcUseCache');\n-    pnModDelVar(__POSTCALENDAR__, 'pcCacheLifetime');\n-    pnModDelVar(__POSTCALENDAR__, 'pcDefaultView');\n-    pnModDelVar(__POSTCALENDAR__, 'pcSafeMode');\n-    pnModDelVar(__POSTCALENDAR__, 'pcNotifyAdmin');\n-    pnModDelVar(__POSTCALENDAR__, 'pcNotifyEmail');\n-    \n-    // remove any blocks associated with PostCalendar\n-    // Seems the core does not clean up installed blocks so I will.\n-    // I appologize for accessing core tables directly.\n-    $sql = \"DELETE FROM $blocks_table WHERE $blocks_column[mid] = '$modid'\";\n-    $dbconn->Execute($sql);\n-    if ($dbconn->ErrorNo() != 0) {\n-        pnSessionSetVar('errormsg', $dbconn->ErrorMsg());\n-        return false;\n-    }\n-    \n-    // Deletion successful\n-    return true;\n-}\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pnlang/eng/admin.php b/interface/main/calendar/modules/PostCalendar/pnlang/eng/admin.php\nindex 9d1b632e1..cd6acd804 100644\n--- a/interface/main/calendar/modules/PostCalendar/pnlang/eng/admin.php\n+++ b/interface/main/calendar/modules/PostCalendar/pnlang/eng/admin.php\n@@ -29,64 +29,9 @@\n // xl (ok, here's the rest of the language defines\n //=========================================================================\n \n-define('_PC_UPDATED', xl('Your PostCalendar configuration has been updated.'));\n-define('_PC_UPDATED_DEFAULTS', xl('Your PostCalendar configuration has been reset to use defaults.'));\n define('_POSTCALENDAR', xl('PostCalendar Administration'));\n-define('_PC_ADMIN_GLOBAL_SETTINGS', xl('PostCalendar Global Settings', '', '<b>', '</b>'));\n-define('_PC_ADMIN_CATEGORY_SETTINGS', xl('PostCalendar Category Settings', '', '<b>', '</b>'));\n-define('_PC_APPROVED_ADMIN', xl('Approved Events Administration'));\n-define('_PC_HIDDEN_ADMIN', xl('Hidden Events Administration'));\n-define('_PC_QUEUED_ADMIN', xl('Queued Events Administration'));\n-define('_PC_NO_EVENT_SELECTED', xl('Please select an event'));\n-define('_EDIT_PC_CONFIG_GLOBAL', xl('Settings'));\n-define('_EDIT_PC_CONFIG_DEFAULT', xl('Use Defaults'));\n define('_EDIT_PC_CONFIG_CATEGORIES', xl('Categories'));\n-define('_PC_CREATE_EVENT', xl('Add'));\n-define('_PC_VIEW_APPROVED', xl('Approved'));\n-define('_PC_VIEW_HIDDEN', xl('Hidden'));\n-define('_PC_VIEW_QUEUED', xl('Queued'));\n-define('_PC_SUBMISSION_ADMIN', xl('Queued Submissions Administration'));\n-define('_PC_NEW_SUBMISSIONS', xl('New Submissions'));\n-define('_PC_NO_SUBMISSIONS', xl('There are no New Submissions'));\n-define('_PC_SUNDAY', xl('Sunday'));\n-define('_PC_MONDAY', xl('Monday'));\n-define('_PC_SATURDAY', xl('Saturday'));\n-define('_PC_ADMIN_SUBMIT', xl('Commit Changes'));\n-define('_PC_TIME24HOURS', xl('Use 24 hour time format?'));\n-define('_PC_TIME_INCREMENT', xl('Time Increment for Add (minutes 1-60)'));\n-define('_PC_EVENTS_IN_NEW_WINDOW', xl('View events in a popup window?'));\n-define('_PC_INTERNATIONAL_DATES', xl('Use international date style?'));\n-define('_PC_FIRST_DAY_OF_WEEK', xl('First day of the week'));\n-define('_PC_TIMES', xl('Times array (N/A)'));\n-define('_PC_DAY_HIGHLIGHT_COLOR', xl('Current day highlight color'));\n-define('_PC_USE_JS_POPUPS', xl('Show hovering event text on mouseover?'));\n-define('_PC_ALLOW_DIRECT_SUBMIT', xl('Allow submitted events to be made active instantly?'));\n-define('_PC_ALLOW_SITEWIDE_SUBMIT', xl('Allow users to publish Global Events'));\n-define('_PC_ALLOW_USER_CALENDAR', xl('Allow users to publish Personal Calendars'));\n-define('_PC_SHOW_EVENTS_IN_YEAR', xl('Populate the year view with events?') . xl('[not recommended]', '', '<i>', '</i>'));\n-define('_PC_NUM_COLS_IN_YEAR_VIEW', xl('Number of columns in year view.'));\n-define('_PC_UPGRADE_TABLES', xl('Insert old events into tables'));\n-define('_PC_LIST_HOW_MANY', xl('Show how many events on admin pages?'));\n-define('_PC_USE_CACHE', xl('Cache template output?'));\n-define('_PC_CACHE_LIFETIME', xl('Cache Lifetime (in seconds)'));\n-define('_PC_DISPLAY_TOPICS', xl('Use topics?'));\n-define('_PC_PERFORM_ACTION', xl('Perform this action'));\n-define('_PC_ADMIN_ACTION_APPROVE', xl('Approve'));\n-define('_PC_ADMIN_ACTION_HIDE', xl('Hide'));\n-define('_PC_ADMIN_ACTION_DELETE', xl('Delete'));\n-define('_PC_ADMIN_ACTION_EDIT', xl('Edit'));\n-define('_PC_ADMIN_ACTION_VIEW', xl('View'));\n-define('_PC_EVENTS', xl('Events'));\n-define('_PC_NO_EVENTS', xl('No Events'));\n-define('_PC_APPROVE_ARE_YOU_SURE', xl('Are you sure you want to approve these events?'));\n-define('_PC_HIDE_ARE_YOU_SURE', xl('Are you sure you want to hide these events?'));\n-define('_PC_VIEW_ARE_YOU_SURE', xl('Are you sure you want to view these events?'));\n-define('_PC_EDIT_ARE_YOU_SURE', xl('Are you sure you want to edit these events?'));\n-define('_PC_ADMIN_EVENTS_APPROVED', xl('The event(s) have been approved.'));\n-define('_PC_ADMIN_EVENTS_HIDDEN', xl('The event(s) have been hidden.'));\n-define('_PC_NEXT', xl('Next'));\n-define('_PC_PREV', xl('Prev'));\n-define('_PC_EVENT_DATE_FORMAT', xl('Date Display Format') . xl('uses php <a href=\"http://php.net/strftime\">strftime</a> format', '', '<i>', '</i>'));\n+define('_EDIT_PC_CONFIG_CATDETAILS', xl('Category Details'));\n define('_PC_CAT_DELETE', xl('Delete'));\n define('_PC_REP_CAT_TITLE', xl('Categories'));\n define('_PC_REP_CAT_TITLE_S', xl('Category'));\n@@ -102,24 +47,16 @@ define('_PC_CAT_DESC', xl('Description'));\n define('_PC_CAT_DESC_XL', xl('Description Translation'));\n define('_PC_CAT_COLOR', xl('Color'));\n define('_PC_CAT_DUR', xl('Duration'));\n-define('_PC_CAT_NEW', xl('New =>'));\n define('_PC_ARE_YOU_SURE', xl('Are you sure you\\'d like to continue with these actions?'));\n define('_PC_DELETE_CATS', xl('Delete Categories with ID(s) : '));\n define('_PC_ADD_CAT', xl('Add new category : '));\n define('_PC_MODIFY_CATS', xl('Make modifications to current categories.'));\n define('_PC_CATS_CONFIRM', xl('YES!'));\n-define('_PC_DEFAULT_TEMPLATE', xl('Default Template'));\n-define('_PC_DEFAULT_VIEW', xl('Default Calendar View'));\n-define('_PC_USE_SAFE_MODE', xl('Is PHP using Safe Mode?'));\n define('_PC_CLEAR_CACHE', xl('Clear Smarty Cache'));\n define('_PC_CACHE_CLEARED', xl('Smarty Cache has been cleared'));\n define('_PC_TEST_SYSTEM', xl('Test System'));\n-define('_PC_SAFE_MODE_MESSAGE', xl('Make sure \"') ._PC_USE_SAFE_MODE. xl('\" is CHECKED in PostCalendar Settings!'));\n-define('_EDIT_PC_CONFIG_CATDETAILS', xl('Category Details'));\n define('_PC_DURATION_HOUR', xl('Hours'));\n define('_PC_DURATION_MIN', xl('Minutes'));\n-define('_PC_CAT_LIMITS', xl('Category Limits'));\n-define('_PC_NEW_LIMIT_TITLE', xl('New Limit of Events'));\n define('_PC_COLOR_PICK_TITLE', xl('pick'));\n define('_PC_CAT_TYPE', xl('Type'));\n define('_PC_ACTIVE', xl('Active'));\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pnlang/eng/calendar.php b/interface/main/calendar/modules/PostCalendar/pnlang/eng/calendar.php\ndeleted file mode 100644\nindex 4f03ffb5d..000000000\n--- a/interface/main/calendar/modules/PostCalendar/pnlang/eng/calendar.php\n+++ /dev/null\n@@ -1,56 +0,0 @@\n-<?php\n-/*\n- *  $Id$\n- *\n- *  PostCalendar::PostNuke Events Calendar Module\n- *  Copyright (C) 2002  The PostCalendar Team\n- *  http://postcalendar.tv\n- *  \n- *  This program is free software; you can redistribute it and/or modify\n- *  it under the terms of the GNU General Public License as published by\n- *  the Free Software Foundation; either version 2 of the License, or\n- *  (at your option) any later version.\n- *  \n- *  This program is distributed in the hope that it will be useful,\n- *  but WITHOUT ANY WARRANTY; without even the implied warranty of\n- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n- *  GNU General Public License for more details.\n- *  \n- *  You should have received a copy of the GNU General Public License\n- *  along with this program; if not, write to the Free Software\n- *  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n- *\n- *  To read the license please read the docs/license.txt or visit\n- *  http://www.gnu.org/copyleft/gpl.html\n- *\n- */\n-@define('_CALSUBMITEVENT', xl('Submit'));\n-@define('_CALSEARCHEVENT', xl('Search'));\n-@define('_EVENTS_OPEN_IN_NEW_WINDOW', xl('Events open in new window'));\n-\n-@define('_CALMONDAYSHORT', xl('M{{Monday}}'));\n-@define('_CALTUESDAYSHORT', xl('T{{Tuesday}}'));\n-@define('_CALWEDNESDAYSHORT', xl('W{{Wednesday}}'));\n-@define('_CALTHURSDAYSHORT', xl('T{{Thursday}}'));\n-@define('_CALFRIDAYSHORT', xl('F{{Friday}}'));\n-@define('_CALSATURDAYSHORT', xl('S{{Saturday}}'));\n-@define('_CALSUNDAYSHORT', xl('S{{Sunday}}'));\n-@define('_PC_CALENDAR_BLOCK_PREV', xl('Prev'));\n-@define('_PC_CALENDAR_BLOCK_NEXT', xl('Next'));\n-@define('_PC_BLOCK_TOPIC_DISPLAY', xl('Display topic in block?'));\n-@define('_PC_BLOCK_EVENTS_DATE_DISPLAY', xl('Display event dates in block?'));\n-@define('_PC_BLOCK_LOCATION_DISPLAY', xl('Display location in block?'));\n-@define('_PC_BLOCK_EVENT_OVERVIEW', xl('Display today\\'s events in the block?'));\n-@define('_PC_BLOCK_EVENTS_DISPLAY_LIMIT', xl('Display how many events?'));\n-@define('_PC_BLOCK_EVENTS_DISPLAY_RANGE', xl('How many months ahead to query for upcoming events?'));\n-@define('_PC_BLOCK_SHOW_CALENDAR', xl('Display the calendar?'));\n-@define('_PC_BLOCK_UPCOMING_EVENTS', xl('Display upcoming events in block?'));\n-@define('_PC_BLOCK_USE_POPUPS', xl('Show hovering event text on mouseover?'));\n-@define('_PC_SHOW_SS_LINKS', xl('Show search/submit links in block?'));\n-@define('_PC_BLOCK_NO_EVENTS', xl('No Events'));\n-@define('_PC_TODAYS_EVENTS', xl('Today\\'s Events'));\n-@define('_PC_UPCOMING_EVENTS', xl('Upcoming Events'));\n-@define('_PC_SUBMIT_EVENT', xl('Submit'));\n-@define('_PC_SEARCH_EVENT', xl('Search'));\n-@define('_PC_AM', xl('AM'));\n-@define('_PC_PM', xl('PM'));\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pnlang/eng/global.php b/interface/main/calendar/modules/PostCalendar/pnlang/eng/global.php\nindex 9193206ef..06d103f3c 100644\n--- a/interface/main/calendar/modules/PostCalendar/pnlang/eng/global.php\n+++ b/interface/main/calendar/modules/PostCalendar/pnlang/eng/global.php\n@@ -5,17 +5,17 @@\n  *  PostCalendar::PostNuke Events Calendar Module\n  *  Copyright (C) 2002  The PostCalendar Team\n  *  http://postcalendar.tv\n- *  \n+ *\n  *  This program is free software; you can redistribute it and/or modify\n  *  it under the terms of the GNU General Public License as published by\n  *  the Free Software Foundation; either version 2 of the License, or\n  *  (at your option) any later version.\n- *  \n+ *\n  *  This program is distributed in the hope that it will be useful,\n  *  but WITHOUT ANY WARRANTY; without even the implied warranty of\n  *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  *  GNU General Public License for more details.\n- *  \n+ *\n  *  You should have received a copy of the GNU General Public License\n  *  along with this program; if not, write to the Free Software\n  *  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n@@ -34,18 +34,7 @@ define('_PC_LOCALE', xl('_PC_LOCALE'));\n //  Defines used in all files\n //=========================================================================\n // new in 3.9.9\n-define('_PC_NOTIFY_ADMIN', xl('Notify Admin About Event Submission/Modification?'));\n-define('_PC_NOTIFY_EMAIL', xl('Admin Email Address'));\n-define('_PC_NOTIFY_UPDATE_MSG', xl(\"The following calendar event has been modifed:\", \"\", \"\", \"\\n\\n\"));\n-define('_PC_NOTIFY_NEW_MSG', xl(\"The following calendar event has been added:\", \"\", \"\", \"\\n\\n\"));\n-define('_PC_NOTIFY_SUBJECT', xl('NOTICE:: PostCalendar Submission/Modification'));\n-//...\n-define('_POSTCALENDARNOAUTH', xl('Not authorised to access PostCalendar module'));\n-define('_POSTCALENDAR_NOAUTH', xl('Not authorised to access PostCalendar module'));\n-define('_PC_CAN_NOT_EDIT', xl('You are not allowed to edit this event'));\n-define('_PC_CAN_NOT_DELETE', xl('You are not allowed to delete this event'));\n-define('_PC_DELETE_ARE_YOU_SURE', xl('Are you sure you want to delete this event?'));\n-define('_PC_ADMIN_YES', xl('Yes'));\n+\n define('_PC_FILTER_USERS', xl('Default/Global'));\n define('_PC_FILTER_USERS_ALL', xl('All Users'));\n define('_PC_FILTER_CATEGORY', xl('All Categories'));\n@@ -54,8 +43,6 @@ define('_USER_BUSY_TITLE', xl('Busy'));\n define('_USER_BUSY_MESSAGE', xl('I am busy during this time.'));\n define('_PC_JUMP_MENU_SUBMIT', xl('go'));\n define('_PC_TPL_VIEW_SUBMIT', xl('change'));\n-define('_PC_SUBMIT_TEXT', xl('Plain Text'));\n-define('_PC_SUBMIT_HTML', xl('HTML'));\n define('_CALJAN', xl('January'));\n define('_CALFEB', xl('February'));\n define('_CALMAR', xl('March'));\n@@ -68,15 +55,6 @@ define('_CALSEP', xl('September'));\n define('_CALOCT', xl('October'));\n define('_CALNOV', xl('November'));\n define('_CALDEC', xl('December'));\n-define('_CALPREVIOUS', xl('Prev'));\n-define('_CALNEXT', xl('Next'));\n-define('_CALLONGFIRSTDAY', xl('Sunday'));\n-define('_CALLONGSECONDDAY', xl('Monday'));\n-define('_CALLONGTHIRDDAY', xl('Tuesday'));\n-define('_CALLONGFOURTHDAY', xl('Wednesday'));\n-define('_CALLONGFIFTHDAY', xl('Thursday'));\n-define('_CALLONGSIXTHDAY', xl('Friday'));\n-define('_CALLONGSEVENTHDAY', xl('Saturday'));\n define('_CALMONDAYSHORT', xl('M{{Monday}}'));\n define('_CALTUESDAYSHORT', xl('T{{Tuesday}}'));\n define('_CALWEDNESDAYSHORT', xl('W{{Wednesday}}'));\n@@ -95,24 +73,6 @@ define('_CAL_DAYVIEW', xl('Day'));\n define('_CAL_WEEKVIEW', xl('Week'));\n define('_CAL_MONTHVIEW', xl('Month'));\n define('_CAL_YEARVIEW', xl('Year'));\n-define('_PC_NEW_EVENT_HEADER', xl('Event'));\n-define('_PC_DATE_TIME', xl('Event Date'));\n-define('_PC_ALLDAY_EVENT', xl('All day event'));\n-define('_PC_TIMED_EVENT', xl('Timed event'));\n-define('_PC_EVENT_TYPE', xl('Event Category'));\n-define('_PC_SHARING', xl('Sharing'));\n-define('_PC_EVENT_TOPIC', xl('Topic'));\n-define('_PC_SHARE_PRIVATE', xl('Private'));\n-define('_PC_SHARE_PUBLIC', xl('Public'));\n-define('_PC_SHARE_SHOWBUSY', xl('Show as Busy'));\n-define('_PC_SHARE_GLOBAL', xl('Global'));\n-define('_PC_EVENT_STREET', xl('Street'));\n-define('_PC_EVENT_CITY', xl('City'));\n-define('_PC_EVENT_STATE', xl('State'));\n-define('_PC_EVENT_POSTAL', xl('Postal'));\n-define('_PC_EVENT_CONTACT', xl('Contact'));\n-define('_PC_EVENT_PHONE', xl('Phone'));\n-define('_PC_EVENT_EMAIL', xl('Email'));\n define('_PC_REPEATING_HEADER', xl('Repeating Info:'));\n define('_PC_NO_REPEAT', xl('Event does not repeat'));\n define('_PC_REPEAT', xl('Event repeats every'));\n@@ -120,9 +80,6 @@ define('_PC_REPEAT_ON', xl('Event repeats on'));\n define('_PC_OF_THE_MONTH', xl('of the month every'));\n define('_PC_END_DATE', xl('End date'));\n define('_PC_NO_END', xl('No end date'));\n-define('_PC_TIMED_DURATION', xl('Duration'));\n-define('_PC_TIMED_DURATION_HOURS', xl('Hours'));\n-define('_PC_TIMED_DURATION_MINUTES', xl('Minutes'));\n define('_PC_EVERY', xl('Every'));\n define('_PC_EVERY_OTHER', xl('Every Other'));\n define('_PC_EVERY_THIRD', xl('Every Third'));\n@@ -151,41 +108,6 @@ define('_PC_EVERY_WEEK', xl('Week(s)'));\n define('_PC_EVERY_MONTH', xl('Month(s)'));\n define('_PC_MONTHS', xl('Month(s)'));\n define('_PC_EVERY_YEAR', xl('Year(s)'));\n-define('_PC_EVERY_MWF', xl('Mon, Wed &amp; Fri'));\n-define('_PC_EVERY_TR', xl('Tues &amp; Thur'));\n-define('_PC_EVERY_MF', xl('Mon thru Fri'));\n-define('_PC_EVERY_SS', xl('Sat &amp; Sun'));\n-define('_PC_EVENT_LOCATION', xl('Event Location'));\n-define('_PC_EVENT_CONTNAME', xl('Contact Person'));\n-define('_PC_EVENT_CONTTEL', xl('Contact Phone Number'));\n-define('_PC_EVENT_CONTEMAIL', xl('Contact Email'));\n-define('_PC_EVENT_WEBSITE', xl('Event Website'));\n-define('_PC_EVENT_FEE', xl('Event Fee'));\n-define('_PC_EVENT_PREVIEW', xl('Preview Event'));\n-define('_PC_EVENT_SUBMIT', xl('Submit Event'));\n-define('_PC_EVENT_TITLE', xl('Event Title'));\n-define('_PC_EVENT_DESC', xl('Event Description'));\n-define('_PC_EVENT_CATEGORY', xl('Event Category'));\n-define('_PC_LIMIT_TITLE', xl('Limit Of Events'));\n-define('_PC_LIMIT_START_TIME', xl('Start Time'));\n-define('_PC_LIMIT_END_TIME', xl('End Time'));\n-define('_PC_TOPIC', xl('Topic'));\n-define('_PC_REQUIRED', xl('*Required'));\n-define('_PC_AM', xl('AM'));\n-define('_PC_PM', xl('PM'));\n-define('_PC_EVENT_SUBMISSION_FAILED', xl('Your submission failed.'));\n-define('_PC_EVENT_SUBMISSION_SUCCESS', xl('Your event has been submitted.'));\n-define('_PC_EVENT_EDIT_SUCCESS', xl('Your event has been modified.'));\n-define('_PC_SUBMIT_ERROR', xl('There are errors with your submission.  These are outlined below.'));\n-define('_PC_SUBMIT_ERROR1', xl('Your start date is greater than your end date'));\n-define('_PC_SUBMIT_ERROR2', xl('Your start date is invalid'));\n-define('_PC_SUBMIT_ERROR3', xl('Your end date is invalid'));\n-define('_PC_SUBMIT_ERROR4', xl('is a required field.'));\n-define('_PC_SUBMIT_ERROR5', xl('Your repeating frequency must be at least 1.'));\n-define('_PC_SUBMIT_ERROR6', xl('Your repeating frequency must be an integer.'));\n-define('_PC_ADMIN_EVENT_ERROR', xl('There was an error while processing your request.'));\n-define('_PC_ADMIN_EVENTS_DELETED', xl('Your event has been deleted.'));\n-@ define('_NO_DIRECT_ACCESS', xl('You can not access this function directly.'));\n define('_PC_CAT_PATIENT', xl('Patient'));\n define('_PC_CAT_PROVIDER', xl('Provider'));\n define('_PC_CAT_CLINIC', xl('Clinic'));\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pnlang/eng/init.php b/interface/main/calendar/modules/PostCalendar/pnlang/eng/init.php\ndeleted file mode 100644\nindex f47ead868..000000000\n--- a/interface/main/calendar/modules/PostCalendar/pnlang/eng/init.php\n+++ /dev/null\n@@ -1,28 +0,0 @@\n-<?php\n-/**\n- *  $Id$\n- *\n- *  PostCalendar::PostNuke Events Calendar Module\n- *  Copyright (C) 2002  The PostCalendar Team\n- *  http://postcalendar.tv\n- *\n- *  This program is free software; you can redistribute it and/or modify\n- *  it under the terms of the GNU General Public License as published by\n- *  the Free Software Foundation; either version 2 of the License, or\n- *  (at your option) any later version.\n- *\n- *  This program is distributed in the hope that it will be useful,\n- *  but WITHOUT ANY WARRANTY; without even the implied warranty of\n- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n- *  GNU General Public License for more details.\n- *\n- *  You should have received a copy of the GNU General Public License\n- *  along with this program; if not, write to the Free Software\n- *  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n- *\n- *  To read the license please read the docs/license.txt or visit\n- *  http://www.gnu.org/copyleft/gpl.html\n- *\n- */\n-define('_CREATETABLEFAILED', xl('Table creation failed'));\n-define('_UPDATETABLEFAILED', xl('Table update failed'));\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pnlang/eng/popup.php b/interface/main/calendar/modules/PostCalendar/pnlang/eng/popup.php\ndeleted file mode 100644\nindex eb6d8b463..000000000\n--- a/interface/main/calendar/modules/PostCalendar/pnlang/eng/popup.php\n+++ /dev/null\n@@ -1,44 +0,0 @@\n-<?php\n-/**\n- *  $Id$\n- *\n- *  PostCalendar::PostNuke Events Calendar Module\n- *  Copyright (C) 2002  The PostCalendar Team\n- *  http://postcalendar.tv\n- *\n- *  This program is free software; you can redistribute it and/or modify\n- *  it under the terms of the GNU General Public License as published by\n- *  the Free Software Foundation; either version 2 of the License, or\n- *  (at your option) any later version.\n- *\n- *  This program is distributed in the hope that it will be useful,\n- *  but WITHOUT ANY WARRANTY; without even the implied warranty of\n- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n- *  GNU General Public License for more details.\n- *\n- *  You should have received a copy of the GNU General Public License\n- *  along with this program; if not, write to the Free Software\n- *  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n- *\n- *  To read the license please read the docs/license.txt or visit\n- *  http://www.gnu.org/copyleft/gpl.html\n- *\n- */\n-define('_CALVIEWEVENT', xl('Event Details'));\n-define('_CALEVENTDATEPREVIEW', xl('Event Date'));\n-define('_CALSTARTTIME', xl('Start'));\n-define('_CALENDTIME', xl('End'));\n-define('_CALARTICLETEXT', xl('Event Description'));\n-define('_CALLOCATION', xl('Location'));\n-define('_CONTTEL', xl('Phone Number'));\n-define('_CONTNAME', xl('Name'));\n-define('_CONTEMAIL', xl('Email'));\n-define('_CONTWEBSITE', xl('Website'));\n-define('_FEE', xl('Fee'));\n-define('_CALPOSTEDBY', xl('Submitted by'));\n-define('_CALPOSTEDON', xl('Posted on'));\n-define('_PC_AM', xl('AM'));\n-define('_PC_PM', xl('PM'));\n-if (!defined('_POSTCALENDARNOAUTH')) {\n-    define('_POSTCALENDARNOAUTH', xl('Not authorised to access PostCalendar module'));\n-}\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pnlang/eng/user.php b/interface/main/calendar/modules/PostCalendar/pnlang/eng/user.php\nindex b841df831..0e94120e2 100644\n--- a/interface/main/calendar/modules/PostCalendar/pnlang/eng/user.php\n+++ b/interface/main/calendar/modules/PostCalendar/pnlang/eng/user.php\n@@ -5,17 +5,17 @@\n  *  PostCalendar::PostNuke Events Calendar Module\n  *  Copyright (C) 2002  The PostCalendar Team\n  *  http://postcalendar.tv\n- *  \n+ *\n  *  This program is free software; you can redistribute it and/or modify\n  *  it under the terms of the GNU General Public License as published by\n  *  the Free Software Foundation; either version 2 of the License, or\n  *  (at your option) any later version.\n- *  \n+ *\n  *  This program is distributed in the hope that it will be useful,\n  *  but WITHOUT ANY WARRANTY; without even the implied warranty of\n  *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  *  GNU General Public License for more details.\n- *  \n+ *\n  *  You should have received a copy of the GNU General Public License\n  *  along with this program; if not, write to the Free Software\n  *  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n@@ -27,22 +27,6 @@\n //=========================================================================\n //  ok, here's the rest of the language defines\n //=========================================================================\n-define('_POSTCALENDAR', xl('PostCalendar')) ;\n-define('_CALEVENTLINK', xl('Create an Event'));\n-define('_CALDAYLINK', xl('Day View'));\n-define('_CALWEEKLINK', xl('Week View'));\n-define('_CALMONTHLINK', xl('Month View'));\n-define('_CALYEARLINK', xl('Year View'));\n-define('_PC_LEGEND', xl('Legend:'));\n-define('_CALSUBMITEVENT', xl('Submit'));\n-define('_CALSEARCHEVENT', xl('Search'));\n-define('_PC_PREV_MONTH', xl('Prev'));\n-define('_PC_NEXT_MONTH', xl('Next'));\n-define('_PC_PREV_DAY', xl('Prev'));\n-define('_PC_NEXT_DAY', xl('Next'));\n-define('_PC_EVENTS', xl('Events for', '', '<b>', '</b>'));\n-define('_PC_SEARCH_FORM', xl('Search the Events'));\n+define('_POSTCALENDAR', xl('PostCalendar'));\n define('_PC_SEARCH_RESULTS', xl('Search Results:'));\n define('_PC_SEARCH_KEYWORDS', xl('Keywords'));\n-define('_PC_SEARCH_PERFORM', xl('Perform Search'));\n-define('_PC_SEARCH_MAX', xl('More than 50 results, please make your search more specific.'));\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pnlang/eng/userapi.php b/interface/main/calendar/modules/PostCalendar/pnlang/eng/userapi.php\nindex 8d762d5e1..6fcc9eba8 100644\n--- a/interface/main/calendar/modules/PostCalendar/pnlang/eng/userapi.php\n+++ b/interface/main/calendar/modules/PostCalendar/pnlang/eng/userapi.php\n@@ -5,17 +5,17 @@\n  *  PostCalendar::PostNuke Events Calendar Module\n  *  Copyright (C) 2002  The PostCalendar Team\n  *  http://postcalendar.tv\n- *  \n+ *\n  *  This program is free software; you can redistribute it and/or modify\n  *  it under the terms of the GNU General Public License as published by\n  *  the Free Software Foundation; either version 2 of the License, or\n  *  (at your option) any later version.\n- *  \n+ *\n  *  This program is distributed in the hope that it will be useful,\n  *  but WITHOUT ANY WARRANTY; without even the implied warranty of\n  *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  *  GNU General Public License for more details.\n- *  \n+ *\n  *  You should have received a copy of the GNU General Public License\n  *  along with this program; if not, write to the Free Software\n  *  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n@@ -24,35 +24,8 @@\n  *  http://www.gnu.org/copyleft/gpl.html\n  *\n  */\n- \n+\n //=========================================================================\n //  ok, here's the rest of the language defines\n //=========================================================================\n-define('_GETFAILED', xl('Items load failed'));\n-define('_CALAPPOINTMENTS', xl('Appointments'));\n-define('_CALEVENTS', xl('Events'));\n-define('_CALMORNING', xl('AM'));\n-define('_CALEVENING', xl('PM'));\n-define('_PC_WEEK', xl('week'));\n-define('_PC_ADD_EVENT', xl('add an event for '));\n-define('_CALVIEWEVENT', xl('Event Details'));\n-define('_CALEVENTDATEPREVIEW', xl('Event Begins'));\n-define('_CALENDDATEPREVIEW', xl('Event Duration'));\n-define('_CALSTARTTIME', xl('Start'));\n-define('_CALENDTIME', xl('End'));\n-define('_CALARTICLETEXT', xl('Event Description'));\n-define('_CALLOCATION', xl('Location'));\n-define('_CONTTEL', xl('Phone Number'));\n-define('_CONTNAME', xl('Name'));\n-define('_CONTEMAIL', xl('Email'));\n-define('_CONTWEBSITE', xl('Website'));\n-define('_FEE', xl('Fee'));\n-define('_CALPOSTEDBY', xl('Submitted by'));\n-define('_CALPOSTEDON', xl('Posted on'));\n-define('_CALCLOSEWINDOW', xl('close window'));\n-define('_CALSAMEDAY', xl('Same Day'));\n-define('_CALALLDAY', xl('All Day'));\n-define('_PC_DUR_HOURS', xl('_PC_DUR_HOURS'));\n-define('_PC_DUR_MINUTES', xl('_PC_DUR_MINUTES'));\n define('_PC_OL_CLOSE', xl('Close'));\n-define('_PC_CLICK_FOR_MORE', xl('click for more'));\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pntables.php b/interface/main/calendar/modules/PostCalendar/pntables.php\nindex 6efa40255..c464d7dc3 100644\n--- a/interface/main/calendar/modules/PostCalendar/pntables.php\n+++ b/interface/main/calendar/modules/PostCalendar/pntables.php\n@@ -24,7 +24,7 @@\n  *  http://www.gnu.org/copyleft/gpl.html\n  *\n  */\n- \n+\n /**\n  * This function is called internally by the core whenever the module is\n  * loaded.  It adds in the information\n@@ -69,7 +69,7 @@ function postcalendar_pntables()\n         'sharing'       => 'pc_sharing',\n         'language'      => 'pc_language'\n         );\n-    \n+\n     // @since version 3.1\n     // new category table\n     $pc_categories = $prefix . '_postcalendar_categories';\n@@ -85,14 +85,5 @@ function postcalendar_pntables()\n         'duration'      =>  'pc_duration',\n         'limit'         =>  'pc_dailylimit'\n         );\n-    $pc_limit = $prefix . '_postcalendar_limits';\n-    $pntable['postcalendar_limits'] = $pc_limit;\n-    $pntable['postcalendar_limits_column'] = array(\n-        'limitid'       =>  'pc_limitid',\n-        'catid'         =>  'pc_catid',\n-        'starttime'     =>  'pc_starttime',\n-        'endtime'       =>  'pc_endtime',\n-        'limit'         =>  'pc_limit'\n-        );\n     return $pntable;\n }\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pntemplates/default/admin/details.html b/interface/main/calendar/modules/PostCalendar/pntemplates/default/admin/details.html\ndeleted file mode 100644\nindex 5cdc3993c..000000000\n--- a/interface/main/calendar/modules/PostCalendar/pntemplates/default/admin/details.html\n+++ /dev/null\n@@ -1,98 +0,0 @@\n-[-*Smarty*-]\n-[-config_load file=\"default.conf\"-]\n-[-include file=\"$TPL_NAME/views/header.html\"-]\n-[-*Load the Language Definitions*-]\n-[-config_load file=\"lang.$USER_LANG\"-]\n-\n-[-* we want to include out stylesheet for this view*-]\n-[-fetch file=\"$TPL_STYLE_PATH/details.css\" assign=\"css\"-]\n-[-eval var=$css-]\n-\n-<table width=\"100%\" border=\"0\" cellpadding=\"5\" cellspacing=\"0\" class=\"calcontainer\">\n-\t<tr>\n-\t\t<td class=\"eventtitle\" width=\"100%\" nowrap=\"nowrap\">\n-\t\t\t<b>[-$A_EVENT.title-]</b>\n-\t\t</td>\n-\t</tr>\n-\t<tr>\n-\t\t<td class=\"eventtime\" width=\"100%\" nowrap=\"nowrap\">\n-\t\t\t[-if $A_EVENT.alldayevent != true-]\n-\t\t\t\t[-if $24HOUR_TIME-]\n-\t\t\t\t\t[-assign var=\"timestamp\" value=$A_EVENT.startTime|date_format:\"%H:%M\"-]\n-\t\t\t\t[-else-]\n-\t\t\t\t\t[-assign var=\"timestamp\" value=$A_EVENT.startTime|date_format:\"%I:%M %p\"-]\n-\t\t\t\t[-/if-]\n-\t\t\t\t[-$timestamp-]\n-\t\t\t[-/if-]\n-\t\t\t\n-\t\t\t[-if $USE_INT_DATES eq true-]\n-\t\t\t\t[-pc_date_format date=$A_EVENT.eventDate format=\"%A, %d %B %Y\"-]\n-\t\t\t[-else-]\t\n-\t\t\t\t[-pc_date_format date=$A_EVENT.eventDate format=\"%A, %B %d %Y\"-]\n-\t\t\t[-/if-]\n-\t\t\t\n-\t\t\t[-if $A_EVENT.alldayevent-]\n-\t\t\t\t[-#_PC_ALL_DAY#-]\n-\t\t\t[-else-]\n-\t\t\t\t[-#_PC_DURATION#-]: [-$A_EVENT.duration_hours-]:[-$A_EVENT.duration_minutes-]\n-\t\t\t[-/if-]\n-\t\t</td>\n-\t</tr>\n-</table>\n-<table width=\"100%\" border=\"0\" cellpadding=\"5\" cellspacing=\"0\" class=\"calcontainer\">\n-\t<tr>\n-\t\t<td valign=\"top\" align=\"left\" width=\"100%\">\n-\t\t\t[-$A_EVENT.hometext-]\n-\t\t</td>\n-\t\t<td valign=\"top\" align=\"left\" nowrap=\"nowrap\">\n-\t\t\t[-if $LOCATION_INFO-]\n-\t\t\t\t<p><b>[-#_PC_LOCATION#-]:</b><br />\n-\t\t\t\t[-if $A_EVENT.location != ''-]\n-\t\t\t\t\t[-$A_EVENT.location-]<br />\n-\t\t\t\t[-/if-]\n-\t\t\t\t[-if $A_EVENT.street1 != ''-]\n-\t\t\t\t\t[-$A_EVENT.street1-]<br />\n-\t\t\t\t[-/if-]\n-\t\t\t\t[-if $A_EVENT.street2 != ''-]\n-\t\t\t\t\t[-$A_EVENT.street2-]<br />\n-\t\t\t\t[-/if-]\n-\t\t\t\t[-if $A_EVENT.city != ''-]\n-\t\t\t\t\t[-$A_EVENT.city-]\n-\t\t\t\t[-/if-]\n-\t\t\t\t[-if $A_EVENT.state != ''-]\n-\t\t\t\t\t[-$A_EVENT.state-]\n-\t\t\t\t[-/if-]\n-\t\t\t\t[-if $A_EVENT.postal != ''-]\n-\t\t\t\t\t[-$A_EVENT.postal-]\n-\t\t\t\t[-/if-]\n-\t\t\t\t</p>\n-\t\t\t[-/if-]\n-\t\t\t[-if $CONTACT_INFO-]\n-\t\t\t\t<p><b>[-#_PC_CONTACT#-]:</b><br />\n-\t\t\t\t[-if $A_EVENT.contname-]\n-\t\t\t\t\t[-$A_EVENT.contname-]<br />\n-\t\t\t\t[-/if-]\n-\t\t\t\t[-if $A_EVENT.conttel-]\n-\t\t\t\t\t[-$A_EVENT.conttel-]<br />\n-\t\t\t\t[-/if-]\n-\t\t\t\t[-if $A_EVENT.contemail-]\n-\t\t\t\t\t<a href=\"mailto:[-$A_EVENT.contemail-]\">[-$A_EVENT.contemail-]</a><br />\n-\t\t\t\t[-/if-]\n-\t\t\t\t[-if $A_EVENT.website-]\n-\t\t\t\t\t<a href=\"[-$A_EVENT.website-]\" rel=\"noopener\" target=\"_blank\">[-$A_EVENT.website-]</a><br />\n-\t\t\t\t[-/if-]\n-\t\t\t\t</p>\n-\t\t\t[-/if-]\n-\t\t\t[-if $A_EVENT.fee != ''-]\n-\t\t\t\t<br />Fee: [-$A_EVENT.fee-]\n-\t\t\t[-/if-]\n-\t\t</td>\n-\t</tr>\n-</table>\n-[-if $ACCESS_EDIT-]\n-\t<a href=\"[-$ADMIN_EDIT-]\" [-$ADMIN_TARGET-]>[-#_PC_ADMIN_EDIT#-]</a>\n-[-/if-]\n-[-if $ACCESS_DELETE-]\n-\t<a href=\"[-$ADMIN_DELETE-]\" [-$ADMIN_TARGET-]>[-#_PC_ADMIN_DELETE#-]</a>\n-[-/if-]\n-[-include file=\"$TPL_NAME/views/footer.html\"-]\n\\ No newline at end of file\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pntemplates/default/admin/submit.html b/interface/main/calendar/modules/PostCalendar/pntemplates/default/admin/submit.html\ndeleted file mode 100644\nindex 0566fe455..000000000\n--- a/interface/main/calendar/modules/PostCalendar/pntemplates/default/admin/submit.html\n+++ /dev/null\n@@ -1,335 +0,0 @@\n-[-*Smarty*-]\n-<!-- main navigation -->\n-[-*Load the Language Definitions*-]\n-[-config_load file=\"lang.$USER_LANG\"-]\n-[-include file=\"$TPL_NAME/views/header.html\"-]\n-[-*Main Navigation*-]\n-[-include file=\"$TPL_NAME/views/global/small_navigation.html\"-]\n-\n-[-literal-]\n-<script language ='Javascript'>\n-function populateOffice(select) {\n-var EventCats = new Array();\n- [-/literal-][-foreach item=cat from=$category-][-literal-]\n- \n-EventCats[\"value[-/literal-][-$cat.id-][-literal-]\"] = new Array();\n-\n-EventCats[\"value[-/literal-][-$cat.id-][-literal-]\"][\"name\"]=\"[-/literal-][-$cat.name-][-literal-]\";\n-EventCats[\"value[-/literal-][-$cat.id-][-literal-]\"][\"duration\"]=\"[-/literal-][-$cat.event_duration-][-literal-]\";\n-EventCats[\"value[-/literal-][-$cat.id-][-literal-]\"][\"repeat\"]=\"[-/literal-][-$cat.event_repeat-][-literal-]\";\n-EventCats[\"value[-/literal-][-$cat.id-][-literal-]\"][\"repeat_freq\"]=\"[-/literal-][-$cat.event_repeat_freq-][-literal-]\";\n-EventCats[\"value[-/literal-][-$cat.id-][-literal-]\"][\"repeat_freq_type\"]=\"[-/literal-][-$cat.event_repeat_freq_type-][-literal-]\";\n-EventCats[\"value[-/literal-][-$cat.id-][-literal-]\"][\"repeat_on_num\"]=\"[-/literal-][-$cat.event_repeat_on_num-][-literal-]\";\n-EventCats[\"value[-/literal-][-$cat.id-][-literal-]\"][\"repeat_on_day\"]=\"[-/literal-][-$cat.event_repeat_on_day-][-literal-]\";\n-EventCats[\"value[-/literal-][-$cat.id-][-literal-]\"][\"repeat_on_freq\"]=\"[-/literal-][-$cat.event_repeat_on_freq-][-literal-]\";\n-EventCats[\"value[-/literal-][-$cat.id-][-literal-]\"][\"recurrspec\"]=\"[-/literal-][-$cat.event_recurrspec-][-literal-]\";\n-EventCats[\"value[-/literal-][-$cat.id-][-literal-]\"][\"durationh\"]=\"[-/literal-][-$cat.event_durationh-][-literal-]\";\n-EventCats[\"value[-/literal-][-$cat.id-][-literal-]\"][\"durationm\"]=\"[-/literal-][-$cat.event_durationm-][-literal-]\";\n-EventCats[\"value[-/literal-][-$cat.id-][-literal-]\"][\"end_date_flag\"]=\"[-/literal-][-$cat.end_date_flag-][-literal-]\";\n-EventCats[\"value[-/literal-][-$cat.id-][-literal-]\"][\"end_date_type\"]=\"[-/literal-][-$cat.end_date_type-][-literal-]\";\n-EventCats[\"value[-/literal-][-$cat.id-][-literal-]\"][\"end_date_freq\"]=\"[-/literal-][-$cat.end_date_freq-][-literal-]\";\n-EventCats[\"value[-/literal-][-$cat.id-][-literal-]\"][\"all_day\"]=\"[-/literal-][-$cat.end_all_day-][-literal-]\";\n-\n-\n- [-/literal-][-/foreach-][-literal-]\n- \n-\n-var that = select.value;\n-var cat = \"value\";\n- cat += select.value;\n-document.add_event.event_subject.value = EventCats.eval(cat).name;\n-document.add_event.event_repeat_freq.value = EventCats.eval(cat).repeat_freq;\n-document.add_event.event_repeat_on_freq.value = EventCats.eval(cat).repeat_on_freq;\n-\n-var found_dur_min = 0;\n-for(var i=0;i < document.add_event.event_dur_minutes.length;i++){\n-\tif(document.add_event.event_dur_minutes.options[i].value == EventCats.eval(cat).durationm){\n-\tfound_dur_min = 1;\n-\t\tdocument.add_event.event_dur_minutes.options[i].selected =true;\n-\t}\n-}\n-\n-if(found_dur_min != 1){\n-document.add_event.event_dur_minutes.options[document.add_event.event_dur_minutes.options.length++]= new Option(EventCats.eval(cat).durationm,EventCats.eval(cat).durationm,false,true);\n-\n-}\n-\n-for(var i=0;i < document.add_event.event_allday.length;i++){\n-\t\n-\tif(document.add_event.event_allday[i].value == EventCats.eval(cat).all_day){\n-\t\t\n-\t\tdocument.add_event.event_allday[i].checked =true;\n-\t}\n-}\n-\n-for(var i=0;i < document.add_event.event_repeat.length;i++){\n-\tif(document.add_event.event_repeat[i].value == EventCats.eval(cat).repeat){\n-\t\t\n-\t\tdocument.add_event.event_repeat[i].checked =true;\n-\t}\n-}\n-\n-for(var i=0;i < document.add_event.event_endtype.length;i++){\n-\tif(document.add_event.event_endtype[i].value == EventCats.eval(cat).end_date_flag){\n-\t\t\n-\t\tdocument.add_event.event_endtype[i].checked =true;\n-\t}\n-}\n-\n-for(var i=0;i < document.add_event.event_repeat_freq_type.length;i++){\n-\tif(document.add_event.event_repeat_freq_type.options[i].value == EventCats.eval(cat).repeat_freq_type){\n-\t\t\n-\t\tdocument.add_event.event_repeat_freq_type.options[i].selected =true;\n-\t}\n-}\n-for(var i=0;i < document.add_event.event_repeat_on_num.length;i++){\n-\tif(document.add_event.event_repeat_on_num.options[i].value == EventCats.eval(cat).repeat_on_num){\n-\t\t\n-\t\tdocument.add_event.event_repeat_on_num.options[i].selected =true;\n-\t}\n-}\n-for(var i=0;i < document.add_event.event_repeat_on_day.length;i++){\n-\tif(document.add_event.event_repeat_on_day.options[i].value == EventCats.eval(cat).repeat_on_day){\n-\t\t\n-\t\tdocument.add_event.event_repeat_on_day.options[i].selected =true;\n-\t}\n-}\n-\n-for(var i=0;i < document.add_event.event_dur_hours.length;i++){\n-\tif(document.add_event.event_dur_hours.options[i].value == EventCats.eval(cat).durationh){\n-\t\t\n-\t\tdocument.add_event.event_dur_hours.options[i].selected =true;\n-\t}\n-}\n-\n-date = new Date();\n-date.setDate(document.add_event.event_startday.options[document.add_event.event_startday.selectedIndex].value);\n-date.setMonth(document.add_event.event_startmonth.options[document.add_event.event_startmonth.selectedIndex].value -1 );\n-date.setFullYear(document.add_event.event_startyear.options[document.add_event.event_startyear.selectedIndex].value);\n-\n-if(EventCats.eval(cat).end_date_flag > 0)\n-{\n-\tvar num = parseInt(EventCats.eval(cat).end_date_freq);\n-\tswitch(EventCats.eval(cat).end_date_type)\n-\t{\n-\t\tcase '0':\n-\t\tcase '4':\n-\t\t\tdate.setDate(date.getDate() + num);\n-\t\t\tbreak;\n-\t\tcase '1':\n-\t\t\tdate.setDate(date.getDate() + (num * 7));\n-\t\t\tbreak;\n-\t\tcase '2':\n-\t\t\tdate.setMonth(date.getMonth() + num);\n-\t\t\tbreak;\n-\t\tcase '3':\n-\t\t\tdate.setFullYear(date.getFullYear() + num);\n-\t\t\tbreak;\n-\t}\n-\t\n-\tfor(var i=0;i < document.add_event.event_endday.length;i++){\n-\t\tif(document.add_event.event_endday.options[i].value == date.getDate()){\n-\t\t\t\n-\t\t\tdocument.add_event.event_endday.options[i].selected =true;\n-\t\t}\n-\t}\n-\t\n-\tfor(var i=0;i < document.add_event.event_endmonth.length;i++){\n-\t\tif(document.add_event.event_endmonth.options[i].value == (date.getMonth() +1)){\n-\t\t\t\n-\t\t\tdocument.add_event.event_endmonth.options[i].selected =true;\n-\t\t}\n-\t}\n-\t\n-\tfor(var i=0;i < document.add_event.event_endyear.length;i++){\n-\t\tif(document.add_event.event_endyear.options[i].value == date.getFullYear()){\n-\t\t\t\n-\t\t\tdocument.add_event.event_endyear.options[i].selected =true;\n-\t\t}\n-\t}\n-\t\n-\tfor(var i=0;i < document.add_event.event_endtype.length;i++){\n-\t\tif(document.add_event.event_endtype[i].value == EventCats.eval(cat).end_date_flag){\n-\t\t\t\n-\t\t\tdocument.add_event.event_endtype[i].checked =true;\n-\t\t}\n-\t}\n-}\n-\n-\n-[-/literal-]\n-[-literal-]\n-\n-}\n-\n-</script>[-/literal-]\n-\n-<form name=\"add_event\" action=\"[-pc_url action=\"submit\"-]\" method=\"post\" enctype=\"application/x-www-form-urlencoded\" onsubmit=\"return top.restoreSession()\">\n-<table border=\"0\" cellpadding=\"1\" cellspacing=\"0\" bgcolor=\"[-$STYLE.BGCOLOR2-]\" width=\"100%\">\n-\t[-if $double_book eq 1-]\n-\t\t[-assign var=disable value=\" readonly \"-]\n-\t[-/if-]\n-    <tr><td align=\"left\" valign=\"middle\" width=\"100%\">\n-        <table border=\"0\" cellpadding=\"2\" cellspacing=\"0\" bgcolor=\"[-$STYLE.BGCOLOR1-]\">\n-\n-<!-- EVENT INFO ROWS -->\n-            <tr>\n-                <th bgcolor=\"[-$STYLE.BGCOLOR2-]\" colspan=\"2\" align=\"left\" valign=\"middle\">[-$NewEventHeader-]</th>\n-            </tr>\n-            <tr>\n-                <td bgcolor=\"[-$STYLE.BGCOLOR1-]\" align=\"left\" valign=\"top\">\n-                [-$EventTitle-]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[-$Required-]<br />\n-                <input type=\"text\" name=\"[-$InputEventTitle-]\" value=\"[-$ValueEventTitle-]\" [-$disable-]/><br />\n-                [-$DateTimeTitle-]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[-$Required-]<br />\n-                [-$SelectDateTime-]<br />\n-                <table border=\"0\" cellpadding=\"0\" cellspacing=\"1\">\n-                    <tr>\n-                        <td valign=\"top\" align=\"left\"><input type=\"radio\" name=\"[-$InputAllday-]\" value=\"[-$ValueAllday-]\" [-$SelectedAllday-] [-$disable-]/></td>\n-                        <td valign=\"top\" align=\"left\">[-$AlldayEventTitle-]</td>\n-                    </tr>\n-                    <tr>\n-                        <td valign=\"top\" align=\"left\"><input type=\"radio\" name=\"[-$InputTimed-]\" value=\"[-$ValueTimed-]\" [-$SelectedTimed-] [-$disable-]/></td>\n-                        <td valign=\"top\" align=\"left\">[-$TimedEventTitle-]</td>\n-                        <td valign=\"top\" align=\"left\">[-$SelectTimedHours-] [-$SelectTimedMinutes-] [-$SelectTimedAMPM-]</td>\n-                    </tr>\n-                    <tr>\n-                        <td valign=\"top\" align=\"left\">&nbsp;</td>\n-                        <td valign=\"top\" align=\"left\">[-$TimedDurationTitle-]</td>\n-                        <td valign=\"top\" align=\"left\">\n-                        [-strip-]\n-                            <select name=\"[-$InputTimedDurationHours-]\" [-$disable-]>\n-                            [-foreach item=time from=$TimedDurationHours-]\n-                                <option id=\"[-$time.name-]\" name=\"[-$time.name-]\" value=\"[-$time.value-]\" [-$time.selected-]>[-$time.name-]</option>\n-                            [-/foreach-]\n-                            </select>\n-                        [-/strip-]\n-                        [-$TimedDurationHoursTitle-]\n-\n-                        [-strip-]\n-                        <select name=\"[-$InputTimedDurationMinutes-]\" [-$disable-]>\n-                            [-foreach item=time from=$TimedDurationMinutes-]\n-                                <option id=\"[-$InputTimedDurationMinutes-][-$time.value-]\" name=\"[-$InputTimedDurationMinutes-][-$time.value-]\" value=\"[-$time.value-]\" [-$time.selected-]>[-$time.name-]</option>\n-                            [-/foreach-]\n-                        </select>\n-                        [-/strip-]\n-                        [-$TimedDurationMinutesTitle-]\n-                        </td>\n-                    </tr>\n-                </table>\n-                [-$EventDescTitle-]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />\n-                <textarea name=\"[-$InputEventDesc-]\" wrap=\"virtual\" rows=\"2\" cols=\"40\" [-$disable-]>[-$ValueEventDesc-]</textarea>\n-\t\t\t\t</td>\n-\n-                <td bgcolor=\"[-$STYLE.BGCOLOR1-]\" align=\"left\" valign=\"top\">\n-                [-if $displayTopics eq 1-]\n-                    [-$EventTopicTitle-]<br />\n-                    [-strip-]\n-                    <select name=\"[-$InputEventTopic-]\" [-$disable-]>\n-                    [-foreach item=topic from=$topics-]\n-                        <option id=\"[-$topic.name-]\" name=\"[-$topic.name-]\" value=\"[-$topic.value-]\" [-$topic.selected-]>[-$topic.name-]</option>\n-                    [-/foreach-]\n-                    </select>\n-                    [-/strip-]\n-                    <br />\n-                [-/if-]\n-\t\t\t\t<table>\n-\t\t\t\t<tr><td>Patient<br />\n-\t\t\t\t<input type=\"text\"\tname=\"patient_name\" size=\"15\" value=\"[-$patient_value-]\" readonly >\n-\t\t\t\t<input type=\"hidden\" name=\"event_pid\" value=\"[-$event_pid-]\">\n-\t\t\t\t<a href=\"javascript:{}\" onclick=\"top.restoreSession();var URL='[-$webroot-]/controller.php?patient_finder&find&form_id=add_event[\\'event_pid\\']&form_name=add_event[\\'patient_name\\']&pid=true'; window.open(URL, 'add_event', 'toolbar=0,scrollbars=1,location=0,statusbar=1,menubar=0,resizable=1,width=450,height=400,left = 425,top = 250');\">\n-\t\t\t\t\t<img src=\"[-php-] echo $GLOBALS['images_static_relative']; [-/php-]/stock_search-16.png\" border=\"0\" </a>\n-                \n-\t\t\t\t</td><td>&nbsp;</td><td>\n-\t\t\t\tProvider<br />\n-                [-strip-]\n-                <select name=\"event_userid\" [-$disable-]>\n-                [-foreach item=provider from=$user-]\n-                    <option value=\"[-$provider.id-]\"\n-\t\t\t\t\t[-if $event_aid eq $provider.id-]\n-\t\t\t\t\tselected\n-\t\t\t\t\t[-elseif $ProviderID eq $provider.id and empty($event_aid) -]\n-\t\t\t\t\tselected\n-\t\t\t\t\t[-/if-]\n-\t\t\t\t\t>[-$provider.lname-], [-$provider.fname-]</option>\n-                [-/foreach-]\n-                </select>\n-                [-/strip-]\n-\t\t\t\t</td>\n-\t\t\t\t<td>&nbsp;</td>\n-\t\t\t\t<td>\n-                [-$EventCategoriesTitle-]<br />\n-                [-strip-]\n-                <select name=\"[-$InputEventCategory-]\" [-$disable-] onChange=\"populateOffice(this);\">\n-                [-foreach item=category from=$categories-]\n-                \t\n-                    <option value=\"[-$category.value-]\" [-$category.selected-]>[-$category.name-]</option>\n-                [-/foreach-]\n-                </select>\n-                [-/strip-]\n-\t\t\t\t</td></tr></table>\n-\t\t\t<hr>\n-\t\t\t<table border=\"0\">\n-\n-            <tr>\n-                <td bgcolor=\"[-$STYLE.BGCOLOR1-]\" colspan=\"2\" align=\"left\" valign=\"middle\" width=\"100%\">\n-\t\t\t\t[-$EndDateTitle-]&nbsp;\n-                <input type=\"radio\" name=\"[-$InputEndOn-]\" value=\"[-$ValueEndOn-]\" [-$SelectedEndOn-] [-$disable-]/>&nbsp;\n-                [-$SelectEndDate-]\n-                &nbsp;\n-                <input type=\"radio\" name=\"[-$InputNoEnd-]\" value=\"[-$ValueNoEnd-]\" [-$SelectedNoEnd-] [-$disable-]/>&nbsp;\n-                [-$NoEndDateTitle-]\n-\t\t\t\t<br />\n-\t\t\t\t<input type=\"radio\" name=\"[-$InputNoRepeat-]\" value=\"[-$ValueNoRepeat-]\" [-$SelectedNoRepeat-] [-$disable-]/>\n-                [-$NoRepeatTitle-]<br />\n-\n-                <input type=\"radio\" name=\"[-$InputRepeat-]\" value=\"[-$ValueRepeat-]\" [-$SelectedRepeat-] [-$disable-]/>\n-                [-$RepeatTitle-]\n-                <input type=\"text\" name=\"[-$InputRepeatFreq-]\" value=\"[-$InputRepeatFreqVal-]\" size=\"4\" [-$disable-]/>\n-                <select name=\"[-$InputRepeatFreqType-]\" [-$disable-]>\n-                [-foreach item=repeat from=$repeat_freq_type-]\n-                    <option id=\"[-$InputRepeatFreqType-][-$repeat.value-]\" name=\"[-$InputRepeatFreqType-][-$repeat.value-]\" value=\"[-$repeat.value-]\" [-$repeat.selected-]>[-$repeat.name-]</option>\n-                [-/foreach-]\n-                </select>\n-                <br />\n-\n-                <input type=\"radio\" name=\"[-$InputRepeatOn-]\" value=\"[-$ValueRepeatOn-]\" [-$SelectedRepeatOn-] [-$disable-]/>\n-                [-$RepeatOnTitle-]\n-                <select name=\"[-$InputRepeatOnNum-]\" [-$disable-]>\n-                [-foreach item=repeat from=$repeat_on_num-]\n-                    <option id=\"[-$repeat.name-]\" name=\"[-$repeat.name-]\" value=\"[-$repeat.value-]\" [-$repeat.selected-]>[-$repeat.name-]</option>\n-                [-/foreach-]\n-                </select>\n-                <select name=\"[-$InputRepeatOnDay-]\" [-$disable-]>\n-                [-foreach item=repeat from=$repeat_on_day-]\n-                    <option id=\"[-$repeat.name-]\" name=\"[-$repeat.name-]\" value=\"[-$repeat.value-]\" [-$repeat.selected-]>[-$repeat.name-]</option>\n-                [-/foreach-]\n-                </select>&nbsp;\n-                [-$OfTheMonthTitle-]&nbsp;\n-\t\t\t\t<input type=\"text\" name=\"[-$InputRepeatOnFreq-]\" value=\"[-$InputRepeatOnFreqVal-]\" size=\"4\" [-$disable-]/>\n-\t\t\t\t[-$MonthsTitle-].\n-                <br /><br />\n-\n-\t\t\t\t<br />\n-\t\t\t\t[-$FormSubmit-]\n-                </td>\n-            </tr>\n-        </table>\n-\n-                </td>\n-            </tr>\n-\t\t\t</table>\n-<!-- EVENT INFO ROWS -->\n-\n-\n-     </td></tr>\n-</table>\n-<input type=\"hidden\" name=\"double_book\" value=\"[-$double_book-]\"/>\n-<input type=\"hidden\" name=\"event_sharing\" value=\"1\"><!-- default of 1 is sharing type \"public\" -->\n-<input type=\"hidden\" name=\"pc_html_or_text\" value=\"text\" selected>\n-[-*$EventHTMLorText*-]\n-\n-[-$FormHidden-]\n-\n-\n-</form>\n-[-include file=\"$TPL_NAME/views/footer.html\"-]\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pntemplates/default/admin/submit_category_limit.html b/interface/main/calendar/modules/PostCalendar/pntemplates/default/admin/submit_category_limit.html\ndeleted file mode 100644\nindex 9891c303c..000000000\n--- a/interface/main/calendar/modules/PostCalendar/pntemplates/default/admin/submit_category_limit.html\n+++ /dev/null\n@@ -1,205 +0,0 @@\n-[-*Smarty*-]\n-<!-- main navigation -->\n-[-*Load the Language Definitions*-]\n-[-config_load file=\"lang.$USER_LANG\"-]\n-    \n-<html>\n-<head></head>\n-<body bgcolor=\"[-$BGCOLOR2-]\"/>\n-[-$AdminMenu-]\n-<form name=\"limit\" action=\"[-$action-]\" method=\"post\" enctype=\"application/x-www-form-urlencoded\">\n-<table border=\"1\" cellpadding=\"5\" cellspacing=\"0\">\n-\t\t\t<tr>\n-\t\t\t\t<td>\n-\t\t\t\t\t<table  width ='%100' border='1'>\n-\t\t\t\t\t\t<tr>\n-\t\t\t\t\t\t\t<td colspan ='5'>\n-\t\t\t\t\t\t\t\t<table width ='%100'>\n-\t\t\t\t\t\t\t\t\t<th align=\"center\" >[-$_PC_NEW_LIMIT_TITLE-]</th>\n-\t\t\t\t\t\t\t\t\t</tr>\n-\t\t\t\t\t\t\t\t</table>\n-\t\t\t\t\t\t\t</td>\n-\t\t\t\t\t\t</tr>\n-\t\t\t\t\t\t<tr>\n-\t\t\t\t\t\t\t<td>\n-\t\t\t\t\t\t\t\t<table cellspacing='8' cellpadding='2'>\n-\t\t\t\t\t\t\t\t<tr><td>[-$catTitle-]</td><td>[-$StartTimeTitle-]</td><td>[-$EndTimeTitle-]</td><td>[-$LimitTitle-]</td></tr>\n-            \t\t\t\t\t\t<tr>\n-            \t\t\t\t\t\t\t<td valign=\"top\" align=\"left\">\n-            \t\t\t\t\t\t\t\t<select name=\"new[-$catid-]\">\n-                \t\t\t\t\t\t\t\t[-foreach item=repeat from=$categories-]\n-                    \t\t\t\t\t\t\t\t<option value=\"[-$repeat.id-]\">\n-                    \t\t\t\t\t\t\t\t\t[-$repeat.name-]\n-                    \t\t\t\t\t\t\t\t</option>\n-                \t\t\t\t\t\t\t\t[-/foreach-]\n-                \t\t\t\t\t\t\t</select>\n-                \t\t\t\t\t\t</td>\n-            \t\t\t\t\t\t\t<td valign=\"top\" align=\"left\">\n-    \t\t\t\t\t\t\t\t\t\t<select name=\"new[-$starttimeh-]\">\n-                \t\t\t\t\t\t\t\t[-foreach item=repeat from=$hour_array-]\n-                    \t\t\t\t\t\t\t\t<option value=\"[-$repeat-]\">\n-                    \t\t\t\t\t\t\t\t\t[-$repeat-]\n-                    \t\t\t\t\t\t\t\t</option>\n-                \t\t\t\t\t\t\t\t[-/foreach-]\n-                \t\t\t\t\t\t\t</select>:\n-                \t\t\t\t\t\t\t\n-                \t\t\t\t\t\t\t<select name=\"new[-$starttimem-]\">\n-                \t\t\t\t\t\t\t\t[-foreach item=repeat from=$min_array-]\n-                    \t\t\t\t\t\t\t\t<option value=\"[-$repeat-]\">\n-                    \t\t\t\t\t\t\t\t\t[-$repeat-]\n-                    \t\t\t\t\t\t\t\t</option>\n-                \t\t\t\t\t\t\t\t[-/foreach-]\n-                \t\t\t\t\t\t\t</select>\n-               \t\t\t\t\t\t\t\n-                \t\t\t\t\t\t</td>\n-               \t\t\t\t\t\t\t<td valign=\"top\" align=\"left\">                \t\t\t\t\t\t\t\n-                \t\t\t\t\t\t\t<select name=\"new[-$endtimeh-]\">\n-                \t\t\t\t\t\t\t\t[-foreach item=repeat from=$hour_array-]\n-                    \t\t\t\t\t\t\t\t<option value=\"[-$repeat-]\" >\n-                    \t\t\t\t\t\t\t\t\t[-$repeat-]\n-                    \t\t\t\t\t\t\t\t</option>\n-                \t\t\t\t\t\t\t\t[-/foreach-]\n-                \t\t\t\t\t\t\t</select>:\n-                \t\t\t\t\t\t\t<select name=\"new[-$endtimem-]\">\n-                \t\t\t\t\t\t\t\t[-foreach item=repeat from=$min_array-]\n-                    \t\t\t\t\t\t\t\t<option value=\"[-$repeat-]\">\n-                    \t\t\t\t\t\t\t\t\t[-$repeat-]\n-                    \t\t\t\t\t\t\t\t</option>\n-                \t\t\t\t\t\t\t\t[-/foreach-]\n-                \t\t\t\t\t\t\t</select>\n-                \t\t\t\t\t\n-               \t\t\t\t\t\t\t</td>\n-               \t\t\t\t\t\t\t<td align='right'>\n-               \t\t\t\t\t\t\t\t<input type=\"text\" name=\"new[-$InputLimit-]\" value=\"\" size=\"4\" />\n-               \t\t\t\t\t\t\t</td>\n-                \t\t\t\t\t</tr>\n-                \t\t\t\t</table>\n-                \t\t\t\t\n-                \t\t\t</td>\n-           \t\t\t\t</tr>\n-            \t\t</table>\n-            \t\t[-$FormSubmit-]\n-            \t</td>\n-            </tr>\n-\t</table>\n-<table border=\"1\" cellpadding=\"5\" cellspacing=\"0\">\n-\t<!--START REPEATION SECTION -->\n-\t\n-\t\t[-foreach item=limit from=$limits-]\n-\t\t[-assign var=\"shour\" value=$limit.startTime|date_format:\"%H\"-]\n-\t\t[-assign var=\"smin\" value=$limit.startTime|date_format:\"%M\"-]\n-\t\t[-assign var=\"ehour\" value=$limit.endTime|date_format:\"%H\"-]\n-\t\t[-assign var=\"emin\" value=$limit.endTime|date_format:\"%M\"-]\n-\t\t\n-\t\t\n-\t\t[-foreach item=repeat from=$categories-]\n-       \t\t\n-       \t\t[-if $repeat.id == $limit.catid -]\n-       \t\t\t\t[-assign var=\"title_color\" value=$repeat.color -]\n-       \t\t\t\n-       \t\t[-/if-]\n-        [-/foreach-]\t\n-\t\t\t<tr>\n-\t\t\t\t<td>\n-\t\t\t\t\t<table  width ='%100' border='1'>\n-\t\t\t\t\t\t<tr>\n-\t\t\t\t\t\t\t<td colspan ='5'>\n-\t\t\t\t\t\t\t\t<table width ='%100'>\n-\t\t\t\t\t\t\t\t\t<th align=\"center\"  bgcolor=\"[-$title_color-]\">[-$_PC_LIMIT_TITLE-]</th>\n-\t\t\t\t\t\t\t\t\t</tr>\n-\t\t\t\t\t\t\t\t</table>\n-\t\t\t\t\t\t\t</td>\n-\t\t\t\t\t\t</tr>\n-\t\t\t\t\t\t<tr>\n-\t\t\t\t\t\t\t<td>\n-\t\t\t\t\t\t\t<input type=\"checkbox\" name=\"del[]\" value=\"[-$limit.limitid-]\"/>\n-\t\t\t\t\t\t\t\t\t\t[-$_PC_CAT_DELETE-]\n-\t\t\t\t\t\t\t</td>\n-\t\t\t\t\t\t\t<td>[-$limit.starttime|date_format:\"%H\" -]\n-\t\t\t\t\t\t\t\t<input type=\"hidden\" name=\"id[]\" value=\"[-$limit.limitid-]\"/>\n-\t\t\t\t\t\t\t\t<table cellspacing='8' cellpadding='2'>\n-\t\t\t\t\t\t\t\t<tr><td>[-$catTitle-]</td><td>[-$StartTimeTitle-]</td><td>[-$EndTimeTitle-]</td><td>[-$LimitTitle-]</td></tr>\n-            \t\t\t\t\t\t<tr>\n-            \t\t\t\t\t\t\t<td valign=\"top\" align=\"left\">\n-            \t\t\t\t\t\t\t\t<select name=\"[-$catid-][]\">\n-                \t\t\t\t\t\t\t\t[-foreach item=repeat from=$categories-]\n-                    \t\t\t\t\t\t\t\t<option value=\"[-$repeat.id-]\"\n-                    \t\t\t\t\t\t\t\t\t[-if $repeat.id == $limit.catid -]\n-                    \t\t\t\t\t\t\t\t\t\tselected\n-                    \t\t\t\t\t\t\t\t\t[-/if-]\n-                    \t\t\t\t\t\t\t\t\t>\n-                    \t\t\t\t\t\t\t\t\t[-$repeat.name-]\n-                    \t\t\t\t\t\t\t\t</option>\n-                \t\t\t\t\t\t\t\t[-/foreach-]\n-                \t\t\t\t\t\t\t</select>\n-                \t\t\t\t\t\t</td>\n-            \t\t\t\t\t\t\t<td valign=\"top\" align=\"left\">\n-            \t\t\t\t\t\t\t\t<select name=\"[-$starttimeh-][]\">\n-                \t\t\t\t\t\t\t\t[-foreach item=repeat from=$hour_array-]\n-                    \t\t\t\t\t\t\t\t<option value=\"[-$repeat-]\"\n-                    \t\t\t\t\t\t\t\t\t[-if $repeat == $shour -]\n-                    \t\t\t\t\t\t\t\t\t\tselected \n-                    \t\t\t\t\t\t\t\t\t[-/if-]>\n-                    \t\t\t\t\t\t\t\t\t[-$repeat-]\n-                    \t\t\t\t\t\t\t\t</option>\n-                \t\t\t\t\t\t\t\t[-/foreach-]\n-                \t\t\t\t\t\t\t</select>:\n-                \t\t\t\t\t\t\t\n-                \t\t\t\t\t\t\t<select name=\"[-$starttimem-][]\">\n-                \t\t\t\t\t\t\t\t[-foreach item=repeat from=$min_array-]\n-                    \t\t\t\t\t\t\t\t<option value=\"[-$repeat-]\"\n-                    \t\t\t\t\t\t\t\t\t[-if $repeat == $smin -]\n-                    \t\t\t\t\t\t\t\t\t\tselected \n-                    \t\t\t\t\t\t\t\t\t[-/if-]>\n-                    \t\t\t\t\t\t\t\t\t[-$repeat-]\n-                    \t\t\t\t\t\t\t\t</option>\n-                \t\t\t\t\t\t\t\t[-/foreach-]\n-                \t\t\t\t\t\t\t</select>\n-                \t\t\t\t\t\n-                \t\t\t\t\t\t</td>\n-               \t\t\t\t\t\t\t<td valign=\"top\" align=\"left\">                \t\t\t\t\t\t\t\n-                \t\t\t\t\t\t\t<select name=\"[-$endtimeh-][]\">\n-                \t\t\t\t\t\t\t\t[-foreach item=repeat from=$hour_array-]\n-                    \t\t\t\t\t\t\t\t<option value=\"[-$repeat-]\" \n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t[-if $repeat == $ehour -]\n-                    \t\t\t\t\t\t\t\t\t\tselected \n-                    \t\t\t\t\t\t\t\t\t[-/if-]>\n-                    \t\t\t\t\t\t\t\t\t[-$repeat-]\n-                    \t\t\t\t\t\t\t\t</option>\n-                \t\t\t\t\t\t\t\t[-/foreach-]\n-                \t\t\t\t\t\t\t</select>:\n-                \t\t\t\t\t\t\t<select name=\"[-$endtimem-][]\">\n-                \t\t\t\t\t\t\t\t[-foreach item=repeat from=$min_array-]\n-                    \t\t\t\t\t\t\t\t<option value=\"[-$repeat-]\"\n-                    \t\t\t\t\t\t\t\t\t[-if $repeat == $emin -]\n-                    \t\t\t\t\t\t\t\t\t\tselected \n-                    \t\t\t\t\t\t\t\t\t[-/if-]>\n-                    \t\t\t\t\t\t\t\t\t[-$repeat-]\n-                    \t\t\t\t\t\t\t\t</option>\n-                \t\t\t\t\t\t\t\t[-/foreach-]\n-                \t\t\t\t\t\t\t</select>\n-                \t\t\t\t\t\t\t\n-               \t\t\t\t\t\t\t</td>\n-               \t\t\t\t\t\t\t<td align='right'>\n-               \t\t\t\t\t\t\t\t<input type=\"text\" name=\"[-$InputLimit-][]\" value=\"[-$limit.limit-]\" size=\"4\" />\n-               \t\t\t\t\t\t\t</td>\n-                \t\t\t\t\t</tr>\n-                \t\t\t\t</table>\n-                \t\t\t\t\n-                \t\t\t</td>\n-           \t\t\t\t</tr>\n-            \t\t</table>\n-            \t\t[-$FormSubmit-]\n-            \t</td>\n-            </tr>\n- \t\t<!-- /REPEATING ROWS -->\n-\t\t[-/foreach-]\n-\t</table>\n-\n-[-*$EventHTMLorText*-]\n-\n-[-$FormHidden-]\n-\n-\n-</form>\n-[-include file=\"$TPL_NAME/views/footer.html\"-]\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pntemplates/default/config/lang.eng b/interface/main/calendar/modules/PostCalendar/pntemplates/default/config/lang.eng\nindex 684ef1e27..f1827eaaa 100644\n--- a/interface/main/calendar/modules/PostCalendar/pntemplates/default/config/lang.eng\n+++ b/interface/main/calendar/modules/PostCalendar/pntemplates/default/config/lang.eng\n@@ -14,17 +14,10 @@ _PC_ADMIN_EDIT=Edit\n _PC_ADMIN_DELETE=Delete\n \n _PC_MV_WEEK=week\n-_PC_NO_EVENTS=No Events\n \n _PC_SEARCH_RESULTS=Search Results\n-_PC_SUBMIT=Submit\n \n _PC_SEARCH_KEYWORDS=Keywords\n-_PC_SEARCH_AND=AND\n-_PC_SEARCH_OR=OR\n-_PC_SEARCH_IN=IN\n-_PC_SEARCH_NO_RESULTS=No Results\n-_PC_SEARCH_ANY_CATEGORY=Any Category\n _PC_SEARCH_ANY_TOPIC=Any Topic\n \n _PC_LOCATION=Location\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/blankbtn.gif b/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/blankbtn.gif\ndeleted file mode 100644\nindex 0b3ead530..000000000\nBinary files a/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/blankbtn.gif and /dev/null differ\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/bottombtn.gif b/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/bottombtn.gif\ndeleted file mode 100644\nindex 4dcfd931a..000000000\nBinary files a/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/bottombtn.gif and /dev/null differ\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/clock01.gif b/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/clock01.gif\ndeleted file mode 100644\nindex 49597725c..000000000\nBinary files a/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/clock01.gif and /dev/null differ\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/clock02.gif b/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/clock02.gif\ndeleted file mode 100644\nindex 47910d3f2..000000000\nBinary files a/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/clock02.gif and /dev/null differ\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/day.gif b/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/day.gif\ndeleted file mode 100644\nindex cde662ff7..000000000\nBinary files a/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/day.gif and /dev/null differ\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/demo_hotlink.gif b/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/demo_hotlink.gif\ndeleted file mode 100644\nindex 75426952c..000000000\nBinary files a/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/demo_hotlink.gif and /dev/null differ\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/downbtn.gif b/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/downbtn.gif\ndeleted file mode 100644\nindex 4dcfd931a..000000000\nBinary files a/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/downbtn.gif and /dev/null differ\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/encounter_hotlink.gif b/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/encounter_hotlink.gif\ndeleted file mode 100644\nindex 8061032a1..000000000\nBinary files a/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/encounter_hotlink.gif and /dev/null differ\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/events0.gif b/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/events0.gif\ndeleted file mode 100644\nindex 3c054b14b..000000000\nBinary files a/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/events0.gif and /dev/null differ\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/events1.gif b/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/events1.gif\ndeleted file mode 100644\nindex 71c6cecbf..000000000\nBinary files a/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/events1.gif and /dev/null differ\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/events2.gif b/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/events2.gif\ndeleted file mode 100644\nindex a6e1668d8..000000000\nBinary files a/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/events2.gif and /dev/null differ\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/events3.gif b/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/events3.gif\ndeleted file mode 100644\nindex f484f7b48..000000000\nBinary files a/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/events3.gif and /dev/null differ\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/events4.gif b/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/events4.gif\ndeleted file mode 100644\nindex a8018e5b4..000000000\nBinary files a/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/events4.gif and /dev/null differ\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/left.gif b/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/left.gif\ndeleted file mode 100644\nindex 89123db7a..000000000\nBinary files a/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/left.gif and /dev/null differ\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/leftbtn.gif b/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/leftbtn.gif\ndeleted file mode 100644\nindex 118c6d3fb..000000000\nBinary files a/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/leftbtn.gif and /dev/null differ\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/month.gif b/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/month.gif\ndeleted file mode 100644\nindex 083a4f6f9..000000000\nBinary files a/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/month.gif and /dev/null differ\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/new.gif b/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/new.gif\ndeleted file mode 100644\nindex 50db215c6..000000000\nBinary files a/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/new.gif and /dev/null differ\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/new.jpg b/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/new.jpg\ndeleted file mode 100644\nindex cab3a3c9d..000000000\nBinary files a/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/new.jpg and /dev/null differ\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/print.gif b/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/print.gif\ndeleted file mode 100644\nindex a2471d66a..000000000\nBinary files a/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/print.gif and /dev/null differ\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/repeating.gif b/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/repeating.gif\ndeleted file mode 100644\nindex 1a4ff90e6..000000000\nBinary files a/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/repeating.gif and /dev/null differ\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/repeating.png b/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/repeating.png\ndeleted file mode 100644\nindex bfb9d49db..000000000\nBinary files a/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/repeating.png and /dev/null differ\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/repeating10.png b/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/repeating10.png\ndeleted file mode 100644\nindex 9b686a812..000000000\nBinary files a/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/repeating10.png and /dev/null differ\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/repeating14.png b/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/repeating14.png\ndeleted file mode 100644\nindex e3d30db3d..000000000\nBinary files a/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/repeating14.png and /dev/null differ\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/right.gif b/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/right.gif\ndeleted file mode 100644\nindex ca21b951f..000000000\nBinary files a/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/right.gif and /dev/null differ\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/rightbtn.gif b/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/rightbtn.gif\ndeleted file mode 100644\nindex c23570a76..000000000\nBinary files a/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/rightbtn.gif and /dev/null differ\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/topbtn.gif b/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/topbtn.gif\ndeleted file mode 100644\nindex 286a21b8f..000000000\nBinary files a/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/topbtn.gif and /dev/null differ\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/upbtn.gif b/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/upbtn.gif\ndeleted file mode 100644\nindex 286a21b8f..000000000\nBinary files a/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/upbtn.gif and /dev/null differ\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/week.gif b/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/week.gif\ndeleted file mode 100644\nindex 37e7d6eac..000000000\nBinary files a/interface/main/calendar/modules/PostCalendar/pntemplates/default/images/week.gif and /dev/null differ\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pntemplates/default/style/calendarblock.css b/interface/main/calendar/modules/PostCalendar/pntemplates/default/style/calendarblock.css\ndeleted file mode 100644\nindex 075193235..000000000\n--- a/interface/main/calendar/modules/PostCalendar/pntemplates/default/style/calendarblock.css\n+++ /dev/null\n@@ -1,49 +0,0 @@\n-<style>\n-td.blockmonthon \t\t\t{ background-color: [-$STYLE.BGCOLOR1-]; border: 1px solid [-$STYLE.BGCOLOR2-]; }\n-td.blockmonthoff \t\t\t{ background-color: [-$STYLE.BGCOLOR2-]; border: 1px solid [-$STYLE.BGCOLOR1-]; }\n-td.blockmonthtoday  \t\t{ background-color: [-$STYLE.HIGHLIGHT_COLOR-]; border: 1px solid [-$STYLE.BGCOLOR2-]; }\n-td.blockmonthheader \t\t{ background-color: [-$STYLE.BGCOLOR2-]; font-size: 8pt; font-weight: bold; }\n-\n-table.blockmonthheader  \t{ background-color: [-$STYLE.BGCOLOR2-]; border: 1px solid #000000; }\n-.blockmonthheader a:link \t{ font-size: 8pt; font-weight: bold; text-decoration: none; padding-left: 1px; padding-right: 1px; }\n-.blockmonthheader a:hover \t{ font-size: 8pt; font-weight: bold; text-decoration: none; padding-left: 1px; padding-right: 1px; }\n-.blockmonthheader a:active \t{ font-size: 8pt; font-weight: bold; text-decoration: none; padding-left: 1px; padding-right: 1px; }\n-.blockmonthheader a:visited\t{ font-size: 8pt; font-weight: bold; text-decoration: none; padding-left: 1px; padding-right: 1px; }\n-\n-td.blockdaynames \t\t\t{ background-color: [-$STYLE.BGCOLOR1-]; border: 1px solid [-$STYLE.BGCOLOR1-]; font-size: 8pt; font-weight: normal; text-decoration: none; }\n-\n-table.blockcalcontainer \t{ border: 1px solid #000000; }\n-td.blockcalcontainer \t\t{ border: 1px solid #000000; }\n-\n-td.blockweeklink \t\t\t{ background-color: [-$STYLE.BGCOLOR1-]; border: 1px solid [-$STYLE.BGCOLOR1-]; }\n-.blockweeklink a:link \t\t{ color: [-$STYLE.TEXTCOLOR1-]; font-size: 7pt; font-weight: normal; text-decoration: none; }\n-.blockweeklink a:hover\t\t{ color: [-$STYLE.TEXTCOLOR1-]; font-size: 7pt; font-weight: normal; text-decoration: none; }\n-.blockweeklink a:visited\t{ color: [-$STYLE.TEXTCOLOR1-]; font-size: 7pt; font-weight: normal; text-decoration: none; }\n-.blockweeklink a:active \t{ color: [-$STYLE.TEXTCOLOR1-]; font-size: 7pt; font-weight: normal; text-decoration: none; }\n-\n-a.blockevent-none:link\t\t{ color: [-$STYLE.TEXTCOLOR1-]; font-size: 10px; font-weight: normal; text-decoration: none; }\n-a.blockevent-none:hover     { color: [-$STYLE.TEXTCOLOR1-]; font-size: 10px; font-weight: normal; text-decoration: none; }\n-a.blockevent-none:visited   { color: [-$STYLE.TEXTCOLOR1-]; font-size: 10px; font-weight: normal; text-decoration: none; }\n-a.blockevent-none:active    { color: [-$STYLE.TEXTCOLOR1-]; font-size: 10px; font-weight: normal; text-decoration: none; }\n-\n-a.blockevent-one:link\t  \t{ color: #006600; font-size: 10px; font-weight: normal; text-decoration: none; }\n-a.blockevent-one:hover\t  \t{ color: #006600; font-size: 10px; font-weight: normal; text-decoration: none; }\n-a.blockevent-one:visited    { color: #006600; font-size: 10px; font-weight: normal; text-decoration: none; }\n-a.blockevent-one:active     { color: #006600; font-size: 10px; font-weight: normal; text-decoration: none; }\n-\n-a.blockevent-two:link\t  \t{ color: #006666; font-size: 10px; font-weight: normal; text-decoration: none; }\n-a.blockevent-two:hover\t  \t{ color: #006666; font-size: 10px; font-weight: normal; text-decoration: none; }\n-a.blockevent-two:visited    { color: #006666; font-size: 10px; font-weight: normal; text-decoration: none; }\n-a.blockevent-two:active     { color: #006666; font-size: 10px; font-weight: normal; text-decoration: none; }\n-\n-a.blockevent-three:link     { color: #0066cc; font-size: 10px; font-weight: normal; text-decoration: none; }\n-a.blockevent-three:hover    { color: #0066cc; font-size: 10px; font-weight: normal; text-decoration: none; }\n-a.blockevent-three:visited  { color: #0066cc; font-size: 10px; font-weight: normal; text-decoration: none; }\n-a.blockevent-three:active   { color: #0066cc; font-size: 10px; font-weight: normal; text-decoration: none; }\n-\n-td.eventlink \t\t\t\t{ padding: 2px; font-size: 10px; font-weight: normal; text-decoration: none; }\n-.eventlink a:link \t\t\t{ padding: 2px; font-size: 10px; font-weight: normal; text-decoration: none; }\n-.eventlink a:hover  \t\t{ padding: 2px; font-size: 10px; font-weight: normal; text-decoration: none; }\n-.eventlink a:visited  \t\t{ padding: 2px; font-size: 10px; font-weight: normal; text-decoration: none; }\n-.eventlink a:active  \t\t{ padding: 2px; font-size: 10px; font-weight: normal; text-decoration: none; }\n-</style>\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pntemplates/default/style/details.css b/interface/main/calendar/modules/PostCalendar/pntemplates/default/style/details.css\ndeleted file mode 100644\nindex 55da3277f..000000000\n--- a/interface/main/calendar/modules/PostCalendar/pntemplates/default/style/details.css\n+++ /dev/null\n@@ -1,9 +0,0 @@\n-<style>\n-td.eventtitle { background-color: [-$STYLE.BGCOLOR2-]; font-size: 14pt; font-weight: bold; }\n-table.eventtitle { background-color: [-$STYLE.BGCOLOR2-]; border: 1px solid #000000; }\n-td.eventtime { background-color: [-$STYLE.BGCOLOR2-]; font-size: 10pt; font-weight: bold; }\n-table.eventtime { background-color: [-$STYLE.BGCOLOR2-]; border: 1px solid #000000; }\n-table.eventslist { background-color: [-$STYLE.BGCOLOR1-]; padding: 10px; }\n-td.eventslist { background-color: [-$STYLE.BGCOLOR1-]; padding: 10px; }\n-table.calcontainer { border: 1px solid #000000; }\n-</style>\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pntemplates/default/style/month.css b/interface/main/calendar/modules/PostCalendar/pntemplates/default/style/month.css\ndeleted file mode 100644\nindex f28f4e3a9..000000000\n--- a/interface/main/calendar/modules/PostCalendar/pntemplates/default/style/month.css\n+++ /dev/null\n@@ -1,13 +0,0 @@\n-<style>\n-td.monthon { background-color: [-$STYLE.BGCOLOR1-]; border: 1px solid [-$STYLE.BGCOLOR2-]; }\n-td.monthoff { background-color: [-$STYLE.BGCOLOR2-]; border: 1px solid [-$STYLE.BGCOLOR1-]; }\n-td.monthtoday { background-color: [-$STYLE.BGCOLOR1-]; border: 1px dashed [-$STYLE.HIGHLIGHT_COLOR-]; }\n-td.monthheader { background-color: [-$STYLE.BGCOLOR2-]; font-size: 14pt; font-weight: bold; }\n-table.monthheader { background-color: [-$STYLE.BGCOLOR2-]; border: 1px solid #000000; }\n-.monthheader a:link { font-size: 14pt; font-weight: bold; text-decoration: none; padding-left: 10px; padding-right: 10px; }\n-.monthheader a:active { font-size: 14pt; font-weight: bold; text-decoration: none; padding-left: 10px; padding-right: 10px; }\n-.monthheader a:hover { font-size: 14pt; font-weight: bold; text-decoration: none; padding-left: 10px; padding-right: 10px; }\n-.monthheader a:visited { font-size: 14pt; font-weight: bold; text-decoration: none; padding-left: 10px; padding-right: 10px; }\n-td.daynames { background-color: [-$STYLE.BGCOLOR1-]; border: 1px solid [-$STYLE.BGCOLOR2-]; font-size: 10pt; font-weight: normal; text-decoration: none; }\n-table.calcontainer { border: 1px solid #000000; }\n-</style>\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pntemplates/default/style/search.css b/interface/main/calendar/modules/PostCalendar/pntemplates/default/style/search.css\ndeleted file mode 100644\nindex 20a0e5831..000000000\n--- a/interface/main/calendar/modules/PostCalendar/pntemplates/default/style/search.css\n+++ /dev/null\n@@ -1,11 +0,0 @@\n-<style>\n-td.dayheader { background-color: [-$STYLE.BGCOLOR2-]; font-size: 14pt; font-weight: bold; }\n-table.dayheader { background-color: [-$STYLE.BGCOLOR2-]; border: 1px solid #000000;}\n-.dayheader a:link { font-size: 14pt; font-weight: bold; text-decoration: none; padding-left: 5px; padding-right: 5px;}\n-.dayheader a:active { font-size: 14pt; font-weight: bold; text-decoration: none; padding-left: 5px; padding-right: 5px;}\n-.dayheader a:hover { font-size: 14pt; font-weight: bold; text-decoration: none; padding-left: 5px; padding-right: 5px;}\n-.dayheader a:visited { font-size: 14pt; font-weight: bold; text-decoration: none; padding-left: 5px; padding-right: 5px;}\n-table.eventslist { background-color: [-$STYLE.BGCOLOR1-]; padding: 10px;}\n-td.eventslist { background-color: [-$STYLE.BGCOLOR1-]; padding: 10px;}\n-table.calcontainer { border: 1px solid #000000;}\n-</style>\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pntemplates/default/style/year.css b/interface/main/calendar/modules/PostCalendar/pntemplates/default/style/year.css\ndeleted file mode 100644\nindex b25fbd939..000000000\n--- a/interface/main/calendar/modules/PostCalendar/pntemplates/default/style/year.css\n+++ /dev/null\n@@ -1,46 +0,0 @@\n-<style>\n-td.monthon  \t\t\t{ background-color: [-$STYLE.BGCOLOR1-]; border: 1px solid [-$STYLE.BGCOLOR2-]; }\n-td.monthoff \t\t\t{ background-color: [-$STYLE.BGCOLOR2-]; border: 1px solid [-$STYLE.BGCOLOR1-]; }\n-td.monthtoday \t\t\t{ background-color: [-$STYLE.HIGHLIGHT_COLOR-]; border: 1px solid [-$STYLE.BGCOLOR2-]; }\n-td.yearheader \t\t\t{ background-color: [-$STYLE.BGCOLOR2-]; font-size: 14pt; font-weight: bold; }\n-table.yearheader \t\t{ background-color: [-$STYLE.BGCOLOR2-]; border: 1px solid #000000; }\n-.yearheader a:link  \t{ font-size: 14pt; font-weight: bold; text-decoration: none; padding-left: 10px; padding-right: 10px; }\n-.yearheader a:active \t{ font-size: 14pt; font-weight: bold; text-decoration: none; padding-left: 10px; padding-right: 10px; }\n-.yearheader a:hover \t{ font-size: 14pt; font-weight: bold; text-decoration: none; padding-left: 10px; padding-right: 10px; }\n-.yearheader a:visited \t{ font-size: 14pt; font-weight: bold; text-decoration: none; padding-left: 10px; padding-right: 10px; }\n-\n-td.monthheader  \t\t{ background-color: [-$STYLE.BGCOLOR2-]; border-bottom: 2px solid #000000; font-size: 10pt; font-weight: bold; }\n-.monthheader a:link \t{ font-size: 10pt; font-weight: bold; text-decoration: none; padding-left: 15px; padding-right: 15px; }\n-.monthheader a:active \t{ font-size: 10pt; font-weight: bold; text-decoration: none; padding-left: 15px; padding-right: 15px; }\n-.monthheader a:hover \t{ font-size: 10pt; font-weight: bold; text-decoration: none; padding-left: 15px; padding-right: 15px; }\n-.monthheader a:visited  { font-size: 10pt; font-weight: bold; text-decoration: none; padding-left: 15px; padding-right: 15px; }\n-\n-td.daynames \t\t\t{ background-color: [-$STYLE.BGCOLOR1-]; border: 1px solid [-$BGCOLOR1-]; font-size: 8pt; font-weight: normal; text-decoration: none; }\n-table.calcontainer  \t{ border: 1px solid #000000; }\n-td.calcontainer \t\t{ border: 1px solid #000000; }\n-td.weeklink \t\t\t{ background-color: [-$STYLE.BGCOLOR1-]; border: 1px solid [-$STYLE.BGCOLOR1-]; }\n-.weeklink a:link \t\t{ color: [-$TEXTCOLOR1-]; font-size: 7pt; font-weight: normal; text-decoration: none; }\n-.weeklink a:active  \t{ color: [-$TEXTCOLOR1-]; font-size: 7pt; font-weight: normal; text-decoration: none; }\n-.weeklink a:hover \t\t{ color: [-$TEXTCOLOR1-]; font-size: 7pt; font-weight: normal; text-decoration: none; }\n-.weeklink a:visited \t{ color: [-$TEXTCOLOR1-]; font-size: 7pt; font-weight: normal; text-decoration: none; }\n-\n-a.event-none:link\t    { color: #000000; font-size:10px; font-weight:normal; text-decoration: none; }\n-a.event-none:hover    \t{ color: #000000; font-size:10px; font-weight:normal; text-decoration: none; }\n-a.event-none:visited  \t{ color: #000000; font-size:10px; font-weight:normal; text-decoration: none; }\n-a.event-none:active   \t{ color: #000000; font-size:10px; font-weight:normal; text-decoration: none; }\n-\n-a.event-one:link\t \t{ color: #006600; font-size:10px; font-weight:normal; text-decoration: none; }\n-a.event-one:hover\t \t{ color: #006600; font-size:10px; font-weight:normal; text-decoration: none; }\n-a.event-one:visited   \t{ color: #006600; font-size:10px; font-weight:normal; text-decoration: none; }\n-a.event-one:active    \t{ color: #006600; font-size:10px; font-weight:normal; text-decoration: none; }\n-\n-a.event-two:link\t \t{ color: #006666; font-size:10px; font-weight:normal; text-decoration: none; }\n-a.event-two:hover\t \t{ color: #006666; font-size:10px; font-weight:normal; text-decoration: none; }\n-a.event-two:visited   \t{ color: #006666; font-size:10px; font-weight:normal; text-decoration: none; }\n-a.event-two:active    \t{ color: #006666; font-size:10px; font-weight:normal; text-decoration: none; }\n-\n-a.event-three:link    \t{ color: #0066cc; font-size:10px; font-weight:normal; text-decoration: none; }\n-a.event-three:hover   \t{ color: #0066cc; font-size:10px; font-weight:normal; text-decoration: none; }\n-a.event-three:visited \t{ color: #0066cc; font-size:10px; font-weight:normal; text-decoration: none; }\n-a.event-three:active  \t{ color: #0066cc; font-size:10px; font-weight:normal; text-decoration: none; }\n-</style>\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pntemplates/default/user/details.html b/interface/main/calendar/modules/PostCalendar/pntemplates/default/user/details.html\ndeleted file mode 100644\nindex 9f62a686f..000000000\n--- a/interface/main/calendar/modules/PostCalendar/pntemplates/default/user/details.html\n+++ /dev/null\n@@ -1,117 +0,0 @@\n-[-*Smarty*-]\n-[-config_load file=\"default.conf\"-]\n-[-*Load the Language Definitions*-]\n-[-config_load file=\"lang.$USER_LANG\"-]\n-[-include file=\"$TPL_NAME/views/header.html\"-]\n-[-* we want to include out stylesheet for this view*-]\n-[-fetch file=\"$TPL_STYLE_PATH/details.css\" assign=\"css\"-]\n-[-eval var=$css-]\n-\n-[-*Main Navigation*-]\n-[-if $PRINT_VIEW != 1-]\n-[-include file=\"$TPL_NAME/views/global/details_navigation.html\"-]\n-[-/if-]\n-<table width=\"100%\" border=\"0\" cellpadding=\"5\" cellspacing=\"0\" class=\"calcontainer\">\n-\t<tr>\n-\t\t<td class=\"eventtitle\" width=\"100%\" nowrap=\"nowrap\">\n-\t\t\t<strong>[-$A_EVENT.catname-]</strong>\n-\t\t\t\t[-if $A_EVENT.patient_name-]\n-\t\t\t\twith patient <strong>[-$A_EVENT.patient_name-]</strong> (pid [-$A_EVENT.pubpid-])\n-\t\t\t\t[-/if-]\n-\t\t\t<br /><b>[-$A_EVENT.title-]</b>\n-\t\t</td>\n-\t</tr>\n-\t<tr>\n-\t\t<td class=\"eventtime\" width=\"100%\" nowrap=\"nowrap\">\n-\t\t\t[-if $A_EVENT.alldayevent != true-]\n-\t\t\t\t[-if $24HOUR_TIME-]\n-\t\t\t\t\t[-assign var=\"timestamp\" value=$A_EVENT.startTime|date_format:\"%H:%M\"-]\n-\t\t\t\t[-else-]\n-\t\t\t\t\t[-assign var=\"timestamp\" value=$A_EVENT.startTime|date_format:\"%I:%M %p\"-]\n-\t\t\t\t[-/if-]\n-\t\t\t\t[-$timestamp-]\n-\t\t\t[-/if-]\n-\t\t\t\n-\t\t\t[-if $USE_INT_DATES eq true-]\n-\t\t\t\t[-pc_date_format date=$A_EVENT.date format=\"%A, %d %B %Y\"-]\n-\t\t\t[-else-]\t\n-\t\t\t\t[-pc_date_format date=$A_EVENT.date format=\"%A, %B %d %Y\"-]\n-\t\t\t[-/if-]\n-\t\t\t\n-\t\t\t[-if $A_EVENT.alldayevent-]\n-\t\t\t\t[-#_PC_ALL_DAY#-]\n-\t\t\t[-else-]\n-\t\t\t\t[-#_PC_DURATION#-]: [-$A_EVENT.duration_hours-]:[-$A_EVENT.duration_minutes-]\n-\t\t\t[-/if-]\n-\t\t</td>\n-\t</tr>\n-</table>\n-<table width=\"100%\" border=\"0\" cellpadding=\"5\" cellspacing=\"0\" class=\"calcontainer\">\n-\t<tr>\n-\t\t<td valign=\"top\" align=\"left\" width=\"100%\">\n-\t\t\t[-$A_EVENT.hometext-]\n-\t\t</td>\n-\t\t<td valign=\"top\" align=\"left\" nowrap=\"nowrap\">\n-\t\t\t[-if $LOCATION_INFO-]\n-\t\t\t\t<p><b>[-#_PC_LOCATION#-]:</b><br />\n-\t\t\t\t[-if $A_EVENT.location != ''-]\n-\t\t\t\t\t[-$A_EVENT.location-]<br />\n-\t\t\t\t[-/if-]\n-\t\t\t\t[-if $A_EVENT.street1 != ''-]\n-\t\t\t\t\t[-$A_EVENT.street1-]<br />\n-\t\t\t\t[-/if-]\n-\t\t\t\t[-if $A_EVENT.street2 != ''-]\n-\t\t\t\t\t[-$A_EVENT.street2-]<br />\n-\t\t\t\t[-/if-]\n-\t\t\t\t[-if $A_EVENT.city != ''-]\n-\t\t\t\t\t[-$A_EVENT.city-]\n-\t\t\t\t[-/if-]\n-\t\t\t\t[-if $A_EVENT.state != ''-]\n-\t\t\t\t\t[-$A_EVENT.state-]\n-\t\t\t\t[-/if-]\n-\t\t\t\t[-if $A_EVENT.postal != ''-]\n-\t\t\t\t\t[-$A_EVENT.postal-]\n-\t\t\t\t[-/if-]\n-\t\t\t\t</p>\n-\t\t\t[-/if-]\n-\t\t\t[-if $CONTACT_INFO-]\n-\t\t\t\t<p><b>[-#_PC_CONTACT#-]:</b><br />\n-\t\t\t\t[-if $A_EVENT.contname-]\n-\t\t\t\t\t[-$A_EVENT.contname-]<br />\n-\t\t\t\t[-/if-]\n-\t\t\t\t[-if $A_EVENT.conttel-]\n-\t\t\t\t\t[-$A_EVENT.conttel-]<br />\n-\t\t\t\t[-/if-]\n-\t\t\t\t[-if $A_EVENT.contemail-]\n-\t\t\t\t\t<a href=\"mailto:[-$A_EVENT.contemail-]\">[-$A_EVENT.contemail-]</a><br />\n-\t\t\t\t[-/if-]\n-\t\t\t\t[-if $A_EVENT.website-]\n-\t\t\t\t\t<a href=\"[-$A_EVENT.website-]\" rel=\"noopener\" target=\"_blank\">[-$A_EVENT.website-]</a><br />\n-\t\t\t\t[-/if-]\n-\t\t\t\t</p>\n-\t\t\t[-/if-]\n-\t\t\t[-if $A_EVENT.fee != ''-]\n-\t\t\t\t<br />Fee: [-$A_EVENT.fee-]\n-\t\t\t[-/if-]\n-\t\t</td>\n-\t</tr>\n-</table>\n-[-if $PRINT_VIEW != 1-]\n-<table width=\"100%\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n-    <tr>\n-        <td align=\"right\">\n-            <a href=\"[-pc_url action=\"detail\" print=\"true\" eid=$A_EVENT.eid-]\">[-#_PC_THEME_PRINT#-]</a>\n-        </td>\n-    </tr>\n-</table>\n-\n-[-if $USER_CAN_EDIT-]\n-\t<a href=\"[-$USER_EDIT-]\" [-$USER_TARGET-]>[-#_PC_ADMIN_EDIT#-]</a>\n-\t<a href=\"[-$USER_DELETE-]\" [-$USER_TARGET-]>[-#_PC_ADMIN_DELETE#-]</a>\n-[-elseif $ACCESS_ADMIN-]\n-\t<a href=\"[-$ADMIN_EDIT-]\" [-$ADMIN_TARGET-]>[-#_PC_ADMIN_EDIT#-]</a>\n-\t<a href=\"[-$ADMIN_DELETE-]\" [-$ADMIN_TARGET-]>[-#_PC_ADMIN_DELETE#-]</a>\n-[-/if-]\n-[-pc_form_nav_close-]\n-[-/if-]\n-[-include file=\"$TPL_NAME/views/footer.html\"-]\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pntemplates/default/user/preview.html b/interface/main/calendar/modules/PostCalendar/pntemplates/default/user/preview.html\ndeleted file mode 100644\nindex 8527a1ac6..000000000\n--- a/interface/main/calendar/modules/PostCalendar/pntemplates/default/user/preview.html\n+++ /dev/null\n@@ -1,92 +0,0 @@\n-[-*Smarty*-]\n-[-config_load file=\"default.conf\"-]\n-[-include file=\"$TPL_NAME/views/header.html\"-]\n-[-*Load the Language Definitions*-]\n-[-config_load file=\"lang.$USER_LANG\"-]\n-\n-[-* we want to include out stylesheet for this view*-]\n-[-fetch file=\"$TPL_STYLE_PATH/details.css\" assign=\"css\"-]\n-[-eval var=$css-]\n-\n-<table width=\"100%\" border=\"0\" cellpadding=\"5\" cellspacing=\"0\" class=\"calcontainer\">\n-\t<tr>\n-\t\t<td class=\"eventtitle\" width=\"100%\" nowrap=\"nowrap\">\n-\t\t\t<b>[-$A_EVENT.title-]</b>\n-\t\t</td>\n-\t</tr>\n-\t<tr>\n-\t\t<td class=\"eventtime\" width=\"100%\" nowrap>\n-\t\t\t[-if $A_EVENT.alldayevent != true-]\n-\t\t\t\t[-if $24HOUR_TIME-]\n-\t\t\t\t\t[-assign var=\"timestamp\" value=$A_EVENT.startTime|date_format:\"%H:%M\"-]\n-\t\t\t\t[-else-]\n-\t\t\t\t\t[-assign var=\"timestamp\" value=$A_EVENT.startTime|date_format:\"%I:%M %p\"-]\n-\t\t\t\t[-/if-]\n-\t\t\t\t[-$timestamp-]\n-\t\t\t[-/if-]\n-\n-\t\t\t[-if $USE_INT_DATES eq true-]\n-\t\t\t\t[-pc_date_format date=$A_EVENT.date format=\"%A, %d %B %Y\"-]\n-\t\t\t[-else-]\t\n-\t\t\t\t[-pc_date_format date=$A_EVENT.date format=\"%A, %B %d %Y\"-]\n-\t\t\t[-/if-]\n-\n-\t\t\t[-if $A_EVENT.alldayevent-]\n-\t\t\t\t[-#_PC_ALL_DAY#-]\n-\t\t\t[-else-]\n-\t\t\t\t[-#_PC_DURATION#-]: [-$A_EVENT.duration_hours-]:[-$A_EVENT.duration_minutes-]\n-\t\t\t[-/if-]\n-\t\t</td>\n-\t</tr>\n-</table>\n-<table width=\"100%\" border=\"0\" cellpadding=\"5\" cellspacing=\"0\" class=\"calcontainer\">\n-\t<tr>\n-\t\t<td valign=\"top\" align=\"left\" width=\"100%\">\n-\t\t\t[-$A_EVENT.hometext-]\n-\t\t</td>\n-\t\t<td valign=\"top\" align=\"left\" nowrap=\"nowrap\">\n-\t\t\t[-if $LOCATION_INFO-]\n-\t\t\t\t<p><b>[-#_PC_LOCATION#-]:</b><br />\n-\t\t\t\t[-if $A_EVENT.location != ''-]\n-\t\t\t\t\t[-$A_EVENT.location-]<br />\n-\t\t\t\t[-/if-]\n-\t\t\t\t[-if $A_EVENT.street1 != ''-]\n-\t\t\t\t\t[-$A_EVENT.street1-]<br />\n-\t\t\t\t[-/if-]\n-\t\t\t\t[-if $A_EVENT.street2 != ''-]\n-\t\t\t\t\t[-$A_EVENT.street2-]<br />\n-\t\t\t\t[-/if-]\n-\t\t\t\t[-if $A_EVENT.city != ''-]\n-\t\t\t\t\t[-$A_EVENT.city-]\n-\t\t\t\t[-/if-]\n-\t\t\t\t[-if $A_EVENT.state != ''-]\n-\t\t\t\t\t[-$A_EVENT.state-]\n-\t\t\t\t[-/if-]\n-\t\t\t\t[-if $A_EVENT.postal != ''-]\n-\t\t\t\t\t[-$A_EVENT.postal-]\n-\t\t\t\t[-/if-]\n-\t\t\t\t</p>\n-\t\t\t[-/if-]\n-\t\t\t[-if $CONTACT_INFO-]\n-\t\t\t\t<p><b>[-#_PC_CONTACT#-]:</b><br />\n-\t\t\t\t[-if $A_EVENT.contname-]\n-\t\t\t\t\t[-$A_EVENT.contname-]<br />\n-\t\t\t\t[-/if-]\n-\t\t\t\t[-if $A_EVENT.conttel-]\n-\t\t\t\t\t[-$A_EVENT.conttel-]<br />\n-\t\t\t\t[-/if-]\n-\t\t\t\t[-if $A_EVENT.contemail-]\n-\t\t\t\t\t<a href=\"mailto:[-$A_EVENT.contemail-]\">[-$A_EVENT.contemail-]</a><br />\n-\t\t\t\t[-/if-]\n-\t\t\t\t[-if $A_EVENT.website-]\n-\t\t\t\t\t<a href=\"[-$A_EVENT.website-]\" rel=\"noopener\" target=\"_blank\">[-$A_EVENT.website-]</a><br />\n-\t\t\t\t[-/if-]\n-\t\t\t\t</p>\n-\t\t\t[-/if-]\n-\t\t\t[-if $A_EVENT.fee != ''-]\n-\t\t\t\t<br />Fee: [-$A_EVENT.fee-]\n-\t\t\t[-/if-]\n-\t\t</td>\n-\t</tr>\n-</table>\n-[-include file=\"$TPL_NAME/views/footer.html\"-]\n\\ No newline at end of file\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pntemplates/default/user/search.html b/interface/main/calendar/modules/PostCalendar/pntemplates/default/user/search.html\ndeleted file mode 100644\nindex 5b5d0b0f2..000000000\n--- a/interface/main/calendar/modules/PostCalendar/pntemplates/default/user/search.html\n+++ /dev/null\n@@ -1,5 +0,0 @@\n-    [-if $PRINT_VIEW == 1-]\n-        [-include file=\"$TPL_NAME/user/ajax_search_print.html\"-]\n-    [-else-]\n-        [-include file=\"$TPL_NAME/user/ajax_search.html\"-]\n-    [-/if-]\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pntemplates/default/views/calendarblock/index.html b/interface/main/calendar/modules/PostCalendar/pntemplates/default/views/calendarblock/index.html\ndeleted file mode 100644\nindex e69de29bb..000000000\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pntemplates/default/views/calendarblock/month_view.html b/interface/main/calendar/modules/PostCalendar/pntemplates/default/views/calendarblock/month_view.html\ndeleted file mode 100644\nindex e51737990..000000000\n--- a/interface/main/calendar/modules/PostCalendar/pntemplates/default/views/calendarblock/month_view.html\n+++ /dev/null\n@@ -1,87 +0,0 @@\n-[-*Smarty*-]\n-[-config_load file=\"default.conf\"-]\n-[-*Load the Language Definitions*-]\n-[-include file=\"$TPL_NAME/views/header.html\"-]\n-[-config_load file=\"lang.$USER_LANG\"-]\n-[-* we want to include our stylesheet for this view*-]\n-[-fetch file=\"$TPL_STYLE_PATH/calendarblock.css\" assign=\"css\"-]\n-[-eval var=$css-]\n-<table width=\"100%\" border=\"0\" cellpadding=\"5\" cellspacing=\"0\" class=\"blockmonthheader\">\n-    <tr align=\"center\">\n-        <td nowrap class=\"blockmonthheader\" width=\"100%\" align=\"center\" valign=\"middle\">\n-\t\t\t<a class=\"blockmonthheader\" href=\"[-$PREV_MONTH_URL-]\">&lt;&lt;</a>\n-        \t<a href=\"[-pc_url action=\"month\" date=$DATE-]\" \n-\t\t\tclass=\"blockmonthheader\">[-$DATE|pc_date_format:#_PC_DATE_FORMAT_MY#-]</a>\n-\t\t\t<a class=\"blockmonthheader\" href=\"[-$NEXT_MONTH_URL-]\">&gt;&gt;</a>\n-\t\t</td>\n-    </tr>\n-</table>\n-<table width=\"100%\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" class=\"blockcalcontainer\">\n-\t<tr>\n-\t\t<td class=\"blockweeklink\">&nbsp;</td>\n-\t\t[-foreach name=daynames item=day from=$S_SHORT_DAY_NAMES-]\n-\t\t<td width=\"14%\" valign=\"top\" align=\"center\" class=\"blockdaynames\">[-$day-]</td>\n-\t\t[-/foreach-]\n-\t</tr>\n-\t[-foreach name=weeks item=days from=$CAL_FORMAT-]\n-\t<tr>\n-\t\t<td class=\"blockweeklink\" align=\"center\" valign=\"middle\"><a \n-\t\t\thref=\"[-pc_url action=week date=$days[0]-]\">&gt;</a></td>\n-\t\t[-foreach name=day item=date from=$days-]\n-\t\t[-assign var=\"themonth\" value=$date|date_format:\"%m\"-]\n-\t\t[-if $date == $TODAY_DATE-]\n-\t\t\t[-assign var=\"stylesheet\" value=\"blockmonthtoday\"-]\n-\t\t[-elseif ($date < $MONTH_START_DATE || $date > $MONTH_END_DATE)-]\n-\t\t\t[-assign var=\"stylesheet\" value=\"blockmonthoff\"-]\n-\t\t[-else-]\n-\t\t\t[-assign var=\"stylesheet\" value=\"blockmonthon\"-]\n-\t\t[-/if-]\n-\t\t<td width=\"14%\" class=\"[-$stylesheet-]\" align=\"center\" valign=\"middle\"\n-\t    \tonmouseover=\"this.style.backgroundColor='[-#CellHighlight#-]';\"\n-\t\t\tonmouseout=\"this.style.backgroundColor='';\"\n-\t\t\tonclick=\"javascript:location.href='[-pc_url action=day date=$date-]';\">\n-\t\t\t[-assign var=\"titles\" value=\"\"-]\n-\t\t\t[-foreach name=events item=event from=$A_EVENTS.$date-]\n-\t\t\t\t[-if $event.alldayevent != true-]\n-\t\t\t\t\t[-if $24HOUR_TIME -]\n-\t\t\t\t\t\t[-assign var=\"timestamp\" value=$event.startTime|date_format:#_PC_TIME_FORMAT_24#-]\n-\t\t\t\t\t[-else-]\n-\t\t\t\t\t\t[-assign var=\"timestamp\" value=$event.startTime|date_format:#_PC_TIME_FORMAT_12#-]\n-\t\t\t\t\t[-/if-]\n-\t\t\t\t\t[-assign var=\"duration\" value=\"($event[duration_hours]:$event[duration_minutes])\"-]\n-\t\t\t\t[-else-]\n-\t\t\t\t\t[-assign var=\"timestamp\" value=\"\"-]\n-\t\t\t\t\t[-assign var=\"duration\" value=\"\"-]\n-\t\t\t\t[-/if-]\n-\t\t\t\t[-assign var=\"titles\" value=\"$titles$timestamp $event[title] $duration<br /><br />\"-]\n-\t\t\t[-/foreach-]\n-\t\t\t[-if $A_EVENTS.$date|@count-]\n-\t\t\t\t[-if $A_EVENTS.$date|@count > 2 -]\n-\t\t\t\t\t[-assign var=\"classname\" value=\"blockevent-three\"-]\n-\t\t\t\t[-elseif $A_EVENTS.$date|@count > 1 -]\t\t\t\t\t\t\t\t\t \t\t   \n-\t\t\t\t\t[-assign var=\"classname\" value=\"blockevent-two\"-]\n-\t\t\t\t[-elseif $A_EVENTS.$date|@count > 0 -]\t\t\t\t\t\t\t\t\t \t\t   \n-\t\t\t\t\t[-assign var=\"classname\" value=\"blockevent-one\"-]\t\n-\t\t\t\t[-else-]\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t \t\t   \n-\t\t\t\t\t[-assign var=\"classname\" value=\"blockevent-none\"-]\n-\t\t\t\t[-/if-] \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t \t\t   \n-\t\t\t\t<a class=\"[-$classname-]\" href=\"[-pc_url action=day date=$date-]\"\n-\t\t\t\t   [-if $USE_INT_DATES eq true-]\n-\t\t\t\t       [-assign var=\"format\" value=#_PC_DATE_FORMAT_INT#-]\n-\t\t\t\t   [-else-]    \n-\t\t\t\t       [-assign var=\"format\" value=#_PC_DATE_FORMAT_STD#-]\n-\t\t\t\t   [-/if-]\n-\t\t\t\t   [-pc_popup delay=\"500\" \n-\t\t\t\t\t    \t  timeout=\"3600\"\n-\t\t\t\t\t\t\t  caption=$date|pc_date_format:$format\n-\t\t\t\t\t\t\t  text=\"$titles\"-]>[-$date|date_format:\"%d\"-]</a>\n-\t\t\t[-else-]\n-\t\t\t\t[-assign var=\"classname\" value=\"blockevent-none\"-]\n-\t\t\t\t<a class=\"[-$classname-]\" href=\"[-pc_url action=day date=$date-]\">[-$date|date_format:\"%d\"-]</a>\n-\t\t\t[-/if-] \t\t  \n-\t\t</td>\n-\t\t[-/foreach-]\n-\t</tr>\n-\t[-/foreach-]\n-</table>\n-[-include file=\"$TPL_NAME/views/footer.html\"-]\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pntemplates/default/views/calendarblock/todays_events.html b/interface/main/calendar/modules/PostCalendar/pntemplates/default/views/calendarblock/todays_events.html\ndeleted file mode 100644\nindex 377b81fec..000000000\n--- a/interface/main/calendar/modules/PostCalendar/pntemplates/default/views/calendarblock/todays_events.html\n+++ /dev/null\n@@ -1,61 +0,0 @@\n-[-*Smarty*-]\n-[-config_load file=\"default.conf\"-]\n-[-include file=\"$TPL_NAME/views/header.html\"-]\n-[-*Load the Language Definitions*-]\n-[-config_load file=\"lang.$USER_LANG\"-]\n-[-if $SHOW_TITLE eq 1-]\n-<br />\n-<table width=\"100%\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n-    <tr>\n-        <td width=\"100%\" align=\"left\" valign=\"middle\">\n-\t\t\t<b>[-$TODAYS_EVENTS_TITLE-]</b>\n-\t\t</td>\n-    </tr>\n-</table>\n-<br />\n-[-else-]\n-[-* we want to include our stylesheet for this view*-]\n-[-fetch file=\"$TPL_STYLE_PATH/calendarblock.css\" assign=\"css\"-]\n-[-eval var=$css-]\n-[-/if-]\n-[-foreach name=dates item=events key=date from=$A_EVENTS-]\n-    [-if $date eq $TODAY_DATE-]\n-    \t[-foreach name=eventloop key=id item=event from=$events-]\n-    \t\t[-if $eventcount < $DISPLAY_LIMIT-]\n-    \t\t\t[-if $event.alldayevent != true-]\n-\t\t\t\t\t[-if $24HOUR_TIME -]\n-\t\t\t\t\t\t[-assign var=\"timestamp\" value=$event.startTime|date_format:#_PC_TIME_FORMAT_24#-]\n-\t\t\t\t\t[-else-]\n-\t\t\t\t\t\t[-assign var=\"timestamp\" value=$event.startTime|date_format:#_PC_TIME_FORMAT_12#-]\n-\t\t\t\t\t[-/if-]\n-\t\t\t\t[-else-]\n-\t\t\t\t\t[-assign var=\"timestamp\" value=\"\"-]\n-\t\t\t\t[-/if-]\n-\t\t\t\t<table width=\"100%\" border=\"0\" cellpadding=\"0\" cellspacing=\"1\">\n-        \t\t\t<tr>\n-            \t\t\t<td valign=\"top\" align=\"left\" class=\"eventlink\">\n-\t\t\t\t\t\t\t<a class=\"eventlink\" href=\"[-pc_url action=detail eid=$event.eid date=$date-]\" \n-\t\t\t\t\t\t\t\t\t [-pc_popup delay=\"500\" \n-\t\t\t\t\t\t            \t\t\ttimeout=\"3600\"\n-\t\t\t\t\t\t\t\t\t\t\t\tbgcolor=$event.catcolor\n-\t\t\t\t\t\t\t\t    \t\t\tcaption=$event.title \n-\t\t\t\t\t\t\t\t    \t\t\ttext=$event.hometext|truncate:255:\"...\"-]>[-$timestamp-] [-$event.title|strip_tags-]\n-\t\t\t\t\t\t\t[-if $event.alldayevent != true-]\n-\t\t\t\t\t\t\t\t([-$event.duration_hours-]:[-$event.duration_minutes-])\n-\t\t\t\t\t\t\t[-/if-]\n-\t\t\t\t\t\t\t</a><br />\n-\t\t\t\t\t\t</td>\n-        \t\t\t</tr>\n-\t\t\t\t</table>\n-    \t\t[-/if-]\n-\t\t[-foreachelse-]\n-    \t\t<table width=\"100%\" border=\"0\" cellpadding=\"0\" cellspacing=\"1\">\n-        \t\t<tr>\n-            \t\t<td>[-$NO_EVENTS-]</td>\n-        \t\t</tr>\n-    \t\t</table>\n-\t\t\t<br />\n-\t\t[-/foreach-]\n-    [-/if-]\n-[-/foreach-]\n-[-include file=\"$TPL_NAME/views/footer.html\"-]\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pntemplates/default/views/calendarblock/upcoming_events.html b/interface/main/calendar/modules/PostCalendar/pntemplates/default/views/calendarblock/upcoming_events.html\ndeleted file mode 100644\nindex 98343adfb..000000000\n--- a/interface/main/calendar/modules/PostCalendar/pntemplates/default/views/calendarblock/upcoming_events.html\n+++ /dev/null\n@@ -1,77 +0,0 @@\n-[-*Smarty*-]\n-[-config_load file=\"default.conf\"-]\n-[-include file=\"$TPL_NAME/views/header.html\"-]\n-[-*Load the Language Definitions*-]\n-[-config_load file=\"lang.$USER_LANG\"-]\n-\n-[-if $SHOW_TITLE eq 1-]\n-<br />\n-<table width=\"100%\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n-    <tr>\n-        <td width=\"100%\" align=\"left\" valign=\"middle\">\n-\t\t\t<b>[-$UPCOMING_EVENTS_TITLE-]</b>\n-\t\t</td>\n-    </tr>\n-</table>\n-<br />\n-[-else-]\n-[-* we want to include our stylesheet for this view*-]\n-[-fetch file=\"$TPL_STYLE_PATH/calendarblock.css\" assign=\"css\"-]\n-[-eval var=$css-]\n-[-/if-]\n-[-counter start=0 assign=eventcount-]\n-[-foreach name=dates item=events key=date from=$A_EVENTS-]\n-\t[-if $date > $TODAY_DATE-]\n-    \t[-foreach name=eventloop key=id item=event from=$events-]\n-    \t\t[-if $eventcount < $DISPLAY_LIMIT-]\n-    \t\t\t[-if $event.alldayevent != true-]\n-\t\t\t\t\t[-if $24HOUR_TIME -]\n-\t\t\t\t\t\t[-assign var=\"timestamp\" value=$event.startTime|date_format:#_PC_TIME_FORMAT_24#-]\n-\t\t\t\t\t[-else-]\n-\t\t\t\t\t\t[-assign var=\"timestamp\" value=$event.startTime|date_format:#_PC_TIME_FORMAT_12#-]\n-\t\t\t\t\t[-/if-]\n-\t\t\t\t[-else-]\n-\t\t\t\t\t[-assign var=\"timestamp\" value=\"\"-]\n-\t\t\t\t[-/if-]\t\t\t\t\n-\t\t\t\t<table width=\"100%\" border=\"0\" cellpadding=\"0\" cellspacing=\"1\">\n-        \t\t\t[-if $smarty.foreach.eventloop.iteration eq 1-]\n-        \t\t\t\t<tr>\n-            \t\t\t\t<td style=\"padding: 2px;\" bgcolor=\"[-$BGCOLOR2-]\">\n-\t\t\t \t\t\t\t\t[-if $USE_INT_DATES eq true-]\n-\t\t\t\t    \t\t\t    [-assign var=\"format\" value=#_PC_DATE_FORMAT_BLOCK_INT#-]\n-\t\t\t\t\t\t\t    [-else-]    \n-\t\t\t\t    \t\t\t    [-assign var=\"format\" value=#_PC_DATE_FORMAT_BLOCK_STD#-]\n-\t\t\t\t\t\t\t    [-/if-]\n-\t\t\t\t\t\t\t\t<b style=\"color: [-$TEXTCOLOR1-];\">[-$date|pc_date_format:$format-]</b>\n-\t\t\t\t\t\t\t</td>\n-        \t\t\t\t</tr>\n-        \t\t\t[-/if-]\n-        \t\t\t<tr>\n-            \t\t\t<td valign=\"top\" align=\"left\" class=\"eventlink\">\n-\t\t\t\t\t\t\t<a class=\"eventlink\" href=\"[-pc_url action=detail eid=$event.eid date=$date-]\" \n-\t\t\t\t\t\t\t\t\t [-pc_popup delay=\"500\" \n-\t\t\t\t\t\t\t\t\t \t\t\ttimeout=\"3600\"\n-\t\t\t\t\t\t            \t\t\tbgcolor=$event.catcolor \n-\t\t\t\t\t\t            \t\t\tcaption=$event.title \n-\t\t\t\t\t\t            \t\t\ttext=$event.hometext|truncate:255:\"...\"-]>[-$timestamp-] [-$event.title|strip_tags-]\n-\t\t\t\t\t\t\t[-if $event.alldayevent != true-]\n-\t\t\t\t\t\t\t\t([-$event.duration_hours-]:[-$event.duration_minutes-])\n-\t\t\t\t\t\t\t[-/if-]\n-\t\t\t\t\t\t\t</a><br />\n-\t\t\t\t\t\t</td>\n-        \t\t\t</tr>\n-\t\t\t\t</table>\n-\t\t\t[-/if-]\n-\t\t[-counter-]\n-\t\t[-/foreach-]\n-    [-/if-]\n-[-/foreach-]\n-[-if $eventcount == 0-]\n-\t<table width=\"100%\" border=\"0\" cellpadding=\"0\" cellspacing=\"1\">\n-\t\t<tr>\n-\t\t\t<td>[-$NO_EVENTS-]</td>\n-\t\t</tr>\n-\t</table>\n-\t<br />    \n-[-/if-]\n-[-include file=\"$TPL_NAME/views/footer.html\"-]\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pntemplates/default/views/day/ajax_template.html b/interface/main/calendar/modules/PostCalendar/pntemplates/default/views/day/ajax_template.html\nindex c0fe3ceb0..d7f8c26fe 100644\n--- a/interface/main/calendar/modules/PostCalendar/pntemplates/default/views/day/ajax_template.html\n+++ b/interface/main/calendar/modules/PostCalendar/pntemplates/default/views/day/ajax_template.html\n@@ -35,11 +35,11 @@ $timeslotHeightUnit=\"px\";\n   dlgopen('add_edit_event.php?startampm=' + startampm +\n    '&starttimeh=' + starttimeh + '&userid=' + providerid + '&starttimem=' + starttimem +\n    '&date=' + eventdate + '&catid=' + catid[-php-]\n-    if(isset($_SESSION[pid]))\n+    if(isset($_SESSION['pid']))\n         {\n-            if($_SESSION[pid]>0)\n+            if($_SESSION['pid']>0)\n                 {\n-                    echo \"+'&patientid=$_SESSION[pid]'\";\n+                    echo \"+'&patientid=\" . $_SESSION['pid'] . \"'\";\n                 }\n         }\n     [-/php-]\n@@ -124,11 +124,6 @@ $timeslotHeightUnit=\"px\";\n \n  $A_CATEGORY  =& $this->_tpl_vars['A_CATEGORY'];\n \n- // [-if $PRINT_VIEW != 1-]\n- // [-*Main Navigation*-]\n- // [-include file=\"$TPL_NAME/views/global/navigation.html\"-]\n- // [-/if-]\n-\n  $A_EVENTS  =& $this->_tpl_vars['A_EVENTS'];\n  // $S_EVENTS  =& $this->_tpl_vars['S_EVENTS']; // Deleted by Rod\n  $providers =& $this->_tpl_vars['providers'];\n@@ -521,32 +516,37 @@ foreach ($providers as $provider) {\n \n             }\n             $leftpos = 0;\n-            $width = 100 / count($events_in_timeslot);\n-\n-            // loop over the events in this timeslot and adjust their width\n-            foreach ($events_in_timeslot as $eid) {\n-                // set the width if not already set or if the current width is smaller\n-                // than was was previously set\n-\t\t\t\tif (!isset($eventPositions[$eid]->width))\n-\t\t\t\t{\n-\t\t\t\t\t$eventPositions[$eid]->width = $width;\n-\t\t\t\t} else if ($eventPositions[$eid]->width > $width)\n-\t\t\t\t{\n-\t\t\t\t\t$eventPositions[$eid]->width = $width;\n-\t\t\t\t}\n-\n-                // set the left position if not already set or if the current left is\n-                // greater than what was previously set\n-\t\t\t\tif (!isset($eventPositions[$eid]->leftpos))\n-\t\t\t\t{\n-\t\t\t\t\t$eventPositions[$eid]->leftpos = $leftpos;\n-\t\t\t\t} else if ($eventPositions[$eid]->leftpos < $leftpos)\n-\t\t\t\t{\n-\t\t\t\t\t$eventPositions[$eid]->leftpos = $leftpos;\n-\t\t\t\t}\n-\n-                // increment the leftpos by the width\n-                $leftpos += $width;\n+            $width = 100;\n+            if (!empty($events_in_timeslot)) {\n+                $width = 100 / count($events_in_timeslot);\n+\n+                // loop over the events in this timeslot and adjust their width\n+                foreach ($events_in_timeslot as $eid) {\n+                    $eventPositions[$eid] = new stdClass();\n+\n+                    // set the width if not already set or if the current width is smaller\n+                    // than was was previously set\n+                    if (!isset($eventPositions[$eid]->width))\n+                    {\n+                        $eventPositions[$eid]->width = $width;\n+                    } else if ($eventPositions[$eid]->width > $width)\n+                    {\n+                        $eventPositions[$eid]->width = $width;\n+                    }\n+\n+                    // set the left position if not already set or if the current left is\n+                    // greater than what was previously set\n+                    if (!isset($eventPositions[$eid]->leftpos))\n+                    {\n+                        $eventPositions[$eid]->leftpos = $leftpos;\n+                    } else if ($eventPositions[$eid]->leftpos < $leftpos)\n+                    {\n+                        $eventPositions[$eid]->leftpos = $leftpos;\n+                    }\n+\n+                    // increment the leftpos by the width\n+                    $leftpos += $width;\n+                }\n             }\n         } // end overlap detection\n \n@@ -729,7 +729,7 @@ foreach ($providers as $provider) {\n                 if ($comment) $atitle .= \" $comment\";\n                 $divTitle .= \"\\n[\".$atitle .\"]\";\n                 $content .= $catname;\n-                if ($event['recurrtype'] > 0) $content .= \"<img src='{$this->_tpl_vars[TPL_IMAGE_PATH]}/repeating8.png' border='0' style='margin:0px 2px 0px 2px;' title='\".htmlspecialchars(xl(\"Repeating event\"),ENT_QUOTES).\"' alt='\".htmlspecialchars(xl(\"Repeating event\"),ENT_QUOTES).\"'>\";\n+                if ($event['recurrtype'] > 0) $content .= \"<img src='{$this->_tpl_vars['TPL_IMAGE_PATH']}/repeating8.png' border='0' style='margin:0px 2px 0px 2px;' title='\".htmlspecialchars(xl(\"Repeating event\"),ENT_QUOTES).\"' alt='\".htmlspecialchars(xl(\"Repeating event\"),ENT_QUOTES).\"'>\";\n                 if ($comment) $content .= \" $comment\";\n             }\n             else {\n@@ -740,7 +740,7 @@ foreach ($providers as $provider) {\n                     $divTitle .= \"\\r\\n[\".$catname.' '.htmlspecialchars($comment, ENT_QUOTES) .\"]\".htmlspecialchars($fname, ENT_QUOTES).\" \".htmlspecialchars($lname, ENT_QUOTES);\n                 $content .= \"<span class='appointment'>\";\n                 $content .= create_event_time_anchor($dispstarth.\":\".$startm);\n-                if ($event['recurrtype'] > 0) $content .= \"<img src='{$this->_tpl_vars[TPL_IMAGE_PATH]}/repeating8.png' border='0' style='margin:0px 2px 0px 2px;' title='\".htmlspecialchars(xl(\"Repeating event\"),ENT_QUOTES).\"' alt='\".htmlspecialchars(xl(\"Repeating event\"),ENT_QUOTES).\"'>\";\n+                if ($event['recurrtype'] > 0) $content .= \"<img src='{$this->_tpl_vars['TPL_IMAGE_PATH']}/repeating8.png' border='0' style='margin:0px 2px 0px 2px;' title='\".htmlspecialchars(xl(\"Repeating event\"),ENT_QUOTES).\"' alt='\".htmlspecialchars(xl(\"Repeating event\"),ENT_QUOTES).\"'>\";\n                 // $content .= htmlspecialchars($event['apptstatus']);\n                 $content .= '&nbsp;'.htmlspecialchars($event['apptstatus']);\n                 if ($patientid) {\n@@ -749,7 +749,7 @@ foreach ($providers as $provider) {\n                     $link_title .= \"(\" . xl('Click to view') . \")\";\n \n                     $content .= \"<a href='javascript:goPid($patientid)' title='$link_title'>\";\n-                    $content .= \"<img src='{$this->_tpl_vars[TPL_IMAGE_PATH]}/user-green.gif'\n+                    $content .= \"<img src='{$this->_tpl_vars['TPL_IMAGE_PATH']}/user-green.gif'\n                                       onmouseover=\\\"javascript:ShowImage('\".$GLOBALS['webroot'].\"/controller.php?document&retrieve&patient_id=\".attr($patientid).\"&document_id=-1&as_file=false&original_file=true&disable_exit=false&show_original=true&context=patient_picture');\\\"\n                                       onmouseout=\\\"javascript:HideImage();\\\"\n                                       border='0' title='$link_title' alt='View Patient' />\";\n@@ -773,7 +773,7 @@ foreach ($providers as $provider) {\n                     $link_title .= $divTitle .\"\\n\";\n                     $link_title .= \"(\" . xl('Click to view') . \")\";\n                     $content .= \"<a href='javascript:goGid($groupid)' title='$link_title'>\";\n-                    $content .= \"<img src='{$this->_tpl_vars[TPL_IMAGE_PATH]}/user-blue.gif' border='0' title='$link_title' alt='\" . xla('View Patient') . \"' />\";\n+                    $content .= \"<img src='{$this->_tpl_vars['TPL_IMAGE_PATH']}/user-blue.gif' border='0' title='$link_title' alt='\" . xla('View Patient') . \"' />\";\n                     if ($catid == 1) $content .= \"<strike>\";\n                     $content .= htmlspecialchars($groupname);\n                     if ($GLOBALS['calendar_appt_style'] != 1) {\n@@ -923,10 +923,6 @@ echo \" </tr>\\n\";\n echo \"</table>\\n\";\n echo \"<P>\";\n \n- // [-*footer*-]\n- // [-include file=\"$TPL_NAME/views/global/footer.html\"-]\n- // [-include file=\"$TPL_NAME/views/footer.html\"-]\n-\n [-/php-]\n </div>  <!-- end bigCal DIV -->\n </div>  <!-- end bottom DIV -->\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pntemplates/default/views/day_print/ajax_template.html b/interface/main/calendar/modules/PostCalendar/pntemplates/default/views/day_print/ajax_template.html\ndeleted file mode 100644\nindex b99bc5296..000000000\n--- a/interface/main/calendar/modules/PostCalendar/pntemplates/default/views/day_print/ajax_template.html\n+++ /dev/null\n@@ -1,559 +0,0 @@\n-[-*Smarty*-]\n-[-*****************************************************************************-]\n-[-* Copyright (C) 2005-2006 Rod Roark <rod@sunsetsystems.com> and others      *-]\n-[-*                                                                           *-]\n-[-* This program is free software; you can redistribute it and/or             *-]\n-[-* modify it under the terms of the GNU General Public License               *-]\n-[-* as published by the Free Software Foundation; either version 2            *-]\n-[-* of the License, or (at your option) any later version.                    *-]\n-[-*****************************************************************************-]\n-[-config_load file=\"default.conf\"-]\n-[-*Load the Language Definitions*-]\n-[-config_load file=\"lang.$USER_LANG\"-]\n-[-include file=\"$TPL_NAME/views/header.html\"-]\n-[-* we want to include out stylesheet for this view*-]\n-[-fetch file=\"$TPL_STYLE_PATH/day.css\" assign=\"css\"-]\n-[-eval var=$css-]\n-\n-[-*Values used in setting timeslot and event heights*-]\n-[-php-]$timeslotHeightVal=20; $timeslotHeightUnit=\"px\";[-/php-]\n-\n-<style>\n-a {\n- text-decoration:none;\n-}\n-td {\n- font-family: Arial, Helvetica, sans-serif;\n-}\n-div.tiny { width:1px; height:1px; font-size:1px; }\n-#dateNAV {\n-    float: left;\n-}\n-#dateDisplay {\n-    float: left;\n-    padding-left: 10px;\n-    font-family: Arial, Helvetica, sans-serif;\n-}\n-#datePicker {\n-    width: 25%;\n-    float: left;\n-    position: absolute;\n-    display: inline;\n-    top: 50px;\n-    left: 0px;\n-    padding: 5px;\n-    text-align: center;\n-    background-color: lightblue;\n-}\n-#datePicker td {\n-    font-family: Arial, Helvetica, sans-serif;\n-    font-size: 0.7em;\n-    /* font-size: 9pt;  */\n-}\n-#bigCalHeader {\n-    text-align:center;\n-    font-family: Arial, Helvetica, sans-serif;\n-    font-size: 14pt;\n-}\n-#bigCal {\n-    background-color: lightblue;\n-    position: relative;\n-}\n-#bigCal table {\n-    border-collapse: collapse;\n-}\n-\n-/* these are for the small datepicker DIV */\n-#datePicker table {\n-    border-collapse: collapse;\n-    border: 3px solid lightblue;\n-}\n-#datePicker .tdDOW-small {\n-    font-family: Arial, Helvetica, sans-serif;\n-    font-size: 10px;\n-    vertical-align: top;\n-    background-color: lightblue;\n-    text-align: center;\n-    border: none;\n-    padding: 2px 3px 2px 3px;\n-}\n-#datePicker .tdDatePicker {\n-    cursor: pointer;\n-    cursor: hand;\n-}\n-#datePicker .tdWeekend-small {\n-    font-family: Arial, Helvetica, sans-serif;\n-    font-size: 10px;\n-    vertical-align: top;\n-    border: none;\n-    padding: 2px 3px 2px 3px;\n-    background-color: #dddddd;\n-    color: #999999;\n-}\n-\n-#datePicker .tdOtherMonthDay-small {\n-    font-family: Arial, Helvetica, sans-serif;\n-    font-size: 10px;\n-    vertical-align: top;\n-    border: none;\n-    padding: 2px 3px 2px 3px;\n-    background-color: #ffffff;\n-    color: #999999;\n-}\n-\n-#datePicker .tdMonthName-small {\n-    text-align: center;\n-    font-family: Arial, Helvetica, sans-serif;\n-    font-size: 12px;\n-    font-style: normal\n-}\n-\n-#datePicker .tdMonthDay-small {\n-    font-family: Arial, Helvetica, sans-serif;\n-    font-size: 10px;\n-    vertical-align: top;\n-    border: none;\n-    padding: 2px 3px 2px 3px;\n-    background-color: #ffffff;\n-}\n-#datePicker .currentWeek {\n-    border-top: 1px solid blue;\n-    border-bottom: 1px solid blue;\n-    background-color: lightblue;\n-}\n-#datePicker .currentDate {\n-    border: 1px solid blue;\n-    background-color: blue;\n-    color: lightblue;\n-}\n-\n-/* the DIV of times */\n-#times {\n-    border-right: 1px solid #999;\n-}\n-#times table {\n-    border-collapse: collapse;\n-    width: 100%;\n-    margin: 0px;\n-    padding: 0px;\n-}\n-#times table td {\n-    border: 0px;\n-    border-top: 1px solid #999;\n-    margin: 0px;\n-    padding: 0px;\n-    font-size: 10pt;\n-}\n-.timeslot {\n-    height: [-php-]echo $timeslotHeightVal.$timeslotHeightUnit;[-/php-];\n-    margin: 0px;\n-    padding: 0px;\n-}\n-.schedule {\n-    background-color: pink;\n-    vertical-align: top;\n-    padding: 0px;\n-    margin: 0px;\n-    border-right: 1px solid black;\n-}\n-/* types of events */\n-.event_in {\n-    position: absolute;\n-    background-color: white;\n-    width: 100%;\n-    z-index:1;\n-    font-size: 0.8em;\n-    color: #ddd;\n-    border-top: 1px dashed #ddd;\n-}\n-.event_out {\n-    position: absolute;\n-    background-color: lightgray;\n-    width: 100%;\n-    z-index:1;\n-    font-size: 0.8em;\n-    color: #ddd;\n-    border-top: 1px dashed #ddd;\n-}\n-.event_appointment {\n-    position: absolute;\n-    background-color: white;\n-    z-index:2;\n-    overflow: hidden;\n-    border: 1px solid blue;\n-    width: 100%;\n-    font-size: 0.8em;\n-}\n-.event_noshow {\n-    position: absolute;\n-    background-color: pink;\n-    z-index:2;\n-    overflow: hidden;\n-    border: 1px solid blue;\n-    width: 100%;\n-    font-size: 0.8em;\n-}\n-.event_reserved {\n-    position: absolute;\n-    background-color: pink;\n-    z-index:2;\n-    overflow: hidden;\n-    border: 1px solid blue;\n-    width: 100%;\n-    font-size: 0.8em;\n-}\n-</style>\n-\n-[-headerTemplate assets='no_bootstrap|no_fontawesome|no_main-theme|no_dialog'-]\n-\n-[-php-]\n-\n- // A_CATEGORY is an ordered array of associative-array categories.\n- // Keys of interest are: id, name, color, desc, event_duration.\n- //\n-\n- $A_CATEGORY  =& $this->_tpl_vars['A_CATEGORY'];\n-\n- // [-if $PRINT_VIEW != 1-]\n- // [-*Main Navigation*-]\n- // [-include file=\"$TPL_NAME/views/global/navigation.html\"-]\n- // [-/if-]\n-\n- $A_EVENTS  =& $this->_tpl_vars['A_EVENTS'];\n- // $S_EVENTS  =& $this->_tpl_vars['S_EVENTS']; // Deleted by Rod\n- $providers =& $this->_tpl_vars['providers'];\n- $times     =& $this->_tpl_vars['times'];\n- $interval  =  $this->_tpl_vars['interval'];\n- $viewtype  =  $this->_tpl_vars['VIEW_TYPE'];\n- $PREV_WEEK_URL = $this->_tpl_vars['PREV_WEEK_URL'];\n- $NEXT_WEEK_URL = $this->_tpl_vars['NEXT_WEEK_URL'];\n- $PREV_DAY_URL  = $this->_tpl_vars['PREV_DAY_URL'];\n- $NEXT_DAY_URL  = $this->_tpl_vars['NEXT_DAY_URL'];\n-\n- $Date =  postcalendar_getDate();\n- if (!isset($y)) $y = substr($Date, 0, 4);\n- if (!isset($m)) $m = substr($Date, 4, 2);\n- if (!isset($d)) $d = substr($Date, 6, 2);\n-\n-[-/php-]\n-\n-<div id=\"bigCalHeader\">\n-[-php-]\n-$atmp = array_keys($A_EVENTS);\n-echo date('d M Y', strtotime($atmp[0]));\n-[-/php-]\n-</div>\n-\n-[-assign var=\"dayname\" value=$DATE|date_format:\"%w\"-]\n-[-assign var=\"day\"     value=$DATE|date_format:\"%d\"|string_format:\"%1d\"-]\n-[-assign var=\"month\"   value=$DATE|date_format:\"%m\"|string_format:\"%1d\"-]\n-[-assign var=\"year\"    value=$DATE|date_format:\"%Y\"|string_format:\"%4d\"-]\n-\n-[-pc_sort_events var=\"S_EVENTS\" sort=\"time\" order=\"asc\" value=$A_EVENTS-]\n-\n-<div id=\"bigCal\">\n-[-php-]\n-\n-echo \"<table border='0' cellpadding='1' cellspacing='0' width='100%'>\\n\";\n-\n-// output the TD with the times DIV\n-echo \"<tr>\";\n-echo \"<td id='times' style='width:2em;'><div><table>\\n\";\n-echo \"<td class='timeslot' style='text-align: center; background-color:#ddd;'>&nbsp;</td>\";\n-foreach ($times as $slottime) {\n-    $startampm = ($slottime['mer']) == \"pm\" ? 2 : 1;\n-    $starttimeh = $slottime['hour'];\n-    $disptimeh = ($starttimeh > 12) ? ($starttimeh - 12) : $starttimeh;\n-    $starttimem = $slottime['minute'];\n-    $slotendmins = $starttimeh * 60 + $starttimem + $interval;\n-\n-    echo \"<tr><td class='timeslot'>\";\n-    echo \"$disptimeh:$starttimem\";\n-    echo \"</td></tr>\\n\";\n-}\n-echo \"</table></div></td>\";\n-\n-\n-// This loops once for each provider to be displayed.\n-//\n-foreach ($providers as $provider) {\n-    $providerid = $provider['id'];\n-\n-    // to specially handle the IN/OUT events I'm doing something new here\n-    // for each IN event it will have a duration lasting until the next\n-    // OUT event or until the end of the day\n-    $tmpTime = $times[0];\n-    $calStartMin = ($tmpTime['hour'] * 60) + $tmpTime['minute'];\n-    $tmpTime = $times[count($times)-1];\n-    $calEndMin = ($tmpTime['hour'] * 60) + $tmpTime['minute'];\n-\n-    // having a 'title' for the TD makes the date appear by the mouse pointer\n-    // this is nice when all you see are times on the left side and no head\n-    // row with the dates or day-of-week (DOW)\n-    echo \"<td class='schedule' style='border: 1px solid #999;' title='\".$provider['fname'].\" \".$provider['lname'].\"'>\";\n-    echo \"<div class='timeslot' style='font-size: 0.8em; text-align: center; background-color:#ddd; width: 100%; overflow: hidden; border-bottom: 1px solid lightgray;'>\";\n-    echo $provider['fname'].\" \".$provider['lname'].\"</div>\";\n-    echo \"<div style='position: relative; height: 100%; width: 100%;'>\\n\";\n-\n-    // For each event...\n-    // output a TD with an inner containing DIV positioned 'relative'\n-    // within that DIV we place our event DIVs using 'absolute' positioning\n-    foreach ($A_EVENTS as $date => $events) {\n-        $eventdate = substr($date, 0, 4) . substr($date, 5, 2) . substr($date, 8, 2);\n-\n-        // determine if events overlap and adjust their width and left position as needed\n-        // 26 Feb 2008 - This needs fine tuning or total replacement\n-        //             - it doesn't work as well as I'd like - JRM\n-        $eventPositions = array();\n-        foreach ($times as $slottime) {\n-            $starttimeh = $slottime['hour'];\n-            $starttimem = $slottime['minute'];\n-\n-            $slotstartmins = $starttimeh * 60 + $starttimem;\n-            $slotendmins = $starttimeh * 60 + $starttimem + $interval;\n-\n-            $events_in_timeslot = array();\n-            foreach ($events as $e1) {\n-                // ignore IN and OUT events\n-                if (($e1['catid'] == 2) || ($e1['catid'] == 3)) { continue; }\n-                // skip events without an ID (why they are in the loop, I have no idea)\n-                if ($e1['eid'] == \"\") { continue; }\n-                // skip events for other providers\n-                if ($providerid != $e1['aid']) { continue; }\n-\n-                // create a numeric start and end for comparison\n-                $starth = substr($e1['startTime'], 0, 2);\n-                $startm = substr($e1['startTime'], 3, 2);\n-                $e1Start = ($starth * 60) + $startm;\n-                $e1End = $e1Start + $e1['duration']/60;\n-\n-                // three ways to overlap:\n-                // start-in, end-in, span\n-                if ((($e1Start >= $slotstartmins) && ($e1Start < $slotendmins)) // start-in\n-                   || (($e1End > $slotstartmins) && ($e1End <= $slotendmins)) // end-in\n-                   || (($e1Start < $slotstartmins) && ($e1End > $slotendmins))) // span\n-                {\n-                    array_push($events_in_timeslot, $e1['eid']);\n-                }\n-            }\n-\n-            $leftpos = 0;\n-            $width = 100 / count($events_in_timeslot);\n-\n-            // loop over the events in this timeslot and adjust their width\n-            foreach ($events_in_timeslot as $eid) {\n-                // set the width if not already set or if the current width is smaller\n-                // than was was previously set\n-                if (! isset($eventPositions[$eid]->width)) { $eventPositions[$eid]->width = $width; }\n-                else if ($eventPositions[$eid]->width > $width) { $eventPositions[$eid]->width = $width; }\n-\n-                // set the left position if not already set or if the current left is\n-                // greater than what was previously set\n-                if (! isset($eventPositions[$eid]->leftpos)) { $eventPositions[$eid]->leftpos = $leftpos; }\n-                else if ($eventPositions[$eid]->leftpos < $leftpos) { $eventPositions[$eid]->leftpos = $leftpos; }\n-\n-                // increment the leftpos by the width\n-                $leftpos += $width;\n-            }\n-        } // end overlap detection\n-\n-        // now loop over the events for the day and output their DIVs\n-        foreach ($events as $event) {\n-            // skip events for other providers\n-            // yeah, we've got that sort of overhead here... it ain't perfect\n-            if ($providerid != $event['aid']) { continue; }\n-\n-            // skip events without an ID (why they are in the loop, I have no idea)\n-            if ($event['eid'] == \"\") { continue; }\n-\n-            // figure the start time and minutes (from midnight)\n-            $starth = substr($event['startTime'], 0, 2);\n-            $startm = substr($event['startTime'], 3, 2);\n-            $eStartMin = $starth * 60 + $startm;\n-\n-            // determine the class for the event DIV based on the event category\n-            $evtClass = \"event_appointment\";\n-            switch ($event['catid']) {\n-                case 1:  // NO-SHOW appt\n-                    $evtClass = \"event_noshow\";\n-                    break;\n-                case 2:  // IN office\n-                    $evtClass = \"event_in\";\n-                    break;\n-                case 3:  // OUT of office\n-                    $evtClass = \"event_out\";\n-                    break;\n-                case 4:  // VACATION\n-                    $evtClass = \"event_reserved\";\n-                    break;\n-                case 6:  // HOLIDAY\n-                    $evtClass = \"event_holiday\";\n-                    break;\n-                case 8:  // LUNCH\n-                    $evtClass = \"event_reserved\";\n-                    break;\n-                case 11: // RESERVED\n-                    $evtClass = \"event_reserved\";\n-                    break;\n-                default: // some appointment\n-                    $evtClass = \"event_appointment\";\n-                    break;\n-            }\n-\n-            // if this is an IN or OUT event then we have some extra special\n-            // processing to be done\n-            // the IN event creates a DIV until the OUT event\n-            // or, without an OUT DIV matching the IN event\n-            // then the IN event runs until the end of the day\n-            if ($event['catid'] == 2) {\n-                // locate a matching OUT for this specific IN\n-                $found = false;\n-                $outMins = 0;\n-                foreach ($events as $outevent) {\n-                    // skip events for other providers\n-                    if ($providerid != $outevent['aid']) { continue; }\n-                    // skip events with blank IDs\n-                    if ($outevent['eid'] == \"\") { continue; }\n-\n-                    if ($outevent['eid'] == $event['eid']) { $found = true; continue; }\n-                    if (($found == true) && ($outevent['catid'] == 3)) {\n-                        // calculate the duration from this event to the outevent\n-                        $outH = substr($outevent['startTime'], 0, 2);\n-                        $outM = substr($outevent['startTime'], 3, 2);\n-                        $outMins = ($outH * 60) + $outM;\n-                        $event['duration'] = ($outMins - $eStartMin) * 60; // duration is in seconds\n-                        $found = 2;\n-                        break;\n-                    }\n-                }\n-                if ($outMins == 0) {\n-                    // no OUT was found so this event's duration goes\n-                    // until the end of the day\n-                    $event['duration'] = ($calEndMin - $eStartMin) * 60; // duration is in seconds\n-                }\n-            }\n-\n-            // calculate the TOP value for the event DIV\n-            // diff between event start and schedule start\n-            $eMinDiff = $eStartMin - $calStartMin;\n-            // diff divided by the time interval of the schedule\n-            $eStartInterval = $eMinDiff / $interval;\n-            // times the interval height\n-            $eStartPos = $eStartInterval * $timeslotHeightVal;\n-            $evtTop = $eStartPos.$timeslotHeightUnit;\n-\n-            // calculate the HEIGHT value for the event DIV\n-            // diff between end and start of event\n-            $eEndMin = $eStartMin + ($event['duration']/60);\n-            // prevent the overall height of the event from going beyond the bounds\n-            // of the time table\n-            if ($eEndMin > $calEndMin) { $eEndMin = $calEndMin; }\n-            $eMinDiff = $eEndMin - $eStartMin;\n-            // diff divided by the time interval of the schedule\n-            $eEndInterval = $eMinDiff / $interval;\n-            // times the interval height\n-            $eHeight = $eEndInterval * $timeslotHeightVal;\n-            $evtHeight = $eHeight.$timeslotHeightUnit;\n-\n-            // determine the DIV width based on any overlapping events\n-            // see further above for the overlapping calculation code\n-            $divWidth = \"\";\n-            $divLeft = \"\";\n-            if (isset($eventPositions[$event['eid']])) {\n-                $divWidth = \"width: \".$eventPositions[$event['eid']]->width.\"%\";\n-                $divLeft = \"left: \".$eventPositions[$event['eid']]->leftpos.\"%\";\n-            }\n-\n-            $eventid = $event['eid'];\n-            $patientid = $event['pid'];\n-            $commapos = strpos($event['patient_name'], \",\");\n-            $lname = substr($event['patient_name'], 0, $commapos);\n-\t    $fname = substr($event['patient_name'], $commapos + 2);\n-            $patient_dob = $event['patient_dob'];\n-            $patient_age = $event['patient_age'];\n-            $catid = $event['catid'];\n-            $comment = addslashes($event['hometext']);\n-            $catname = $event['catname'];\n-            $title = \"Age $patient_age ($patient_dob)\";\n-\n-            $content = \"\";\n-\n-            if ($comment && $GLOBALS['calendar_appt_style'] < 4) $title .= \" \" . $comment;\n-\n-            if ($catid == 2 || $catid == 3 || $catid == 4 || $catid == 8 || $catid == 11) {\n-                if      ($catid ==  2) $catname = \"IN\";\n-                else if ($catid ==  3) $catname = \"OUT\";\n-                else if ($catid ==  4) $catname = \"VACATION\";\n-                else if ($catid ==  8) $catname = \"LUNCH\";\n-                else if ($catid == 11) $catname = \"RESERVED\";\n-\n-                $atitle = $catname;\n-                if ($comment) $atitle .= \" $comment\";\n-                $content .= \"<a href='javascript:oldEvt($eventdate,$eventid)' title='$atitle'>\";\n-                $content .= $catname;\n-                if ($comment) $content .= \" $comment\";\n-                $content .= \"</a>\";\n-            }\n-            else {\n-                // some sort of patient appointment\n-                $content .= \"<span class='appointment\".$apptToggle.\"'>\";\n-                $content .= $starth . ':' . $startm . htmlspecialchars($event['apptstatus']);\n-                if ($catid == 1) $content .= \"<strike>\";\n-                $content .= htmlspecialchars($lname);\n-                if ($GLOBALS['calendar_appt_style'] != 1) {\n-                    $content .= \",\" . htmlspecialchars($fname);\n-                    if ($event['title'] && $GLOBALS['calendar_appt_style'] >= 3) {\n-                        $content .= \"(\" . $event['title'];\n-                        if ($event['hometext'] && $GLOBALS['calendar_appt_style'] >= 4)\n-                        $content .= \": <font color='green'>\" . htmlspecialchars(trim($event['hometext'])) . \"</font>\";\n-                        $content .= \")\";\n-                    }\n-                }\n-                if ($catid == 1) $content .= \"</strike>\";\n-                $content .= \"</a>\";\n-                $content .= \"</span>\";\n-            }\n-\n-            $divTitle .= \"\\n(double click to edit)\";\n-\n-            // output the DIV and content\n-            echo \"<div class='\".$evtClass.\" event' style='top:\".$evtTop.\"; height:\".$evtHeight.\n-                    \"; background-color:\".$event[\"catcolor\"].\n-                    \"; $divWidth\".\n-                    \"; $divLeft\".\n-                    \"'\".\n-                    \" id='\".$eventdate.\"-\".$eventid.\"'\".\n-                    \">\";\n-            echo $content;\n-            echo \"</div>\\n\";\n-        } // end EVENT loop\n-\n-        echo \"</div>\";\n-\n-    } // end date\n-\n-    echo \"</td>\\n\";\n-\n-} // end provider loop\n-\n-echo \" </tr>\\n\";\n-echo \"</table>\\n\";\n-echo \"<P>\";\n-\n- // [-*footer*-]\n- // [-include file=\"$TPL_NAME/views/global/footer.html\"-]\n- // [-include file=\"$TPL_NAME/views/footer.html\"-]\n-\n-[-/php-]\n-</div>  <!-- end bigCal DIV -->\n-\n-</body>\n-\n-<script language='JavaScript'>\n-$(document).ready(function(){\n-    var win = top.printLogPrint ? top : opener.top;\n-    win.printLogPrint(window);\n-});\n-</script>\n-\n-</html>\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pntemplates/default/views/day_print/outlook_ajax_template.html b/interface/main/calendar/modules/PostCalendar/pntemplates/default/views/day_print/outlook_ajax_template.html\nindex b8b7968ed..288672999 100644\n--- a/interface/main/calendar/modules/PostCalendar/pntemplates/default/views/day_print/outlook_ajax_template.html\n+++ b/interface/main/calendar/modules/PostCalendar/pntemplates/default/views/day_print/outlook_ajax_template.html\n@@ -226,11 +226,6 @@ div.tiny { width:1px; height:1px; font-size:1px; }\n \n  $A_CATEGORY  =& $this->_tpl_vars['A_CATEGORY'];\n \n- // [-if $PRINT_VIEW != 1-]\n- // [-*Main Navigation*-]\n- // [-include file=\"$TPL_NAME/views/global/navigation.html\"-]\n- // [-/if-]\n-\n  $A_EVENTS  =& $this->_tpl_vars['A_EVENTS'];\n  // $S_EVENTS  =& $this->_tpl_vars['S_EVENTS']; // Deleted by Rod\n  $providers =& $this->_tpl_vars['providers'];\n@@ -381,22 +376,27 @@ foreach ($providers as $provider) {\n             }\n \n             $leftpos = 0;\n-            $width = 100 / count($events_in_timeslot);\n-\n-            // loop over the events in this timeslot and adjust their width\n-            foreach ($events_in_timeslot as $eid) {\n-                // set the width if not already set or if the current width is smaller\n-                // than was was previously set\n-                if (! isset($eventPositions[$eid]->width)) { $eventPositions[$eid]->width = $width; }\n-                else if ($eventPositions[$eid]->width > $width) { $eventPositions[$eid]->width = $width; }\n-\n-                // set the left position if not already set or if the current left is\n-                // greater than what was previously set\n-                if (! isset($eventPositions[$eid]->leftpos)) { $eventPositions[$eid]->leftpos = $leftpos; }\n-                else if ($eventPositions[$eid]->leftpos < $leftpos) { $eventPositions[$eid]->leftpos = $leftpos; }\n-\n-                // increment the leftpos by the width\n-                $leftpos += $width;\n+            $width = 100;\n+            if (!empty($events_in_timeslot)) {\n+                $width = 100 / count($events_in_timeslot);\n+\n+                // loop over the events in this timeslot and adjust their width\n+                foreach ($events_in_timeslot as $eid) {\n+                    $eventPositions[$eid] = new stdClass();\n+\n+                    // set the width if not already set or if the current width is smaller\n+                    // than was was previously set\n+                    if (! isset($eventPositions[$eid]->width)) { $eventPositions[$eid]->width = $width; }\n+                    else if ($eventPositions[$eid]->width > $width) { $eventPositions[$eid]->width = $width; }\n+\n+                    // set the left position if not already set or if the current left is\n+                    // greater than what was previously set\n+                    if (! isset($eventPositions[$eid]->leftpos)) { $eventPositions[$eid]->leftpos = $leftpos; }\n+                    else if ($eventPositions[$eid]->leftpos < $leftpos) { $eventPositions[$eid]->leftpos = $leftpos; }\n+\n+                    // increment the leftpos by the width\n+                    $leftpos += $width;\n+                }\n             }\n         } // end overlap detection\n \n@@ -615,11 +615,6 @@ echo \" </tr>\\n\";\n echo \"</table>\\n\";\n echo \"<P>\";\n \n- // [-*footer*-]\n- // [-include file=\"$TPL_NAME/views/global/footer.html\"-]\n- // [-include file=\"$TPL_NAME/views/footer.html\"-]\n-\n-\n /* output a small calendar, based on the date-picker code from the normal calendar */\n function PrintDatePicker($caldate, $DOWlist, $daynames) {\n \n", "diff --git a/interface/main/calendar/modules/PostCalendar/pntemplates/default/views/global/details_navigation.html b/interface/main/calendar/modules/PostCalendar/pntemplates/default/views/global/details_navigation.html\ndeleted file mode 100644\nindex da0c9b333..000000000\n--- a/interface/main/calendar/modules/PostCalendar/pntemplates/default/views/global/details_navigation.html\n+++ /dev/null\n@@ -1,63 +0,0 @@\n-[-*Smarty*-]\n-[-config_load file=\"navigation.conf\"-]\n-[-*Load the Language Definitions*-]\n-[-config_load file=\"lang.$USER_LANG\"-]\n-\n-<style type=\"text/css\">\n-.bnav \t\t\t{ border: 1px solid #000000; }\n-td.nav  \t\t{ border-right: 1px outset [-$BGCOLOR3-]; background-color:[-$BGCOLOR3-]; }\n-td.nav:hover \t{ border-right: 1px outset [-$BGCOLOR3-]; background-color:[-$BGCOLOR2-]; }\n-td.rnav \t\t{ background-color:[-$BGCOLOR3-]; }\n-td.rnav:hover \t{ background-color:[-$BGCOLOR2-]; }\n-td.snav \t\t{ border-right: 1px outset [-$BGCOLOR3-]; background-color:[-$BGCOLOR1-]; font-weight : bold; }\n-td.rsnav \t\t{ background-color:[-$BGCOLOR1-]; font-weight : bold; }\n-a.nav:link  \t{ padding-right: 3px; padding-left: 3px; color: [-$TEXTCOLOR1-]; text-decoration: none; }\n-a.nav:active \t{ padding-right: 3px; padding-left: 3px; color: [-$TEXTCOLOR1-]; text-decoration: none; }\n-a.nav:hover \t{ padding-right: 3px; padding-left: 3px; color: [-$TEXTCOLOR1-]; text-decoration: none; }\n-a.nav:visited \t{ padding-right: 3px; padding-left: 3px; color: [-$TEXTCOLOR1-]; text-decoration: none; }\n-SELECT.nav  \t{ color: [-$TEXTCOLOR1-]; background-color:[-$BGCOLOR1-]; }\n-OPTION.nav  \t{ color: [-$TEXTCOLOR1-]; background-color:[-$BGCOLOR1-]; }\n-INPUT.nav \t\t{ color: [-$TEXTCOLOR1-]; background-color:[-$BGCOLOR1-]; }\n-</style>\n-\n-<!-- main navigation -->\n-[-pc_form_nav_open-]\n-<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\">\n-     <tr>\n-         <td nowrap valign=\"bottom\" class=\"pn-normal\">\n-             [-pc_date_select day=\"on\" \n-\t\t\t \t\t\t\t  month=\"on\" \n-\t\t\t\t\t\t\t  year=\"on\" \n-\t\t\t\t\t\t\t  view=\"on\" \n-\t\t\t\t\t\t\t  label=#_PC_JUMP_MENU_LABEL# \n-\t\t\t\t\t\t\t  class=\"\"\n-\t\t\t\t\t\t\t  order=\"month,day,year,view,jump\"-]\n-         </td>\n-         <td valign=\"bottom\" align=\"left\">\n-            <table id=\"bnav\" class=\"bnav\" border=\"0\" cellpadding=\"3\" cellspacing=\"0\" width=\"100%\" bgcolor=\"[-#TABLE_BGCOLOR#-]\">\n-                <tr>\n-                    <td nowrap align=\"center\" valign=\"bottom\" [-if $VIEW_TYPE eq \"day\"-]class=\"snav\"[-else-]class=\"nav\"[-/if-]>\n-                        <a class=\"nav\" href=\"[-pc_url action=\"day\"-]\" onclick=\"top.restoreSession()\">[-#_PC_THEME_DAY#-]</a>\n-                    </td>\n-                    <td nowrap align=\"center\" valign=\"bottom\" [-if $VIEW_TYPE eq \"week\"-]class=\"snav\"[-else-]class=\"nav\"[-/if-]>\n-                        <a class=\"nav\" href=\"[-pc_url action=\"week\"-]\" onclick=\"top.restoreSession()\">[-#_PC_THEME_WEEK#-]</a>\n-                    </td>\n-                    <td nowrap align=\"center\" valign=\"bottom\" [-if $VIEW_TYPE eq \"month\"-]class=\"snav\"[-else-]class=\"nav\"[-/if-]>\n-                        <a class=\"nav\" href=\"[-pc_url action=\"month\"-]\" onclick=\"top.restoreSession()\">[-#_PC_THEME_MONTH#-]</a>\n-                    </td>\n-                    <td nowrap align=\"center\" valign=\"bottom\" [-if $VIEW_TYPE eq \"year\"-]class=\"snav\"[-else-]class=\"nav\"[-/if-]>\n-                        <a class=\"nav\" href=\"[-pc_url action=\"year\"-]\" onclick=\"top.restoreSession()\">[-#_PC_THEME_YEAR#-]</a>\n-                    </td>\n-\t\t\t\t\t[-if $ACCESS_ADD eq true-]\n-                    <td nowrap align=\"center\" valign=\"bottom\" [-if $FUNCTION eq \"submit\"-]class=\"snav\"[-else-]class=\"nav\"[-/if-]>\n-                        <a class=\"nav\" href=\"[-pc_url action=\"submit\"-]\" onclick=\"top.restoreSession()\">[-#_PC_THEME_SUBMIT#-]</a>\n-                    </td>\n-\t\t\t\t\t[-/if-]\n-                    <td nowrap align=\"center\" valign=\"bottom\" [-if $FUNCTION eq \"search\"-]class=\"rsnav\"[-else-]class=\"rnav\"[-/if-]>\n-                        <a class=\"nav\" href=\"[-pc_url action=\"search\"-]\" onclick=\"top.restoreSession()\">[-#_PC_THEME_SEARCH#-]</a>\n-                    </td>\n-                </tr>\n-            </table>\n-         </td>\n-     </tr>\n- </table>\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pntemplates/default/views/global/footer.html b/interface/main/calendar/modules/PostCalendar/pntemplates/default/views/global/footer.html\ndeleted file mode 100644\nindex 299a85da3..000000000\n--- a/interface/main/calendar/modules/PostCalendar/pntemplates/default/views/global/footer.html\n+++ /dev/null\n@@ -1 +0,0 @@\n-[-pc_form_nav_close-]\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pntemplates/default/views/global/navigation.html b/interface/main/calendar/modules/PostCalendar/pntemplates/default/views/global/navigation.html\ndeleted file mode 100644\nindex ccc6b05fd..000000000\n--- a/interface/main/calendar/modules/PostCalendar/pntemplates/default/views/global/navigation.html\n+++ /dev/null\n@@ -1 +0,0 @@\n-    [-include file=\"$TPL_NAME/views/global/orig_navigation.html\"-]\n\\ No newline at end of file\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pntemplates/default/views/global/orig_navigation.html b/interface/main/calendar/modules/PostCalendar/pntemplates/default/views/global/orig_navigation.html\ndeleted file mode 100644\nindex 66a40c061..000000000\n--- a/interface/main/calendar/modules/PostCalendar/pntemplates/default/views/global/orig_navigation.html\n+++ /dev/null\n@@ -1,66 +0,0 @@\n-[-*Smarty*-]\n-[-config_load file=\"navigation.conf\"-]\n-[-*Load the Language Definitions*-]\n-[-config_load file=\"lang.$USER_LANG\"-]\n-<style type=\"text/css\">\n-.bnav \t\t\t{ border: 1px solid #000000; }\n-td.nav  \t\t{ border-right: 1px outset [-$BGCOLOR3-]; background-color:[-$BGCOLOR3-]; }\n-td.nav:hover \t{ border-right: 1px outset [-$BGCOLOR3-]; background-color:[-$BGCOLOR2-]; }\n-td.rnav \t\t{ background-color:[-$BGCOLOR3-]; }\n-td.rnav:hover \t{ background-color:[-$BGCOLOR2-]; }\n-td.snav \t\t{ border-right: 1px outset [-$BGCOLOR3-]; background-color:[-$BGCOLOR1-]; font-weight : bold; }\n-td.rsnav \t\t{ background-color:[-$BGCOLOR1-]; font-weight : bold; }\n-a.nav:link  \t{ padding-right: 3px; padding-left: 3px; color: [-$TEXTCOLOR1-]; text-decoration: none; }\n-a.nav:active \t{ padding-right: 3px; padding-left: 3px; color: [-$TEXTCOLOR1-]; text-decoration: none; }\n-a.nav:hover \t{ padding-right: 3px; padding-left: 3px; color: [-$TEXTCOLOR1-]; text-decoration: none; }\n-a.nav:visited \t{ padding-right: 3px; padding-left: 3px; color: [-$TEXTCOLOR1-]; text-decoration: none; }\n-SELECT.nav  \t{ color: [-$TEXTCOLOR1-]; background-color:[-$BGCOLOR1-]; }\n-OPTION.nav  \t{ color: [-$TEXTCOLOR1-]; background-color:[-$BGCOLOR1-]; }\n-INPUT.nav \t\t{ color: [-$TEXTCOLOR1-]; background-color:[-$BGCOLOR1-]; }\n-</style>\n-[-pc_form_nav_open-]\n-<!-- main navigation -->\n-<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\">\n-\t<tr>\n-\t\t<td nowrap valign=\"bottom\" align=\"left\">\n-\t\t \t[-pc_filter label=#_PC_FILTER_LABEL#\n-\t\t\t\t\t\t class=\"\" type=\"user,category,topic\"\n-\t\t\t\t\t\t order=\"user,category,topic,jump\"-]\n-\t\t\t[-pc_date_select day=\"on\" month=\"on\"\n-\t\t\t\t\t\t\t year=\"on\" view=\"on\"\n-\t\t\t\t\t\t\t label=#_PC_JUMP_MENU_LABEL#\n-\t\t\t\t\t\t\t order=\"month,day,year,view,jump\"-]\n-\n-\n-</td>\n-\t\t<td width=\"100%\" valign=\"bottom\" align=\"right\">\n-            <table id=\"bnav\" class=\"bnav\" border=\"0\" cellpadding=\"3\" cellspacing=\"0\" bgcolor=\"[-#TABLE_BGCOLOR#-]\">\n-                <tr>\n-                    <td nowrap align=\"center\" valign=\"bottom\" [-if $VIEW_TYPE eq \"day\"-]class=\"snav\"[-else-]class=\"nav\"[-/if-]>\n-                        <a class=\"nav\" href=\"[-pc_url action=\"day\"-]\" onclick=\"top.restoreSession()\">[-php-] xl('Day','e'); [-/php-]</a>\n-                    </td>\n-                    <td nowrap align=\"center\" valign=\"bottom\" [-if $VIEW_TYPE eq \"week\"-]class=\"snav\"[-else-]class=\"nav\"[-/if-]>\n-                        <a class=\"nav\" href=\"[-pc_url action=\"week\"-]\" onclick=\"top.restoreSession()\">[-php-] xl('week','e'); [-/php-]</a>\n-                    </td>\n-                    <td nowrap align=\"center\" valign=\"bottom\" [-if $VIEW_TYPE eq \"month\"-]class=\"snav\"[-else-]class=\"nav\"[-/if-]>\n-                        <a class=\"nav\" href=\"[-pc_url action=\"month\"-]\" onclick=\"top.restoreSession()\">[-php-] xl('Month','e'); [-/php-]</a>\n-                    </td>\n-                    <td nowrap align=\"center\" valign=\"bottom\" [-if $VIEW_TYPE eq \"year\"-]class=\"snav\"[-else-]class=\"nav\"[-/if-]>\n-                        <a class=\"nav\" href=\"[-pc_url action=\"year\"-]\" onclick=\"top.restoreSession()\">[-php-] xl('Year','e'); [-/php-]</a>\n-                    </td>\n-\t\t\t\t\t[-if $ACCESS_ADD eq true-]\n-                 \t<td nowrap align=\"center\" valign=\"bottom\" [-if $FUNCTION eq \"submit\"-]class=\"snav\"[-else-]class=\"nav\"[-/if-]>\n-\t\t\t\t\t[-php-]\n-\t\t\t\t\t\t$todayh = date(\"H\");\n-\t\t\t\t\t[-/php-]\n-                        <a class=\"nav\" href=\"[-pc_url action=submit setdeftime=1-]\" onclick=\"top.restoreSession()\">[-php-] xl('Add','e'); [-/php-]</a>\n-                    </td>\n-\t\t\t\t\t[-/if-]\n-                    <td nowrap align=\"center\" valign=\"bottom\" [-if $FUNCTION eq \"search\"-]class=\"rsnav\"[-else-]class=\"rnav\"[-/if-]>\n-                        <a class=\"nav\" href=\"[-pc_url action=\"search\"-]\" onclick=\"top.restoreSession()\">[-php-] xl('Search','e'); [-/php-]</a>\n-                    </td>\n-\t\t\t\t</tr>\n-           </table>\n-        </td>\n-\t</tr>\n-</table>\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pntemplates/default/views/global/small_navigation.html b/interface/main/calendar/modules/PostCalendar/pntemplates/default/views/global/small_navigation.html\ndeleted file mode 100644\nindex fff63fd0b..000000000\n--- a/interface/main/calendar/modules/PostCalendar/pntemplates/default/views/global/small_navigation.html\n+++ /dev/null\n@@ -1,64 +0,0 @@\n-[-*Smarty*-]\n-[-config_load file=\"navigation.conf\"-]\n-[-*Load the Language Definitions*-]\n-[-config_load file=\"lang.$USER_LANG\"-]\n-\n-<style type=\"text/css\">\n-.bnav \t\t\t{ border: 1px solid #000000; }\n-td.nav  \t\t{ border-right: 1px outset [-$BGCOLOR3-]; background-color:[-$BGCOLOR3-]; }\n-td.nav:hover \t{ border-right: 1px outset [-$BGCOLOR3-]; background-color:[-$BGCOLOR2-]; }\n-td.rnav \t\t{ background-color:[-$BGCOLOR3-]; }\n-td.rnav:hover \t{ background-color:[-$BGCOLOR2-]; }\n-td.snav \t\t{ border-right: 1px outset [-$BGCOLOR3-]; background-color:[-$BGCOLOR1-]; font-weight : bold; }\n-td.rsnav \t\t{ background-color:[-$BGCOLOR1-]; font-weight : bold; }\n-a.nav:link  \t{ padding-right: 3px; padding-left: 3px; color: [-$TEXTCOLOR1-]; text-decoration: none; }\n-a.nav:active \t{ padding-right: 3px; padding-left: 3px; color: [-$TEXTCOLOR1-]; text-decoration: none; }\n-a.nav:hover \t{ padding-right: 3px; padding-left: 3px; color: [-$TEXTCOLOR1-]; text-decoration: none; }\n-a.nav:visited \t{ padding-right: 3px; padding-left: 3px; color: [-$TEXTCOLOR1-]; text-decoration: none; }\n-SELECT.nav  \t{ color: [-$TEXTCOLOR1-]; background-color:[-$BGCOLOR1-]; }\n-OPTION.nav  \t{ color: [-$TEXTCOLOR1-]; background-color:[-$BGCOLOR1-]; }\n-INPUT.nav \t\t{ color: [-$TEXTCOLOR1-]; background-color:[-$BGCOLOR1-]; }\n-</style>\n-\n-<!-- main navigation -->\n-[-pc_form_nav_open-]\n-<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\">\n-     <tr>\n-         <td nowrap valign=\"bottom\" class=\"pn-normal\">\n-             [-pc_date_select day=\"on\" \n-\t\t\t \t\t\t\t  month=\"on\" \n-\t\t\t\t\t\t\t  year=\"on\" \n-\t\t\t\t\t\t\t  view=\"on\" \n-\t\t\t\t\t\t\t  label=#_PC_JUMP_MENU_LABEL# \n-\t\t\t\t\t\t\t  class=\"\"\n-\t\t\t\t\t\t\t  order=\"month,day,year,view,jump\"-]\n-         </td>\n-\t\t <td valign=\"bottom\" align=\"right\">\n-            <table id=\"bnav\" class=\"bnav\" border=\"0\" cellpadding=\"3\" cellspacing=\"0\" bgcolor=\"[-#TABLE_BGCOLOR#-]\">\n-                <tr>\n-                    <td nowrap align=\"center\" valign=\"bottom\" [-if $VIEW_TYPE eq \"day\"-]class=\"snav\"[-else-]class=\"nav\"[-/if-]>\n-                        <a class=\"nav\" href=\"[-pc_url action=\"day\"-]\" onclick=\"top.restoreSession()\">[-#_PC_THEME_DAY#-]</a>\n-                    </td>\n-                    <td nowrap align=\"center\" valign=\"bottom\" [-if $VIEW_TYPE eq \"week\"-]class=\"snav\"[-else-]class=\"nav\"[-/if-]>\n-                        <a class=\"nav\" href=\"[-pc_url action=\"week\"-]\" onclick=\"top.restoreSession()\">[-#_PC_THEME_WEEK#-]</a>\n-                    </td>\n-                    <td nowrap align=\"center\" valign=\"bottom\" [-if $VIEW_TYPE eq \"month\"-]class=\"snav\"[-else-]class=\"nav\"[-/if-]>\n-                        <a class=\"nav\" href=\"[-pc_url action=\"month\"-]\" onclick=\"top.restoreSession()\">[-#_PC_THEME_MONTH#-]</a>\n-                    </td>\n-                    <td nowrap align=\"center\" valign=\"bottom\" [-if $VIEW_TYPE eq \"year\"-]class=\"snav\"[-else-]class=\"nav\"[-/if-]>\n-                        <a class=\"nav\" href=\"[-pc_url action=\"year\"-]\" onclick=\"top.restoreSession()\">[-#_PC_THEME_YEAR#-]</a>\n-                    </td>\n-                    [-if $ACCESS_ADD eq true-]\n-                 \t<td nowrap align=\"center\" valign=\"bottom\" [-if $FUNCTION eq \"submit\"-]class=\"snav\"[-else-]class=\"nav\"[-/if-]>\n-                        <a class=\"nav\" href=\"[-pc_url action=\"submit\"-]\" onclick=\"top.restoreSession()\">[-#_PC_THEME_SUBMIT#-]</a>\n-                    </td>\n-\t\t\t\t\t[-/if-]\n-                    <td nowrap align=\"center\" valign=\"bottom\" [-if $FUNCTION eq \"search\"-]class=\"rsnav\"[-else-]class=\"rnav\"[-/if-]>\n-                        <a class=\"nav\" href=\"[-pc_url action=\"search\"-]\" onclick=\"top.restoreSession()\">[-#_PC_THEME_SEARCH#-]</a>\n-                    </td>\n-                </tr>\n-            </table>\n-         </td>\n-     </tr>\n- </table>\n-[-pc_form_nav_close-]\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pntemplates/default/views/month/ajax_template.html b/interface/main/calendar/modules/PostCalendar/pntemplates/default/views/month/ajax_template.html\nindex 3d02594ed..b85054311 100644\n--- a/interface/main/calendar/modules/PostCalendar/pntemplates/default/views/month/ajax_template.html\n+++ b/interface/main/calendar/modules/PostCalendar/pntemplates/default/views/month/ajax_template.html\n@@ -35,11 +35,11 @@ $timeslotHeightUnit=\"px\";\n   dlgopen('add_edit_event.php?startampm=' + startampm +\n    '&starttimeh=' + starttimeh + '&starttimem=' + starttimem +\n    '&date=' + eventdate + '&userid=' + providerid + '&catid=' + catid[-php-]\n-    if(isset($_SESSION[pid]))\n+    if(isset($_SESSION['pid']))\n         {\n-            if($_SESSION[pid]>0)\n+            if($_SESSION['pid']>0)\n                 {\n-                    echo \"+'&patientid=$_SESSION[pid]'\";\n+                    echo \"+'&patientid=\" . $_SESSION['pid'] . \"'\";\n                 }\n         }\n     [-/php-]\n@@ -120,11 +120,6 @@ $timeslotHeightUnit=\"px\";\n \n  $A_CATEGORY  =& $this->_tpl_vars['A_CATEGORY'];\n \n- // [-if $PRINT_VIEW != 1-]\n- // [-*Main Navigation*-]\n- // [-include file=\"$TPL_NAME/views/global/navigation.html\"-]\n- // [-/if-]\n-\n  $A_EVENTS  =& $this->_tpl_vars['A_EVENTS'];\n  $providers =& $this->_tpl_vars['providers'];\n  $times     =& $this->_tpl_vars['times'];\n@@ -561,7 +556,7 @@ foreach ($providers as $provider) {\n                     $link_title .= xl('Age') . \": \".$patient_age.\"\\n\" . xl('DOB') . \": \".$patient_dob.htmlspecialchars($comment, ENT_QUOTES).\"\\n\";\n                     $link_title .= \"(\" . xl('Click to view') . \")\";\n                     $content .= \"<a href='javascript:goPid($patientid)' title='$link_title'>\";\n-                    $content .= \"<img src='{$this->_tpl_vars[TPL_IMAGE_PATH]}/user-green.gif'\n+                    $content .= \"<img src='{$this->_tpl_vars['TPL_IMAGE_PATH']}/user-green.gif'\n                                       onmouseover=\\\"javascript:ShowImage('\".$GLOBALS['webroot'].\"/controller.php?document&retrieve&patient_id=\".attr($patientid).\"&document_id=-1&as_file=false&original_file=true&disable_exit=false&show_original=true&context=patient_picture');\\\"\n                                       onmouseout=\\\"javascript:HideImage();\\\"\n                                       border='0' title='$link_title' alt='View Patient' />\";\n@@ -585,7 +580,7 @@ foreach ($providers as $provider) {\n                     $link_title .= $divTitle .\"\\n\";\n                     $link_title .= \"(\" . xl('Click to view') . \")\";\n                     $content .= \"<a href='javascript:goGid($groupid)' title='$link_title'>\";\n-                    $content .= \"<img src='{$this->_tpl_vars[TPL_IMAGE_PATH]}/user-blue.gif' border='0' title='$link_title' alt='View Patient' />\";\n+                    $content .= \"<img src='{$this->_tpl_vars['TPL_IMAGE_PATH']}/user-blue.gif' border='0' title='$link_title' alt='View Patient' />\";\n                     if ($catid == 1) $content .= \"<strike>\";\n                     $content .= htmlspecialchars($groupname);\n                     if ($GLOBALS['calendar_appt_style'] != 1) {\n@@ -653,10 +648,6 @@ foreach ($providers as $provider) {\n     echo \"<P>\";\n } // end provider\n \n- // [-*footer*-]\n- // [-include file=\"$TPL_NAME/views/global/footer.html\"-]\n- // [-include file=\"$TPL_NAME/views/footer.html\"-]\n-\n [-/php-]\n </div>  <!-- end bigCal DIV -->\n </div> <!-- end bottom DIV -->\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pntemplates/default/views/month/list.html b/interface/main/calendar/modules/PostCalendar/pntemplates/default/views/month/list.html\ndeleted file mode 100644\nindex ac3d139d1..000000000\n--- a/interface/main/calendar/modules/PostCalendar/pntemplates/default/views/month/list.html\n+++ /dev/null\n@@ -1,111 +0,0 @@\n-[-*Smarty*-]\n-[-config_load file=\"default.conf\"-]\n-[-*Load the Language Definitions*-]\n-[-config_load file=\"lang.$USER_LANG\"-]\n-[-include file=\"$TPL_NAME/views/header.html\"-]\n-[-* we want to include out stylesheet for this view*-]\n-[-fetch file=\"$TPL_STYLE_PATH/week.css\" assign=\"css\"-]\n-[-eval var=$css-]\n-\n-[-if $PRINT_VIEW != 1-]\n-[-*Main Navigation*-]\n-[-include file=\"$TPL_NAME/views/global/navigation.html\"-]\n-[-/if-]\n-\n-<table width=\"100%\" border=\"0\" cellpadding=\"5\" cellspacing=\"0\" class=\"weekheader\">\n-\t<tr align=\"center\">\n-    \t<td width=\"100%\" align=\"center\" valign=\"middle\" class=\"weekheader\">\n-\t\t\t<a href=\"[-$PREV_MONTH_URL-]\">&lt;&lt;</a>\n-    \t\t[-$DATE|pc_date_format:#_PC_DATE_FORMAT_MY#-]\n-\t\t\t<a href=\"[-$NEXT_MONTH_URL-]\">&gt;&gt;</a>\n-\t\t</td>\n-\t\t[-if $PRINT_VIEW != 1-]\n-\t\t<td nowrap align=\"right\" valign=\"top\" class=\"monthheader\">\n-\t\t\t[-pc_view_select label=#_PC_TPL_VIEW_LABEL# class=\"\"-]\n-\t\t</td>\n-\t\t[-/if-]\n-\t</tr>\n-</table>\n-\n-<table width=\"100%\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" class=\"calcontainer\"><tr><td>\n-\t[-* Loop through the EventsByDate array : This array contains data for each day in the view. *-]\n-\t[-pc_sort_events var=\"S_EVENTS\" sort=\"category\" order=\"asc\" value=$A_EVENTS-]\n-\t[-foreach name=dates item=events key=cdate from=$S_EVENTS-]\n-\t   \t[-if $events|@count AND ($cdate >= $MONTH_START_DATE AND $cdate <= $MONTH_END_DATE)-]\n-\t\t\t[-assign var=\"dayname\" value=$cdate|date_format:\"%w\"-]\n-    \t\t[-assign var=\"day\" value=$cdate|date_format:\"%d\"|string_format:\"%1d\"-]\n-    \t\t[-assign var=\"month\" value=$cdate|date_format:\"%m\"|string_format:\"%1d\"-]\n-\t\t\t[-assign var=\"month\" value=$month-1-]\n-    \t\t[-assign var=\"year\" value=$cdate|date_format:\"%Y\"|string_format:\"%4d\"-]\n-\t\t\t<table width=\"100%\" border=\"0\" cellpadding=\"5\" cellspacing=\"0\" class=\"dayheader\">\n-        \t\t<tr>\n-        \t\t\t<td width=\"100%\">\n-            \t\t\t<a href=\"[-pc_url action=day date=$cdate-]\">\n-\t\t\t\t\t\t[-if $USE_INT_DATES eq true-]\n-\t\t\t\t\t\t\t[-pc_date_format date=$cdate format=#_PC_DATE_FORMAT_INT#-]\n-\t\t\t\t\t\t[-else-]\t\n-\t\t\t\t\t\t\t[-pc_date_format date=$cdate format=#_PC_DATE_FORMAT_STD#-]\n-\t\t\t\t\t\t[-/if-]\n-\t\t\t\t\t\t</a>\n-            \t\t</td>\n-        \t\t</tr>\n-    \t\t</table>\n-\t\t\t[-* Loop through the events for this day and display the event data *-]\n-\t\t\t[-assign var=\"oldCat\" value=\"\"-]\n-\t\t\t<table width=\"100%\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" class=\"eventslist\">\n-        \t\t<tr>\n-         \t\t\t<td class=\"eventslist\" width=\"100%\">\n-\t\t\t\t\t[-foreach name=eventloop key=id item=event from=$S_EVENTS.$cdate-]\n-    \t\t\t\t\t[-assign var=\"cCat\" value=$event.catname-]\n-\t\t\t\t\t\t\t[-if $24HOUR_TIME-]\n-\t\t\t\t\t\t\t\t[-assign var=\"timestamp\" value=$event.startTime|date_format:#_PC_TIME_FORMAT_24#-]\n-\t\t\t\t\t\t\t[-else-]\n-\t\t\t\t\t\t\t\t[-assign var=\"timestamp\" value=$event.startTime|date_format:#_PC_TIME_FORMAT_12#-]\n-\t\t\t\t\t\t\t[-/if-]\n-\t\t\t\t\t\t\t[-if $oldCat != $cCat-]\n-\t\t\t\t\t\t\t\t[-if $smarty.foreach.eventloop.first != true-]\n-\t\t\t\t\t\t\t\t\t</div>\n-\t\t\t\t\t\t\t\t[-/if-]\n-\t\t\t\t\t\t\t\t<div width=\"100%\" style=\"padding: 2px; background-color: [-$event.catcolor-];\">\n-\t\t\t\t\t\t\t\t\t[-$event.catname-]\n-\t\t\t\t\t\t\t\t</div>\n-\t\t\t\t\t\t\t\t<div width=\"100%\" style=\"padding: 2px; border:solid 1px [-$event.catcolor-];\">\n-\t\t\t\t\t\t\t[-/if-]\n-\t\t\t\t\t\t\t[-if $event.alldayevent != true-]\n-\t\t\t\t\t\t\t\t[-$timestamp-]\n-\t\t\t\t\t\t\t[-/if-]\n-\t\t\t\t\t\t\t<a href=\"[-pc_url action=detail eid=$event.eid date=$date-]\" \n-\t\t\t\t\t\t\t\t\t [-pc_popup delay=\"500\" \n-\t\t\t\t\t\t            \t\t\tbgcolor=$event.catcolor \n-\t\t\t\t\t\t\t\t    \t\t\tcaption=$event.title \n-\t\t\t\t\t\t\t\t    \t\t\ttext=$event.hometext-]>[-$event.title|strip_tags-]</a>\n-\t\t\t\t\t\t\t[-if $event.alldayevent != true-]\n-\t\t\t\t\t\t\t\t([-$event.duration_hours-]:[-$event.duration_minutes-])\n-\t\t\t\t\t\t\t[-/if-]\n-\t\t\t\t\t\t\t<br />\n-\t\t\t\t\t\t\t[-assign var=\"oldCat\" value=$event.catname-]\n-\t\t\t\t\t\t\t[-if $smarty.foreach.eventloop.last-]\n-\t\t\t\t\t\t\t\t[-* we need to close out the <div> tag *-]\n-\t\t\t\t\t\t\t\t</div>\n-\t\t\t\t\t\t\t[-/if-]\n-\t\t\t\t\t[-foreachelse-]\n-\t\t\t\t\t\t&nbsp;\n-        \t\t\t[-/foreach-]\n-\t\t\t\t\t</td>\n-        \t\t</tr>\n-    \t\t</table>\n-\t\t[-/if-]\n-\t[-/foreach-]\n-</td></tr></table>\n-[-if $PRINT_VIEW != 1-]\n-<table width=\"100%\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n-    <tr>\n-        <td align=\"right\">\n-            <a href=\"[-pc_url action=\"month\" print=\"true\"-]\">[-#_PC_THEME_PRINT#-]</a>\n-        </td>\n-    </tr>\n-</table>\n-[-/if-]\n-[-*footer*-]\n-[-include file=\"$TPL_NAME/views/global/footer.html\"-]\n-[-include file=\"$TPL_NAME/views/footer.html\"-]\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pntemplates/default/views/month_print/ajax_template.html b/interface/main/calendar/modules/PostCalendar/pntemplates/default/views/month_print/ajax_template.html\ndeleted file mode 100644\nindex 7f3bd52e6..000000000\n--- a/interface/main/calendar/modules/PostCalendar/pntemplates/default/views/month_print/ajax_template.html\n+++ /dev/null\n@@ -1,435 +0,0 @@\n-[-*Smarty*-]\n-[-*****************************************************************************-]\n-[-* Copyright (C) 2005-2006 Rod Roark <rod@sunsetsystems.com> and others      *-]\n-[-*                                                                           *-]\n-[-* This program is free software; you can redistribute it and/or             *-]\n-[-* modify it under the terms of the GNU General Public License               *-]\n-[-* as published by the Free Software Foundation; either version 2            *-]\n-[-* of the License, or (at your option) any later version.                    *-]\n-[-*****************************************************************************-]\n-[-config_load file=\"default.conf\"-]\n-[-*Load the Language Definitions*-]\n-[-config_load file=\"lang.$USER_LANG\"-]\n-[-include file=\"$TPL_NAME/views/header.html\"-]\n-[-* we want to include out stylesheet for this view*-]\n-[-fetch file=\"$TPL_STYLE_PATH/day.css\" assign=\"css\"-]\n-[-eval var=$css-]\n-\n-<style>\n-a {\n- text-decoration:none;\n-}\n-td {\n- font-family: Arial, Helvetica, sans-serif;\n-}\n-div.tiny { width:1px; height:1px; font-size:1px; }\n-#monthview {\n-    border: 2px solid blue;\n-}\n-#dayview, #weekview {\n-    cursor: pointer;\n-    cursor: hand;\n-}\n-#functions {\n-    width: 20%; /* can't make this 25% for some reason */\n-    float: left;\n-    padding: 0px 5px 0px 5px;\n-    margin-right: 5%; /* added because of the width issue above */\n-}\n-#topToolbarRight {\n-    float: right;\n-    width: 70%;\n-}\n-#dateNAV {\n-    float: left;\n-}\n-#dateDisplay {\n-    float: left;\n-    padding-left: 10px;\n-    font-family: Arial, Helvetica, sans-serif;\n-}\n-#viewPicker {\n-    float: right;\n-}\n-#datePicker {\n-    width: 25%;\n-    float: left;\n-    position: absolute;\n-    display: inline;\n-    top: 50px;\n-    left: 0px;\n-    padding: 5px;\n-    text-align: center;\n-    background-color: lightblue;\n-}\n-#datePicker td {\n-    font-family: Arial, Helvetica, sans-serif;\n-    font-size: 0.7em;\n-    /* font-size: 9pt;  */\n-}\n-#bigCalHeader {\n-    width: 100%;\n-    text-align:center;\n-    font-family: Arial, Helvetica, sans-serif;\n-    font-size: 14pt;\n-}\n-#bigCal {\n-    width: 100%;\n-    overflow: auto;\n-    background-color: lightblue;\n-    position: relative;\n-}\n-#bigCal table {\n-    border-collapse: collapse;\n-}\n-.pagebreak {\n-    page-break-after: always;\n-}\n-\n-/* these are for the small datepicker DIV */\n-#datePicker table {\n-    border-collapse: collapse;\n-    border: 3px solid lightblue;\n-}\n-#datePicker .tdDOW-small {\n-    font-family: Arial, Helvetica, sans-serif;\n-    font-size: 10px;\n-    vertical-align: top;\n-    background-color: lightblue;\n-    text-align: center;\n-    border: none;\n-    padding: 2px 3px 2px 3px;\n-}\n-#datePicker .tdDatePicker {\n-    cursor: pointer;\n-    cursor: hand;\n-}\n-#datePicker .tdWeekend-small {\n-    font-family: Arial, Helvetica, sans-serif;\n-    font-size: 10px;\n-    vertical-align: top;\n-    border: none;\n-    padding: 2px 3px 2px 3px;\n-    background-color: #dddddd;\n-    color: #999999;\n-}\n-\n-#datePicker .tdOtherMonthDay-small {\n-    font-family: Arial, Helvetica, sans-serif;\n-    font-size: 10px;\n-    vertical-align: top;\n-    border: none;\n-    padding: 2px 3px 2px 3px;\n-    background-color: #ffffff;\n-    color: #999999;\n-}\n-\n-#datePicker .tdMonthName-small {\n-    text-align: center;\n-    font-family: Arial, Helvetica, sans-serif;\n-    font-size: 12px;\n-    font-style: normal\n-}\n-\n-#datePicker .tdMonthDay-small {\n-    font-family: Arial, Helvetica, sans-serif;\n-    font-size: 10px;\n-    vertical-align: top;\n-    border: none;\n-    padding: 2px 3px 2px 3px;\n-    background-color: #ffffff;\n-}\n-#datePicker .currentWeek {\n-    border-top: 1px solid blue;\n-    border-bottom: 1px solid blue;\n-    background-color: lightblue;\n-}\n-#datePicker .currentDate {\n-    border: 1px solid blue;\n-    background-color: blue;\n-    color: lightblue;\n-}\n-\n-/* the DIV of times */\n-#times {\n-    border-right: 1px solid black;\n-}\n-#times table {\n-    border-collapse: collapse;\n-    width: 100%;\n-    margin: 0px;\n-    padding: 0px;\n-}\n-#times table td {\n-    border: 0px;\n-    border-top: 1px solid  black;\n-    margin: 0px;\n-    padding: 0px;\n-    font-size: 10pt;\n-}\n-.timeslot {\n-    height: [-php-]echo $timeslotHeightVal.$timeslotHeightUnit;[-/php-];\n-    margin: 0px;\n-    padding: 0px;\n-}\n-.schedule {\n-    background-color: pink;\n-    vertical-align: top;\n-    padding: 0px;\n-    margin: 0px;\n-    border: 1px solid #999999;\n-}\n-/* types of events */\n-.event_in {\n-    background-color: white;\n-    width: 100%;\n-    z-index:1;\n-}\n-.event_out {\n-    background-color: pink;\n-    width: 100%;\n-    z-index:1;\n-}\n-.event_appointment {\n-    background-color: white;\n-    z-index:2;\n-    overflow: hidden;\n-    width: 100%;\n-    font-size: 0.8em;\n-    border-bottom: 1px solid blue;\n-    height: 1.4em;\n-}\n-.event_noshow {\n-    background-color: pink;\n-    z-index:2;\n-    overflow: hidden;\n-    width: 100%;\n-    font-size: 0.8em;\n-    border-bottom: 1px solid blue;\n-}\n-.event_reserved {\n-    background-color: pink;\n-    z-index:2;\n-    overflow: hidden;\n-    width: 100%;\n-    font-size: 0.8em;\n-}\n-</style>\n-\n-[-headerTemplate assets='no_bootstrap|no_fontawesome|no_main-theme|no_textformat|no_dialog'-]\n-\n-[-php-]\n-\n- // this is my proposed setting in the globals config file so we don't\n- // need to mess with altering the pn database AND the config file\n- //pnModSetVar(__POSTCALENDAR__, 'pcFirstDayOfWeek', $GLOBALS['schedule_dow_start']);\n-\n- $A_CATEGORY  =& $this->_tpl_vars['A_CATEGORY'];\n- $A_EVENTS  =& $this->_tpl_vars['A_EVENTS'];\n- $providers =& $this->_tpl_vars['providers'];\n- $times     =& $this->_tpl_vars['times'];\n- $interval  =  $this->_tpl_vars['interval'];\n- $viewtype  =  $this->_tpl_vars['VIEW_TYPE'];\n- $PREV_WEEK_URL = $this->_tpl_vars['PREV_WEEK_URL'];\n- $NEXT_WEEK_URL = $this->_tpl_vars['NEXT_WEEK_URL'];\n- $PREV_DAY_URL  = $this->_tpl_vars['PREV_DAY_URL'];\n- $NEXT_DAY_URL  = $this->_tpl_vars['NEXT_DAY_URL'];\n-\n- $Date =  postcalendar_getDate();\n- if (!isset($y)) $y = substr($Date, 0, 4);\n- if (!isset($m)) $m = substr($Date, 4, 2);\n- if (!isset($d)) $d = substr($Date, 6, 2);\n-\n- $provinfo = getProviderInfo();\n-[-/php-]\n-\n-[-assign var=\"dayname\" value=$DATE|date_format:\"%w\"-]\n-[-assign var=\"day\"     value=$DATE|date_format:\"%d\"|string_format:\"%1d\"-]\n-[-assign var=\"month\"   value=$DATE|date_format:\"%m\"|string_format:\"%1d\"-]\n-[-assign var=\"year\"    value=$DATE|date_format:\"%Y\"|string_format:\"%4d\"-]\n-\n-[-php-]\n-\n-// start out without adding a pagebreak\n-$addPagebreak = false;\n-\n-// This loops once for each provider to be displayed.\n-//\n-foreach ($providers as $provider) {\n-    // output a pagebreak, if needed\n-    if ($addPagebreak) { echo \"<div class='pagebreak'></div>\"; }\n-    $addPagebreak = true;\n-\n-    echo \"<div id='bigCal'>\";\n-    echo \"<div id='bigCalHeader'>\";\n-    echo date('F', strtotime($Date));\n-    echo \"</div>\";\n-\n-    $providerid = $provider['id'];\n-\n-    echo \"<table border='0' cellpadding='1' cellspacing='0' width='100%'>\\n\";\n-    echo \" <tr>\\n\";\n-    echo \"  <td colspan='7' style='text-align: center; background-color:#ddd;'>\";\n-    echo $provider['fname'].\" \".$provider['lname'];\n-    echo \"</td>\\n\";\n-    echo \" </tr>\\n\";\n-\n-    // output date headers\n-    echo \" <tr>\\n\";\n-    $defaultDate = \"\"; // used when creating link for a 'new' event\n-    $in_cat_id = 0; // used when creating link for a 'new' event\n-    $dowCount = 0;\n-    foreach ($A_EVENTS as $date => $events) {\n-        if ($defaultDate == \"\") $defaultDate = date(\"Ymd\", strtotime($date));\n-        echo \"<td align='center' style='font-size: 0.7em; width:13%'>\";\n-        echo date(\"D\", strtotime($date));\n-        echo \"</td>\";\n-        if ($dowCount++ == 6) { break; }\n-    }\n-    echo \" </tr>\\n\";\n-\n-    // For each day...\n-    // output a TD with an inner containing DIV positioned 'relative'\n-    // within that DIV we place our event DIVs using 'absolute' positioning\n-    foreach ($A_EVENTS as $date => $events) {\n-        $eventdate = substr($date, 0, 4) . substr($date, 5, 2) . substr($date, 8, 2);\n-\n-        $gotoURL = pnModURL(__POSTCALENDAR__,'user','view',\n-                        array('tplview'=>$template_view,\n-                        'viewtype'=>'day',\n-                        'Date'=> date(\"Ymd\", strtotime($date)),\n-                        'pc_username'=>$pc_username,\n-                        'pc_category'=>$category,\n-                        'pc_topic'=>$topic));\n-\n-        if (date(\"w\", strtotime($date)) == 0) { echo \"<tr>\"; }\n-        echo \"<td class='schedule'>\";\n-        echo \"<div style='position: relative; height: 100%; width: 100%;'>\\n\";\n-        echo \"<div style='width:100%; font-size: 0.8em; text-align:right; background-color:lightgrey; padding:1px 2px 1px 2px;'>\";\n-        echo date(\"d\", strtotime($date)).\"</div>\";\n-\n-        if (count($events) == 0) { echo \"&nbsp;\"; }\n-\n-        foreach ($events as $event) {\n-            // skip events for other providers\n-            // yeah, we've got that sort of overhead here... it ain't perfect\n-            if ($providerid != $event['aid']) { continue; }\n-\n-            // Omit IN and OUT events to reduce clutter in this month view\n-            if (($event['catid'] == 2) || ($event['catid'] == 3)) { continue; }\n-\n-            // figure the start time and minutes (from midnight)\n-            $starth = substr($event['startTime'], 0, 2);\n-            $startm = substr($event['startTime'], 3, 2);\n-            $eStartMin = $starth * 60 + $startm;\n-            $startDateTime = strtotime($date.\" \".$event['startTime']);\n-\n-            // determine the class for the event DIV based on the event category\n-            $evtClass = \"event_appointment\";\n-            switch ($event['catid']) {\n-                case 1:  // NO-SHOW appt\n-                    $evtClass = \"event_noshow\";\n-                    break;\n-                case 2:  // IN office\n-                    $evtClass = \"event_in\";\n-                    break;\n-                case 3:  // OUT of office\n-                    $evtClass = \"event_out\";\n-                    break;\n-                 case 4:  // VACATION\n-                    $evtClass = \"event_reserved\";\n-                    break;\n-                 case 6:  // HOLIDAY\n-                    $evtClass = \"event_holiday\";\n-                    break;\n-                 case 8:  // LUNCH\n-                    $evtClass = \"event_reserved\";\n-                    break;\n-                case 11: // RESERVED\n-                    $evtClass = \"event_reserved\";\n-                    break;\n-                default: // some appointment\n-                    $evtClass = \"event_appointment\";\n-                    break;\n-            }\n-\n-            // now, output the event DIV\n-\n-            echo \"<div class='\".$evtClass.\"' style='background-color:\".$event['catcolor'].\";'>\";\n-\n-            $eventid = $event['eid'];\n-            $patientid = $event['pid'];\n-            $commapos = strpos($event['patient_name'], \",\");\n-            $lname = substr($event['patient_name'], 0, $commapos);\n-\t    $fname = substr($event['patient_name'], $commapos + 2);\n-            $patient_dob = $event['patient_dob'];\n-            $patient_age = $event['patient_age'];\n-            $catid = $event['catid'];\n-            $comment = addslashes($event['hometext']);\n-            $catname = $event['catname'];\n-            $title = \"Age $patient_age ($patient_dob)\";\n-\n-            // format the time specially\n-            $displayTime = date(\"g\", $startDateTime);\n-            if (date(\"i\", $startDateTime) == \"00\") {\n-                $displayTime .= (date(\"a\", $startDateTime));\n-            }\n-            else {\n-                $displayTime .= (date(\":ia\", $startDateTime));\n-            }\n-\n-            if ($comment && $GLOBALS['calendar_appt_style'] < 4) $title .= \" \" . $comment;\n-\n-            if ($catid == 4 || $catid == 8 || $catid == 11) {\n-                if ($catid ==  4) $catname = \"VACATION\";\n-                else if ($catid ==  8) $catname = \"LUNCH\";\n-                else if ($catid == 11) $catname = \"RESERVED\";\n-\n-                $content = \"<a href='javascript:oldEvt($eventdate,$eventid)'>\";\n-                $content .= $displayTime.\" \";\n-                $content .= $catname;\n-                if ($comment) $content .= \" - $comment\";\n-                $content .= \"</a>\";\n-            }\n-            else {\n-                // some sort of patient appointment\n-\n-                $content = \"<a href='javascript:oldEvt($eventdate,$eventid)' title='$catname'>\";\n-                $content .= $displayTime . htmlspecialchars($event['apptstatus']) . \"</a>\";\n-                $content .= \"<a href='javascript:goPid($patientid)' title='$title'>\";\n-                if ($catid == 1) $content .= \"<strike>\";\n-                $content .= htmlspecialchars($lname);\n-                if ($catid == 1) $content .= \"</strike>\";\n-                $content .= \"</a>\";\n-            }\n-\n-            echo $content;\n-            echo \"</div>\\n\";\n-        } // end EVENT loop\n-\n-        echo \"</div>\";\n-        echo \"</td>\";\n-        if (date(\"w\", strtotime($date)) == 6) { echo \"</tr>\"; }\n-    } // end date\n-\n-    echo \"</table>\\n\";\n-    echo \"</div>\";\n-} // end provider\n-\n- // [-*footer*-]\n- // [-include file=\"$TPL_NAME/views/global/footer.html\"-]\n- // [-include file=\"$TPL_NAME/views/footer.html\"-]\n-\n-[-/php-]\n-\n-</body>\n-\n-<script language='JavaScript'>\n-$(document).ready(function(){\n-    var win = top.printLogPrint ? top : opener.top;\n-    win.printLogPrint(window);\n-});\n-</script>\n-\n-\n-</html>\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pntemplates/default/views/month_print/outlook_ajax_template.html b/interface/main/calendar/modules/PostCalendar/pntemplates/default/views/month_print/outlook_ajax_template.html\nindex 26f96f480..b31e9f477 100644\n--- a/interface/main/calendar/modules/PostCalendar/pntemplates/default/views/month_print/outlook_ajax_template.html\n+++ b/interface/main/calendar/modules/PostCalendar/pntemplates/default/views/month_print/outlook_ajax_template.html\n@@ -438,10 +438,6 @@ foreach ($providers as $provider) {\n     echo \"</div>\";\n } // end provider\n \n- // [-*footer*-]\n- // [-include file=\"$TPL_NAME/views/global/footer.html\"-]\n- // [-include file=\"$TPL_NAME/views/footer.html\"-]\n-\n /* output a small calendar, based on the date-picker code from the normal calendar */\n function PrintDatePicker($caldate, $DOWlist, $daynames) {\n \n", "diff --git a/interface/main/calendar/modules/PostCalendar/pntemplates/default/views/week/ajax_template.html b/interface/main/calendar/modules/PostCalendar/pntemplates/default/views/week/ajax_template.html\nindex 0bc866d81..17dd055fd 100644\n--- a/interface/main/calendar/modules/PostCalendar/pntemplates/default/views/week/ajax_template.html\n+++ b/interface/main/calendar/modules/PostCalendar/pntemplates/default/views/week/ajax_template.html\n@@ -39,11 +39,11 @@ $chevron_icon_right = $_SESSION['language_direction'] == 'ltr' ? 'fa-chevron-cir\n   dlgopen('add_edit_event.php?startampm=' + startampm +\n    '&starttimeh=' + starttimeh + '&starttimem=' + starttimem +\n    '&date=' + eventdate + '&userid=' + providerid + '&catid=' + catid[-php-]\n-    if(isset($_SESSION[pid]))\n+    if(isset($_SESSION['pid']))\n         {\n-            if($_SESSION[pid]>0)\n+            if($_SESSION['pid']>0)\n                 {\n-                    echo \"+'&patientid=$_SESSION[pid]'\";\n+                    echo \"+'&patientid=\" . $_SESSION['pid'] . \"'\";\n                 }\n         }\n     [-/php-]\n@@ -130,11 +130,6 @@ $chevron_icon_right = $_SESSION['language_direction'] == 'ltr' ? 'fa-chevron-cir\n \n  $A_CATEGORY  =& $this->_tpl_vars['A_CATEGORY'];\n \n- // [-if $PRINT_VIEW != 1-]\n- // [-*Main Navigation*-]\n- // [-include file=\"$TPL_NAME/views/global/navigation.html\"-]\n- // [-/if-]\n-\n  $A_EVENTS  =& $this->_tpl_vars['A_EVENTS'];\n  $providers =& $this->_tpl_vars['providers'];\n  $times     =& $this->_tpl_vars['times'];\n@@ -539,23 +534,29 @@ foreach ($providers as $provider) {\n             }\n \n             $leftpos = 0;\n-            $width = 100 / count($events_in_timeslot);\n-\n-            // loop over the events in this timeslot and adjust their width\n-            foreach ($events_in_timeslot as $eid) {\n-                // set the width if not already set or if the current width is smaller\n-                // than was was previously set\n-                if (! isset($eventPositions[$eid]->width)) { $eventPositions[$eid]->width = $width; }\n-                else if ($eventPositions[$eid]->width > $width) { $eventPositions[$eid]->width = $width; }\n-\n-                // set the left position if not already set or if the current left is\n-                // greater than what was previously set\n-                if (! isset($eventPositions[$eid]->leftpos)) { $eventPositions[$eid]->leftpos = $leftpos; }\n-                else if ($eventPositions[$eid]->leftpos < $leftpos) { $eventPositions[$eid]->leftpos = $leftpos; }\n-\n-                // increment the leftpos by the width\n-                $leftpos += $width;\n+            $width = 100;\n+            if (!empty($events_in_timeslot)) {\n+                $width = 100 / count($events_in_timeslot);\n+\n+                // loop over the events in this timeslot and adjust their width\n+                foreach ($events_in_timeslot as $eid) {\n+                    $eventPositions[$eid] = new stdClass();\n+\n+                    // set the width if not already set or if the current width is smaller\n+                    // than was was previously set\n+                    if (! isset($eventPositions[$eid]->width)) { $eventPositions[$eid]->width = $width; }\n+                    else if ($eventPositions[$eid]->width > $width) { $eventPositions[$eid]->width = $width; }\n+\n+                    // set the left position if not already set or if the current left is\n+                    // greater than what was previously set\n+                    if (! isset($eventPositions[$eid]->leftpos)) { $eventPositions[$eid]->leftpos = $leftpos; }\n+                    else if ($eventPositions[$eid]->leftpos < $leftpos) { $eventPositions[$eid]->leftpos = $leftpos; }\n+\n+                    // increment the leftpos by the width\n+                    $leftpos += $width;\n+                }\n             }\n+\n         } // end overlap detection\n \n         // now loop over the events for the day and output their DIVs\n@@ -737,7 +738,7 @@ foreach ($providers as $provider) {\n                 $divTitle .= \"\\n[\".$atitle .\"]\";\n                 //$content .= \"<a href='javascript:oldEvt($eventdate,$eventid)' title='$atitle'>\";\n                 $content .= $catname;\n-                if ($event['recurrtype'] > 0) $content .= \"<img src='{$this->_tpl_vars[TPL_IMAGE_PATH]}/repeating8.png' border='0' style='margin:0px 2px 0px 2px;' title='Repeating event' alt='Repeating event'>\";\n+                if ($event['recurrtype'] > 0) $content .= \"<img src='{$this->_tpl_vars['TPL_IMAGE_PATH']}/repeating8.png' border='0' style='margin:0px 2px 0px 2px;' title='Repeating event' alt='Repeating event'>\";\n                 if ($comment) $content .= \" $comment\";\n                 //$content .= \"</a>\";\n             }\n@@ -752,7 +753,7 @@ foreach ($providers as $provider) {\n \n                 $content .= \"<span class='appointment\".$apptToggle.\"'>\";\n                 $content .= create_event_time_anchor($dispstarth . ':' . $startm);\n-                if ($event['recurrtype'] > 0) $content .= \"<img src='{$this->_tpl_vars[TPL_IMAGE_PATH]}/repeating8.png' border='0' style='margin:0px 2px 0px 2px;' title='Repeating event' alt='Repeating event'>\";\n+                if ($event['recurrtype'] > 0) $content .= \"<img src='{$this->_tpl_vars['TPL_IMAGE_PATH']}/repeating8.png' border='0' style='margin:0px 2px 0px 2px;' title='Repeating event' alt='Repeating event'>\";\n                 $content .= htmlspecialchars($event['apptstatus']);\n                 if ($patientid) {\n                     // include patient name and link to their details\n@@ -760,7 +761,7 @@ foreach ($providers as $provider) {\n                     $link_title .= xl('Age') . \": \".$patient_age.\"\\n\" . xl('DOB') . \": \".$patient_dob.htmlspecialchars($comment, ENT_QUOTES).\"\\n\";\n                     $link_title .= \"(\" . xl('Click to view') . \")\";\n                     $content .= \"<a href='javascript:goPid($patientid)' title='$link_title'>\";\n-                    $content .= \"<img src='{$this->_tpl_vars[TPL_IMAGE_PATH]}/user-green.gif'\n+                    $content .= \"<img src='{$this->_tpl_vars['TPL_IMAGE_PATH']}/user-green.gif'\n                                       onmouseover=\\\"javascript:ShowImage('\".$GLOBALS['webroot'].\"/controller.php?document&retrieve&patient_id=\".attr($patientid).\"&document_id=-1&as_file=false&original_file=true&disable_exit=false&show_original=true&context=patient_picture');\\\"\n                                       onmouseout=\\\"javascript:HideImage();\\\"\n                                       border='0' title='$link_title' alt='View Patient' />\";\n@@ -786,7 +787,7 @@ foreach ($providers as $provider) {\n                     $link_title .= $divTitle .\"\\n\";\n                     $link_title .= \"(\" . xl('Click to view') . \")\";\n                     $content .= \"<a href='javascript:goGid($groupid)' title='$link_title'>\";\n-                    $content .= \"<img src='{$this->_tpl_vars[TPL_IMAGE_PATH]}/user-blue.gif' border='0' title='$link_title' alt='View Patient' />\";\n+                    $content .= \"<img src='{$this->_tpl_vars['TPL_IMAGE_PATH']}/user-blue.gif' border='0' title='$link_title' alt='View Patient' />\";\n                     if ($catid == 1) $content .= \"<strike>\";\n                     $content .= htmlspecialchars($groupname);\n                     if ($GLOBALS['calendar_appt_style'] != 1) {\n@@ -885,10 +886,6 @@ foreach ($providers as $provider) {\n     echo \"</table>\\n\";\n } // end provider\n \n- // [-*footer*-]\n- // [-include file=\"$TPL_NAME/views/global/footer.html\"-]\n- // [-include file=\"$TPL_NAME/views/footer.html\"-]\n-\n [-/php-]\n </div>  <!-- end bigCal DIV -->\n </div> <!-- end bottom DIV -->\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pntemplates/default/views/week_print/ajax_template.html b/interface/main/calendar/modules/PostCalendar/pntemplates/default/views/week_print/ajax_template.html\ndeleted file mode 100644\nindex 88ab2e739..000000000\n--- a/interface/main/calendar/modules/PostCalendar/pntemplates/default/views/week_print/ajax_template.html\n+++ /dev/null\n@@ -1,735 +0,0 @@\n-[-*Smarty*-]\n-[-*****************************************************************************-]\n-[-* Copyright (C) 2005-2006 Rod Roark <rod@sunsetsystems.com> and others      *-]\n-[-*                                                                           *-]\n-[-* This program is free software; you can redistribute it and/or             *-]\n-[-* modify it under the terms of the GNU General Public License               *-]\n-[-* as published by the Free Software Foundation; either version 2            *-]\n-[-* of the License, or (at your option) any later version.                    *-]\n-[-*****************************************************************************-]\n-[-config_load file=\"default.conf\"-]\n-[-*Load the Language Definitions*-]\n-[-config_load file=\"lang.$USER_LANG\"-]\n-[-include file=\"$TPL_NAME/views/header.html\"-]\n-[-* we want to include out stylesheet for this view*-]\n-[-fetch file=\"$TPL_STYLE_PATH/day.css\" assign=\"css\"-]\n-[-eval var=$css-]\n-\n-[-*Values used in setting timeslot and event heights*-]\n-[-php-]$timeslotHeightVal=20; $timeslotHeightUnit=\"px\";[-/php-]\n-\n-<style>\n-a {\n- text-decoration:none;\n-}\n-td {\n- font-family: Arial, Helvetica, sans-serif;\n-}\n-div.tiny { width:1px; height:1px; font-size:1px; }\n-#dateNAV {\n-    float: left;\n-}\n-#dateDisplay {\n-    float: left;\n-    padding-left: 10px;\n-    font-family: Arial, Helvetica, sans-serif;\n-}\n-#viewPicker {\n-    float: right;\n-}\n-#datePicker {\n-    width: 25%;\n-    float: left;\n-    position: absolute;\n-    display: inline;\n-    top: 50px;\n-    left: 0px;\n-    padding: 5px;\n-    text-align: center;\n-    background-color: lightblue;\n-}\n-#datePicker td {\n-    font-family: Arial, Helvetica, sans-serif;\n-    font-size: 0.7em;\n-    /* font-size: 9pt;  */\n-}\n-#bigCalHeader {\n-    text-align:center;\n-    font-family: Arial, Helvetica, sans-serif;\n-    font-size: 14pt;\n-}\n-#bigCal {\n-    position: relative;\n-}\n-.pagebreak {\n-    page-break-after: always;\n-}\n-#bigCal table {\n-    border-collapse: collapse;\n-}\n-\n-/* these are for the small datepicker DIV */\n-#datePicker table {\n-    border-collapse: collapse;\n-    border: 3px solid lightblue;\n-}\n-#datePicker .tdDOW-small {\n-    font-family: Arial, Helvetica, sans-serif;\n-    font-size: 10px;\n-    vertical-align: top;\n-    background-color: lightblue;\n-    text-align: center;\n-    border: none;\n-    padding: 2px 3px 2px 3px;\n-}\n-#datePicker .tdDatePicker {\n-    cursor: pointer;\n-    cursor: hand;\n-}\n-#datePicker .tdWeekend-small {\n-    font-family: Arial, Helvetica, sans-serif;\n-    font-size: 10px;\n-    vertical-align: top;\n-    border: none;\n-    padding: 2px 3px 2px 3px;\n-    background-color: #dddddd;\n-    color: #999999;\n-}\n-\n-#datePicker .tdOtherMonthDay-small {\n-    font-family: Arial, Helvetica, sans-serif;\n-    font-size: 10px;\n-    vertical-align: top;\n-    border: none;\n-    padding: 2px 3px 2px 3px;\n-    background-color: #ffffff;\n-    color: #999999;\n-}\n-\n-#datePicker .tdMonthName-small {\n-    text-align: center;\n-    font-family: Arial, Helvetica, sans-serif;\n-    font-size: 12px;\n-    font-style: normal\n-}\n-\n-#datePicker .tdMonthDay-small {\n-    font-family: Arial, Helvetica, sans-serif;\n-    font-size: 10px;\n-    vertical-align: top;\n-    border: none;\n-    padding: 2px 3px 2px 3px;\n-    background-color: #ffffff;\n-}\n-#datePicker .currentWeek {\n-    border-top: 1px solid blue;\n-    border-bottom: 1px solid blue;\n-    background-color: lightblue;\n-}\n-#datePicker .currentDate {\n-    border: 1px solid blue;\n-    background-color: blue;\n-    color: lightblue;\n-}\n-\n-/* the DIV of times */\n-#times {\n-    border-right: 1px solid #999;\n-}\n-#times table {\n-    border-collapse: collapse;\n-    width: 100%;\n-    margin: 0px;\n-    padding: 0px;\n-}\n-#times table td {\n-    border: 0px;\n-    border-top: 1px solid #999;\n-    margin: 0px;\n-    padding: 0px;\n-    font-size: 10pt;\n-}\n-.timeslot {\n-    height: [-php-]echo $timeslotHeightVal.$timeslotHeightUnit;[-/php-];\n-    margin: 0px;\n-    padding: 0px;\n-}\n-.schedule {\n-    background-color: pink;\n-    vertical-align: top;\n-    padding: 0px;\n-    margin: 0px;\n-    border-right: 1px solid black;\n-}\n-/* types of events */\n-.event_in {\n-    position: absolute;\n-    background-color: white;\n-    width: 100%;\n-    z-index:1;\n-    font-size: 0.8em;\n-    color: #ddd;\n-    border-top: 1px dashed #ddd;\n-}\n-.event_out {\n-    position: absolute;\n-    background-color: lightgray;\n-    width: 100%;\n-    z-index:1;\n-    font-size: 0.8em;\n-    color: #ddd;\n-    border-top: 1px dashed #ddd;\n-}\n-.event_appointment {\n-    position: absolute;\n-    background-color: white;\n-    z-index:2;\n-    overflow: hidden;\n-    border: 1px solid blue;\n-    width: 100%;\n-    font-size: 0.8em;\n-}\n-.event_noshow {\n-    position: absolute;\n-    background-color: pink;\n-    z-index:2;\n-    overflow: hidden;\n-    border: 1px solid blue;\n-    width: 100%;\n-    font-size: 0.8em;\n-}\n-.event_reserved {\n-    position: absolute;\n-    background-color: pink;\n-    z-index:2;\n-    overflow: hidden;\n-    border: 1px solid blue;\n-    width: 100%;\n-    font-size: 0.8em;\n-}\n-</style>\n-\n-[-headerTemplate assets='no_bootstrap|no_fontawesome|no_main-theme|no_dialog-]\n-\n-[-php-]\n-\n- // A_CATEGORY is an ordered array of associative-array categories.\n- // Keys of interest are: id, name, color, desc, event_duration.\n- //\n-\n- $A_CATEGORY  =& $this->_tpl_vars['A_CATEGORY'];\n-\n- $A_EVENTS  =& $this->_tpl_vars['A_EVENTS'];\n- // $S_EVENTS  =& $this->_tpl_vars['S_EVENTS']; // Deleted by Rod\n- $providers =& $this->_tpl_vars['providers'];\n- $times     =& $this->_tpl_vars['times'];\n- $interval  =  $this->_tpl_vars['interval'];\n- $viewtype  =  $this->_tpl_vars['VIEW_TYPE'];\n- $PREV_WEEK_URL = $this->_tpl_vars['PREV_WEEK_URL'];\n- $NEXT_WEEK_URL = $this->_tpl_vars['NEXT_WEEK_URL'];\n- $PREV_DAY_URL  = $this->_tpl_vars['PREV_DAY_URL'];\n- $NEXT_DAY_URL  = $this->_tpl_vars['NEXT_DAY_URL'];\n-\n- $Date =  postcalendar_getDate();\n- if (!isset($y)) $y = substr($Date, 0, 4);\n- if (!isset($m)) $m = substr($Date, 4, 2);\n- if (!isset($d)) $d = substr($Date, 6, 2);\n-\n-[-/php-]\n-\n-<!--\n-<div id=\"datePicker\">\n-\n-<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n-<tr>\n-[-php-]\n-$atmp = array_keys($A_EVENTS);\n-$caldate = strtotime($atmp[0]);\n-$cMonth = date(\"m\", $caldate);\n-$cYear = date(\"Y\", $caldate);\n-$cDay = date(\"d\", $caldate);\n-\n-// compute the previous month date\n-// stay on the same day if possible\n-$pDay = $cDay;\n-$pMonth = $cMonth - 1;\n-$pYear = $cYear;\n-if ($pMonth < 1) { $pMonth = 12; $pYear = $cYear - 1; }\n-while (! checkdate($pMonth, $pDay, $pYear)) { $pDay = $pDay - 1; }\n-$prevMonth = sprintf(\"%d%02d%02d\",$pYear,$pMonth,$pDay);\n-\n-// compute the next month\n-// stay on the same day if possible\n-$nDay = $cDay;\n-$nMonth = $cMonth + 1;\n-$nYear = $cYear;\n-if ($nMonth > 12) { $nMonth = 1; $nYear = $cYear + 1; }\n-while (! checkdate($nMonth, $nDay, $nYear)) { $nDay = $nDay - 1; }\n-$nextMonth = sprintf(\"%d%02d%02d\",$nYear,$nMonth,$nDay);\n-[-/php-]\n-<td class=\"tdDOW-small tdDatePicker\" id=\"[-php-]echo $prevMonth[-/php-]\" title=\"[-php-]echo date(\"F\", strtotime($prevMonth));[-/php-]\">&lt;</td>\n-<td colspan=\"5\" class=\"tdMonthName-small\">\n-[-php-]\n-echo date('F', $caldate);\n-[-/php-]\n-</td>\n-<td class=\"tdDOW-small tdDatePicker\" id=\"[-php-]echo $nextMonth[-/php-]\" title=\"[-php-]echo date(\"F\", strtotime($nextMonth));[-/php-]\">&gt;</td>\n-<tr>\n-<td class=\"tdDOW-small\">S</td>\n-<td class=\"tdDOW-small\">M</td>\n-<td class=\"tdDOW-small\">T</td>\n-<td class=\"tdDOW-small\">W</td>\n-<td class=\"tdDOW-small\">T</td>\n-<td class=\"tdDOW-small\">F</td>\n-<td class=\"tdDOW-small\">S</td>\n-</tr>\n-[-php-]\n-$atmp = array_keys($A_EVENTS);\n-$caldate = strtotime($atmp[0]);\n-$caldateEnd = strtotime($atmp[6]);\n-// to make a complete week row we need to compute the real\n-// start and end dates for the view\n-list ($year, $month, $day) = explode(\" \", date('Y m d', $caldate));\n-$startdate = strtotime($year.$month.\"01\");\n-while (date('w', $startdate) != 0) { $startdate -= 60*60*24; }\n-\n-$enddate = strtotime($year.$month.date(\"t\", $prevmonth).\" 23:59\");\n-while (date('w', $enddate) != 6) { $enddate += 60*60*24; }\n-\n-$currdate = $startdate;\n-while ($currdate <= $enddate) {\n-    if (date('w', $currdate) == 0) {\n-        // start of week row\n-        $tr = \"<tr>\";\n-        echo $tr;\n-    }\n-\n-    // set the TD class\n-    $tdClass = \"tdMonthDay-small\";\n-    if (date('m', $currdate) != $month) {\n-        $tdClass = \"tdOtherMonthDay-small\";\n-    }\n-    if ((date('w', $currdate) == 0) || (date('w', $currdate) == 6)) {\n-        $tdClass = \"tdWeekend-small\";\n-    }\n-\n-    if ((date('Ymd',$currdate) >= date('Ymd', $caldate)) &&\n-        (date('Ymd',$currdate) <= date('Ymd', $caldateEnd)))\n-    {\n-        // add a class that highlights the 'current date'\n-        $tdClass .= \" currentWeek\";\n-    }\n-\n-    if (date('Ymd',$currdate) == $Date) {\n-        // $Date is defined near the top of this file\n-        // and is equal to whatever date the user has clicked\n-        $tdClass .= \" currentDate\";\n-    }\n-\n-    // add a class so that jQuery can grab these days for the 'click' event\n-    $tdClass .= \" tdDatePicker\";\n-\n-    // output the TD\n-    $td = \"<td \";\n-    $td .= \"class=\\\"\".$tdClass.\"\\\" \";\n-    //$td .= \"id=\\\"\".date(\"Ymd\", $currdate).\"\\\" \";\n-    $td .= \"id=\\\"\".date(\"Ymd\", $currdate).\"\\\" \";\n-    $td .= \"title=\\\"Go to week of \".date('M d, Y', $currdate).\"\\\" \";\n-    $td .= \"> \".date('d', $currdate).\"</td>\\n\";\n-    echo $td;\n-\n-    // end of week row\n-    if (date('w', $currdate) == 6) echo \"</tr>\\n\";\n-\n-    // time correction = plus 1000 seconds, for some unknown reason\n-    $currdate += (60*60*24)+1000;\n-}\n-[-/php-]\n-</table>\n-</div>\n-\n--->\n-\n-[-assign var=\"dayname\" value=$DATE|date_format:\"%w\"-]\n-[-assign var=\"day\"     value=$DATE|date_format:\"%d\"|string_format:\"%1d\"-]\n-[-assign var=\"month\"   value=$DATE|date_format:\"%m\"|string_format:\"%1d\"-]\n-[-assign var=\"year\"    value=$DATE|date_format:\"%Y\"|string_format:\"%4d\"-]\n-\n-[-pc_sort_events var=\"S_EVENTS\" sort=\"time\" order=\"asc\" value=$A_EVENTS-]\n-\n-<div id=\"bigCal\">\n-[-php-]\n-/* used in debugging\n-foreach ($A_EVENTS as $date => $events) {\n-    echo $date.\" = \";\n-    foreach ($events as $oneE) {\n-        print_r($oneE);\n-        echo \"<br><br>\";\n-    }\n-    echo \"<hr width=100%>\";\n-}\n-*/\n-\n-// start out without adding a pagebreak\n-$addPagebreak = false;\n-\n-// This loops once for each provider to be displayed.\n-//\n-foreach ($providers as $provider) {\n-    // output a pagebreak, if needed\n-    if ($addPagebreak) { echo \"<div class='pagebreak'></div>\"; }\n-    $addPagebreak = true;\n-\n-    echo \"<div id='bigCal'>\";\n-\n-    echo \"<div id='bigCalHeader'>\";\n-    $atmp = array_keys($A_EVENTS);\n-    echo date('d M Y', strtotime($atmp[0]));\n-    echo \" - \";\n-    echo date('d M Y', strtotime($atmp[count($atmp)-1]));\n-    echo \"</div>\";\n-\n-    $providerid = $provider['id'];\n-\n-    // to specially handle the IN/OUT events I'm doing something new here\n-    // for each IN event it will have a duration lasting until the next\n-    // OUT event or until the end of the day\n-    $tmpTime = $times[0];\n-    $calStartMin = ($tmpTime['hour'] * 60) + $tmpTime['minute'];\n-    $tmpTime = $times[count($times)-1];\n-    $calEndMin = ($tmpTime['hour'] * 60) + $tmpTime['minute'];\n-\n-    echo \"<table border='0' cellpadding='1' cellspacing='0' width='100%'>\\n\";\n-    echo \" <tr>\\n\";\n-    echo \"  <td colspan='8' style='text-align: center; background-color:#ddd;'>\";\n-    echo $provider['fname'] . \" \" . $provider['lname'];\n-    echo \"</td>\\n\";\n-    echo \" </tr>\\n\";\n-\n-    // output column (date) headers\n-    $colWidth = 100/8;\n-    echo \" <tr>\\n\";\n-    echo \" <td style='width:\".$colWidth.\"%;'><div class=tiny></div></td>\"; // 1x1 px content so the browser does not suppress borders\n-    $defaultDate = \"\"; // used when creating link for a 'new' event\n-    $in_cat_id = 0; // used when creating link for a 'new' event\n-    foreach ($A_EVENTS as $date => $events) {\n-        $dateFmt = date(\"Ymd\", strtotime($date));\n-        $gotoURL = pnModURL(__POSTCALENDAR__,'user','view',\n-                        array('tplview'=>$template_view,\n-                        'viewtype'=>'day',\n-                        'Date'=> $dateFmt,\n-                        'pc_username'=>$pc_username,\n-                        'pc_category'=>$category,\n-                        'pc_topic'=>$topic));\n-        if ($defaultDate == \"\") $defaultDate = $dateFmt;\n-        echo \"<td align='center' style='width:\".$colWidth.\"%; border-left: 1px solid #999; border-right: 1px solid #999; font-size: 0.7em;\";\n-        if ($Date == $dateFmt) { echo \"background-color: #ddd;\"; }\n-        echo \"'>\";\n-        echo \"<a href='$gotoURL'>\";\n-        echo date(\"D m/d\", strtotime($date));\n-        echo \"</a></td>\";\n-    }\n-    echo \" </tr>\\n\";\n-\n-    // output the TD with the times DIV\n-    echo \"<tr>\";\n-    echo \"<td id='times'><div><table>\\n\";\n-    foreach ($times as $slottime) {\n-        $startampm = ($slottime['mer']) == \"pm\" ? 2 : 1;\n-        $starttimeh = $slottime['hour'];\n-        $disptimeh = ($starttimeh > 12) ? ($starttimeh - 12) : $starttimeh;\n-        $starttimem = $slottime['minute'];\n-        $slotendmins = $starttimeh * 60 + $starttimem + $interval;\n-\n-        echo \"<tr><td class='timeslot'>\";\n-        echo \"<a href='javascript:newEvt($startampm,$starttimeh,$starttimem,$defaultDate,$providerid,$in_cat_id)' title='New Appointment' alt='New Appointment'>\";\n-        //echo $slottime['hour'] * 60 + $slottime['minute'];\n-        echo \"$disptimeh:$starttimem</a>\";\n-        echo \"</td></tr>\\n\";\n-    }\n-    echo \"</table></div></td>\";\n-\n-    // For each day...\n-    // output a TD with an inner containing DIV positioned 'relative'\n-    // within that DIV we place our event DIVs using 'absolute' positioning\n-    foreach ($A_EVENTS as $date => $events) {\n-        $eventdate = substr($date, 0, 4) . substr($date, 5, 2) . substr($date, 8, 2);\n-\n-        // having a 'title' for the TD makes the date appear by the mouse pointer\n-        // this is nice when all you see are times on the left side and no head\n-        // row with the dates or day-of-week (DOW)\n-        echo \"<td class='schedule' style='border: 1px solid #999;' title='\".date(\"l, d M Y\", strtotime($date)).\"'>\";\n-        echo \"<div style='position: relative; height: 100%; width: 100%;'>\\n\";\n-\n-        // determine if events overlap and adjust their width and left position as needed\n-        // 26 Feb 2008 - This needs fine tuning or total replacement\n-        //             - it doesn't work as well as I'd like - JRM\n-        $eventPositions = array();\n-        foreach ($times as $slottime) {\n-            $starttimeh = $slottime['hour'];\n-            $starttimem = $slottime['minute'];\n-\n-            $slotstartmins = $starttimeh * 60 + $starttimem;\n-            $slotendmins = $starttimeh * 60 + $starttimem + $interval;\n-\n-            $events_in_timeslot = array();\n-            foreach ($events as $e1) {\n-                // ignore IN and OUT events\n-                if (($e1['catid'] == 2) || ($e1['catid'] == 3)) { continue; }\n-                // skip events without an ID (why they are in the loop, I have no idea)\n-                if ($e1['eid'] == \"\") { continue; }\n-                // skip events for other providers\n-                if ($providerid != $e1['aid']) { continue; }\n-\n-                // create a numeric start and end for comparison\n-                $starth = substr($e1['startTime'], 0, 2);\n-                $startm = substr($e1['startTime'], 3, 2);\n-                $e1Start = ($starth * 60) + $startm;\n-                $e1End = $e1Start + $e1['duration']/60;\n-\n-                // three ways to overlap:\n-                // start-in, end-in, span\n-                if ((($e1Start >= $slotstartmins) && ($e1Start < $slotendmins)) // start-in\n-                   || (($e1End > $slotstartmins) && ($e1End <= $slotendmins)) // end-in\n-                   || (($e1Start < $slotstartmins) && ($e1End > $slotendmins))) // span\n-                {\n-                    array_push($events_in_timeslot, $e1['eid']);\n-                }\n-            }\n-\n-            $leftpos = 0;\n-            $width = 100 / count($events_in_timeslot);\n-\n-            // loop over the events in this timeslot and adjust their width\n-            foreach ($events_in_timeslot as $eid) {\n-                // set the width if not already set or if the current width is smaller\n-                // than was was previously set\n-                if (! isset($eventPositions[$eid]->width)) { $eventPositions[$eid]->width = $width; }\n-                else if ($eventPositions[$eid]->width > $width) { $eventPositions[$eid]->width = $width; }\n-\n-                // set the left position if not already set or if the current left is\n-                // greater than what was previously set\n-                if (! isset($eventPositions[$eid]->leftpos)) { $eventPositions[$eid]->leftpos = $leftpos; }\n-                else if ($eventPositions[$eid]->leftpos < $leftpos) { $eventPositions[$eid]->leftpos = $leftpos; }\n-\n-                // increment the leftpos by the width\n-                $leftpos += $width;\n-            }\n-        } // end overlap detection\n-\n-        // now loop over the events for the day and output their DIVs\n-        foreach ($events as $event) {\n-            // skip events for other providers\n-            // yeah, we've got that sort of overhead here... it ain't perfect\n-            if ($providerid != $event['aid']) { continue; }\n-\n-            // skip events without an ID (why they are in the loop, I have no idea)\n-            if ($event['eid'] == \"\") { continue; }\n-\n-            // figure the start time and minutes (from midnight)\n-            $starth = substr($event['startTime'], 0, 2);\n-            $startm = substr($event['startTime'], 3, 2);\n-            $eStartMin = $starth * 60 + $startm;\n-\n-            // determine the class for the event DIV based on the event category\n-            $evtClass = \"event_appointment\";\n-            switch ($event['catid']) {\n-                case 1:  // NO-SHOW appt\n-                    $evtClass = \"event_noshow\";\n-                    break;\n-                case 2:  // IN office\n-                    $evtClass = \"event_in\";\n-                    break;\n-                case 3:  // OUT of office\n-                    $evtClass = \"event_out\";\n-                    break;\n-                case 4:  // VACATION\n-                    $evtClass = \"event_reserved\";\n-                    break;\n-                case 6:  // HOLIDAY\n-                    $evtClass = \"event_holiday\";\n-                    break;\n-                case 8:  // LUNCH\n-                    $evtClass = \"event_reserved\";\n-                    break;\n-                case 11: // RESERVED\n-                    $evtClass = \"event_reserved\";\n-                    break;\n-                default: // some appointment\n-                    $evtClass = \"event_appointment\";\n-                    break;\n-            }\n-\n-            // if this is an IN or OUT event then we have some extra special\n-            // processing to be done\n-            // the IN event creates a DIV until the OUT event\n-            // or, without an OUT DIV matching the IN event\n-            // then the IN event runs until the end of the day\n-            if ($event['catid'] == 2) {\n-                // locate a matching OUT for this specific IN\n-                $found = false;\n-                $outMins = 0;\n-                foreach ($events as $outevent) {\n-                    // skip events for other providers\n-                    if ($providerid != $outevent['aid']) { continue; }\n-                    // skip events with blank IDs\n-                    if ($outevent['eid'] == \"\") { continue; }\n-\n-                    if ($outevent['eid'] == $event['eid']) { $found = true; continue; }\n-                    if (($found == true) && ($outevent['catid'] == 3)) {\n-                        // calculate the duration from this event to the outevent\n-                        $outH = substr($outevent['startTime'], 0, 2);\n-                        $outM = substr($outevent['startTime'], 3, 2);\n-                        $outMins = ($outH * 60) + $outM;\n-                        $event['duration'] = ($outMins - $eStartMin) * 60; // duration is in seconds\n-                        $found = 2;\n-                        break;\n-                    }\n-                }\n-                if ($outMins == 0) {\n-                    // no OUT was found so this event's duration goes\n-                    // until the end of the day\n-                    $event['duration'] = ($calEndMin - $eStartMin) * 60; // duration is in seconds\n-                }\n-            }\n-\n-            // calculate the TOP value for the event DIV\n-            // diff between event start and schedule start\n-            $eMinDiff = $eStartMin - $calStartMin;\n-            // diff divided by the time interval of the schedule\n-            $eStartInterval = $eMinDiff / $interval;\n-            // times the interval height\n-            $eStartPos = $eStartInterval * $timeslotHeightVal;\n-            $evtTop = $eStartPos.$timeslotHeightUnit;\n-\n-            // calculate the HEIGHT value for the event DIV\n-            // diff between end and start of event\n-            $eEndMin = $eStartMin + ($event['duration']/60);\n-            // prevent the overall height of the event from going beyond the bounds\n-            // of the time table\n-            if ($eEndMin > $calEndMin) { $eEndMin = $calEndMin + $interval; }\n-            $eMinDiff = $eEndMin - $eStartMin;\n-            // diff divided by the time interval of the schedule\n-            $eEndInterval = $eMinDiff / $interval;\n-            // times the interval height\n-            $eHeight = $eEndInterval * $timeslotHeightVal;\n-            $evtHeight = $eHeight.$timeslotHeightUnit;\n-\n-            // determine the DIV width based on any overlapping events\n-            // see further above for the overlapping calculation code\n-            $divWidth = \"\";\n-            $divLeft = \"\";\n-            if (isset($eventPositions[$event['eid']])) {\n-                $divWidth = \"width: \".$eventPositions[$event['eid']]->width.\"%\";\n-                $divLeft = \"left: \".$eventPositions[$event['eid']]->leftpos.\"%\";\n-            }\n-\n-            $eventid = $event['eid'];\n-            $patientid = $event['pid'];\n-            $commapos = strpos($event['patient_name'], \",\");\n-            $lname = substr($event['patient_name'], 0, $commapos);\n-\t    $fname = substr($event['patient_name'], $commapos + 2);\n-            $patient_dob = $event['patient_dob'];\n-            $patient_age = $event['patient_age'];\n-            $catid = $event['catid'];\n-            $comment = addslashes($event['hometext']);\n-            $catname = $event['catname'];\n-            $title = \"Age $patient_age ($patient_dob)\";\n-\n-            $content = \"\";\n-\n-            if ($comment && $GLOBALS['calendar_appt_style'] < 4) $title .= \" \" . $comment;\n-\n-            // the divTitle is what appears when the user hovers the mouse over the DIV\n-            $divTitle = date(\"D, d M Y\", strtotime($date));\n-\n-            if ($catid == 2 || $catid == 3 || $catid == 4 || $catid == 8 || $catid == 11) {\n-                if      ($catid ==  2) $catname = \"IN\";\n-                else if ($catid ==  3) $catname = \"OUT\";\n-                else if ($catid ==  4) $catname = \"VACATION\";\n-                else if ($catid ==  8) $catname = \"LUNCH\";\n-                else if ($catid == 11) $catname = \"RESERVED\";\n-\n-                $atitle = $catname;\n-                if ($comment) $atitle .= \" $comment\";\n-                $content .= $catname;\n-                if ($comment) $content .= \" $comment\";\n-            }\n-            else {\n-                // some sort of patient appointment\n-                $content .= \"<span class='appointment\".$apptToggle.\"'>\";\n-                $content .= $starth . ':' . $startm . htmlspecialchars($event['apptstatus']);\n-                if ($catid == 1) $content .= \"<strike>\";\n-                $content .= htmlspecialchars($lname);\n-                if ($GLOBALS['calendar_appt_style'] != 1) {\n-                    $content .= \",\" . htmlspecialchars($fname);\n-                    if ($event['title'] && $GLOBALS['calendar_appt_style'] >= 3) {\n-                        $content .= \"(\" . $event['title'];\n-                        if ($event['hometext'] && $GLOBALS['calendar_appt_style'] >= 4)\n-                        $content .= \": <font color='green'>\" . htmlspecialchars(trim($event['hometext'])) . \"</font>\";\n-                        $content .= \")\";\n-                    }\n-                }\n-                if ($catid == 1) $content .= \"</strike>\";\n-                $content .= \"</span>\";\n-            }\n-\n-            $divTitle .= \"\\n(double click to edit)\";\n-\n-                    //This is to differentiate between the events of holiday(6) or vacation(4) in order to disable\n-                    //the ability to double click and edit this events\n-                    if ($event['catid']!=\"6\" && $event['catid']!=\"4\" )\n-                    {\n-                    // output the DIV\n-                    echo \"<div class='\".$evtClass.\" event' style='top:\".$evtTop.\"; height:\".$evtHeight.\n-                    \"; background-color:\".$event[\"catcolor\"].\n-                    \"; $divWidth\".\n-                    \"; $divLeft\".\n-                    \"' \".\n-                    \" id='\".$eventdate.\"-\".$eventid.\"'\".\n-                    \">\";\n-                    }\n-                    else\n-                    {\n-                    // output the DIV\n-                    echo \"<div class='\".$evtClass.\" hiddenevent' style='top:\".$evtTop.\"; height:\".$evtHeight.\n-                    \"; background-color:\".$event[\"catcolor\"].\n-                    \"; $divWidth\".\n-                    \"; $divLeft\".\n-                    \"' \".\n-                    \" id='\".$eventdate.\"-\".$eventid.\"'\".\n-                    \">\";\n-                    }\n-                    // output the content\n-                    echo $content;\n-                    echo \"</div>\\n\";\n-        } // end EVENT loop\n-\n-        echo \"</div>\";\n-        echo \"</td>\\n\";\n-\n-    } // end date\n-\n-    echo \" </tr>\\n\";\n-\n-    echo \"</table>\\n\";\n-    echo \"<P>\";\n-} // end provider\n-\n- // [-*footer*-]\n- // [-include file=\"$TPL_NAME/views/global/footer.html\"-]\n- // [-include file=\"$TPL_NAME/views/footer.html\"-]\n-\n-[-/php-]\n-</div>  <!-- end bigCal DIV -->\n-\n-</body>\n-\n-<script>\n-$(function (){\n-    var win = top.printLogPrint ? top : opener.top;\n-    win.printLogPrint(window);\n-});\n-</script>\n-\n-</html>\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pntemplates/default/views/week_print/outlook_ajax_template.html b/interface/main/calendar/modules/PostCalendar/pntemplates/default/views/week_print/outlook_ajax_template.html\nindex ff0f32936..4c628f89f 100644\n--- a/interface/main/calendar/modules/PostCalendar/pntemplates/default/views/week_print/outlook_ajax_template.html\n+++ b/interface/main/calendar/modules/PostCalendar/pntemplates/default/views/week_print/outlook_ajax_template.html\n@@ -429,7 +429,11 @@ function PrintEvents($events, $providerid, $TPL_IMAGE_PATH) {\n             // diff between event start and schedule start\n             $eMinDiff = $eStartMin - $calStartMin;\n             // diff divided by the time interval of the schedule\n-            $eStartInterval = $eMinDiff / $interval;\n+            if (empty($interval)) {\n+                $eStartInterval = 0;\n+            } else {\n+                $eStartInterval = $eMinDiff / $interval;\n+            }\n             // times the interval height\n             $eStartPos = $eStartInterval * $timeslotHeightVal;\n             $evtTop = $eStartPos.$timeslotHeightUnit;\n@@ -439,7 +443,11 @@ function PrintEvents($events, $providerid, $TPL_IMAGE_PATH) {\n             $eEndMin = $eStartMin + ($event['duration']/60);\n             $eMinDiff = $eEndMin - $eStartMin;\n             // diff divided by the time interval of the schedule\n-            $eEndInterval = $eMinDiff / $interval;\n+            if (empty($interval)) {\n+                $eEndInterval = 0;\n+            } else {\n+                $eEndInterval = $eMinDiff / $interval;\n+            }\n             // times the interval height\n             $eHeight = $eEndInterval * $timeslotHeightVal;\n             $evtHeight = $eHeight.$timeslotHeightUnit;\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pntemplates/default/views/year/default.html b/interface/main/calendar/modules/PostCalendar/pntemplates/default/views/year/default.html\ndeleted file mode 100644\nindex 617aac564..000000000\n--- a/interface/main/calendar/modules/PostCalendar/pntemplates/default/views/year/default.html\n+++ /dev/null\n@@ -1,102 +0,0 @@\n-[-*Smarty*-]\n-[-config_load file=\"default.conf\"-]\n-[-*Load the Language Definitions*-]\n-[-include file=\"$TPL_NAME/views/header.html\"-]\n-[-config_load file=\"lang.$USER_LANG\"-]\n-[-* we want to include out stylesheet for this view*-]\n-[-fetch file=\"$TPL_STYLE_PATH/year.css\" assign=\"css\"-]\n-[-eval var=$css-]\n-[-if $PRINT_VIEW != 1-]\n-[-*Main Navigation*-]\n-[-include file=\"$TPL_NAME/views/global/navigation.html\"-]\n-[-/if-]\n-<table width=\"100%\" border=\"0\" cellpadding=\"5\" cellspacing=\"0\" class=\"yearheader\">\n-    <tr align=\"center\">\n-        <td class=\"yearheader\" width=\"100%\" align=\"center\" valign=\"middle\">\n-        \t<a href=\"[-$PREV_YEAR_URL-]\">&lt;&lt;</a>\n-        \t[-$DATE|pc_date_format:#_PC_DATE_FORMAT_Y#-]\n-        \t<a href=\"[-$NEXT_YEAR_URL-]\">&gt;&gt;</a>\n-\t\t[-if $PRINT_VIEW != 1-]\n-\t\t<td nowrap align=\"right\" valign=\"top\" class=\"yearheader\">\n-\t\t</td>\n-\t\t[-/if-]\n-    </tr>\n-</table>\n-[-strip-]\n-<table width=\"100%\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" class=\"calcontainer\"><tr><td>\n-\t<table width=\"100%\" border=\"0\" cellpadding=\"5\" cellspacing=\"0\">  \n-\t\t[-* Loop through each month of the year *-]\n-\t\t[-foreach name=months item=month key=monthnum from=$CAL_FORMAT-]\n-\t\t[-* check to see if we're starting a new row *-]\n-\t\t[-if $smarty.foreach.months.iteration %4 eq 1 -]\n-\t\t<tr>\n-\t\t[-/if-]\n-\t\t<td width=\"25%\" valign=\"top\" align=\"center\">\n-\t\t[-* get the current year we're viewing *-]\n-\t\t[-assign var=\"y\" value=$DATE|date_format:\"%Y\"-]\n-\t\t[-* figure out what month we are in *-]\n-\t\t[-assign var=\"m\" value=$monthnum+1-]\n-\t\t[-* make sure we have a preceeding 0 on the month number *-]\n-\t\t[-assign var=\"m\" value=$m|string_format:\"%02d\"-]\n-\t\t[-* create our link to the month *-]\n-\t\t<table width=\"100%\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" class=\"calcontainer\">\n-\t\t\t<tr>\n-\t\t\t\t<td width=\"100%\" class=\"monthheader\" colspan=\"8\" valign=\"top\" align=\"center\">\n-\t\t\t\t\t<a href=\"[-pc_url action=\"month\" date=\"$y-$m-01\"-]\">[-$A_MONTH_NAMES.$monthnum-]</a>\n-\t\t\t\t</td>\n-\t\t\t</tr>\n-\t\t\t<tr>\n-\t\t\t\t<td class=\"weeklink\">&nbsp;</td>\n-\t\t\t\t[-foreach name=daynames item=day from=$S_SHORT_DAY_NAMES-]\n-\t\t\t\t<td width=\"14%\" class=\"daynames\" align=\"center\">[-$day-]</td>\n-\t\t\t\t[-/foreach-]\n-\t\t\t</tr>\n-\t\t\t[-foreach name=weeks item=days from=$month-]\n-\t\t\t<tr>\n-\t\t\t\t<td align=\"center\" valign=\"middle\" class=\"weeklink\">\n-\t\t\t\t\t<a href=\"[-pc_url action=\"week\" date=$days[0]-]\" class=\"weeklink\">&gt;</a>\n-\t\t\t\t</td>\n-\t\t\t\t[-foreach name=day item=date from=$days-]\n-\t\t\t\t[-assign var=\"themonth\" value=$date|date_format:\"%m\"-]\n-\t\t\t\t[-if $date == $TODAY_DATE && $themonth == $smarty.foreach.months.iteration-]\n-\t\t\t\t\t[-assign var=\"stylesheet\" value=\"monthtoday\"-]\n-\t\t\t\t[-elseif $themonth == $smarty.foreach.months.iteration-]\n-\t\t\t\t\t[-assign var=\"stylesheet\" value=\"monthon\"-]\n-\t\t\t\t[-else-]\n-\t\t\t\t\t[-assign var=\"stylesheet\" value=\"monthoff\"-]\n-\t\t\t\t[-/if-]\n-\t\t\t\t<td width=\"14%\" align=\"center\" class=\"[-$stylesheet-]\">\n-\t\t\t\t\t[-if $A_EVENTS.$date|@count > 2 -]\n-\t\t\t\t\t\t[-assign var=\"classname\" value=\"event-three\"-]\t\t\t\t\t\t \t\t   \n-\t\t\t\t\t[-elseif $A_EVENTS.$date|@count > 1 -]\t\t\t\t\t\t\t\t\t \t\t   \n-\t\t\t\t\t\t[-assign var=\"classname\" value=\"event-two\"-]\t\t\t\t\t\t \t\t   \n-\t\t\t\t\t[-elseif $A_EVENTS.$date|@count > 0 -]\t\t\t\t\t\t\t\t\t \t\t   \n-\t\t\t\t\t\t[-assign var=\"classname\" value=\"event-one\"-]\t\t\t\t\t\t \t\t   \n-\t\t\t\t\t[-else-]\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t \t\t   \n-\t\t\t\t\t\t[-assign var=\"classname\" value=\"event-none\"-]\t\t\t\t\t\t \t\t   \n-\t\t\t\t\t[-/if-] \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t \t\t   \n-\t\t\t\t\t<a class=\"[-$classname-]\" href=\"[-pc_url action=day date=$date-]\">[-$date|date_format:\"%d\"-]</a></td>\n-\t\t\t\t[-/foreach-]\n-\t\t\t</tr>\n-\t\t\t[-/foreach-]\n-\t\t</table>\n-\t\t[-/foreach-]\n-\t\t</td>\n-\t\t[-if $smarty.foreach.months.iteration %3 eq 1 -]\n-\t\t</tr>\n-\t\t[-/if-]\n-\t</table>\n-</td></tr></table>\n-[-/strip-]\n-[-if $PRINT_VIEW != 1-]\n-<table width=\"100%\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n-    <tr>\n-        <td align=\"right\">\n-            <a href=\"[-pc_url action=\"year\" print=\"true\"-]\">[-#_PC_THEME_PRINT#-]</a>\n-        </td>\n-    </tr>\n-</table>\n-[-/if-]\n-[-*footer*-]\n-[-include file=\"$TPL_NAME/views/global/footer.html\"-]\n-[-include file=\"$TPL_NAME/views/footer.html\"-]\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pntemplates/default/views/year/index.html b/interface/main/calendar/modules/PostCalendar/pntemplates/default/views/year/index.html\ndeleted file mode 100644\nindex e69de29bb..000000000\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pnuser.php b/interface/main/calendar/modules/PostCalendar/pnuser.php\nindex adead15c1..4d012cd30 100644\n--- a/interface/main/calendar/modules/PostCalendar/pnuser.php\n+++ b/interface/main/calendar/modules/PostCalendar/pnuser.php\n@@ -34,23 +34,6 @@ pnModAPILoad(__POSTCALENDAR__, 'user');\n // Added to improve security and standardization of input data to be used in\n //  database insertion.\n \n-//=========================================================================\n-//  start the main postcalendar application\n-//=========================================================================\n-function postcalendar_user_main()\n-{\n- // check the authorization\n-\n-    if (!pnSecAuthAction(0, 'PostCalendar::', '::', ACCESS_OVERVIEW)) {\n-        return _POSTCALENDARNOAUTH;\n-    }\n-\n-    // get the date and go to the view function\n-    $Date = postcalendar_getDate();\n-    return postcalendar_user_view(array('Date'=>$Date));\n-}\n-\n-\n /**\n  * view items\n  * This is a standard function to provide an overview of all of the items\n@@ -58,10 +41,6 @@ function postcalendar_user_main()\n  */\n function postcalendar_user_view()\n {\n-    if (!pnSecAuthAction(0, 'PostCalendar::', '::', ACCESS_OVERVIEW)) {\n-        return _POSTCALENDARNOAUTH;\n-    }\n-\n     // get the vars that were passed in\n     list($Date,\n          $print,\n@@ -76,7 +55,9 @@ function postcalendar_user_view()\n              'jumpmonth',\n              'jumpyear'\n          );\n+\n     $Date =postcalendar_getDate();\n+\n     if (!isset($viewtype)) {\n         $viewtype = _SETTING_DEFAULT_VIEW;\n     }\n@@ -117,892 +98,28 @@ function postcalendar_user_display($args)\n         $viewtype = $_SESSION['viewtype'];\n     }\n \n-    if ($_SESSION['pc_username']) {\n-        $pc_username = $_SESSION['pc_username'];\n-    }\n-\n-    // funky things happen if the view is 'details' and we don't have an event ID\n-    // so in such a case, we're going to revert to the 'day' view -- JRM\n-    if ($viewtype == 'details' && (!isset($eid) || $eid == \"\")) {\n-        $_SESSION['viewtype'] = 'day';\n-        $viewtype = $_SESSION['viewtype'];\n-    }\n-\n     extract($args);\n     if (empty($Date) && empty($viewtype)) {\n         return false;\n     }\n \n-    if (empty($tplview)) {\n-        $tplview = 'default';\n-    }\n-\n-    $uid = pnUserGetVar('uid');\n-    $theme = pnUserGetTheme();\n-\n-    //$cacheid = md5($Date.$viewtype.$tplview._SETTING_TEMPLATE.$eid.$print.$uid.'u'.$pc_username.$theme.'c'.$category.'t'.$topic);\n     $cacheid = md5(strtotime(\"now\"));\n \n-    switch ($viewtype) {\n-        case 'details':\n-            if (!(bool)PC_ACCESS_READ) {\n-                return _POSTCALENDARNOAUTH;\n-            }\n-\n-            $event = pnModAPIFunc('PostCalendar', 'user', 'eventDetail', array('eid'=>$eid,\n-                                                                           'Date'=>$Date,\n-                                                                           'print'=>$print,\n-                                                                           'cacheid'=>$cacheid));\n-            if ($event === false) {\n-                pnRedirect(pnModURL(__POSTCALENDAR__, 'user'));\n-            }\n-\n-            $out  = \"\\n\\n<!-- START user_display -->\\n\\n\";\n-            $out .= $event;\n-            $out .= \"\\n\\n<!-- END user_display -->\\n\\n\";\n-            break;\n-\n-        default:\n-            if (!(bool)PC_ACCESS_OVERVIEW) {\n-                return _POSTCALENDARNOAUTH;\n-            }\n-\n-            $out  = \"\\n\\n<!-- START user_display -->\\n\\n\";\n-            $out .= pnModAPIFunc('PostCalendar', 'user', 'buildView', array('Date'=>$Date,\n+    $out  = \"\\n\\n<!-- START user_display -->\\n\\n\";\n+    $out .= pnModAPIFunc('PostCalendar', 'user', 'buildView', array('Date'=>$Date,\n                                                                          'viewtype'=>$viewtype,\n                                                                          'cacheid'=>$cacheid));\n-            $out .= \"\\n\\n<!-- END user_display -->\\n\\n\";\n-            break;\n-    }\n+    $out .= \"\\n\\n<!-- END user_display -->\\n\\n\";\n \n     // Return the output that has been generated by this function\n     return $out;\n }\n-function postcalendar_user_delete()\n-{\n-    if (!(bool)PC_ACCESS_ADD) {\n-        return _POSTCALENDAR_NOAUTH;\n-    }\n-\n-    $output = new pnHTML();\n-    $output->SetInputMode(_PNH_VERBATIMINPUT);\n-\n-    $uname = $_SESSION['authUser'];\n-    list($action,$pc_event_id) = pnVarCleanFromInput('action', 'pc_event_id');\n-    $event =& postcalendar_userapi_pcGetEventDetails($pc_event_id);\n-    if ($uname != $event['uname']) {\n-        if (!validateGroupStatus($uname, getUsername($event['uname']))) {\n-            return _PC_CAN_NOT_DELETE;\n-        }\n-    }\n-\n-    //if($uname != $event['uname']) {\n-    //    return _PC_CAN_NOT_DELETE;\n-    //}\n-    unset($event);\n-\n-    $output->FormStart(pnModUrl(__POSTCALENDAR__, 'user', 'deleteevents'));\n-    $output->FormHidden('pc_eid', $pc_event_id);\n-    $output->Text(_PC_DELETE_ARE_YOU_SURE.' ');\n-    $output->FormSubmit(_PC_ADMIN_YES);\n-    $output->FormEnd();\n-    $output->Linebreak(2);\n-    $output->Text(pnModAPIFunc(__POSTCALENDAR__, 'user', 'eventDetail', array('eid'=>$pc_event_id,'cacheid'=>'','print'=>0,'Date'=>'')));\n-    $output->Linebreak(2);\n-\n-\n-    return $output->GetOutput();\n-}\n-function postcalendar_user_deleteevents()\n-{\n-    if (!(bool)PC_ACCESS_ADD) {\n-        return _POSTCALENDAR_NOAUTH;\n-    }\n-\n-\n-    $pc_eid = pnVarCleanFromInput('pc_eid');\n-    $event =& postcalendar_userapi_pcGetEventDetails($pc_eid);\n-    $uname = $_SESSION['authUser'];\n-    if ($uname != $event['uname']) {\n-        if (!validateGroupStatus($uname, getUsername($event['uname']))) {\n-            return _PC_CAN_NOT_DELETE;\n-        }\n-    }\n-\n-    unset($event);\n-\n-    $output = new pnHTML();\n-    $output->SetInputMode(_PNH_VERBATIMINPUT);\n-    list($dbconn) = pnDBGetConn();\n-    $pntable = pnDBGetTables();\n-    $events_table = $pntable['postcalendar_events'];\n-    $events_column = &$pntable['postcalendar_events_column'];\n-    //hipaa doesn't allow for actual deletes, so just change to inactive\n-    //$sql = \"DELETE FROM $events_table WHERE $events_column[eid] = '$pc_eid'\";\n-    $sql = \"UPDATE $events_table SET pc_eventstatus = 0 WHERE $events_column[eid] = ?\";\n-    $dbconn->Execute($sql, array($pc_eid));\n-    $tpl = new pcSmarty();\n-    $template_name = _SETTING_TEMPLATE;\n-    if (!isset($template_name)) {\n-        $template_name = 'default';\n-    }\n-\n-    $tpl->assign('STYLE', $GLOBALS['style']);\n-    $output->Text($tpl->fetch($template_name . \"/views/header.html\"));\n-    $output->Text($tpl->fetch($template_name . \"/views/global/navigation.html\"));\n-    $output->Text(\"<br /><br />\");\n-\n-\n-    if ($dbconn->ErrorNo() != 0) {\n-        $output->Text(_PC_ADMIN_EVENT_ERROR);\n-    } else {\n-        $output->Text(_PC_ADMIN_EVENTS_DELETED);\n-    }\n-\n-    $output->Text($tpl->fetch($template_name . \"/views/footer.html\"));\n-    // clear the template cache\n-    $tpl->clear_all_cache();\n-\n-    return $output->GetOutput();\n-}\n-\n-//this function is only used by the system to delete temp events used in certain\n-//collision calculations\n-function delete_event($title)\n-{\n-    list($dbconn) = pnDBGetConn();\n-    $pntable = pnDBGetTables();\n-    $events_table = $pntable['postcalendar_events'];\n-    $events_column = &$pntable['postcalendar_events_column'];\n-    //this function is only used by the system to delete temp events used in certain\n-    //collision calculations\n-    $sql = \"DELETE FROM $events_table WHERE pc_eventstatus = ? AND pc_title = ?\";\n-    $dbconn->Execute($sql, array(_EVENT_TEMPORARY, $title));\n-    if ($dbconn->ErrorNo() != 0) {\n-        return 0;\n-    } else {\n-        return 1;\n-    }\n-}\n-\n-/**\n- * submit an event\n- */\n-function postcalendar_user_edit($args)\n-{\n-    return postcalendar_user_submit($args);\n-}\n-function postcalendar_user_submit2($args)\n-{\n-\n-    if (!(bool)PC_ACCESS_ADD) {\n-        return _POSTCALENDARNOAUTH;\n-    }\n-\n-    extract($args);\n-    //print_r($_GET);\n-    $category = pnVarCleanFromInput('event_category');\n-    //print_r($category);\n-    print \"dble is \".pnVarCleanFromInput('double_book').\" data_loaded is \".pnVarCleanFromInput('data_loaded');\n-    //print_r($_POST);\n-    if (pnVarCleanFromInput('data_loaded') || !empty($category)) {    //submitting\n-        return postcalendar_user_submit2($agrs);\n-    } else {\n-        //select the category you wish to add,\n-        //using the info from that category we can populate some data\n-\n-        $output = new pnHTML();\n-        $output->SetInputMode(_PNH_VERBATIMINPUT);\n-        $output->Text('<body bgcolor=\"'.$GLOBALS['style']['BGCOLOR2'].'\"></body>');\n-        // get the theme globals :: is there a better way to do this?\n-        pnThemeLoad(pnUserGetTheme());\n-        $all_categories = pnModAPIFunc(__POSTCALENDAR__, 'admin', 'getCategories');\n-        $output->Text('<form name=\"cats\" method=\"post\" action=\"'.pnModURL(__POSTCALENDAR__, 'user', 'submit2', $args).'\">');\n-        $output->FormHidden('no_nav', $_GET['no_nav']);\n-        $output->FormHidden('event_startampm', $_GET['event_startampm']);\n-        $output->FormHidden('event_starttimeh', $_GET['event_starttimeh']);\n-        $output->FormHidden('event_starttimem', $_GET['event_starttimem']);\n-        $output->FormHidden('event_startmonth', $_GET['event_startmonth']);\n-        $output->FormHidden('event_startday', $_GET['event_startday']);\n-        $output->FormHidden('event_startyear', $_GET['event_startyear']);\n-        $output->FormHidden('event_category', $_GET['event_category']);\n-        $output->FormHidden('event_dur_minutes', $_GET['event_dur_minutes']);\n-        $output->FormHidden('provider_id', $_GET['provider_id']);\n-        $output->FormHidden('patient_id', $_GET['patient_id']);\n-        $output->FormHidden('module', $_GET['module']);\n-        $output->FormHidden('func', $_GET['func']);\n-        $output->FormHidden('Date', $_GET['Date']);\n-        $select = array();\n-\n-        foreach ($all_categories as $cat) {\n-            array_push($select, array('name'=>$cat['name'],'id'=>base64_encode(serialize($cat))));\n-        }\n-\n-        $output->Text('Select a Category');\n-        $output->FormSelectMultiple('category', $select);\n-        $output->FormSubmit();\n-        return $output->GetOutput();\n-    }\n-\n-    //return postcalendar_user_submit2($args);\n-}\n-\n-function postcalendar_user_submit($args)\n-{\n-    // We need at least ADD permission to submit an event\n-    if (!(bool)PC_ACCESS_ADD) {\n-        return _POSTCALENDARNOAUTH;\n-    }\n-\n-    $output = new pnHTML();\n-    $output->SetInputMode(_PNH_VERBATIMINPUT);\n-\n-\n-    // get the theme globals :: is there a better way to do this?\n-    pnThemeLoad(pnUserGetTheme());\n-    global $bgcolor1, $bgcolor2, $bgcolor3, $bgcolor4, $bgcolor5, $textcolor1, $textcolor2;\n-\n-    // $category = pnVarCleanFromInput('event_category');\n-    $category = pnVarCleanFromInput('category');\n-\n-    if (!empty($category)) {\n-        $category = unserialize(base64_decode($category), ['allowed_classes' => false]);\n-        //print_r($category);\n-    } else { //print_r($_POST);\n-        $cat = $_POST['category'];\n-\n-        $category = unserialize(base64_decode($cat), ['allowed_classes' => false]);\n-        //print_r($category);\n-    }\n-\n-    //print_r($category);\n-\n-    // echo(\"<!-- Here is the argument array: -->\\n\");\n-    // foreach ($args as $tmpkey => $tmpval) { // debugging\n-    //  echo(\"<!-- $tmpkey => '$tmpval' -->\\n\");\n-    // }\n-\n-    extract($args);\n-\n-    $Date =& postcalendar_getDate();\n-    $year   = substr($Date, 0, 4);\n-    $month  = substr($Date, 4, 2);\n-    $day    = substr($Date, 6, 2);\n-\n-    // basic event information\n-    $event_desc     = pnVarCleanFromInput('event_desc');\n-    $event_category = pnVarCleanFromInput('event_category');\n-    $event_subject  = pnVarCleanFromInput('event_subject');\n-    $event_sharing  = pnVarCleanFromInput('event_sharing');\n-    $event_topic    = pnVarCleanFromInput('event_topic');\n-\n-    //id of the user the event is for\n-    $event_userid = pnVarCleanFromInput('event_userid');\n-    if (!is_numeric($event_userid)) {\n-        $event_userid = 0;\n-    }\n-\n-    $event_pid = pnVarCleanFromInput('event_pid');\n-\n-    if (!is_numeric($event_pid)) {\n-        $event_pid = \"\";\n-    }\n-\n-    // event start information\n-    $event_startmonth    = pnVarCleanFromInput('event_startmonth');\n-    $event_startday      = pnVarCleanFromInput('event_startday');\n-    $event_startyear     = pnVarCleanFromInput('event_startyear');\n-    $event_starttimeh    = pnVarCleanFromInput('event_starttimeh');\n-    $event_starttimem    = pnVarCleanFromInput('event_starttimem');\n-    $event_startampm     = pnVarCleanFromInput('event_startampm');\n-\n-    // location data\n-    $event_location      = pnVarCleanFromInput('event_location');\n-    $event_street1       = pnVarCleanFromInput('event_street1');\n-    $event_street2       = pnVarCleanFromInput('event_street2');\n-    $event_city          = pnVarCleanFromInput('event_city');\n-    $event_state         = pnVarCleanFromInput('event_state');\n-    $event_postal        = pnVarCleanFromInput('event_postal');\n-    $event_location_info = serialize(compact(\n-        'event_location',\n-        'event_street1',\n-        'event_street2',\n-        'event_city',\n-        'event_state',\n-        'event_postal'\n-    ));\n-    // contact data\n-    $event_contname      = pnVarCleanFromInput('event_contname');\n-    $event_conttel       = pnVarCleanFromInput('event_conttel');\n-    $event_contemail     = pnVarCleanFromInput('event_contemail');\n-    $event_website       = pnVarCleanFromInput('event_website');\n-    $event_fee           = pnVarCleanFromInput('event_fee');\n-    $event_patient_name  = pnVarCleanFromInput('patient_name');\n-\n-    // event repeating data\n-    if (is_array($category)) {\n-        //$event_subject        =\n-        $event_desc         = $category['desc'];\n-        $event_category     = $category['id'];\n-\n-        $event_duration     = $category['event_duration']; //seconds of the event\n-        $event_dur_hours     = $event_duration/(60 * 60);    //seconds divided by 60 seconds * 60 minutes\n-        $event_dur_minutes  = ($event_duration%(60 * 60))/60;\n-        $event_repeat         = $category['event_repeat'];\n-        $event_repeat_freq  = $category['event_repeat_freq'];\n-        $event_repeat_freq_type = $category['event_repeat_freq_type'];\n-        $event_repeat_on_num = $category['event_repeat_on_num'];\n-        $event_repeat_on_day = $category['event_repeat_on_day'];\n-        $event_repeat_on_freq = $category['event_repeat_on_freq'];\n-        $event_recurrspec = serialize(compact(\n-            'event_repeat_freq',\n-            'event_repeat_freq_type',\n-            'event_repeat_on_num',\n-            'event_repeat_on_day',\n-            'event_repeat_on_freq'\n-        ));\n-\n-        // event end information\n-        $multiple = $category['end_date_freq'].\" \";\n-        switch ($category['end_date_type']) {\n-            case REPEAT_EVERY_DAY:\n-            case REPEAT_EVERY_WORK_DAY:    //end date is in days\n-                $multiple .= \"days\";\n-                break;\n-            case REPEAT_EVERY_WEEK:        //semicolon was here, assumed bug and replaced with colon. end date is in weeks\n-                $multiple .= \"weeks\";\n-                break;\n-            case REPEAT_EVERY_MONTH:    //end date is in months\n-                $multiple .= \"months\";\n-                break;\n-            case REPEAT_EVERY_YEAR:        //end date is in years\n-                $multiple .= \"years\";\n-                break;\n-        }\n-\n-        $edate = strtotime(pnVarCleanFromInput('Date'));\n-        $event_startmonth     = date(\"m\", $edate);\n-        $event_startday     = date(\"d\", $edate);\n-        $event_startyear     = date(\"Y\", $edate);\n-        $event_enddate = strtotime(pnVarCleanFromInput('Date').\" + \".$multiple);\n-        $event_endmonth     = date(\"m\", $event_enddate);\n-        $event_endday         = date(\"d\", $event_enddate);\n-        $event_endyear      = date(\"Y\", $event_enddate);\n-        $event_endtype      = $category['end_date_flag'];\n-\n-        // I'm pretty sure this was a bug since 'event_all_day' appears nowhere\n-        // else in the code, but it's hard to tell WTF is going on.\n-//    $event_allday         = $category['event_all_day'];\n-        $event_allday         = $category['all_day'];\n-    } else {\n-        $event_dur_hours     = pnVarCleanFromInput('event_dur_hours');\n-        $event_dur_minutes  = pnVarCleanFromInput('event_dur_minutes');\n-        $event_duration     = (60*60*$event_dur_hours) + (60*$event_dur_minutes);\n-        $event_repeat         = pnVarCleanFromInput('event_repeat');\n-        $event_repeat_freq  = pnVarCleanFromInput('event_repeat_freq');\n-        $event_repeat_freq_type = pnVarCleanFromInput('event_repeat_freq_type');\n-        $event_repeat_on_num = pnVarCleanFromInput('event_repeat_on_num');\n-        $event_repeat_on_day = pnVarCleanFromInput('event_repeat_on_day');\n-        $event_repeat_on_freq = pnVarCleanFromInput('event_repeat_on_freq');\n-        $event_recurrspec = serialize(compact(\n-            'event_repeat_freq',\n-            'event_repeat_freq_type',\n-            'event_repeat_on_num',\n-            'event_repeat_on_day',\n-            'event_repeat_on_freq'\n-        ));\n-\n-        // event end information\n-        $event_endmonth     = pnVarCleanFromInput('event_endmonth');\n-        $event_endday         = pnVarCleanFromInput('event_endday');\n-        $event_endyear      = pnVarCleanFromInput('event_endyear');\n-        $event_endtype      = pnVarCleanFromInput('event_endtype');\n-        $event_allday         = pnVarCleanFromInput('event_allday');\n-    }\n-\n-    // Added by Rod:\n-    if ($event_allday) {\n-        $event_starttimeh  = 0;\n-        $event_starttimem  = 0;\n-        $event_startampm   = 1;\n-        $event_dur_hours   = 24;\n-        $event_dur_minutes = 0;\n-        $event_duration    = 60 * 60 * $event_dur_hours;\n-    }\n-\n-    $form_action = pnVarCleanFromInput('form_action');\n-    $pc_html_or_text = pnVarCleanFromInput('pc_html_or_text');\n-    $pc_event_id = pnVarCleanFromInput('pc_event_id');\n-    $data_loaded = pnVarCleanFromInput('data_loaded');\n-    $is_update   = pnVarCleanFromInput('is_update');\n-    $authid      = pnVarCleanFromInput('authid');\n-\n-    //pennfirm uname matchup future fix\n-    //if(pnUserLoggedIn()) { $uname = pnUserGetVar('uname'); }\n-    //else { $uname = pnConfigGetVar('anonymous'); }\n-    $uname = $_SESSION['authUser'];\n-    if (!isset($event_repeat)) {\n-        $event_repeat = 0;\n-    }\n-\n-    if (!isset($pc_event_id) || empty($pc_event_id) || $data_loaded) {\n-        // lets wrap all the data into array for passing to submit and preview functions\n-        $eventdata = compact(\n-            'event_subject',\n-            'event_desc',\n-            'event_sharing',\n-            'event_category',\n-            'event_topic',\n-            'event_startmonth',\n-            'event_startday',\n-            'event_startyear',\n-            'event_starttimeh',\n-            'event_starttimem',\n-            'event_startampm',\n-            'event_endmonth',\n-            'event_endday',\n-            'event_endyear',\n-            'event_endtype',\n-            'event_dur_hours',\n-            'event_dur_minutes',\n-            'event_duration',\n-            'event_allday',\n-            'event_location',\n-            'event_street1',\n-            'event_street2',\n-            'event_city',\n-            'event_state',\n-            'event_postal',\n-            'event_location_info',\n-            'event_contname',\n-            'event_conttel',\n-            'event_contemail',\n-            'event_website',\n-            'event_fee',\n-            'event_repeat',\n-            'event_repeat_freq',\n-            'event_repeat_freq_type',\n-            'event_repeat_on_num',\n-            'event_repeat_on_day',\n-            'event_repeat_on_freq',\n-            'event_recurrspec',\n-            'uname',\n-            \"event_userid\",\n-            \"event_pid\",\n-            'Date',\n-            'year',\n-            'month',\n-            'day',\n-            'pc_html_or_text',\n-            'event_patient_name',\n-            'event_pid'\n-        );\n-        $eventdata['is_update'] = $is_update;\n-        $eventdata['pc_event_id'] = $pc_event_id;\n-        $eventdata['data_loaded'] = true;\n-        $eventdata['category'] = base64_encode(serialize($category));\n-    } else {\n-        $event =& postcalendar_userapi_pcGetEventDetails($pc_event_id);\n-\n-        //echo \"uname is:$uname  other name is: \".$event['uname'] . \"<br />\";\n-        if ($uname != $event['uname']) {\n-            if (!validateGroupStatus($uname, getUsername($event['uname']))) {\n-                return _PC_CAN_NOT_EDIT;\n-            }\n-        }\n-\n-        $eventdata['event_subject'] = $event['title'];\n-        $eventdata['event_desc'] = $event['hometext'];\n-        $eventdata['event_sharing'] = $event['sharing'];\n-        $eventdata['event_category'] = $event['catid'];\n-        $eventdata['event_topic'] = $event['topic'];\n-        $eventdata['event_startmonth'] = substr($event['eventDate'], 5, 2);\n-        $eventdata['event_startday'] = substr($event['eventDate'], 8, 2);\n-        $eventdata['event_startyear'] = substr($event['eventDate'], 0, 4);\n-        $eventdata['event_starttimeh'] = substr($event['startTime'], 0, 2);\n-        $eventdata['event_starttimem'] = substr($event['startTime'], 3, 2);\n-        $eventdata['event_startampm'] = $eventdata['event_starttimeh'] < 12 ? 1 : 2 ; //1 is am , 2 is pm\n-        $eventdata['event_endmonth'] = substr($event['endDate'], 5, 2);\n-        $eventdata['event_endday'] = substr($event['endDate'], 8, 2);\n-        $eventdata['event_endyear'] = substr($event['endDate'], 0, 4);\n-        $eventdata['event_endtype'] = $event['endDate'] == '0000-00-00' ? '0' : '1' ;\n-        $eventdata['event_dur_hours'] = $event['duration_hours'];\n-        $eventdata['event_dur_minutes'] = $event['duration_minutes'];\n-        $eventdata['event_duration'] = $event['duration'];\n-        $eventdata['event_allday'] = $event['alldayevent'];\n-        $loc_data = unserialize($event['location']);\n-        $eventdata['event_location'] = $loc_data['event_location'];\n-        $eventdata['event_street1'] = $loc_data['event_street1'];\n-        $eventdata['event_street2'] = $loc_data['event_street2'];\n-        $eventdata['event_city'] = $loc_data['event_city'];\n-        $eventdata['event_state'] = $loc_data['event_state'];\n-        $eventdata['event_postal'] = $loc_data['event_postal'];\n-        $eventdata['event_location_info'] = $loc_data;\n-        $eventdata['event_contname'] = $event['contname'];\n-        $eventdata['event_conttel'] = $event['conttel'];\n-        $eventdata['event_contemail'] = $event['contemail'];\n-        $eventdata['event_website'] = $event['website'];\n-        $eventdata['event_fee'] = $event['fee'];\n-        $eventdata['event_repeat'] = $event['recurrtype'];\n-        $rspecs = unserialize($event['recurrspec']);\n-        $eventdata['event_repeat_freq'] = $rspecs['event_repeat_freq'];\n-        $eventdata['event_repeat_freq_type'] = $rspecs['event_repeat_freq_type'];\n-        $eventdata['event_repeat_on_num'] = $rspecs['event_repeat_on_num'];\n-        $eventdata['event_repeat_on_day'] = $rspecs['event_repeat_on_day'];\n-        $eventdata['event_repeat_on_freq'] = $rspecs['event_repeat_on_freq'];\n-        $eventdata['event_recurrspec'] = $rspecs;\n-        $eventdata['uname'] = $uname;\n-        $eventdata['event_userid'] = $event['event_userid'];\n-        $eventdata['event_pid'] = $event['pid'];\n-        $eventdata['event_aid'] = $event['aid'];\n-        $eventdata['Date'] = $Date;\n-        $eventdata['year'] = $year;\n-        $eventdata['month'] = $month;\n-        $eventdata['day'] = $day;\n-        $eventdata['is_update'] = true;\n-        $eventdata['pc_event_id'] = $pc_event_id;\n-        $event_data['patient_name'] = $event_patient_name;\n-        $eventdata['data_loaded'] = true;\n-        $eventdata['pc_html_or_text'] = $pc_html_or_text;\n-        $eventdata['category'] = base64_encode(serialize($category));\n-    }\n-\n-    // lets get the module's information\n-    $modinfo = pnModGetInfo(pnModGetIDFromName(__POSTCALENDAR__));\n-    $categories = pnModAPIFunc(__POSTCALENDAR__, 'user', 'getCategories');\n-    $output->tabindex=1;\n-\n-    //================================================================\n-    //    ERROR CHECKING\n-    //================================================================\n-    // removed event_desc as a required_var\n-\n-    $required_vars = array('event_subject');\n-    $required_name = array(_PC_EVENT_TITLE,_PC_EVENT_DESC);\n-    $error_msg = '';\n-    $output->SetOutputMode(_PNH_RETURNOUTPUT);\n-    $reqCount = count($required_vars);\n-    //print_r($eventdata);\n-    for ($r=0; $r<$reqCount; $r++) {\n-        if (empty($$required_vars[$r]) || !preg_match('/\\S/i', $$required_vars[$r])) {\n-            $error_msg .= $output->Text('<b>'.$required_name[$r].'</b> '._PC_SUBMIT_ERROR4);\n-            $error_msg .= $output->Linebreak();\n-        }\n-    }\n-\n-    unset($reqCount);\n-    // check repeating frequencies\n-    if ($event_repeat == REPEAT) {\n-        //can't have a repeating event that doesnt have an end date\n-        if ($event_endtype == 0) {\n-            $error_msg .= $output->Text(\"Repeating events must have an end date set.\");\n-            $error_msg .= $output->Linebreak();\n-        }\n-\n-        if (!isset($event_repeat_freq) ||  $event_repeat_freq < 1 || empty($event_repeat_freq)) {\n-            $error_msg .= $output->Text(_PC_SUBMIT_ERROR5);\n-            $error_msg .= $output->Linebreak();\n-        } elseif (!is_numeric($event_repeat_freq)) {\n-            $error_msg .= $output->Text(_PC_SUBMIT_ERROR6);\n-            $error_msg .= $output->Linebreak();\n-        }\n-    } elseif ($event_repeat == REPEAT_ON) {\n-        //can't have a repeating event that doesnt have an end date\n-        if ($event_endtype == 0) {\n-            $error_msg .= $output->Text(\"Repeating events must have an end date set.\");\n-            $error_msg .= $output->Linebreak();\n-        }\n-\n-        if (!isset($event_repeat_on_freq) || $event_repeat_on_freq < 1 || empty($event_repeat_on_freq)) {\n-            $error_msg .= $output->Text(_PC_SUBMIT_ERROR5);\n-            $error_msg .= $output->Linebreak();\n-        } elseif (!is_numeric($event_repeat_on_freq)) {\n-            $error_msg .= $output->Text(_PC_SUBMIT_ERROR6);\n-            $error_msg .= $output->Linebreak();\n-        }\n-    }\n-\n-    // check date validity\n-    if (_SETTING_TIME_24HOUR) {\n-        $startTime = $event_starttimeh.':'.$event_starttimem;\n-        $endTime =   $event_endtimeh.':'.$event_endtimem;\n-    } else {\n-        if ($event_startampm == _AM_VAL) {\n-            $event_starttimeh = $event_starttimeh == 12 ? '00' : $event_starttimeh;\n-        } else {\n-            $event_starttimeh =  $event_starttimeh != 12 ? $event_starttimeh+=12 : $event_starttimeh;\n-        }\n-\n-        $startTime = $event_starttimeh.':'.$event_starttimem;\n-    }\n-\n-    $sdate = strtotime($event_startyear.'-'.$event_startmonth.'-'.$event_startday);\n-    $edate = strtotime($event_endyear.'-'.$event_endmonth.'-'.$event_endday);\n-    $tdate = strtotime(date('Y-m-d'));\n-    if ($edate < $sdate && $event_endtype == 1) {\n-        $error_msg .= $output->Text(_PC_SUBMIT_ERROR1);\n-        $error_msg .= $output->Linebreak();\n-    }\n-\n-    if (!checkdate($event_startmonth, $event_startday, $event_startyear)) {\n-        $error_msg .= $output->Text(_PC_SUBMIT_ERROR2 . \" '$event_startyear-$event_startmonth-$event_startday'\");\n-        $error_msg .= $output->Linebreak();\n-    }\n-\n-    if (!checkdate($event_endmonth, $event_endday, $event_endyear)) {\n-        $error_msg .= $output->Text(_PC_SUBMIT_ERROR3 . \" '$event_endyear-$event_endmonth-$event_endday'\");\n-        $error_msg .= $output->Linebreak();\n-    }\n-\n-    //check limit on category\n-    if (($ret = checkCategoryLimits($eventdata)) != null) {\n-        $error_msg .= $output->Text(\"This category has a limit of $ret[limit] between $ret[start] and $ret[end] which you have exceeded.\");\n-        $error_msg .= $output->Linebreak();\n-        //$output->Text(pnModAPIFunc('PostCalendar','user','buildSubmitForm',$eventdata));\n-        //return $output->GetOutput();\n-    }\n-\n-    //echo \"fa: \" . $form_action . \" double_book: \" . pnVarCleanFromInput(\"double_book\") . \" update: \" . $eventdata['is_update'] . \" em: \" . $error_msg;\n-    //event collision check\n-\n-    if ($form_action == \"commit\" && pnVarCleanFromInput(\"double_book\") != 1 && !$eventdata['is_update'] && empty($error_msg)) {\n-        //check on new shceduling events(in or out of office) to make sure that\n-        //you don't have more than one set per day\n-        //event category 1 is in office, event category 2 is out of office\n-\n-        if ($eventdata['event_category'] == 2 || $eventdata['event_category'] == 3) {\n-            $searchargs = array();\n-            $searchargs['start'] = $eventdata['event_startmonth'] . \"/\" . $eventdata['event_startday'] .\"/\". $eventdata['event_startyear'];\n-            $searchargs['end'] = $eventdata['event_endmonth'] . \"/\" . $eventdata['event_endday'] .\"/\". $eventdata['event_endyear'];\n-            $searchargs['provider_id'] = $eventdata['event_userid'];\n-\n-            //faFLag uses pcgeteventsfa, which can search on provider\n-            $searchargs['faFlag'] = true;\n-            $searchargs['s_keywords'] = \" (a.pc_catid = 2 OR a.pc_catid = 3) \";\n-            //print_r($searchargs);\n-\n-            $eventsByDate =& postcalendar_userapi_pcGetEvents($searchargs);\n-            $ekey = md5($event_data['subject'] . date(\"U\") . rand(0, 1000));\n-            $oldstatus = $eventdata['event_status'];\n-            $oldtitle = $eventdata['event_subject'];\n-            $old_patient_name = $eventdata['patient_name'];\n-            $old_dur_hours = $eventdata['event_dur_hours'];\n-            $old_dur_min = $eventdata['event_dur_minutes'];\n-            $old_duration = $eventdata['event_duration'];\n-            $eventdata['event_subject'] = $ekey;\n-            $eventdata['event_status'] = _EVENT_TEMPORARY;\n-\n-            if (!pnModAPIFunc(__POSTCALENDAR__, 'user', 'submitEvent', $eventdata)) {\n-                $error_msg .= $output->Text('<center><div style=\"padding:5px; border:1px solid red; background-color: pink;\">');\n-                $error_msg .= $output->Text(\"<b>The system was unable to check you event for conflicts with other events because there was a problem with your database.</b><br />\");\n-                $error_msg .= $output->Text('</div></center>');\n-                $error_msg .= $output->Linebreak();\n-                $error_msg .= $output->Text($dbconn->ErrorMsg());\n-            }\n-\n-            $searchargs['s_keywords'] = \" (a.pc_catid = 2 OR a.pc_catid = 3) AND a.pc_title = '\" . add_escape_custom($eventdata['event_subject'])  . \"' \";\n-            $searchargs['event_status'] = _EVENT_TEMPORARY;\n-            $submitEventByDate =& postcalendar_userapi_pcGetEvents($searchargs);\n-\n-            if (!delete_event($ekey)) {\n-                $error_msg .= $output->Text('<center><div style=\"padding:5px; border:1px solid red; background-color: pink;\">');\n-                $error_msg .= $output->Text(\"<b>The system was unable to delete a temporary record it created, this may have left the database in an inconsistent state.</b><br />\");\n-                $error_msg .= $output->Text('</div></center>');\n-                $error_msg .= $output->Linebreak();\n-                $error_msg .= $output->Text($dbconn->ErrorMsg());\n-            }\n-\n-            $eventdata['event_status'] = $oldstatus;\n-            $eventdata['event_subject'] = $oldtitle;\n-            $eventdata['patient_name '] = $old_patient_name;\n-            $eventdata['event_dur_hours'] = $old_dur_hour;\n-            $eventdata['event_dur_minutes'] = $old_dur_min;\n-\n-            foreach ($submitEventByDate as $date => $newevent) {\n-                if (count($eventsByDate[$date]) > 0 && count($newevent) > 0) {\n-                    foreach ($eventsByDate[$date] as $con_event) {\n-                        if ($con_event['catid'] == $newevent[0]['catid']) {\n-                            $error_msg .= $output->Text('There is a conflict on ' . $date . ' with event ' . $con_event['title']);\n-                            $error_msg .= $output->Linebreak();\n-                        }\n-                    }\n-                }\n-            }\n-\n-            /*echo \"<br /><br />\";\n-            print_r($eventsByDate);\n-            echo \"<br /><br />\";\n-            print_r($submitEventByDate);*/\n-        }\n-\n-        $colls = checkEventCollision($eventdata);\n-        if (count($colls) > 0) {\n-            foreach ($colls as $coll) {\n-                $error_msg .= $output->Text(\"Event Collides with: \" . $coll['title'] . \" at \" . date(\"g:i a\", strtotime($coll['startTime'])) . \"<br />\");\n-                $error_msg .= $output->Linebreak();\n-            }\n-\n-            $error_msg .= $output->Text(\"Submit again to \\\"Double Book\\\" <br />To change values click back in your browser.\");\n-            $error_msg .= $output->Linebreak();\n-            // the following line will display \"DOUBLE BOOKED\" if when adding an event there is a collistion with anothe appointment\n-            //$eventdata['event_subject'] = \"DOUBLE BOOKED \" . $eventdata['event_subject'];\n-            $eventdata['double_book'] = 1;\n-        }\n-    }\n-\n-    $output->SetOutputMode(_PNH_KEEPOUTPUT);\n-    if ($form_action == 'preview') {\n-        //================================================================\n-        //  Preview the event\n-        //================================================================\n-        // check authid\n-        if (!pnSecConfirmAuthKey()) {\n-            return(_NO_DIRECT_ACCESS);\n-        }\n-\n-        if (!empty($error_msg)) {\n-            $preview = false;\n-            $output->Text('<table border=\"0\" width=\"100%\" cellpadding=\"1\" cellspacing=\"0\"><tr><td bgcolor=\"red\">');\n-            $output->Text('<table border=\"0\" width=\"100%\" cellpadding=\"1\" cellspacing=\"0\"><tr><td bgcolor=\"pink\">');\n-            $output->Text('<center><b>'._PC_SUBMIT_ERROR.'</b></center>');\n-            $output->Linebreak();\n-            $output->Text($error_msg);\n-            $output->Text('</td></td></table>');\n-            $output->Text('</td></td></table>');\n-            $output->Linebreak(2);\n-        } else {\n-            $output->Text(pnModAPIFunc(__POSTCALENDAR__, 'user', 'eventPreview', $eventdata));\n-            $output->Linebreak();\n-        }\n-    } elseif ($form_action == 'commit') {\n-        //================================================================\n-        //  Enter the event into the DB\n-        //================================================================\n-        if (!empty($error_msg)) {\n-            if (!pnSecConfirmAuthKey(true)) {\n-                return(_NO_DIRECT_ACCESS);\n-            }\n-        } else {\n-            if (!pnSecConfirmAuthKey()) {\n-                return(_NO_DIRECT_ACCESS);\n-            }\n-        }\n-\n-        if (!empty($error_msg)) {\n-            $preview = false;\n-            $output->Text('<table border=\"0\" width=\"100%\" cellpadding=\"1\" cellspacing=\"0\"><tr><td bgcolor=\"red\">');\n-            $output->Text('<table border=\"0\" width=\"100%\" cellpadding=\"1\" cellspacing=\"0\"><tr><td bgcolor=\"pink\">');\n-            $output->Text('<center><b>'._PC_SUBMIT_ERROR.'</b></center>');\n-            $output->Linebreak();\n-            $output->Text($error_msg);\n-            $output->Text('</td></td></table>');\n-            $output->Text('</td></td></table>');\n-            $output->Linebreak(2);\n-        } else {\n-            if (!pnModAPIFunc(__POSTCALENDAR__, 'user', 'submitEvent', $eventdata)) {\n-                $output->Text('<center><div style=\"padding:5px; border:1px solid red; background-color: pink;\">');\n-                $output->Text(\"<b>\"._PC_EVENT_SUBMISSION_FAILED.\"</b>\");\n-                $output->Text('</div></center>');\n-                $output->Linebreak();\n-                $output->Text($dbconn->ErrorMsg());\n-            } else {\n-                // clear the Smarty cache\n-                $tpl = new pcSmarty();\n-                $tpl->clear_all_cache();\n-                $output->Text('<center><div style=\"padding:5px; border:1px solid green; background-color: lightgreen;\">');\n-                if ($is_update) {\n-                    $output->Text(\"<b>\"._PC_EVENT_EDIT_SUCCESS.\"</b>\");\n-                } else {\n-                    $output->Text(\"<b>\"._PC_EVENT_SUBMISSION_SUCCESS.\"</b>\");\n-                }\n-\n-                $output->Text('</div></center>');\n-                $output->Linebreak();\n-                // clear the form vars\n-                $event_subject=$event_desc=$event_sharing=$event_category=$event_topic=\n-                $event_startmonth=$event_startday=$event_startyear=$event_starttimeh=$event_starttimem=$event_startampm=\n-                $event_endmonth=$event_endday=$event_endyear=$event_endtype=$event_dur_hours=$event_dur_minutes=\n-                $event_duration=$event_allday=$event_location=$event_street1=$event_street2=$event_city=$event_state=\n-                $event_postal=$event_location_info=$event_contname=$event_conttel=$event_contemail=\n-                $event_website=$event_fee=$event_repeat=$event_repeat_freq=$event_repeat_freq_type=\n-                $event_repeat_on_num=$event_repeat_on_day=$event_repeat_on_freq=$event_recurrspec=$uname=\n-                $Date=$year=$month=$day=$pc_html_or_text=$event_patient_name=$evnet_pid=null;\n-                $is_update = false;\n-                $pc_event_id = 0;\n-\n-                //$_SESSION['category'] = \"\";\n-                // lets wrap all the data into array for passing to submit and preview functions\n-                $eventdata = compact(\n-                    'event_subject',\n-                    'event_desc',\n-                    'event_sharing',\n-                    'event_category',\n-                    'event_topic',\n-                    'event_startmonth',\n-                    'event_startday',\n-                    'event_startyear',\n-                    'event_starttimeh',\n-                    'event_starttimem',\n-                    'event_startampm',\n-                    'event_endmonth',\n-                    'event_endday',\n-                    'event_endyear',\n-                    'event_endtype',\n-                    'event_dur_hours',\n-                    'event_dur_minutes',\n-                    'event_duration',\n-                    'event_allday',\n-                    'event_location',\n-                    'event_street1',\n-                    'event_street2',\n-                    'event_city',\n-                    'event_state',\n-                    'event_postal',\n-                    'event_location_info',\n-                    'event_contname',\n-                    'event_conttel',\n-                    'event_contemail',\n-                    'event_website',\n-                    'event_fee',\n-                    'event_repeat',\n-                    'event_repeat_freq',\n-                    'event_repeat_freq_type',\n-                    'event_repeat_on_num',\n-                    'event_repeat_on_day',\n-                    'event_repeat_on_freq',\n-                    'event_recurrspec',\n-                    'uname',\n-                    'Date',\n-                    'year',\n-                    'month',\n-                    'day',\n-                    'pc_html_or_text',\n-                    'is_update',\n-                    'pc_event_id',\n-                    'event_patient_name'\n-                );\n-                //if no using the no_nav format then show form again after submit\n-                if (pnVarCleanFromInput(\"no_nav\") == 1) {\n-                    return $output->GetOutput();\n-                }\n-            }\n-        }\n-    }\n-\n-    $output->Text(pnModAPIFunc('PostCalendar', 'user', 'buildSubmitForm', $eventdata));\n-    return $output->GetOutput();\n-}\n-\n \n /**\n  * search events\n  */\n function postcalendar_user_search()\n {\n-    if (!(bool)PC_ACCESS_OVERVIEW) {\n-        return _POSTCALENDARNOAUTH;\n-    }\n-\n     $tpl = new pcSmarty();\n     $k = isset($_REQUEST['pc_keywords']) ? pnVarCleanFromInput($_REQUEST['pc_keywords']) : '';\n     $k_andor = pnVarCleanFromInput('pc_keywords_andor');\n@@ -1025,7 +142,7 @@ function postcalendar_user_search()\n         }\n \n     //modified 8/09 by BM to allow translation if applicable\n-        $cat_options .= \"<option value=\\\"\" . attr($category['id']) . \"\\\" $selected>\" . text(xl_appt_category($category[name])) . \"</option>\";\n+        $cat_options .= \"<option value=\\\"\" . attr($category['id']) . \"\\\" $selected>\" . text(xl_appt_category($category['name'])) . \"</option>\";\n     }\n \n     $tpl->assign_by_ref('CATEGORY_OPTIONS', $cat_options);\n@@ -1325,80 +442,6 @@ function postcalendar_user_search()\n     $tpl->caching = false;\n     $tpl->assign('STYLE', $GLOBALS['style']);\n     $pageSetup =& pnModAPIFunc(__POSTCALENDAR__, 'user', 'pageSetup');\n-    $return = $pageSetup . $tpl->fetch($template_name.'/user/search.html');\n+    $return = $pageSetup . $tpl->fetch($template_name.'/user/ajax_search.html');\n     return $return;\n }\n-\n-function checkCategoryLimits($eventdata)\n-{\n-    extract($eventdata);\n-    //print_r($eventdata);\n-    //print \"$event_starttimeh:$event_starttimem\";\n-\n-    $limits = & pnModAPIFunc(__POSTCALENDAR__, 'user', 'getCategoryLimits');\n-    //print_r($limits);\n-    foreach ($limits as $limit) {\n-        if ($limit['catid'] == $event_category) { //have a limit\n-        //print_r($limit);\n-            $sdate = ($event_startmonth.'/'.$event_startday.'/'\n-                        .$event_startyear);\n-            $edate = $sdate;\n-            $stime = date(\"H:i:00\", strtotime($limit['startTime']));\n-            $etime = date(\"H:i:00\", strtotime($limit['endTime']));\n-            if ($is_update) {\n-                $searchText = \"a.pc_eid != '\" . add_escape_custom($pc_event_id) . \"' AND \";\n-            }\n-\n-            //echo \"stime is: $stime, etime is: $etime sdate is: $sdate edate is: $edate<br />\";\n-            $a = array('s_category' => \" a.pc_catid = '\" . add_escape_custom($event_category) . \"'\",'start'=>$edate,\n-                'end'=>$sdate, 'stime' => $stime, 'etime' => $etime,'providerID'=>$event_userid,\n-                's_keywords'=>$searchText.\"a.pc_starttime >= '\" . add_escape_custom($stime) . \"' AND a.pc_endtime <= '\" . add_escape_custom($etime) . \"'\");\n-            $eventsByDate =& postcalendar_userapi_pcGetEvents($a);\n-            //print_r($eventsByDate);\n-            $ret = null;\n-            foreach ($eventsByDate as $day) {\n-                //if event time falls within limit time check\n-                //hour from forms is 12 not 24 format, convert here\n-                if ($event_startampm == 2 && $event_starttimeh != 12) {\n-                    $event_starttimeh += 12;\n-                } elseif ($event_startampm == 1 && $event_starttimeh == 12) {\n-                    $event_starttimeh -= 12;\n-                }\n-\n-                $event_starttime = date(\"H:i:00\", strtotime($event_starttimeh.\":\".$event_starttimem.\":\".\"00\"));\n-                $event_endtime = date(\"H:i:00\", strtotime($event_endtimeh.\":\".$event_endtimem.\":\".\"00\"));\n-\n-                if ($event_starttime >= $limit['startTime']) {\n-                    $numToday = count($day);\n-\n-                    if ($numToday >= $limit['limit']) {\n-                        //reached limit\n-                        $ret = array(\"start\"=>$limit['startTime'],\"end\"=>$limit['endTime'],\n-                            \"limit\"=>$limit['limit']);\n-                        return $ret;\n-                    }\n-                }//if in limit time span\n-            }\n-        }\n-    }\n-\n-    return null;\n-}\n-    /*list($dbconn) = pnDBGetConn();\n-    $pntable = pnDBGetTables();\n-    $event_table = $pntable['postcalendar_events'];\n-    //get all of todays events\n-    $starting_date = date('m/d/Y',mktime(0,0,0,$the_month,$the_day,$the_year));\n-    $ending_date   = date('m/d/Y',mktime(0,0,0,$the_month,$the_day,$the_year));\n-    //select all of the limits\n-    $limits = & pnModAPIFunc(__POSTCALENDAR__,'user','getCategoryLimits');\n-    //for each limit for this category id, make sure you won't exceed the limit\n-    foreach($limits as $limit)\n-    {\n-        if(($key = array_search($eventdata['cat_id'])) != false)\n-        {\n-            $sql = \"SELECT count(pc_eid) from $event_table where \"\n-        }\n-    }\n-\n-}*/\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pnuserapi.php b/interface/main/calendar/modules/PostCalendar/pnuserapi.php\nindex 063b2530e..665323354 100644\n--- a/interface/main/calendar/modules/PostCalendar/pnuserapi.php\n+++ b/interface/main/calendar/modules/PostCalendar/pnuserapi.php\n@@ -31,30 +31,12 @@\n //=========================================================================\n require_once($GLOBALS['fileroot'].\"/library/patient.inc\");\n require_once($GLOBALS['fileroot'].\"/library/group.inc\");\n-include_once($GLOBALS['fileroot'].\"/library/encounter_events.inc.php\");\n+require_once($GLOBALS['fileroot'].\"/library/encounter_events.inc.php\");\n $pcModInfo = pnModGetInfo(pnModGetIDFromName(__POSTCALENDAR__));\n $pcDir = pnVarPrepForOS($pcModInfo['directory']);\n require_once(\"modules/$pcDir/common.api.php\");\n unset($pcModInfo, $pcDir);\n \n-function postcalendar_userapi_getLongDayName($args)\n-{\n-    extract($args);\n-    unset($args);\n-    if (!isset($Date)) {\n-        return false;\n-    }\n-\n-    $pc_long_day = array(_CALLONGFIRSTDAY,\n-                         _CALLONGSECONDDAY,\n-                         _CALLONGTHIRDDAY,\n-                         _CALLONGFOURTHDAY,\n-                         _CALLONGFIFTHDAY,\n-                         _CALLONGSIXTHDAY,\n-                         _CALLONGSEVENTHDAY);\n-    return $pc_long_day[Date(\"w\", $Date)];\n-}\n-\n /**\n  *  postcalendar_userapi_buildView\n  *\n@@ -69,8 +51,8 @@ function postcalendar_userapi_buildView($args)\n     $show_days = pnVarCleanFromInput('show_days');\n     extract($args);\n     unset($args);\n-    $schedule_start = $GLOBALS[schedule_start];\n-    $schedule_end = $GLOBALS[schedule_end];\n+    $schedule_start = $GLOBALS['schedule_start'];\n+    $schedule_end = $GLOBALS['schedule_end'];\n \n     // $times is an array of associative arrays, where each sub-array\n     // has keys 'hour', 'minute' and 'mer'.\n@@ -156,7 +138,6 @@ function postcalendar_userapi_buildView($args)\n     //=================================================================\n     //  Grab the current theme information\n     //=================================================================\n-    pnThemeLoad(pnUserGetTheme());\n     global $bgcolor1, $bgcolor2, $bgcolor3, $bgcolor4, $bgcolor5, $bgcolor6, $textcolor1, $textcolor2;\n \n     //=================================================================\n@@ -509,12 +490,14 @@ function postcalendar_userapi_buildView($args)\n         if ($viewtype == \"week\") {\n             $last_blocks = array();\n             foreach ($eventsByDate as $cdate => $day) {\n-                $tblock = array_reverse($day['blocks']);\n-                $last_blocks[$cdate] = count($tblock) -1;\n-                for ($i=0; $i<count($tblock); $i++) {\n-                    if (!empty($tblock[$i])) {\n-                        $last_blocks[$cdate] = count($tblock) - $i;\n-                        break;\n+                if (!empty($day['blocks'])) {\n+                    $tblock = array_reverse($day['blocks']);\n+                    $last_blocks[$cdate] = count($tblock) - 1;\n+                    for ($i = 0; $i < count($tblock); $i++) {\n+                        if (!empty($tblock[$i])) {\n+                            $last_blocks[$cdate] = count($tblock) - $i;\n+                            break;\n+                        }\n                     }\n                 }\n             }\n@@ -568,12 +551,7 @@ function postcalendar_userapi_buildView($args)\n             $output .= $tpl->fetch($template, $cacheid);    // cache id\n             $output .= \"\\n\\n<!-- END POSTCALENDAR OUTPUT [-: HTTP://POSTCALENDAR.TV :-] -->\\n\\n\";\n     } else {\n-            $theme = pnUserGetTheme();\n             echo \"<html><head>\";\n-            echo \"<LINK REL=\\\"StyleSheet\\\" HREF=\\\"themes/$theme/style/styleNN.css\\\" TYPE=\\\"text/css\\\">\\n\\n\\n\";\n-            echo \"<style type=\\\"text/css\\\">\\n\";\n-            echo \"@import url(\\\"themes/$theme/style/style.css\\\"); \";\n-            echo \"</style>\\n\";\n             echo \"</head><body>\\n\";\n             echo $output;\n             $tpl->display($template, $cacheid);\n@@ -589,202 +567,6 @@ function postcalendar_userapi_buildView($args)\n     return $output;\n }\n \n-/**\n- *  postcalendar_userapi_eventPreview\n- *  Creates the detailed event display and outputs html.\n- *  Accepts an array of key/value pairs\n- *  @param array $event array of event details from the form\n- *  @return string html output\n- *  @access public\n- */\n-function postcalendar_userapi_eventPreview($args)\n-{\n-    // get the theme globals :: is there a better way to do this?\n-    pnThemeLoad(pnUserGetTheme());\n-    global $bgcolor1, $bgcolor2, $bgcolor3, $bgcolor4, $bgcolor5;\n-    global $textcolor1, $textcolor2;\n-\n-    extract($args);\n-    unset($args);\n-    $uid = pnUserGetVar('uid');\n-    //=================================================================\n-    //  Setup Smarty Template Engine\n-    //=================================================================\n-    $tpl = new pcSmarty();\n-    $tpl->caching = false;\n-    // add preceding zeros\n-    $event_starttimeh   = sprintf('%02d', $event_starttimeh);\n-    $event_starttimem   = sprintf('%02d', $event_starttimem);\n-    $event_startday     = sprintf('%02d', $event_startday);\n-    $event_startmonth   = sprintf('%02d', $event_startmonth);\n-    $event_endday       = sprintf('%02d', $event_endday);\n-    $event_endmonth     = sprintf('%02d', $event_endmonth);\n-\n-    if (!(bool)_SETTING_TIME_24HOUR) {\n-        if ($event_startampm == _PM_VAL) {\n-            if ($event_starttimeh != 12) {\n-                $event_starttimeh+=12;\n-            }\n-        } elseif ($event_startampm == _AM_VAL) {\n-            if ($event_starttimeh == 12) {\n-                $event_starttimeh = 00;\n-            }\n-        }\n-    }\n-\n-    $event_startampm.\" - \";\n-    $startTime = $event_starttimeh.':'.$event_starttimem.' ';\n-\n-    $event = array();\n-    $event['eid'] = '';\n-    $event['uname'] = $uname;\n-    $event['catid'] = $event_category;\n-    if ($pc_html_or_text == 'html') {\n-        $prepFunction = 'pcVarPrepHTMLDisplay';\n-    } else {\n-        $prepFunction = 'pcVarPrepForDisplay';\n-    }\n-\n-    $event['title'] = $prepFunction($event_subject);\n-    $event['hometext'] = $prepFunction($event_desc);\n-    $event['desc'] = $event['hometext'];\n-    $event['date'] = $event_startyear.$event_startmonth.$event_startday;\n-    $event['duration'] = $event_duration;\n-    $event['duration_hours'] = $event_dur_hours;\n-    $event['duration_minutes'] = $event_dur_minutes;\n-    $event['endDate'] = $event_endyear.'-'.$event_endmonth.'-'.$event_endday;\n-    $event['startTime'] = $startTime;\n-    $event['recurrtype'] = '';\n-    $event['recurrfreq'] = '';\n-    $event['recurrspec'] = $event_recurrspec;\n-    $event['topic'] = $event_topic;\n-    $event['alldayevent'] = $event_allday;\n-    $event['conttel'] = $prepFunction($event_conttel);\n-    $event['contname'] = $prepFunction($event_contname);\n-    $event['contemail'] = $prepFunction($event_contemail);\n-    $event['website'] = $prepFunction(postcalendar_makeValidURL($event_website));\n-    $event['fee'] = $prepFunction($event_fee);\n-    $event['location'] = $prepFunction($event_location);\n-    $event['street1'] = $prepFunction($event_street1);\n-    $event['street2'] = $prepFunction($event_street2);\n-    $event['city'] = $prepFunction($event_city);\n-    $event['state'] = $prepFunction($event_state);\n-    $event['postal'] = $prepFunction($event_postal);\n-\n-    //=================================================================\n-    //  get event's topic information\n-    //=================================================================\n-    if (_SETTING_DISPLAY_TOPICS) {\n-        list($dbconn) = pnDBGetConn();\n-        $pntable = pnDBGetTables();\n-        $topics_table = $pntable['topics'];\n-        $topics_column = $pntable['topics_column'];\n-        $topicsql = \"SELECT $topics_column[topictext],$topics_column[topicimage]\n-            \t \t FROM $topics_table\n-            \t \t WHERE $topics_column[topicid] = $event[topic]\n-            \t \t LIMIT 1\";\n-        $topic_result = $dbconn->Execute($topicsql);\n-        list($event['topictext'],$event['topicimg']) = $topic_result->fields;\n-        $topic_result->Close();\n-    } else {\n-        $event['topictext'] = $event['topicimg'] = '';\n-    }\n-\n-    //=================================================================\n-    //  Find out what Template we're using\n-    //=================================================================\n-    $template_name = _SETTING_TEMPLATE;\n-    if (!isset($template_name)) {\n-        $template_name = 'default';\n-    }\n-\n-    //=================================================================\n-    //  populate the template\n-    //=================================================================\n-    if (!empty($event['location']) || !empty($event['street1']) ||\n-       !empty($event['street2']) || !empty($event['city']) ||\n-       !empty($event['state']) || !empty($event['postal'])) {\n-        $tpl->assign('LOCATION_INFO', true);\n-    } else {\n-        $tpl->assign('LOCATION_INFO', false);\n-    }\n-\n-    if (!empty($event['contname']) || !empty($event['contemail']) ||\n-       !empty($event['conttel']) || !empty($event['website'])) {\n-        $tpl->assign('CONTACT_INFO', true);\n-    } else {\n-        $tpl->assign('CONTACT_INFO', false);\n-    }\n-\n-    $tpl->assign_by_ref('A_EVENT', $event);\n-    $tpl->assign('STYLE', $GLOBALS['style']);\n-    //=================================================================\n-    //  Parse the template\n-    //=================================================================\n-    $output  = \"\\n\\n<!-- POSTCALENDAR HTTP://WWW.BAHRAINI.TV -->\\n\\n\";\n-    $output .= \"\\n\\n<!-- POSTCALENDAR TEMPLATE START -->\\n\\n\";\n-    $output .= $tpl->fetch($template_name.'/user/preview.html');\n-    $output .= \"\\n\\n<!-- POSTCALENDAR TEMPLATE END -->\\n\\n\";\n-\n-    return $output;\n-}\n-\n-/**\n- *  checkEventCollision\n- *  Returns an array containing any events that collide with the specified event\n- *  @params array(key=>value)\n- *  @return array $events[][]\n- */\n-function checkEventCollision($edata)\n-{\n-\n-    extract($edata);\n-    $sdate = ($event_startmonth.'/'.$event_startday.'/'.$event_startyear);\n-    $edate = $sdate;\n-    //hour from forms is 12 not 24 format, convert here\n-    if ($event_startampm == 2 && $event_starttimeh != 12) {\n-        $event_starttimeh += 12;\n-    } elseif ($event_startampm == 1 && $event_starttimeh == 12) {\n-        $event_starttimeh -= 12;\n-    }\n-\n-    $stime = date(\"H:i:00\", strtotime($event_starttimeh.':'.$event_starttimem.':00'));\n-    $etime = date(\"H:i:00\", $event_duration + strtotime($stime));\n-    //echo \"stime is: $stime, etime is: $etime sdate is: $sdate edate is: $edate<br />\";\n-    $a = array('collideFlag' => true,'start'=>$edate,'end'=>$sdate, 'provider_id' => $event_userid, 'stime' => $stime, 'etime' => $etime);\n-    $eventsByDate =& postcalendar_userapi_pcGetEvents($a);\n-    //print_r($eventsByDate);\n-    $collisions = array();\n-    foreach ($eventsByDate as $day) {\n-        foreach ($day as $event) {\n-            if ($event['duration'] == 0 && $event['alldayevent'] == 0) {\n-                continue;\n-            } elseif ($event['alldayevent'] == 1) {\n-                $collisions[] = $event;\n-            }\n-\n-            $festart = strtotime($event['startTime']);\n-            $feend   = strtotime($event['startTime'] + $event['duration']);\n-            $estart  = strtotime($stime);\n-            $eend    = strtotime($etime);\n-\n-            //echo \"festart = $festart feend = $feend estart = $estart eend = $eend<br />\";\n-            if ($festart < $eend && $feend > $estart) {\n-                $collisions[] = $event;\n-            } elseif ($festart <= $estart && $feend <= $eend && $feend >= $estart) {\n-                $collisions[] = $event;\n-            } elseif ($festart >= $estart && $festart < $eend) {\n-                $collisions[] = $event;\n-            }\n-        }\n-    }\n-\n-    //foreach ($collisions as $collide) {\n-    //\techo \"collided: \" . $collide['title'] . \"<br />\";\n-    //}\n-    return $collisions;\n-}\n-\n /**\n  *  postcalendar_userapi_pcQueryEventsFA\n  *  Returns an array containing the event's information for first available queiries\n@@ -912,15 +694,7 @@ function &postcalendar_userapi_pcQueryEventsFA($args)\n         // check the current event's permissions\n         // the user does not have permission to view this event\n         // if any of the following evaluate as false\n-        if (!pnSecAuthAction(0, 'PostCalendar::Event', \"$tmp[title]::$tmp[eid]\", ACCESS_OVERVIEW)) {\n-              continue;\n-        } elseif (!pnSecAuthAction(0, 'PostCalendar::Category', \"$tmp[catname]::$tmp[catid]\", ACCESS_OVERVIEW)) {\n-              continue;\n-        } elseif (!pnSecAuthAction(0, 'PostCalendar::User', \"$tmp[uname]::$cuserid\", ACCESS_OVERVIEW)) {\n-              continue;\n-        } elseif (!pnSecAuthAction(0, 'PostCalendar::Topic', \"$topicname::$tmp[topic]\", ACCESS_OVERVIEW)) {\n-              continue;\n-        } elseif ($tmp['sharing'] == SHARING_PRIVATE && $cuserid != $userid) {\n+        if ($tmp['sharing'] == SHARING_PRIVATE && $cuserid != $userid) {\n               continue;\n         }\n \n@@ -943,7 +717,7 @@ function &postcalendar_userapi_pcQueryEventsFA($args)\n         $events[$i]['recurrfreq']  = $tmp['recurrfreq'];\n         $events[$i]['recurrspec']  = $tmp['recurrspec'];\n \n-        $rspecs = unserialize($tmp['recurrspec']);\n+        $rspecs = unserialize($tmp['recurrspec'], ['allowed_classes' => false]);\n         $events[$i]['event_repeat_freq'] = $rspecs['event_repeat_freq'];\n         $events[$i]['event_repeat_freq_type'] = $rspecs['event_repeat_freq_type'];\n         $events[$i]['event_repeat_on_num'] = $rspecs['event_repeat_on_num'];\n@@ -1008,7 +782,7 @@ function &postcalendar_userapi_pcQueryEventsFA($args)\n                 $events[$i]['contemail']   = $prepFunction($tmp['contemail']);\n                 $events[$i]['website']     = $prepFunction(postcalendar_makeValidURL($tmp['website']));\n                 $events[$i]['fee']         = $prepFunction($tmp['fee']);\n-                $loc = unserialize($tmp['location']);\n+                $loc = unserialize($tmp['location'], ['allowed_classes' => false]);\n                 $events[$i]['location']   = $prepFunction($loc['event_location']);\n                 $events[$i]['street1']    = $prepFunction($loc['event_street1']);\n                 $events[$i]['street2']    = $prepFunction($loc['event_street2']);\n@@ -1083,7 +857,6 @@ function &postcalendar_userapi_pcQueryEvents($args)\n   // link to the events tables\n     $table      =  $pntable['postcalendar_events'];\n     $cattable   =  $pntable['postcalendar_categories'];\n-    $topictable =  $pntable['postcalendar_topics'];\n \n     $sql = \"SELECT DISTINCT a.pc_eid,  a.pc_informant, a.pc_catid, \" .\n     \"a.pc_title, a.pc_time, a.pc_hometext, a.pc_eventDate, a.pc_duration, \" .\n@@ -1147,9 +920,6 @@ function &postcalendar_userapi_pcQueryEvents($args)\n         } else {\n             $sql .= \"AND a.pc_aid IN (0, \" . pnVarPrepForStore($ruserid) . \") \";\n         }\n-    } elseif (!pnUserLoggedIn()) {\n-        // get all events for anonymous users\n-        $sql .= \"AND a.pc_sharing = '\" . pnVarPrepForStore(SHARING_GLOBAL) . \"' \";\n     } elseif (!empty($provider_id)) {\n         // get all events for a variety of provider IDs -- JRM\n         if ($provider_id[0] != \"_ALL_\") {\n@@ -1240,23 +1010,13 @@ function &postcalendar_userapi_pcQueryEvents($args)\n         // check the current event's permissions\n         // the user does not have permission to view this event\n         // if any of the following evaluate as false\n-        if (!pnSecAuthAction(0, 'PostCalendar::Event', \"$tmp[title]::$tmp[eid]\", ACCESS_OVERVIEW)) {\n-              continue;\n-        } elseif (!pnSecAuthAction(0, 'PostCalendar::Category', \"$tmp[catname]::$tmp[catid]\", ACCESS_OVERVIEW)) {\n-              continue;\n-        } elseif (!pnSecAuthAction(0, 'PostCalendar::User', \"$tmp[uname]::$cuserid\", ACCESS_OVERVIEW)) {\n-              continue;\n-        } elseif (!pnSecAuthAction(0, 'PostCalendar::Topic', \"$topicname::$tmp[topic]\", ACCESS_OVERVIEW)) {\n-              continue;\n-        } elseif ($tmp['sharing'] == SHARING_PRIVATE && $cuserid != $userid) {\n+        if ($tmp['sharing'] == SHARING_PRIVATE && $cuserid != $userid) {\n               continue;\n         }\n \n         // add event to the array if we passed the permissions check\n         // this is the common information\n \n-        $events[$i]['intervals']  =($tmp['duration']/60)/ $GLOBALS['day_calandar_interval'];//sets the number of rows this event should span\n-\n         $events[$i]['eid']         = $tmp['eid'];\n         $events[$i]['uname']       = $tmp['uname'];\n         $events[$i]['uid']         = $cuserid;\n@@ -1335,7 +1095,7 @@ function &postcalendar_userapi_pcQueryEvents($args)\n                 $events[$i]['contemail']   = $prepFunction($tmp['contemail']);\n                 $events[$i]['website']     = $prepFunction(postcalendar_makeValidURL($tmp['website']));\n                 $events[$i]['fee']         = $prepFunction($tmp['fee']);\n-                $loc = unserialize($tmp['location']);\n+                $loc = unserialize($tmp['location'], ['allowed_classes' => false]);\n                 $events[$i]['location']   = $prepFunction($loc['event_location']);\n                 $events[$i]['street1']    = $prepFunction($loc['event_street1']);\n                 $events[$i]['street2']    = $prepFunction($loc['event_street2']);\n@@ -1543,10 +1303,11 @@ function calculateEvents($days, $events, $viewtype)\n                 }\n \n                 list($esY,$esM,$esD) = explode('-', $event['eventDate']);\n-                $event_recurrspec = @unserialize($event['recurrspec']);\n+                $event_recurrspec = @unserialize($event['recurrspec'], ['allowed_classes' => false]);\n \n                 if (checkEvent($event['recurrtype'], $event_recurrspec)) {\n-                    break; }\n+                    break;\n+                }\n \n                 $rfreq = $event_recurrspec['event_repeat_freq'];\n                 $rtype = $event_recurrspec['event_repeat_freq_type'];\n@@ -1613,10 +1374,11 @@ function calculateEvents($days, $events, $viewtype)\n                 }\n \n                 list($esY,$esM,$esD) = explode('-', $event['eventDate']);\n-                $event_recurrspec = @unserialize($event['recurrspec']);\n+                $event_recurrspec = @unserialize($event['recurrspec'], ['allowed_classes' => false]);\n \n                 if (checkEvent($event['recurrtype'], $event_recurrspec)) {\n-                    break; }\n+                    break;\n+                }\n \n                 $rfreq = $event_recurrspec['event_repeat_on_freq'];\n                 $rnum  = $event_recurrspec['event_repeat_on_num'];\n", "diff --git a/interface/main/calendar/modules/PostCalendar/pnversion.php b/interface/main/calendar/modules/PostCalendar/pnversion.php\nindex 8b15e3b68..377749a3c 100644\n--- a/interface/main/calendar/modules/PostCalendar/pnversion.php\n+++ b/interface/main/calendar/modules/PostCalendar/pnversion.php\n@@ -28,10 +28,6 @@ $modversion['name']             = 'PostCalendar';\n $modversion['id']               = '44';\n $modversion['version']          = '4.0.0';\n $modversion['description']      = 'PostNuke Calendar Module Modified for OpenEMR';\n-$modversion['credits']          = 'docs/credits.txt';\n-$modversion['help']             = 'docs/help.txt';\n-$modversion['changelog']        = 'docs/changelog.txt';\n-$modversion['license']          = 'docs/license.txt';\n $modversion['official']         = 0;\n $modversion['author']           = 'The PostCalendar Team & Pennington Firm';\n $modversion['contact']          = 'http://www.pennfirm.com';\n", "diff --git a/interface/main/calendar/modules/PostCalendar/popup.php b/interface/main/calendar/modules/PostCalendar/popup.php\ndeleted file mode 100644\nindex 8c5f2367c..000000000\n--- a/interface/main/calendar/modules/PostCalendar/popup.php\n+++ /dev/null\n@@ -1,44 +0,0 @@\n-<?php\n-/**\n- *  $Id$\n- *\n- *  PostCalendar::PostNuke Events Calendar Module\n- *  Copyright (C) 2002  The PostCalendar Team\n- *  http://postcalendar.tv\n- *\n- *  This program is free software; you can redistribute it and/or modify\n- *  it under the terms of the GNU General Public License as published by\n- *  the Free Software Foundation; either version 2 of the License, or\n- *  (at your option) any later version.\n- *\n- *  This program is distributed in the hope that it will be useful,\n- *  but WITHOUT ANY WARRANTY; without even the implied warranty of\n- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n- *  GNU General Public License for more details.\n- *\n- *  You should have received a copy of the GNU General Public License\n- *  along with this program; if not, write to the Free Software\n- *  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n- *\n- *  To read the license please read the docs/license.txt or visit\n- *  http://www.gnu.org/copyleft/gpl.html\n- *\n- */\n-\n-/**\n- *  popup view for events displayed in a new window\n- */\n-$output =& new pnHTML();\n-$output->SetInputMode(_PNH_VERBATIMINPUT);\n-\n-// let's load the User API so we can use it :)\n-if (!pnModAPILoad('postcalendar', 'user')) {\n-    die('Could not load PostCalendar user API');\n-}\n-\n-$eid  = pnVarCleanFromInput('eid');\n-$date = pnVarCleanFromInput('date');\n-$output->Text(pnModAPIFunc('postcalendar', 'user', 'eventDetail', array('eid'=>$eid,'date'=>$date)));\n-\n-$output->Text('</body></html>');\n-$output->PrintPage();\n", "diff --git a/interface/main/calendar/modules/PostCalendar/print.php b/interface/main/calendar/modules/PostCalendar/print.php\ndeleted file mode 100644\nindex 48fde39cc..000000000\n--- a/interface/main/calendar/modules/PostCalendar/print.php\n+++ /dev/null\n@@ -1,74 +0,0 @@\n-<?php\n-/**\n- *  $Id$\n- *\n- *  PostCalendar::PostNuke Events Calendar Module\n- *  Copyright (C) 2002  The PostCalendar Team\n- *  http://postcalendar.tv\n- *\n- *  This program is free software; you can redistribute it and/or modify\n- *  it under the terms of the GNU General Public License as published by\n- *  the Free Software Foundation; either version 2 of the License, or\n- *  (at your option) any later version.\n- *\n- *  This program is distributed in the hope that it will be useful,\n- *  but WITHOUT ANY WARRANTY; without even the implied warranty of\n- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n- *  GNU General Public License for more details.\n- *\n- *  You should have received a copy of the GNU General Public License\n- *  along with this program; if not, write to the Free Software\n- *  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n- *\n- *  To read the license please read the docs/license.txt or visit\n- *  http://www.gnu.org/copyleft/gpl.html\n- *\n- */\n-\n-// grab the form variables\n-$tplview        = pnVarCleanFromInput('tplview');\n-$viewtype       = pnVarCleanFromInput('viewtype');\n-$eid            = pnVarCleanFromInput('eid');\n-$Date           = pnVarCleanFromInput('Date');\n-$print          = pnVarCleanFromInput('print');\n-$uid            = pnUserGetVar('uid');\n-$pc_username    = pnVarCleanFromInput('pc_username');\n-\n-$output =& new pnHTML();\n-$output->SetInputMode(_PNH_VERBATIMINPUT);\n-if (!pnModAPILoad('postcalendar', 'user')) {\n-    die('Could not load PostCalendar user API');\n-}\n-\n-$theme = pnUserGetTheme();\n-if (!pnThemeLoad($theme)) {\n-    die('Could not load theme');\n-}\n-\n-$output->Text('<html><head>');\n-$output->Text(\"<title>\".pnConfigGetVar('sitename').' :: '.pnConfigGetVar('slogan').\"</title>\\n\");\n-$output->Text('<link rel=\"StyleSheet\" href=\"themes/'.$theme.'/style/styleNN.css\" type=\"text/css\" />');\n-$output->Text('<style type=\"text/css\">@import url(\"themes/'.$theme.'/style/style.css\"); </style>');\n-$output->Text('</head>');\n-$output->Text('<body bgcolor=\"#ffffff\">');\n-\n-// setup our cache id\n-$cacheid = md5($Date.$viewtype.$tplview._SETTING_TEMPLATE.$eid.$print.$uid.$pc_username.$theme);\n-// display the correct view\n-switch ($viewtype) {\n-    case 'details':\n-        $output->Text(pnModAPIFunc('PostCalendar', 'user', 'eventDetail', array('eid'=>$eid,\n-                                                                             'Date'=>$Date,\n-                                                                             'print'=>$print,\n-                                                                             'cacheid'=>$cacheid)));\n-        break;\n-    default:\n-        $output->Text(pnModAPIFunc('postcalendar', 'user', 'buildView', array('Date'=>$Date,\n-                                                                          'viewtype'=>$viewtype,\n-                                                                          'cacheid'=>$cacheid)));\n-        break;\n-}\n-\n-$output->Text(postcalendar_footer());\n-$output->Text('</body></html>');\n-$output->PrintPage();\n", "diff --git a/interface/main/calendar/pntables.php b/interface/main/calendar/pntables.php\nindex 128b440b6..78b4fb914 100644\n--- a/interface/main/calendar/pntables.php\n+++ b/interface/main/calendar/pntables.php\n@@ -32,345 +32,6 @@ $prefix = $pnconfig['prefix'];\n \n $pntable = array();\n \n-$autonews = $prefix . '_autonews';\n-$pntable['autonews'] = $autonews;\n-$pntable['autonews_column'] = array ('anid'      => $autonews . '.pn_anid',\n-                                     'catid'     => $autonews . '.pn_catid',\n-                                     'aid'       => $autonews . '.pn_aid',\n-                                     'title'     => $autonews . '.pn_title',\n-                                     'time'      => $autonews . '.pn_time',\n-                                     'hometext'  => $autonews . '.pn_hometext',\n-                                     'bodytext'  => $autonews . '.pn_bodytext',\n-                                     'topic'     => $autonews . '.pn_topic',\n-                                     'informant' => $autonews . '.pn_informant',\n-                                     'notes'     => $autonews . '.pn_notes',\n-                                     'ihome'     => $autonews . '.pn_ihome',\n-                                     'alanguage' => $autonews . '.pn_language',\n-                                     'language'  => $autonews . '.pn_language',\n-                                     'withcomm'  => $autonews . '.pn_withcomm');\n-\n-$banner = $prefix . '_banner';\n-$pntable['banner'] = $banner;\n-$pntable['banner_column'] = array ('bid'      => $banner . '.pn_bid',\n-                                   'cid'      => $banner . '.pn_cid',\n-                                   'type'     => $banner . '.pn_type',\n-                                   'imptotal' => $banner . '.pn_imptotal',\n-                                   'impmade'  => $banner . '.pn_impmade',\n-                                   'clicks'   => $banner . '.pn_clicks',\n-                                   'imageurl' => $banner . '.pn_imageurl',\n-                                   'clickurl' => $banner . '.pn_clickurl',\n-                                   'date'     => $banner . '.pn_date');\n-\n-$bannerclient = $prefix . '_bannerclient';\n-$pntable['bannerclient'] = $bannerclient;\n-$pntable['bannerclient_column'] = array ('cid'       => $bannerclient . '.pn_cid',\n-                                         'name'      => $bannerclient . '.pn_name',\n-                                         'contact'   => $bannerclient . '.pn_contact',\n-                                         'email'     => $bannerclient . '.pn_email',\n-                                         'login'     => $bannerclient . '.pn_login',\n-                                         'passwd'    => $bannerclient . '.pn_passwd',\n-                                         'extrainfo' => $bannerclient . '.pn_extrainfo');\n-\n-$bannerfinish = $prefix . '_bannerfinish';\n-$pntable['bannerfinish'] = $bannerfinish;\n-$pntable['bannerfinish_column'] = array ('bid'         => $bannerfinish . '.pn_bid',\n-                                         'cid'         => $bannerfinish . '.pn_cid',\n-                                         'impressions' => $bannerfinish . '.pn_impressions',\n-                                         'clicks'      => $bannerfinish . '.pn_clicks',\n-                                         'datestart'   => $bannerfinish . '.pn_datestart',\n-                                         'dateend'     => $bannerfinish . '.pn_dateend');\n-\n-$blocks = $prefix . '_blocks';\n-$pntable['blocks'] = $blocks;\n-$pntable['blocks_column'] = array ('bid'         => $blocks . '.pn_bid',\n-                                   'bkey'        => $blocks . '.pn_bkey',\n-                                   'title'       => $blocks . '.pn_title',\n-                                   'content'     => $blocks . '.pn_content',\n-                                   'url'         => $blocks . '.pn_url',\n-                                   'mid'         => $blocks . '.pn_mid',\n-                                   'position'    => $blocks . '.pn_position',\n-                                   'weight'      => $blocks . '.pn_weight',\n-                                   'active'      => $blocks . '.pn_active',\n-                                   'refresh'     => $blocks . '.pn_refresh',\n-                                   'last_update' => $blocks . '.pn_last_update',\n-                                   'blanguage'   => $blocks . '.pn_language',\n-                                   'language'    => $blocks . '.pn_language');\n-\n-$blocks_buttons = $prefix . '_blocks_buttons';\n-$pntable['blocks_buttons'] = $blocks_buttons;\n-$pntable['blocks_buttons_column'] = array ('id'     => $blocks_buttons . '.pn_id',\n-                                           'bid'    => $blocks_buttons . '.pn_bid',\n-                                           'title'  => $blocks_buttons . '.pn_title',\n-                                           'url'    => $blocks_buttons . '.pn_url',\n-                                           'images' => $blocks_buttons . '.pn_images');\n-\n-$comments = $prefix . '_comments';\n-$pntable['comments'] = $comments;\n-$pntable['comments_column'] = array ('tid'       => $comments . '.pn_tid',\n-                                     'pid'       => $comments . '.pn_pid',\n-                                     'sid'       => $comments . '.pn_sid',\n-                                     'date'      => $comments . '.pn_date',\n-                                     'name'      => $comments . '.pn_name',\n-                                     'email'     => $comments . '.pn_email',\n-                                     'url'       => $comments . '.pn_url',\n-                                     'host_name' => $comments . '.pn_host_name',\n-                                     'subject'   => $comments . '.pn_subject',\n-                                     'comment'   => $comments . '.pn_comment',\n-                                     'score'     => $comments . '.pn_score',\n-                                     'reason'    => $comments . '.pn_reason');\n-\n-$counter = $prefix . '_counter';\n-$pntable['counter'] = $counter;\n-$pntable['counter_column'] = array ('type'  => $counter . '.pn_type',\n-                                    'var'   => $counter . '.pn_var',\n-                                    'count' => $counter . '.pn_count');\n-\n-$downloads_categories = $prefix . '_downloads_categories';\n-$pntable['downloads_categories'] = $downloads_categories;\n-$pntable['downloads_categories_column'] = array ('cid'          => $downloads_categories . '.pn_cid',\n-                                                 'title'        => $downloads_categories . '.pn_title',\n-                                                 'cdescription' => $downloads_categories . '.pn_description');\n-\n-$downloads_downloads = $prefix . '_downloads_downloads';\n-$pntable['downloads_downloads'] = $downloads_downloads;\n-$pntable['downloads_downloads_column'] = array ('lid'                   => $downloads_downloads . '.pn_lid',\n-                                                'cid'                   => $downloads_downloads . '.pn_cid',\n-                                                'sid'                   => $downloads_downloads . '.pn_sid',\n-                                                'title'                 => $downloads_downloads . '.pn_title',\n-                                                'url'                   => $downloads_downloads . '.pn_url',\n-                                                'description'           => $downloads_downloads . '.pn_description',\n-                                                'date'                  => $downloads_downloads . '.pn_date',\n-                                                'name'                  => $downloads_downloads . '.pn_name',\n-                                                'email'                 => $downloads_downloads . '.pn_email',\n-                                                'hits'                  => $downloads_downloads . '.pn_hits',\n-                                                'submitter'             => $downloads_downloads . '.pn_submitter',\n-                                                'downloadratingsummary' => $downloads_downloads . '.pn_ratingsummary',\n-                                                'totalvotes'            => $downloads_downloads . '.pn_totalvotes',\n-                                                'totalcomments'         => $downloads_downloads . '.pn_totalcomments',\n-                                                'filesize'              => $downloads_downloads . '.pn_filesize',\n-                                                'version'               => $downloads_downloads . '.pn_version',\n-                                                'homepage'              => $downloads_downloads . '.pn_homepage');\n-\n-$downloads_editorials = $prefix . '_downloads_editorials';\n-$pntable['downloads_editorials'] = $downloads_editorials;\n-$pntable['downloads_editorials_column'] = array ('downloadid'         => $downloads_editorials . '.pn_id',\n-                                                 'adminid'            => $downloads_editorials . '.pn_adminid',\n-                                                 'editorialtimestamp' => $downloads_editorials . '.pn_timestamp',\n-                                                 'editorialtext'      => $downloads_editorials . '.pn_text',\n-                                                 'editorialtitle'     => $downloads_editorials . '.pn_title');\n-\n-$downloads_modrequest = $prefix . '_downloads_modrequest';\n-$pntable['downloads_modrequest'] = $downloads_modrequest;\n-$pntable['downloads_modrequest_column'] = array ('requestid'       => $downloads_modrequest . '.pn_requestid',\n-                                                 'lid'             => $downloads_modrequest . '.pn_lid',\n-                                                 'cid'             => $downloads_modrequest . '.pn_cid',\n-                                                 'sid'             => $downloads_modrequest . '.pn_sid',\n-                                                 'title'           => $downloads_modrequest . '.pn_title',\n-                                                 'url'             => $downloads_modrequest . '.pn_url',\n-                                                 'description'     => $downloads_modrequest . '.pn_description',\n-                                                 'modifysubmitter' => $downloads_modrequest . '.pn_modifysubmitter',\n-                                                 'brokendownload'  => $downloads_modrequest . '.pn_brokendownload',\n-                                                 'name'            => $downloads_modrequest . '.pn_name',\n-                                                 'email'           => $downloads_modrequest . '.pn_email',\n-                                                 'filesize'        => $downloads_modrequest . '.pn_filesize',\n-                                                 'version'         => $downloads_modrequest . '.pn_version',\n-                                                 'homepage'        => $downloads_modrequest . '.pn_homepage');\n-\n-$downloads_newdownload = $prefix . '_downloads_newdownload';\n-$pntable['downloads_newdownload'] = $downloads_newdownload;\n-$pntable['downloads_newdownload_column'] = array ('lid'         => $downloads_newdownload . '.pn_lid',\n-                                                  'cid'         => $downloads_newdownload . '.pn_cid',\n-                                                  'sid'         => $downloads_newdownload . '.pn_sid',\n-                                                  'title'       => $downloads_newdownload . '.pn_title',\n-                                                  'url'         => $downloads_newdownload . '.pn_url',\n-                                                  'description' => $downloads_newdownload . '.pn_description',\n-                                                  'name'        => $downloads_newdownload . '.pn_name',\n-                                                  'email'       => $downloads_newdownload . '.pn_email',\n-                                                  'submitter'   => $downloads_newdownload . '.pn_submitter',\n-                                                  'filesize'    => $downloads_newdownload . '.pn_filesize',\n-                                                  'version'     => $downloads_newdownload . '.pn_version',\n-                                                  'homepage'    => $downloads_newdownload . '.pn_homepage');\n-\n-$downloads_subcategories = $prefix . '_downloads_subcategories';\n-$pntable['downloads_subcategories'] = $downloads_subcategories;\n-$pntable['downloads_subcategories_column'] = array ('sid'   => $downloads_subcategories . '.pn_sid',\n-                                                    'cid'   => $downloads_subcategories . '.pn_cid',\n-                                                    'title' => $downloads_subcategories . '.pn_title');\n-\n-$downloads_votedata = $prefix . '_downloads_votedata';\n-$pntable['downloads_votedata'] = $downloads_votedata;\n-$pntable['downloads_votedata_column'] = array ('ratingdbid'      => $downloads_votedata . '.pn_id',\n-                                               'ratinglid'       => $downloads_votedata . '.pn_lid',\n-                                               'ratinguser'      => $downloads_votedata . '.pn_user',\n-                                               'rating'          => $downloads_votedata . '.pn_rating',\n-                                               'ratinghostname'  => $downloads_votedata . '.pn_hostname',\n-                                               'ratingcomments'  => $downloads_votedata . '.pn_comments',\n-                                               'ratingtimestamp' => $downloads_votedata . '.pn_timestamp');\n-\n-$ephem = $prefix . '_ephem';\n-$pntable['ephem'] = $ephem;\n-$pntable['ephem_column'] = array ('eid'       => $ephem . '.pn_eid',\n-                                  'did'       => $ephem . '.pn_did',\n-                                  'mid'       => $ephem . '.pn_mid',\n-                                  'yid'       => $ephem . '.pn_yid',\n-                                  'content'   => $ephem . '.pn_content',\n-                                  'elanguage' => $ephem . '.pn_language',\n-                                  'language'  => $ephem . '.pn_language');\n-\n-$faqanswer = $prefix . '_faqanswer';\n-$pntable['faqanswer'] = $faqanswer;\n-$pntable['faqanswer_column'] = array ('id'          => $faqanswer . '.pn_id',\n-                                      'id_cat'      => $faqanswer . '.pn_id_cat',\n-                                      'question'    => $faqanswer . '.pn_question',\n-                                      'answer'      => $faqanswer . '.pn_answer',\n-                                      'submittedby' => $faqanswer . '.pn_submittedby');\n-\n-$faqcategories = $prefix . '_faqcategories';\n-$pntable['faqcategories'] = $faqcategories;\n-$pntable['faqcategories_column'] = array ('id_cat'     => $faqcategories . '.pn_id_cat',\n-                                          'categories' => $faqcategories . '.pn_categories',\n-                                          'flanguage'  => $faqcategories . '.pn_language',\n-                                          'language'   => $faqcategories . '.pn_language',\n-                                          'parent_id'  => $faqcategories . '.pn_parent_id');\n-\n-$group_membership = $prefix . '_group_membership';\n-$pntable['group_membership'] = $group_membership;\n-$pntable['group_membership_column'] = array ('gid' => $group_membership . '.pn_gid',\n-                                             'uid' => $group_membership . '.pn_uid');\n-\n-$group_perms = $prefix . '_group_perms';\n-$pntable['group_perms'] = $group_perms;\n-$pntable['group_perms_column'] = array ('pid'       => $group_perms . '.pn_pid',\n-                                        'gid'       => $group_perms . '.pn_gid',\n-                                        'sequence'  => $group_perms . '.pn_sequence',\n-                                        'realm'     => $group_perms . '.pn_realm',\n-                                        'component' => $group_perms . '.pn_component',\n-                                        'instance'  => $group_perms . '.pn_instance',\n-                                        'level'     => $group_perms . '.pn_level',\n-                                        'bond'      => $group_perms . '.pn_bond');\n-\n-$groups = $prefix . '_groups';\n-$pntable['groups'] = $groups;\n-$pntable['groups_column'] = array ('gid'  => $groups . '.pn_gid',\n-                                   'name' => $groups . '.pn_name');\n-\n-$headlines = $prefix . '_headlines';\n-$pntable['headlines'] = $headlines;\n-$pntable['headlines_column'] = array ('id'        => $headlines . '.pn_id',\n-                                      'sitename'  => $headlines . '.pn_sitename',\n-                                      'rssuser'   => $headlines . '.pn_rssuser',\n-                                      'rsspasswd' => $headlines . '.pn_rsspasswd',\n-                                      'use_proxy' => $headlines . '.pn_use_proxy',\n-                                      'rssurl'    => $headlines . '.pn_rssurl',\n-                                      'maxrows'   => $headlines . '.pn_maxrows',\n-                                      'siteurl'   => $headlines . '.pn_siteurl',\n-                                      'options'   => $headlines . '.pn_options');\n-\n-$hooks = $prefix . '_hooks';\n-$pntable['hooks'] = $hooks;\n-$pntable['hooks_column'] = array ('id'        => $hooks . '.pn_id',\n-                                  'object'    => $hooks . '.pn_object',\n-                                  'action'    => $hooks . '.pn_action',\n-                                  'smodule'   => $hooks . '.pn_smodule',\n-                                  'stype'     => $hooks . '.pn_stype',\n-                                  'tarea'     => $hooks . '.pn_tarea',\n-                                  'tmodule'   => $hooks . '.pn_tmodule',\n-                                  'ttype'     => $hooks . '.pn_ttype',\n-                                  'tfunc'     => $hooks . '.pn_tfunc');\n-\n-$languages_constant = $prefix.'_languages_constant';\n-$pntable['languages_constant']    = $languages_constant;\n-$pntable['languages_constant_column'] = array ('constant' => $languages_constant . '.pn_constant',\n-                                               'file'     => $languages_constant . '.pn_file');\n-\n-$languages_file = $prefix.'_languages_file';\n-$pntable['languages_file']     = $languages_file;\n-$pntable['languages_file_column'] = array ('target' => $languages_file . '.pn_target',\n-                                           'source' => $languages_file . '.pn_source');\n-                                               \n-$languages_translation = $prefix.'_languages_translation';\n-$pntable['languages_translation'] = $languages_translation;\n-$pntable['languages_translation_column'] = array ('language'    => $languages_translation . '.pn_language',\n-                                                  'constant'    => $languages_translation . '.pn_constant',\n-                                                  'translation' => $languages_translation . '.pn_translation',\n-                                                  'level'       => $languages_translation . '.pn_level');\n-\n-$links_categories = $prefix . '_links_categories';\n-$pntable['links_categories'] = $links_categories;\n-$pntable['links_categories_column'] = array ('cat_id'       => $links_categories . '.pn_cat_id',\n-                                             'parent_id'    => $links_categories . '.pn_parent_id',\n-                                             'title'        => $links_categories . '.pn_title',\n-                                             'cdescription' => $links_categories . '.pn_description');\n-\n-$links_editorials = $prefix . '_links_editorials';\n-$pntable['links_editorials'] = $links_editorials;\n-$pntable['links_editorials_column'] = array ('linkid'             => $links_editorials . '.pn_linkid',\n-                                             'adminid'            => $links_editorials . '.pn_adminid',\n-                                             'editorialtimestamp' => $links_editorials . '.pn_timestamp',\n-                                             'editorialtext'      => $links_editorials . '.pn_text',\n-                                             'editorialtitle'     => $links_editorials . '.pn_title');\n-\n-$links_links = $prefix . '_links_links';\n-$pntable['links_links'] = $links_links;\n-$pntable['links_links_column'] = array ('lid'               => $links_links . '.pn_lid',\n-                                        'cat_id'            => $links_links . '.pn_cat_id',\n-                                        'title'             => $links_links . '.pn_title',\n-                                        'url'               => $links_links . '.pn_url',\n-                                        'description'       => $links_links . '.pn_description',\n-                                        'date'              => $links_links . '.pn_date',\n-                                        'name'              => $links_links . '.pn_name',\n-                                        'email'             => $links_links . '.pn_email',\n-                                        'hits'              => $links_links . '.pn_hits',\n-                                        'submitter'         => $links_links . '.pn_submitter',\n-                                        'linkratingsummary' => $links_links . '.pn_ratingsummary',\n-                                        'totalvotes'        => $links_links . '.pn_totalvotes',\n-                                        'totalcomments'     => $links_links . '.pn_totalcomments');\n-\n-$links_modrequest = $prefix . '_links_modrequest';\n-$pntable['links_modrequest'] = $links_modrequest;\n-$pntable['links_modrequest_column'] = array ('requestid'       => $links_modrequest . '.pn_requestid',\n-                                             'lid'             => $links_modrequest . '.pn_lid',\n-                                             'cat_id'          => $links_modrequest . '.pn_cat_id',\n-                                             'sid'             => $links_modrequest . '.pn_sid',\n-                                             'title'           => $links_modrequest . '.pn_title',\n-                                             'url'             => $links_modrequest . '.pn_url',\n-                                             'description'     => $links_modrequest . '.pn_description',\n-                                             'modifysubmitter' => $links_modrequest . '.pn_modifysubmitter',\n-                                             'brokenlink'      => $links_modrequest . '.pn_brokenlink');\n-\n-$links_newlink = $prefix . '_links_newlink';\n-$pntable['links_newlink'] = $links_newlink;\n-$pntable['links_newlink_column'] = array ('lid'         => $links_newlink . '.pn_lid',\n-                                          'cat_id'      => $links_newlink . '.pn_cat_id',\n-                                          'title'       => $links_newlink . '.pn_title',\n-                                          'url'         => $links_newlink . '.pn_url',\n-                                          'description' => $links_newlink . '.pn_description',\n-                                          'name'        => $links_newlink . '.pn_name',\n-                                          'email'       => $links_newlink . '.pn_email',\n-                                          'submitter'   => $links_newlink . '.pn_submitter');\n-\n-$links_votedata = $prefix . '_links_votedata';\n-$pntable['links_votedata'] = $links_votedata;\n-$pntable['links_votedata_column'] = array ('ratingdbid'      => $links_votedata . '.pn_id',\n-                                           'ratinglid'       => $links_votedata . '.pn_lid',\n-                                           'ratinguser'      => $links_votedata . '.pn_user',\n-                                           'rating'          => $links_votedata . '.pn_rating',\n-                                           'ratinghostname'  => $links_votedata . '.pn_hostname',\n-                                           'ratingcomments'  => $links_votedata . '.pn_comments',\n-                                           'ratingtimestamp' => $links_votedata . '.pn_timestamp');\n-\n-$message = $prefix . '_message';\n-$pntable['message'] = $message;\n-$pntable['message_column'] = array ('mid'         => $message . '.pn_mid',\n-                                    'title'       => $message . '.pn_title',\n-                                    'content'     => $message . '.pn_content',\n-                                    'date'        => $message . '.pn_date',\n-                                    'expire'      => $message . '.pn_expire',\n-                                    'active'      => $message . '.pn_active',\n-                                    'view'        => $message . '.pn_view',\n-                                    'mlanguage'   => $message . '.pn_language',\n-                                    'language'    => $message . '.pn_language');\n-\n $module_vars = $prefix . '_module_vars';\n $pntable['module_vars'] = $module_vars;\n $pntable['module_vars_column'] = array ('id'      => $module_vars . '.pn_id',\n@@ -391,278 +52,3 @@ $pntable['modules_column'] = array ('id'            => $modules . '.pn_id',\n                                     'admin_capable' => $modules . '.pn_admin_capable',\n                                     'user_capable'  => $modules . '.pn_user_capable',\n                                     'state'         => $modules . '.pn_state');\n-\n-$poll_check = $prefix . '_poll_check';\n-$pntable['poll_check'] = $poll_check;\n-$pntable['poll_check_column'] = array ('ip'   => $poll_check . '.pn_ip',\n-                                       'time' => $poll_check . '.pn_time');\n-\n-$poll_data = $prefix . '_poll_data';\n-$pntable['poll_data'] = $poll_data;\n-$pntable['poll_data_column'] = array ('pollid'      => $poll_data . '.pn_pollid',\n-                                      'optiontext'  => $poll_data . '.pn_optiontext',\n-                                      'optioncount' => $poll_data . '.pn_optioncount',\n-                                      'voteid'      => $poll_data . '.pn_voteid');\n-\n-$poll_desc = $prefix . '_poll_desc';\n-$pntable['poll_desc'] = $poll_desc;\n-$pntable['poll_desc_column'] = array ('pollid'    => $poll_desc . '.pn_pollid',\n-                                      'polltitle' => $poll_desc . '.pn_title',\n-                                      'timestamp' => $poll_desc . '.pn_timestamp',\n-                                      'voters'    => $poll_desc . '.pn_voters',\n-                                      'planguage' => $poll_desc . '.pn_language',\n-                                      'language'  => $poll_desc . '.pn_language');\n-\n-$pollcomments = $prefix . '_pollcomments';\n-$pntable['pollcomments'] = $pollcomments;\n-$pntable['pollcomments_column'] = array ('tid'       => $pollcomments . '.pn_tid',\n-                                         'pid'       => $pollcomments . '.pn_pid',\n-                                         'pollid'    => $pollcomments . '.pn_pollid',\n-                                         'date'      => $pollcomments . '.pn_date',\n-                                         'name'      => $pollcomments . '.pn_name',\n-                                         'email'     => $pollcomments . '.pn_email',\n-                                         'url'       => $pollcomments . '.pn_url',\n-                                         'host_name' => $pollcomments . '.pn_host_name',\n-                                         'subject'   => $pollcomments . '.pn_subject',\n-                                         'comment'   => $pollcomments . '.pn_comment',\n-                                         'score'     => $pollcomments . '.pn_score',\n-                                         'reason'    => $pollcomments . '.pn_reason');\n-\n-$priv_msgs = $prefix . '_priv_msgs';\n-$pntable['priv_msgs'] = $priv_msgs;\n-$pntable['priv_msgs_column'] = array ('msg_id'      => $priv_msgs . '.pn_msg_id',\n-                                      'msg_image'   => $priv_msgs . '.pn_msg_image',\n-                                      'subject'     => $priv_msgs . '.pn_subject',\n-                                      'from_userid' => $priv_msgs . '.pn_from_userid',\n-                                      'to_userid'   => $priv_msgs . '.pn_to_userid',\n-                                      'msg_time'    => $priv_msgs . '.pn_msg_time',\n-                                      'msg_text'    => $priv_msgs . '.pn_msg_text',\n-                                      'read_msg'    => $priv_msgs . '.pn_read_msg');\n-\n-$queue = $prefix . '_queue';\n-$pntable['queue'] = $queue;\n-$pntable['queue_column'] = array ('qid'       => $queue . '.pn_qid',\n-                                  'uid'       => $queue . '.pn_uid',\n-                                  'arcd'      => $queue . '.pn_arcd',\n-                                  'uname'     => $queue . '.pn_uname',\n-                                  'subject'   => $queue . '.pn_subject',\n-                                  'story'     => $queue . '.pn_story',\n-                                  'timestamp' => $queue . '.pn_timestamp',\n-                                  'topic'     => $queue . '.pn_topic',\n-                                  'alanguage' => $queue . '.pn_language',\n-                                  'language'  => $queue . '.pn_language',\n-                                  'bodytext'  => $queue . '.pn_bodytext');\n-\n-$realms = $prefix . '_realms';\n-$pntable['realms'] = $realms;\n-$pntable['realms_column'] = array ('rid'  => $realms . '.pn_rid',\n-                                   'name' => $realms . '.pn_name');\n-\n-$referer = $prefix . '_referer';\n-$pntable['referer'] = $referer;\n-$pntable['referer_column'] = array ('rid'       => $referer . '.pn_rid',\n-                                    'url'       => $referer . '.pn_url',\n-                                    'frequency' => $referer . '.pn_frequency');\n-\n-$related = $prefix . '_related';\n-$pntable['related'] = $related;\n-$pntable['related_column'] = array ('rid'  => $related . '.pn_rid',\n-                                    'tid'  => $related . '.pn_tid',\n-                                    'name' => $related . '.pn_name',\n-                                    'url'  => $related . '.pn_url');\n-\n-$reviews = $prefix . '_reviews';\n-$pntable['reviews'] = $reviews;\n-$pntable['reviews_column'] = array ('id'        => $reviews . '.pn_id',\n-                                    'date'      => $reviews . '.pn_date',\n-                                    'title'     => $reviews . '.pn_title',\n-                                    'text'      => $reviews . '.pn_text',\n-                                    'reviewer'  => $reviews . '.pn_reviewer',\n-                                    'email'     => $reviews . '.pn_email',\n-                                    'score'     => $reviews . '.pn_score',\n-                                    'cover'     => $reviews . '.pn_cover',\n-                                    'url'       => $reviews . '.pn_url',\n-                                    'url_title' => $reviews . '.pn_url_title',\n-                                    'hits'      => $reviews . '.pn_hits',\n-                                    'rlanguage' => $reviews . '.pn_language',\n-                                    'language'  => $reviews . '.pn_language');\n-\n-$reviews_add = $prefix . '_reviews_add';\n-$pntable['reviews_add'] = $reviews_add;\n-$pntable['reviews_add_column'] = array ('id'        => $reviews_add . '.pn_id',\n-                                        'date'      => $reviews_add . '.pn_date',\n-                                        'title'     => $reviews_add . '.pn_title',\n-                                        'text'      => $reviews_add . '.pn_text',\n-                                        'reviewer'  => $reviews_add . '.pn_reviewer',\n-                                        'email'     => $reviews_add . '.pn_email',\n-                                        'score'     => $reviews_add . '.pn_score',\n-                                        'url'       => $reviews_add . '.pn_url',\n-                                        'url_title' => $reviews_add . '.pn_url_title',\n-                                        'rlanguage' => $reviews_add . '.pn_language',\n-                                        'language'  => $reviews_add . '.pn_language');\n-\n-$reviews_comments = $prefix . '_reviews_comments';\n-$pntable['reviews_comments'] = $reviews_comments;\n-$pntable['reviews_comments_column'] = array ('cid'      => $reviews_comments . '.pn_cid',\n-                                             'rid'      => $reviews_comments . '.pn_rid',\n-                                             'userid'   => $reviews_comments . '.pn_userid',\n-                                             'date'     => $reviews_comments . '.pn_date',\n-                                             'comments' => $reviews_comments . '.pn_comments',\n-                                             'score'    => $reviews_comments . '.pn_score');\n-\n-$reviews_main = $prefix . '_reviews_main';\n-$pntable['reviews_main'] = $reviews_main;\n-$pntable['reviews_main_column'] = array ('title'      => $reviews_main . '.pn_title',\n-                                        'description' => $reviews_main . '.pn_description');\n-\n-$seccont = $prefix . '_seccont';\n-$pntable['seccont'] = $seccont;\n-$pntable['seccont_column'] = array ('artid'        => $seccont . '.pn_artid',\n-                                    'secid'        => $seccont . '.pn_secid',\n-                                    'title'        => $seccont . '.pn_title',\n-                                    'content'      => $seccont . '.pn_content',\n-                                    'counter'      => $seccont . '.pn_counter',\n-                                    'slanguage'    => $seccont . '.pn_language',\n-                                    'language'     => $seccont . '.pn_language');\n-\n-$sections = $prefix . '_sections';\n-$pntable['sections'] = $sections;\n-$pntable['sections_column'] = array ('secid'   => $sections . '.pn_secid',\n-                                     'secname' => $sections . '.pn_secname',\n-                                     'image'   => $sections . '.pn_image');\n-\n-$session_info = $prefix . '_session_info';\n-$pntable['session_info'] = $session_info;\n-$pntable['session_info_column'] = array ('sessid'    => $session_info . '.pn_sessid',\n-                                         'ipaddr'    => $session_info . '.pn_ipaddr',\n-                                         'firstused' => $session_info . '.pn_firstused',\n-                                         'lastused'  => $session_info . '.pn_lastused',\n-                                         'uid'       => $session_info . '.pn_uid',\n-                                         'vars'      => $session_info . '.pn_vars');\n-\n-$stats_date = $prefix . '_stats_date';\n-$pntable['stats_date'] = $stats_date;\n-$pntable['stats_date_column'] = array ('date'    => $stats_date . '.pn_date',\n-                                       'hits'    => $stats_date . '.pn_hits');\n-\n-$stats_hour = $prefix . '_stats_hour';\n-$pntable['stats_hour'] = $stats_hour;\n-$pntable['stats_hour_column'] = array ('hour'    => $stats_hour . '.pn_hour',\n-                                       'hits'    => $stats_hour . '.pn_hits');\n-\n-$stats_month = $prefix . '_stats_month';\n-$pntable['stats_month'] = $stats_month;\n-$pntable['stats_month_column'] = array ('month'  => $stats_month . '.pn_month',\n-                                        'hits'   => $stats_month . '.pn_hits');\n-\n-$stats_week = $prefix . '_stats_week';\n-$pntable['stats_week'] = $stats_week;\n-$pntable['stats_week_column'] = array ('weekday' => $stats_week . '.pn_weekday',\n-                                       'hits'    => $stats_week . '.pn_hits');\n-\n-$stories = $prefix . '_stories';\n-$pntable['stories'] = $stories;\n-$pntable['stories_column'] = array ('sid'           => $stories . '.pn_sid',\n-                                    'cid'           => $stories . '.pn_catid',\n-                                    'catid'         => $stories . '.pn_catid',  // for back compat\n-                                    'aid'           => $stories . '.pn_aid',\n-                                    'title'         => $stories . '.pn_title',\n-                                    'time'          => $stories . '.pn_time',\n-                                    'hometext'      => $stories . '.pn_hometext',\n-                                    'bodytext'      => $stories . '.pn_bodytext',\n-                                    'comments'      => $stories . '.pn_comments',\n-                                    'counter'       => $stories . '.pn_counter',\n-                                    'topic'         => $stories . '.pn_topic',\n-                                    'informant'     => $stories . '.pn_informant',\n-                                    'notes'         => $stories . '.pn_notes',\n-                                    'ihome'         => $stories . '.pn_ihome',\n-                                    'themeoverride' => $stories . '.pn_themeoverride',\n-                                    'alanguage'     => $stories . '.pn_language',\n-                                    'language'      => $stories . '.pn_language',\n-                                    'withcomm'      => $stories . '.pn_withcomm',\n-                        'format_type'   => $stories . '.pn_format_type');\n-\n-$stories_cat = $prefix . '_stories_cat';\n-$pntable['stories_cat'] = $stories_cat;\n-$pntable['stories_cat_column'] = array ('catid'          => $stories_cat . '.pn_catid',\n-                                        'title'          => $stories_cat . '.pn_title',\n-                                        'counter'        => $stories_cat . '.pn_counter',\n-                                        'themeoverride'  => $stories_cat . '.pn_themeoverride');\n-\n-$topics = $prefix . '_topics';\n-$pntable['topics'] = $topics;\n-$pntable['topics_column'] = array ('tid'        => $topics . '.pn_topicid',\n-                                   'topicid'    => $topics . '.pn_topicid', // for back compat\n-                                   'topicname'  => $topics . '.pn_topicname',\n-                                   'topicimage' => $topics . '.pn_topicimage',\n-                                   'topictext'  => $topics . '.pn_topictext',\n-                                   'counter'    => $topics . '.pn_counter');\n-\n-$user_data = $prefix . '_user_data';\n-$pntable['user_data'] = $user_data;\n-$pntable['user_data_column'] = array ('uda_id'       => $user_data . '.pn_uda_id',\n-                                       'uda_propid'  => $user_data . '.pn_uda_propid',\n-                                       'uda_uid'     => $user_data . '.pn_uda_uid',\n-                                       'uda_value'   => $user_data . '.pn_uda_value');\n-\n-$user_perms = $prefix . '_user_perms';\n-$pntable['user_perms'] = $user_perms;\n-$pntable['user_perms_column'] = array ('pid'       => $user_perms . '.pn_pid',\n-                                       'uid'       => $user_perms . '.pn_uid',\n-                                       'sequence'  => $user_perms . '.pn_sequence',\n-                                       'realm'     => $user_perms . '.pn_realm',\n-                                       'component' => $user_perms . '.pn_component',\n-                                       'instance'  => $user_perms . '.pn_instance',\n-                                       'level'     => $user_perms . '.pn_level',\n-                                       'bond'      => $user_perms . '.pn_bond');\n-\n-$user_property = $prefix . '_user_property';\n-$pntable['user_property'] = $user_property;\n-$pntable['user_property_column'] = array ('prop_id' => $user_property . '.pn_prop_id',\n-                                  'prop_label'      => $user_property . '.pn_prop_label',\n-                                  'prop_dtype'      => $user_property . '.pn_prop_dtype',\n-                                  'prop_length'     => $user_property . '.pn_prop_length',\n-                                  'prop_weight'     => $user_property . '.pn_prop_weight',\n-                                  'prop_validation' => $user_property . '.pn_prop_validation'\n-                                  );\n-\n-$userblocks = $prefix . '_userblocks';\n-$pntable['userblocks'] = $userblocks;\n-$pntable['userblocks_column'] = array ('uid'         => $userblocks . '.pn_uid',\n-                                       'bid'         => $userblocks . '.pn_bid',\n-                                       'active'      => $userblocks . '.pn_active',\n-                                       'lastupdate'  => $userblocks . '.pn_lastupdate');\n-\n-$users = $prefix . '_users';\n-$pntable['users'] = $users;\n-$pntable['users_column'] = array ('uid'             => $users . '.pn_uid',\n-                                  'name'            => $users . '.pn_name',\n-                                  'uname'           => $users . '.pn_uname',\n-                                  'email'           => $users . '.pn_email',\n-                                  'femail'          => $users . '.pn_femail',\n-                                  'url'             => $users . '.pn_url',\n-                                  'user_avatar'     => $users . '.pn_user_avatar',\n-                                  'user_regdate'    => $users . '.pn_user_regdate',\n-                                  'user_icq'        => $users . '.pn_user_icq',\n-                                  'user_occ'        => $users . '.pn_user_occ',\n-                                  'user_from'       => $users . '.pn_user_from',\n-                                  'user_intrest'    => $users . '.pn_user_intrest',\n-                                  'user_sig'        => $users . '.pn_user_sig',\n-                                  'user_viewemail'  => $users . '.pn_user_viewemail',\n-                                  'user_theme'      => $users . '.pn_user_theme',\n-                                  'user_aim'        => $users . '.pn_user_aim',\n-                                  'user_yim'        => $users . '.pn_user_yim',\n-                                  'user_msnm'       => $users . '.pn_user_msnm',\n-                                  'pass'            => $users . '.pn_pass',\n-                                  'storynum'        => $users . '.pn_storynum',\n-                                  'umode'           => $users . '.pn_umode',\n-                                  'uorder'          => $users . '.pn_uorder',\n-                                  'thold'           => $users . '.pn_thold',\n-                                  'noscore'         => $users . '.pn_noscore',\n-                                  'bio'             => $users . '.pn_bio',\n-                                  'ublockon'        => $users . '.pn_ublockon',\n-                                  'ublock'          => $users . '.pn_ublock',\n-                                  'theme'           => $users . '.pn_theme',\n-                                  'commentmax'      => $users . '.pn_commentmax',\n-                                  'counter'         => $users . '.pn_counter',\n-                                  'timezone_offset' => $users . '.pn_timezone_offset');\n", "diff --git a/interface/orders/list_reports.php b/interface/orders/list_reports.php\nindex 5d6e36cde..21a6c56fd 100644\n--- a/interface/orders/list_reports.php\n+++ b/interface/orders/list_reports.php\n@@ -227,7 +227,7 @@ $(function () {\n             $s .= \"  <td>&nbsp;</td>\\n\";\n             $s .= \"  <td>&nbsp;</td>\\n\";\n             $s .= \"  <td><a href='javascript:openPtMatch(\\\"\" . addslashes($matchkey) . \"\\\")'>\";\n-            $tmp = unserialize($matchkey);\n+            $tmp = unserialize($matchkey, ['allowed_classes' => false]);\n             $s .= xlt('Click to match patient') . ' \"' . text($tmp['lname']) . ', ' . text($tmp['fname']) . '\"';\n             $s .= \"</a>\";\n             $s .= \"</td>\\n\";\n", "diff --git a/interface/orders/patient_match_dialog.php b/interface/orders/patient_match_dialog.php\nindex 3fcfadd59..2b0c7048b 100644\n--- a/interface/orders/patient_match_dialog.php\n+++ b/interface/orders/patient_match_dialog.php\n@@ -26,7 +26,7 @@ require_once(\"$srcdir/options.inc.php\");\n use OpenEMR\\Core\\Header;\n \n $form_key = $_REQUEST['key'];\n-$args = unserialize($form_key);\n+$args = unserialize($form_key, ['allowed_classes' => false]);\n $form_ss = preg_replace('/[^0-9]/', '', $args['ss']);\n $form_fname = $args['fname'];\n $form_lname = $args['lname'];\n", "diff --git a/interface/super/edit_layout.php b/interface/super/edit_layout.php\nindex de9d23d34..126b0ca86 100644\n--- a/interface/super/edit_layout.php\n+++ b/interface/super/edit_layout.php\n@@ -863,7 +863,7 @@ function writeFieldLine($linedata)\n     // Create a floating div for the additional attributes of this field.\n     $conditions = empty($linedata['conditions']) ?\n       array(0 => array('id' => '', 'itemid' => '', 'operator' => '', 'value' => '')) :\n-      unserialize($linedata['conditions']);\n+        unserialize($linedata['conditions'], ['allowed_classes' => false]);\n     $action = empty($conditions['action']) ? 'skip' : $conditions['action'];\n     $action_value = $action == 'skip' ? '' : substr($action, 6);\n     //\n", "diff --git a/interface/themes/rtl.scss b/interface/themes/rtl.scss\nindex d4d34dfc4..e898e7e9a 100644\n--- a/interface/themes/rtl.scss\n+++ b/interface/themes/rtl.scss\n@@ -136,12 +136,12 @@\n     }\n     #dateNav>a:nth-child(2){\n \n-        background-image: url(../main/calendar/modules/PostCalendar/pntemplates/default/images/rightbtn.gif);\n+        background-image: url(../../public/images/rightbtn.gif);\n         margin-right: 10px;\n     }\n     #dateNav>a:nth-child(3){\n \n-        background-image: url(../main/calendar/modules/PostCalendar/pntemplates/default/images/leftbtn.gif);\n+        background-image: url(../../public/images/leftbtn.gif);\n \n     }\n \n", "diff --git a/interface/themes/rtl_style_pdf.css b/interface/themes/rtl_style_pdf.css\nindex 814c66ab7..9730b994a 100644\n--- a/interface/themes/rtl_style_pdf.css\n+++ b/interface/themes/rtl_style_pdf.css\n@@ -1537,12 +1537,12 @@ body>.nav{\n }\n #dateNav>a:nth-child(2){\n \n-    background-image: url(../main/calendar/modules/PostCalendar/pntemplates/default/images/rightbtn.gif);\n+    background-image: url(../../public/images/rightbtn.gif);\n     margin-right: 10px;\n }\n #dateNav>a:nth-child(3){\n \n-    background-image: url(../main/calendar/modules/PostCalendar/pntemplates/default/images/leftbtn.gif);\n+    background-image: url(../../public/images/leftbtn.gif);\n \n }\n \n", "diff --git a/library/MedEx/API.php b/library/MedEx/API.php\nindex 036f315c0..402fd3c5e 100644\n--- a/library/MedEx/API.php\n+++ b/library/MedEx/API.php\n@@ -1063,7 +1063,7 @@ class Events extends Base\n         Now Convert them to real appt slots for MedEx\\n\");\n \n         //any dates that match need to be spawned from recurrent and made to live on their own.\n-        $oldRecurrspec = unserialize($appt['pc_recurrspec']);\n+        $oldRecurrspec = unserialize($appt['pc_recurrspec'], ['allowed_classes' => false]);\n \n         foreach ($hits as $selected_date) {\n             $exclude = str_replace(\"-\", \"\", $selected_date);\n@@ -1227,7 +1227,7 @@ class Events extends Base\n                 break;\n             case '1':\n             case '3':\n-                $event_recurrspec = @unserialize($event['pc_recurrspec']);\n+                $event_recurrspec = @unserialize($event['pc_recurrspec'], ['allowed_classes' => false]);\n \n                 $rfreq = $event_recurrspec['event_repeat_freq'];\n                 $rtype = $event_recurrspec['event_repeat_freq_type'];\n@@ -1266,7 +1266,7 @@ class Events extends Base\n \n           //////\n             case '2':\n-                $event_recurrspec = @unserialize($event['pc_recurrspec']);\n+                $event_recurrspec = @unserialize($event['pc_recurrspec'], ['allowed_classes' => false]);\n \n                 if (checkEvent($event['pc_recurrtype'], $event_recurrspec)) {\n                     break; }\n", "diff --git a/library/appointments.inc.php b/library/appointments.inc.php\nindex 1c74405f3..be33e3c18 100644\n--- a/library/appointments.inc.php\n+++ b/library/appointments.inc.php\n@@ -206,7 +206,7 @@ function fetchEvents($from_date, $to_date, $where_param = null, $orderby_param =\n       //////\n             case '1':\n             case '3':\n-                $event_recurrspec = @unserialize($event['pc_recurrspec']);\n+                $event_recurrspec = @unserialize($event['pc_recurrspec'], ['allowed_classes' => false]);\n \n                 if (checkEvent($event['pc_recurrtype'], $event_recurrspec)) {\n                     break; }\n@@ -258,7 +258,7 @@ function fetchEvents($from_date, $to_date, $where_param = null, $orderby_param =\n \n       //////\n             case '2':\n-                $event_recurrspec = @unserialize($event['pc_recurrspec']);\n+                $event_recurrspec = @unserialize($event['pc_recurrspec'], ['allowed_classes' => false]);\n \n                 if (checkEvent($event['pc_recurrtype'], $event_recurrspec)) {\n                     break; }\n@@ -663,7 +663,7 @@ function interpretRecurrence($recurr_freq, $recurr_type)\n {\n     global $REPEAT_FREQ, $REPEAT_FREQ_TYPE, $REPEAT_ON_NUM, $REPEAT_ON_DAY;\n     $interpreted = \"\";\n-    $recurr_freq = unserialize($recurr_freq);\n+    $recurr_freq = unserialize($recurr_freq, ['allowed_classes' => false]);\n     if ($recurr_type == 1) {\n         $interpreted = $REPEAT_FREQ[$recurr_freq['event_repeat_freq']];\n         $interpreted .= \" \" . $REPEAT_FREQ_TYPE[$recurr_freq['event_repeat_freq_type']];\n@@ -694,7 +694,7 @@ function fetchRecurrences($pid)\n     $res = sqlStatement($query, $sqlBindArray);\n     $result_data = array();\n     while ($row = sqlFetchArray($res)) {\n-        $u_recurrspec = unserialize($row['pc_recurrspec']);\n+        $u_recurrspec = unserialize($row['pc_recurrspec'], ['allowed_classes' => false]);\n         if (checkEvent($row['pc_recurrtype'], $u_recurrspec)) {\n             continue; }\n         $row['pc_recurrspec'] = interpretRecurrence($row['pc_recurrspec'], $row['pc_recurrtype']);\n", "diff --git a/library/classes/NumberToText.class.php b/library/classes/NumberToText.class.php\nindex 1fdb39e70..26ffbf931 100644\n--- a/library/classes/NumberToText.class.php\n+++ b/library/classes/NumberToText.class.php\n@@ -70,8 +70,8 @@ class NumberToText\n         $capatalize = $this->capatalize;\n         $and = $this->and;\n \n-        $big = unserialize(N2T_BIG);\n-        $small = unserialize(N2T_SMALL);\n+        $big = unserialize(N2T_BIG, ['allowed_classes' => false]);\n+        $small = unserialize(N2T_SMALL, ['allowed_classes' => false]);\n \n         // get rid of leading 0's\n         /*\n@@ -203,8 +203,8 @@ class NumberToText\n     */\n     function n2t_convertthree($number, $and, $preceding)\n     {\n-        $small = unserialize(N2T_SMALL);\n-        $medium = unserialize(N2T_MEDIUM);\n+        $small = unserialize(N2T_SMALL, ['allowed_classes' => false]);\n+        $medium = unserialize(N2T_MEDIUM, ['allowed_classes' => false]);\n \n         $text = \"\";\n \n", "diff --git a/library/encounter_events.inc.php b/library/encounter_events.inc.php\nindex 194d79d77..4dd090b4e 100644\n--- a/library/encounter_events.inc.php\n+++ b/library/encounter_events.inc.php\n@@ -1,5 +1,5 @@\n <?php\n-// +-----------------------------------------------------------------------------+ \n+// +-----------------------------------------------------------------------------+\n // Copyright (C) 2010 Z&H Consultancy Services Private Limited <sam@zhservices.com>\n //\n //\n@@ -19,9 +19,9 @@\n // openemr/interface/login/GnuGPL.html\n // For more information write to the Free Software\n // Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.\n-// \n+//\n // Author:   Eldho Chacko <eldho@zhservices.com>\n-//           Paul Simon K <paul@zhservices.com> \n+//           Paul Simon K <paul@zhservices.com>\n //           Ian Jardine ( github.com/epsdky ) ( Modified calendar_arrived )\n //\n // +------------------------------------------------------------------------------+\n@@ -264,7 +264,7 @@ function update_event($eid)\n {\n     $origEventRes = sqlStatement(\"SELECT * FROM openemr_postcalendar_events WHERE pc_eid = ?\", array($eid));\n     $origEvent=sqlFetchArray($origEventRes);\n-    $oldRecurrspec = unserialize($origEvent['pc_recurrspec']);\n+    $oldRecurrspec = unserialize($origEvent['pc_recurrspec'], ['allowed_classes' => false]);\n     $duration=$origEvent['pc_duration'];\n     $starttime=$origEvent['pc_startTime'];\n     $endtime=$origEvent['pc_endTime'];\n@@ -330,7 +330,7 @@ function check_event_exist($eid)\n     $pc_endTime=$origEvent['pc_endTime'];\n     $pc_facility=$origEvent['pc_facility'];\n     $pc_billing_location=$origEvent['pc_billing_location'];\n-    $pc_recurrspec_array = unserialize($origEvent['pc_recurrspec']);\n+    $pc_recurrspec_array = unserialize($origEvent['pc_recurrspec'], ['allowed_classes' => false]);\n     $origEvent = sqlStatement(\n         \"SELECT * FROM openemr_postcalendar_events WHERE pc_eid != ? and pc_catid=? and pc_aid=? \".\n         \"and pc_pid=? and pc_eventDate=? and pc_startTime=? and pc_endTime=? and pc_facility=? and pc_billing_location=?\",\n", "diff --git a/library/options.inc.php b/library/options.inc.php\nindex d4fa3e054..88159ab62 100644\n--- a/library/options.inc.php\n+++ b/library/options.inc.php\n@@ -2803,7 +2803,7 @@ function disp_end_group()\n // Accumulate action conditions into a JSON expression for the browser side.\n function accumActionConditions($field_id, &$condition_str, &$condarr)\n {\n-    $conditions = empty($condarr) ? array() : unserialize($condarr);\n+    $conditions = empty($condarr) ? array() : unserialize($condarr, ['allowed_classes' => false]);\n     $action = 'skip';\n     foreach ($conditions as $key => $condition) {\n         if ($key === 'action') {\n@@ -2853,7 +2853,7 @@ function isSkipped(&$frow, $currvalue)\n         return false;\n     }\n \n-    $skiprows  = unserialize($frow['conditions']);\n+    $skiprows  = unserialize($frow['conditions'], ['allowed_classes' => false]);\n     $prevandor = '';\n     $prevcond  = false;\n     $datatype  = $frow['data_type'];\n", "diff --git a/portal/patient/libs/Controller/PortalPatientController.php b/portal/patient/libs/Controller/PortalPatientController.php\nindex f63a199de..e32f3bccd 100644\n--- a/portal/patient/libs/Controller/PortalPatientController.php\n+++ b/portal/patient/libs/Controller/PortalPatientController.php\n@@ -115,7 +115,7 @@ class PortalPatientController extends AppBaseController\n             // $patient = $this->Phreezer->Get( 'Patient', $pk );\n             $appsql = new ApplicationTable();\n             $edata = $appsql->getPortalAudit($ppid, 'review');\n-            $changed = unserialize($edata['table_args']);\n+            $changed = unserialize($edata['table_args'], ['allowed_classes' => false]);\n             $newv = array ();\n             foreach ($changed as $key => $val) {\n                 $newv[lcfirst(ucwords(preg_replace_callback(\"/(\\_(.))/\", create_function('$matches', 'return strtoupper($matches[2]);'), strtolower($key))))] = $val;\n", "diff --git a/public/images/leftbtn.gif b/public/images/leftbtn.gif\nnew file mode 100644\nindex 000000000..118c6d3fb\nBinary files /dev/null and b/public/images/leftbtn.gif differ\n", "diff --git a/public/images/rightbtn.gif b/public/images/rightbtn.gif\nnew file mode 100644\nindex 000000000..c23570a76\nBinary files /dev/null and b/public/images/rightbtn.gif differ\n", "diff --git a/sql/database.sql b/sql/database.sql\nindex b65d87258..ddfcd801d 100644\n--- a/sql/database.sql\n+++ b/sql/database.sql\n@@ -5702,55 +5702,6 @@ CREATE TABLE `openemr_postcalendar_events` (\n \n -----------------------------------------------------------\n \n---\n--- Table structure for table `openemr_postcalendar_limits`\n---\n-\n-DROP TABLE IF EXISTS `openemr_postcalendar_limits`;\n-CREATE TABLE `openemr_postcalendar_limits` (\n-  `pc_limitid` int(11) NOT NULL auto_increment,\n-  `pc_catid` int(11) NOT NULL default '0',\n-  `pc_starttime` time NOT NULL default '00:00:00',\n-  `pc_endtime` time NOT NULL default '00:00:00',\n-  `pc_limit` int(11) NOT NULL default '1',\n-  PRIMARY KEY  (`pc_limitid`)\n-) ENGINE=InnoDB AUTO_INCREMENT=1 ;\n-\n------------------------------------------------------------\n-\n---\n--- Table structure for table `openemr_postcalendar_topics`\n---\n-\n-DROP TABLE IF EXISTS `openemr_postcalendar_topics`;\n-CREATE TABLE `openemr_postcalendar_topics` (\n-  `pc_catid` int(11) unsigned NOT NULL auto_increment,\n-  `pc_catname` varchar(100) default NULL,\n-  `pc_catcolor` varchar(50) default NULL,\n-  `pc_catdesc` text,\n-  PRIMARY KEY  (`pc_catid`),\n-  KEY `basic_cat` (`pc_catname`,`pc_catcolor`)\n-) ENGINE=InnoDB AUTO_INCREMENT=1 ;\n-\n------------------------------------------------------------\n-\n---\n--- Table structure for table `openemr_session_info`\n---\n-\n-DROP TABLE IF EXISTS `openemr_session_info`;\n-CREATE TABLE `openemr_session_info` (\n-  `pn_sessid` varchar(32) NOT NULL default '',\n-  `pn_ipaddr` varchar(20) default NULL,\n-  `pn_firstused` int(11) NOT NULL default '0',\n-  `pn_lastused` int(11) NOT NULL default '0',\n-  `pn_uid` int(11) NOT NULL default '0',\n-  `pn_vars` blob,\n-  PRIMARY KEY  (`pn_sessid`)\n-) ENGINE=InnoDB;\n-\n------------------------------------------------------------\n-\n --\n -- Table structure for table `patient_access_onsite`\n --\n"], "label": 0, "cve": "CVE-2018-17179", "rank": 65, "commit": "7685b083d9257fcb6427b460892ff6560a83ed01", "cve_attention_tokens": []}
{"cve_desc": "The archive_read_format_cpio_read_header function in archive_read_support_format_cpio.c in libarchive before 3.2.1 allows remote attackers to cause a denial of service (application crash) via a CPIO archive with a large symlink.", "commit_msg": "Fix spelling typos in comments\n\nThe Debian package checker tool (lintian) detected a few typos.\n\nReported-by: Felix Geyer <fgeyer@debian.org>\n\n", "diff": ["diff --git a/CMakeLists.txt b/CMakeLists.txt\nindex 4b970390..68e94a6a 100644\n--- a/CMakeLists.txt\n+++ b/CMakeLists.txt\n@@ -365,7 +365,7 @@ IF(DEFINED __GNUWIN32PATH AND EXISTS \"${__GNUWIN32PATH}\")\n   #   e.g.\n   #     cmake -DCMAKE_PREFIX_PATH=<your-GnuWin32-path> <path-to-source>\n   #\n-  # If compiling error occured in zconf.h, You may need patch to zconf.h.\n+  # If compiling error occurred in zconf.h, You may need patch to zconf.h.\n   #--- zconf.h.orig\t2005-07-21 00:40:26.000000000\n   #+++ zconf.h\t2009-01-19 11:39:10.093750000\n   #@@ -286,7 +286,7 @@\n", "diff --git a/libarchive/archive_read_disk_windows.c b/libarchive/archive_read_disk_windows.c\nindex 53bd4b8b..566d264e 100644\n--- a/libarchive/archive_read_disk_windows.c\n+++ b/libarchive/archive_read_disk_windows.c\n@@ -1586,7 +1586,7 @@ tree_reopen(struct tree *t, const wchar_t *path, int restore_time)\n \tt->stack->flags = needsFirstVisit;\n \t/*\n \t * Debug flag for Direct IO(No buffering) or Async IO.\n-\t * Those dependant on environment variable switches\n+\t * Those dependent on environment variable switches\n \t * will be removed until next release.\n \t */\n \t{\n", "diff --git a/libarchive/xxhash.c b/libarchive/xxhash.c\nindex 7a55fc8e..d7f8e96d 100644\n--- a/libarchive/xxhash.c\n+++ b/libarchive/xxhash.c\n@@ -57,7 +57,7 @@ You can contact the author at :\n ** #define XXH_ACCEPT_NULL_INPUT_POINTER 1\n \n ** XXH_FORCE_NATIVE_FORMAT :\n-** By default, xxHash library provides endian-independant Hash values, based on little-endian convention.\n+** By default, xxHash library provides endian-independent Hash values, based on little-endian convention.\n ** Results are therefore identical for little-endian and big-endian CPU.\n ** This comes at a performance cost for big-endian CPU, since some swapping is required to emulate little-endian format.\n ** Should endian-independance be of no importance for your application, you may set the #define below to 1.\n"], "label": 0, "cve": "CVE-2016-4809", "rank": 6, "commit": "2699babc95c99b98ecb8bb0d34f0331394ee4c5f", "cve_attention_tokens": []}
{"cve_desc": "In Redmine before 3.2.7 and 3.3.x before 3.3.4, the reminders function in app/models/mailer.rb does not check whether an issue is visible, which allows remote authenticated users to obtain sensitive information by reading e-mail reminder messages.", "commit_msg": "Adds an assertion for this (#23180).\n\ngit-svn-id: http://svn.redmine.org/redmine/trunk@15588 e93f8b46-1217-0410-a6f0-8f06a7374b81\n\n", "diff": ["diff --git a/test/unit/mailer_test.rb b/test/unit/mailer_test.rb\nindex f875d3cbd..8f9763288 100644\n--- a/test/unit/mailer_test.rb\n+++ b/test/unit/mailer_test.rb\n@@ -45,6 +45,10 @@ class MailerTest < ActiveSupport::TestCase\n     assert_not_nil mail\n \n     assert_select_email do\n+      # link to the main ticket on issue id\n+      assert_select 'a[href=?]',\n+                    'https://mydomain.foo/issues/2#change-3',\n+                    :text => '#2'\n       # link to the main ticket\n       assert_select 'a[href=?]',\n                     'https://mydomain.foo/issues/2#change-3',\n"], "label": 0, "cve": "CVE-2017-16804", "rank": 21, "commit": "a4e843842fd040a1ea3071cfc8303b809de80bce", "cve_attention_tokens": []}
{"cve_desc": "install/index.php in Exponent CMS 2.3.9 allows remote attackers to execute arbitrary commands via shell metacharacters in the sc array parameter.", "commit_msg": "add sorting direction option to form report\n\n", "diff": ["diff --git a/framework/modules/forms/controllers/formsController.php b/framework/modules/forms/controllers/formsController.php\nindex ab2b3022b..f5ec468d2 100644\n--- a/framework/modules/forms/controllers/formsController.php\n+++ b/framework/modules/forms/controllers/formsController.php\n@@ -166,7 +166,7 @@ class formsController extends expController {\n                         'where' => 1,\n //                'limit'   => (isset($this->params['limit']) && $this->params['limit'] != '') ? $this->params['limit'] : 10,\n                         'order' => (isset($this->params['order']) && $this->params['order'] != '') ? $this->params['order'] : (!empty($this->config['order']) ? $this->config['order'] : 'id'),\n-                        'dir' => (isset($this->params['dir']) && $this->params['dir'] != '') ? $this->params['dir'] : 'ASC',\n+                        'dir' => (isset($this->params['dir']) && $this->params['dir'] != '') ? $this->params['dir'] : (!empty($this->config['dir']) ? $this->config['dir'] : 'ASC'),\n                         'page' => (isset($this->params['page']) ? $this->params['page'] : 1),\n                         'controller' => $this->baseclassname,\n                         'action' => $this->params['action'],\n@@ -717,7 +717,7 @@ class formsController extends expController {\n //                if ($this->config['auto_respond_form'])\n //                    $tmsg .= \"\\n\" . $emailText;\n                 $hmsg = $this->config['auto_respond_body'];\n-                if ($this->config['auto_respond_form'])\n+                if (!empty($this->config['auto_respond_form']))\n                     $hmsg .= \"\\n\" . $emailHtml;\n                 $mail = new expMail();\n                 $mail->quickSend(array(\n", "diff --git a/framework/modules/forms/views/forms/configure/report.tpl b/framework/modules/forms/views/forms/configure/report.tpl\nindex 0d022f747..72c476d90 100644\n--- a/framework/modules/forms/views/forms/configure/report.tpl\n+++ b/framework/modules/forms/views/forms/configure/report.tpl\n@@ -33,4 +33,5 @@\n         plugin=\"fieldinsert\" additionalConfig=\"fieldinsert_list : `$fieldlist`,\"\n         description='Leave blank to display all fields.  Use \\'Fields\\' dropdown to insert fields'}\n     {control type=\"dropdown\" name=\"order\" label=\"Sort records by\"|gettext items=$fields value=$config.order|default:'id'}\n+    {control type=radiogroup name='dir' label='Sorting Direction'|gettext default=$config.dir|default:'ASC' items='Ascending, Descending'|gettxtlist values='ASC,DESC'}\n {/group}\n\\ No newline at end of file\n"], "label": 0, "cve": "CVE-2016-7565", "rank": 32, "commit": "549e79b1e9e352fee7d5f001fb700792e7fcda49", "cve_attention_tokens": []}
{"cve_desc": "In uftpd before 2.11, it is possible for an unauthenticated user to perform a directory traversal attack using multiple different FTP commands and read and write to arbitrary locations on the filesystem due to the lack of a well-written chroot jail in compose_abspath(). This has been fixed in version 2.11", "commit_msg": "FTP: Fix buffer overflow in PORT parser, reported by Aaron Esau\n\nSigned-off-by: Joachim Nilsson <troglobit@gmail.com>\n\n", "diff": ["diff --git a/src/ftpcmd.c b/src/ftpcmd.c\nindex b318711..34686a4 100644\n--- a/src/ftpcmd.c\n+++ b/src/ftpcmd.c\n@@ -441,7 +441,7 @@ static void handle_PORT(ctrl_t *ctrl, char *str)\n \n \t/* Convert PORT command's argument to IP address + port */\n \tsscanf(str, \"%d,%d,%d,%d,%d,%d\", &a, &b, &c, &d, &e, &f);\n-\tsprintf(addr, \"%d.%d.%d.%d\", a, b, c, d);\n+\tsnprintf(addr, sizeof(addr), \"%d.%d.%d.%d\", a, b, c, d);\n \n \t/* Check IPv4 address using inet_aton(), throw away converted result */\n \tif (!inet_aton(addr, &(sin.sin_addr))) {\n"], "label": 0, "cve": "CVE-2020-5221", "rank": 15, "commit": "0fb2c031ce0ace07cc19cd2cb2143c4b5a63c9dd", "cve_attention_tokens": ["ftp"]}
{"cve_desc": "ImageMagick 7.0.8-50 Q16 has a heap-based buffer over-read at MagickCore/threshold.c in AdaptiveThresholdImage because a height of zero is mishandled.", "commit_msg": "https://github.com/ImageMagick/ImageMagick/issues/1589\n\n", "diff": ["diff --git a/MagickCore/annotate.c b/MagickCore/annotate.c\nindex a1145780a..494720211 100644\n--- a/MagickCore/annotate.c\n+++ b/MagickCore/annotate.c\n@@ -274,7 +274,11 @@ MagickExport MagickBooleanType AnnotateImage(Image *image,\n       number_lines++;\n   textlist=AcquireQuantumMemory(number_lines+1,sizeof(*textlist));\n   if (textlist == (char **) NULL)\n-    return(MagickFalse);\n+    {\n+      annotate_info=DestroyDrawInfo(annotate_info);\n+      annotate=DestroyDrawInfo(annotate);\n+      return(MagickFalse);\n+    }\n   p=text;\n   for (i=0; i < number_lines; i++)\n   {\n@@ -303,7 +307,12 @@ MagickExport MagickBooleanType AnnotateImage(Image *image,\n       (void) ParseGeometry(annotate_info->geometry,&geometry_info);\n     }\n   if (SetImageStorageClass(image,DirectClass,exception) == MagickFalse)\n-    return(MagickFalse);\n+    {\n+      annotate_info=DestroyDrawInfo(annotate_info);\n+      annotate=DestroyDrawInfo(annotate);\n+      textlist=(char **) RelinquishMagickMemory(textlist);\n+      return(MagickFalse);\n+    }\n   if (IsGrayColorspace(image->colorspace) != MagickFalse)\n     (void) SetImageColorspace(image,sRGBColorspace,exception);\n   status=MagickTrue;\n"], "label": 0, "cve": "CVE-2019-13297", "rank": 27, "commit": "f595a1985233c399a05c0c37cc41de16a90dd025", "cve_attention_tokens": []}
{"cve_desc": "FasterXML jackson-databind 2.x before 2.9.10.8 mishandles the interaction between serialization gadgets and typing, related to org.apache.commons.dbcp2.datasources.PerUserPoolDataSource.", "commit_msg": "Update release notes wrt #2999, cve id\n\n", "diff": ["diff --git a/release-notes/VERSION-2.x b/release-notes/VERSION-2.x\nindex 6f2f677c4..dba2b19e6 100644\n--- a/release-notes/VERSION-2.x\n+++ b/release-notes/VERSION-2.x\n@@ -14,7 +14,7 @@ Project: jackson-databind\n  (reported by Al1ex@knownsec)\n #2998: Block 2 more gadget types (org.apache.tomcat/tomcat-dbcp)\n  (reported by Al1ex@knownsec)\n-#2999: Block 1 more gadget type (org.glassfish.web/javax.servlet.jsp.jstl)\n+#2999: Block 1 more gadget type (org.glassfish.web/javax.servlet.jsp.jstl, CVE-2020-35728)\n  (reported by bu5yer of Sangfor FarSight Security Lab)\n \n 2.9.10.7 (02-Dec-2020)\n"], "label": 0, "cve": "CVE-2020-35490", "rank": 11, "commit": "8c9e28fde501ff6463e1f8ddc279ac638b109939", "cve_attention_tokens": ["dbcp"]}
{"cve_desc": "It was found in Undertow before 1.3.28 that with non-clean TCP close, the Websocket server gets into infinite loop on every IO thread, effectively causing DoS.", "commit_msg": "UNDERTOW-1095 UNDERTOW-1096  Add RFC6265 compliant cookie validation and correct quoting to the cookie for a backward compatible behavior\n\nRFC6265 (Section 4.1 Set-Cookie) states that Servers SHOULD NOT send\nSet-Cookie headers that fail to conform the defined grammer.\nFor example, cookie value should be US-ASCII characters excluding\nCTLs, whitespace, double quote, comma, semicolon, and backslash.\n\nPorting validation logics for cookie value, path and domain attributes\nfrom org.apache.tomcat.util.http.Rfc6265CookieProcessor in Tomcat 8.x.\n\nUtility methods and static constants are ported from JBossWeb/Tomcat\ncode to restore Set-Cookie format and behavior in EAP 6 (JBossWeb).\n\nThis automatically quotes cookie value, path and domain attributes when\nthese attributes contain any seprarator characters defined in old cookie\nspecification RFC2109.\n\nThis behavior can be disabled when UndertowOptions.ENABLE_RFC6265_COOKIE_VALIDATION\nis set to true and using RFC6265 Cookie validation.\n\n", "diff": ["diff --git a/core/src/main/java/io/undertow/UndertowMessages.java b/core/src/main/java/io/undertow/UndertowMessages.java\nindex e49acc15f..972f8e30d 100644\n--- a/core/src/main/java/io/undertow/UndertowMessages.java\n+++ b/core/src/main/java/io/undertow/UndertowMessages.java\n@@ -528,4 +528,20 @@ public interface UndertowMessages {\n \n     @Message(id = 167, value = \"More than one host header in request\")\n     IOException moreThanOneHostHeader();\n+\n+    @Message(id = 168, value = \"An invalid character [ASCII code: %s] was present in the cookie value\")\n+    IllegalArgumentException invalidCookieValue(String value);\n+\n+    @Message(id = 169, value = \"An invalid domain [%s] was specified for this cookie\")\n+    IllegalArgumentException invalidCookieDomain(String value);\n+\n+    @Message(id = 170, value = \"An invalid path [%s] was specified for this cookie\")\n+    IllegalArgumentException invalidCookiePath(String value);\n+\n+    @Message(id = 173, value = \"An invalid control character [%s] was present in the cookie value or attribute\")\n+    IllegalArgumentException invalidControlCharacter(String value);\n+\n+    @Message(id = 174, value = \"An invalid escape character in cookie value\")\n+    IllegalArgumentException invalidEscapeCharacter();\n+\n }\n", "diff --git a/core/src/main/java/io/undertow/UndertowOptions.java b/core/src/main/java/io/undertow/UndertowOptions.java\nindex 65ecaaa26..598428d42 100644\n--- a/core/src/main/java/io/undertow/UndertowOptions.java\n+++ b/core/src/main/java/io/undertow/UndertowOptions.java\n@@ -181,6 +181,15 @@ public class UndertowOptions {\n      */\n     public static final Option<Boolean> ALLOW_EQUALS_IN_COOKIE_VALUE = Option.simple(UndertowOptions.class, \"ALLOW_EQUALS_IN_COOKIE_VALUE\", Boolean.class);\n \n+    /**\n+     * If this is true then Undertow will enable RFC6265 compliant cookie validation for Set-Cookie header instead of legacy backward compatible behavior.\n+     *\n+     * default is false\n+     */\n+    public static final Option<Boolean> ENABLE_RFC6265_COOKIE_VALIDATION = Option.simple(UndertowOptions.class, \"ENABLE_RFC6265_COOKIE_VALIDATION\", Boolean.class);\n+\n+    public static final boolean DEFAULT_ENABLE_RFC6265_COOKIE_VALIDATION = false;\n+\n     /**\n      * If we should attempt to use SPDY for HTTPS connections.\n      *\n", "diff --git a/core/src/main/java/io/undertow/server/Connectors.java b/core/src/main/java/io/undertow/server/Connectors.java\nindex 2bf2d9b82..9573feb37 100644\n--- a/core/src/main/java/io/undertow/server/Connectors.java\n+++ b/core/src/main/java/io/undertow/server/Connectors.java\n@@ -27,6 +27,7 @@ import io.undertow.util.HeaderMap;\n import io.undertow.util.HeaderValues;\n import io.undertow.util.Headers;\n import io.undertow.util.HttpString;\n+import io.undertow.util.LegacyCookieSupport;\n import io.undertow.util.ParameterLimitException;\n import io.undertow.util.StatusCodes;\n import io.undertow.util.URLUtils;\n@@ -92,9 +93,10 @@ public class Connectors {\n      */\n     public static void flattenCookies(final HttpServerExchange exchange) {\n         Map<String, Cookie> cookies = exchange.getResponseCookiesInternal();\n+        boolean enableRfc6265Validation = exchange.getConnection().getUndertowOptions().get(UndertowOptions.ENABLE_RFC6265_COOKIE_VALIDATION, UndertowOptions.DEFAULT_ENABLE_RFC6265_COOKIE_VALIDATION);\n         if (cookies != null) {\n             for (Map.Entry<String, Cookie> entry : cookies.entrySet()) {\n-                exchange.getResponseHeaders().add(Headers.SET_COOKIE, getCookieString(entry.getValue()));\n+                exchange.getResponseHeaders().add(Headers.SET_COOKIE, getCookieString(entry.getValue(), enableRfc6265Validation));\n             }\n         }\n     }\n@@ -145,13 +147,17 @@ public class Connectors {\n         exchange.resetRequestChannel();\n     }\n \n-    private static String getCookieString(final Cookie cookie) {\n-        switch (cookie.getVersion()) {\n-            case 0:\n-                return addVersion0ResponseCookieToExchange(cookie);\n-            case 1:\n-            default:\n-                return addVersion1ResponseCookieToExchange(cookie);\n+    private static String getCookieString(final Cookie cookie, boolean enableRfc6265Validation) {\n+        if(enableRfc6265Validation) {\n+            return addRfc6265ResponseCookieToExchange(cookie);\n+        } else {\n+            switch (LegacyCookieSupport.adjustedCookieVersion(cookie)) {\n+                case 0:\n+                    return addVersion0ResponseCookieToExchange(cookie);\n+                case 1:\n+                default:\n+                    return addVersion1ResponseCookieToExchange(cookie);\n+            }\n         }\n     }\n \n@@ -159,18 +165,73 @@ public class Connectors {\n         exchange.setRequestStartTime(System.nanoTime());\n     }\n \n-    private static String addVersion0ResponseCookieToExchange(final Cookie cookie) {\n+    private static String addRfc6265ResponseCookieToExchange(final Cookie cookie) {\n         final StringBuilder header = new StringBuilder(cookie.getName());\n         header.append(\"=\");\n         header.append(cookie.getValue());\n+        if (cookie.getPath() != null) {\n+            header.append(\"; Path=\");\n+            header.append(cookie.getPath());\n+        }\n+        if (cookie.getDomain() != null) {\n+            header.append(\"; Domain=\");\n+            header.append(cookie.getDomain());\n+        }\n+        if (cookie.isDiscard()) {\n+            header.append(\"; Discard\");\n+        }\n+        if (cookie.isSecure()) {\n+            header.append(\"; Secure\");\n+        }\n+        if (cookie.isHttpOnly()) {\n+            header.append(\"; HttpOnly\");\n+        }\n+        if (cookie.getMaxAge() != null) {\n+            if (cookie.getMaxAge() >= 0) {\n+                header.append(\"; Max-Age=\");\n+                header.append(cookie.getMaxAge());\n+            }\n+            // Microsoft IE and Microsoft Edge don't understand Max-Age so send\n+            // expires as well. Without this, persistent cookies fail with those\n+            // browsers. They do understand Expires, even with V1 cookies.\n+            // So, we add Expires header when Expires is not explicitly specified.\n+            if (cookie.getExpires() == null) {\n+                if (cookie.getMaxAge() == 0) {\n+                    Date expires = new Date();\n+                    expires.setTime(0);\n+                    header.append(\"; Expires=\");\n+                    header.append(DateUtils.toOldCookieDateString(expires));\n+                } else if (cookie.getMaxAge() > 0) {\n+                    Date expires = new Date();\n+                    expires.setTime(expires.getTime() + cookie.getMaxAge() * 1000L);\n+                    header.append(\"; Expires=\");\n+                    header.append(DateUtils.toOldCookieDateString(expires));\n+                }\n+            }\n+        }\n+        if (cookie.getExpires() != null) {\n+            header.append(\"; Expires=\");\n+            header.append(DateUtils.toDateString(cookie.getExpires()));\n+        }\n+        if (cookie.getComment() != null && !cookie.getComment().isEmpty()) {\n+            header.append(\"; Comment=\");\n+            header.append(cookie.getComment());\n+        }\n+        return header.toString();\n+    }\n+\n+    private static String addVersion0ResponseCookieToExchange(final Cookie cookie) {\n+        final StringBuilder header = new StringBuilder(cookie.getName());\n+        header.append(\"=\");\n+        LegacyCookieSupport.maybeQuote(header, cookie.getValue());\n \n         if (cookie.getPath() != null) {\n             header.append(\"; path=\");\n-            header.append(cookie.getPath());\n+            LegacyCookieSupport.maybeQuote(header, cookie.getPath());\n         }\n         if (cookie.getDomain() != null) {\n             header.append(\"; domain=\");\n-            header.append(cookie.getDomain());\n+            LegacyCookieSupport.maybeQuote(header, cookie.getDomain());\n         }\n         if (cookie.isSecure()) {\n             header.append(\"; secure\");\n@@ -206,15 +267,15 @@ public class Connectors {\n \n         final StringBuilder header = new StringBuilder(cookie.getName());\n         header.append(\"=\");\n-        header.append(cookie.getValue());\n+        LegacyCookieSupport.maybeQuote(header, cookie.getValue());\n         header.append(\"; Version=1\");\n         if (cookie.getPath() != null) {\n             header.append(\"; Path=\");\n-            header.append(cookie.getPath());\n+            LegacyCookieSupport.maybeQuote(header, cookie.getPath());\n         }\n         if (cookie.getDomain() != null) {\n             header.append(\"; Domain=\");\n-            header.append(cookie.getDomain());\n+            LegacyCookieSupport.maybeQuote(header, cookie.getDomain());\n         }\n         if (cookie.isDiscard()) {\n             header.append(\"; Discard\");\n@@ -230,6 +291,23 @@ public class Connectors {\n                 header.append(\"; Max-Age=\");\n                 header.append(cookie.getMaxAge());\n             }\n+            // Microsoft IE and Microsoft Edge don't understand Max-Age so send\n+            // expires as well. Without this, persistent cookies fail with those\n+            // browsers. They do understand Expires, even with V1 cookies.\n+            // So, we add Expires header when Expires is not explicitly specified.\n+            if (cookie.getExpires() == null) {\n+                if (cookie.getMaxAge() == 0) {\n+                    Date expires = new Date();\n+                    expires.setTime(0);\n+                    header.append(\"; Expires=\");\n+                    header.append(DateUtils.toOldCookieDateString(expires));\n+                } else if (cookie.getMaxAge() > 0) {\n+                    Date expires = new Date();\n+                    expires.setTime(expires.getTime() + cookie.getMaxAge() * 1000L);\n+                    header.append(\"; Expires=\");\n+                    header.append(DateUtils.toOldCookieDateString(expires));\n+                }\n+            }\n         }\n         if (cookie.getExpires() != null) {\n             header.append(\"; Expires=\");\n@@ -237,7 +315,7 @@ public class Connectors {\n         }\n         if (cookie.getComment() != null && !cookie.getComment().isEmpty()) {\n             header.append(\"; Comment=\");\n-            header.append(cookie.getComment());\n+            LegacyCookieSupport.maybeQuote(header, cookie.getComment());\n         }\n         return header.toString();\n     }\n", "diff --git a/core/src/main/java/io/undertow/server/HttpServerExchange.java b/core/src/main/java/io/undertow/server/HttpServerExchange.java\nindex 037d8c191..ea4f3e4e2 100644\n--- a/core/src/main/java/io/undertow/server/HttpServerExchange.java\n+++ b/core/src/main/java/io/undertow/server/HttpServerExchange.java\n@@ -45,6 +45,7 @@ import io.undertow.util.HttpString;\n import io.undertow.util.Methods;\n import io.undertow.util.NetworkUtils;\n import io.undertow.util.Protocols;\n+import io.undertow.util.Rfc6265CookieSupport;\n import io.undertow.util.StatusCodes;\n import org.jboss.logging.Logger;\n import org.xnio.Buffers;\n@@ -1120,6 +1121,17 @@ public final class HttpServerExchange extends AbstractAttachable {\n      * @param cookie The cookie\n      */\n     public HttpServerExchange setResponseCookie(final Cookie cookie) {\n+        if(getConnection().getUndertowOptions().get(UndertowOptions.ENABLE_RFC6265_COOKIE_VALIDATION, UndertowOptions.DEFAULT_ENABLE_RFC6265_COOKIE_VALIDATION)) {\n+            if (cookie.getValue() != null && !cookie.getValue().isEmpty()) {\n+                Rfc6265CookieSupport.validateCookieValue(cookie.getValue());\n+            }\n+            if (cookie.getPath() != null && !cookie.getPath().isEmpty()) {\n+                Rfc6265CookieSupport.validatePath(cookie.getPath());\n+            }\n+            if (cookie.getDomain() != null && !cookie.getDomain().isEmpty()) {\n+                Rfc6265CookieSupport.validateDomain(cookie.getDomain());\n+            }\n+        }\n         if (responseCookies == null) {\n             responseCookies = new TreeMap<>(); //hashmap is slow to allocate in JDK7\n         }\n", "diff --git a/core/src/main/java/io/undertow/util/DateUtils.java b/core/src/main/java/io/undertow/util/DateUtils.java\nindex f4f4a5160..bf1460a12 100644\n--- a/core/src/main/java/io/undertow/util/DateUtils.java\n+++ b/core/src/main/java/io/undertow/util/DateUtils.java\n@@ -74,10 +74,8 @@ public class DateUtils {\n \n     private static final String OLD_COOKIE_PATTERN = \"EEE, dd-MMM-yyyy HH:mm:ss z\";\n \n-\n     private static final String COMMON_LOG_PATTERN = \"[dd/MMM/yyyy:HH:mm:ss Z]\";\n \n-\n     private static final ThreadLocal<SimpleDateFormat> COMMON_LOG_PATTERN_FORMAT = new ThreadLocal<SimpleDateFormat>() {\n         @Override\n         protected SimpleDateFormat initialValue() {\n@@ -86,6 +84,15 @@ public class DateUtils {\n         }\n     };\n \n+    private static final ThreadLocal<SimpleDateFormat> OLD_COOKIE_FORMAT = new ThreadLocal<SimpleDateFormat>() {\n+        @Override\n+        protected SimpleDateFormat initialValue() {\n+            SimpleDateFormat df = new SimpleDateFormat(OLD_COOKIE_PATTERN, LOCALE_US);\n+            df.setTimeZone(GMT_ZONE);\n+            return df;\n+        }\n+    };\n+\n     /**\n      * Converts a date to a format suitable for use in a HTTP request\n      *\n@@ -103,9 +110,7 @@ public class DateUtils {\n \n \n     public static String toOldCookieDateString(final Date date) {\n-        SimpleDateFormat dateFormat = new SimpleDateFormat(OLD_COOKIE_PATTERN, LOCALE_US);\n-        dateFormat.setTimeZone(GMT_ZONE);\n-        return dateFormat.format(date);\n+        return OLD_COOKIE_FORMAT.get().format(date);\n     }\n \n     public static String toCommonLogFormat(final Date date) {\n", "diff --git a/core/src/main/java/io/undertow/util/LegacyCookieSupport.java b/core/src/main/java/io/undertow/util/LegacyCookieSupport.java\nnew file mode 100644\nindex 000000000..5db962390\n--- /dev/null\n+++ b/core/src/main/java/io/undertow/util/LegacyCookieSupport.java\n@@ -0,0 +1,280 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+\n+package io.undertow.util;\n+\n+import io.undertow.UndertowMessages;\n+import io.undertow.server.handlers.Cookie;\n+\n+/**\n+ * Class that contains static constants and utility methods for legacy Set-Cookie format.\n+ * Porting from JBossWeb and Tomcat code.\n+ *\n+ * Note that in general we do not use system properties for configuration, however as these are\n+ * legacy options that are not widely used an exception has been made in this case.\n+ *\n+ */\n+public final class LegacyCookieSupport {\n+\n+    // --------------------------------------------------------------- Constants\n+\n+\n+    /**\n+     * If true, separators that are not explicitly dis-allowed by the v0 cookie\n+     * spec but are disallowed by the HTTP spec will be allowed in v0 cookie\n+     * names and values. These characters are: \\\"()/:<=>?@[\\\\]{} Note that the\n+     * inclusion of / depend on the value of {@link #FWD_SLASH_IS_SEPARATOR}.\n+     *\n+     * Defaults to false.\n+     */\n+    private static final boolean ALLOW_HTTP_SEPARATORS_IN_V0 = Boolean.getBoolean(\"io.undertow.legacy.cookie.ALLOW_HTTP_SEPARATORS_IN_V0\");\n+\n+\n+    /**\n+     * If set to true, the <code>/</code> character will be treated as a\n+     * separator. Default is false.\n+     */\n+    private static final boolean FWD_SLASH_IS_SEPARATOR = Boolean.getBoolean(\"io.undertow.legacy.cookie.FWD_SLASH_IS_SEPARATOR\");\n+\n+    /**\n+     * The list of separators that apply to version 0 cookies. To quote the\n+     * spec, these are comma, semi-colon and white-space. The HTTP spec\n+     * definition of linear white space is [CRLF] 1*( SP | HT )\n+     */\n+    private static final char[] V0_SEPARATORS = {',', ';', ' ', '\\t'};\n+    private static final boolean[] V0_SEPARATOR_FLAGS = new boolean[128];\n+\n+    /**\n+     * The list of separators that apply to version 1 cookies. This may or may\n+     * not include '/' depending on the setting of\n+     * {@link #FWD_SLASH_IS_SEPARATOR}.\n+     */\n+    private static final char[] HTTP_SEPARATORS;\n+    private static final boolean[] HTTP_SEPARATOR_FLAGS = new boolean[128];\n+\n+    static {\n+        /*\n+        Excluding the '/' char by default violates the RFC, but\n+        it looks like a lot of people put '/'\n+        in unquoted values: '/': ; //47\n+        '\\t':9 ' ':32 '\\\"':34 '(':40 ')':41 ',':44 ':':58 ';':59 '<':60\n+        '=':61 '>':62 '?':63 '@':64 '[':91 '\\\\':92 ']':93 '{':123 '}':125\n+        */\n+        if (FWD_SLASH_IS_SEPARATOR) {\n+            HTTP_SEPARATORS = new char[]{'\\t', ' ', '\\\"', '(', ')', ',', '/',\n+                    ':', ';', '<', '=', '>', '?', '@', '[', '\\\\', ']', '{', '}'};\n+        } else {\n+            HTTP_SEPARATORS = new char[]{'\\t', ' ', '\\\"', '(', ')', ',',\n+                    ':', ';', '<', '=', '>', '?', '@', '[', '\\\\', ']', '{', '}'};\n+        }\n+        for (int i = 0; i < 128; i++) {\n+            V0_SEPARATOR_FLAGS[i] = false;\n+            HTTP_SEPARATOR_FLAGS[i] = false;\n+        }\n+        for (char V0_SEPARATOR : V0_SEPARATORS) {\n+            V0_SEPARATOR_FLAGS[V0_SEPARATOR] = true;\n+        }\n+        for (char HTTP_SEPARATOR : HTTP_SEPARATORS) {\n+            HTTP_SEPARATOR_FLAGS[HTTP_SEPARATOR] = true;\n+        }\n+    }\n+\n+    // ----------------------------------------------------------------- Methods\n+\n+    /**\n+     * Returns true if the byte is a separator as defined by V0 of the cookie\n+     * spec.\n+     */\n+    private static boolean isV0Separator(final char c) {\n+        if (c < 0x20 || c >= 0x7f) {\n+            if (c != 0x09) {\n+                throw UndertowMessages.MESSAGES.invalidControlCharacter(Integer.toString(c));\n+            }\n+        }\n+\n+        return V0_SEPARATOR_FLAGS[c];\n+    }\n+\n+    private static boolean isV0Token(String value) {\n+        if( value==null) return false;\n+\n+        int i = 0;\n+        int len = value.length();\n+\n+        if (alreadyQuoted(value)) {\n+            i++;\n+            len--;\n+        }\n+\n+        for (; i < len; i++) {\n+            char c = value.charAt(i);\n+\n+            if (isV0Separator(c))\n+                return true;\n+        }\n+        return false;\n+    }\n+\n+    /**\n+     * Returns true if the byte is a separator as defined by V1 of the cookie\n+     * spec, RFC2109.\n+     * @throws IllegalArgumentException if a control character was supplied as\n+     *         input\n+     */\n+    private static boolean isHttpSeparator(final char c) {\n+        if (c < 0x20 || c >= 0x7f) {\n+            if (c != 0x09) {\n+                throw UndertowMessages.MESSAGES.invalidControlCharacter(Integer.toString(c));\n+            }\n+        }\n+\n+        return HTTP_SEPARATOR_FLAGS[c];\n+    }\n+\n+    private static boolean isHttpToken(String value) {\n+        if( value==null) return false;\n+\n+        int i = 0;\n+        int len = value.length();\n+\n+        if (alreadyQuoted(value)) {\n+            i++;\n+            len--;\n+        }\n+\n+        for (; i < len; i++) {\n+            char c = value.charAt(i);\n+\n+            if (isHttpSeparator(c))\n+                return true;\n+        }\n+        return false;\n+    }\n+\n+    private static boolean alreadyQuoted(String value) {\n+        if (value==null || value.length() < 2) return false;\n+        return (value.charAt(0)=='\\\"' && value.charAt(value.length()-1)=='\\\"');\n+    }\n+\n+    /**\n+     * Quotes values if required.\n+     * @param buf\n+     * @param value\n+     */\n+    public static void maybeQuote(StringBuilder buf, String value) {\n+        if (value==null || value.length()==0) {\n+            buf.append(\"\\\"\\\"\");\n+        } else if (alreadyQuoted(value)) {\n+            buf.append('\"');\n+            buf.append(escapeDoubleQuotes(value,1,value.length()-1));\n+            buf.append('\"');\n+        } else if ((isHttpToken(value) && !ALLOW_HTTP_SEPARATORS_IN_V0) ||\n+                (isV0Token(value) && ALLOW_HTTP_SEPARATORS_IN_V0)) {\n+            buf.append('\"');\n+            buf.append(escapeDoubleQuotes(value,0,value.length()));\n+            buf.append('\"');\n+        } else {\n+            buf.append(value);\n+        }\n+    }\n+\n+    /**\n+     * Escapes any double quotes in the given string.\n+     *\n+     * @param s the input string\n+     * @param beginIndex start index inclusive\n+     * @param endIndex exclusive\n+     * @return The (possibly) escaped string\n+     */\n+    private static String escapeDoubleQuotes(String s, int beginIndex, int endIndex) {\n+\n+        if (s == null || s.length() == 0 || s.indexOf('\"') == -1) {\n+            return s;\n+        }\n+\n+        StringBuilder b = new StringBuilder();\n+        for (int i = beginIndex; i < endIndex; i++) {\n+            char c = s.charAt(i);\n+            if (c == '\\\\' ) {\n+                b.append(c);\n+                //ignore the character after an escape, just append it\n+                if (++i>=endIndex) throw UndertowMessages.MESSAGES.invalidEscapeCharacter();\n+                b.append(s.charAt(i));\n+            } else if (c == '\"')\n+                b.append('\\\\').append('\"');\n+            else\n+                b.append(c);\n+        }\n+\n+        return b.toString();\n+    }\n+\n+    public static int adjustedCookieVersion(Cookie cookie) {\n+\n+        /*\n+         * The spec allows some latitude on when to send the version attribute\n+         * with a Set-Cookie header. To be nice to clients, we'll make sure the\n+         * version attribute is first. That means checking the various things\n+         * that can cause us to switch to a v1 cookie first.\n+         *_\n+         * Note that by checking for tokens we will also throw an exception if a\n+         * control character is encountered.\n+         */\n+\n+        int version = cookie.getVersion();\n+\n+        String value = cookie.getValue();\n+        String path = cookie.getPath();\n+        String domain = cookie.getDomain();\n+        String comment = cookie.getComment();\n+\n+        // If it is v0, check if we need to switch\n+        if (version == 0 &&\n+                (!ALLOW_HTTP_SEPARATORS_IN_V0 && isHttpToken(value) ||\n+                        ALLOW_HTTP_SEPARATORS_IN_V0 && isV0Token(value))) {\n+            // HTTP token in value - need to use v1\n+            version = 1;\n+        }\n+\n+        if (version == 0 && comment != null) {\n+            // Using a comment makes it a v1 cookie\n+            version = 1;\n+        }\n+\n+        if (version == 0 &&\n+                (!ALLOW_HTTP_SEPARATORS_IN_V0 && isHttpToken(path) ||\n+                        ALLOW_HTTP_SEPARATORS_IN_V0 && isV0Token(path))) {\n+            // HTTP token in path - need to use v1\n+            version = 1;\n+        }\n+\n+        if (version == 0 &&\n+                (!ALLOW_HTTP_SEPARATORS_IN_V0 && isHttpToken(domain) ||\n+                        ALLOW_HTTP_SEPARATORS_IN_V0 && isV0Token(domain))) {\n+            // HTTP token in domain - need to use v1\n+            version = 1;\n+        }\n+\n+        return version;\n+    }\n+\n+    // ------------------------------------------------------------- Constructor\n+    private LegacyCookieSupport() {\n+        // Utility class. Don't allow instances to be created.\n+    }\n+}\n", "diff --git a/core/src/main/java/io/undertow/util/Rfc6265CookieSupport.java b/core/src/main/java/io/undertow/util/Rfc6265CookieSupport.java\nnew file mode 100644\nindex 000000000..4e51c5f30\n--- /dev/null\n+++ b/core/src/main/java/io/undertow/util/Rfc6265CookieSupport.java\n@@ -0,0 +1,99 @@\n+/*\n+ *  Licensed to the Apache Software Foundation (ASF) under one or more\n+ *  contributor license agreements.  See the NOTICE file distributed with\n+ *  this work for additional information regarding copyright ownership.\n+ *  The ASF licenses this file to You under the Apache License, Version 2.0\n+ *  (the \"License\"); you may not use this file except in compliance with\n+ *  the License.  You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ */\n+package io.undertow.util;\n+\n+import io.undertow.UndertowMessages;\n+import java.util.BitSet;\n+\n+/**\n+ * Class that contains utility methods for dealing with RFC6265 Cookies.\n+ *\n+ */\n+public final class Rfc6265CookieSupport {\n+\n+    private static final BitSet domainValid = new BitSet(128);\n+\n+    static {\n+        for (char c = '0'; c <= '9'; c++) {\n+            domainValid.set(c);\n+        }\n+        for (char c = 'a'; c <= 'z'; c++) {\n+            domainValid.set(c);\n+        }\n+        for (char c = 'A'; c <= 'Z'; c++) {\n+            domainValid.set(c);\n+        }\n+        domainValid.set('.');\n+        domainValid.set('-');\n+    }\n+\n+    public static void validateCookieValue(String value) {\n+        int start = 0;\n+        int end = value.length();\n+\n+        if (end > 1 && value.charAt(0) == '\"' && value.charAt(end - 1) == '\"') {\n+            start = 1;\n+            end--;\n+        }\n+\n+        char[] chars = value.toCharArray();\n+        for (int i = start; i < end; i++) {\n+            char c = chars[i];\n+            if (c < 0x21 || c == 0x22 || c == 0x2c || c == 0x3b || c == 0x5c || c == 0x7f) {\n+                throw UndertowMessages.MESSAGES.invalidCookieValue(Integer.toString(c));\n+            }\n+        }\n+    }\n+\n+    public static void validateDomain(String domain) {\n+        int i = 0;\n+        int prev = -1;\n+        int cur = -1;\n+        char[] chars = domain.toCharArray();\n+        while (i < chars.length) {\n+            prev = cur;\n+            cur = chars[i];\n+            if (!domainValid.get(cur)) {\n+                throw UndertowMessages.MESSAGES.invalidCookieDomain(domain);\n+            }\n+            // labels must start with a letter or number\n+            if ((prev == '.' || prev == -1) && (cur == '.' || cur == '-')) {\n+                throw UndertowMessages.MESSAGES.invalidCookieDomain(domain);\n+            }\n+            // labels must end with a letter or number\n+            if (prev == '-' && cur == '.') {\n+                throw UndertowMessages.MESSAGES.invalidCookieDomain(domain);\n+            }\n+            i++;\n+        }\n+        // domain must end with a label\n+        if (cur == '.' || cur == '-') {\n+            throw UndertowMessages.MESSAGES.invalidCookieDomain(domain);\n+        }\n+    }\n+\n+    public static void validatePath(String path) {\n+        char[] chars = path.toCharArray();\n+\n+        for (int i = 0; i < chars.length; i++) {\n+            char ch = chars[i];\n+            if (ch < 0x20 || ch > 0x7E || ch == ';') {\n+                throw UndertowMessages.MESSAGES.invalidCookiePath(path);\n+            }\n+        }\n+    }\n+}\n", "diff --git a/core/src/test/java/io/undertow/util/CookiesTestCase.java b/core/src/test/java/io/undertow/util/CookiesTestCase.java\nindex 7725f65d6..8e3e174f1 100644\n--- a/core/src/test/java/io/undertow/util/CookiesTestCase.java\n+++ b/core/src/test/java/io/undertow/util/CookiesTestCase.java\n@@ -249,4 +249,62 @@ public class CookiesTestCase {\n         Assert.assertEquals(1, cookie.getVersion());\n         Assert.assertEquals(\"/\", cookie.getPath());\n     }\n+\n+    // RFC6265 allows US-ASCII characters excluding CTLs, whitespace,\n+    // double quote, comma, semicolon and backslash as cookie value.\n+    // This does not change even if value is quoted.\n+    @Test(expected = IllegalArgumentException.class)\n+    public void testInvalidRfc6265CookieInValue() {\n+        // whitespace is not allowed\n+        Cookie cookie = Cookies.parseSetCookieHeader(\"CUSTOMER=WILE_ E_COYOTE; path=/example; domain=example.com\");\n+        Rfc6265CookieSupport.validateCookieValue(cookie.getValue());\n+    }\n+    @Test(expected = IllegalArgumentException.class)\n+    public void testInvalidRfc6265CookieInValue1() {\n+        // whitespace is not allowed\n+        Cookie cookie = Cookies.parseSetCookieHeader(\"CUSTOMER=\\\"WILE_ E_COYOTE\\\"; path=/example; domain=example.com\");\n+        Rfc6265CookieSupport.validateCookieValue(cookie.getValue());\n+    }\n+    @Test(expected = IllegalArgumentException.class)\n+    public void testInvalidRfc6265CookieInValue2() {\n+        // double quote si not allowed\n+        Cookie cookie = Cookies.parseSetCookieHeader(\"CUSTOMER=\\\"WILE_\\\\\\\"E_COYOTE\\\"; path=/example; domain=example.com\");\n+        Rfc6265CookieSupport.validateCookieValue(cookie.getValue());\n+    }\n+    @Test(expected = IllegalArgumentException.class)\n+    public void testInvalidRfc6265CookieInValue3() {\n+        // comma is not allowed\n+        Cookie cookie = Cookies.parseSetCookieHeader(\"CUSTOMER=\\\"WILE_,E_COYOTE\\\"; path=/example; domain=example.com\");\n+        Rfc6265CookieSupport.validateCookieValue(cookie.getValue());\n+    }\n+    @Test(expected = IllegalArgumentException.class)\n+    public void testInvalidRfc6265CookieInValue4() {\n+        // semicolon is not allowed\n+        Cookie cookie = Cookies.parseSetCookieHeader(\"CUSTOMER=\\\"WILE_;E_COYOTE\\\"; path=/example; domain=example.com\");\n+        Rfc6265CookieSupport.validateCookieValue(cookie.getValue());\n+    }\n+    @Test(expected = IllegalArgumentException.class)\n+    public void testInvalidRfc6265CookieInValue5() {\n+        /// backslash is not allowed\n+        Cookie cookie = Cookies.parseSetCookieHeader(\"CUSTOMER=\\\"WILE_\\\\E_COYOTE\\\"; path=/example; domain=example.com\");\n+        Rfc6265CookieSupport.validateCookieValue(cookie.getValue());\n+    }\n+\n+    // RFC6265 allows any CHAR except CTLs or \";\" as cookie path\n+    @Test(expected = IllegalArgumentException.class)\n+    public void testInvalidRfc6265CookieInPath() {\n+        Cookie cookie = Cookies.parseSetCookieHeader(\"CUSTOMER=WILE_E_COYOTE; path=\\\"/ex;ample\\\"; domain=example.com\");\n+        Rfc6265CookieSupport.validateCookieValue(cookie.getValue());\n+        Rfc6265CookieSupport.validatePath(cookie.getPath());\n+        Rfc6265CookieSupport.validateDomain(cookie.getDomain());\n+    }\n+\n+    @Test(expected = IllegalArgumentException.class)\n+    public void testInvalidRfc6265CookieInDomain() {\n+        Cookie cookie = Cookies.parseSetCookieHeader(\"CUSTOMER=WILE_E_COYOTE; path=/example; domain=\\\"ex;ample.com\\\"\");\n+        Rfc6265CookieSupport.validateCookieValue(cookie.getValue());\n+        Rfc6265CookieSupport.validatePath(cookie.getPath());\n+        Rfc6265CookieSupport.validateDomain(cookie.getDomain());\n+    }\n+\n }\n"], "label": 0, "cve": "CVE-2017-2670", "rank": 4, "commit": "d04a8068ef442b93bf91d1f432bb27328f8d2fe4", "cve_attention_tokens": ["thread"]}
{"cve_desc": "Rejected reason: DO NOT USE THIS CANDIDATE NUMBER. ConsultIDs: CVE-2019-11358. Reason: This candidate is a duplicate of CVE-2019-11358. Notes: All CVE users should reference CVE-2019-11358 instead of this candidate. All references and descriptions in this candidate have been removed to prevent accidental usage", "commit_msg": "Docs: add gitter badge to README.md\n\nClose gh-4138\n", "diff": ["diff --git a/README.md b/README.md\nindex 9d3e6262..efc2b3ba 100644\n--- a/README.md\n+++ b/README.md\n@@ -3,6 +3,8 @@\n \n [![FOSSA Status](https://app.fossa.io/api/projects/git%2Bgithub.com%2Fjquery%2Fjquery.svg?type=shield)](https://app.fossa.io/projects/git%2Bgithub.com%2Fjquery%2Fjquery?ref=badge_shield)\n \n+[![Gitter](https://badges.gitter.im/jquery/jquery.svg)](https://gitter.im/jquery/jquery?utm_source=badge&utm_medium=badge&utm_campaign=pr-badge)\n+\n Contribution Guides\n --------------------------------------\n \n"], "label": 0, "cve": "CVE-2019-5428", "rank": 21, "commit": "7869f83ddd5a3156a358284cbef6837b5e7a2a62", "cve_attention_tokens": []}
{"cve_desc": "An issue was discovered in Pivotal Spring Security before 3.2.10, 4.1.x before 4.1.4, and 4.2.x before 4.2.1. Spring Security does not consider URL path parameters when processing security constraints. By adding a URL path parameter with an encoded \"/\" to a request, an attacker may be able to bypass a security constraint. The root cause of this issue is a lack of clarity regarding the handling of path parameters in the Servlet Specification. Some Servlet containers include path parameters in the value returned for getPathInfo() and some do not. Spring Security uses the value returned by getPathInfo() as part of the process of mapping requests to security constraints. The unexpected presence of path parameters can cause a constraint to be bypassed. Users of Apache Tomcat (all current versions) are not affected by this vulnerability since Tomcat follows the guidance previously provided by the Servlet Expert group and strips path parameters from the value returned by getContextPath(), getServletPath(), and getPathInfo(). Users of other Servlet containers based on Apache Tomcat may or may not be affected depending on whether or not the handling of path parameters has been modified. Users of IBM WebSphere Application Server 8.5.x are known to be affected. Users of other containers that implement the Servlet specification may be affected.", "commit_msg": "Use BUILD-SNAPSHOT\n\nSee if this avoids the conflict resolution\n\n", "diff": ["diff --git a/acl/pom.xml b/acl/pom.xml\nindex 69711a7bb..6fde48046 100644\n--- a/acl/pom.xml\n+++ b/acl/pom.xml\n@@ -3,7 +3,7 @@\n   <modelVersion>4.0.0</modelVersion>\n   <groupId>org.springframework.security</groupId>\n   <artifactId>spring-security-acl</artifactId>\n-  <version>3.2.10.CI-SNAPSHOT</version>\n+  <version>3.2.10.BUILD-SNAPSHOT</version>\n   <name>spring-security-acl</name>\n   <description>spring-security-acl</description>\n   <url>http://spring.io/spring-security</url>\n@@ -40,7 +40,7 @@\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-core</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n", "diff --git a/aspects/pom.xml b/aspects/pom.xml\nindex 1a47bd5cc..9a0ea112f 100644\n--- a/aspects/pom.xml\n+++ b/aspects/pom.xml\n@@ -3,7 +3,7 @@\n   <modelVersion>4.0.0</modelVersion>\n   <groupId>org.springframework.security</groupId>\n   <artifactId>spring-security-aspects</artifactId>\n-  <version>3.2.10.CI-SNAPSHOT</version>\n+  <version>3.2.10.BUILD-SNAPSHOT</version>\n   <name>spring-security-aspects</name>\n   <description>spring-security-aspects</description>\n   <url>http://spring.io/spring-security</url>\n@@ -34,7 +34,7 @@\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-core</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n", "diff --git a/cas/pom.xml b/cas/pom.xml\nindex fdfd3d025..f517e2826 100644\n--- a/cas/pom.xml\n+++ b/cas/pom.xml\n@@ -3,7 +3,7 @@\n   <modelVersion>4.0.0</modelVersion>\n   <groupId>org.springframework.security</groupId>\n   <artifactId>spring-security-cas</artifactId>\n-  <version>3.2.10.CI-SNAPSHOT</version>\n+  <version>3.2.10.BUILD-SNAPSHOT</version>\n   <name>spring-security-cas</name>\n   <description>spring-security-cas</description>\n   <url>http://spring.io/spring-security</url>\n@@ -40,13 +40,13 @@\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-core</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-web</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n", "diff --git a/config/pom.xml b/config/pom.xml\nindex 08cb2871e..5db31cb0c 100644\n--- a/config/pom.xml\n+++ b/config/pom.xml\n@@ -3,7 +3,7 @@\n   <modelVersion>4.0.0</modelVersion>\n   <groupId>org.springframework.security</groupId>\n   <artifactId>spring-security-config</artifactId>\n-  <version>3.2.10.CI-SNAPSHOT</version>\n+  <version>3.2.10.BUILD-SNAPSHOT</version>\n   <name>spring-security-config</name>\n   <description>spring-security-config</description>\n   <url>http://spring.io/spring-security</url>\n@@ -40,7 +40,7 @@\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-core</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n@@ -90,28 +90,28 @@\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-aspects</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n       <optional>true</optional>\n     </dependency>\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-ldap</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n       <optional>true</optional>\n     </dependency>\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-openid</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n       <optional>true</optional>\n     </dependency>\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-web</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n       <optional>true</optional>\n     </dependency>\n@@ -356,7 +356,7 @@\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-cas</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>test</scope>\n     </dependency>\n     <dependency>\n", "diff --git a/core/pom.xml b/core/pom.xml\nindex 398bb494e..102ade8da 100644\n--- a/core/pom.xml\n+++ b/core/pom.xml\n@@ -3,7 +3,7 @@\n   <modelVersion>4.0.0</modelVersion>\n   <groupId>org.springframework.security</groupId>\n   <artifactId>spring-security-core</artifactId>\n-  <version>3.2.10.CI-SNAPSHOT</version>\n+  <version>3.2.10.BUILD-SNAPSHOT</version>\n   <name>spring-security-core</name>\n   <description>spring-security-core</description>\n   <url>http://spring.io/spring-security</url>\n", "diff --git a/crypto/pom.xml b/crypto/pom.xml\nindex b6e7d4c55..4bbeac873 100644\n--- a/crypto/pom.xml\n+++ b/crypto/pom.xml\n@@ -3,7 +3,7 @@\n   <modelVersion>4.0.0</modelVersion>\n   <groupId>org.springframework.security</groupId>\n   <artifactId>spring-security-crypto</artifactId>\n-  <version>3.2.10.CI-SNAPSHOT</version>\n+  <version>3.2.10.BUILD-SNAPSHOT</version>\n   <name>spring-security-crypto</name>\n   <description>spring-security-crypto</description>\n   <url>http://spring.io/spring-security</url>\n", "diff --git a/gradle.properties b/gradle.properties\nindex 1e9f28838..34804e636 100644\n--- a/gradle.properties\n+++ b/gradle.properties\n@@ -1 +1 @@\n-version=3.2.10.CI-SNAPSHOT\n+version=3.2.10.BUILD-SNAPSHOT\n", "diff --git a/itest/context/pom.xml b/itest/context/pom.xml\nindex 686247204..c5d22f61a 100644\n--- a/itest/context/pom.xml\n+++ b/itest/context/pom.xml\n@@ -3,7 +3,7 @@\n   <modelVersion>4.0.0</modelVersion>\n   <groupId>org.springframework.security</groupId>\n   <artifactId>itest-context</artifactId>\n-  <version>3.2.10.CI-SNAPSHOT</version>\n+  <version>3.2.10.BUILD-SNAPSHOT</version>\n   <name>itest-context</name>\n   <description>itest-context</description>\n   <url>http://spring.io/spring-security</url>\n@@ -46,7 +46,7 @@\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-core</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n@@ -125,13 +125,13 @@\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-config</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>test</scope>\n     </dependency>\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-web</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>test</scope>\n     </dependency>\n     <dependency>\n", "diff --git a/itest/web/pom.xml b/itest/web/pom.xml\nindex 3ffabd6d2..5ef38d277 100644\n--- a/itest/web/pom.xml\n+++ b/itest/web/pom.xml\n@@ -3,7 +3,7 @@\n   <modelVersion>4.0.0</modelVersion>\n   <groupId>org.springframework.security</groupId>\n   <artifactId>itest-web</artifactId>\n-  <version>3.2.10.CI-SNAPSHOT</version>\n+  <version>3.2.10.BUILD-SNAPSHOT</version>\n   <name>itest-web</name>\n   <description>itest-web</description>\n   <url>http://spring.io/spring-security</url>\n@@ -141,31 +141,31 @@\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-config</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>test</scope>\n     </dependency>\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-core</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>test</scope>\n     </dependency>\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-ldap</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>test</scope>\n     </dependency>\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-taglibs</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>test</scope>\n     </dependency>\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-web</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>test</scope>\n     </dependency>\n     <dependency>\n", "diff --git a/ldap/pom.xml b/ldap/pom.xml\nindex 7d36bd7f2..3df47e78a 100644\n--- a/ldap/pom.xml\n+++ b/ldap/pom.xml\n@@ -3,7 +3,7 @@\n   <modelVersion>4.0.0</modelVersion>\n   <groupId>org.springframework.security</groupId>\n   <artifactId>spring-security-ldap</artifactId>\n-  <version>3.2.10.CI-SNAPSHOT</version>\n+  <version>3.2.10.BUILD-SNAPSHOT</version>\n   <name>spring-security-ldap</name>\n   <description>spring-security-ldap</description>\n   <url>http://spring.io/spring-security</url>\n@@ -58,7 +58,7 @@\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-core</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n", "diff --git a/openid/pom.xml b/openid/pom.xml\nindex a776582ab..6d7b24773 100644\n--- a/openid/pom.xml\n+++ b/openid/pom.xml\n@@ -3,7 +3,7 @@\n   <modelVersion>4.0.0</modelVersion>\n   <groupId>org.springframework.security</groupId>\n   <artifactId>spring-security-openid</artifactId>\n-  <version>3.2.10.CI-SNAPSHOT</version>\n+  <version>3.2.10.BUILD-SNAPSHOT</version>\n   <name>spring-security-openid</name>\n   <description>spring-security-openid</description>\n   <url>http://spring.io/spring-security</url>\n@@ -52,13 +52,13 @@\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-core</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-web</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n", "diff --git a/remoting/pom.xml b/remoting/pom.xml\nindex 8363a63b3..9a3d2cab5 100644\n--- a/remoting/pom.xml\n+++ b/remoting/pom.xml\n@@ -3,7 +3,7 @@\n   <modelVersion>4.0.0</modelVersion>\n   <groupId>org.springframework.security</groupId>\n   <artifactId>spring-security-remoting</artifactId>\n-  <version>3.2.10.CI-SNAPSHOT</version>\n+  <version>3.2.10.BUILD-SNAPSHOT</version>\n   <name>spring-security-remoting</name>\n   <description>spring-security-remoting</description>\n   <url>http://spring.io/spring-security</url>\n@@ -40,7 +40,7 @@\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-core</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n", "diff --git a/samples/aspectj-jc/pom.xml b/samples/aspectj-jc/pom.xml\nindex a7605743a..55231c467 100644\n--- a/samples/aspectj-jc/pom.xml\n+++ b/samples/aspectj-jc/pom.xml\n@@ -3,7 +3,7 @@\n   <modelVersion>4.0.0</modelVersion>\n   <groupId>org.springframework.security</groupId>\n   <artifactId>spring-security-samples-aspectj-jc</artifactId>\n-  <version>3.2.10.CI-SNAPSHOT</version>\n+  <version>3.2.10.BUILD-SNAPSHOT</version>\n   <name>spring-security-samples-aspectj-jc</name>\n   <description>spring-security-samples-aspectj-jc</description>\n   <url>http://spring.io/spring-security</url>\n@@ -34,13 +34,13 @@\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-config</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-core</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n@@ -60,7 +60,7 @@\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-aspects</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>runtime</scope>\n     </dependency>\n     <dependency>\n", "diff --git a/samples/aspectj-xml/pom.xml b/samples/aspectj-xml/pom.xml\nindex 3f8f128c8..ea8264772 100644\n--- a/samples/aspectj-xml/pom.xml\n+++ b/samples/aspectj-xml/pom.xml\n@@ -3,7 +3,7 @@\n   <modelVersion>4.0.0</modelVersion>\n   <groupId>org.springframework.security</groupId>\n   <artifactId>spring-security-samples-aspectj-xml</artifactId>\n-  <version>3.2.10.CI-SNAPSHOT</version>\n+  <version>3.2.10.BUILD-SNAPSHOT</version>\n   <name>spring-security-samples-aspectj-xml</name>\n   <description>spring-security-samples-aspectj-xml</description>\n   <url>http://spring.io/spring-security</url>\n@@ -34,7 +34,7 @@\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-core</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n@@ -54,13 +54,13 @@\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-aspects</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>runtime</scope>\n     </dependency>\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-config</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>runtime</scope>\n     </dependency>\n     <dependency>\n", "diff --git a/samples/cas/sample-xml/pom.xml b/samples/cas/sample-xml/pom.xml\nindex 741889832..f010646e6 100644\n--- a/samples/cas/sample-xml/pom.xml\n+++ b/samples/cas/sample-xml/pom.xml\n@@ -3,7 +3,7 @@\n   <modelVersion>4.0.0</modelVersion>\n   <groupId>org.springframework.security</groupId>\n   <artifactId>spring-security-samples-cassample-xml</artifactId>\n-  <version>3.2.10.CI-SNAPSHOT</version>\n+  <version>3.2.10.BUILD-SNAPSHOT</version>\n   <packaging>war</packaging>\n   <name>spring-security-samples-cassample-xml</name>\n   <description>spring-security-samples-cassample-xml</description>\n@@ -44,13 +44,13 @@\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-cas</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-core</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n@@ -87,13 +87,13 @@\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-config</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>runtime</scope>\n     </dependency>\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-web</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>runtime</scope>\n     </dependency>\n     <dependency>\n", "diff --git a/samples/cas/server/pom.xml b/samples/cas/server/pom.xml\nindex f4df91a90..f21b80526 100644\n--- a/samples/cas/server/pom.xml\n+++ b/samples/cas/server/pom.xml\n@@ -3,7 +3,7 @@\n   <modelVersion>4.0.0</modelVersion>\n   <groupId>org.springframework.security</groupId>\n   <artifactId>spring-security-samples-casserver</artifactId>\n-  <version>3.2.10.CI-SNAPSHOT</version>\n+  <version>3.2.10.BUILD-SNAPSHOT</version>\n   <packaging>war</packaging>\n   <name>spring-security-samples-casserver</name>\n   <description>spring-security-samples-casserver</description>\n", "diff --git a/samples/concurrency-jc/pom.xml b/samples/concurrency-jc/pom.xml\nindex 22581d6e8..697700600 100644\n--- a/samples/concurrency-jc/pom.xml\n+++ b/samples/concurrency-jc/pom.xml\n@@ -3,7 +3,7 @@\n   <modelVersion>4.0.0</modelVersion>\n   <groupId>org.springframework.security</groupId>\n   <artifactId>spring-security-samples-concurrency-jc</artifactId>\n-  <version>3.2.10.CI-SNAPSHOT</version>\n+  <version>3.2.10.BUILD-SNAPSHOT</version>\n   <packaging>war</packaging>\n   <name>spring-security-samples-concurrency-jc</name>\n   <description>spring-security-samples-concurrency-jc</description>\n@@ -80,25 +80,25 @@\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-config</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-core</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-samples-messages-jc</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-web</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n", "diff --git a/samples/contacts-xml/pom.xml b/samples/contacts-xml/pom.xml\nindex 0d408246b..69d8aa061 100644\n--- a/samples/contacts-xml/pom.xml\n+++ b/samples/contacts-xml/pom.xml\n@@ -3,7 +3,7 @@\n   <modelVersion>4.0.0</modelVersion>\n   <groupId>org.springframework.security</groupId>\n   <artifactId>spring-security-samples-contacts-xml</artifactId>\n-  <version>3.2.10.CI-SNAPSHOT</version>\n+  <version>3.2.10.BUILD-SNAPSHOT</version>\n   <packaging>war</packaging>\n   <name>spring-security-samples-contacts-xml</name>\n   <description>spring-security-samples-contacts-xml</description>\n@@ -38,13 +38,13 @@\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-acl</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-core</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n@@ -141,19 +141,19 @@\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-config</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>runtime</scope>\n     </dependency>\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-taglibs</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>runtime</scope>\n     </dependency>\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-web</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>runtime</scope>\n     </dependency>\n     <dependency>\n", "diff --git a/samples/dms-xml/pom.xml b/samples/dms-xml/pom.xml\nindex 9896c5df6..45c7e2d42 100644\n--- a/samples/dms-xml/pom.xml\n+++ b/samples/dms-xml/pom.xml\n@@ -3,7 +3,7 @@\n   <modelVersion>4.0.0</modelVersion>\n   <groupId>org.springframework.security</groupId>\n   <artifactId>spring-security-samples-dms-xml</artifactId>\n-  <version>3.2.10.CI-SNAPSHOT</version>\n+  <version>3.2.10.BUILD-SNAPSHOT</version>\n   <name>spring-security-samples-dms-xml</name>\n   <description>spring-security-samples-dms-xml</description>\n   <url>http://spring.io/spring-security</url>\n@@ -34,13 +34,13 @@\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-acl</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-core</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n@@ -84,7 +84,7 @@\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-config</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>runtime</scope>\n     </dependency>\n     <dependency>\n", "diff --git a/samples/form-jc/pom.xml b/samples/form-jc/pom.xml\nindex 75db3f7dd..9b8a29181 100644\n--- a/samples/form-jc/pom.xml\n+++ b/samples/form-jc/pom.xml\n@@ -3,7 +3,7 @@\n   <modelVersion>4.0.0</modelVersion>\n   <groupId>org.springframework.security</groupId>\n   <artifactId>spring-security-samples-form-jc</artifactId>\n-  <version>3.2.10.CI-SNAPSHOT</version>\n+  <version>3.2.10.BUILD-SNAPSHOT</version>\n   <packaging>war</packaging>\n   <name>spring-security-samples-form-jc</name>\n   <description>spring-security-samples-form-jc</description>\n@@ -80,25 +80,25 @@\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-config</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-core</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-samples-messages-jc</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-web</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n", "diff --git a/samples/gae-xml/pom.xml b/samples/gae-xml/pom.xml\nindex 61375e3e9..836d646c3 100644\n--- a/samples/gae-xml/pom.xml\n+++ b/samples/gae-xml/pom.xml\n@@ -3,7 +3,7 @@\n   <modelVersion>4.0.0</modelVersion>\n   <groupId>org.springframework.security</groupId>\n   <artifactId>spring-security-samples-gae-xml</artifactId>\n-  <version>3.2.10.CI-SNAPSHOT</version>\n+  <version>3.2.10.BUILD-SNAPSHOT</version>\n   <packaging>war</packaging>\n   <name>spring-security-samples-gae-xml</name>\n   <description>spring-security-samples-gae-xml</description>\n@@ -62,13 +62,13 @@\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-core</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-web</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n@@ -129,13 +129,13 @@\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-config</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>runtime</scope>\n     </dependency>\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-taglibs</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>runtime</scope>\n     </dependency>\n     <dependency>\n", "diff --git a/samples/hellojs-jc/pom.xml b/samples/hellojs-jc/pom.xml\nindex fd46b089f..2c247388c 100644\n--- a/samples/hellojs-jc/pom.xml\n+++ b/samples/hellojs-jc/pom.xml\n@@ -3,7 +3,7 @@\n   <modelVersion>4.0.0</modelVersion>\n   <groupId>org.springframework.security</groupId>\n   <artifactId>spring-security-samples-hellojs-jc</artifactId>\n-  <version>3.2.10.CI-SNAPSHOT</version>\n+  <version>3.2.10.BUILD-SNAPSHOT</version>\n   <packaging>war</packaging>\n   <name>spring-security-samples-hellojs-jc</name>\n   <description>spring-security-samples-hellojs-jc</description>\n@@ -86,25 +86,25 @@\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-config</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-core</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-samples-messages-jc</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-web</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n", "diff --git a/samples/hellomvc-jc/pom.xml b/samples/hellomvc-jc/pom.xml\nindex 843c5717b..e033be196 100644\n--- a/samples/hellomvc-jc/pom.xml\n+++ b/samples/hellomvc-jc/pom.xml\n@@ -3,7 +3,7 @@\n   <modelVersion>4.0.0</modelVersion>\n   <groupId>org.springframework.security</groupId>\n   <artifactId>spring-security-samples-hellomvc-jc</artifactId>\n-  <version>3.2.10.CI-SNAPSHOT</version>\n+  <version>3.2.10.BUILD-SNAPSHOT</version>\n   <packaging>war</packaging>\n   <name>spring-security-samples-hellomvc-jc</name>\n   <description>spring-security-samples-hellomvc-jc</description>\n@@ -80,25 +80,25 @@\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-config</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-core</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-samples-messages-jc</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-web</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n", "diff --git a/samples/helloworld-jc/pom.xml b/samples/helloworld-jc/pom.xml\nindex d9408c5a2..7803a12fc 100644\n--- a/samples/helloworld-jc/pom.xml\n+++ b/samples/helloworld-jc/pom.xml\n@@ -3,7 +3,7 @@\n   <modelVersion>4.0.0</modelVersion>\n   <groupId>org.springframework.security</groupId>\n   <artifactId>spring-security-samples-helloworld-jc</artifactId>\n-  <version>3.2.10.CI-SNAPSHOT</version>\n+  <version>3.2.10.BUILD-SNAPSHOT</version>\n   <packaging>war</packaging>\n   <name>spring-security-samples-helloworld-jc</name>\n   <description>spring-security-samples-helloworld-jc</description>\n@@ -56,13 +56,13 @@\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-config</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-web</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n", "diff --git a/samples/inmemory-jc/pom.xml b/samples/inmemory-jc/pom.xml\nindex c5bfdd40c..79c94799a 100644\n--- a/samples/inmemory-jc/pom.xml\n+++ b/samples/inmemory-jc/pom.xml\n@@ -3,7 +3,7 @@\n   <modelVersion>4.0.0</modelVersion>\n   <groupId>org.springframework.security</groupId>\n   <artifactId>spring-security-samples-inmemory-jc</artifactId>\n-  <version>3.2.10.CI-SNAPSHOT</version>\n+  <version>3.2.10.BUILD-SNAPSHOT</version>\n   <packaging>war</packaging>\n   <name>spring-security-samples-inmemory-jc</name>\n   <description>spring-security-samples-inmemory-jc</description>\n@@ -80,25 +80,25 @@\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-config</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-core</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-samples-messages-jc</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-web</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n", "diff --git a/samples/insecure/pom.xml b/samples/insecure/pom.xml\nindex d060d9f5d..1e9bd043b 100644\n--- a/samples/insecure/pom.xml\n+++ b/samples/insecure/pom.xml\n@@ -3,7 +3,7 @@\n   <modelVersion>4.0.0</modelVersion>\n   <groupId>org.springframework.security</groupId>\n   <artifactId>spring-security-samples-insecure</artifactId>\n-  <version>3.2.10.CI-SNAPSHOT</version>\n+  <version>3.2.10.BUILD-SNAPSHOT</version>\n   <packaging>war</packaging>\n   <name>spring-security-samples-insecure</name>\n   <description>spring-security-samples-insecure</description>\n", "diff --git a/samples/insecuremvc/pom.xml b/samples/insecuremvc/pom.xml\nindex adb3d3145..45c7e5ac5 100644\n--- a/samples/insecuremvc/pom.xml\n+++ b/samples/insecuremvc/pom.xml\n@@ -3,7 +3,7 @@\n   <modelVersion>4.0.0</modelVersion>\n   <groupId>org.springframework.security</groupId>\n   <artifactId>spring-security-samples-insecuremvc</artifactId>\n-  <version>3.2.10.CI-SNAPSHOT</version>\n+  <version>3.2.10.BUILD-SNAPSHOT</version>\n   <packaging>war</packaging>\n   <name>spring-security-samples-insecuremvc</name>\n   <description>spring-security-samples-insecuremvc</description>\n@@ -80,7 +80,7 @@\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-samples-messages-jc</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n", "diff --git a/samples/jaas-xml/pom.xml b/samples/jaas-xml/pom.xml\nindex e2a255c76..53e23de25 100644\n--- a/samples/jaas-xml/pom.xml\n+++ b/samples/jaas-xml/pom.xml\n@@ -3,7 +3,7 @@\n   <modelVersion>4.0.0</modelVersion>\n   <groupId>org.springframework.security</groupId>\n   <artifactId>spring-security-samples-jaas-xml</artifactId>\n-  <version>3.2.10.CI-SNAPSHOT</version>\n+  <version>3.2.10.BUILD-SNAPSHOT</version>\n   <packaging>war</packaging>\n   <name>spring-security-samples-jaas-xml</name>\n   <description>spring-security-samples-jaas-xml</description>\n@@ -38,7 +38,7 @@\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-core</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n@@ -99,19 +99,19 @@\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-config</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>runtime</scope>\n     </dependency>\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-taglibs</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>runtime</scope>\n     </dependency>\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-web</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>runtime</scope>\n     </dependency>\n     <dependency>\n", "diff --git a/samples/jdbc-jc/pom.xml b/samples/jdbc-jc/pom.xml\nindex c0384a9a2..f4395e7be 100644\n--- a/samples/jdbc-jc/pom.xml\n+++ b/samples/jdbc-jc/pom.xml\n@@ -3,7 +3,7 @@\n   <modelVersion>4.0.0</modelVersion>\n   <groupId>org.springframework.security</groupId>\n   <artifactId>spring-security-samples-jdbc-jc</artifactId>\n-  <version>3.2.10.CI-SNAPSHOT</version>\n+  <version>3.2.10.BUILD-SNAPSHOT</version>\n   <packaging>war</packaging>\n   <name>spring-security-samples-jdbc-jc</name>\n   <description>spring-security-samples-jdbc-jc</description>\n@@ -80,25 +80,25 @@\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-config</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-core</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-samples-messages-jc</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-web</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n", "diff --git a/samples/ldap-jc/pom.xml b/samples/ldap-jc/pom.xml\nindex a541cba4b..15e5dc158 100644\n--- a/samples/ldap-jc/pom.xml\n+++ b/samples/ldap-jc/pom.xml\n@@ -3,7 +3,7 @@\n   <modelVersion>4.0.0</modelVersion>\n   <groupId>org.springframework.security</groupId>\n   <artifactId>spring-security-samples-ldap-jc</artifactId>\n-  <version>3.2.10.CI-SNAPSHOT</version>\n+  <version>3.2.10.BUILD-SNAPSHOT</version>\n   <packaging>war</packaging>\n   <name>spring-security-samples-ldap-jc</name>\n   <description>spring-security-samples-ldap-jc</description>\n@@ -116,31 +116,31 @@\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-config</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-core</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-ldap</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-samples-messages-jc</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-web</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n", "diff --git a/samples/ldap-xml/pom.xml b/samples/ldap-xml/pom.xml\nindex d0f023b21..b6fbb1e1c 100644\n--- a/samples/ldap-xml/pom.xml\n+++ b/samples/ldap-xml/pom.xml\n@@ -3,7 +3,7 @@\n   <modelVersion>4.0.0</modelVersion>\n   <groupId>org.springframework.security</groupId>\n   <artifactId>spring-security-samples-ldap-xml</artifactId>\n-  <version>3.2.10.CI-SNAPSHOT</version>\n+  <version>3.2.10.BUILD-SNAPSHOT</version>\n   <packaging>war</packaging>\n   <name>spring-security-samples-ldap-xml</name>\n   <description>spring-security-samples-ldap-xml</description>\n@@ -93,19 +93,19 @@\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-config</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>runtime</scope>\n     </dependency>\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-ldap</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>runtime</scope>\n     </dependency>\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-web</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>runtime</scope>\n     </dependency>\n     <dependency>\n", "diff --git a/samples/messages-jc/pom.xml b/samples/messages-jc/pom.xml\nindex edbd1b7b3..9a69fa20e 100644\n--- a/samples/messages-jc/pom.xml\n+++ b/samples/messages-jc/pom.xml\n@@ -3,7 +3,7 @@\n   <modelVersion>4.0.0</modelVersion>\n   <groupId>org.springframework.security</groupId>\n   <artifactId>spring-security-samples-messages-jc</artifactId>\n-  <version>3.2.10.CI-SNAPSHOT</version>\n+  <version>3.2.10.BUILD-SNAPSHOT</version>\n   <name>spring-security-samples-messages-jc</name>\n   <description>spring-security-samples-messages-jc</description>\n   <url>http://spring.io/spring-security</url>\n@@ -82,13 +82,13 @@\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-config</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-web</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n", "diff --git a/samples/openid-jc/pom.xml b/samples/openid-jc/pom.xml\nindex 519a392cb..035efa1c0 100644\n--- a/samples/openid-jc/pom.xml\n+++ b/samples/openid-jc/pom.xml\n@@ -3,7 +3,7 @@\n   <modelVersion>4.0.0</modelVersion>\n   <groupId>org.springframework.security</groupId>\n   <artifactId>spring-security-samples-openid-jc</artifactId>\n-  <version>3.2.10.CI-SNAPSHOT</version>\n+  <version>3.2.10.BUILD-SNAPSHOT</version>\n   <packaging>war</packaging>\n   <name>spring-security-samples-openid-jc</name>\n   <description>spring-security-samples-openid-jc</description>\n@@ -80,31 +80,31 @@\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-config</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-core</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-openid</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-samples-messages-jc</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-web</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n", "diff --git a/samples/openid-xml/pom.xml b/samples/openid-xml/pom.xml\nindex 50cf54c71..57228b1b8 100644\n--- a/samples/openid-xml/pom.xml\n+++ b/samples/openid-xml/pom.xml\n@@ -3,7 +3,7 @@\n   <modelVersion>4.0.0</modelVersion>\n   <groupId>org.springframework.security</groupId>\n   <artifactId>spring-security-samples-openid-xml</artifactId>\n-  <version>3.2.10.CI-SNAPSHOT</version>\n+  <version>3.2.10.BUILD-SNAPSHOT</version>\n   <packaging>war</packaging>\n   <name>spring-security-samples-openid-xml</name>\n   <description>spring-security-samples-openid-xml</description>\n@@ -38,13 +38,13 @@\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-core</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-openid</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n@@ -87,13 +87,13 @@\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-config</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>runtime</scope>\n     </dependency>\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-taglibs</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>runtime</scope>\n     </dependency>\n     <dependency>\n", "diff --git a/samples/preauth-jc/pom.xml b/samples/preauth-jc/pom.xml\nindex 9d4c20b91..92a5f2c0e 100644\n--- a/samples/preauth-jc/pom.xml\n+++ b/samples/preauth-jc/pom.xml\n@@ -3,7 +3,7 @@\n   <modelVersion>4.0.0</modelVersion>\n   <groupId>org.springframework.security</groupId>\n   <artifactId>spring-security-samples-preauth-jc</artifactId>\n-  <version>3.2.10.CI-SNAPSHOT</version>\n+  <version>3.2.10.BUILD-SNAPSHOT</version>\n   <packaging>war</packaging>\n   <name>spring-security-samples-preauth-jc</name>\n   <description>spring-security-samples-preauth-jc</description>\n@@ -80,25 +80,25 @@\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-config</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-core</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-samples-messages-jc</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-web</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n", "diff --git a/samples/preauth-xml/pom.xml b/samples/preauth-xml/pom.xml\nindex d4b8561cf..d07682bdc 100644\n--- a/samples/preauth-xml/pom.xml\n+++ b/samples/preauth-xml/pom.xml\n@@ -3,7 +3,7 @@\n   <modelVersion>4.0.0</modelVersion>\n   <groupId>org.springframework.security</groupId>\n   <artifactId>spring-security-samples-preauth-xml</artifactId>\n-  <version>3.2.10.CI-SNAPSHOT</version>\n+  <version>3.2.10.BUILD-SNAPSHOT</version>\n   <packaging>war</packaging>\n   <name>spring-security-samples-preauth-xml</name>\n   <description>spring-security-samples-preauth-xml</description>\n@@ -57,13 +57,13 @@\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-config</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>runtime</scope>\n     </dependency>\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-web</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>runtime</scope>\n     </dependency>\n     <dependency>\n", "diff --git a/samples/rememberme-jc/pom.xml b/samples/rememberme-jc/pom.xml\nindex d1ad3d06c..cc927c381 100644\n--- a/samples/rememberme-jc/pom.xml\n+++ b/samples/rememberme-jc/pom.xml\n@@ -3,7 +3,7 @@\n   <modelVersion>4.0.0</modelVersion>\n   <groupId>org.springframework.security</groupId>\n   <artifactId>spring-security-samples-rememberme-jc</artifactId>\n-  <version>3.2.10.CI-SNAPSHOT</version>\n+  <version>3.2.10.BUILD-SNAPSHOT</version>\n   <packaging>war</packaging>\n   <name>spring-security-samples-rememberme-jc</name>\n   <description>spring-security-samples-rememberme-jc</description>\n@@ -80,25 +80,25 @@\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-config</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-core</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-samples-messages-jc</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-web</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n", "diff --git a/samples/servletapi-xml/pom.xml b/samples/servletapi-xml/pom.xml\nindex 1d473e472..aa0dddbca 100644\n--- a/samples/servletapi-xml/pom.xml\n+++ b/samples/servletapi-xml/pom.xml\n@@ -3,7 +3,7 @@\n   <modelVersion>4.0.0</modelVersion>\n   <groupId>org.springframework.security</groupId>\n   <artifactId>spring-security-samples-servletapi-xml</artifactId>\n-  <version>3.2.10.CI-SNAPSHOT</version>\n+  <version>3.2.10.BUILD-SNAPSHOT</version>\n   <packaging>war</packaging>\n   <name>spring-security-samples-servletapi-xml</name>\n   <description>spring-security-samples-servletapi-xml</description>\n@@ -44,13 +44,13 @@\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-core</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-web</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n@@ -111,13 +111,13 @@\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-config</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>runtime</scope>\n     </dependency>\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-taglibs</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>runtime</scope>\n     </dependency>\n     <dependency>\n", "diff --git a/samples/tutorial-xml/pom.xml b/samples/tutorial-xml/pom.xml\nindex 5c331894a..6a7b2b9e3 100644\n--- a/samples/tutorial-xml/pom.xml\n+++ b/samples/tutorial-xml/pom.xml\n@@ -3,7 +3,7 @@\n   <modelVersion>4.0.0</modelVersion>\n   <groupId>org.springframework.security</groupId>\n   <artifactId>spring-security-samples-tutorial-xml</artifactId>\n-  <version>3.2.10.CI-SNAPSHOT</version>\n+  <version>3.2.10.BUILD-SNAPSHOT</version>\n   <packaging>war</packaging>\n   <name>spring-security-samples-tutorial-xml</name>\n   <description>spring-security-samples-tutorial-xml</description>\n@@ -44,7 +44,7 @@\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-core</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n@@ -111,19 +111,19 @@\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-config</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>runtime</scope>\n     </dependency>\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-taglibs</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>runtime</scope>\n     </dependency>\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-web</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>runtime</scope>\n     </dependency>\n     <dependency>\n", "diff --git a/samples/x509-jc/pom.xml b/samples/x509-jc/pom.xml\nindex 5848de4c5..69f01352a 100644\n--- a/samples/x509-jc/pom.xml\n+++ b/samples/x509-jc/pom.xml\n@@ -3,7 +3,7 @@\n   <modelVersion>4.0.0</modelVersion>\n   <groupId>org.springframework.security</groupId>\n   <artifactId>spring-security-samples-x509-jc</artifactId>\n-  <version>3.2.10.CI-SNAPSHOT</version>\n+  <version>3.2.10.BUILD-SNAPSHOT</version>\n   <packaging>war</packaging>\n   <name>spring-security-samples-x509-jc</name>\n   <description>spring-security-samples-x509-jc</description>\n@@ -80,25 +80,25 @@\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-config</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-core</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-samples-messages-jc</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-web</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n", "diff --git a/taglibs/pom.xml b/taglibs/pom.xml\nindex cfbdba152..c66845139 100644\n--- a/taglibs/pom.xml\n+++ b/taglibs/pom.xml\n@@ -3,7 +3,7 @@\n   <modelVersion>4.0.0</modelVersion>\n   <groupId>org.springframework.security</groupId>\n   <artifactId>spring-security-taglibs</artifactId>\n-  <version>3.2.10.CI-SNAPSHOT</version>\n+  <version>3.2.10.BUILD-SNAPSHOT</version>\n   <name>spring-security-taglibs</name>\n   <description>spring-security-taglibs</description>\n   <url>http://spring.io/spring-security</url>\n@@ -34,19 +34,19 @@\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-acl</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-core</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-web</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n", "diff --git a/web/pom.xml b/web/pom.xml\nindex 95e150901..9bdbfbf0a 100644\n--- a/web/pom.xml\n+++ b/web/pom.xml\n@@ -3,7 +3,7 @@\n   <modelVersion>4.0.0</modelVersion>\n   <groupId>org.springframework.security</groupId>\n   <artifactId>spring-security-web</artifactId>\n-  <version>3.2.10.CI-SNAPSHOT</version>\n+  <version>3.2.10.BUILD-SNAPSHOT</version>\n   <name>spring-security-web</name>\n   <description>spring-security-web</description>\n   <url>http://spring.io/spring-security</url>\n@@ -40,7 +40,7 @@\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-core</artifactId>\n-      <version>3.2.10.CI-SNAPSHOT</version>\n+      <version>3.2.10.BUILD-SNAPSHOT</version>\n       <scope>compile</scope>\n     </dependency>\n     <dependency>\n"], "label": 0, "cve": "CVE-2016-9879", "rank": 8, "commit": "55a25fa2139f6bf6252ace59c5f982ab569f35a8", "cve_attention_tokens": []}
{"cve_desc": "After logging into the portal, the logout jsp page redirects the browser back to the login page after. It is feasible for malicious users to redirect the browser to an unintended web page in Apache jUDDI 3.1.2, 3.1.3, 3.1.4, and 3.1.5 when utilizing the portlets based user interface also known as 'Pluto', 'jUDDI Portal', 'UDDI Portal' or 'uddi-console'. User session data, credentials, and auth tokens are cleared before the redirect.", "commit_msg": "JUDDI-651 adding selenium test pages, fixing several issues with rebuild binding templates, logging\nJUDDI-796 done\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/juddi/trunk@1559521 13f79535-47bb-0310-9956-ffa450edef68\n\n", "diff": ["diff --git a/juddi-core/src/main/java/org/apache/juddi/Registry.java b/juddi-core/src/main/java/org/apache/juddi/Registry.java\nindex b99037655..6fb44c05e 100644\n--- a/juddi-core/src/main/java/org/apache/juddi/Registry.java\n+++ b/juddi-core/src/main/java/org/apache/juddi/Registry.java\n@@ -91,7 +91,7 @@ public class Registry {\n \t\t\t\t}\n \t\t\t}\n \t\t\t\n-\t\t\tlog.info(\"jUDDI registry started succesfully.\");\n+\t\t\tlog.info(\"jUDDI registry started successfully.\");\n \t\t}\n  \t}\n \t\n", "diff --git a/juddi-gui/src/main/java/org/apache/juddi/webconsole/hub/UddiHub.java b/juddi-gui/src/main/java/org/apache/juddi/webconsole/hub/UddiHub.java\nindex ecffa8105..ffc1ef08f 100644\n--- a/juddi-gui/src/main/java/org/apache/juddi/webconsole/hub/UddiHub.java\n+++ b/juddi-gui/src/main/java/org/apache/juddi/webconsole/hub/UddiHub.java\n@@ -73,7 +73,6 @@ import org.uddi.v3_service.UDDISubscriptionPortType;\n import org.w3._2000._09.xmldsig_.SignatureType;\n import org.w3._2000._09.xmldsig_.X509DataType;\n \n-\n /**\n  * UddiHub - The hub acts as a single point for managing browser to uddi\n  * services. At most 1 instance is allowed per http session. In general, all\n@@ -843,7 +842,6 @@ public class UddiHub implements Serializable {\n                 return null;\n         }\n \n-        \n         /**\n          * don't think this is used yet\n          *\n@@ -924,23 +922,23 @@ public class UddiHub implements Serializable {\n                 try {\n                         SaveService sb = new SaveService();\n                         sb.setAuthInfo(GetToken());\n-                         ServiceDetail saveService =null;\n+                        ServiceDetail saveService = null;\n                         sb.getBusinessService().add(be);\n                         try {\n-                                 saveService = publish.saveService(sb);\n+                                saveService = publish.saveService(sb);\n                         } catch (Exception ex) {\n                                 if (isExceptionExpiration(ex)) {\n                                         token = null;\n                                         sb.setAuthInfo(GetToken());\n-                                        saveService =   publish.saveService(sb);\n+                                        saveService = publish.saveService(sb);\n \n                                 } else {\n                                         throw ex;\n                                 }\n                         }\n-                        return ResourceLoader.GetResource(session, \"actions.saved\") + \" \" +\n-                                \"<a href=\\\"businessEditor2.jsp?id=\" + URLEncoder.encode(saveService.getBusinessService().get(0).getServiceKey(),\"UTF8\") +\n-                                \"\\\">\" + StringEscapeUtils.escapeHtml(saveService.getBusinessService().get(0).getServiceKey()) + \"</a>\";        \n+                        return ResourceLoader.GetResource(session, \"actions.saved\") + \" \"\n+                                + \"<a href=\\\"serviceEditor.jsp?id=\" + URLEncoder.encode(saveService.getBusinessService().get(0).getServiceKey(), \"UTF8\")\n+                                + \"\\\">\" + StringEscapeUtils.escapeHtml(saveService.getBusinessService().get(0).getServiceKey()) + \"</a>\";\n                 } catch (Exception ex) {\n                         return HandleException(ex);\n                 }\n@@ -957,23 +955,23 @@ public class UddiHub implements Serializable {\n                         SaveBusiness sb = new SaveBusiness();\n                         sb.setAuthInfo(GetToken());\n                         sb.getBusinessEntity().add(be);\n-                        BusinessDetail saveBusiness=null;\n+                        BusinessDetail saveBusiness = null;\n                         try {\n-                                 saveBusiness = publish.saveBusiness(sb);\n+                                saveBusiness = publish.saveBusiness(sb);\n                         } catch (Exception ex) {\n                                 if (isExceptionExpiration(ex)) {\n                                         token = null;\n                                         sb.setAuthInfo(GetToken());\n-                                      saveBusiness=  publish.saveBusiness(sb);\n+                                        saveBusiness = publish.saveBusiness(sb);\n \n                                 } else {\n                                         throw ex;\n                                 }\n                         }\n \n-                        return ResourceLoader.GetResource(session, \"actions.saved\") + \" \" +\n-                                \"<a href=\\\"businessEditor2.jsp?id=\" + URLEncoder.encode(saveBusiness.getBusinessEntity().get(0).getBusinessKey(),\"UTF8\") +\n-                                \"\\\">\" + StringEscapeUtils.escapeHtml(saveBusiness.getBusinessEntity().get(0).getBusinessKey()) + \"</a>\";        \n+                        return ResourceLoader.GetResource(session, \"actions.saved\") + \" \"\n+                                + \"<a href=\\\"businessEditor2.jsp?id=\" + URLEncoder.encode(saveBusiness.getBusinessEntity().get(0).getBusinessKey(), \"UTF8\")\n+                                + \"\\\">\" + StringEscapeUtils.escapeHtml(saveBusiness.getBusinessEntity().get(0).getBusinessKey()) + \"</a>\";\n                 } catch (Exception ex) {\n                         return HandleException(ex);\n                 }\n@@ -1221,19 +1219,23 @@ public class UddiHub implements Serializable {\n         private String HandleException(Exception ex) {\n                 if (ex instanceof DispositionReportFaultMessage) {\n                         DispositionReportFaultMessage f = (DispositionReportFaultMessage) ex;\n-                        log.error(ex.getMessage());\n-                        log.debug(null, ex);\n-                        return ResourceLoader.GetResource(session, \"errors.uddi\") + \" \" + ex.getMessage() + \" \" + (f.detail!=null ? f.detail.getMessage() : \"\");\n-                }\n-                if (ex instanceof RemoteException) {\n+                        log.error(ex.getMessage() + (f.detail != null && f.detail.getMessage() != null ? StringEscapeUtils.escapeHtml(f.detail.getMessage()) : \"\"));\n+                        log.debug(ex.getMessage(), ex);\n+                        return ResourceLoader.GetResource(session, \"errors.uddi\") + \" \" + StringEscapeUtils.escapeHtml(ex.getMessage()) + \" \" + (f.detail != null && f.detail.getMessage() != null ? StringEscapeUtils.escapeHtml(f.detail.getMessage()) : \"\");\n+                } else if (ex instanceof RemoteException) {\n                         RemoteException f = (RemoteException) ex;\n-                        log.error(ex.getMessage());\n-                        log.debug(null, ex);\n-                        return ResourceLoader.GetResource(session, \"errors.generic\") + \" \" + ex.getMessage() + \" \" + (f.detail!=null ? f.detail.getMessage() : \"\");\n+                        log.error(\"RemoteException \" + ex.getMessage());\n+                        log.debug(\"RemoteException \" + ex.getMessage(), ex);\n+                        return ResourceLoader.GetResource(session, \"errors.generic\") + \" \" + StringEscapeUtils.escapeHtml(ex.getMessage()) + \" \" + (f.detail != null && f.detail.getMessage() != null ? StringEscapeUtils.escapeHtml(f.detail.getMessage()) : \"\");\n+                } else if (ex instanceof NullPointerException) {\n+                        log.error(\"NPE! Please report! \" + ex.getMessage(), ex);\n+                        log.debug(\"NPE! Please report! \" + ex.getMessage(), ex);\n+                        return ResourceLoader.GetResource(session, \"errors.generic\") + \" \" + StringEscapeUtils.escapeHtml(ex.getMessage());\n+                } else {\n+                        log.error(\"Unexpected error \" + ex.getMessage(), ex);\n+                        //log.debug(ex.getMessage(), ex);\n+                        return ResourceLoader.GetResource(session, \"errors.generic\") + \" \" + StringEscapeUtils.escapeHtml(ex.getMessage());\n                 }\n-                log.error(ex.getMessage());\n-                log.debug(null, ex);\n-                return ResourceLoader.GetResource(session, \"errors.generic\") + \" \" + StringEscapeUtils.escapeHtml(ex.getMessage());\n         }\n \n         /**\n@@ -2047,25 +2049,25 @@ public class UddiHub implements Serializable {\n                 try {\n                         SaveTModel sb = new SaveTModel();\n                         sb.setAuthInfo(GetToken());\n-                        TModelDetail saveTModel=null;\n+                        TModelDetail saveTModel = null;\n                         sb.getTModel().add(be);\n                         //JAXB.marshal(be, System.out);\n                         try {\n-                                 saveTModel = publish.saveTModel(sb);\n+                                saveTModel = publish.saveTModel(sb);\n                         } catch (Exception ex) {\n                                 if (isExceptionExpiration(ex)) {\n                                         token = null;\n                                         sb.setAuthInfo(GetToken());\n-                                         saveTModel = publish.saveTModel(sb);\n+                                        saveTModel = publish.saveTModel(sb);\n \n                                 } else {\n                                         throw ex;\n                                 }\n                         }\n                         //return ResourceLoader.GetResource(session, \"actions.saved\");\n-                        return ResourceLoader.GetResource(session, \"actions.saved\") + \" \" +\n-                                \"<a href=\\\"tmodelEditor.jsp?id=\" + URLEncoder.encode(saveTModel.getTModel().get(0).getTModelKey(),\"UTF8\") +\n-                                \"\\\">\" + StringEscapeUtils.escapeHtml(saveTModel.getTModel().get(0).getTModelKey()) + \"</a>\";\n+                        return ResourceLoader.GetResource(session, \"actions.saved\") + \" \"\n+                                + \"<a href=\\\"tmodelEditor.jsp?id=\" + URLEncoder.encode(saveTModel.getTModel().get(0).getTModelKey(), \"UTF8\")\n+                                + \"\\\">\" + StringEscapeUtils.escapeHtml(saveTModel.getTModel().get(0).getTModelKey()) + \"</a>\";\n                 } catch (Exception ex) {\n                         return HandleException(ex);\n                 }\n@@ -2290,9 +2292,9 @@ public class UddiHub implements Serializable {\n                                         throw ex;\n                                 }\n                         }\n-                        return ResourceLoader.GetResource(session, \"messages.success\") + \n-                        \"<a href=\\\"editSubscription.jsp?id=\" + URLEncoder.encode(data.value.get(0).getSubscriptionKey(),\"UTF8\") +\n-                        \"\\\">\" + StringEscapeUtils.escapeHtml(data.value.get(0).getSubscriptionKey()) + \"</a>\";\n+                        return ResourceLoader.GetResource(session, \"messages.success\")\n+                                + \" <a href=\\\"editSubscription.jsp?id=\" + URLEncoder.encode(data.value.get(0).getSubscriptionKey(), \"UTF8\")\n+                                + \"\\\">\" + StringEscapeUtils.escapeHtml(data.value.get(0).getSubscriptionKey()) + \"</a>\";\n                 } catch (Exception ex) {\n                         return HandleException(ex);\n                 }\n", "diff --git a/juddi-gui/src/main/java/org/apache/juddi/webconsole/hub/builders/Builders.java b/juddi-gui/src/main/java/org/apache/juddi/webconsole/hub/builders/Builders.java\nindex 7e6aec332..67457571b 100644\n--- a/juddi-gui/src/main/java/org/apache/juddi/webconsole/hub/builders/Builders.java\n+++ b/juddi-gui/src/main/java/org/apache/juddi/webconsole/hub/builders/Builders.java\n@@ -610,6 +610,8 @@ public class Builders {\n                     String[] t = (String[]) map.get(prefix + index + PostBackConstants.VALUE);\n                     if (t != null && t.length > 0) {\n                         pn.setBindingKey(t[0]);\n+                        if (pn.getBindingKey().equalsIgnoreCase(ResourceLoader.GetResource(locale, \"items.clicktoedit\")))\n+                                pn.setBindingKey(null);\n                     }\n \n                     t = (String[]) map.get(prefix + index + PostBackConstants.HOSTINGREDIRECTOR);\n", "diff --git a/juddi-gui/src/main/webapp/serviceEditor.jsp b/juddi-gui/src/main/webapp/serviceEditor.jsp\nindex 8eaec31a9..84e101a7e 100644\n--- a/juddi-gui/src/main/webapp/serviceEditor.jsp\n+++ b/juddi-gui/src/main/webapp/serviceEditor.jsp\n@@ -41,6 +41,7 @@\n         if (businessid != null && businessid.length() > 0) {\n             newitem = true;\n         } else {\n+                //no service id or business id\n             response.sendRedirect(\"index.jsp\");\n         }\n \n@@ -97,13 +98,18 @@\n                 <br>\n                 <div style=\"border-width: 2px; border-style: solid;\" class=\"noedit\" id=\"<%=PostBackConstants.BUSINESSKEY%>\">\n                     <%\n-                        out.write(\"<a href=\\\"businessEditor2.jsp?id=\" + StringEscapeUtils.escapeHtml(bd.getBusinessKey()) + \"\\\">\");\n+                    if (bd==null || bd.getBusinessKey() ==null){\n+                            out.write(\"\");\n+                    }\n+                    else{\n+                            out.write(\"<a href=\\\"businessEditor2.jsp?id=\" + StringEscapeUtils.escapeHtml(bd.getBusinessKey()) + \"\\\">\");\n                         out.write(StringEscapeUtils.escapeHtml(bd.getBusinessKey()));\n                         out.write(\"</a>\");\n+                    \n                         if (bd.getCategoryBag() == null) {\n                             bd.setCategoryBag(new CategoryBag());\n                         }\n-\n+}\n                     %>\n                 </div>\n                 <br>\n", "diff --git a/juddi-gui/test/selenium/AdminPages.html b/juddi-gui/test/selenium/AdminPages.html\nnew file mode 100644\nindex 000000000..c6389a0ca\n--- /dev/null\n+++ b/juddi-gui/test/selenium/AdminPages.html\n@@ -0,0 +1,327 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Strict//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd\">\n+<html xmlns=\"http://www.w3.org/1999/xhtml\" xml:lang=\"en\" lang=\"en\">\n+<head profile=\"http://selenium-ide.openqa.org/profiles/test-case\">\n+<meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" />\n+<link rel=\"selenium.base\" href=\"http://localhost:8080/juddiv3/\" />\n+<title>AdminPages</title>\n+</head>\n+<body>\n+<table cellpadding=\"1\" cellspacing=\"1\" border=\"1\">\n+<thead>\n+<tr><td rowspan=\"1\" colspan=\"3\">AdminPages</td></tr>\n+</thead><tbody>\n+<tr>\n+\t<td>open</td>\n+\t<td>/juddiv3/</td>\n+\t<td></td>\n+</tr>\n+<tr>\n+\t<td>assertText</td>\n+\t<td>css=div.content &gt; div</td>\n+\t<td>jUDDI has been successfully installed!</td>\n+</tr>\n+<tr>\n+\t<td>clickAndWait</td>\n+\t<td>link=View the service listing on this UDDI node</td>\n+\t<td></td>\n+</tr>\n+<tr>\n+\t<td>assertElementPresent</td>\n+\t<td>link={urn:juddi-apache-org:v3_service}JUDDIApiService</td>\n+\t<td></td>\n+</tr>\n+<tr>\n+\t<td>assertElementPresent</td>\n+\t<td>link={urn:uddi-org:v3_service}UDDICustodyTransferService</td>\n+\t<td></td>\n+</tr>\n+<tr>\n+\t<td>assertElementPresent</td>\n+\t<td>link={urn:uddi-org:v3_service}UDDIInquiryService</td>\n+\t<td></td>\n+</tr>\n+<tr>\n+\t<td>assertElementPresent</td>\n+\t<td>link={urn:uddi-org:v3_service}UDDIPublicationService</td>\n+\t<td></td>\n+</tr>\n+<tr>\n+\t<td>assertElementPresent</td>\n+\t<td>link={urn:uddi-org:v3_service}UDDISecurityService</td>\n+\t<td></td>\n+</tr>\n+<tr>\n+\t<td>assertElementPresent</td>\n+\t<td>link={urn:uddi-org:v3_service}UDDISubscriptionListenerService</td>\n+\t<td></td>\n+</tr>\n+<tr>\n+\t<td>assertElementPresent</td>\n+\t<td>link={urn:uddi-org:v3_service}UDDISubscriptionService</td>\n+\t<td></td>\n+</tr>\n+<tr>\n+\t<td>assertElementPresent</td>\n+\t<td>link=exact:http://localhost:8080/juddiv3/services/inquiryRest?_wadl</td>\n+\t<td></td>\n+</tr>\n+<tr>\n+\t<td>open</td>\n+\t<td>/juddiv3/</td>\n+\t<td></td>\n+</tr>\n+<tr>\n+\t<td>clickAndWait</td>\n+\t<td>link=View the jUDDI Administration Interface</td>\n+\t<td></td>\n+</tr>\n+<tr>\n+\t<td>clickAndWait</td>\n+\t<td>css=button.btn.btn-primary</td>\n+\t<td></td>\n+</tr>\n+<tr>\n+\t<td>clickAndWait</td>\n+\t<td>xpath=(//a[contains(text(),'View Details \u00bb')])[2]</td>\n+\t<td></td>\n+</tr>\n+<tr>\n+\t<td>assertText</td>\n+\t<td>//div[@id='status']/pre[3]/font</td>\n+\t<td>Data source is valid and online!</td>\n+</tr>\n+<tr>\n+\t<td>click</td>\n+\t<td>link=Statistics</td>\n+\t<td></td>\n+</tr>\n+<tr>\n+\t<td>assertText</td>\n+\t<td>css=td</td>\n+\t<td>Failed API Queries</td>\n+</tr>\n+<tr>\n+\t<td>selectWindow</td>\n+\t<td>null</td>\n+\t<td></td>\n+</tr>\n+<tr>\n+\t<td>clickAndWait</td>\n+\t<td>link=Configure</td>\n+\t<td></td>\n+</tr>\n+<tr>\n+\t<td>clickAndWait</td>\n+\t<td>link=Save</td>\n+\t<td>5000</td>\n+</tr>\n+<tr>\n+\t<td>assertText</td>\n+\t<td>css=i.icon-thumbs-up.icon-2x</td>\n+\t<td>Saved!</td>\n+</tr>\n+<tr>\n+\t<td>click</td>\n+\t<td>link=Show Debug Information</td>\n+\t<td></td>\n+</tr>\n+<tr>\n+\t<td>assertText</td>\n+\t<td>//div[@id='debugtable']/table/tbody/tr[11]/td</td>\n+\t<td>java.home</td>\n+</tr>\n+<tr>\n+\t<td>click</td>\n+\t<td>css=i.icon-question-sign.icon-large</td>\n+\t<td></td>\n+</tr>\n+<tr>\n+\t<td>clickAndWait</td>\n+\t<td>link=Admin</td>\n+\t<td></td>\n+</tr>\n+<tr>\n+\t<td>select</td>\n+\t<td>id=divselector</td>\n+\t<td>label=getAllPublisherDetail</td>\n+</tr>\n+<tr>\n+\t<td>click</td>\n+\t<td>link=Go!</td>\n+\t<td></td>\n+</tr>\n+<tr>\n+\t<td>click</td>\n+\t<td>link=\u00d7</td>\n+\t<td></td>\n+</tr>\n+<tr>\n+\t<td>type</td>\n+\t<td>id=username</td>\n+\t<td>root</td>\n+</tr>\n+<tr>\n+\t<td>type</td>\n+\t<td>id=password</td>\n+\t<td>root</td>\n+</tr>\n+<tr>\n+\t<td>click</td>\n+\t<td>id=loginbutton</td>\n+\t<td></td>\n+</tr>\n+<tr>\n+\t<td>click</td>\n+\t<td>link=Go!</td>\n+\t<td></td>\n+</tr>\n+<tr>\n+\t<td>assertElementPresent</td>\n+\t<td>//div[@id='adminresults']/table/tbody/tr[2]/td[2]</td>\n+\t<td></td>\n+</tr>\n+<tr>\n+\t<td>click</td>\n+\t<td>link=Close</td>\n+\t<td></td>\n+</tr>\n+<tr>\n+\t<td>select</td>\n+\t<td>id=divselector</td>\n+\t<td>label=get_publisherDetail</td>\n+</tr>\n+<tr>\n+\t<td>type</td>\n+\t<td>id=get_publisherDetailKEY</td>\n+\t<td>root</td>\n+</tr>\n+<tr>\n+\t<td>click</td>\n+\t<td>link=Go!</td>\n+\t<td></td>\n+</tr>\n+<tr>\n+\t<td>assertElementPresent</td>\n+\t<td>//div[@id='adminresults']/table/tbody/tr[2]/td[2]</td>\n+\t<td></td>\n+</tr>\n+<tr>\n+\t<td>click</td>\n+\t<td>link=Close</td>\n+\t<td></td>\n+</tr>\n+<tr>\n+\t<td>select</td>\n+\t<td>id=divselector</td>\n+\t<td>label=invoke_SyncSubscription</td>\n+</tr>\n+<tr>\n+\t<td>select</td>\n+\t<td>id=divselector</td>\n+\t<td>label=save_Clerk</td>\n+</tr>\n+<tr>\n+\t<td>select</td>\n+\t<td>id=divselector</td>\n+\t<td>label=save_Node</td>\n+</tr>\n+<tr>\n+\t<td>type</td>\n+\t<td>id=NODEsetClientName</td>\n+\t<td>test</td>\n+</tr>\n+<tr>\n+\t<td>type</td>\n+\t<td>id=NODEsetName</td>\n+\t<td>test</td>\n+</tr>\n+<tr>\n+\t<td>type</td>\n+\t<td>id=NODEsetDescription</td>\n+\t<td>test</td>\n+</tr>\n+<tr>\n+\t<td>click</td>\n+\t<td>link=Go!</td>\n+\t<td></td>\n+</tr>\n+<tr>\n+\t<td>assertText</td>\n+\t<td>id=adminresults</td>\n+\t<td>Success</td>\n+</tr>\n+<tr>\n+\t<td>click</td>\n+\t<td>link=Close</td>\n+\t<td></td>\n+</tr>\n+<tr>\n+\t<td>select</td>\n+\t<td>id=divselector</td>\n+\t<td>label=save_publisher</td>\n+</tr>\n+<tr>\n+\t<td>type</td>\n+\t<td>id=savePublisherNAME</td>\n+\t<td>bob</td>\n+</tr>\n+<tr>\n+\t<td>type</td>\n+\t<td>id=savePublisherEMAIL</td>\n+\t<td>bob@mail.com</td>\n+</tr>\n+<tr>\n+\t<td>type</td>\n+\t<td>id=savePublisherAuthorizedName</td>\n+\t<td>bob</td>\n+</tr>\n+<tr>\n+\t<td>click</td>\n+\t<td>link=Go!</td>\n+\t<td></td>\n+</tr>\n+<tr>\n+\t<td>assertText</td>\n+\t<td>id=adminresults</td>\n+\t<td>Success</td>\n+</tr>\n+<tr>\n+\t<td>click</td>\n+\t<td>link=Close</td>\n+\t<td></td>\n+</tr>\n+<tr>\n+\t<td>select</td>\n+\t<td>id=divselector</td>\n+\t<td>label=save_Node</td>\n+</tr>\n+<tr>\n+\t<td>select</td>\n+\t<td>id=divselector</td>\n+\t<td>label=get_publisherDetail</td>\n+</tr>\n+<tr>\n+\t<td>type</td>\n+\t<td>id=get_publisherDetailKEY</td>\n+\t<td>bob</td>\n+</tr>\n+<tr>\n+\t<td>click</td>\n+\t<td>link=Go!</td>\n+\t<td></td>\n+</tr>\n+<tr>\n+\t<td>assertText</td>\n+\t<td>//div[@id='adminresults']/table/tbody/tr[2]/td[2]</td>\n+\t<td>Authorized Name = bob<br />Publisher Name = bob<br />Email = bob@mail.com<br />Administrator = true<br />Enabled = true<br />Max Bindings per = null<br />Max Businesses = null<br />Max Services per = null<br />Max tModels = null</td>\n+</tr>\n+<tr>\n+\t<td>click</td>\n+\t<td>link=Close</td>\n+\t<td></td>\n+</tr>\n+\n+</tbody></table>\n+</body>\n+</html>\n", "diff --git a/juddi-gui/test/selenium/testSuite.html b/juddi-gui/test/selenium/testSuite.html\nnew file mode 100644\nindex 000000000..50e00eb69\n--- /dev/null\n+++ b/juddi-gui/test/selenium/testSuite.html\n@@ -0,0 +1,18 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Strict//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd\">\n+<html xmlns=\"http://www.w3.org/1999/xhtml\" xml:lang=\"en\" lang=\"en\">\n+<head>\n+  <meta content=\"text/html; charset=UTF-8\" http-equiv=\"content-type\" />\n+  <title>Test Suite</title>\n+</head>\n+<body>\n+<table id=\"suiteTable\" cellpadding=\"1\" cellspacing=\"1\" border=\"1\" class=\"selenium\"><tbody>\n+<tr><td><b>Test Suite</b></td></tr>\n+<tr><td><a href=\"BusinessEditorRender.html\">BusinessEditorRender</a></td></tr>\n+<tr><td><a href=\"BusinessSearchBasic.html\">BusinessSearchBasic</a></td></tr>\n+<tr><td><a href=\"WadlImport.html\">WadlImport</a></td></tr>\n+<tr><td><a href=\"WsdlImport.html\">WsdlImport</a></td></tr>\n+<tr><td><a href=\"AdminPages.html\">AdminPages</a></td></tr>\n+</tbody></table>\n+</body>\n+</html>\n", "diff --git a/juddiv3-war/JAX-WS/Axis2/WEB-INF/web.xml b/juddiv3-war/JAX-WS/Axis2/WEB-INF/web.xml\nindex f0b05920f..853c850df 100644\n--- a/juddiv3-war/JAX-WS/Axis2/WEB-INF/web.xml\n+++ b/juddiv3-war/JAX-WS/Axis2/WEB-INF/web.xml\n@@ -31,7 +31,7 @@\n \n   <listener>\n \t\t <!-- this class setups the encryption key for the session-->\n-    <listener-class>org.apache.juddi.webconsole.StartupServlet</listener-class>\n+    <listener-class>org.apache.juddi.adminconsole.StartupServlet</listener-class>\n     \n   </listener>\n  <servlet>\n", "diff --git a/juddiv3-war/JAX-WS/CXF/WEB-INF/web.xml b/juddiv3-war/JAX-WS/CXF/WEB-INF/web.xml\nindex ab66e2a9b..bff48dc7d 100644\n--- a/juddiv3-war/JAX-WS/CXF/WEB-INF/web.xml\n+++ b/juddiv3-war/JAX-WS/CXF/WEB-INF/web.xml\n@@ -38,7 +38,7 @@\n       org.springframework.web.context.ContextLoaderListener\n \t\t</listener-class>\n \t\t <!-- this class setups the encryption key for the session-->\n-    <listener-class>org.apache.juddi.webconsole.StartupServlet</listener-class>\n+    <listener-class>org.apache.juddi.adminconsole.StartupServlet</listener-class>\n     \n   </listener>\n \n", "diff --git a/juddiv3-war/JAX-WS/JBossWS-CXF/WEB-INF/web.xml b/juddiv3-war/JAX-WS/JBossWS-CXF/WEB-INF/web.xml\nindex 95a535102..7d8d11849 100644\n--- a/juddiv3-war/JAX-WS/JBossWS-CXF/WEB-INF/web.xml\n+++ b/juddiv3-war/JAX-WS/JBossWS-CXF/WEB-INF/web.xml\n@@ -26,7 +26,7 @@\n   </context-param>\n   <listener>\n \t\t <!-- this class setups the encryption key for the session-->\n-    <listener-class>org.apache.juddi.webconsole.StartupServlet</listener-class>\n+    <listener-class>org.apache.juddi.adminconsole.StartupServlet</listener-class>\n     \n   </listener>\n   <servlet>\n", "diff --git a/juddiv3-war/JAX-WS/JBossWS-Native/WEB-INF/web.xml b/juddiv3-war/JAX-WS/JBossWS-Native/WEB-INF/web.xml\nindex 4f32e9f68..7dc7cd9b9 100644\n--- a/juddiv3-war/JAX-WS/JBossWS-Native/WEB-INF/web.xml\n+++ b/juddiv3-war/JAX-WS/JBossWS-Native/WEB-INF/web.xml\n@@ -23,7 +23,7 @@\n     </description>\n \t<listener>\n \t\t <!-- this class setups the encryption key for the session-->\n-    <listener-class>org.apache.juddi.webconsole.StartupServlet</listener-class>\n+    <listener-class>org.apache.juddi.adminconsole.StartupServlet</listener-class>\n     \n   </listener>\n \t<servlet>\n", "diff --git a/juddiv3-war/src/main/java/org/apache/juddi/adminconsole/AES.java b/juddiv3-war/src/main/java/org/apache/juddi/adminconsole/AES.java\nnew file mode 100644\nindex 000000000..887521605\n--- /dev/null\n+++ b/juddiv3-war/src/main/java/org/apache/juddi/adminconsole/AES.java\n@@ -0,0 +1,163 @@\n+/*\n+ * Copyright 2001-2013 The Apache Software Foundation.\n+ * \n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ * \n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ * \n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ *\n+ */\n+package org.apache.juddi.adminconsole;\n+\n+import java.nio.charset.Charset;\n+import javax.crypto.*;\n+import javax.crypto.spec.*;\n+import org.apache.commons.codec.binary.Base64;\n+\n+import org.apache.commons.logging.Log;\n+import org.apache.commons.logging.LogFactory;\n+\n+/**\n+ * <summary> This program uses a AES key, retrieves its raw bytes, and then\n+ * reinstantiates a AES key from the key bytes.</summary> The reinstantiated key\n+ * is used to initialize a AES cipher for encryption and decryption. source :\n+ * http://java.sun.com/developer/technicalArticles/Security/AES/AES_v1.html\n+ *\n+ * @author <a href=\"mailto:alexoree@apache.org\">Alex O'Ree</a>\n+ */\n+public class AES {\n+\n+        public static final String logname = \"org.apache.juddi.gui\";\n+        public static final Log log = LogFactory.getLog(logname);\n+\n+        /**\n+         * generates an AES based off of the selected key size\n+         *\n+         * @param keysize\n+         * @return may return null if the key is not of a supported size by the\n+         * current jdk\n+         */\n+        public static String GEN(int keysize) {\n+                KeyGenerator kgen;\n+                try {\n+                        kgen = KeyGenerator.getInstance(\"AES\");\n+                        kgen.init(keysize);\n+                        SecretKey skey = kgen.generateKey();\n+                        byte[] raw = skey.getEncoded();\n+                        return new String(Base64.encodeBase64(raw), Charset.defaultCharset());\n+                } catch (Exception ex) {\n+                        log.fatal(\"error generating key\", ex);\n+                }\n+                return null;\n+        }\n+\n+        /**\n+         * Generate a new AES 256 bit encryption key. Once generated, this key\n+         * can be used to replace the default key.\n+         *\n+         * @return\n+         */\n+        public static String GEN() {\n+                return GEN(256);\n+        }\n+\n+        static String EN(String cleartext, String key) throws Exception {\n+                byte[] raw =//skey.getEncoded();\n+                        Base64.decodeBase64(key.getBytes(Charset.defaultCharset())); //\n+                SecretKeySpec skeySpec = new SecretKeySpec(raw, \"AES\");\n+                // Instantiate the cipher\n+                Cipher cipher = Cipher.getInstance(\"AES\");\n+                cipher.init(Cipher.ENCRYPT_MODE, skeySpec);\n+                byte[] encrypted = cipher.doFinal(cleartext.getBytes());\n+                return  new String(Base64.encodeBase64(encrypted), Charset.defaultCharset());\n+        }\n+\n+        static String DE(String ciphertext, String key) throws Exception {\n+                byte[] raw =//skey.getEncoded();\n+                        Base64.decodeBase64(key.getBytes(Charset.defaultCharset())); //\n+                SecretKeySpec skeySpec = new SecretKeySpec(raw, \"AES\");\n+                Cipher cipher = Cipher.getInstance(\"AES\");\n+                cipher.init(Cipher.DECRYPT_MODE, skeySpec);\n+                byte[] original = cipher.doFinal(Base64.decodeBase64(ciphertext.getBytes(Charset.defaultCharset())));\n+                return new String(original);\n+        }\n+\n+        /**\n+         * return true is the supplied key is a valid aes key\n+         *\n+         * @param key\n+         * @return\n+         */\n+        public static boolean ValidateKey(String key) {\n+                try {\n+                        String src = \"abcdefghijklmopqrstuvwxyz123567890!@#$%^&*()_+{}|:\\\">?<,\";\n+                        String x = EN(src, key);\n+                        String y = DE(x, key);\n+                        //if the sample text is encryptable and decryptable, and it was actually encrypted\n+                        if (y.equals(src) && !x.equals(y)) {\n+                                return true;\n+                        }\n+                        return false;\n+                } catch (Exception ex) {\n+                        log.info(\"Key validation failed!\", ex);\n+                        return false;\n+                }\n+        }\n+\n+        /**\n+         * encrypts a password using AES Requires the Unlimited Strength Crypto\n+         * Extensions\n+         *\n+         * @param clear\n+         * @param key\n+         * @return\n+         */\n+        public static String Encrypt(String clear, String key) throws Exception {\n+                if ((clear == null || clear.length() == 0)) {\n+                        return \"\";\n+                }\n+                if (key == null || key.length() == 0) {\n+                        log.fatal(\"The generated encryption key was null or emtpy!\");\n+                }\n+                try {\n+                        return AES.EN(clear, key);\n+                } catch (Exception ex) {\n+                        log.fatal(\"Cannot encrypt sensitive information! Check to make sure the unlimited strength JCE is installed \" + ex.getMessage(), ex);\n+                        throw new Exception(\"Internal Configuration Error, See Log for details. \");\n+                }\n+                // return \"\";\n+        }\n+\n+        /**\n+         * Decrypts a password or other sensitive data If the parameter is null\n+         * or empty, an empty string is returned. If the parameter is not\n+         * encrypted or was encrypted using a different key or it fails to\n+         * decrypt, the original text is returned.\n+         *\n+         * @param cipher encrypted text\n+         * @param key\n+         * @return\n+         */\n+        public static String Decrypt(String cipher, String key) {\n+                if ((cipher == null || cipher.length() == 0)) {\n+                        return \"\";\n+                }\n+                if (key == null || key.length() == 0) {\n+                        log.fatal(\"The generated encryption key was null or emtpy!\");\n+                }\n+                try {\n+                        return AES.DE(cipher, key);\n+                } catch (Exception ex) {\n+                        log.fatal(\"trouble decrypting data, check to make sure the unlimited strength JCE is installed. If this error occured during deployment, I'll automatically try a smaller key size. \" + ex.getMessage(), ex);\n+                }\n+                return cipher;\n+\n+        }\n+}\n", "diff --git a/juddiv3-war/src/main/java/org/apache/juddi/adminconsole/CrossSiteRequestForgeryException.java b/juddiv3-war/src/main/java/org/apache/juddi/adminconsole/CrossSiteRequestForgeryException.java\nnew file mode 100644\nindex 000000000..ea9d2f281\n--- /dev/null\n+++ b/juddiv3-war/src/main/java/org/apache/juddi/adminconsole/CrossSiteRequestForgeryException.java\n@@ -0,0 +1,67 @@\n+/*\n+ * Copyright 2001-2013 The Apache Software Foundation.\n+ * \n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ * \n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ * \n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ *\n+ */\n+package org.apache.juddi.adminconsole;\n+\n+/**\n+ * Provides a very basic, no stack trace exception, useful for throwing at a browser without revealing any details \n+ * @author <a href=\"mailto:alexoree@apache.org\">Alex O'Ree</a>\n+ */\n+public class CrossSiteRequestForgeryException extends Exception {\n+    //Parameterless Constructor\n+/**\n+ * CrossSiteRequestForgeryException\n+ */\n+    public CrossSiteRequestForgeryException() {\n+        super(msg, null);\n+    }\n+\n+    /**\n+     * Constructor that accepts a message\n+     */\n+    public CrossSiteRequestForgeryException(String message) {\n+        super(msg, null);\n+    }\n+/**\n+ * CrossSiteRequestForgeryException\n+ * @param message\n+ * @param cause \n+ */\n+    public CrossSiteRequestForgeryException(String message, Throwable cause) {\n+        super(msg, null);\n+    }\n+    private static final String msg = \"Cross Site Request Forgery\";\n+\n+    @Override\n+    public String toString() {\n+        return msg;\n+    }\n+\n+    @Override\n+    public String getMessage() {\n+        return msg;\n+    }\n+\n+    @Override\n+    public String getLocalizedMessage() {\n+        return msg;\n+    }\n+\n+    @Override\n+    public Throwable getCause() {\n+        return null;\n+    }\n+}\n", "diff --git a/juddiv3-war/src/main/java/org/apache/juddi/adminconsole/PostBackConstants.java b/juddiv3-war/src/main/java/org/apache/juddi/adminconsole/PostBackConstants.java\nnew file mode 100644\nindex 000000000..1c68b5097\n--- /dev/null\n+++ b/juddiv3-war/src/main/java/org/apache/juddi/adminconsole/PostBackConstants.java\n@@ -0,0 +1,50 @@\n+/*\n+ * To change this template, choose Tools | Templates\n+ * and open the template in the editor.\n+ */\n+package org.apache.juddi.adminconsole;\n+\n+/**\n+ * A collection of constants to use for form postbacks and parsing data from the\n+ * browser All fields MUST not contain any characters that could interfer with\n+ * the rendering of a webpage or javascript and should thus be escaped sequences\n+ * of characters\n+ *\n+ * @author <a href=\"mailto:alexoree@apache.org\">Alex O'Ree</a>\n+ */\n+public class PostBackConstants {\n+\n+    public static final String INSTANCE = \"instance\";\n+    public static final String ACCESSPOINT_TYPE = \"accessPointType\";\n+    public static final String ACCESSPOINT_VALUE = \"accessPointValue\";\n+    @Deprecated\n+    public static final String HOSTINGREDIRECTOR = \"hostingRedirector\";\n+    public static final String OVERVIEW = \"overviewDoc\";\n+    public static final String TMODELINSTANCE = \"tmodelInstance\";\n+    public static final String BINDINGTEMPLATE = \"bindingTemplate\";\n+    public static final String BINDINGKEY = \"bindingKey\";\n+    public static final String BUSINESSKEY = \"businessKey\";\n+    public static final String SERVICEKEY = \"serviceKey\";\n+    //public static final String CLICK_TO_EDIT = \"Click to edit\";\n+    public static final String DESCRIPTION = \"Description\";\n+    public static final String DISCOVERYURL = \"disco\";\n+    public static final String PHONE = \"Phone\";\n+    public static final String ADDRESS = \"Address\";\n+    public static final String ADDRESSLINE = \"addressLine\";\n+    public static final String CONTACT_PREFIX = \"contact\";\n+    public static final String NAME = \"Name\";\n+    public static final String LANG = \"Lang\";\n+    public static final String VALUE = \"Value\";\n+    public static final String TYPE = \"Type\";\n+    public static final String EMAIL = \"Email\";\n+    public static final String SORTCODE = \"Sortcode\";\n+    public static final String KEYNAME = \"KeyName\";\n+    public static final String KEYVALUE = \"KeyValue\";\n+    public static final String CATBAG_KEY_REF = \"catbagkeyref\";\n+    public static final String IDENT_KEY_REF = \"identbagkeyref\";\n+    public static final String CATBAG_KEY_REF_GRP = \"catbaggrpkeyref\";\n+    public static final String KEY_REF = \"keyref\";\n+    public static final String TMODEL_DELETED = \"isDeleted\";\n+    \n+\n+}\n", "diff --git a/juddiv3-war/src/main/java/org/apache/juddi/adminconsole/StartupServlet.java b/juddiv3-war/src/main/java/org/apache/juddi/adminconsole/StartupServlet.java\nnew file mode 100644\nindex 000000000..ec21089ee\n--- /dev/null\n+++ b/juddiv3-war/src/main/java/org/apache/juddi/adminconsole/StartupServlet.java\n@@ -0,0 +1,119 @@\n+/*\n+ * To change this template, choose Tools | Templates\n+ * and open the template in the editor.\n+ */\n+package org.apache.juddi.adminconsole;\n+\n+import java.io.FileOutputStream;\n+import java.io.InputStream;\n+import java.util.Properties;\n+import java.util.logging.Level;\n+import java.util.logging.Logger;\n+import javax.servlet.ServletContextEvent;\n+\n+/**\n+ * This startup servlet's job is to generate an encryption key which will be\n+ * used for encrypting cached user credentials in the http session object\n+ *\n+ * @author <a href=\"mailto:alexoree@apache.org\">Alex O'Ree</a>\n+ */\n+public class StartupServlet implements javax.servlet.ServletContextListener {\n+\n+        static final Logger log = Logger.getLogger(StartupServlet.class.getCanonicalName());\n+\n+        /**\n+         * creates a new AES key and stores it to the properties files\n+         *\n+         * @param sce\n+         */\n+        public void contextInitialized(ServletContextEvent sce) {\n+                log.info(\"juddi-admin gui startup\");\n+                FileOutputStream fos = null;\n+                try {\n+                        //URL resource = sce.getServletContext().getResource(\"/META-INF/config.properties\");\n+                        Properties p = new Properties();\n+\n+                        log.info(\"Attempting to generate 256 bit AES key\");\n+                        boolean ok = false;\n+                        String key = AES.GEN(256);\n+                        if (key == null) {\n+                                ok = false;\n+                        } else {\n+                                if (AES.ValidateKey(key)) {\n+                                        log.info(\"Generation of 256 bit AES key successful\");\n+                                        ok = true;\n+                                } else {\n+                                        log.info(\"256 bit key validation failed.\");\n+                                }\n+                        }\n+                        if (!ok) {\n+                                log.info(\"Attempting to generate 128 bit AES key\");\n+                                key = AES.GEN(128);\n+                                if (key == null) {\n+                                        log.log(Level.SEVERE, \"128 bit key generation failed! user's won't be able to login!\");\n+                                        return;\n+                                } else if (AES.ValidateKey(key)) {\n+                                        log.info(\"Generation of 128 bit AES key successful\");\n+                                } else {\n+                                        log.severe(\"128 bit key validation failed! giving up, user's won't be able to login! \");\n+                                        return;\n+\n+                                }\n+                        }\n+\n+                        p.put(\"key\", key);\n+                        fos = new FileOutputStream(sce.getServletContext().getRealPath(\"/WEB-INF/config.properties\"));\n+\n+                        log.log(Level.INFO, \"Storing key to \" + sce.getServletContext().getRealPath(\"/WEB-INF/config.properties\"));\n+                        p.store(fos, \"No comments\");\n+                        fos.flush();\n+                        fos.close();\n+                } catch (Exception ex) {\n+                        log.log(Level.WARNING, null, ex);\n+                        try {\n+                                if (fos != null) {\n+                                        fos.close();\n+                                }\n+                        } catch (Exception e) {\n+                        }\n+                }\n+        }\n+\n+        /**\n+         * does nothing\n+         *\n+         * @param sce\n+         */\n+        public void contextDestroyed(ServletContextEvent sce) {\n+                FileOutputStream fos = null;\n+                try {\n+                        log.info(\"Cleaning up juddi-admin\");\n+                        Properties p = new Properties();\n+                        InputStream is = sce.getServletContext().getResourceAsStream(\"/WEB-INF/config.properties\");\n+                        p.load(is);\n+                        p.remove(\"key\");\n+                        is.close();\n+                        fos = new FileOutputStream(sce.getServletContext().getRealPath(\"/WEB-INF/config.properties\"));\n+                        p.store(fos, \"No comments\");\n+                        fos.flush();\n+                        fos.close();\n+                } catch (Exception ex) {\n+                        log.log(Level.WARNING, null, ex);\n+                        try {\n+                                if (fos != null) {\n+                                        fos.close();\n+                                }\n+                        } catch (Exception e) {\n+                        }\n+                }\n+                try {\n+                        sce.getServletContext().removeAttribute(\"username\");\n+                        sce.getServletContext().removeAttribute(\"password\");\n+                        sce.getServletContext().removeAttribute(\"locale\");\n+                        sce.getServletContext().removeAttribute(\"hub\");\n+                } catch (Exception ex) {\n+                        log.log(Level.WARNING, null, ex);\n+                }\n+\n+        }\n+}\n", "diff --git a/juddiv3-war/src/main/java/org/apache/juddi/adminconsole/hub/UddiAdminHub.java b/juddiv3-war/src/main/java/org/apache/juddi/adminconsole/hub/UddiAdminHub.java\nnew file mode 100644\nindex 000000000..adf466955\n--- /dev/null\n+++ b/juddiv3-war/src/main/java/org/apache/juddi/adminconsole/hub/UddiAdminHub.java\n@@ -0,0 +1,929 @@\n+package org.apache.juddi.adminconsole.hub;\n+\n+/*\n+ * Copyright 2001-2013 The Apache Software Foundation.\n+ * \n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ * \n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ * \n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ *\n+ */\n+import java.io.InputStream;\n+import java.io.StringReader;\n+import java.io.StringWriter;\n+import java.net.URL;\n+import java.rmi.RemoteException;\n+import java.util.Map;\n+import java.util.Properties;\n+import java.util.logging.Level;\n+import java.util.logging.Logger;\n+import javax.servlet.ServletContext;\n+import javax.servlet.http.HttpServletRequest;\n+import javax.servlet.http.HttpSession;\n+import javax.xml.bind.JAXB;\n+import javax.xml.datatype.DatatypeConfigurationException;\n+import javax.xml.transform.OutputKeys;\n+import javax.xml.transform.Transformer;\n+import javax.xml.transform.TransformerFactory;\n+import javax.xml.transform.stream.StreamResult;\n+import javax.xml.transform.stream.StreamSource;\n+import javax.xml.ws.BindingProvider;\n+import org.apache.commons.configuration.ConfigurationException;\n+import org.apache.commons.lang.StringEscapeUtils;\n+import org.apache.commons.logging.Log;\n+import org.apache.commons.logging.LogFactory;\n+import org.apache.juddi.api_v3.Clerk;\n+import org.apache.juddi.api_v3.ClerkDetail;\n+import org.apache.juddi.api_v3.ClientSubscriptionInfoDetail;\n+import org.apache.juddi.api_v3.DeleteClientSubscriptionInfo;\n+import org.apache.juddi.api_v3.DeletePublisher;\n+import org.apache.juddi.api_v3.GetAllPublisherDetail;\n+import org.apache.juddi.api_v3.GetPublisherDetail;\n+import org.apache.juddi.api_v3.Node;\n+import org.apache.juddi.api_v3.Publisher;\n+import org.apache.juddi.api_v3.PublisherDetail;\n+import org.apache.juddi.api_v3.SaveClerk;\n+import org.apache.juddi.api_v3.SaveClientSubscriptionInfo;\n+import org.apache.juddi.api_v3.SaveNode;\n+import org.apache.juddi.api_v3.SavePublisher;\n+import org.apache.juddi.api_v3.SyncSubscription;\n+import org.apache.juddi.api_v3.SyncSubscriptionDetail;\n+import org.apache.juddi.v3.client.UDDIConstants;\n+import org.apache.juddi.v3.client.config.ClientConfig;\n+import org.apache.juddi.v3.client.config.UDDIClient;\n+import org.apache.juddi.v3.client.config.UDDINode;\n+import org.apache.juddi.v3.client.transport.Transport;\n+import org.apache.juddi.v3_service.JUDDIApiPortType;\n+import org.apache.juddi.adminconsole.AES;\n+import org.apache.juddi.adminconsole.resources.ResourceLoader;\n+import org.uddi.api_v3.AuthToken;\n+import org.uddi.api_v3.DeleteTModel;\n+import org.uddi.api_v3.DiscardAuthToken;\n+import org.uddi.api_v3.DispositionReport;\n+import org.uddi.api_v3.FindBusiness;\n+import org.uddi.api_v3.FindQualifiers;\n+import org.uddi.api_v3.GetAuthToken;\n+import org.uddi.api_v3.Name;\n+\n+import org.uddi.v3_service.DispositionReportFaultMessage;\n+import org.uddi.v3_service.UDDISecurityPortType;\n+\n+/**\n+ * UddiHub - The hub acts as a single point for managing browser to uddi\n+ * services. At most 1 instance is allowed per http session. In general, all\n+ * methods in the class trigger web service call outs. All callouts also support\n+ * expired UDDI tokens and will attempt to reauthenticate and retry the request.\n+ *\n+ * @author <a href=\"mailto:alexoree@apache.org\">Alex O'Ree</a>\n+ */\n+public class UddiAdminHub {\n+\n+        /**\n+         * The logger name\n+         */\n+        public static final String LOGGER_NAME = \"org.apache.juddi\";\n+        transient AuthStyle style = null;\n+        Properties properties = null;\n+        /**\n+         * The Log4j logger. This is also referenced from the Builders class,\n+         * thus it is public\n+         */\n+        public static final Log log = LogFactory.getLog(LOGGER_NAME);\n+\n+        private UddiAdminHub() throws DatatypeConfigurationException {\n+                //    df = DatatypeFactory.newInstance();\n+        }\n+\n+        /**\n+         * removes the Hub from the current http session\n+         *\n+         * @param _session\n+         */\n+        public static void reset(HttpSession _session) {\n+                _session.removeAttribute(\"hub\");\n+                // token = null;\n+        }\n+\n+        /**\n+         * This kills any authentication tokens, logs the user out and nulls out\n+         * all services\n+         */\n+        public void die() {\n+                if (token != null && security != null) {\n+                        DiscardAuthToken da = new DiscardAuthToken();\n+                        da.setAuthInfo(token);\n+                        try {\n+                                security.discardAuthToken(da);\n+                        } catch (Exception ex) {\n+                                HandleException(ex);\n+                        }\n+                }\n+                token = null;\n+                security = null;\n+                juddi = null;\n+        }\n+        /**\n+         * the name of the 'node' property in the config\n+         */\n+        public static final String PROP_CONFIG_NODE = \"config.props.node\";\n+        /**\n+         *\n+         */\n+        public static final String PROP_AUTH_TYPE = \"config.props.authtype\";\n+        /**\n+         *\n+         */\n+        public static final String PROP_AUTO_LOGOUT = \"config.props.automaticLogouts.enable\";\n+        /**\n+         *\n+         */\n+        public static final String PROP_AUTO_LOGOUT_TIMER = \"config.props.automaticLogouts.duration\";\n+        /**\n+         *\n+         */\n+        public static final String PROP_PREFIX = \"config.props.\";\n+        /**\n+         *\n+         *\n+         */\n+        public static final String PROP_ADMIN_LOCALHOST_ONLY = \"config.props.configLocalHostOnly\";\n+\n+        private transient UDDISecurityPortType security = null;\n+        private transient JUDDIApiPortType juddi = null;\n+        private transient String token = null;\n+        private transient HttpSession session;\n+        private transient Transport transport = null;\n+        private transient ClientConfig clientConfig;\n+        private static final long serialVersionUID = 1L;\n+        private String nodename = \"default\";\n+        private final String clientName = \"juddigui\";\n+        private boolean WS_Transport = false;\n+        private boolean WS_securePorts = false;\n+\n+        /**\n+         * This is the singleton accessor UddiHub. There should be at most 1\n+         * instance per HTTP Session (user login)\n+         *\n+         * @param application\n+         * @param _session\n+         * @return\n+         * @throws Exception\n+         */\n+        public static UddiAdminHub getInstance(ServletContext application, HttpSession _session) throws Exception {\n+                Object j = _session.getAttribute(\"hub\");\n+                if (j == null) {\n+                        UddiAdminHub hub = new UddiAdminHub(application, _session);\n+                        _session.setAttribute(\"hub\", hub);\n+                        return hub;\n+                }\n+\n+                return (UddiAdminHub) j;\n+        }\n+        String locale = \"en\";\n+\n+        private UddiAdminHub(ServletContext application, HttpSession _session) throws Exception {\n+                URL prop = application.getResource(\"/WEB-INF/config.properties\");\n+                if (prop == null) {\n+                        application.getResource(\"WEB-INF/config.properties\");\n+                }\n+                if (prop == null) {\n+                        throw new Exception(\"Cannot locate the configuration file.\");\n+                }\n+                session = _session;\n+\n+                InputStream in = prop.openStream();\n+                Properties p = new Properties();\n+                p.load(in);\n+                in.close();\n+                session = _session;\n+                properties = p;\n+                EnsureConfig();\n+        }\n+\n+        private void EnsureConfig() {\n+                if (clientConfig == null) {\n+                        try {\n+                                UDDIClient client = new UDDIClient();\n+\n+                                clientConfig = client.getClientConfig();\n+                                try {\n+                                        style = AuthStyle.valueOf(clientConfig.getConfiguration().getString(PROP_AUTH_TYPE));\n+                                } catch (Exception ex) {\n+                                        log.warn(\"'UDDI_AUTH' is not defined in the config (\" + PROP_AUTH_TYPE + \")! defaulting to UDDI_AUTH\");\n+                                        style = AuthStyle.UDDI_AUTH;\n+                                }\n+\n+                                nodename = clientConfig.getConfiguration().getString(PROP_CONFIG_NODE);\n+                                if (nodename == null || nodename.equals(\"\")) {\n+                                        log.warn(\"'node' is not defined in the config! defaulting to 'default'\");\n+                                        nodename = \"default\";\n+                                }\n+                                UDDINode uddiNode = clientConfig.getUDDINode(nodename);\n+\n+                                String clazz = uddiNode.getProxyTransport();\n+                                if (clazz.contains(\"JAXWSTransport\")) {\n+                                        WS_Transport = true;\n+                                }\n+\n+                                transport = client.getTransport(nodename);\n+                                security = transport.getUDDISecurityService();\n+                                juddi = transport.getJUDDIApiService();\n+                                if (WS_Transport) {\n+                                        if (uddiNode.getJuddiApiUrl().toLowerCase().startsWith(\"https://\")\n+                                                && (uddiNode.getSecurityUrl() != null && uddiNode.getSecurityUrl().toLowerCase().startsWith(\"https://\"))) {\n+                                                WS_securePorts = true;\n+                                        }\n+                                }\n+\n+                        } catch (Exception ex) {\n+                                HandleException(ex);\n+                        }\n+                }\n+\n+        }\n+\n+        /**\n+         * This function provides a basic error handling rutine that will pull\n+         * out the true error message in a UDDI fault message, returning\n+         * bootstrap stylized html error message\n+         *\n+         * @param ex\n+         * @return\n+         */\n+        private String HandleException(Exception ex) {\n+                if (ex instanceof DispositionReportFaultMessage) {\n+                        DispositionReportFaultMessage f = (DispositionReportFaultMessage) ex;\n+                        log.error(ex.getMessage() + (f.detail != null && f.detail.getMessage() != null ? StringEscapeUtils.escapeHtml(f.detail.getMessage()) : \"\"));\n+                        log.debug(ex.getMessage(), ex);\n+                        return ResourceLoader.GetResource(session, \"errors.uddi\") + \" \" + StringEscapeUtils.escapeHtml(ex.getMessage()) + \" \" + (f.detail != null && f.detail.getMessage() != null ? StringEscapeUtils.escapeHtml(f.detail.getMessage()) : \"\");\n+                } else if (ex instanceof RemoteException) {\n+                        RemoteException f = (RemoteException) ex;\n+                        log.error(\"RemoteException \" + ex.getMessage());\n+                        log.debug(\"RemoteException \" + ex.getMessage(), ex);\n+                        return ResourceLoader.GetResource(session, \"errors.generic\") + \" \" + StringEscapeUtils.escapeHtml(ex.getMessage()) + \" \" + (f.detail != null && f.detail.getMessage() != null ? StringEscapeUtils.escapeHtml(f.detail.getMessage()) : \"\");\n+                } else if (ex instanceof NullPointerException) {\n+                        log.error(\"NPE! Please report! \" + ex.getMessage(), ex);\n+                        log.debug(\"NPE! Please report! \" + ex.getMessage(), ex);\n+                        return ResourceLoader.GetResource(session, \"errors.generic\") + \" \" + StringEscapeUtils.escapeHtml(ex.getMessage());\n+                } else {\n+                        log.error(\"Unexpected error \" + ex.getMessage(), ex);\n+                        //log.debug(ex.getMessage(), ex);\n+                        return ResourceLoader.GetResource(session, \"errors.generic\") + \" \" + StringEscapeUtils.escapeHtml(ex.getMessage());\n+                }\n+        }\n+\n+        /**\n+         * returns true if we are using JAXWS transport AND all of the URLs\n+         * start with https://\n+         *\n+         * @return\n+         */\n+        public boolean isSecure() {\n+\n+                EnsureConfig();\n+                return WS_securePorts;\n+        }\n+\n+        /**\n+         * gets a reference to the current juddi client config file. this is a\n+         * live instance changes can be stored to disk, usually\n+         *\n+         * @return\n+         * @throws ConfigurationException g\n+         */\n+        public ClientConfig GetJuddiClientConfig() throws ConfigurationException {\n+                EnsureConfig();\n+                return clientConfig;\n+        }\n+\n+        /**\n+         * Handles all API calls to the juddi web service\n+         *\n+         * @param parameters\n+         * @return\n+         */\n+        public String go(HttpServletRequest parameters) {\n+                try {\n+                        String action = parameters.getParameter(\"soapaction\");\n+                        if (action.equalsIgnoreCase(\"adminDelete_tmodel\")) {\n+                                return adminDelete_tmodel(parameters);\n+                        }\n+                        if (action.equalsIgnoreCase(\"delete_ClientSubscriptionInfo\")) {\n+                                return delete_ClientSubscriptionInfo(parameters);\n+                        }\n+                        if (action.equalsIgnoreCase(\"delete_publisher\")) {\n+                                return delete_publisher(parameters);\n+                        }\n+                        if (action.equalsIgnoreCase(\"getAllPublisherDetail\")) {\n+                                return getAllPublisherDetail(parameters);\n+                        }\n+                        if (action.equalsIgnoreCase(\"get_publisherDetail\")) {\n+                                return get_publisherDetail(parameters);\n+                        }\n+                        if (action.equalsIgnoreCase(\"invoke_SyncSubscription\")) {\n+                                return invoke_SyncSubscription(parameters);\n+                        }\n+                        if (action.equalsIgnoreCase(\"save_Clerk\")) {\n+                                return save_Clerk(parameters);\n+                        }\n+                        if (action.equalsIgnoreCase(\"save_ClientSubscriptionInfo\")) {\n+                                return save_ClientSubscriptionInfo(parameters);\n+                        }\n+                        if (action.equalsIgnoreCase(\"save_Node\")) {\n+                                return save_Node(parameters);\n+                        }\n+                        if (action.equalsIgnoreCase(\"save_publisher\")) {\n+                                return save_publisher(parameters);\n+                        }\n+                } catch (Exception ex) {\n+                        return \"Error!\" + HandleException(ex);\n+                }\n+                return \"not yet implemented!\";\n+        }\n+\n+        private String save_Clerk(HttpServletRequest parameters) {\n+                SaveClerk sc = new SaveClerk();\n+                sc.setAuthInfo(GetToken());\n+                Clerk c = new Clerk();\n+                c.setName(parameters.getParameter(\"CLERKsetName\"));\n+                Node node = new Node();\n+                node.setClientName(parameters.getParameter(\"CLERKNODEsetClientName\"));\n+                node.setCustodyTransferUrl(parameters.getParameter(\"CLERKNODEsetCustodyTransferUrl\"));\n+                node.setDescription(parameters.getParameter(\"CLERKNODEsetDescription\"));\n+                node.setFactoryInitial(parameters.getParameter(\"CLERKNODEsetFactoryInitial\"));\n+                node.setFactoryNamingProvider(parameters.getParameter(\"CLERKNODEsetFactoryNamingProvider\"));\n+                node.setFactoryURLPkgs(parameters.getParameter(\"CLERKNODEsetFactoryURLPkgs\"));\n+                node.setInquiryUrl(parameters.getParameter(\"CLERKNODEsetInquiryUrl\"));\n+                node.setJuddiApiUrl(parameters.getParameter(\"CLERKNODEsetJuddiApiUrl\"));\n+                node.setName(parameters.getParameter(\"CLERKNODEsetName\"));\n+                node.setProxyTransport(parameters.getParameter(\"CLERKNODEsetProxyTransport\"));\n+                node.setPublishUrl(parameters.getParameter(\"CLERKNODEsetPublishUrl\"));\n+                node.setReplicationUrl(parameters.getParameter(\"CLERKNODEsetReplicationUrl\"));\n+                node.setSecurityUrl(parameters.getParameter(\"CLERKNODEsetSecurityUrl\"));\n+                node.setSubscriptionListenerUrl(parameters.getParameter(\"CLERKNODEsetSubscriptionListenerUrl\"));\n+                node.setSubscriptionUrl(parameters.getParameter(\"CLERKNODEsetSubscriptionUrl\"));\n+                c.setNode(node);\n+                c.setPassword(parameters.getParameter(\"CLERKsetPassword\"));\n+                c.setPublisher(parameters.getParameter(\"CLERKsetPublisher\"));\n+\n+                sc.getClerk().add(c);\n+                try {\n+                        juddi.saveClerk(sc);\n+                } catch (Exception ex) {\n+                        if (isExceptionExpiration(ex)) {\n+                                token = null;\n+                                sc.setAuthInfo(GetToken());\n+                                try {\n+                                        juddi.saveClerk(sc);\n+                                } catch (Exception ex1) {\n+                                        return \"Error!\" + HandleException(ex1);\n+                                }\n+\n+                        } else {\n+                                return \"Error!\" + HandleException(ex);\n+                        }\n+                }\n+                return \"Success\";\n+        }\n+\n+        private String save_Node(HttpServletRequest parameters) {\n+                SaveNode sn = new SaveNode();\n+                sn.setAuthInfo(GetToken());\n+                Node node = new Node();\n+                node.setClientName(parameters.getParameter(\"NODEsetClientName\"));\n+                node.setCustodyTransferUrl(parameters.getParameter(\"NODEsetCustodyTransferUrl\"));\n+                node.setDescription(parameters.getParameter(\"NODEsetDescription\"));\n+                node.setFactoryInitial(parameters.getParameter(\"NODEsetFactoryInitial\"));\n+                node.setFactoryNamingProvider(parameters.getParameter(\"NODEsetFactoryNamingProvider\"));\n+                node.setFactoryURLPkgs(parameters.getParameter(\"NODEsetFactoryURLPkgs\"));\n+                node.setInquiryUrl(parameters.getParameter(\"NODEsetInquiryUrl\"));\n+                node.setJuddiApiUrl(parameters.getParameter(\"NODEsetJuddiApiUrl\"));\n+                node.setName(parameters.getParameter(\"NODEsetName\"));\n+                node.setProxyTransport(parameters.getParameter(\"NODEsetProxyTransport\"));\n+                node.setPublishUrl(parameters.getParameter(\"NODEsetPublishUrl\"));\n+                node.setReplicationUrl(parameters.getParameter(\"NODEsetReplicationUrl\"));\n+                node.setSecurityUrl(parameters.getParameter(\"NODEsetSecurityUrl\"));\n+                node.setSubscriptionListenerUrl(parameters.getParameter(\"NODEsetSubscriptionListenerUrl\"));\n+                node.setSubscriptionUrl(parameters.getParameter(\"NODEsetSubscriptionUrl\"));\n+                sn.getNode().add(node);\n+\n+                try {\n+                        juddi.saveNode(sn);\n+                } catch (Exception ex) {\n+                        if (isExceptionExpiration(ex)) {\n+                                token = null;\n+                                sn.setAuthInfo(GetToken());\n+                                try {\n+                                        juddi.saveNode(sn);\n+                                } catch (Exception ex1) {\n+                                        return \"Error!\" + HandleException(ex1);\n+                                }\n+\n+                        } else {\n+                                return \"Error!\" + HandleException(ex);\n+                        }\n+                }\n+                return \"Success\";\n+        }\n+\n+        public enum AuthStyle {\n+\n+                /**\n+                 * Http\n+                 */\n+                HTTP,\n+                /**\n+                 * UDDI Authentication via the Security API\n+                 */\n+                UDDI_AUTH\n+        }\n+\n+        private String GetToken() {\n+                EnsureConfig();\n+                if (style != AuthStyle.UDDI_AUTH) {\n+                        BindingProvider bp = null;\n+                        if (WS_Transport) {\n+                                Map<String, Object> context = null;\n+                                bp = (BindingProvider) juddi;\n+                                context = bp.getRequestContext();\n+                                context.put(BindingProvider.USERNAME_PROPERTY, session.getAttribute(\"username\"));\n+                                context.put(BindingProvider.USERNAME_PROPERTY, session.getAttribute(AES.Decrypt(\"password\", (String) properties.get(\"key\"))));\n+                        }\n+                        return null;\n+                } else {\n+                        if (token != null) {\n+                                return token;\n+                        }\n+                        GetAuthToken req = new GetAuthToken();\n+                        if (session.getAttribute(\"username\") != null\n+                                && session.getAttribute(\"password\") != null) {\n+                                req.setUserID((String) session.getAttribute(\"username\"));\n+                                req.setCred(AES.Decrypt((String) session.getAttribute(\"password\"), (String) properties.get(\"key\")));\n+                                try {\n+                                        AuthToken authToken = security.getAuthToken(req);\n+                                        token = authToken.getAuthInfo();\n+                                } catch (Exception ex) {\n+                                        return HandleException(ex);\n+                                }\n+                        }\n+                }\n+                return token;\n+        }\n+\n+        private String delete_publisher(HttpServletRequest parameters) {\n+                DeletePublisher sb = new DeletePublisher();\n+                sb.setAuthInfo(GetToken());\n+                sb.getPublisherId().add(parameters.getParameter(\"delete_publisherKEY\"));\n+                try {\n+                        juddi.deletePublisher(sb);\n+                } catch (Exception ex) {\n+                        if (isExceptionExpiration(ex)) {\n+                                token = null;\n+                                sb.setAuthInfo(GetToken());\n+                                try {\n+                                        juddi.deletePublisher(sb);\n+                                } catch (Exception e) {\n+                                        return HandleException(e);\n+                                }\n+\n+                        } else {\n+                                return HandleException(ex);\n+                        }\n+                }\n+                return \"Success\";\n+        }\n+\n+        private String getAllPublisherDetail(HttpServletRequest parameters) {\n+                StringBuilder ret = new StringBuilder();\n+                GetAllPublisherDetail sb = new GetAllPublisherDetail();\n+                sb.setAuthInfo(GetToken());\n+                PublisherDetail d = null;\n+                try {\n+                        d = juddi.getAllPublisherDetail(sb);\n+                } catch (Exception ex) {\n+                        if (isExceptionExpiration(ex)) {\n+                                token = null;\n+                                sb.setAuthInfo(GetToken());\n+                                try {\n+                                        d = juddi.getAllPublisherDetail(sb);\n+                                } catch (Exception ex1) {\n+                                        return HandleException(ex);\n+                                }\n+\n+                        } else {\n+                                return HandleException(ex);\n+                        }\n+                }\n+                if (d != null) {\n+                        ret.append(\"<table class=\\\"table table-hover\\\"><tr><th>Name</th><th>Info</th></tr>\");\n+                        for (int i = 0; i < d.getPublisher().size(); i++) {\n+                                ret.append(\"<tr><td>\").append(StringEscapeUtils.escapeHtml(d.getPublisher().get(i).getPublisherName()))\n+                                        .append(\"</td><td>\");\n+                                ret.append(PrintPublisherDetail(d.getPublisher().get(i)))\n+                                        .append(\"</td></tr>\");\n+                        }\n+                        ret.append(\"</table>\");\n+                } else {\n+                        ret.append(\"No data returned\");\n+                }\n+                return ret.toString();\n+        }\n+\n+        private String PrintPublisherDetail(Publisher p) {\n+                StringBuilder ret = new StringBuilder();\n+\n+                ret.append(\"Authorized Name = \").append(StringEscapeUtils.escapeHtml(p.getAuthorizedName()))\n+                        .append(\"<br>\")\n+                        .append(\"Publisher Name = \").append(StringEscapeUtils.escapeHtml(p.getPublisherName()))\n+                        .append(\"<br>\")\n+                        .append(\"Email = \")\n+                        .append(StringEscapeUtils.escapeHtml(p.getEmailAddress()))\n+                        .append(\"<br>\")\n+                        .append(\"Administrator = \")\n+                        .append((p.isIsAdmin()))\n+                        .append(\"<br>\")\n+                        .append(\"Enabled = \")\n+                        .append((p.isIsEnabled()))\n+                        .append(\"<br>\")\n+                        .append(\"Max Bindings per = \")\n+                        .append(p.getMaxBindingsPerService())\n+                        .append(\"<br>\")\n+                        .append(\"Max Businesses = \")\n+                        .append(p.getMaxBusinesses())\n+                        .append(\"<br>\")\n+                        .append(\"Max Services per = \")\n+                        .append(p.getMaxServicePerBusiness())\n+                        .append(\"<br>\")\n+                        .append(\"Max tModels = \")\n+                        .append(p.getMaxTModels())\n+                        .append(\"\");\n+                return ret.toString();\n+        }\n+\n+        private String get_publisherDetail(HttpServletRequest parameters) {\n+                StringBuilder ret = new StringBuilder();\n+                GetPublisherDetail sb = new GetPublisherDetail();\n+                sb.getPublisherId().add(parameters.getParameter(\"get_publisherDetailKEY\"));\n+                sb.setAuthInfo(GetToken());\n+                PublisherDetail d = null;\n+                try {\n+                        d = juddi.getPublisherDetail(sb);\n+                } catch (Exception ex) {\n+                        if (isExceptionExpiration(ex)) {\n+                                token = null;\n+                                sb.setAuthInfo(GetToken());\n+                                try {\n+                                        d = juddi.getPublisherDetail(sb);\n+                                } catch (Exception ex1) {\n+                                        return HandleException(ex);\n+                                }\n+\n+                        } else {\n+                                return HandleException(ex);\n+                        }\n+                }\n+                if (d != null) {\n+                        ret.append(\"<table class=\\\"table table-hover\\\"><tr><th>Name</th><th>Info</th></tr>\");\n+                        for (int i = 0; i < d.getPublisher().size(); i++) {\n+                                ret.append(\"<tr><td>\").append(StringEscapeUtils.escapeHtml(d.getPublisher().get(i).getPublisherName()))\n+                                        .append(\"</td><td>\");\n+                                ret.append(PrintPublisherDetail(d.getPublisher().get(i)))\n+                                        .append(\"</td></tr>\");\n+                        }\n+                        ret.append(\"</table>\");\n+                } else {\n+                        ret.append(\"No data returned\");\n+                }\n+                return ret.toString();\n+        }\n+\n+        private String invoke_SyncSubscription(HttpServletRequest parameters) {\n+                StringBuilder ret = new StringBuilder();\n+                SyncSubscription sb = new SyncSubscription();\n+\n+                SyncSubscriptionDetail d = null;\n+                try {\n+                        StringReader sr = new StringReader(parameters.getParameter(\"invokeSyncSubscriptionXML\").trim());\n+                        sb = (JAXB.unmarshal(sr, SyncSubscription.class));\n+                        sb.setAuthInfo(GetToken());\n+                        d = juddi.invokeSyncSubscription(sb);\n+                } catch (Exception ex) {\n+                        if (isExceptionExpiration(ex)) {\n+                                token = null;\n+                                sb.setAuthInfo(GetToken());\n+                                try {\n+                                        d = juddi.invokeSyncSubscription(sb);\n+                                } catch (Exception ex1) {\n+                                        return HandleException(ex);\n+                                }\n+\n+                        } else {\n+                                return HandleException(ex);\n+                        }\n+                }\n+                if (d != null) {\n+                        ret.append(\"<pre>\");\n+                        StringWriter sw = new StringWriter();\n+                        JAXB.marshal(d, sw);\n+                        sw.append(PrettyPrintXML(sw.toString()));\n+                        ret.append(\"</pre>\");\n+                } else {\n+                        ret.append(\"No data returned\");\n+                }\n+                return ret.toString();\n+        }\n+\n+        private static String PrettyPrintXML(String input) {\n+                try {\n+                        Transformer transformer = TransformerFactory.newInstance().newTransformer();\n+                        transformer.setOutputProperty(OutputKeys.INDENT, \"yes\");\n+//initialize StreamResult with File object to save to file\n+                        StreamResult result = new StreamResult(new StringWriter());\n+                        StreamSource source = new StreamSource(new StringReader(input));\n+                        transformer.transform(source, result);\n+                        String xmlString = result.getWriter().toString();\n+                        return (xmlString);\n+                } catch (Exception ex) {\n+                }\n+                return null;\n+        }\n+\n+        private String save_ClientSubscriptionInfo(HttpServletRequest parameters) {\n+                StringBuilder ret = new StringBuilder();\n+                SaveClientSubscriptionInfo sb = new SaveClientSubscriptionInfo();\n+\n+                ClientSubscriptionInfoDetail d = null;\n+                try {\n+                        StringReader sr = new StringReader(parameters.getParameter(\"invokeSyncSubscriptionXML\").trim());\n+                        sb = (JAXB.unmarshal(sr, SaveClientSubscriptionInfo.class));\n+                        sb.setAuthInfo(GetToken());\n+                        d = juddi.saveClientSubscriptionInfo(sb);\n+                } catch (Exception ex) {\n+                        if (ex instanceof DispositionReportFaultMessage) {\n+                                DispositionReportFaultMessage f = (DispositionReportFaultMessage) ex;\n+                                if (f.getFaultInfo().countainsErrorCode(DispositionReport.E_AUTH_TOKEN_EXPIRED)) {\n+                                        token = null;\n+                                        sb.setAuthInfo(GetToken());\n+                                        try {\n+                                                d = juddi.saveClientSubscriptionInfo(sb);\n+                                        } catch (Exception ex1) {\n+                                                return HandleException(ex);\n+                                        }\n+                                }\n+                        } else {\n+                                return HandleException(ex);\n+                        }\n+                }\n+                if (d != null) {\n+                        ret.append(\"<pre>\");\n+                        StringWriter sw = new StringWriter();\n+                        JAXB.marshal(d, sw);\n+                        sw.append(PrettyPrintXML(sw.toString()));\n+                        ret.append(\"</pre>\");\n+                } else {\n+                        ret.append(\"No data returned\");\n+                }\n+                return ret.toString();\n+        }\n+\n+        /**\n+         * return true if the word expire is in the exception or the UDDI error\n+         * code representing an expired token\n+         *\n+         * @param ex\n+         * @return r\n+         */\n+        public static boolean isExceptionExpiration(Exception ex) {\n+                if (ex == null) {\n+                        return false;\n+                }\n+                if (ex instanceof DispositionReportFaultMessage) {\n+                        DispositionReportFaultMessage f = (DispositionReportFaultMessage) ex;\n+                        if (f.getFaultInfo().countainsErrorCode(DispositionReport.E_AUTH_TOKEN_EXPIRED) || ex.getMessage().contains(DispositionReport.E_AUTH_TOKEN_EXPIRED) || ex.getMessage().toLowerCase().contains(\"expired\")) {\n+                                return true;\n+                        }\n+                }\n+\n+                if (ex.getMessage() == null) {\n+                        return false;\n+                }\n+                if (ex.getMessage().toLowerCase().contains(\"expire\")) {\n+                        return true;\n+                }\n+\n+                if (ex.getMessage().toLowerCase().contains(DispositionReport.E_AUTH_TOKEN_EXPIRED.toLowerCase())) {\n+                        return true;\n+                }\n+                if (ex.getLocalizedMessage() == null) {\n+                        return false;\n+                }\n+                if (ex.getLocalizedMessage().toLowerCase().contains(\"expire\")) {\n+                        return true;\n+                }\n+                return false;\n+        }\n+\n+        private String save_publisher(HttpServletRequest parameters) {\n+\n+                SavePublisher sb = new SavePublisher();\n+                Publisher p = new Publisher();\n+                p.setAuthorizedName(parameters.getParameter(\"savePublisherAuthorizedName\"));\n+                p.setPublisherName(parameters.getParameter(\"savePublisherNAME\"));\n+                p.setEmailAddress(parameters.getParameter(\"savePublisherEMAIL\"));\n+                try {\n+                        p.setIsAdmin(Boolean.parseBoolean(parameters.getParameter(\"savePublisherIsAdmin\")));\n+                } catch (Exception ex) {\n+                }\n+                if (\"on\".equalsIgnoreCase(parameters.getParameter(\"savePublisherIsAdmin\"))) {\n+                        p.setIsAdmin(true);\n+                }\n+                try {\n+                        p.setIsEnabled(Boolean.parseBoolean(parameters.getParameter(\"savePublisherIsEnabled\")));\n+                } catch (Exception ex) {\n+                }\n+                if (\"on\".equalsIgnoreCase(parameters.getParameter(\"savePublisherIsEnabled\"))) {\n+                        p.setIsEnabled(true);\n+                }\n+\n+                PublisherDetail d = null;\n+                sb.setAuthInfo(GetToken());\n+                try {\n+                        if (parameters.getParameter(\"savePublisherMaxBindings\") != null) {\n+                                p.setMaxBindingsPerService(Integer.parseInt(parameters.getParameter(\"savePublisherMaxBindings\")));\n+                        }\n+                } catch (Exception ex) {\n+                }\n+                try {\n+                        if (parameters.getParameter(\"savePublisherMaxServices\") != null) {\n+                                p.setMaxServicePerBusiness(Integer.parseInt(parameters.getParameter(\"savePublisherMaxServices\")));\n+                        }\n+                } catch (Exception ex) {\n+                }\n+                try {\n+                        if (parameters.getParameter(\"savePublisherMaxBusiness\") != null) {\n+                                p.setMaxBusinesses(Integer.parseInt(parameters.getParameter(\"savePublisherMaxBusiness\")));\n+                        }\n+                } catch (Exception ex) {\n+                }\n+                try {\n+                        if (parameters.getParameter(\"savePublisherMaxTModels\") != null) {\n+                                p.setMaxTModels(Integer.parseInt(parameters.getParameter(\"savePublisherMaxTModels\")));\n+                        }\n+                } catch (Exception ex) {\n+                }\n+                sb.getPublisher().add(p);\n+                try {\n+\n+                        d = juddi.savePublisher(sb);\n+                } catch (Exception ex) {\n+\n+                        if (isExceptionExpiration(ex)) {\n+                                token = null;\n+                                sb.setAuthInfo(GetToken());\n+                                try {\n+                                        d = juddi.savePublisher(sb);\n+                                } catch (Exception ex1) {\n+                                        return HandleException(ex);\n+                                }\n+                        } else {\n+                                return HandleException(ex);\n+                        }\n+                }\n+                return \"Success\";\n+        }\n+\n+        private String adminDelete_tmodel(HttpServletRequest parameters) {\n+                DeleteTModel sb = new DeleteTModel();\n+                sb.getTModelKey().add(parameters.getParameter(\"adminDelete_tmodelKEY\"));\n+                sb.setAuthInfo(GetToken());\n+                try {\n+                        juddi.adminDeleteTModel(sb);\n+                } catch (Exception ex) {\n+                        if (isExceptionExpiration(ex)) {\n+                                token = null;\n+                                sb.setAuthInfo(GetToken());\n+                                try {\n+                                        juddi.adminDeleteTModel(sb);\n+                                } catch (Exception ex1) {\n+                                        return HandleException(ex);\n+                                }\n+                        } else {\n+                                return HandleException(ex);\n+                        }\n+                }\n+                return \"Success\";\n+        }\n+\n+        private String delete_ClientSubscriptionInfo(HttpServletRequest parameters) {\n+                DeleteClientSubscriptionInfo sb = new DeleteClientSubscriptionInfo();\n+                sb.getSubscriptionKey().add(parameters.getParameter(\"delete_ClientSubscriptionInfoKEY\"));\n+                sb.setAuthInfo(GetToken());\n+                try {\n+                        juddi.deleteClientSubscriptionInfo(sb);\n+                } catch (Exception ex) {\n+                        if (isExceptionExpiration(ex)) {\n+                                token = null;\n+                                sb.setAuthInfo(GetToken());\n+                                try {\n+                                        juddi.deleteClientSubscriptionInfo(sb);\n+                                } catch (Exception ex1) {\n+                                        return HandleException(ex);\n+                                }\n+\n+                        } else {\n+                                return HandleException(ex);\n+                        }\n+                }\n+                return \"Success\";\n+        }\n+\n+        /**\n+         * If false, the configuration page will be available from anywhere. If\n+         * true, it will only be accessible from the server hosting juddi-gui.\n+         * if not defined, the result is true.\n+         *\n+         * @return\n+         */\n+        public boolean isAdminLocalhostOnly() {\n+                return clientConfig.getConfiguration().getBoolean(PROP_ADMIN_LOCALHOST_ONLY, true);\n+        }\n+\n+        public String verifyLogin() {\n+                EnsureConfig();\n+                if (style != AuthStyle.UDDI_AUTH) {\n+                        if (WS_Transport) {\n+                                BindingProvider bp = null;\n+                                Map<String, Object> context = null;\n+\n+                                bp = (BindingProvider) juddi;\n+                                context = bp.getRequestContext();\n+                                context.put(BindingProvider.USERNAME_PROPERTY, session.getAttribute(\"username\"));\n+                                context.put(BindingProvider.USERNAME_PROPERTY, session.getAttribute(AES.Decrypt(\"password\", (String) properties.get(\"key\"))));\n+                        }\n+                        FindBusiness fb = new FindBusiness();\n+                        fb.setListHead(0);\n+                        fb.setMaxRows(1);\n+                        fb.setFindQualifiers(new FindQualifiers());\n+                        fb.getFindQualifiers().getFindQualifier().add(UDDIConstants.APPROXIMATE_MATCH);\n+                        fb.getName().add(new Name(UDDIConstants.WILDCARD, null));\n+                        try {\n+                                GetPublisherDetail publisherDetail = new GetPublisherDetail();\n+                                publisherDetail.getPublisherId().add((String) session.getAttribute(\"username\"));\n+                                juddi.getPublisherDetail(publisherDetail);\n+\n+                        } catch (Exception ex) {\n+                                return HandleException(ex);\n+                        }\n+                        /*\n+                         bp = (BindingProvider) juddi;\n+                         context = bp.getRequestContext();\n+                         context.put(BindingProvider.USERNAME_PROPERTY, session.getAttribute(\"username\"));\n+                         context.put(BindingProvider.USERNAME_PROPERTY, session.getAttribute(AES.Decrypt(\"password\", (String) properties.get(\"key\"))));*/\n+                        return null;\n+                } else {\n+                        if (token != null) {\n+                                return token;\n+                        }\n+                        if (WS_Transport) {\n+                                BindingProvider bp = null;\n+                                Map<String, Object> context = null;\n+\n+                                bp = (BindingProvider) juddi;\n+                                context = bp.getRequestContext();\n+                                context.remove(BindingProvider.USERNAME_PROPERTY);\n+                                context.remove(BindingProvider.PASSWORD_PROPERTY);\n+                        }\n+                        GetAuthToken req = new GetAuthToken();\n+                        try {\n+                                if (security == null) {\n+                                        security = transport.getUDDISecurityService();\n+                                }\n+                        } catch (Exception ex) {\n+                                return HandleException(ex);\n+                        }\n+                        if (session.getAttribute(\"username\") != null\n+                                && session.getAttribute(\"password\") != null) {\n+                                req.setUserID((String) session.getAttribute(\"username\"));\n+                                req.setCred(AES.Decrypt((String) session.getAttribute(\"password\"), (String) properties.get(\"key\")));\n+                                log.info(\"AUDIT: fetching auth token for \" + req.getUserID() + \" Auth Mode is \" + ((security == null) ? \"HTTP\" : \"AUTH_TOKEN\"));\n+                                try {\n+                                        AuthToken authToken = security.getAuthToken(req);\n+                                        token = authToken.getAuthInfo();\n+                                        return null;\n+                                } catch (Exception ex) {\n+                                        return HandleException(ex);\n+                                }\n+                        }\n+                }\n+                return \"Unexpected error\";\n+        }\n+\n+}\n", "diff --git a/juddiv3-war/src/main/java/org/apache/juddi/adminconsole/hub/builders/Builders.java b/juddiv3-war/src/main/java/org/apache/juddi/adminconsole/hub/builders/Builders.java\nnew file mode 100644\nindex 000000000..4fc76a151\n--- /dev/null\n+++ b/juddiv3-war/src/main/java/org/apache/juddi/adminconsole/hub/builders/Builders.java\n@@ -0,0 +1,959 @@\n+/*\n+ * Copyright 2001-2013 The Apache Software Foundation.\n+ * \n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ * \n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ * \n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ *\n+ */\n+package org.apache.juddi.adminconsole.hub.builders;\n+\n+import java.text.DateFormat;\n+import java.text.SimpleDateFormat;\n+import java.util.ArrayList;\n+import java.util.Date;\n+import java.util.GregorianCalendar;\n+import java.util.HashMap;\n+import java.util.Iterator;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.concurrent.atomic.AtomicReference;\n+import java.util.regex.Matcher;\n+import java.util.regex.Pattern;\n+import javax.servlet.http.HttpSession;\n+import javax.xml.datatype.DatatypeFactory;\n+import org.apache.commons.logging.Log;\n+import org.apache.commons.logging.LogFactory;\n+import org.apache.juddi.adminconsole.PostBackConstants;\n+import org.apache.juddi.adminconsole.resources.ResourceLoader;\n+import org.uddi.api_v3.*;\n+import org.uddi.sub_v3.Subscription;\n+import org.uddi.sub_v3.SubscriptionFilter;\n+\n+/**\n+ * This class provides functions for building UDDI entities from Http request\n+ * parameters\n+ *\n+ * @author <a href=\"mailto:alexoree@apache.org\">Alex O'Ree</a>\n+ */\n+public class Builders {\n+\n+    static Log log = LogFactory.getLog(Builders.class);\n+    /**\n+     * important - regex to separate postback names from indexes, do not remove\n+     * or alter\n+     */\n+    static final Pattern p = Pattern.compile(\"[a-zA-Z]\");\n+\n+    /**\n+     * Returns a new map, filtering the original map by key string starts with\n+     *\n+     * @param map\n+     * @param pattern\n+     * @return\n+     */\n+    public static Map MapFilter(Map map, String pattern) {\n+        Map ret = new HashMap();\n+        Iterator it = map.keySet().iterator();\n+        while (it.hasNext()) {\n+            String key = (String) it.next();\n+            if (key.startsWith(pattern)) {\n+                ret.put(key, map.get(key));\n+            }\n+        }\n+        return ret;\n+    }\n+\n+    /**\n+     * Prefix should be contactXName\n+     *\n+     * @param map\n+     * @param prefix\n+     * @return\n+     */\n+    public static List<PersonName> BuildContactPersonNames(Map map, String prefix, String cte) {\n+        List<PersonName> ret = new ArrayList();\n+        Iterator it = map.keySet().iterator();\n+        List<String> processedIndexes = new ArrayList<String>();\n+        while (it.hasNext()) {\n+            String key = (String) it.next();\n+            String filteredkey = key.replace(prefix, \"\");\n+            Matcher match = p.matcher(filteredkey);\n+            if (match.find()) {\n+                String index = filteredkey.substring(0, match.start());\n+                if (!processedIndexes.contains(index)) {\n+                    PersonName pn = new PersonName();\n+                    String[] t = (String[]) map.get(prefix + index + PostBackConstants.LANG);\n+                    if (t[0] == null || t[0].equalsIgnoreCase(cte)) {\n+                        pn.setLang(null);\n+                    } else {\n+                        pn.setLang(t[0]);\n+                    }\n+                    t = (String[]) map.get(prefix + index + PostBackConstants.VALUE);\n+                    pn.setValue(t[0]);\n+                    ret.add(pn);\n+                    processedIndexes.add(index);\n+                }\n+            } else {\n+                throw new IllegalArgumentException(\"Invalid form data posted\");\n+            }\n+        }\n+        return ret;\n+    }\n+\n+    /**\n+     * overview docs\n+     *\n+     * @param map\n+     * @param prefix\n+     * @param cte\n+     * @return\n+     */\n+    public static List<OverviewDoc> BuildOverviewDocs(Map map, String prefix, String cte) {\n+        List<OverviewDoc> ret = new ArrayList<OverviewDoc>();\n+        Iterator it = map.keySet().iterator();\n+        List<String> processedIndexes = new ArrayList<String>();\n+        while (it.hasNext()) {\n+            String key = (String) it.next();\n+            String filteredkey = key.replace(prefix, \"\");\n+            Matcher match = p.matcher(filteredkey);\n+            if (match.find()) {\n+                String index = filteredkey.substring(0, match.start());\n+                if (!processedIndexes.contains(index)) {\n+                    OverviewDoc pn = new OverviewDoc();\n+                    pn.setOverviewURL(new OverviewURL());\n+                    String[] t = (String[]) map.get(prefix + index + PostBackConstants.VALUE);\n+                    pn.getOverviewURL().setValue(t[0]);\n+                    t = (String[]) map.get(prefix + index + PostBackConstants.TYPE);\n+                    pn.getOverviewURL().setUseType(t[0]);\n+                    pn.getDescription().addAll(BuildDescription(MapFilter(map, prefix + index + PostBackConstants.DESCRIPTION), prefix + index + PostBackConstants.DESCRIPTION, cte));\n+                    ret.add(pn);\n+                    processedIndexes.add(index);\n+                }\n+            } else {\n+                throw new IllegalArgumentException(\"Invalid form data posted\");\n+            }\n+        }\n+        return ret;\n+    }\n+\n+    /**\n+     * phone numbers\n+     *\n+     * @param map\n+     * @param prefix\n+     * @return\n+     */\n+    public static List<Phone> BuildPhone(Map map, String prefix) {\n+        List<Phone> ret = new ArrayList();\n+        Iterator it = map.keySet().iterator();\n+        List<String> processedIndexes = new ArrayList<String>();\n+        while (it.hasNext()) {\n+            String key = (String) it.next();\n+            String filteredkey = key.replace(prefix, \"\");\n+            Matcher match = p.matcher(filteredkey);\n+            if (match.find()) {\n+                String index = filteredkey.substring(0, match.start());\n+                if (!processedIndexes.contains(index)) {\n+                    Phone pn = new Phone();\n+                    String[] t = (String[]) map.get(prefix + index + PostBackConstants.TYPE);\n+                    pn.setUseType(t[0]);\n+                    t = (String[]) map.get(prefix + index + PostBackConstants.VALUE);\n+                    pn.setValue(t[0]);\n+                    ret.add(pn);\n+                    processedIndexes.add(index);\n+                }\n+            } else {\n+                throw new IllegalArgumentException(\"Invalid form data posted\");\n+            }\n+        }\n+        return ret;\n+    }\n+\n+    /**\n+     * builds a contact\n+     *\n+     * @param m\n+     * @param prefix\n+     * @param cte\n+     * @return\n+     */\n+    public static Contact BuildSingleContact(Map m, String prefix, String cte) {\n+        Contact c = new Contact();\n+        String[] t = (String[]) m.get(prefix + PostBackConstants.TYPE);\n+        c.setUseType(t[0]);\n+        c.getPersonName().addAll(BuildContactPersonNames(MapFilter(m, prefix + PostBackConstants.NAME), prefix + PostBackConstants.NAME, cte));\n+        c.getDescription().addAll(BuildDescription(MapFilter(m, prefix + PostBackConstants.DESCRIPTION), prefix + PostBackConstants.DESCRIPTION, cte));\n+        c.getEmail().addAll(BuildEmail(MapFilter(m, prefix + PostBackConstants.EMAIL), prefix + PostBackConstants.EMAIL));\n+        c.getPhone().addAll(BuildPhone(MapFilter(m, prefix + PostBackConstants.PHONE), prefix + PostBackConstants.PHONE));\n+        c.getAddress().addAll(BuildAddress(MapFilter(m, prefix + PostBackConstants.ADDRESS), prefix + PostBackConstants.ADDRESS, cte));\n+        return c;\n+    }\n+\n+    /**\n+     * name elements\n+     *\n+     * @param map\n+     * @param prefix\n+     * @param cte\n+     * @return\n+     */\n+    public static List<Name> BuildNames(Map map, String prefix, String cte) {\n+        List<Name> ret = new ArrayList();\n+        Iterator it = map.keySet().iterator();\n+        List<String> processedIndexes = new ArrayList<String>();\n+        while (it.hasNext()) {\n+            String key = (String) it.next();\n+            String filteredkey = key.replace(prefix, \"\");\n+            Matcher match = p.matcher(filteredkey);\n+            if (match.find()) {\n+                String index = filteredkey.substring(0, match.start());\n+                if (!processedIndexes.contains(index)) {\n+                    Name pn = new Name();\n+                    String[] t = (String[]) map.get(prefix + index + PostBackConstants.LANG);\n+                    if (t[0].equalsIgnoreCase(cte)) {\n+                        pn.setLang(null);\n+                    } else {\n+                        pn.setLang(t[0]);\n+                    }\n+                    t = (String[]) map.get(prefix + index + PostBackConstants.VALUE);\n+                    pn.setValue(t[0]);\n+                    ret.add(pn);\n+                    processedIndexes.add(index);\n+                }\n+            } else {\n+                throw new IllegalArgumentException(\"Invalid form data posted\");\n+            }\n+        }\n+        return ret;\n+    }\n+\n+    /**\n+     * builds a compelte category bag\n+     *\n+     * @param map\n+     * @param prefix\n+     * @return\n+     */\n+    public static CategoryBag BuildCatBag(Map map, String prefix) {\n+        CategoryBag ret = new CategoryBag();\n+        Iterator it = map.keySet().iterator();\n+        List<String> processedIndexes = new ArrayList<String>();\n+        while (it.hasNext()) {\n+            String key = (String) it.next();\n+            String filteredkey = key.replace(prefix, \"\");\n+            Matcher match = p.matcher(filteredkey);\n+            if (match.find()) {\n+                String index = filteredkey.substring(0, match.start());\n+                if (!processedIndexes.contains(index)) {\n+                    KeyedReference pn = new KeyedReference();\n+                    String[] t = (String[]) map.get(prefix + index + PostBackConstants.VALUE);\n+                    pn.setTModelKey(t[0]);\n+                    t = (String[]) map.get(prefix + index + PostBackConstants.KEYNAME);\n+                    pn.setKeyName(t[0]);\n+                    t = (String[]) map.get(prefix + index + PostBackConstants.KEYVALUE);\n+                    pn.setKeyValue(t[0]);\n+                    ret.getKeyedReference().add(pn);\n+                    processedIndexes.add(index);\n+                }\n+            } else {\n+                throw new IllegalArgumentException(\"Invalid form data posted\");\n+            }\n+        }\n+        return ret;\n+    }\n+\n+    /**\n+     * identifier bag\n+     *\n+     * @param map\n+     * @param prefix\n+     * @return\n+     */\n+    public static IdentifierBag BuildIdentBag(Map map, String prefix) {\n+        IdentifierBag ret = new IdentifierBag();\n+        ret.getKeyedReference().addAll(BuildKeyedReference(map, prefix));\n+        if (ret.getKeyedReference().isEmpty()) {\n+            return null;\n+        }\n+        return ret;\n+    }\n+\n+    /**\n+     * discovery urls\n+     *\n+     * @param map\n+     * @param prefix\n+     * @return\n+     */\n+    public static DiscoveryURLs BuildDisco(Map map, String prefix) {\n+        DiscoveryURLs list = new DiscoveryURLs();\n+        Iterator it = map.keySet().iterator();\n+        List<String> processedIndexes = new ArrayList<String>();\n+        while (it.hasNext()) {\n+            String key = (String) it.next();\n+            String filteredkey = key.replace(prefix, \"\");\n+            Matcher match = p.matcher(filteredkey);\n+            if (match.find()) {\n+                String index = filteredkey.substring(0, match.start());\n+                if (!processedIndexes.contains(index)) {\n+                    DiscoveryURL pn = new DiscoveryURL();\n+                    String[] t = (String[]) map.get(prefix + index + PostBackConstants.TYPE);\n+                    pn.setUseType(t[0]);\n+                    t = (String[]) map.get(prefix + index + PostBackConstants.VALUE);\n+                    pn.setValue(t[0]);\n+                    list.getDiscoveryURL().add(pn);\n+                    processedIndexes.add(index);\n+                }\n+            } else {\n+                throw new IllegalArgumentException(\"Invalid form data posted\");\n+            }\n+        }\n+        if (list.getDiscoveryURL().isEmpty()) {\n+            return null;\n+        }\n+        return list;\n+    }\n+\n+    /**\n+     * addresses\n+     *\n+     * @param map\n+     * @param prefix\n+     * @param cte\n+     * @return\n+     */\n+    public static List<Address> BuildAddress(Map map, String prefix, String cte) {\n+        List<Address> ret = new ArrayList();\n+        Iterator it = map.keySet().iterator();\n+        List<String> processedIndexes = new ArrayList<String>();\n+        while (it.hasNext()) {\n+            String key = (String) it.next();\n+            String filteredkey = key.replace(prefix, \"\");\n+            Matcher match = p.matcher(filteredkey);\n+            if (match.find()) {\n+                String index = filteredkey.substring(0, match.start());\n+                if (!processedIndexes.contains(index)) {\n+                    Address pn = new Address();\n+                    String[] t = (String[]) map.get(prefix + index + PostBackConstants.LANG);\n+                    if (t[0] == null || t[0].equalsIgnoreCase(cte)) {\n+                        pn.setLang(null);\n+                    } else {\n+                        pn.setLang(t[0]);\n+                    }\n+                    t = (String[]) map.get(prefix + index + PostBackConstants.TYPE);\n+                    if (t[0] == null || t[0].equalsIgnoreCase(cte)) {\n+                        pn.setUseType(null);\n+                    } else {\n+                        pn.setUseType(t[0]);\n+                    }\n+                    t = (String[]) map.get(prefix + index + PostBackConstants.SORTCODE);\n+                    if (t[0] == null || t[0].equalsIgnoreCase(cte)) {\n+                        pn.setSortCode(null);\n+                    } else {\n+                        pn.setSortCode(t[0]);\n+                    }\n+                    t = (String[]) map.get(prefix + index + PostBackConstants.KEYNAME);\n+                    if (t[0] == null || t[0].equalsIgnoreCase(cte)) {\n+                        pn.setTModelKey(null);\n+                    } else {\n+                        pn.setTModelKey(t[0]);\n+                    }\n+                    pn.getAddressLine().addAll(BuildAddressLine(MapFilter(map, prefix + index + PostBackConstants.ADDRESSLINE), prefix + index + PostBackConstants.ADDRESSLINE));\n+                    ret.add(pn);\n+                    processedIndexes.add(index);\n+                }\n+            } else {\n+                throw new IllegalArgumentException(\"Invalid form data posted\");\n+            }\n+        }\n+        return ret;\n+    }\n+\n+    /**\n+     * keyed reference group\n+     *\n+     * @param map\n+     * @param prefix\n+     * @return\n+     */\n+    public static List<KeyedReferenceGroup> BuildKeyedReferenceGroup(Map map, String prefix) {\n+        List<KeyedReferenceGroup> ret = new ArrayList<KeyedReferenceGroup>();\n+        Iterator it = map.keySet().iterator();\n+        List<String> processedIndexes = new ArrayList<String>();\n+        while (it.hasNext()) {\n+            String key = (String) it.next();\n+            String filteredkey = key.replace(prefix, \"\");\n+            Matcher match = p.matcher(filteredkey);\n+            if (match.find()) {\n+                String index = filteredkey.substring(0, match.start());\n+                if (!processedIndexes.contains(index)) {\n+                    KeyedReferenceGroup pn = new KeyedReferenceGroup();\n+                    String[] t = (String[]) map.get(prefix + index + PostBackConstants.VALUE);\n+                    if (t != null) {\n+                        pn.setTModelKey(t[0]);\n+                        pn.getKeyedReference().addAll(BuildKeyedReference(MapFilter(map, prefix + index + PostBackConstants.KEY_REF), prefix + index + PostBackConstants.KEY_REF));\n+                        ret.add(pn);\n+                    } else {\n+                        log.warn(\"Unexpected null from BuildKeyedReferenceGroup \" + filteredkey + \" \" + prefix + \" \" + key);\n+                    }\n+                    processedIndexes.add(index);\n+                }\n+            } else {\n+                throw new IllegalArgumentException(\"Invalid form data posted\");\n+            }\n+        }\n+        return ret;\n+    }\n+\n+    /**\n+     * contactX\n+     *\n+     * @param map\n+     * @return\n+     */\n+    public static Contacts BuildContacts(Map map, String cte) {\n+        Contacts cb = new Contacts();\n+        Map contactdata = MapFilter(map, PostBackConstants.CONTACT_PREFIX);\n+        Iterator it = contactdata.keySet().iterator();\n+        List<String> processedIndexes = new ArrayList<String>();\n+        while (it.hasNext()) {\n+            String key = (String) it.next();\n+            key = key.replace(PostBackConstants.CONTACT_PREFIX, \"\");\n+            Matcher match = p.matcher(key);\n+            if (match.find()) {\n+                String index = key.substring(0, match.start());\n+                if (!processedIndexes.contains(index)) {\n+                    cb.getContact().add(BuildSingleContact(MapFilter(contactdata, PostBackConstants.CONTACT_PREFIX + index), PostBackConstants.CONTACT_PREFIX + index, cte));\n+                    processedIndexes.add(index);\n+                }\n+            } else {\n+                throw new IllegalArgumentException(\"Invalid form data posted\");\n+            }\n+        }\n+        if (cb.getContact().isEmpty()) {\n+            return null;\n+        }\n+        return cb;\n+    }\n+\n+    /**\n+     * email\n+     *\n+     * @param map\n+     * @param prefix\n+     * @return\n+     */\n+    public static List<Email> BuildEmail(Map map, String prefix) {\n+        List<Email> list = new ArrayList<Email>();\n+        Iterator it = map.keySet().iterator();\n+        List<String> processedIndexes = new ArrayList<String>();\n+        while (it.hasNext()) {\n+            String key = (String) it.next();\n+            String filteredkey = key.replace(prefix, \"\");\n+            Matcher match = p.matcher(filteredkey);\n+            if (match.find()) {\n+                String index = filteredkey.substring(0, match.start());\n+                if (!processedIndexes.contains(index)) {\n+                    Email pn = new Email();\n+                    String[] t = (String[]) map.get(prefix + index + PostBackConstants.TYPE);\n+                    pn.setUseType(t[0]);\n+                    t = (String[]) map.get(prefix + index + PostBackConstants.VALUE);\n+                    pn.setValue(t[0]);\n+                    list.add(pn);\n+                    processedIndexes.add(index);\n+                }\n+            } else {\n+                throw new IllegalArgumentException(\"Invalid form data posted\");\n+            }\n+        }\n+        return list;\n+    }\n+\n+    /**\n+     * description\n+     *\n+     * @param map\n+     * @param prefix\n+     * @param cte\n+     * @return\n+     */\n+    public static List<Description> BuildDescription(Map map, String prefix, String cte) {\n+        List<Description> ret = new ArrayList();\n+        Iterator it = map.keySet().iterator();\n+        List<String> processedIndexes = new ArrayList<String>();\n+        while (it.hasNext()) {\n+            String key = (String) it.next();\n+            String filteredkey = key.replace(prefix, \"\");\n+            Matcher match = p.matcher(filteredkey);\n+            if (match.find()) {\n+                String index = filteredkey.substring(0, match.start());\n+                if (!processedIndexes.contains(index)) {\n+                    Description pn = new Description();\n+                    String[] t = (String[]) map.get(prefix + index + PostBackConstants.LANG);\n+                    if (t[0] == null || t[0].equalsIgnoreCase(cte)) {\n+                        pn.setLang(null);\n+                    } else {\n+                        pn.setLang(t[0]);\n+                    }\n+                    t = (String[]) map.get(prefix + index + PostBackConstants.VALUE);\n+                    pn.setValue(t[0]);\n+                    ret.add(pn);\n+                    processedIndexes.add(index);\n+                }\n+            } else {\n+                throw new IllegalArgumentException(\"Invalid form data posted\");\n+            }\n+        }\n+        return ret;\n+    }\n+\n+    /**\n+     * keyed references\n+     *\n+     * @param map\n+     * @param prefix\n+     * @return\n+     */\n+    public static List<KeyedReference> BuildKeyedReference(Map map, String prefix) {\n+        List<KeyedReference> ret = new ArrayList<KeyedReference>();\n+        Iterator it = map.keySet().iterator();\n+        List<String> processedIndexes = new ArrayList<String>();\n+        while (it.hasNext()) {\n+            String key = (String) it.next();\n+            String filteredkey = key.replace(prefix, \"\");\n+            Matcher match = p.matcher(filteredkey);\n+            if (match.find()) {\n+                String index = filteredkey.substring(0, match.start());\n+                if (!processedIndexes.contains(index)) {\n+                    KeyedReference pn = new KeyedReference();\n+                    String[] t = (String[]) map.get(prefix + index + PostBackConstants.VALUE);\n+                    if (t != null) {\n+                        pn.setTModelKey(t[0]);\n+                        t = (String[]) map.get(prefix + index + PostBackConstants.KEYNAME);\n+                        pn.setKeyName(t[0]);\n+                        t = (String[]) map.get(prefix + index + PostBackConstants.KEYVALUE);\n+                        pn.setKeyValue(t[0]);\n+                        ret.add(pn);\n+                    }\n+                    processedIndexes.add(index);\n+                }\n+            } else {\n+                throw new IllegalArgumentException(\"Invalid form data posted\");\n+            }\n+        }\n+        return ret;\n+    }\n+\n+    /**\n+     * address lines\n+     *\n+     * @param map\n+     * @param prefix\n+     * @return\n+     */\n+    public static List<AddressLine> BuildAddressLine(Map map, String prefix) {\n+        List<AddressLine> ret = new ArrayList();\n+        Iterator it = map.keySet().iterator();\n+        List<String> processedIndexes = new ArrayList<String>();\n+        while (it.hasNext()) {\n+            String key = (String) it.next();\n+            String filteredkey = key.replace(prefix, \"\");\n+            Matcher match = p.matcher(filteredkey);\n+            if (match.find()) {\n+                String index = filteredkey.substring(0, match.start());\n+                if (!processedIndexes.contains(index)) {\n+                    AddressLine pn = new AddressLine();\n+                    String[] t = (String[]) map.get(prefix + index + PostBackConstants.VALUE);\n+                    pn.setValue(t[0]);\n+                    t = (String[]) map.get(prefix + index + PostBackConstants.KEYNAME);\n+                    pn.setKeyName(t[0]);\n+                    t = (String[]) map.get(prefix + index + PostBackConstants.KEYVALUE);\n+                    pn.setKeyValue(t[0]);\n+                    ret.add(pn);\n+                    processedIndexes.add(index);\n+                }\n+            } else {\n+                throw new IllegalArgumentException(\"Invalid form data posted\");\n+            }\n+        }\n+        return ret;\n+    }\n+\n+    /**\n+     * binding templates\n+     *\n+     * @param map\n+     * @param prefix\n+     * @param cte\n+     * @return\n+     */\n+    public static List<BindingTemplate> BuildBindingTemplates(Map map, String prefix, String cte) {\n+        List<BindingTemplate> ret = new ArrayList();\n+        Iterator it = map.keySet().iterator();\n+        List<String> processedIndexes = new ArrayList<String>();\n+        while (it.hasNext()) {\n+            String key = (String) it.next();\n+            String filteredkey = key.replace(prefix, \"\");\n+            Matcher match = p.matcher(filteredkey);\n+            if (match.find()) {\n+                String index = filteredkey.substring(0, match.start());\n+                if (!processedIndexes.contains(index)) {\n+                    BindingTemplate pn = new BindingTemplate();\n+//bindingTemplate0Value\n+                    String[] t = (String[]) map.get(prefix + index + PostBackConstants.VALUE);\n+                    if (t != null && t.length > 0) {\n+                        pn.setBindingKey(t[0]);\n+                    }\n+\n+                    t = (String[]) map.get(prefix + index + PostBackConstants.HOSTINGREDIRECTOR);\n+                    if (t != null && t.length > 0) {\n+                        pn.setHostingRedirector(new HostingRedirector());\n+                        pn.getHostingRedirector().setBindingKey(t[0]);\n+                    }\n+                    AccessPoint ap = new AccessPoint();\n+                    t = (String[]) map.get(prefix + index + PostBackConstants.ACCESSPOINT_TYPE);\n+                    if (t != null && t.length > 0) {\n+                        ap.setUseType(t[0]);\n+                    }\n+                    t = (String[]) map.get(prefix + index + PostBackConstants.ACCESSPOINT_VALUE);\n+                    if (t != null && t.length > 0) {\n+                        ap.setValue(t[0]);\n+                    }\n+                    if (ap.getValue() != null) {\n+                        pn.setAccessPoint(ap);\n+                    }\n+                    pn.getDescription().addAll(BuildDescription(MapFilter(map, prefix + index + PostBackConstants.DESCRIPTION), prefix + index + PostBackConstants.DESCRIPTION, cte));\n+                    CategoryBag cb = new CategoryBag();\n+                    cb.getKeyedReference().addAll(BuildKeyedReference(MapFilter(map, prefix + index + PostBackConstants.CATBAG_KEY_REF), prefix + index + PostBackConstants.CATBAG_KEY_REF));\n+                    cb.getKeyedReferenceGroup().addAll(BuildKeyedReferenceGroup(MapFilter(map, prefix + index + PostBackConstants.CATBAG_KEY_REF_GRP), prefix + index + PostBackConstants.CATBAG_KEY_REF_GRP));\n+                    if (cb.getKeyedReference().isEmpty() && cb.getKeyedReferenceGroup().isEmpty()) {\n+                        cb = null;\n+                    }\n+\n+                    pn.setCategoryBag(cb);\n+                    pn.setTModelInstanceDetails(BuildTmodelInstanceDetails(MapFilter(map, prefix + index + PostBackConstants.TMODELINSTANCE), prefix + index + PostBackConstants.TMODELINSTANCE, cte));\n+\n+                    ret.add(pn);\n+                    processedIndexes.add(index);\n+                }\n+            } else {\n+                throw new IllegalArgumentException(\"Invalid form data posted\");\n+            }\n+        }\n+        return ret;\n+    }\n+\n+    private static TModelInstanceDetails BuildTmodelInstanceDetails(Map map, String prefix, String cte) {\n+        TModelInstanceDetails ret = new TModelInstanceDetails();\n+\n+        Iterator it = map.keySet().iterator();\n+        List<String> processedIndexes = new ArrayList<String>();\n+        while (it.hasNext()) {\n+            String key = (String) it.next();\n+            String filteredkey = key.replace(prefix, \"\");\n+            Matcher match = p.matcher(filteredkey);\n+            if (match.find()) {\n+                String index = filteredkey.substring(0, match.start());\n+                if (!processedIndexes.contains(index)) {\n+                    TModelInstanceInfo tmi = new TModelInstanceInfo();\n+                    String[] t = (String[]) map.get(prefix + index + PostBackConstants.KEYNAME);\n+                    tmi.setTModelKey(t[0]);\n+\n+                    tmi.setInstanceDetails(BuildInstanceDetails(MapFilter(map, prefix + index + PostBackConstants.INSTANCE), prefix + index + PostBackConstants.INSTANCE, cte));\n+\n+                    tmi.getDescription().addAll(BuildDescription(MapFilter(map, prefix + index + PostBackConstants.INSTANCE + PostBackConstants.DESCRIPTION), prefix + index + PostBackConstants.INSTANCE + PostBackConstants.DESCRIPTION, cte));\n+\n+                    ret.getTModelInstanceInfo().add(tmi);\n+                    processedIndexes.add(index);\n+                }\n+            } else {\n+                throw new IllegalArgumentException(\"Invalid form data posted\");\n+            }\n+        }\n+        if (ret.getTModelInstanceInfo().isEmpty()) {\n+            return null;\n+        }\n+        return ret;\n+    }\n+\n+    private static InstanceDetails BuildInstanceDetails(Map map, String prefix, String cte) {\n+        InstanceDetails ret = new InstanceDetails();\n+        Iterator it = map.keySet().iterator();\n+        List<String> processedIndexes = new ArrayList<String>();\n+        while (it.hasNext()) {\n+            String key = (String) it.next();\n+            String filteredkey = key.replace(prefix, \"\");\n+            Matcher match = p.matcher(filteredkey);\n+            if (match.find()) {\n+                String index = filteredkey.substring(0, match.start());\n+                if (!processedIndexes.contains(index)) {\n+\n+                    String[] t = (String[]) map.get(prefix + index + PostBackConstants.VALUE);\n+                    //pn.setValue(t[0]);\n+                    ret.setInstanceParms(t[0]);\n+\n+                    ret.getDescription().addAll(BuildDescription(MapFilter(map, prefix + index + PostBackConstants.INSTANCE + PostBackConstants.DESCRIPTION), prefix + index + PostBackConstants.INSTANCE + PostBackConstants.DESCRIPTION, cte));\n+                    ret.getOverviewDoc().addAll(BuildOverviewDocs(MapFilter(map, prefix + index + PostBackConstants.OVERVIEW), prefix + index + PostBackConstants.OVERVIEW, cte));\n+                    processedIndexes.add(index);\n+                }\n+            } else {\n+                throw new IllegalArgumentException(\"Invalid form data posted\");\n+            }\n+        }\n+        return ret;\n+    }\n+\n+    /**\n+     * client subscription api\n+     *\n+     * @param map\n+     * @param outmsg\n+     * @param session\n+     * @return\n+     */\n+    public static Subscription BuildClientSubscription(Map map, AtomicReference<String> outmsg, HttpSession session) {\n+        Subscription sub = new Subscription();\n+        if (outmsg == null) {\n+            outmsg = new AtomicReference<String>();\n+        }\n+\n+        try {\n+            String alertType = ((String[]) map.get(\"alertType\"))[0];\n+            if (alertType == null) {\n+                outmsg.set(\"alertType not defined\");\n+                return null;\n+            }\n+            if (alertType.equalsIgnoreCase(\"specificItem\")) {\n+                sub = BuildClientSubscriptionSpecificItem(map, outmsg);\n+            } else if (alertType.equalsIgnoreCase(\"searchResults\")) {\n+                sub = BuildClientSubscriptionSearchResults(map, outmsg);\n+            } else {\n+                outmsg.set(\"alertType invalid\");\n+                return null;\n+            }\n+            if (sub == null) {\n+                return null;\n+            }\n+\n+            String alertTransport = ((String[]) map.get(\"alertTransport\"))[0];\n+            if (alertTransport == null) {\n+            } else {\n+                if (alertTransport.equalsIgnoreCase(\"bindingTemplate\")) {\n+                    sub.setBindingKey(((String[]) map.get(\"bindingKey\"))[0]);\n+                } else {\n+                    sub.setBindingKey(null);\n+                }\n+            }\n+            if (map.get(\"subkey\") != null) {\n+                String subkey = ((String[]) map.get(\"subkey\"))[0];\n+                if (subkey != null && !subkey.equalsIgnoreCase(ResourceLoader.GetResource(session, \"items.clicktoedit\"))) {\n+                    sub.setSubscriptionKey(subkey);\n+                }\n+            }\n+            //options\n+            sub = BuildSubscriptionOptions(map, sub);\n+            return sub;\n+        } catch (Exception ex) {\n+            outmsg.set(ex.getMessage());\n+            return null;\n+        }\n+\n+    }\n+\n+    private static Subscription BuildClientSubscriptionSpecificItem(Map map, AtomicReference<String> outmsg) {\n+        try {\n+            Subscription sub = new Subscription();\n+            String alertCritera = ((String[]) map.get(\"alertCriteraSingleItem\"))[0];\n+\n+            List<String> keys = new ArrayList<String>();\n+            String ItemKey = ((String[]) map.get(\"itemKey\"))[0];\n+            if (ItemKey == null) {\n+                outmsg.set(\"no item defined\");\n+                return null;\n+            }\n+            //TODO this is an issue. Unknown if commas can be included within UDDI keys\n+            if (ItemKey.contains(\",\")) {\n+                String[] k2 = ItemKey.split(\",\");\n+                for (int i = 0; i < k2.length; i++) {\n+                    if (k2[i] == null) {\n+                        continue;\n+                    }\n+                    if (k2[i].trim().isEmpty()) {\n+                        continue;\n+                    }\n+                    keys.add(k2[i].trim());\n+                }\n+            } else {\n+                keys.add(ItemKey);\n+            }\n+\n+\n+            sub.setSubscriptionFilter(new SubscriptionFilter());\n+\n+            if (alertCritera != null) {\n+\n+                if (alertCritera.equalsIgnoreCase(\"binding\")) {\n+                    sub.getSubscriptionFilter().setGetBindingDetail(new GetBindingDetail());\n+                    sub.getSubscriptionFilter().getGetBindingDetail().getBindingKey().addAll(keys);\n+                } else if (alertCritera.equalsIgnoreCase(\"service\")) {\n+                    sub.getSubscriptionFilter().setGetServiceDetail(new GetServiceDetail());\n+                    sub.getSubscriptionFilter().getGetServiceDetail().getServiceKey().addAll(keys);\n+                } else if (alertCritera.equalsIgnoreCase(\"business\")) {\n+                    sub.getSubscriptionFilter().setGetBusinessDetail(new GetBusinessDetail());\n+                    sub.getSubscriptionFilter().getGetBusinessDetail().getBusinessKey().addAll(keys);\n+                } else if (alertCritera.equalsIgnoreCase(\"publisherAssertion\")) {\n+                    //unknow if this will work\n+                    sub.getSubscriptionFilter().setGetAssertionStatusReport(new GetAssertionStatusReport());\n+                    sub.getSubscriptionFilter().getGetAssertionStatusReport().setCompletionStatus(CompletionStatus.valueOf(((String[]) map.get(\"assertionStatus\"))[0]));\n+                } else if (alertCritera.equalsIgnoreCase(\"relatedBusiness\")) {\n+                    outmsg.set(\"relatedBusiness is not supported for single item subscriptions\");\n+                    return null;\n+                } else if (alertCritera.equalsIgnoreCase(\"tmodel\")) {\n+                    sub.getSubscriptionFilter().setGetTModelDetail(new GetTModelDetail());\n+                    sub.getSubscriptionFilter().getGetTModelDetail().getTModelKey().addAll(keys);\n+                } else {\n+                    outmsg.set(\"alert critera invalid\");\n+                    return null;\n+                }\n+            } else {\n+                outmsg.set(\"alert critera not defined\");\n+                return null;\n+            }\n+            return sub;\n+        } catch (Exception ex) {\n+            log.warn(null, ex);\n+            outmsg.set(\"error parsing\");\n+            return null;\n+        }\n+    }\n+\n+    private static Subscription BuildClientSubscriptionSearchResults(Map map, AtomicReference<String> outmsg) {\n+        try {\n+            Subscription sub = new Subscription();\n+            String alertCritera = ((String[]) map.get(\"alertCriteraMultipleItem\"))[0];\n+\n+            sub.setSubscriptionFilter(new SubscriptionFilter());\n+            Name name = new Name();\n+            name.setValue(((String[]) map.get(\"searchcontent\"))[0]);\n+            name.setLang(((String[]) map.get(\"searchlang\"))[0]);\n+            FindQualifiers fq = new FindQualifiers();\n+            String[] fqs = (String[]) map.get(\"findqualifier\");\n+            if (fqs != null) {\n+                for (int i = 0; i < fqs.length; i++) {\n+                    fq.getFindQualifier().add(fqs[i]);\n+                }\n+            }\n+            if (fq.getFindQualifier().isEmpty()) {\n+                fq = null;\n+            }\n+            if (alertCritera != null) {\n+                if (alertCritera.equalsIgnoreCase(\"binding\")) {\n+                    //sub.getSubscriptionFilter().setFindBinding(new FindBinding());\n+                    //sub.getSubscriptionFilter().getFindBinding().\n+                } else if (alertCritera.equalsIgnoreCase(\"service\")) {\n+                    sub.getSubscriptionFilter().setFindService(new FindService());\n+                    sub.getSubscriptionFilter().getFindService().getName().add(name);\n+                    sub.getSubscriptionFilter().getFindService().setFindQualifiers(fq);\n+                } else if (alertCritera.equalsIgnoreCase(\"business\")) {\n+                    sub.getSubscriptionFilter().setFindBusiness(new FindBusiness());\n+                    sub.getSubscriptionFilter().getFindBusiness().setFindQualifiers(fq);\n+                    sub.getSubscriptionFilter().getFindBusiness().getName().add(name);\n+                    //              sub.getSubscriptionFilter().getGetBusinessDetail().getBusinessKey().addAll(keys);\n+                } else if (alertCritera.equalsIgnoreCase(\"publisherAssertion\")) {\n+                    //unknow if this will work\n+                    sub.getSubscriptionFilter().setGetAssertionStatusReport(new GetAssertionStatusReport());\n+                    sub.getSubscriptionFilter().getGetAssertionStatusReport().setCompletionStatus(CompletionStatus.valueOf(((String[]) map.get(\"assertionStatus\"))[0]));\n+                } else if (alertCritera.equalsIgnoreCase(\"relatedBusiness\")) {\n+                    sub.getSubscriptionFilter().setFindRelatedBusinesses(new FindRelatedBusinesses());\n+                    sub.getSubscriptionFilter().getFindRelatedBusinesses().setFindQualifiers(fq);\n+                    sub.getSubscriptionFilter().getFindRelatedBusinesses().setBusinessKey(((String[]) map.get(\"searchcontent\"))[0]);\n+                } else if (alertCritera.equalsIgnoreCase(\"tmodel\")) {\n+                    sub.getSubscriptionFilter().setFindTModel(new FindTModel());\n+                    sub.getSubscriptionFilter().getFindTModel().setFindQualifiers(fq);\n+                    sub.getSubscriptionFilter().getFindTModel().setName(name);\n+                } else {\n+                    outmsg.set(\"alert critera invalid\");\n+                    return null;\n+                }\n+            } else {\n+                outmsg.set(\"alert critera not defined\");\n+                return null;\n+            }\n+            return sub;\n+        } catch (Exception ex) {\n+            log.warn(null, ex);\n+            outmsg.set(\"error parsing\");\n+            return null;\n+        }\n+    }\n+\n+    private static Subscription BuildSubscriptionOptions(Map map, Subscription sub) {\n+        if (sub == null) {\n+            return null;\n+        }\n+        try {\n+            sub.setBrief(Boolean.parseBoolean(((String[]) map.get(\"brief\"))[0]));\n+        } catch (Exception x) {\n+            sub.setBrief(false);\n+        }\n+\n+        try {\n+            sub.setMaxEntities(Integer.parseInt(((String[]) map.get(\"maxRecords\"))[0]));\n+        } catch (Exception x) {\n+            sub.setBrief(false);\n+        }\n+\n+        try {\n+            DatatypeFactory df = DatatypeFactory.newInstance();\n+            DateFormat dformat = new SimpleDateFormat(\"MM/dd/yyyy HH:mm:ss a\");\n+            Date parsed = dformat.parse(((String[]) map.get(\"expires\"))[0]);\n+\n+            GregorianCalendar gcal = new GregorianCalendar();\n+            gcal.setTime(parsed);\n+            sub.setExpiresAfter(df.newXMLGregorianCalendar(gcal));\n+        } catch (Exception ex) {\n+            log.warn(\"Unexpected parsing error \", ex);\n+        }\n+\n+\n+        try {\n+            DatatypeFactory df = DatatypeFactory.newInstance();\n+            DateFormat dformat = new SimpleDateFormat(\"MM/dd/yyyy HH:mm:ss a\");\n+            Date parsed = dformat.parse(((String[]) map.get(\"expires\"))[0]);\n+\n+            GregorianCalendar gcal = new GregorianCalendar();\n+            gcal.setTime(parsed);\n+            sub.setExpiresAfter(df.newXMLGregorianCalendar(gcal));\n+        } catch (Exception ex) {\n+            log.warn(\"Unexpected parsing error \", ex);\n+        }\n+\n+        try {\n+            long durationInMilliSeconds = 0;\n+            DatatypeFactory df = DatatypeFactory.newInstance();\n+            String interval = ((String[]) map.get(\"interval\"))[0];\n+            String[] tokens = interval.split(\":\");\n+            durationInMilliSeconds += Integer.parseInt(tokens[0]) * 60 * 60 * 1000;\n+            durationInMilliSeconds += Integer.parseInt(tokens[1]) * 60 * 1000;\n+            durationInMilliSeconds += Integer.parseInt(tokens[2]) * 1000;\n+\n+\n+            sub.setNotificationInterval(df.newDuration(durationInMilliSeconds));\n+\n+        } catch (Exception ex) {\n+            log.warn(\"Unexpected parsing error \", ex);\n+        }\n+\n+\n+        return sub;\n+    }\n+}\n", "diff --git a/juddiv3-war/src/main/java/org/apache/juddi/adminconsole/hub/builders/Printers.java b/juddiv3-war/src/main/java/org/apache/juddi/adminconsole/hub/builders/Printers.java\nnew file mode 100644\nindex 000000000..24c432413\n--- /dev/null\n+++ b/juddiv3-war/src/main/java/org/apache/juddi/adminconsole/hub/builders/Printers.java\n@@ -0,0 +1,363 @@\n+/*\n+ * Copyright 2001-2013 The Apache Software Foundation.\n+ * \n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ * \n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ * \n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ *\n+ */\n+package org.apache.juddi.adminconsole.hub.builders;\n+\n+import java.util.List;\n+import javax.servlet.http.HttpSession;\n+import org.apache.commons.lang.StringEscapeUtils;\n+import org.apache.juddi.adminconsole.resources.ResourceLoader;\n+import org.uddi.api_v3.*;\n+\n+/**\n+ * Provides very basic UDDI spec to String formats, mostly used for debugging\n+ *\n+ * @author <a href=\"mailto:alexoree@apache.org\">Alex O'Ree</a>\n+ */\n+public class Printers {\n+\n+    public static String TModelInfoToString(TModelInstanceDetails info) {\n+        StringBuilder sb = new StringBuilder();\n+        for (int i = 0; i < info.getTModelInstanceInfo().size(); i++) {\n+            sb.append(info.getTModelInstanceInfo().get(i).getTModelKey());\n+        }\n+        return sb.toString();\n+    }\n+\n+    /**\n+     * Converts category bags of tmodels to a readable string\n+     *\n+     * @param categoryBag\n+     * @return\n+     */\n+    public static String CatBagToString(CategoryBag categoryBag, String locale) {\n+        StringBuilder sb = new StringBuilder();\n+        if (categoryBag == null) {\n+            return \"no data\";\n+        }\n+        for (int i = 0; i < categoryBag.getKeyedReference().size(); i++) {\n+            sb.append(KeyedReferenceToString(categoryBag.getKeyedReference().get(i), locale));\n+        }\n+        for (int i = 0; i < categoryBag.getKeyedReferenceGroup().size(); i++) {\n+            sb.append(\"Key Ref Grp: TModelKey=\");\n+            for (int k = 0; k < categoryBag.getKeyedReferenceGroup().get(i).getKeyedReference().size(); k++) {\n+                sb.append(KeyedReferenceToString(categoryBag.getKeyedReferenceGroup().get(i).getKeyedReference().get(k), locale));\n+            }\n+        }\n+        return sb.toString();\n+    }\n+\n+    public static String KeyedReferenceToString(KeyedReference item, String locale) {\n+        StringBuilder sb = new StringBuilder();\n+        sb.append(\"Key Ref: Name=\").append(item.getKeyName()).append(\" Value=\").append(item.getKeyValue()).append(\" tModel=\").append(item.getTModelKey()).append(System.getProperty(\"line.separator\"));\n+        return sb.toString();\n+    }\n+\n+    /**\n+     * This function is useful for translating UDDI's somewhat complex data\n+     * format to something that is more useful.\n+     *\n+     * @param bindingTemplates\n+     */\n+    public static String PrintBindingTemplates(BindingTemplates bindingTemplates, String locale) {\n+        if (bindingTemplates == null) {\n+            return \"No binding templates\";\n+        }\n+        StringBuilder sb = new StringBuilder();\n+        for (int i = 0; i < bindingTemplates.getBindingTemplate().size(); i++) {\n+            sb.append(\"Binding Key: \").append(bindingTemplates.getBindingTemplate().get(i).getBindingKey()).append(\"<Br>\");\n+            sb.append(\"Description: \").append(ListToDescString(bindingTemplates.getBindingTemplate().get(i).getDescription())).append(\"<Br>\");\n+            sb.append(\"CatBag: \").append(CatBagToString(bindingTemplates.getBindingTemplate().get(i).getCategoryBag(), locale)).append(\"<Br>\");\n+            sb.append(\"tModels: \").append(Printers.TModelInfoToString(bindingTemplates.getBindingTemplate().get(i).getTModelInstanceDetails())).append(\"<Br>\");\n+            if (bindingTemplates.getBindingTemplate().get(i).getAccessPoint() != null) {\n+                sb.append(\"Access Point: \").append(bindingTemplates.getBindingTemplate().get(i).getAccessPoint().getValue()).append(\" type \").append(bindingTemplates.getBindingTemplate().get(i).getAccessPoint().getUseType()).append(\"<Br>\");\n+            }\n+            if (bindingTemplates.getBindingTemplate().get(i).getHostingRedirector() != null) {\n+                sb.append(\"Hosting Director: \").append(bindingTemplates.getBindingTemplate().get(i).getHostingRedirector().getBindingKey()).append(\"<br>\");\n+            }\n+        }\n+        return sb.toString();\n+    }\n+\n+    public static String ListToDescString(List<Description> name) {\n+        StringBuilder sb = new StringBuilder();\n+        for (int i = 0; i < name.size(); i++) {\n+            sb.append(name.get(i).getValue()).append(\" \");\n+        }\n+        return sb.toString();\n+    }\n+\n+    public static String ListNamesToString(List<Name> name) {\n+        StringBuilder sb = new StringBuilder();\n+        for (int i = 0; i < name.size(); i++) {\n+            sb.append(name.get(i).getValue()).append(\" \");\n+        }\n+        return sb.toString();\n+    }\n+\n+    public static String ListDiscoToString(DiscoveryURLs info) {\n+        StringBuilder sb = new StringBuilder();\n+        if (info == null) {\n+            return \"\";\n+        }\n+        for (int i = 0; i < info.getDiscoveryURL().size(); i++) {\n+            sb.append(\"Type: \").append(StringEscapeUtils.escapeHtml(info.getDiscoveryURL().get(i).getValue())).append(\" \").append(StringEscapeUtils.escapeHtml(info.getDiscoveryURL().get(i).getValue()));\n+        }\n+        return sb.toString();\n+    }\n+\n+    /**\n+     * converts contacts to a simple string output\n+     */\n+    public static String PrintContacts(Contacts contacts, String locale) {\n+        if (contacts == null) {\n+            return \"\";\n+        }\n+        StringBuilder sb = new StringBuilder();\n+        for (int i = 0; i < contacts.getContact().size(); i++) {\n+            sb.append(\"Contact \").append(i).append(\" type:\").append(contacts.getContact().get(i).getUseType()).append(\"<br>\");\n+            for (int k = 0; k < contacts.getContact().get(i).getPersonName().size(); k++) {\n+                sb.append(\"Name: \").append(contacts.getContact().get(i).getPersonName().get(k).getValue()).append(\"<br>\");\n+            }\n+            for (int k = 0; k < contacts.getContact().get(i).getEmail().size(); k++) {\n+                sb.append(\"Email: \").append(contacts.getContact().get(i).getEmail().get(k).getValue()).append(\"<br>\");\n+            }\n+            for (int k = 0; k < contacts.getContact().get(i).getAddress().size(); k++) {\n+                sb.append(\"Address sort code \").append(contacts.getContact().get(i).getAddress().get(k).getSortCode()).append(\"<br>\");\n+                sb.append(\"Address use type \").append(contacts.getContact().get(i).getAddress().get(k).getUseType()).append(\"<br>\");\n+                sb.append(\"Address tmodel key \").append(contacts.getContact().get(i).getAddress().get(k).getTModelKey()).append(\"<br>\");\n+                for (int x = 0; x < contacts.getContact().get(i).getAddress().get(k).getAddressLine().size(); x++) {\n+                    sb.append(\"Address line value \").append(contacts.getContact().get(i).getAddress().get(k).getAddressLine().get(x).getValue()).append(\"<br>\");\n+                    sb.append(\"Address line key name \").append(contacts.getContact().get(i).getAddress().get(k).getAddressLine().get(x).getKeyName()).append(\"<br>\");\n+                    sb.append(\"Address line key value \").append(contacts.getContact().get(i).getAddress().get(k).getAddressLine().get(x).getKeyValue()).append(\"<br>\");\n+                }\n+            }\n+            for (int k = 0; k < contacts.getContact().get(i).getDescription().size(); k++) {\n+                sb.append(\"Desc: \").append(contacts.getContact().get(i).getDescription().get(k).getValue()).append(\"<br>\");\n+            }\n+            for (int k = 0; k < contacts.getContact().get(i).getPhone().size(); k++) {\n+                sb.append(\"Phone: \").append(contacts.getContact().get(i).getPhone().get(k).getValue()).append(\"<br>\");\n+            }\n+        }\n+        return sb.toString();\n+    }\n+\n+    public static String ListIdentBagToString(IdentifierBag info, String locale) {\n+        StringBuilder sb = new StringBuilder();\n+        if (info == null) {\n+            return \"\";\n+        }\n+        for (int i = 0; i < info.getKeyedReference().size(); i++) {\n+            sb.append(KeyedReferenceToString(info.getKeyedReference().get(i), locale));\n+        }\n+        return sb.toString();\n+    }\n+\n+    public static String PublisherAssertionsToHtml(List<PublisherAssertion> list, String locale) {\n+        if (list == null || list.isEmpty()) {\n+            return \"No input\";\n+        }\n+        StringBuilder sb = new StringBuilder();\n+        sb.append(\"<table class=\\\"table\\\">\");\n+        for (int i = 0; i < list.size(); i++) {\n+            sb.append(\"<tr><td>\");\n+            sb.append(StringEscapeUtils.escapeHtml(list.get(i).getToKey()));\n+            sb.append(\"</td><td>\");\n+            sb.append(StringEscapeUtils.escapeHtml(list.get(i).getFromKey()));\n+            sb.append(\"</td><td>\");\n+            sb.append(list.get(i).getSignature().isEmpty());\n+            sb.append(\"</td><td>\");\n+            sb.append(StringEscapeUtils.escapeHtml(Printers.KeyedReferenceToString(list.get(i).getKeyedReference(), locale)));\n+            sb.append(\"</td></tr>\");\n+        }\n+        sb.append(\"</table>\");\n+        return sb.toString();\n+    }\n+\n+    public static String PrintTModelListAsHtml(TModelList findTModel, HttpSession session, boolean isChooser) {\n+\n+        StringBuilder sb = new StringBuilder();\n+\n+        sb.append(\"<table class=\\\"table table-hover\\\"><tr><th>\");\n+        if (isChooser) {\n+            sb.append(\"</th><th>\");\n+        }\n+        sb.append(ResourceLoader.GetResource(session, \"items.key\"))\n+                .append(\"</th><th>\")\n+                .append(ResourceLoader.GetResource(session, \"items.name\"))\n+                .append(\"</th><th>\")\n+                .append(ResourceLoader.GetResource(session, \"items.description\"))\n+                .append(\"</th></tr>\");\n+        for (int i = 0; i < findTModel.getTModelInfos().getTModelInfo().size(); i++) {\n+            sb.append(\"<tr><td>\");\n+            if (isChooser) {\n+                sb.append(\"<input class=\\\"modalableTmodel\\\" type=checkbox id=\\\"\")\n+                        .append(StringEscapeUtils.escapeHtml(findTModel.getTModelInfos().getTModelInfo().get(i).getTModelKey()))\n+                        .append(\"\\\"></td><td>\");\n+            }\n+            if (!isChooser) {\n+                sb.append(\"<a href=\\\"tmodelEditor.jsp?id=\")\n+                        .append(StringEscapeUtils.escapeHtml(findTModel.getTModelInfos().getTModelInfo().get(i).getTModelKey()))\n+                        .append(\"\\\" >\");\n+            }\n+            sb.append(StringEscapeUtils.escapeHtml(findTModel.getTModelInfos().getTModelInfo().get(i).getTModelKey()));\n+            if (!isChooser) {\n+                sb.append(\"</a>\");\n+            }\n+            sb.append(\"</td><td>\")\n+                    .append(StringEscapeUtils.escapeHtml(findTModel.getTModelInfos().getTModelInfo().get(i).getName().getValue()));\n+            if (findTModel.getTModelInfos().getTModelInfo().get(i).getName().getLang() != null) {\n+                sb.append(\", \")\n+                        .append(StringEscapeUtils.escapeHtml(findTModel.getTModelInfos().getTModelInfo().get(i).getName().getLang()));\n+            }\n+            sb.append(\"</td><td>\")\n+                    .append(StringEscapeUtils.escapeHtml(Printers.ListToDescString(findTModel.getTModelInfos().getTModelInfo().get(i).getDescription())))\n+                    .append(\"</td></tr>\");\n+        }\n+        sb.append(\"</table>\");\n+        return sb.toString();\n+    }\n+\n+    @Deprecated\n+    private static String PrintTModelListAsHtmlModel(TModelList findTModel, HttpSession session) {\n+        StringBuilder sb = new StringBuilder();\n+\n+        sb.append(\"<table class=\\\"table table-hover\\\"><tr><th>\");\n+\n+        sb.append(\"</th><th>\");\n+\n+        sb.append(ResourceLoader.GetResource(session, \"items.key\"))\n+                .append(\"</th><th>\")\n+                .append(ResourceLoader.GetResource(session, \"items.name\"))\n+                .append(\"</th><th>\")\n+                .append(ResourceLoader.GetResource(session, \"items.description\"))\n+                .append(\"</th></tr>\");\n+        for (int i = 0; i < findTModel.getTModelInfos().getTModelInfo().size(); i++) {\n+            sb.append(\"<tr><td>\");\n+\n+            sb.append(\"<input class=\\\"modalableTmodel\\\" type=checkbox id=\\\"\")\n+                    .append(StringEscapeUtils.escapeHtml(findTModel.getTModelInfos().getTModelInfo().get(i).getTModelKey()))\n+                    .append(\"\\\"></td><td>\");\n+\n+            sb.append(StringEscapeUtils.escapeHtml(findTModel.getTModelInfos().getTModelInfo().get(i).getTModelKey()));\n+            sb.append(\"</td><td>\")\n+                    .append(StringEscapeUtils.escapeHtml(findTModel.getTModelInfos().getTModelInfo().get(i).getName().getValue()));\n+            if (findTModel.getTModelInfos().getTModelInfo().get(i).getName().getLang() != null) {\n+                sb.append(\", \")\n+                        .append(StringEscapeUtils.escapeHtml(findTModel.getTModelInfos().getTModelInfo().get(i).getName().getLang()));\n+            }\n+            sb.append(\"</td><td>\")\n+                    .append(StringEscapeUtils.escapeHtml(Printers.ListToDescString(findTModel.getTModelInfos().getTModelInfo().get(i).getDescription())))\n+                    .append(\"</td></tr>\");\n+        }\n+        sb.append(\"</table>\");\n+        return sb.toString();\n+    }\n+\n+    public static String BusinessListAsTable(BusinessList findBusiness, HttpSession session, boolean isChooser) {\n+        StringBuilder sb = new StringBuilder();\n+        sb.append(\"<table class=\\\"table table-hover\\\"<tr><th>\");\n+        if (isChooser) {\n+            sb.append(\"</th><th>\");\n+        }\n+        sb.append(ResourceLoader.GetResource(session, \"items.name\")).\n+                append(\"</th><th>\").\n+                append(ResourceLoader.GetResource(session, \"items.service\")).\n+                append(\"</th></tr>\");\n+        for (int i = 0; i < findBusiness.getBusinessInfos().getBusinessInfo().size(); i++) {\n+            sb.append(\"<tr><td>\");\n+            if (isChooser) {\n+                sb.append(\"<input type=\\\"checkbox\\\" class=\\\"modalableBusinessChooser\\\" id=\\\"\").\n+                        append(StringEscapeUtils.escapeHtml(findBusiness.getBusinessInfos().getBusinessInfo().get(i).getBusinessKey())).\n+                        append(\"\\\"></td><td>\");\n+            }\n+            sb.append(\"<a title=\\\"\").\n+                    append(StringEscapeUtils.escapeHtml(findBusiness.getBusinessInfos().getBusinessInfo().get(i).getBusinessKey())).\n+                    append(\"\\\"  href=\\\"businessEditor2.jsp?id=\").\n+                    append(StringEscapeUtils.escapeHtml(findBusiness.getBusinessInfos().getBusinessInfo().get(i).getBusinessKey())).\n+                    append(\"\\\">\").\n+                    append(StringEscapeUtils.escapeHtml(Printers.ListNamesToString(findBusiness.getBusinessInfos().getBusinessInfo().get(i).getName()))).\n+                    append(\"</a></td><td>\").\n+                    append(\"<a class=\\\"btn btn-primary\\\" href=\\\"javascript:ShowServicesByBusinessKey('\").\n+                    append(StringEscapeUtils.escapeJavaScript(findBusiness.getBusinessInfos().getBusinessInfo().get(i).getBusinessKey())).\n+                    append(\"');\\\">\");\n+\n+            if (findBusiness.getBusinessInfos().getBusinessInfo().get(i).getServiceInfos() == null) {\n+                sb.append(\"0\");\n+            } else {\n+                sb.append(\"Show \").append(findBusiness.getBusinessInfos().getBusinessInfo().get(i).getServiceInfos().getServiceInfo().size());\n+            }\n+            sb.append(\"</a>\");\n+            if (!isChooser) {\n+                sb.append(\"<a class=\\\"btn btn-primary\\\" href=\\\"serviceEditor.jsp?bizid=\").\n+                        append(StringEscapeUtils.escapeHtml(findBusiness.getBusinessInfos().getBusinessInfo().get(i).getBusinessKey())).\n+                        append(\"\\\"><i class=\\\"icon-plus-sign icon-white  icon-large\\\"></i></a>\");\n+            }\n+            sb.append(\"</td></tr>\");\n+\n+            sb.append(\"<tr><td colspan=3><div id=\\\"\").\n+                    append(StringEscapeUtils.escapeHtml(findBusiness.getBusinessInfos().getBusinessInfo().get(i).getBusinessKey())).\n+                    append(\"\\\"></div></td></tr>\");\n+        }\n+        sb.append(\"</table>\");\n+        return sb.toString();\n+    }\n+\n+    /**\n+     * service list as html\n+     * @param findService\n+     * @param chooser\n+     * @param session\n+     * @return \n+     */\n+    public static String ServiceListAsHtml(ServiceList findService, boolean chooser, HttpSession session) {\n+        StringBuilder sb = new StringBuilder();\n+        sb.append(\"<table class=\\\"table\\\"><tr><th>\");\n+        if (chooser) {\n+            sb.append(\"</th><th>\");\n+        }\n+        sb.append(ResourceLoader.GetResource(session, \"items.name\")).\n+                append(\"</th><th>\").\n+                append(ResourceLoader.GetResource(session, \"items.key\")).\n+                append(\"</th><th>\").\n+                append(ResourceLoader.GetResource(session, \"items.business\")).\n+                append(\"</th></tr>\");\n+        for (int i = 0; i < findService.getServiceInfos().getServiceInfo().size(); i++) {\n+            sb.append(\"<tr><td>\");\n+            if (chooser) {\n+                sb.append(\"<input class=\\\"modalableServiceChooser\\\" type=\\\"checkbox\\\" id=\\\"\").\n+                        append(StringEscapeUtils.escapeHtml(findService.getServiceInfos().getServiceInfo().get(i).getServiceKey())).\n+                        append(\"\\\">\");\n+                sb.append(\"</td><td>\");\n+            }\n+            sb.append(\"<a href=\\\"serviceEditor.jsp?id=\").\n+                    append(StringEscapeUtils.escapeHtml(findService.getServiceInfos().getServiceInfo().get(i).getServiceKey())).\n+                    append(\"\\\" title=\\\"\").\n+                    append(StringEscapeUtils.escapeHtml(findService.getServiceInfos().getServiceInfo().get(i).getServiceKey()))\n+                    .append(\"\\\">\");\n+            sb.append(Printers.ListNamesToString(findService.getServiceInfos().getServiceInfo().get(i).getName())).append(\"<i class=\\\"icon-edit icon-large\\\"></i<</a></td><td>\");\n+           \n+            sb.append((findService.getServiceInfos().getServiceInfo().get(i).getServiceKey())).append(\"</td><td>\");\n+             sb.append(\"<a href=\\\"businessEditor2.jsp?id=\")\n+                    .append(StringEscapeUtils.escapeHtml((findService.getServiceInfos().getServiceInfo().get(i).getBusinessKey())))\n+                    .append(\"\\\">\");\n+            sb.append(StringEscapeUtils.escapeHtml((findService.getServiceInfos().getServiceInfo().get(i).getBusinessKey())))\n+                    .append(\"<i class=\\\"icon-edit icon-large\\\"></i<</a></td></tr>\");\n+        }\n+        sb.append(\"</table>\");\n+        return sb.toString();\n+    }\n+}\n", "diff --git a/juddiv3-war/src/main/java/org/apache/juddi/adminconsole/hub/builders/SubscriptionHelper.java b/juddiv3-war/src/main/java/org/apache/juddi/adminconsole/hub/builders/SubscriptionHelper.java\nnew file mode 100644\nindex 000000000..92ac5fec2\n--- /dev/null\n+++ b/juddiv3-war/src/main/java/org/apache/juddi/adminconsole/hub/builders/SubscriptionHelper.java\n@@ -0,0 +1,145 @@\n+/*\n+ * To change this template, choose Tools | Templates\n+ * and open the template in the editor.\n+ */\n+package org.apache.juddi.adminconsole.hub.builders;\n+\n+import java.util.List;\n+import org.apache.commons.lang.StringEscapeUtils;\n+import org.uddi.sub_v3.Subscription;\n+\n+/**\n+ * Provides some basic helper functions for the edit Subscription page\n+ *\n+ * @author <a href=\"mailto:alexoree@apache.org\">Alex O'Ree</a>\n+ */\n+public class SubscriptionHelper {\n+\n+    public static String getItemKeySpecific(Subscription sub) {\n+        if (sub == null) {\n+            return \"\";\n+        }\n+        if (sub.getSubscriptionFilter() == null) {\n+            return \"\";\n+        }\n+        if (sub.getSubscriptionFilter().getGetAssertionStatusReport() != null && sub.getSubscriptionFilter().getGetAssertionStatusReport().getCompletionStatus() != null) {\n+            return sub.getSubscriptionFilter().getGetAssertionStatusReport().getCompletionStatus().toString();\n+        }\n+\n+        if (sub.getSubscriptionFilter().getGetBindingDetail() != null) {\n+            return ToHtmlOption(sub.getSubscriptionFilter().getGetBindingDetail().getBindingKey());\n+        }\n+\n+        if (sub.getSubscriptionFilter().getGetBusinessDetail() != null) {\n+            return ToHtmlOption(sub.getSubscriptionFilter().getGetBusinessDetail().getBusinessKey());\n+        }\n+\n+        if (sub.getSubscriptionFilter().getGetServiceDetail() != null) {\n+            return ToHtmlOption(sub.getSubscriptionFilter().getGetServiceDetail().getServiceKey());\n+        }\n+\n+        if (sub.getSubscriptionFilter().getGetTModelDetail() != null) {\n+            return ToHtmlOption(sub.getSubscriptionFilter().getGetTModelDetail().getTModelKey());\n+        }\n+        return \"\";\n+    }\n+\n+    public static String ToHtmlOption(List<String> items) {\n+        StringBuilder sb = new StringBuilder();\n+        if (items == null || items.isEmpty()) {\n+            return null;\n+        }\n+        for (int i = 0; i < items.size(); i++) {\n+            if (items.get(i) == null) {\n+                continue;\n+            }\n+            if (items.get(i).trim().isEmpty()) {\n+                continue;\n+            }\n+            sb.append(\"<option value\\\"\").append(StringEscapeUtils.escapeHtml(items.get(i).trim()))\n+                    .append(\"\\\">\")\n+                    .append(StringEscapeUtils.escapeHtml(items.get(i)))\n+                    .append(\"</option>\");\n+        }\n+        return sb.toString();\n+    }\n+\n+    public static boolean isSpecificItem(Subscription sub) {\n+        if (sub == null) {\n+            throw new IllegalArgumentException();\n+        }\n+        if (sub.getSubscriptionFilter() == null) {\n+            throw new IllegalArgumentException();\n+        }\n+        return (sub.getSubscriptionFilter().getGetAssertionStatusReport() != null\n+                || sub.getSubscriptionFilter().getGetBindingDetail() != null\n+                || sub.getSubscriptionFilter().getGetBusinessDetail() != null\n+                || sub.getSubscriptionFilter().getGetServiceDetail() != null\n+                || sub.getSubscriptionFilter().getGetTModelDetail() != null);\n+    }\n+\n+    public static String isBindingSpecific(Subscription sub) {\n+        if (sub == null) {\n+            return \"\";\n+        }\n+        if (sub.getSubscriptionKey() == null) {\n+            return \"\";\n+        }\n+        if (sub.getSubscriptionFilter().getGetBindingDetail() != null && !sub.getSubscriptionFilter().getGetBindingDetail().getBindingKey().isEmpty()) {\n+            return \" active \";\n+        }\n+        return \"\";\n+    }\n+\n+    public static String isBusinessSpecific(Subscription sub) {\n+        if (sub == null) {\n+            return \"\";\n+        }\n+        if (sub.getSubscriptionKey() == null) {\n+            return \"\";\n+        }\n+        if (sub.getSubscriptionFilter().getGetBusinessDetail() != null && !sub.getSubscriptionFilter().getGetBusinessDetail().getBusinessKey().isEmpty()) {\n+            return \" active \";\n+        }\n+        return \"\";\n+    }\n+\n+    public static String isServiceSpecific(Subscription sub) {\n+        if (sub == null) {\n+            return \"\";\n+        }\n+        if (sub.getSubscriptionKey() == null) {\n+            return \"\";\n+        }\n+        if (sub.getSubscriptionFilter().getGetServiceDetail() != null && !sub.getSubscriptionFilter().getGetServiceDetail().getServiceKey().isEmpty()) {\n+            return \" active \";\n+        }\n+        return \"\";\n+    }\n+\n+    public static String isTModelSpecific(Subscription sub) {\n+        if (sub == null) {\n+            return \"\";\n+        }\n+        if (sub.getSubscriptionKey() == null) {\n+            return \"\";\n+        }\n+        if (sub.getSubscriptionFilter().getGetTModelDetail() != null && !sub.getSubscriptionFilter().getGetTModelDetail().getTModelKey().isEmpty()) {\n+            return \" active \";\n+        }\n+        return \"\";\n+    }\n+\n+    public static String isPublisherAssertionSpecific(Subscription sub) {\n+        if (sub == null) {\n+            return \"\";\n+        }\n+        if (sub.getSubscriptionKey() == null) {\n+            return \"\";\n+        }\n+        if (sub.getSubscriptionFilter().getGetAssertionStatusReport() != null && sub.getSubscriptionFilter().getGetAssertionStatusReport().getCompletionStatus() != null) {\n+            return \" active \";\n+        }\n+        return \"\";\n+    }\n+}\n", "diff --git a/juddiv3-war/src/main/java/org/apache/juddi/adminconsole/resources/ResourceLoader.java b/juddiv3-war/src/main/java/org/apache/juddi/adminconsole/resources/ResourceLoader.java\nnew file mode 100644\nindex 000000000..816e18400\n--- /dev/null\n+++ b/juddiv3-war/src/main/java/org/apache/juddi/adminconsole/resources/ResourceLoader.java\n@@ -0,0 +1,68 @@\n+/*\n+ * To change this template, choose Tools | Templates\n+ * and open the template in the editor.\n+ */\n+package org.apache.juddi.adminconsole.resources;\n+\n+import java.util.HashMap;\n+import java.util.Locale;\n+import java.util.Map;\n+import java.util.MissingResourceException;\n+import java.util.ResourceBundle;\n+import javax.servlet.http.HttpSession;\n+\n+/**\n+ * This a resource loader for specific locales for internationalization,\n+ * provides some basic caching to prevent round trip disk access\n+ *\n+ * @author <a href=\"mailto:alexoree@apache.org\">Alex O'Ree</a>\n+ */\n+public class ResourceLoader {\n+\n+    private static Map map = new HashMap();\n+\n+    /**\n+     * returns a localized string in the locale defined within\n+     * session.getAttribute(\"locale\") or in the default locale, en\n+     *\n+     * @param session\n+     * @param key\n+     * @return a localized string\n+     * @throws IllegalArgumentException if the key is null\n+     * @throws MissingResourceException if the resource bundle can't be found\n+     */\n+    public static String GetResource(HttpSession session, String key) throws MissingResourceException {\n+        if (key == null) {\n+            throw new IllegalArgumentException(\"key\");\n+        }\n+        String locale = (String) session.getAttribute(\"locale\");\n+        return GetResource(locale, key);\n+    }\n+\n+    /**\n+     * returns a localized string in the locale defined within locale or in the\n+     * default locale, en\n+     *\n+     * @param session\n+     * @param key\n+     * @return a localized string\n+     * @throws IllegalArgumentException if the key is null\n+     * @throws MissingResourceException if the resource bundle can't be found\n+     */\n+    public static String GetResource(String locale, String key) throws MissingResourceException {\n+        if (key == null) {\n+            throw new IllegalArgumentException(\"key\");\n+        }\n+\n+        ResourceBundle bundle = (ResourceBundle) map.get(locale);\n+        if (bundle == null) {\n+            bundle = ResourceBundle.getBundle(\"org.apache.juddi.adminconsole.resources.web\", new Locale(locale));\n+            map.put(locale, bundle);\n+        }\n+        try {\n+            return bundle.getString(key.trim());\n+        } catch (Exception ex) {\n+            return \"key \" + key + \" not found \" + ex.getMessage();\n+        }\n+    }\n+}\n", "diff --git a/juddiv3-war/src/main/java/org/apache/juddi/webconsole/AES.java b/juddiv3-war/src/main/java/org/apache/juddi/webconsole/AES.java\ndeleted file mode 100644\nindex 0769ec026..000000000\n--- a/juddiv3-war/src/main/java/org/apache/juddi/webconsole/AES.java\n+++ /dev/null\n@@ -1,163 +0,0 @@\n-/*\n- * Copyright 2001-2013 The Apache Software Foundation.\n- * \n- * Licensed under the Apache License, Version 2.0 (the \"License\");\n- * you may not use this file except in compliance with the License.\n- * You may obtain a copy of the License at\n- * \n- *      http://www.apache.org/licenses/LICENSE-2.0\n- * \n- * Unless required by applicable law or agreed to in writing, software\n- * distributed under the License is distributed on an \"AS IS\" BASIS,\n- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n- * See the License for the specific language governing permissions and\n- * limitations under the License.\n- *\n- */\n-package org.apache.juddi.webconsole;\n-\n-import java.nio.charset.Charset;\n-import javax.crypto.*;\n-import javax.crypto.spec.*;\n-import org.apache.commons.codec.binary.Base64;\n-\n-import org.apache.commons.logging.Log;\n-import org.apache.commons.logging.LogFactory;\n-\n-/**\n- * <summary> This program uses a AES key, retrieves its raw bytes, and then\n- * reinstantiates a AES key from the key bytes.</summary> The reinstantiated key\n- * is used to initialize a AES cipher for encryption and decryption. source :\n- * http://java.sun.com/developer/technicalArticles/Security/AES/AES_v1.html\n- *\n- * @author <a href=\"mailto:alexoree@apache.org\">Alex O'Ree</a>\n- */\n-public class AES {\n-\n-        public static final String logname = \"org.apache.juddi.gui\";\n-        public static final Log log = LogFactory.getLog(logname);\n-\n-        /**\n-         * generates an AES based off of the selected key size\n-         *\n-         * @param keysize\n-         * @return may return null if the key is not of a supported size by the\n-         * current jdk\n-         */\n-        public static String GEN(int keysize) {\n-                KeyGenerator kgen;\n-                try {\n-                        kgen = KeyGenerator.getInstance(\"AES\");\n-                        kgen.init(keysize);\n-                        SecretKey skey = kgen.generateKey();\n-                        byte[] raw = skey.getEncoded();\n-                        return new String(Base64.encodeBase64(raw), Charset.defaultCharset());\n-                } catch (Exception ex) {\n-                        log.fatal(\"error generating key\", ex);\n-                }\n-                return null;\n-        }\n-\n-        /**\n-         * Generate a new AES 256 bit encryption key. Once generated, this key\n-         * can be used to replace the default key.\n-         *\n-         * @return\n-         */\n-        public static String GEN() {\n-                return GEN(256);\n-        }\n-\n-        static String EN(String cleartext, String key) throws Exception {\n-                byte[] raw =//skey.getEncoded();\n-                        Base64.decodeBase64(key.getBytes(Charset.defaultCharset())); //\n-                SecretKeySpec skeySpec = new SecretKeySpec(raw, \"AES\");\n-                // Instantiate the cipher\n-                Cipher cipher = Cipher.getInstance(\"AES\");\n-                cipher.init(Cipher.ENCRYPT_MODE, skeySpec);\n-                byte[] encrypted = cipher.doFinal(cleartext.getBytes());\n-                return  new String(Base64.encodeBase64(encrypted), Charset.defaultCharset());\n-        }\n-\n-        static String DE(String ciphertext, String key) throws Exception {\n-                byte[] raw =//skey.getEncoded();\n-                        Base64.decodeBase64(key.getBytes(Charset.defaultCharset())); //\n-                SecretKeySpec skeySpec = new SecretKeySpec(raw, \"AES\");\n-                Cipher cipher = Cipher.getInstance(\"AES\");\n-                cipher.init(Cipher.DECRYPT_MODE, skeySpec);\n-                byte[] original = cipher.doFinal(Base64.decodeBase64(ciphertext.getBytes(Charset.defaultCharset())));\n-                return new String(original);\n-        }\n-\n-        /**\n-         * return true is the supplied key is a valid aes key\n-         *\n-         * @param key\n-         * @return\n-         */\n-        public static boolean ValidateKey(String key) {\n-                try {\n-                        String src = \"abcdefghijklmopqrstuvwxyz123567890!@#$%^&*()_+{}|:\\\">?<,\";\n-                        String x = EN(src, key);\n-                        String y = DE(x, key);\n-                        //if the sample text is encryptable and decryptable, and it was actually encrypted\n-                        if (y.equals(src) && !x.equals(y)) {\n-                                return true;\n-                        }\n-                        return false;\n-                } catch (Exception ex) {\n-                        log.info(\"Key validation failed!\", ex);\n-                        return false;\n-                }\n-        }\n-\n-        /**\n-         * encrypts a password using AES Requires the Unlimited Strength Crypto\n-         * Extensions\n-         *\n-         * @param clear\n-         * @param key\n-         * @return\n-         */\n-        public static String Encrypt(String clear, String key) throws Exception {\n-                if ((clear == null || clear.length() == 0)) {\n-                        return \"\";\n-                }\n-                if (key == null || key.length() == 0) {\n-                        log.fatal(\"The generated encryption key was null or emtpy!\");\n-                }\n-                try {\n-                        return AES.EN(clear, key);\n-                } catch (Exception ex) {\n-                        log.fatal(\"Cannot encrypt sensitive information! Check to make sure the unlimited strength JCE is installed \" + ex.getMessage(), ex);\n-                        throw new Exception(\"Internal Configuration Error, See Log for details. \");\n-                }\n-                // return \"\";\n-        }\n-\n-        /**\n-         * Decrypts a password or other sensitive data If the parameter is null\n-         * or empty, an empty string is returned. If the parameter is not\n-         * encrypted or was encrypted using a different key or it fails to\n-         * decrypt, the original text is returned.\n-         *\n-         * @param cipher encrypted text\n-         * @param key\n-         * @return\n-         */\n-        public static String Decrypt(String cipher, String key) {\n-                if ((cipher == null || cipher.length() == 0)) {\n-                        return \"\";\n-                }\n-                if (key == null || key.length() == 0) {\n-                        log.fatal(\"The generated encryption key was null or emtpy!\");\n-                }\n-                try {\n-                        return AES.DE(cipher, key);\n-                } catch (Exception ex) {\n-                        log.fatal(\"trouble decrypting data, check to make sure the unlimited strength JCE is installed. If this error occured during deployment, I'll automatically try a smaller key size. \" + ex.getMessage(), ex);\n-                }\n-                return cipher;\n-\n-        }\n-}\n", "diff --git a/juddiv3-war/src/main/java/org/apache/juddi/webconsole/CrossSiteRequestForgeryException.java b/juddiv3-war/src/main/java/org/apache/juddi/webconsole/CrossSiteRequestForgeryException.java\ndeleted file mode 100644\nindex eea1c389c..000000000\n--- a/juddiv3-war/src/main/java/org/apache/juddi/webconsole/CrossSiteRequestForgeryException.java\n+++ /dev/null\n@@ -1,67 +0,0 @@\n-/*\n- * Copyright 2001-2013 The Apache Software Foundation.\n- * \n- * Licensed under the Apache License, Version 2.0 (the \"License\");\n- * you may not use this file except in compliance with the License.\n- * You may obtain a copy of the License at\n- * \n- *      http://www.apache.org/licenses/LICENSE-2.0\n- * \n- * Unless required by applicable law or agreed to in writing, software\n- * distributed under the License is distributed on an \"AS IS\" BASIS,\n- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n- * See the License for the specific language governing permissions and\n- * limitations under the License.\n- *\n- */\n-package org.apache.juddi.webconsole;\n-\n-/**\n- * Provides a very basic, no stack trace exception, useful for throwing at a browser without revealing any details \n- * @author <a href=\"mailto:alexoree@apache.org\">Alex O'Ree</a>\n- */\n-public class CrossSiteRequestForgeryException extends Exception {\n-    //Parameterless Constructor\n-/**\n- * CrossSiteRequestForgeryException\n- */\n-    public CrossSiteRequestForgeryException() {\n-        super(msg, null);\n-    }\n-\n-    /**\n-     * Constructor that accepts a message\n-     */\n-    public CrossSiteRequestForgeryException(String message) {\n-        super(msg, null);\n-    }\n-/**\n- * CrossSiteRequestForgeryException\n- * @param message\n- * @param cause \n- */\n-    public CrossSiteRequestForgeryException(String message, Throwable cause) {\n-        super(msg, null);\n-    }\n-    private static final String msg = \"Cross Site Request Forgery\";\n-\n-    @Override\n-    public String toString() {\n-        return msg;\n-    }\n-\n-    @Override\n-    public String getMessage() {\n-        return msg;\n-    }\n-\n-    @Override\n-    public String getLocalizedMessage() {\n-        return msg;\n-    }\n-\n-    @Override\n-    public Throwable getCause() {\n-        return null;\n-    }\n-}\n", "diff --git a/juddiv3-war/src/main/java/org/apache/juddi/webconsole/PostBackConstants.java b/juddiv3-war/src/main/java/org/apache/juddi/webconsole/PostBackConstants.java\ndeleted file mode 100644\nindex 5363459f1..000000000\n--- a/juddiv3-war/src/main/java/org/apache/juddi/webconsole/PostBackConstants.java\n+++ /dev/null\n@@ -1,50 +0,0 @@\n-/*\n- * To change this template, choose Tools | Templates\n- * and open the template in the editor.\n- */\n-package org.apache.juddi.webconsole;\n-\n-/**\n- * A collection of constants to use for form postbacks and parsing data from the\n- * browser All fields MUST not contain any characters that could interfer with\n- * the rendering of a webpage or javascript and should thus be escaped sequences\n- * of characters\n- *\n- * @author <a href=\"mailto:alexoree@apache.org\">Alex O'Ree</a>\n- */\n-public class PostBackConstants {\n-\n-    public static final String INSTANCE = \"instance\";\n-    public static final String ACCESSPOINT_TYPE = \"accessPointType\";\n-    public static final String ACCESSPOINT_VALUE = \"accessPointValue\";\n-    @Deprecated\n-    public static final String HOSTINGREDIRECTOR = \"hostingRedirector\";\n-    public static final String OVERVIEW = \"overviewDoc\";\n-    public static final String TMODELINSTANCE = \"tmodelInstance\";\n-    public static final String BINDINGTEMPLATE = \"bindingTemplate\";\n-    public static final String BINDINGKEY = \"bindingKey\";\n-    public static final String BUSINESSKEY = \"businessKey\";\n-    public static final String SERVICEKEY = \"serviceKey\";\n-    //public static final String CLICK_TO_EDIT = \"Click to edit\";\n-    public static final String DESCRIPTION = \"Description\";\n-    public static final String DISCOVERYURL = \"disco\";\n-    public static final String PHONE = \"Phone\";\n-    public static final String ADDRESS = \"Address\";\n-    public static final String ADDRESSLINE = \"addressLine\";\n-    public static final String CONTACT_PREFIX = \"contact\";\n-    public static final String NAME = \"Name\";\n-    public static final String LANG = \"Lang\";\n-    public static final String VALUE = \"Value\";\n-    public static final String TYPE = \"Type\";\n-    public static final String EMAIL = \"Email\";\n-    public static final String SORTCODE = \"Sortcode\";\n-    public static final String KEYNAME = \"KeyName\";\n-    public static final String KEYVALUE = \"KeyValue\";\n-    public static final String CATBAG_KEY_REF = \"catbagkeyref\";\n-    public static final String IDENT_KEY_REF = \"identbagkeyref\";\n-    public static final String CATBAG_KEY_REF_GRP = \"catbaggrpkeyref\";\n-    public static final String KEY_REF = \"keyref\";\n-    public static final String TMODEL_DELETED = \"isDeleted\";\n-    \n-\n-}\n", "diff --git a/juddiv3-war/src/main/java/org/apache/juddi/webconsole/StartupServlet.java b/juddiv3-war/src/main/java/org/apache/juddi/webconsole/StartupServlet.java\ndeleted file mode 100644\nindex 025a927c1..000000000\n--- a/juddiv3-war/src/main/java/org/apache/juddi/webconsole/StartupServlet.java\n+++ /dev/null\n@@ -1,119 +0,0 @@\n-/*\n- * To change this template, choose Tools | Templates\n- * and open the template in the editor.\n- */\n-package org.apache.juddi.webconsole;\n-\n-import java.io.FileOutputStream;\n-import java.io.InputStream;\n-import java.util.Properties;\n-import java.util.logging.Level;\n-import java.util.logging.Logger;\n-import javax.servlet.ServletContextEvent;\n-\n-/**\n- * This startup servlet's job is to generate an encryption key which will be\n- * used for encrypting cached user credentials in the http session object\n- *\n- * @author <a href=\"mailto:alexoree@apache.org\">Alex O'Ree</a>\n- */\n-public class StartupServlet implements javax.servlet.ServletContextListener {\n-\n-        static final Logger log = Logger.getLogger(StartupServlet.class.getCanonicalName());\n-\n-        /**\n-         * creates a new AES key and stores it to the properties files\n-         *\n-         * @param sce\n-         */\n-        public void contextInitialized(ServletContextEvent sce) {\n-                log.info(\"juddi-admin gui startup\");\n-                FileOutputStream fos = null;\n-                try {\n-                        //URL resource = sce.getServletContext().getResource(\"/META-INF/config.properties\");\n-                        Properties p = new Properties();\n-\n-                        log.info(\"Attempting to generate 256 bit AES key\");\n-                        boolean ok = false;\n-                        String key = AES.GEN(256);\n-                        if (key == null) {\n-                                ok = false;\n-                        } else {\n-                                if (AES.ValidateKey(key)) {\n-                                        log.info(\"Generation of 256 bit AES key successful\");\n-                                        ok = true;\n-                                } else {\n-                                        log.info(\"256 bit key validation failed.\");\n-                                }\n-                        }\n-                        if (!ok) {\n-                                log.info(\"Attempting to generate 128 bit AES key\");\n-                                key = AES.GEN(128);\n-                                if (key == null) {\n-                                        log.log(Level.SEVERE, \"128 bit key generation failed! user's won't be able to login!\");\n-                                        return;\n-                                } else if (AES.ValidateKey(key)) {\n-                                        log.info(\"Generation of 128 bit AES key successful\");\n-                                } else {\n-                                        log.severe(\"128 bit key validation failed! giving up, user's won't be able to login! \");\n-                                        return;\n-\n-                                }\n-                        }\n-\n-                        p.put(\"key\", key);\n-                        fos = new FileOutputStream(sce.getServletContext().getRealPath(\"/WEB-INF/config.properties\"));\n-\n-                        log.log(Level.INFO, \"Storing key to \" + sce.getServletContext().getRealPath(\"/WEB-INF/config.properties\"));\n-                        p.store(fos, \"No comments\");\n-                        fos.flush();\n-                        fos.close();\n-                } catch (Exception ex) {\n-                        log.log(Level.WARNING, null, ex);\n-                        try {\n-                                if (fos != null) {\n-                                        fos.close();\n-                                }\n-                        } catch (Exception e) {\n-                        }\n-                }\n-        }\n-\n-        /**\n-         * does nothing\n-         *\n-         * @param sce\n-         */\n-        public void contextDestroyed(ServletContextEvent sce) {\n-                FileOutputStream fos = null;\n-                try {\n-                        log.info(\"Cleaning up juddi-admin\");\n-                        Properties p = new Properties();\n-                        InputStream is = sce.getServletContext().getResourceAsStream(\"/WEB-INF/config.properties\");\n-                        p.load(is);\n-                        p.remove(\"key\");\n-                        is.close();\n-                        fos = new FileOutputStream(sce.getServletContext().getRealPath(\"/WEB-INF/config.properties\"));\n-                        p.store(fos, \"No comments\");\n-                        fos.flush();\n-                        fos.close();\n-                } catch (Exception ex) {\n-                        log.log(Level.WARNING, null, ex);\n-                        try {\n-                                if (fos != null) {\n-                                        fos.close();\n-                                }\n-                        } catch (Exception e) {\n-                        }\n-                }\n-                try {\n-                        sce.getServletContext().removeAttribute(\"username\");\n-                        sce.getServletContext().removeAttribute(\"password\");\n-                        sce.getServletContext().removeAttribute(\"locale\");\n-                        sce.getServletContext().removeAttribute(\"hub\");\n-                } catch (Exception ex) {\n-                        log.log(Level.WARNING, null, ex);\n-                }\n-\n-        }\n-}\n", "diff --git a/juddiv3-war/src/main/java/org/apache/juddi/webconsole/hub/UddiAdminHub.java b/juddiv3-war/src/main/java/org/apache/juddi/webconsole/hub/UddiAdminHub.java\ndeleted file mode 100644\nindex c7c715c6f..000000000\n--- a/juddiv3-war/src/main/java/org/apache/juddi/webconsole/hub/UddiAdminHub.java\n+++ /dev/null\n@@ -1,927 +0,0 @@\n-package org.apache.juddi.webconsole.hub;\n-\n-/*\n- * Copyright 2001-2013 The Apache Software Foundation.\n- * \n- * Licensed under the Apache License, Version 2.0 (the \"License\");\n- * you may not use this file except in compliance with the License.\n- * You may obtain a copy of the License at\n- * \n- *      http://www.apache.org/licenses/LICENSE-2.0\n- * \n- * Unless required by applicable law or agreed to in writing, software\n- * distributed under the License is distributed on an \"AS IS\" BASIS,\n- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n- * See the License for the specific language governing permissions and\n- * limitations under the License.\n- *\n- */\n-import java.io.InputStream;\n-import java.io.StringReader;\n-import java.io.StringWriter;\n-import java.net.URL;\n-import java.rmi.RemoteException;\n-import java.util.Map;\n-import java.util.Properties;\n-import java.util.logging.Level;\n-import java.util.logging.Logger;\n-import javax.servlet.ServletContext;\n-import javax.servlet.http.HttpServletRequest;\n-import javax.servlet.http.HttpSession;\n-import javax.xml.bind.JAXB;\n-import javax.xml.datatype.DatatypeConfigurationException;\n-import javax.xml.transform.OutputKeys;\n-import javax.xml.transform.Transformer;\n-import javax.xml.transform.TransformerFactory;\n-import javax.xml.transform.stream.StreamResult;\n-import javax.xml.transform.stream.StreamSource;\n-import javax.xml.ws.BindingProvider;\n-import org.apache.commons.configuration.ConfigurationException;\n-import org.apache.commons.lang.StringEscapeUtils;\n-import org.apache.commons.logging.Log;\n-import org.apache.commons.logging.LogFactory;\n-import org.apache.juddi.api_v3.Clerk;\n-import org.apache.juddi.api_v3.ClerkDetail;\n-import org.apache.juddi.api_v3.ClientSubscriptionInfoDetail;\n-import org.apache.juddi.api_v3.DeleteClientSubscriptionInfo;\n-import org.apache.juddi.api_v3.DeletePublisher;\n-import org.apache.juddi.api_v3.GetAllPublisherDetail;\n-import org.apache.juddi.api_v3.GetPublisherDetail;\n-import org.apache.juddi.api_v3.Node;\n-import org.apache.juddi.api_v3.Publisher;\n-import org.apache.juddi.api_v3.PublisherDetail;\n-import org.apache.juddi.api_v3.SaveClerk;\n-import org.apache.juddi.api_v3.SaveClientSubscriptionInfo;\n-import org.apache.juddi.api_v3.SaveNode;\n-import org.apache.juddi.api_v3.SavePublisher;\n-import org.apache.juddi.api_v3.SyncSubscription;\n-import org.apache.juddi.api_v3.SyncSubscriptionDetail;\n-import org.apache.juddi.v3.client.UDDIConstants;\n-import org.apache.juddi.v3.client.config.ClientConfig;\n-import org.apache.juddi.v3.client.config.UDDIClient;\n-import org.apache.juddi.v3.client.config.UDDINode;\n-import org.apache.juddi.v3.client.transport.Transport;\n-import org.apache.juddi.v3_service.JUDDIApiPortType;\n-import org.apache.juddi.webconsole.AES;\n-import org.apache.juddi.webconsole.resources.ResourceLoader;\n-import org.uddi.api_v3.AuthToken;\n-import org.uddi.api_v3.DeleteTModel;\n-import org.uddi.api_v3.DiscardAuthToken;\n-import org.uddi.api_v3.DispositionReport;\n-import org.uddi.api_v3.FindBusiness;\n-import org.uddi.api_v3.FindQualifiers;\n-import org.uddi.api_v3.GetAuthToken;\n-import org.uddi.api_v3.Name;\n-\n-import org.uddi.v3_service.DispositionReportFaultMessage;\n-import org.uddi.v3_service.UDDISecurityPortType;\n-\n-/**\n- * UddiHub - The hub acts as a single point for managing browser to uddi\n- * services. At most 1 instance is allowed per http session. In general, all\n- * methods in the class trigger web service call outs. All callouts also support\n- * expired UDDI tokens and will attempt to reauthenticate and retry the request.\n- *\n- * @author <a href=\"mailto:alexoree@apache.org\">Alex O'Ree</a>\n- */\n-public class UddiAdminHub {\n-\n-        /**\n-         * The logger name\n-         */\n-        public static final String LOGGER_NAME = \"org.apache.juddi\";\n-        transient AuthStyle style = null;\n-        Properties properties = null;\n-        /**\n-         * The Log4j logger. This is also referenced from the Builders class,\n-         * thus it is public\n-         */\n-        public static final Log log = LogFactory.getLog(LOGGER_NAME);\n-\n-        private UddiAdminHub() throws DatatypeConfigurationException {\n-                //    df = DatatypeFactory.newInstance();\n-        }\n-\n-        /**\n-         * removes the Hub from the current http session\n-         *\n-         * @param _session\n-         */\n-        public static void reset(HttpSession _session) {\n-                _session.removeAttribute(\"hub\");\n-                // token = null;\n-        }\n-\n-        /**\n-         * This kills any authentication tokens, logs the user out and nulls out\n-         * all services\n-         */\n-        public void die() {\n-                if (token != null && security != null) {\n-                        DiscardAuthToken da = new DiscardAuthToken();\n-                        da.setAuthInfo(token);\n-                        try {\n-                                security.discardAuthToken(da);\n-                        } catch (Exception ex) {\n-                                HandleException(ex);\n-                        }\n-                }\n-                token = null;\n-                security = null;\n-                juddi = null;\n-        }\n-        /**\n-         * the name of the 'node' property in the config\n-         */\n-        public static final String PROP_CONFIG_NODE = \"config.props.node\";\n-        /**\n-         *\n-         */\n-        public static final String PROP_AUTH_TYPE = \"config.props.authtype\";\n-        /**\n-         *\n-         */\n-        public static final String PROP_AUTO_LOGOUT = \"config.props.automaticLogouts.enable\";\n-        /**\n-         *\n-         */\n-        public static final String PROP_AUTO_LOGOUT_TIMER = \"config.props.automaticLogouts.duration\";\n-        /**\n-         *\n-         */\n-        public static final String PROP_PREFIX = \"config.props.\";\n-        /**\n-         *\n-         *\n-         */\n-        public static final String PROP_ADMIN_LOCALHOST_ONLY = \"config.props.configLocalHostOnly\";\n-\n-        private transient UDDISecurityPortType security = null;\n-        private transient JUDDIApiPortType juddi = null;\n-        private transient String token = null;\n-        private transient HttpSession session;\n-        private transient Transport transport = null;\n-        private transient ClientConfig clientConfig;\n-        private static final long serialVersionUID = 1L;\n-        private String nodename = \"default\";\n-        private final String clientName = \"juddigui\";\n-        private boolean WS_Transport = false;\n-        private boolean WS_securePorts = false;\n-\n-        /**\n-         * This is the singleton accessor UddiHub. There should be at most 1\n-         * instance per HTTP Session (user login)\n-         *\n-         * @param application\n-         * @param _session\n-         * @return\n-         * @throws Exception\n-         */\n-        public static UddiAdminHub getInstance(ServletContext application, HttpSession _session) throws Exception {\n-                Object j = _session.getAttribute(\"hub\");\n-                if (j == null) {\n-                        UddiAdminHub hub = new UddiAdminHub(application, _session);\n-                        _session.setAttribute(\"hub\", hub);\n-                        return hub;\n-                }\n-\n-                return (UddiAdminHub) j;\n-        }\n-        String locale = \"en\";\n-\n-        private UddiAdminHub(ServletContext application, HttpSession _session) throws Exception {\n-                URL prop = application.getResource(\"/WEB-INF/config.properties\");\n-                if (prop == null) {\n-                        application.getResource(\"WEB-INF/config.properties\");\n-                }\n-                if (prop == null) {\n-                        throw new Exception(\"Cannot locate the configuration file.\");\n-                }\n-                session = _session;\n-\n-                InputStream in = prop.openStream();\n-                Properties p = new Properties();\n-                p.load(in);\n-                in.close();\n-                session = _session;\n-                properties = p;\n-                EnsureConfig();\n-        }\n-\n-        private void EnsureConfig() {\n-                if (clientConfig == null) {\n-                        try {\n-                                UDDIClient client = new UDDIClient();\n-\n-                                clientConfig = client.getClientConfig();\n-                                try {\n-                                        style = AuthStyle.valueOf(clientConfig.getConfiguration().getString(PROP_AUTH_TYPE));\n-                                } catch (Exception ex) {\n-                                        log.warn(\"'UDDI_AUTH' is not defined in the config (\" + PROP_AUTH_TYPE + \")! defaulting to UDDI_AUTH\");\n-                                        style = AuthStyle.UDDI_AUTH;\n-                                }\n-\n-                                nodename = clientConfig.getConfiguration().getString(PROP_CONFIG_NODE);\n-                                if (nodename == null || nodename.equals(\"\")) {\n-                                        log.warn(\"'node' is not defined in the config! defaulting to 'default'\");\n-                                        nodename = \"default\";\n-                                }\n-                                UDDINode uddiNode = clientConfig.getUDDINode(nodename);\n-\n-                                String clazz = uddiNode.getProxyTransport();\n-                                if (clazz.contains(\"JAXWSTransport\")) {\n-                                        WS_Transport = true;\n-                                }\n-\n-                                transport = client.getTransport(nodename);\n-                                security = transport.getUDDISecurityService();\n-                                juddi = transport.getJUDDIApiService();\n-                                if (WS_Transport) {\n-                                        if (uddiNode.getJuddiApiUrl().toLowerCase().startsWith(\"https://\")\n-                                                && (uddiNode.getSecurityUrl() != null && uddiNode.getSecurityUrl().toLowerCase().startsWith(\"https://\"))) {\n-                                                WS_securePorts = true;\n-                                        }\n-                                }\n-\n-                        } catch (Exception ex) {\n-                                HandleException(ex);\n-                        }\n-                }\n-\n-        }\n-\n-        /**\n-         * This function provides a basic error handling rutine that will pull\n-         * out the true error message in a UDDI fault message, returning\n-         * bootstrap stylized html error message\n-         *\n-         * @param ex\n-         * @return\n-         */\n-        private String HandleException(Exception ex) {\n-                if (ex instanceof DispositionReportFaultMessage) {\n-                        DispositionReportFaultMessage f = (DispositionReportFaultMessage) ex;\n-                        log.error(null, ex);\n-                        return ResourceLoader.GetResource(session, \"errors.uddi\") + \" \" + ex.getMessage() + \" \" + (f.detail!=null ? f.detail.getMessage() : \"\");\n-                }\n-                if (ex instanceof RemoteException) {\n-                        RemoteException f = (RemoteException) ex;\n-                        log.error(null, ex);\n-                        return ResourceLoader.GetResource(session, \"errors.generic\") + \" \" + ex.getMessage() + \" \" + (f.detail!=null ? f.detail.getMessage() : \"\");\n-                }\n-                log.error(null, ex);\n-                return //\"<div class=\\\"alert alert-error\\\" ><h3><i class=\\\"icon-warning-sign\\\"></i> \"\n-                        ResourceLoader.GetResource(session, \"errors.generic\") + \" \" + StringEscapeUtils.escapeHtml(ex.getMessage());\n-                //+ \"</h3></div>\";\n-\n-        }\n-\n-        /**\n-         * returns true if we are using JAXWS transport AND all of the URLs\n-         * start with https://\n-         *\n-         * @return\n-         */\n-        public boolean isSecure() {\n-\n-                EnsureConfig();\n-                return WS_securePorts;\n-        }\n-\n-        /**\n-         * gets a reference to the current juddi client config file. this is a\n-         * live instance changes can be stored to disk, usually\n-         *\n-         * @return\n-         * @throws ConfigurationException g\n-         */\n-        public ClientConfig GetJuddiClientConfig() throws ConfigurationException {\n-                EnsureConfig();\n-                return clientConfig;\n-        }\n-\n-        /**\n-         * Handles all API calls to the juddi web service\n-         *\n-         * @param parameters\n-         * @return\n-         */\n-        public String go(HttpServletRequest parameters) {\n-                try {\n-                        String action = parameters.getParameter(\"soapaction\");\n-                        if (action.equalsIgnoreCase(\"adminDelete_tmodel\")) {\n-                                return adminDelete_tmodel(parameters);\n-                        }\n-                        if (action.equalsIgnoreCase(\"delete_ClientSubscriptionInfo\")) {\n-                                return delete_ClientSubscriptionInfo(parameters);\n-                        }\n-                        if (action.equalsIgnoreCase(\"delete_publisher\")) {\n-                                return delete_publisher(parameters);\n-                        }\n-                        if (action.equalsIgnoreCase(\"getAllPublisherDetail\")) {\n-                                return getAllPublisherDetail(parameters);\n-                        }\n-                        if (action.equalsIgnoreCase(\"get_publisherDetail\")) {\n-                                return get_publisherDetail(parameters);\n-                        }\n-                        if (action.equalsIgnoreCase(\"invoke_SyncSubscription\")) {\n-                                return invoke_SyncSubscription(parameters);\n-                        }\n-                        if (action.equalsIgnoreCase(\"save_Clerk\")) {\n-                                return save_Clerk(parameters);\n-                        }\n-                        if (action.equalsIgnoreCase(\"save_ClientSubscriptionInfo\")) {\n-                                return save_ClientSubscriptionInfo(parameters);\n-                        }\n-                        if (action.equalsIgnoreCase(\"save_Node\")) {\n-                                return save_Node(parameters);\n-                        }\n-                        if (action.equalsIgnoreCase(\"save_publisher\")) {\n-                                return save_publisher(parameters);\n-                        }\n-                } catch (Exception ex) {\n-                        return \"Error!\" + HandleException(ex);\n-                }\n-                return \"not yet implemented!\";\n-        }\n-\n-        private String save_Clerk(HttpServletRequest parameters) {\n-                SaveClerk sc = new SaveClerk();\n-                sc.setAuthInfo(GetToken());\n-                Clerk c = new Clerk();\n-                c.setName(parameters.getParameter(\"CLERKsetName\"));\n-                Node node=new Node();\n-                node.setClientName(parameters.getParameter(\"CLERKNODEsetClientName\"));\n-                node.setCustodyTransferUrl(parameters.getParameter(\"CLERKNODEsetCustodyTransferUrl\"));\n-                node.setDescription(parameters.getParameter(\"CLERKNODEsetDescription\"));\n-                node.setFactoryInitial(parameters.getParameter(\"CLERKNODEsetFactoryInitial\"));\n-                node.setFactoryNamingProvider(parameters.getParameter(\"CLERKNODEsetFactoryNamingProvider\"));\n-                node.setFactoryURLPkgs(parameters.getParameter(\"CLERKNODEsetFactoryURLPkgs\"));\n-                node.setInquiryUrl(parameters.getParameter(\"CLERKNODEsetInquiryUrl\"));\n-                node.setJuddiApiUrl(parameters.getParameter(\"CLERKNODEsetJuddiApiUrl\"));\n-                node.setName(parameters.getParameter(\"CLERKNODEsetName\"));\n-                node.setProxyTransport(parameters.getParameter(\"CLERKNODEsetProxyTransport\"));\n-                node.setPublishUrl(parameters.getParameter(\"CLERKNODEsetPublishUrl\"));\n-                node.setReplicationUrl(parameters.getParameter(\"CLERKNODEsetReplicationUrl\"));\n-                node.setSecurityUrl(parameters.getParameter(\"CLERKNODEsetSecurityUrl\"));\n-                node.setSubscriptionListenerUrl(parameters.getParameter(\"CLERKNODEsetSubscriptionListenerUrl\"));\n-                node.setSubscriptionUrl(parameters.getParameter(\"CLERKNODEsetSubscriptionUrl\"));\n-                c.setNode(node);\n-                c.setPassword(parameters.getParameter(\"CLERKsetPassword\"));\n-                c.setPublisher(parameters.getParameter(\"CLERKsetPublisher\"));\n-                \n-                sc.getClerk().add(c);\n-                try {\n-                        juddi.saveClerk(sc);\n-                } catch (Exception ex) {\n-                        if (isExceptionExpiration(ex)) {\n-                                token = null;\n-                                sc.setAuthInfo(GetToken());\n-                                try {\n-                                        juddi.saveClerk(sc);\n-                                } catch (Exception ex1) {\n-                                        return \"Error!\" + HandleException(ex1);\n-                                }\n-\n-                        } else {\n-                                return \"Error!\" + HandleException(ex);\n-                        }\n-                }\n-                return \"Success\";\n-        }\n-\n-        private String save_Node(HttpServletRequest parameters) {\n-                SaveNode sn = new SaveNode();\n-                sn.setAuthInfo(GetToken());\n-                Node node = new Node();\n-                node.setClientName(parameters.getParameter(\"NODEsetClientName\"));\n-                node.setCustodyTransferUrl(parameters.getParameter(\"NODEsetCustodyTransferUrl\"));\n-                node.setDescription(parameters.getParameter(\"NODEsetDescription\"));\n-                node.setFactoryInitial(parameters.getParameter(\"NODEsetFactoryInitial\"));\n-                node.setFactoryNamingProvider(parameters.getParameter(\"NODEsetFactoryNamingProvider\"));\n-                node.setFactoryURLPkgs(parameters.getParameter(\"NODEsetFactoryURLPkgs\"));\n-                node.setInquiryUrl(parameters.getParameter(\"NODEsetInquiryUrl\"));\n-                node.setJuddiApiUrl(parameters.getParameter(\"NODEsetJuddiApiUrl\"));\n-                node.setName(parameters.getParameter(\"NODEsetName\"));\n-                node.setProxyTransport(parameters.getParameter(\"NODEsetProxyTransport\"));\n-                node.setPublishUrl(parameters.getParameter(\"NODEsetPublishUrl\"));\n-                node.setReplicationUrl(parameters.getParameter(\"NODEsetReplicationUrl\"));\n-                node.setSecurityUrl(parameters.getParameter(\"NODEsetSecurityUrl\"));\n-                node.setSubscriptionListenerUrl(parameters.getParameter(\"NODEsetSubscriptionListenerUrl\"));\n-                node.setSubscriptionUrl(parameters.getParameter(\"NODEsetSubscriptionUrl\"));\n-                sn.getNode().add(node);\n-\n-                try {\n-                        juddi.saveNode(sn);\n-                } catch (Exception ex) {\n-                        if (isExceptionExpiration(ex)) {\n-                                token = null;\n-                                sn.setAuthInfo(GetToken());\n-                                try {\n-                                        juddi.saveNode(sn);\n-                                } catch (Exception ex1) {\n-                                        return \"Error!\" + HandleException(ex1);\n-                                }\n-\n-                        } else {\n-                                return \"Error!\" + HandleException(ex);\n-                        }\n-                }\n-                return \"Success\";\n-        }\n-\n-      \n-\n-        public enum AuthStyle {\n-\n-                /**\n-                 * Http\n-                 */\n-                HTTP,\n-                /**\n-                 * UDDI Authentication via the Security API\n-                 */\n-                UDDI_AUTH\n-        }\n-\n-        private String GetToken() {\n-                EnsureConfig();\n-                if (style != AuthStyle.UDDI_AUTH) {\n-                        BindingProvider bp = null;\n-                        if (WS_Transport) {\n-                                Map<String, Object> context = null;\n-                                bp = (BindingProvider) juddi;\n-                                context = bp.getRequestContext();\n-                                context.put(BindingProvider.USERNAME_PROPERTY, session.getAttribute(\"username\"));\n-                                context.put(BindingProvider.USERNAME_PROPERTY, session.getAttribute(AES.Decrypt(\"password\", (String) properties.get(\"key\"))));\n-                        }\n-                        return null;\n-                } else {\n-                        if (token != null) {\n-                                return token;\n-                        }\n-                        GetAuthToken req = new GetAuthToken();\n-                        if (session.getAttribute(\"username\") != null\n-                                && session.getAttribute(\"password\") != null) {\n-                                req.setUserID((String) session.getAttribute(\"username\"));\n-                                req.setCred(AES.Decrypt((String) session.getAttribute(\"password\"), (String) properties.get(\"key\")));\n-                                try {\n-                                        AuthToken authToken = security.getAuthToken(req);\n-                                        token = authToken.getAuthInfo();\n-                                } catch (Exception ex) {\n-                                        return HandleException(ex);\n-                                }\n-                        }\n-                }\n-                return token;\n-        }\n-\n-        private String delete_publisher(HttpServletRequest parameters) {\n-                DeletePublisher sb = new DeletePublisher();\n-                sb.setAuthInfo(GetToken());\n-                sb.getPublisherId().add(parameters.getParameter(\"delete_publisherKEY\"));\n-                try {\n-                        juddi.deletePublisher(sb);\n-                } catch (Exception ex) {\n-                        if (isExceptionExpiration(ex)) {\n-                                token = null;\n-                                sb.setAuthInfo(GetToken());\n-                                try {\n-                                        juddi.deletePublisher(sb);\n-                                } catch (Exception e) {\n-                                        return HandleException(e);\n-                                }\n-\n-                        } else {\n-                                return HandleException(ex);\n-                        }\n-                }\n-                return \"Success\";\n-        }\n-\n-        private String getAllPublisherDetail(HttpServletRequest parameters) {\n-                StringBuilder ret = new StringBuilder();\n-                GetAllPublisherDetail sb = new GetAllPublisherDetail();\n-                sb.setAuthInfo(GetToken());\n-                PublisherDetail d = null;\n-                try {\n-                        d = juddi.getAllPublisherDetail(sb);\n-                } catch (Exception ex) {\n-                        if (isExceptionExpiration(ex)) {\n-                                token = null;\n-                                sb.setAuthInfo(GetToken());\n-                                try {\n-                                        d = juddi.getAllPublisherDetail(sb);\n-                                } catch (Exception ex1) {\n-                                        return HandleException(ex);\n-                                }\n-\n-                        } else {\n-                                return HandleException(ex);\n-                        }\n-                }\n-                if (d != null) {\n-                        ret.append(\"<table class=\\\"table table-hover\\\"><tr><th>Name</th><th>Info</th></tr>\");\n-                        for (int i = 0; i < d.getPublisher().size(); i++) {\n-                                ret.append(\"<tr><td>\").append(StringEscapeUtils.escapeHtml(d.getPublisher().get(i).getPublisherName()))\n-                                        .append(\"</td><td>\");\n-                                ret.append(PrintPublisherDetail(d.getPublisher().get(i)))\n-                                        .append(\"</td></tr>\");\n-                        }\n-                        ret.append(\"</table>\");\n-                } else {\n-                        ret.append(\"No data returned\");\n-                }\n-                return ret.toString();\n-        }\n-\n-        private String PrintPublisherDetail(Publisher p) {\n-                StringBuilder ret = new StringBuilder();\n-\n-                ret.append(\"Authorized Name = \").append(StringEscapeUtils.escapeHtml(p.getAuthorizedName()))\n-                        .append(\"<br>\")\n-                        .append(\"Publisher Name = \").append(StringEscapeUtils.escapeHtml(p.getPublisherName()))\n-                        .append(\"<br>\")\n-                        .append(\"Email = \")\n-                        .append(StringEscapeUtils.escapeHtml(p.getEmailAddress()))\n-                        .append(\"<br>\")\n-                        .append(\"Administrator = \")\n-                        .append((p.isIsAdmin()))\n-                        .append(\"<br>\")\n-                        .append(\"Enabled = \")\n-                        .append((p.isIsEnabled()))\n-                        .append(\"<br>\")\n-                        .append(\"Max Bindings per = \")\n-                        .append(p.getMaxBindingsPerService())\n-                        .append(\"<br>\")\n-                        .append(\"Max Businesses = \")\n-                        .append(p.getMaxBusinesses())\n-                        .append(\"<br>\")\n-                        .append(\"Max Services per = \")\n-                        .append(p.getMaxServicePerBusiness())\n-                        .append(\"<br>\")\n-                        .append(\"Max tModels = \")\n-                        .append(p.getMaxTModels())\n-                        .append(\"\");\n-                return ret.toString();\n-        }\n-\n-        private String get_publisherDetail(HttpServletRequest parameters) {\n-                StringBuilder ret = new StringBuilder();\n-                GetPublisherDetail sb = new GetPublisherDetail();\n-                sb.getPublisherId().add(parameters.getParameter(\"get_publisherDetailKEY\"));\n-                sb.setAuthInfo(GetToken());\n-                PublisherDetail d = null;\n-                try {\n-                        d = juddi.getPublisherDetail(sb);\n-                } catch (Exception ex) {\n-                        if (isExceptionExpiration(ex)) {\n-                                token = null;\n-                                sb.setAuthInfo(GetToken());\n-                                try {\n-                                        d = juddi.getPublisherDetail(sb);\n-                                } catch (Exception ex1) {\n-                                        return HandleException(ex);\n-                                }\n-\n-                        } else {\n-                                return HandleException(ex);\n-                        }\n-                }\n-                if (d != null) {\n-                        ret.append(\"<table class=\\\"table table-hover\\\"><tr><th>Name</th><th>Info</th></tr>\");\n-                        for (int i = 0; i < d.getPublisher().size(); i++) {\n-                                ret.append(\"<tr><td>\").append(StringEscapeUtils.escapeHtml(d.getPublisher().get(i).getPublisherName()))\n-                                        .append(\"</td><td>\");\n-                                ret.append(PrintPublisherDetail(d.getPublisher().get(i)))\n-                                        .append(\"</td></tr>\");\n-                        }\n-                        ret.append(\"</table>\");\n-                } else {\n-                        ret.append(\"No data returned\");\n-                }\n-                return ret.toString();\n-        }\n-\n-        private String invoke_SyncSubscription(HttpServletRequest parameters) {\n-                StringBuilder ret = new StringBuilder();\n-                SyncSubscription sb = new SyncSubscription();\n-\n-                SyncSubscriptionDetail d = null;\n-                try {\n-                        StringReader sr = new StringReader(parameters.getParameter(\"invokeSyncSubscriptionXML\").trim());\n-                        sb = (JAXB.unmarshal(sr, SyncSubscription.class));\n-                        sb.setAuthInfo(GetToken());\n-                        d = juddi.invokeSyncSubscription(sb);\n-                } catch (Exception ex) {\n-                        if (isExceptionExpiration(ex)) {\n-                                token = null;\n-                                sb.setAuthInfo(GetToken());\n-                                try {\n-                                        d = juddi.invokeSyncSubscription(sb);\n-                                } catch (Exception ex1) {\n-                                        return HandleException(ex);\n-                                }\n-\n-                        } else {\n-                                return HandleException(ex);\n-                        }\n-                }\n-                if (d != null) {\n-                        ret.append(\"<pre>\");\n-                        StringWriter sw = new StringWriter();\n-                        JAXB.marshal(d, sw);\n-                        sw.append(PrettyPrintXML(sw.toString()));\n-                        ret.append(\"</pre>\");\n-                } else {\n-                        ret.append(\"No data returned\");\n-                }\n-                return ret.toString();\n-        }\n-\n-        private static String PrettyPrintXML(String input) {\n-                try {\n-                        Transformer transformer = TransformerFactory.newInstance().newTransformer();\n-                        transformer.setOutputProperty(OutputKeys.INDENT, \"yes\");\n-//initialize StreamResult with File object to save to file\n-                        StreamResult result = new StreamResult(new StringWriter());\n-                        StreamSource source = new StreamSource(new StringReader(input));\n-                        transformer.transform(source, result);\n-                        String xmlString = result.getWriter().toString();\n-                        return (xmlString);\n-                } catch (Exception ex) {\n-                }\n-                return null;\n-        }\n-\n-        private String save_ClientSubscriptionInfo(HttpServletRequest parameters) {\n-                StringBuilder ret = new StringBuilder();\n-                SaveClientSubscriptionInfo sb = new SaveClientSubscriptionInfo();\n-\n-                ClientSubscriptionInfoDetail d = null;\n-                try {\n-                        StringReader sr = new StringReader(parameters.getParameter(\"invokeSyncSubscriptionXML\").trim());\n-                        sb = (JAXB.unmarshal(sr, SaveClientSubscriptionInfo.class));\n-                        sb.setAuthInfo(GetToken());\n-                        d = juddi.saveClientSubscriptionInfo(sb);\n-                } catch (Exception ex) {\n-                        if (ex instanceof DispositionReportFaultMessage) {\n-                                DispositionReportFaultMessage f = (DispositionReportFaultMessage) ex;\n-                                if (f.getFaultInfo().countainsErrorCode(DispositionReport.E_AUTH_TOKEN_EXPIRED)) {\n-                                        token = null;\n-                                        sb.setAuthInfo(GetToken());\n-                                        try {\n-                                                d = juddi.saveClientSubscriptionInfo(sb);\n-                                        } catch (Exception ex1) {\n-                                                return HandleException(ex);\n-                                        }\n-                                }\n-                        } else {\n-                                return HandleException(ex);\n-                        }\n-                }\n-                if (d != null) {\n-                        ret.append(\"<pre>\");\n-                        StringWriter sw = new StringWriter();\n-                        JAXB.marshal(d, sw);\n-                        sw.append(PrettyPrintXML(sw.toString()));\n-                        ret.append(\"</pre>\");\n-                } else {\n-                        ret.append(\"No data returned\");\n-                }\n-                return ret.toString();\n-        }\n-\n-        /**\n-         * return true if the word expire is in the exception or the UDDI error\n-         * code representing an expired token\n-         *\n-         * @param ex\n-         * @return r\n-         */\n-        public static boolean isExceptionExpiration(Exception ex) {\n-                if (ex == null) {\n-                        return false;\n-                }\n-                if (ex instanceof DispositionReportFaultMessage) {\n-                        DispositionReportFaultMessage f = (DispositionReportFaultMessage) ex;\n-                        if (f.getFaultInfo().countainsErrorCode(DispositionReport.E_AUTH_TOKEN_EXPIRED) || ex.getMessage().contains(DispositionReport.E_AUTH_TOKEN_EXPIRED) || ex.getMessage().toLowerCase().contains(\"expired\")) {\n-                                return true;\n-                        }\n-                }\n-\n-                if (ex.getMessage() == null) {\n-                        return false;\n-                }\n-                if (ex.getMessage().toLowerCase().contains(\"expire\")) {\n-                        return true;\n-                }\n-\n-                if (ex.getMessage().toLowerCase().contains(DispositionReport.E_AUTH_TOKEN_EXPIRED.toLowerCase())) {\n-                        return true;\n-                }\n-                if (ex.getLocalizedMessage() == null) {\n-                        return false;\n-                }\n-                if (ex.getLocalizedMessage().toLowerCase().contains(\"expire\")) {\n-                        return true;\n-                }\n-                return false;\n-        }\n-\n-        private String save_publisher(HttpServletRequest parameters) {\n-\n-                SavePublisher sb = new SavePublisher();\n-                Publisher p = new Publisher();\n-                p.setAuthorizedName(parameters.getParameter(\"savePublisherAuthorizedName\"));\n-                p.setPublisherName(parameters.getParameter(\"savePublisherNAME\"));\n-                p.setEmailAddress(parameters.getParameter(\"savePublisherEMAIL\"));\n-                try {\n-                        p.setIsAdmin(Boolean.parseBoolean(parameters.getParameter(\"savePublisherIsAdmin\")));\n-                } catch (Exception ex) {\n-                }\n-                if (\"on\".equalsIgnoreCase(parameters.getParameter(\"savePublisherIsAdmin\"))) {\n-                        p.setIsAdmin(true);\n-                }\n-                try {\n-                        p.setIsEnabled(Boolean.parseBoolean(parameters.getParameter(\"savePublisherIsEnabled\")));\n-                } catch (Exception ex) {\n-                }\n-                if (\"on\".equalsIgnoreCase(parameters.getParameter(\"savePublisherIsEnabled\"))) {\n-                        p.setIsEnabled(true);\n-                }\n-\n-                PublisherDetail d = null;\n-                sb.setAuthInfo(GetToken());\n-                try {\n-                        if (parameters.getParameter(\"savePublisherMaxBindings\") != null) {\n-                                p.setMaxBindingsPerService(Integer.parseInt(parameters.getParameter(\"savePublisherMaxBindings\")));\n-                        }\n-                } catch (Exception ex) {\n-                }\n-                try {\n-                        if (parameters.getParameter(\"savePublisherMaxServices\") != null) {\n-                                p.setMaxServicePerBusiness(Integer.parseInt(parameters.getParameter(\"savePublisherMaxServices\")));\n-                        }\n-                } catch (Exception ex) {\n-                }\n-                try {\n-                        if (parameters.getParameter(\"savePublisherMaxBusiness\") != null) {\n-                                p.setMaxBusinesses(Integer.parseInt(parameters.getParameter(\"savePublisherMaxBusiness\")));\n-                        }\n-                } catch (Exception ex) {\n-                }\n-                try {\n-                        if (parameters.getParameter(\"savePublisherMaxTModels\") != null) {\n-                                p.setMaxTModels(Integer.parseInt(parameters.getParameter(\"savePublisherMaxTModels\")));\n-                        }\n-                } catch (Exception ex) {\n-                }\n-                sb.getPublisher().add(p);\n-                try {\n-\n-                        d = juddi.savePublisher(sb);\n-                } catch (Exception ex) {\n-\n-                        if (isExceptionExpiration(ex)) {\n-                                token = null;\n-                                sb.setAuthInfo(GetToken());\n-                                try {\n-                                        d = juddi.savePublisher(sb);\n-                                } catch (Exception ex1) {\n-                                        return HandleException(ex);\n-                                }\n-                        } else {\n-                                return HandleException(ex);\n-                        }\n-                }\n-                return \"Success\";\n-        }\n-\n-        private String adminDelete_tmodel(HttpServletRequest parameters) {\n-                DeleteTModel sb = new DeleteTModel();\n-                sb.getTModelKey().add(parameters.getParameter(\"adminDelete_tmodelKEY\"));\n-                sb.setAuthInfo(GetToken());\n-                try {\n-                        juddi.adminDeleteTModel(sb);\n-                } catch (Exception ex) {\n-                        if (isExceptionExpiration(ex)) {\n-                                token = null;\n-                                sb.setAuthInfo(GetToken());\n-                                try {\n-                                        juddi.adminDeleteTModel(sb);\n-                                } catch (Exception ex1) {\n-                                        return HandleException(ex);\n-                                }\n-                        } else {\n-                                return HandleException(ex);\n-                        }\n-                }\n-                return \"Success\";\n-        }\n-\n-        private String delete_ClientSubscriptionInfo(HttpServletRequest parameters) {\n-                DeleteClientSubscriptionInfo sb = new DeleteClientSubscriptionInfo();\n-                sb.getSubscriptionKey().add(parameters.getParameter(\"delete_ClientSubscriptionInfoKEY\"));\n-                sb.setAuthInfo(GetToken());\n-                try {\n-                        juddi.deleteClientSubscriptionInfo(sb);\n-                } catch (Exception ex) {\n-                        if (isExceptionExpiration(ex)) {\n-                                token = null;\n-                                sb.setAuthInfo(GetToken());\n-                                try {\n-                                        juddi.deleteClientSubscriptionInfo(sb);\n-                                } catch (Exception ex1) {\n-                                        return HandleException(ex);\n-                                }\n-\n-                        } else {\n-                                return HandleException(ex);\n-                        }\n-                }\n-                return \"Success\";\n-        }\n-\n-        /**\n-         * If false, the configuration page will be available from anywhere. If\n-         * true, it will only be accessible from the server hosting juddi-gui.\n-         * if not defined, the result is true.\n-         *\n-         * @return\n-         */\n-        public boolean isAdminLocalhostOnly() {\n-                return clientConfig.getConfiguration().getBoolean(PROP_ADMIN_LOCALHOST_ONLY, true);\n-        }\n-\n-        public String verifyLogin() {\n-                EnsureConfig();\n-                if (style != AuthStyle.UDDI_AUTH) {\n-                        if (WS_Transport) {\n-                                BindingProvider bp = null;\n-                                Map<String, Object> context = null;\n-\n-                                bp = (BindingProvider) juddi;\n-                                context = bp.getRequestContext();\n-                                context.put(BindingProvider.USERNAME_PROPERTY, session.getAttribute(\"username\"));\n-                                context.put(BindingProvider.USERNAME_PROPERTY, session.getAttribute(AES.Decrypt(\"password\", (String) properties.get(\"key\"))));\n-                        }\n-                        FindBusiness fb = new FindBusiness();\n-                        fb.setListHead(0);\n-                        fb.setMaxRows(1);\n-                        fb.setFindQualifiers(new FindQualifiers());\n-                        fb.getFindQualifiers().getFindQualifier().add(UDDIConstants.APPROXIMATE_MATCH);\n-                        fb.getName().add(new Name(UDDIConstants.WILDCARD, null));\n-                        try {\n-                                GetPublisherDetail publisherDetail = new GetPublisherDetail();\n-                                publisherDetail.getPublisherId().add((String) session.getAttribute(\"username\"));\n-                                juddi.getPublisherDetail(publisherDetail);\n-\n-                        } catch (Exception ex) {\n-                                return HandleException(ex);\n-                        }\n-                        /*\n-                         bp = (BindingProvider) juddi;\n-                         context = bp.getRequestContext();\n-                         context.put(BindingProvider.USERNAME_PROPERTY, session.getAttribute(\"username\"));\n-                         context.put(BindingProvider.USERNAME_PROPERTY, session.getAttribute(AES.Decrypt(\"password\", (String) properties.get(\"key\"))));*/\n-                        return null;\n-                } else {\n-                        if (token != null) {\n-                                return token;\n-                        }\n-                        if (WS_Transport) {\n-                                BindingProvider bp = null;\n-                                Map<String, Object> context = null;\n-\n-                                bp = (BindingProvider) juddi;\n-                                context = bp.getRequestContext();\n-                                context.remove(BindingProvider.USERNAME_PROPERTY);\n-                                context.remove(BindingProvider.PASSWORD_PROPERTY);\n-                        }\n-                        GetAuthToken req = new GetAuthToken();\n-                        try {\n-                                if (security == null) {\n-                                        security = transport.getUDDISecurityService();\n-                                }\n-                        } catch (Exception ex) {\n-                                return HandleException(ex);\n-                        }\n-                        if (session.getAttribute(\"username\") != null\n-                                && session.getAttribute(\"password\") != null) {\n-                                req.setUserID((String) session.getAttribute(\"username\"));\n-                                req.setCred(AES.Decrypt((String) session.getAttribute(\"password\"), (String) properties.get(\"key\")));\n-                                log.info(\"AUDIT: fetching auth token for \" + req.getUserID() + \" Auth Mode is \" + ((security == null) ? \"HTTP\" : \"AUTH_TOKEN\"));\n-                                try {\n-                                        AuthToken authToken = security.getAuthToken(req);\n-                                        token = authToken.getAuthInfo();\n-                                        return null;\n-                                } catch (Exception ex) {\n-                                        return HandleException(ex);\n-                                }\n-                        }\n-                }\n-                return \"Unexpected error\";\n-        }\n-\n-}\n", "diff --git a/juddiv3-war/src/main/java/org/apache/juddi/webconsole/hub/builders/Builders.java b/juddiv3-war/src/main/java/org/apache/juddi/webconsole/hub/builders/Builders.java\ndeleted file mode 100644\nindex 75ab40d18..000000000\n--- a/juddiv3-war/src/main/java/org/apache/juddi/webconsole/hub/builders/Builders.java\n+++ /dev/null\n@@ -1,959 +0,0 @@\n-/*\n- * Copyright 2001-2013 The Apache Software Foundation.\n- * \n- * Licensed under the Apache License, Version 2.0 (the \"License\");\n- * you may not use this file except in compliance with the License.\n- * You may obtain a copy of the License at\n- * \n- *      http://www.apache.org/licenses/LICENSE-2.0\n- * \n- * Unless required by applicable law or agreed to in writing, software\n- * distributed under the License is distributed on an \"AS IS\" BASIS,\n- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n- * See the License for the specific language governing permissions and\n- * limitations under the License.\n- *\n- */\n-package org.apache.juddi.webconsole.hub.builders;\n-\n-import java.text.DateFormat;\n-import java.text.SimpleDateFormat;\n-import java.util.ArrayList;\n-import java.util.Date;\n-import java.util.GregorianCalendar;\n-import java.util.HashMap;\n-import java.util.Iterator;\n-import java.util.List;\n-import java.util.Map;\n-import java.util.concurrent.atomic.AtomicReference;\n-import java.util.regex.Matcher;\n-import java.util.regex.Pattern;\n-import javax.servlet.http.HttpSession;\n-import javax.xml.datatype.DatatypeFactory;\n-import org.apache.commons.logging.Log;\n-import org.apache.commons.logging.LogFactory;\n-import org.apache.juddi.webconsole.PostBackConstants;\n-import org.apache.juddi.webconsole.resources.ResourceLoader;\n-import org.uddi.api_v3.*;\n-import org.uddi.sub_v3.Subscription;\n-import org.uddi.sub_v3.SubscriptionFilter;\n-\n-/**\n- * This class provides functions for building UDDI entities from Http request\n- * parameters\n- *\n- * @author <a href=\"mailto:alexoree@apache.org\">Alex O'Ree</a>\n- */\n-public class Builders {\n-\n-    static Log log = LogFactory.getLog(Builders.class);\n-    /**\n-     * important - regex to separate postback names from indexes, do not remove\n-     * or alter\n-     */\n-    static final Pattern p = Pattern.compile(\"[a-zA-Z]\");\n-\n-    /**\n-     * Returns a new map, filtering the original map by key string starts with\n-     *\n-     * @param map\n-     * @param pattern\n-     * @return\n-     */\n-    public static Map MapFilter(Map map, String pattern) {\n-        Map ret = new HashMap();\n-        Iterator it = map.keySet().iterator();\n-        while (it.hasNext()) {\n-            String key = (String) it.next();\n-            if (key.startsWith(pattern)) {\n-                ret.put(key, map.get(key));\n-            }\n-        }\n-        return ret;\n-    }\n-\n-    /**\n-     * Prefix should be contactXName\n-     *\n-     * @param map\n-     * @param prefix\n-     * @return\n-     */\n-    public static List<PersonName> BuildContactPersonNames(Map map, String prefix, String cte) {\n-        List<PersonName> ret = new ArrayList();\n-        Iterator it = map.keySet().iterator();\n-        List<String> processedIndexes = new ArrayList<String>();\n-        while (it.hasNext()) {\n-            String key = (String) it.next();\n-            String filteredkey = key.replace(prefix, \"\");\n-            Matcher match = p.matcher(filteredkey);\n-            if (match.find()) {\n-                String index = filteredkey.substring(0, match.start());\n-                if (!processedIndexes.contains(index)) {\n-                    PersonName pn = new PersonName();\n-                    String[] t = (String[]) map.get(prefix + index + PostBackConstants.LANG);\n-                    if (t[0] == null || t[0].equalsIgnoreCase(cte)) {\n-                        pn.setLang(null);\n-                    } else {\n-                        pn.setLang(t[0]);\n-                    }\n-                    t = (String[]) map.get(prefix + index + PostBackConstants.VALUE);\n-                    pn.setValue(t[0]);\n-                    ret.add(pn);\n-                    processedIndexes.add(index);\n-                }\n-            } else {\n-                throw new IllegalArgumentException(\"Invalid form data posted\");\n-            }\n-        }\n-        return ret;\n-    }\n-\n-    /**\n-     * overview docs\n-     *\n-     * @param map\n-     * @param prefix\n-     * @param cte\n-     * @return\n-     */\n-    public static List<OverviewDoc> BuildOverviewDocs(Map map, String prefix, String cte) {\n-        List<OverviewDoc> ret = new ArrayList<OverviewDoc>();\n-        Iterator it = map.keySet().iterator();\n-        List<String> processedIndexes = new ArrayList<String>();\n-        while (it.hasNext()) {\n-            String key = (String) it.next();\n-            String filteredkey = key.replace(prefix, \"\");\n-            Matcher match = p.matcher(filteredkey);\n-            if (match.find()) {\n-                String index = filteredkey.substring(0, match.start());\n-                if (!processedIndexes.contains(index)) {\n-                    OverviewDoc pn = new OverviewDoc();\n-                    pn.setOverviewURL(new OverviewURL());\n-                    String[] t = (String[]) map.get(prefix + index + PostBackConstants.VALUE);\n-                    pn.getOverviewURL().setValue(t[0]);\n-                    t = (String[]) map.get(prefix + index + PostBackConstants.TYPE);\n-                    pn.getOverviewURL().setUseType(t[0]);\n-                    pn.getDescription().addAll(BuildDescription(MapFilter(map, prefix + index + PostBackConstants.DESCRIPTION), prefix + index + PostBackConstants.DESCRIPTION, cte));\n-                    ret.add(pn);\n-                    processedIndexes.add(index);\n-                }\n-            } else {\n-                throw new IllegalArgumentException(\"Invalid form data posted\");\n-            }\n-        }\n-        return ret;\n-    }\n-\n-    /**\n-     * phone numbers\n-     *\n-     * @param map\n-     * @param prefix\n-     * @return\n-     */\n-    public static List<Phone> BuildPhone(Map map, String prefix) {\n-        List<Phone> ret = new ArrayList();\n-        Iterator it = map.keySet().iterator();\n-        List<String> processedIndexes = new ArrayList<String>();\n-        while (it.hasNext()) {\n-            String key = (String) it.next();\n-            String filteredkey = key.replace(prefix, \"\");\n-            Matcher match = p.matcher(filteredkey);\n-            if (match.find()) {\n-                String index = filteredkey.substring(0, match.start());\n-                if (!processedIndexes.contains(index)) {\n-                    Phone pn = new Phone();\n-                    String[] t = (String[]) map.get(prefix + index + PostBackConstants.TYPE);\n-                    pn.setUseType(t[0]);\n-                    t = (String[]) map.get(prefix + index + PostBackConstants.VALUE);\n-                    pn.setValue(t[0]);\n-                    ret.add(pn);\n-                    processedIndexes.add(index);\n-                }\n-            } else {\n-                throw new IllegalArgumentException(\"Invalid form data posted\");\n-            }\n-        }\n-        return ret;\n-    }\n-\n-    /**\n-     * builds a contact\n-     *\n-     * @param m\n-     * @param prefix\n-     * @param cte\n-     * @return\n-     */\n-    public static Contact BuildSingleContact(Map m, String prefix, String cte) {\n-        Contact c = new Contact();\n-        String[] t = (String[]) m.get(prefix + PostBackConstants.TYPE);\n-        c.setUseType(t[0]);\n-        c.getPersonName().addAll(BuildContactPersonNames(MapFilter(m, prefix + PostBackConstants.NAME), prefix + PostBackConstants.NAME, cte));\n-        c.getDescription().addAll(BuildDescription(MapFilter(m, prefix + PostBackConstants.DESCRIPTION), prefix + PostBackConstants.DESCRIPTION, cte));\n-        c.getEmail().addAll(BuildEmail(MapFilter(m, prefix + PostBackConstants.EMAIL), prefix + PostBackConstants.EMAIL));\n-        c.getPhone().addAll(BuildPhone(MapFilter(m, prefix + PostBackConstants.PHONE), prefix + PostBackConstants.PHONE));\n-        c.getAddress().addAll(BuildAddress(MapFilter(m, prefix + PostBackConstants.ADDRESS), prefix + PostBackConstants.ADDRESS, cte));\n-        return c;\n-    }\n-\n-    /**\n-     * name elements\n-     *\n-     * @param map\n-     * @param prefix\n-     * @param cte\n-     * @return\n-     */\n-    public static List<Name> BuildNames(Map map, String prefix, String cte) {\n-        List<Name> ret = new ArrayList();\n-        Iterator it = map.keySet().iterator();\n-        List<String> processedIndexes = new ArrayList<String>();\n-        while (it.hasNext()) {\n-            String key = (String) it.next();\n-            String filteredkey = key.replace(prefix, \"\");\n-            Matcher match = p.matcher(filteredkey);\n-            if (match.find()) {\n-                String index = filteredkey.substring(0, match.start());\n-                if (!processedIndexes.contains(index)) {\n-                    Name pn = new Name();\n-                    String[] t = (String[]) map.get(prefix + index + PostBackConstants.LANG);\n-                    if (t[0].equalsIgnoreCase(cte)) {\n-                        pn.setLang(null);\n-                    } else {\n-                        pn.setLang(t[0]);\n-                    }\n-                    t = (String[]) map.get(prefix + index + PostBackConstants.VALUE);\n-                    pn.setValue(t[0]);\n-                    ret.add(pn);\n-                    processedIndexes.add(index);\n-                }\n-            } else {\n-                throw new IllegalArgumentException(\"Invalid form data posted\");\n-            }\n-        }\n-        return ret;\n-    }\n-\n-    /**\n-     * builds a compelte category bag\n-     *\n-     * @param map\n-     * @param prefix\n-     * @return\n-     */\n-    public static CategoryBag BuildCatBag(Map map, String prefix) {\n-        CategoryBag ret = new CategoryBag();\n-        Iterator it = map.keySet().iterator();\n-        List<String> processedIndexes = new ArrayList<String>();\n-        while (it.hasNext()) {\n-            String key = (String) it.next();\n-            String filteredkey = key.replace(prefix, \"\");\n-            Matcher match = p.matcher(filteredkey);\n-            if (match.find()) {\n-                String index = filteredkey.substring(0, match.start());\n-                if (!processedIndexes.contains(index)) {\n-                    KeyedReference pn = new KeyedReference();\n-                    String[] t = (String[]) map.get(prefix + index + PostBackConstants.VALUE);\n-                    pn.setTModelKey(t[0]);\n-                    t = (String[]) map.get(prefix + index + PostBackConstants.KEYNAME);\n-                    pn.setKeyName(t[0]);\n-                    t = (String[]) map.get(prefix + index + PostBackConstants.KEYVALUE);\n-                    pn.setKeyValue(t[0]);\n-                    ret.getKeyedReference().add(pn);\n-                    processedIndexes.add(index);\n-                }\n-            } else {\n-                throw new IllegalArgumentException(\"Invalid form data posted\");\n-            }\n-        }\n-        return ret;\n-    }\n-\n-    /**\n-     * identifier bag\n-     *\n-     * @param map\n-     * @param prefix\n-     * @return\n-     */\n-    public static IdentifierBag BuildIdentBag(Map map, String prefix) {\n-        IdentifierBag ret = new IdentifierBag();\n-        ret.getKeyedReference().addAll(BuildKeyedReference(map, prefix));\n-        if (ret.getKeyedReference().isEmpty()) {\n-            return null;\n-        }\n-        return ret;\n-    }\n-\n-    /**\n-     * discovery urls\n-     *\n-     * @param map\n-     * @param prefix\n-     * @return\n-     */\n-    public static DiscoveryURLs BuildDisco(Map map, String prefix) {\n-        DiscoveryURLs list = new DiscoveryURLs();\n-        Iterator it = map.keySet().iterator();\n-        List<String> processedIndexes = new ArrayList<String>();\n-        while (it.hasNext()) {\n-            String key = (String) it.next();\n-            String filteredkey = key.replace(prefix, \"\");\n-            Matcher match = p.matcher(filteredkey);\n-            if (match.find()) {\n-                String index = filteredkey.substring(0, match.start());\n-                if (!processedIndexes.contains(index)) {\n-                    DiscoveryURL pn = new DiscoveryURL();\n-                    String[] t = (String[]) map.get(prefix + index + PostBackConstants.TYPE);\n-                    pn.setUseType(t[0]);\n-                    t = (String[]) map.get(prefix + index + PostBackConstants.VALUE);\n-                    pn.setValue(t[0]);\n-                    list.getDiscoveryURL().add(pn);\n-                    processedIndexes.add(index);\n-                }\n-            } else {\n-                throw new IllegalArgumentException(\"Invalid form data posted\");\n-            }\n-        }\n-        if (list.getDiscoveryURL().isEmpty()) {\n-            return null;\n-        }\n-        return list;\n-    }\n-\n-    /**\n-     * addresses\n-     *\n-     * @param map\n-     * @param prefix\n-     * @param cte\n-     * @return\n-     */\n-    public static List<Address> BuildAddress(Map map, String prefix, String cte) {\n-        List<Address> ret = new ArrayList();\n-        Iterator it = map.keySet().iterator();\n-        List<String> processedIndexes = new ArrayList<String>();\n-        while (it.hasNext()) {\n-            String key = (String) it.next();\n-            String filteredkey = key.replace(prefix, \"\");\n-            Matcher match = p.matcher(filteredkey);\n-            if (match.find()) {\n-                String index = filteredkey.substring(0, match.start());\n-                if (!processedIndexes.contains(index)) {\n-                    Address pn = new Address();\n-                    String[] t = (String[]) map.get(prefix + index + PostBackConstants.LANG);\n-                    if (t[0] == null || t[0].equalsIgnoreCase(cte)) {\n-                        pn.setLang(null);\n-                    } else {\n-                        pn.setLang(t[0]);\n-                    }\n-                    t = (String[]) map.get(prefix + index + PostBackConstants.TYPE);\n-                    if (t[0] == null || t[0].equalsIgnoreCase(cte)) {\n-                        pn.setUseType(null);\n-                    } else {\n-                        pn.setUseType(t[0]);\n-                    }\n-                    t = (String[]) map.get(prefix + index + PostBackConstants.SORTCODE);\n-                    if (t[0] == null || t[0].equalsIgnoreCase(cte)) {\n-                        pn.setSortCode(null);\n-                    } else {\n-                        pn.setSortCode(t[0]);\n-                    }\n-                    t = (String[]) map.get(prefix + index + PostBackConstants.KEYNAME);\n-                    if (t[0] == null || t[0].equalsIgnoreCase(cte)) {\n-                        pn.setTModelKey(null);\n-                    } else {\n-                        pn.setTModelKey(t[0]);\n-                    }\n-                    pn.getAddressLine().addAll(BuildAddressLine(MapFilter(map, prefix + index + PostBackConstants.ADDRESSLINE), prefix + index + PostBackConstants.ADDRESSLINE));\n-                    ret.add(pn);\n-                    processedIndexes.add(index);\n-                }\n-            } else {\n-                throw new IllegalArgumentException(\"Invalid form data posted\");\n-            }\n-        }\n-        return ret;\n-    }\n-\n-    /**\n-     * keyed reference group\n-     *\n-     * @param map\n-     * @param prefix\n-     * @return\n-     */\n-    public static List<KeyedReferenceGroup> BuildKeyedReferenceGroup(Map map, String prefix) {\n-        List<KeyedReferenceGroup> ret = new ArrayList<KeyedReferenceGroup>();\n-        Iterator it = map.keySet().iterator();\n-        List<String> processedIndexes = new ArrayList<String>();\n-        while (it.hasNext()) {\n-            String key = (String) it.next();\n-            String filteredkey = key.replace(prefix, \"\");\n-            Matcher match = p.matcher(filteredkey);\n-            if (match.find()) {\n-                String index = filteredkey.substring(0, match.start());\n-                if (!processedIndexes.contains(index)) {\n-                    KeyedReferenceGroup pn = new KeyedReferenceGroup();\n-                    String[] t = (String[]) map.get(prefix + index + PostBackConstants.VALUE);\n-                    if (t != null) {\n-                        pn.setTModelKey(t[0]);\n-                        pn.getKeyedReference().addAll(BuildKeyedReference(MapFilter(map, prefix + index + PostBackConstants.KEY_REF), prefix + index + PostBackConstants.KEY_REF));\n-                        ret.add(pn);\n-                    } else {\n-                        log.warn(\"Unexpected null from BuildKeyedReferenceGroup \" + filteredkey + \" \" + prefix + \" \" + key);\n-                    }\n-                    processedIndexes.add(index);\n-                }\n-            } else {\n-                throw new IllegalArgumentException(\"Invalid form data posted\");\n-            }\n-        }\n-        return ret;\n-    }\n-\n-    /**\n-     * contactX\n-     *\n-     * @param map\n-     * @return\n-     */\n-    public static Contacts BuildContacts(Map map, String cte) {\n-        Contacts cb = new Contacts();\n-        Map contactdata = MapFilter(map, PostBackConstants.CONTACT_PREFIX);\n-        Iterator it = contactdata.keySet().iterator();\n-        List<String> processedIndexes = new ArrayList<String>();\n-        while (it.hasNext()) {\n-            String key = (String) it.next();\n-            key = key.replace(PostBackConstants.CONTACT_PREFIX, \"\");\n-            Matcher match = p.matcher(key);\n-            if (match.find()) {\n-                String index = key.substring(0, match.start());\n-                if (!processedIndexes.contains(index)) {\n-                    cb.getContact().add(BuildSingleContact(MapFilter(contactdata, PostBackConstants.CONTACT_PREFIX + index), PostBackConstants.CONTACT_PREFIX + index, cte));\n-                    processedIndexes.add(index);\n-                }\n-            } else {\n-                throw new IllegalArgumentException(\"Invalid form data posted\");\n-            }\n-        }\n-        if (cb.getContact().isEmpty()) {\n-            return null;\n-        }\n-        return cb;\n-    }\n-\n-    /**\n-     * email\n-     *\n-     * @param map\n-     * @param prefix\n-     * @return\n-     */\n-    public static List<Email> BuildEmail(Map map, String prefix) {\n-        List<Email> list = new ArrayList<Email>();\n-        Iterator it = map.keySet().iterator();\n-        List<String> processedIndexes = new ArrayList<String>();\n-        while (it.hasNext()) {\n-            String key = (String) it.next();\n-            String filteredkey = key.replace(prefix, \"\");\n-            Matcher match = p.matcher(filteredkey);\n-            if (match.find()) {\n-                String index = filteredkey.substring(0, match.start());\n-                if (!processedIndexes.contains(index)) {\n-                    Email pn = new Email();\n-                    String[] t = (String[]) map.get(prefix + index + PostBackConstants.TYPE);\n-                    pn.setUseType(t[0]);\n-                    t = (String[]) map.get(prefix + index + PostBackConstants.VALUE);\n-                    pn.setValue(t[0]);\n-                    list.add(pn);\n-                    processedIndexes.add(index);\n-                }\n-            } else {\n-                throw new IllegalArgumentException(\"Invalid form data posted\");\n-            }\n-        }\n-        return list;\n-    }\n-\n-    /**\n-     * description\n-     *\n-     * @param map\n-     * @param prefix\n-     * @param cte\n-     * @return\n-     */\n-    public static List<Description> BuildDescription(Map map, String prefix, String cte) {\n-        List<Description> ret = new ArrayList();\n-        Iterator it = map.keySet().iterator();\n-        List<String> processedIndexes = new ArrayList<String>();\n-        while (it.hasNext()) {\n-            String key = (String) it.next();\n-            String filteredkey = key.replace(prefix, \"\");\n-            Matcher match = p.matcher(filteredkey);\n-            if (match.find()) {\n-                String index = filteredkey.substring(0, match.start());\n-                if (!processedIndexes.contains(index)) {\n-                    Description pn = new Description();\n-                    String[] t = (String[]) map.get(prefix + index + PostBackConstants.LANG);\n-                    if (t[0] == null || t[0].equalsIgnoreCase(cte)) {\n-                        pn.setLang(null);\n-                    } else {\n-                        pn.setLang(t[0]);\n-                    }\n-                    t = (String[]) map.get(prefix + index + PostBackConstants.VALUE);\n-                    pn.setValue(t[0]);\n-                    ret.add(pn);\n-                    processedIndexes.add(index);\n-                }\n-            } else {\n-                throw new IllegalArgumentException(\"Invalid form data posted\");\n-            }\n-        }\n-        return ret;\n-    }\n-\n-    /**\n-     * keyed references\n-     *\n-     * @param map\n-     * @param prefix\n-     * @return\n-     */\n-    public static List<KeyedReference> BuildKeyedReference(Map map, String prefix) {\n-        List<KeyedReference> ret = new ArrayList<KeyedReference>();\n-        Iterator it = map.keySet().iterator();\n-        List<String> processedIndexes = new ArrayList<String>();\n-        while (it.hasNext()) {\n-            String key = (String) it.next();\n-            String filteredkey = key.replace(prefix, \"\");\n-            Matcher match = p.matcher(filteredkey);\n-            if (match.find()) {\n-                String index = filteredkey.substring(0, match.start());\n-                if (!processedIndexes.contains(index)) {\n-                    KeyedReference pn = new KeyedReference();\n-                    String[] t = (String[]) map.get(prefix + index + PostBackConstants.VALUE);\n-                    if (t != null) {\n-                        pn.setTModelKey(t[0]);\n-                        t = (String[]) map.get(prefix + index + PostBackConstants.KEYNAME);\n-                        pn.setKeyName(t[0]);\n-                        t = (String[]) map.get(prefix + index + PostBackConstants.KEYVALUE);\n-                        pn.setKeyValue(t[0]);\n-                        ret.add(pn);\n-                    }\n-                    processedIndexes.add(index);\n-                }\n-            } else {\n-                throw new IllegalArgumentException(\"Invalid form data posted\");\n-            }\n-        }\n-        return ret;\n-    }\n-\n-    /**\n-     * address lines\n-     *\n-     * @param map\n-     * @param prefix\n-     * @return\n-     */\n-    public static List<AddressLine> BuildAddressLine(Map map, String prefix) {\n-        List<AddressLine> ret = new ArrayList();\n-        Iterator it = map.keySet().iterator();\n-        List<String> processedIndexes = new ArrayList<String>();\n-        while (it.hasNext()) {\n-            String key = (String) it.next();\n-            String filteredkey = key.replace(prefix, \"\");\n-            Matcher match = p.matcher(filteredkey);\n-            if (match.find()) {\n-                String index = filteredkey.substring(0, match.start());\n-                if (!processedIndexes.contains(index)) {\n-                    AddressLine pn = new AddressLine();\n-                    String[] t = (String[]) map.get(prefix + index + PostBackConstants.VALUE);\n-                    pn.setValue(t[0]);\n-                    t = (String[]) map.get(prefix + index + PostBackConstants.KEYNAME);\n-                    pn.setKeyName(t[0]);\n-                    t = (String[]) map.get(prefix + index + PostBackConstants.KEYVALUE);\n-                    pn.setKeyValue(t[0]);\n-                    ret.add(pn);\n-                    processedIndexes.add(index);\n-                }\n-            } else {\n-                throw new IllegalArgumentException(\"Invalid form data posted\");\n-            }\n-        }\n-        return ret;\n-    }\n-\n-    /**\n-     * binding templates\n-     *\n-     * @param map\n-     * @param prefix\n-     * @param cte\n-     * @return\n-     */\n-    public static List<BindingTemplate> BuildBindingTemplates(Map map, String prefix, String cte) {\n-        List<BindingTemplate> ret = new ArrayList();\n-        Iterator it = map.keySet().iterator();\n-        List<String> processedIndexes = new ArrayList<String>();\n-        while (it.hasNext()) {\n-            String key = (String) it.next();\n-            String filteredkey = key.replace(prefix, \"\");\n-            Matcher match = p.matcher(filteredkey);\n-            if (match.find()) {\n-                String index = filteredkey.substring(0, match.start());\n-                if (!processedIndexes.contains(index)) {\n-                    BindingTemplate pn = new BindingTemplate();\n-//bindingTemplate0Value\n-                    String[] t = (String[]) map.get(prefix + index + PostBackConstants.VALUE);\n-                    if (t != null && t.length > 0) {\n-                        pn.setBindingKey(t[0]);\n-                    }\n-\n-                    t = (String[]) map.get(prefix + index + PostBackConstants.HOSTINGREDIRECTOR);\n-                    if (t != null && t.length > 0) {\n-                        pn.setHostingRedirector(new HostingRedirector());\n-                        pn.getHostingRedirector().setBindingKey(t[0]);\n-                    }\n-                    AccessPoint ap = new AccessPoint();\n-                    t = (String[]) map.get(prefix + index + PostBackConstants.ACCESSPOINT_TYPE);\n-                    if (t != null && t.length > 0) {\n-                        ap.setUseType(t[0]);\n-                    }\n-                    t = (String[]) map.get(prefix + index + PostBackConstants.ACCESSPOINT_VALUE);\n-                    if (t != null && t.length > 0) {\n-                        ap.setValue(t[0]);\n-                    }\n-                    if (ap.getValue() != null) {\n-                        pn.setAccessPoint(ap);\n-                    }\n-                    pn.getDescription().addAll(BuildDescription(MapFilter(map, prefix + index + PostBackConstants.DESCRIPTION), prefix + index + PostBackConstants.DESCRIPTION, cte));\n-                    CategoryBag cb = new CategoryBag();\n-                    cb.getKeyedReference().addAll(BuildKeyedReference(MapFilter(map, prefix + index + PostBackConstants.CATBAG_KEY_REF), prefix + index + PostBackConstants.CATBAG_KEY_REF));\n-                    cb.getKeyedReferenceGroup().addAll(BuildKeyedReferenceGroup(MapFilter(map, prefix + index + PostBackConstants.CATBAG_KEY_REF_GRP), prefix + index + PostBackConstants.CATBAG_KEY_REF_GRP));\n-                    if (cb.getKeyedReference().isEmpty() && cb.getKeyedReferenceGroup().isEmpty()) {\n-                        cb = null;\n-                    }\n-\n-                    pn.setCategoryBag(cb);\n-                    pn.setTModelInstanceDetails(BuildTmodelInstanceDetails(MapFilter(map, prefix + index + PostBackConstants.TMODELINSTANCE), prefix + index + PostBackConstants.TMODELINSTANCE, cte));\n-\n-                    ret.add(pn);\n-                    processedIndexes.add(index);\n-                }\n-            } else {\n-                throw new IllegalArgumentException(\"Invalid form data posted\");\n-            }\n-        }\n-        return ret;\n-    }\n-\n-    private static TModelInstanceDetails BuildTmodelInstanceDetails(Map map, String prefix, String cte) {\n-        TModelInstanceDetails ret = new TModelInstanceDetails();\n-\n-        Iterator it = map.keySet().iterator();\n-        List<String> processedIndexes = new ArrayList<String>();\n-        while (it.hasNext()) {\n-            String key = (String) it.next();\n-            String filteredkey = key.replace(prefix, \"\");\n-            Matcher match = p.matcher(filteredkey);\n-            if (match.find()) {\n-                String index = filteredkey.substring(0, match.start());\n-                if (!processedIndexes.contains(index)) {\n-                    TModelInstanceInfo tmi = new TModelInstanceInfo();\n-                    String[] t = (String[]) map.get(prefix + index + PostBackConstants.KEYNAME);\n-                    tmi.setTModelKey(t[0]);\n-\n-                    tmi.setInstanceDetails(BuildInstanceDetails(MapFilter(map, prefix + index + PostBackConstants.INSTANCE), prefix + index + PostBackConstants.INSTANCE, cte));\n-\n-                    tmi.getDescription().addAll(BuildDescription(MapFilter(map, prefix + index + PostBackConstants.INSTANCE + PostBackConstants.DESCRIPTION), prefix + index + PostBackConstants.INSTANCE + PostBackConstants.DESCRIPTION, cte));\n-\n-                    ret.getTModelInstanceInfo().add(tmi);\n-                    processedIndexes.add(index);\n-                }\n-            } else {\n-                throw new IllegalArgumentException(\"Invalid form data posted\");\n-            }\n-        }\n-        if (ret.getTModelInstanceInfo().isEmpty()) {\n-            return null;\n-        }\n-        return ret;\n-    }\n-\n-    private static InstanceDetails BuildInstanceDetails(Map map, String prefix, String cte) {\n-        InstanceDetails ret = new InstanceDetails();\n-        Iterator it = map.keySet().iterator();\n-        List<String> processedIndexes = new ArrayList<String>();\n-        while (it.hasNext()) {\n-            String key = (String) it.next();\n-            String filteredkey = key.replace(prefix, \"\");\n-            Matcher match = p.matcher(filteredkey);\n-            if (match.find()) {\n-                String index = filteredkey.substring(0, match.start());\n-                if (!processedIndexes.contains(index)) {\n-\n-                    String[] t = (String[]) map.get(prefix + index + PostBackConstants.VALUE);\n-                    //pn.setValue(t[0]);\n-                    ret.setInstanceParms(t[0]);\n-\n-                    ret.getDescription().addAll(BuildDescription(MapFilter(map, prefix + index + PostBackConstants.INSTANCE + PostBackConstants.DESCRIPTION), prefix + index + PostBackConstants.INSTANCE + PostBackConstants.DESCRIPTION, cte));\n-                    ret.getOverviewDoc().addAll(BuildOverviewDocs(MapFilter(map, prefix + index + PostBackConstants.OVERVIEW), prefix + index + PostBackConstants.OVERVIEW, cte));\n-                    processedIndexes.add(index);\n-                }\n-            } else {\n-                throw new IllegalArgumentException(\"Invalid form data posted\");\n-            }\n-        }\n-        return ret;\n-    }\n-\n-    /**\n-     * client subscription api\n-     *\n-     * @param map\n-     * @param outmsg\n-     * @param session\n-     * @return\n-     */\n-    public static Subscription BuildClientSubscription(Map map, AtomicReference<String> outmsg, HttpSession session) {\n-        Subscription sub = new Subscription();\n-        if (outmsg == null) {\n-            outmsg = new AtomicReference<String>();\n-        }\n-\n-        try {\n-            String alertType = ((String[]) map.get(\"alertType\"))[0];\n-            if (alertType == null) {\n-                outmsg.set(\"alertType not defined\");\n-                return null;\n-            }\n-            if (alertType.equalsIgnoreCase(\"specificItem\")) {\n-                sub = BuildClientSubscriptionSpecificItem(map, outmsg);\n-            } else if (alertType.equalsIgnoreCase(\"searchResults\")) {\n-                sub = BuildClientSubscriptionSearchResults(map, outmsg);\n-            } else {\n-                outmsg.set(\"alertType invalid\");\n-                return null;\n-            }\n-            if (sub == null) {\n-                return null;\n-            }\n-\n-            String alertTransport = ((String[]) map.get(\"alertTransport\"))[0];\n-            if (alertTransport == null) {\n-            } else {\n-                if (alertTransport.equalsIgnoreCase(\"bindingTemplate\")) {\n-                    sub.setBindingKey(((String[]) map.get(\"bindingKey\"))[0]);\n-                } else {\n-                    sub.setBindingKey(null);\n-                }\n-            }\n-            if (map.get(\"subkey\") != null) {\n-                String subkey = ((String[]) map.get(\"subkey\"))[0];\n-                if (subkey != null && !subkey.equalsIgnoreCase(ResourceLoader.GetResource(session, \"items.clicktoedit\"))) {\n-                    sub.setSubscriptionKey(subkey);\n-                }\n-            }\n-            //options\n-            sub = BuildSubscriptionOptions(map, sub);\n-            return sub;\n-        } catch (Exception ex) {\n-            outmsg.set(ex.getMessage());\n-            return null;\n-        }\n-\n-    }\n-\n-    private static Subscription BuildClientSubscriptionSpecificItem(Map map, AtomicReference<String> outmsg) {\n-        try {\n-            Subscription sub = new Subscription();\n-            String alertCritera = ((String[]) map.get(\"alertCriteraSingleItem\"))[0];\n-\n-            List<String> keys = new ArrayList<String>();\n-            String ItemKey = ((String[]) map.get(\"itemKey\"))[0];\n-            if (ItemKey == null) {\n-                outmsg.set(\"no item defined\");\n-                return null;\n-            }\n-            //TODO this is an issue. Unknown if commas can be included within UDDI keys\n-            if (ItemKey.contains(\",\")) {\n-                String[] k2 = ItemKey.split(\",\");\n-                for (int i = 0; i < k2.length; i++) {\n-                    if (k2[i] == null) {\n-                        continue;\n-                    }\n-                    if (k2[i].trim().isEmpty()) {\n-                        continue;\n-                    }\n-                    keys.add(k2[i].trim());\n-                }\n-            } else {\n-                keys.add(ItemKey);\n-            }\n-\n-\n-            sub.setSubscriptionFilter(new SubscriptionFilter());\n-\n-            if (alertCritera != null) {\n-\n-                if (alertCritera.equalsIgnoreCase(\"binding\")) {\n-                    sub.getSubscriptionFilter().setGetBindingDetail(new GetBindingDetail());\n-                    sub.getSubscriptionFilter().getGetBindingDetail().getBindingKey().addAll(keys);\n-                } else if (alertCritera.equalsIgnoreCase(\"service\")) {\n-                    sub.getSubscriptionFilter().setGetServiceDetail(new GetServiceDetail());\n-                    sub.getSubscriptionFilter().getGetServiceDetail().getServiceKey().addAll(keys);\n-                } else if (alertCritera.equalsIgnoreCase(\"business\")) {\n-                    sub.getSubscriptionFilter().setGetBusinessDetail(new GetBusinessDetail());\n-                    sub.getSubscriptionFilter().getGetBusinessDetail().getBusinessKey().addAll(keys);\n-                } else if (alertCritera.equalsIgnoreCase(\"publisherAssertion\")) {\n-                    //unknow if this will work\n-                    sub.getSubscriptionFilter().setGetAssertionStatusReport(new GetAssertionStatusReport());\n-                    sub.getSubscriptionFilter().getGetAssertionStatusReport().setCompletionStatus(CompletionStatus.valueOf(((String[]) map.get(\"assertionStatus\"))[0]));\n-                } else if (alertCritera.equalsIgnoreCase(\"relatedBusiness\")) {\n-                    outmsg.set(\"relatedBusiness is not supported for single item subscriptions\");\n-                    return null;\n-                } else if (alertCritera.equalsIgnoreCase(\"tmodel\")) {\n-                    sub.getSubscriptionFilter().setGetTModelDetail(new GetTModelDetail());\n-                    sub.getSubscriptionFilter().getGetTModelDetail().getTModelKey().addAll(keys);\n-                } else {\n-                    outmsg.set(\"alert critera invalid\");\n-                    return null;\n-                }\n-            } else {\n-                outmsg.set(\"alert critera not defined\");\n-                return null;\n-            }\n-            return sub;\n-        } catch (Exception ex) {\n-            log.warn(null, ex);\n-            outmsg.set(\"error parsing\");\n-            return null;\n-        }\n-    }\n-\n-    private static Subscription BuildClientSubscriptionSearchResults(Map map, AtomicReference<String> outmsg) {\n-        try {\n-            Subscription sub = new Subscription();\n-            String alertCritera = ((String[]) map.get(\"alertCriteraMultipleItem\"))[0];\n-\n-            sub.setSubscriptionFilter(new SubscriptionFilter());\n-            Name name = new Name();\n-            name.setValue(((String[]) map.get(\"searchcontent\"))[0]);\n-            name.setLang(((String[]) map.get(\"searchlang\"))[0]);\n-            FindQualifiers fq = new FindQualifiers();\n-            String[] fqs = (String[]) map.get(\"findqualifier\");\n-            if (fqs != null) {\n-                for (int i = 0; i < fqs.length; i++) {\n-                    fq.getFindQualifier().add(fqs[i]);\n-                }\n-            }\n-            if (fq.getFindQualifier().isEmpty()) {\n-                fq = null;\n-            }\n-            if (alertCritera != null) {\n-                if (alertCritera.equalsIgnoreCase(\"binding\")) {\n-                    //sub.getSubscriptionFilter().setFindBinding(new FindBinding());\n-                    //sub.getSubscriptionFilter().getFindBinding().\n-                } else if (alertCritera.equalsIgnoreCase(\"service\")) {\n-                    sub.getSubscriptionFilter().setFindService(new FindService());\n-                    sub.getSubscriptionFilter().getFindService().getName().add(name);\n-                    sub.getSubscriptionFilter().getFindService().setFindQualifiers(fq);\n-                } else if (alertCritera.equalsIgnoreCase(\"business\")) {\n-                    sub.getSubscriptionFilter().setFindBusiness(new FindBusiness());\n-                    sub.getSubscriptionFilter().getFindBusiness().setFindQualifiers(fq);\n-                    sub.getSubscriptionFilter().getFindBusiness().getName().add(name);\n-                    //              sub.getSubscriptionFilter().getGetBusinessDetail().getBusinessKey().addAll(keys);\n-                } else if (alertCritera.equalsIgnoreCase(\"publisherAssertion\")) {\n-                    //unknow if this will work\n-                    sub.getSubscriptionFilter().setGetAssertionStatusReport(new GetAssertionStatusReport());\n-                    sub.getSubscriptionFilter().getGetAssertionStatusReport().setCompletionStatus(CompletionStatus.valueOf(((String[]) map.get(\"assertionStatus\"))[0]));\n-                } else if (alertCritera.equalsIgnoreCase(\"relatedBusiness\")) {\n-                    sub.getSubscriptionFilter().setFindRelatedBusinesses(new FindRelatedBusinesses());\n-                    sub.getSubscriptionFilter().getFindRelatedBusinesses().setFindQualifiers(fq);\n-                    sub.getSubscriptionFilter().getFindRelatedBusinesses().setBusinessKey(((String[]) map.get(\"searchcontent\"))[0]);\n-                } else if (alertCritera.equalsIgnoreCase(\"tmodel\")) {\n-                    sub.getSubscriptionFilter().setFindTModel(new FindTModel());\n-                    sub.getSubscriptionFilter().getFindTModel().setFindQualifiers(fq);\n-                    sub.getSubscriptionFilter().getFindTModel().setName(name);\n-                } else {\n-                    outmsg.set(\"alert critera invalid\");\n-                    return null;\n-                }\n-            } else {\n-                outmsg.set(\"alert critera not defined\");\n-                return null;\n-            }\n-            return sub;\n-        } catch (Exception ex) {\n-            log.warn(null, ex);\n-            outmsg.set(\"error parsing\");\n-            return null;\n-        }\n-    }\n-\n-    private static Subscription BuildSubscriptionOptions(Map map, Subscription sub) {\n-        if (sub == null) {\n-            return null;\n-        }\n-        try {\n-            sub.setBrief(Boolean.parseBoolean(((String[]) map.get(\"brief\"))[0]));\n-        } catch (Exception x) {\n-            sub.setBrief(false);\n-        }\n-\n-        try {\n-            sub.setMaxEntities(Integer.parseInt(((String[]) map.get(\"maxRecords\"))[0]));\n-        } catch (Exception x) {\n-            sub.setBrief(false);\n-        }\n-\n-        try {\n-            DatatypeFactory df = DatatypeFactory.newInstance();\n-            DateFormat dformat = new SimpleDateFormat(\"MM/dd/yyyy HH:mm:ss a\");\n-            Date parsed = dformat.parse(((String[]) map.get(\"expires\"))[0]);\n-\n-            GregorianCalendar gcal = new GregorianCalendar();\n-            gcal.setTime(parsed);\n-            sub.setExpiresAfter(df.newXMLGregorianCalendar(gcal));\n-        } catch (Exception ex) {\n-            log.warn(\"Unexpected parsing error \", ex);\n-        }\n-\n-\n-        try {\n-            DatatypeFactory df = DatatypeFactory.newInstance();\n-            DateFormat dformat = new SimpleDateFormat(\"MM/dd/yyyy HH:mm:ss a\");\n-            Date parsed = dformat.parse(((String[]) map.get(\"expires\"))[0]);\n-\n-            GregorianCalendar gcal = new GregorianCalendar();\n-            gcal.setTime(parsed);\n-            sub.setExpiresAfter(df.newXMLGregorianCalendar(gcal));\n-        } catch (Exception ex) {\n-            log.warn(\"Unexpected parsing error \", ex);\n-        }\n-\n-        try {\n-            long durationInMilliSeconds = 0;\n-            DatatypeFactory df = DatatypeFactory.newInstance();\n-            String interval = ((String[]) map.get(\"interval\"))[0];\n-            String[] tokens = interval.split(\":\");\n-            durationInMilliSeconds += Integer.parseInt(tokens[0]) * 60 * 60 * 1000;\n-            durationInMilliSeconds += Integer.parseInt(tokens[1]) * 60 * 1000;\n-            durationInMilliSeconds += Integer.parseInt(tokens[2]) * 1000;\n-\n-\n-            sub.setNotificationInterval(df.newDuration(durationInMilliSeconds));\n-\n-        } catch (Exception ex) {\n-            log.warn(\"Unexpected parsing error \", ex);\n-        }\n-\n-\n-        return sub;\n-    }\n-}\n", "diff --git a/juddiv3-war/src/main/java/org/apache/juddi/webconsole/hub/builders/Printers.java b/juddiv3-war/src/main/java/org/apache/juddi/webconsole/hub/builders/Printers.java\ndeleted file mode 100644\nindex dca892a04..000000000\n--- a/juddiv3-war/src/main/java/org/apache/juddi/webconsole/hub/builders/Printers.java\n+++ /dev/null\n@@ -1,363 +0,0 @@\n-/*\n- * Copyright 2001-2013 The Apache Software Foundation.\n- * \n- * Licensed under the Apache License, Version 2.0 (the \"License\");\n- * you may not use this file except in compliance with the License.\n- * You may obtain a copy of the License at\n- * \n- *      http://www.apache.org/licenses/LICENSE-2.0\n- * \n- * Unless required by applicable law or agreed to in writing, software\n- * distributed under the License is distributed on an \"AS IS\" BASIS,\n- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n- * See the License for the specific language governing permissions and\n- * limitations under the License.\n- *\n- */\n-package org.apache.juddi.webconsole.hub.builders;\n-\n-import java.util.List;\n-import javax.servlet.http.HttpSession;\n-import org.apache.commons.lang.StringEscapeUtils;\n-import org.apache.juddi.webconsole.resources.ResourceLoader;\n-import org.uddi.api_v3.*;\n-\n-/**\n- * Provides very basic UDDI spec to String formats, mostly used for debugging\n- *\n- * @author <a href=\"mailto:alexoree@apache.org\">Alex O'Ree</a>\n- */\n-public class Printers {\n-\n-    public static String TModelInfoToString(TModelInstanceDetails info) {\n-        StringBuilder sb = new StringBuilder();\n-        for (int i = 0; i < info.getTModelInstanceInfo().size(); i++) {\n-            sb.append(info.getTModelInstanceInfo().get(i).getTModelKey());\n-        }\n-        return sb.toString();\n-    }\n-\n-    /**\n-     * Converts category bags of tmodels to a readable string\n-     *\n-     * @param categoryBag\n-     * @return\n-     */\n-    public static String CatBagToString(CategoryBag categoryBag, String locale) {\n-        StringBuilder sb = new StringBuilder();\n-        if (categoryBag == null) {\n-            return \"no data\";\n-        }\n-        for (int i = 0; i < categoryBag.getKeyedReference().size(); i++) {\n-            sb.append(KeyedReferenceToString(categoryBag.getKeyedReference().get(i), locale));\n-        }\n-        for (int i = 0; i < categoryBag.getKeyedReferenceGroup().size(); i++) {\n-            sb.append(\"Key Ref Grp: TModelKey=\");\n-            for (int k = 0; k < categoryBag.getKeyedReferenceGroup().get(i).getKeyedReference().size(); k++) {\n-                sb.append(KeyedReferenceToString(categoryBag.getKeyedReferenceGroup().get(i).getKeyedReference().get(k), locale));\n-            }\n-        }\n-        return sb.toString();\n-    }\n-\n-    public static String KeyedReferenceToString(KeyedReference item, String locale) {\n-        StringBuilder sb = new StringBuilder();\n-        sb.append(\"Key Ref: Name=\").append(item.getKeyName()).append(\" Value=\").append(item.getKeyValue()).append(\" tModel=\").append(item.getTModelKey()).append(System.getProperty(\"line.separator\"));\n-        return sb.toString();\n-    }\n-\n-    /**\n-     * This function is useful for translating UDDI's somewhat complex data\n-     * format to something that is more useful.\n-     *\n-     * @param bindingTemplates\n-     */\n-    public static String PrintBindingTemplates(BindingTemplates bindingTemplates, String locale) {\n-        if (bindingTemplates == null) {\n-            return \"No binding templates\";\n-        }\n-        StringBuilder sb = new StringBuilder();\n-        for (int i = 0; i < bindingTemplates.getBindingTemplate().size(); i++) {\n-            sb.append(\"Binding Key: \").append(bindingTemplates.getBindingTemplate().get(i).getBindingKey()).append(\"<Br>\");\n-            sb.append(\"Description: \").append(ListToDescString(bindingTemplates.getBindingTemplate().get(i).getDescription())).append(\"<Br>\");\n-            sb.append(\"CatBag: \").append(CatBagToString(bindingTemplates.getBindingTemplate().get(i).getCategoryBag(), locale)).append(\"<Br>\");\n-            sb.append(\"tModels: \").append(Printers.TModelInfoToString(bindingTemplates.getBindingTemplate().get(i).getTModelInstanceDetails())).append(\"<Br>\");\n-            if (bindingTemplates.getBindingTemplate().get(i).getAccessPoint() != null) {\n-                sb.append(\"Access Point: \").append(bindingTemplates.getBindingTemplate().get(i).getAccessPoint().getValue()).append(\" type \").append(bindingTemplates.getBindingTemplate().get(i).getAccessPoint().getUseType()).append(\"<Br>\");\n-            }\n-            if (bindingTemplates.getBindingTemplate().get(i).getHostingRedirector() != null) {\n-                sb.append(\"Hosting Director: \").append(bindingTemplates.getBindingTemplate().get(i).getHostingRedirector().getBindingKey()).append(\"<br>\");\n-            }\n-        }\n-        return sb.toString();\n-    }\n-\n-    public static String ListToDescString(List<Description> name) {\n-        StringBuilder sb = new StringBuilder();\n-        for (int i = 0; i < name.size(); i++) {\n-            sb.append(name.get(i).getValue()).append(\" \");\n-        }\n-        return sb.toString();\n-    }\n-\n-    public static String ListNamesToString(List<Name> name) {\n-        StringBuilder sb = new StringBuilder();\n-        for (int i = 0; i < name.size(); i++) {\n-            sb.append(name.get(i).getValue()).append(\" \");\n-        }\n-        return sb.toString();\n-    }\n-\n-    public static String ListDiscoToString(DiscoveryURLs info) {\n-        StringBuilder sb = new StringBuilder();\n-        if (info == null) {\n-            return \"\";\n-        }\n-        for (int i = 0; i < info.getDiscoveryURL().size(); i++) {\n-            sb.append(\"Type: \").append(StringEscapeUtils.escapeHtml(info.getDiscoveryURL().get(i).getValue())).append(\" \").append(StringEscapeUtils.escapeHtml(info.getDiscoveryURL().get(i).getValue()));\n-        }\n-        return sb.toString();\n-    }\n-\n-    /**\n-     * converts contacts to a simple string output\n-     */\n-    public static String PrintContacts(Contacts contacts, String locale) {\n-        if (contacts == null) {\n-            return \"\";\n-        }\n-        StringBuilder sb = new StringBuilder();\n-        for (int i = 0; i < contacts.getContact().size(); i++) {\n-            sb.append(\"Contact \").append(i).append(\" type:\").append(contacts.getContact().get(i).getUseType()).append(\"<br>\");\n-            for (int k = 0; k < contacts.getContact().get(i).getPersonName().size(); k++) {\n-                sb.append(\"Name: \").append(contacts.getContact().get(i).getPersonName().get(k).getValue()).append(\"<br>\");\n-            }\n-            for (int k = 0; k < contacts.getContact().get(i).getEmail().size(); k++) {\n-                sb.append(\"Email: \").append(contacts.getContact().get(i).getEmail().get(k).getValue()).append(\"<br>\");\n-            }\n-            for (int k = 0; k < contacts.getContact().get(i).getAddress().size(); k++) {\n-                sb.append(\"Address sort code \").append(contacts.getContact().get(i).getAddress().get(k).getSortCode()).append(\"<br>\");\n-                sb.append(\"Address use type \").append(contacts.getContact().get(i).getAddress().get(k).getUseType()).append(\"<br>\");\n-                sb.append(\"Address tmodel key \").append(contacts.getContact().get(i).getAddress().get(k).getTModelKey()).append(\"<br>\");\n-                for (int x = 0; x < contacts.getContact().get(i).getAddress().get(k).getAddressLine().size(); x++) {\n-                    sb.append(\"Address line value \").append(contacts.getContact().get(i).getAddress().get(k).getAddressLine().get(x).getValue()).append(\"<br>\");\n-                    sb.append(\"Address line key name \").append(contacts.getContact().get(i).getAddress().get(k).getAddressLine().get(x).getKeyName()).append(\"<br>\");\n-                    sb.append(\"Address line key value \").append(contacts.getContact().get(i).getAddress().get(k).getAddressLine().get(x).getKeyValue()).append(\"<br>\");\n-                }\n-            }\n-            for (int k = 0; k < contacts.getContact().get(i).getDescription().size(); k++) {\n-                sb.append(\"Desc: \").append(contacts.getContact().get(i).getDescription().get(k).getValue()).append(\"<br>\");\n-            }\n-            for (int k = 0; k < contacts.getContact().get(i).getPhone().size(); k++) {\n-                sb.append(\"Phone: \").append(contacts.getContact().get(i).getPhone().get(k).getValue()).append(\"<br>\");\n-            }\n-        }\n-        return sb.toString();\n-    }\n-\n-    public static String ListIdentBagToString(IdentifierBag info, String locale) {\n-        StringBuilder sb = new StringBuilder();\n-        if (info == null) {\n-            return \"\";\n-        }\n-        for (int i = 0; i < info.getKeyedReference().size(); i++) {\n-            sb.append(KeyedReferenceToString(info.getKeyedReference().get(i), locale));\n-        }\n-        return sb.toString();\n-    }\n-\n-    public static String PublisherAssertionsToHtml(List<PublisherAssertion> list, String locale) {\n-        if (list == null || list.isEmpty()) {\n-            return \"No input\";\n-        }\n-        StringBuilder sb = new StringBuilder();\n-        sb.append(\"<table class=\\\"table\\\">\");\n-        for (int i = 0; i < list.size(); i++) {\n-            sb.append(\"<tr><td>\");\n-            sb.append(StringEscapeUtils.escapeHtml(list.get(i).getToKey()));\n-            sb.append(\"</td><td>\");\n-            sb.append(StringEscapeUtils.escapeHtml(list.get(i).getFromKey()));\n-            sb.append(\"</td><td>\");\n-            sb.append(list.get(i).getSignature().isEmpty());\n-            sb.append(\"</td><td>\");\n-            sb.append(StringEscapeUtils.escapeHtml(Printers.KeyedReferenceToString(list.get(i).getKeyedReference(), locale)));\n-            sb.append(\"</td></tr>\");\n-        }\n-        sb.append(\"</table>\");\n-        return sb.toString();\n-    }\n-\n-    public static String PrintTModelListAsHtml(TModelList findTModel, HttpSession session, boolean isChooser) {\n-\n-        StringBuilder sb = new StringBuilder();\n-\n-        sb.append(\"<table class=\\\"table table-hover\\\"><tr><th>\");\n-        if (isChooser) {\n-            sb.append(\"</th><th>\");\n-        }\n-        sb.append(ResourceLoader.GetResource(session, \"items.key\"))\n-                .append(\"</th><th>\")\n-                .append(ResourceLoader.GetResource(session, \"items.name\"))\n-                .append(\"</th><th>\")\n-                .append(ResourceLoader.GetResource(session, \"items.description\"))\n-                .append(\"</th></tr>\");\n-        for (int i = 0; i < findTModel.getTModelInfos().getTModelInfo().size(); i++) {\n-            sb.append(\"<tr><td>\");\n-            if (isChooser) {\n-                sb.append(\"<input class=\\\"modalableTmodel\\\" type=checkbox id=\\\"\")\n-                        .append(StringEscapeUtils.escapeHtml(findTModel.getTModelInfos().getTModelInfo().get(i).getTModelKey()))\n-                        .append(\"\\\"></td><td>\");\n-            }\n-            if (!isChooser) {\n-                sb.append(\"<a href=\\\"tmodelEditor.jsp?id=\")\n-                        .append(StringEscapeUtils.escapeHtml(findTModel.getTModelInfos().getTModelInfo().get(i).getTModelKey()))\n-                        .append(\"\\\" >\");\n-            }\n-            sb.append(StringEscapeUtils.escapeHtml(findTModel.getTModelInfos().getTModelInfo().get(i).getTModelKey()));\n-            if (!isChooser) {\n-                sb.append(\"</a>\");\n-            }\n-            sb.append(\"</td><td>\")\n-                    .append(StringEscapeUtils.escapeHtml(findTModel.getTModelInfos().getTModelInfo().get(i).getName().getValue()));\n-            if (findTModel.getTModelInfos().getTModelInfo().get(i).getName().getLang() != null) {\n-                sb.append(\", \")\n-                        .append(StringEscapeUtils.escapeHtml(findTModel.getTModelInfos().getTModelInfo().get(i).getName().getLang()));\n-            }\n-            sb.append(\"</td><td>\")\n-                    .append(StringEscapeUtils.escapeHtml(Printers.ListToDescString(findTModel.getTModelInfos().getTModelInfo().get(i).getDescription())))\n-                    .append(\"</td></tr>\");\n-        }\n-        sb.append(\"</table>\");\n-        return sb.toString();\n-    }\n-\n-    @Deprecated\n-    private static String PrintTModelListAsHtmlModel(TModelList findTModel, HttpSession session) {\n-        StringBuilder sb = new StringBuilder();\n-\n-        sb.append(\"<table class=\\\"table table-hover\\\"><tr><th>\");\n-\n-        sb.append(\"</th><th>\");\n-\n-        sb.append(ResourceLoader.GetResource(session, \"items.key\"))\n-                .append(\"</th><th>\")\n-                .append(ResourceLoader.GetResource(session, \"items.name\"))\n-                .append(\"</th><th>\")\n-                .append(ResourceLoader.GetResource(session, \"items.description\"))\n-                .append(\"</th></tr>\");\n-        for (int i = 0; i < findTModel.getTModelInfos().getTModelInfo().size(); i++) {\n-            sb.append(\"<tr><td>\");\n-\n-            sb.append(\"<input class=\\\"modalableTmodel\\\" type=checkbox id=\\\"\")\n-                    .append(StringEscapeUtils.escapeHtml(findTModel.getTModelInfos().getTModelInfo().get(i).getTModelKey()))\n-                    .append(\"\\\"></td><td>\");\n-\n-            sb.append(StringEscapeUtils.escapeHtml(findTModel.getTModelInfos().getTModelInfo().get(i).getTModelKey()));\n-            sb.append(\"</td><td>\")\n-                    .append(StringEscapeUtils.escapeHtml(findTModel.getTModelInfos().getTModelInfo().get(i).getName().getValue()));\n-            if (findTModel.getTModelInfos().getTModelInfo().get(i).getName().getLang() != null) {\n-                sb.append(\", \")\n-                        .append(StringEscapeUtils.escapeHtml(findTModel.getTModelInfos().getTModelInfo().get(i).getName().getLang()));\n-            }\n-            sb.append(\"</td><td>\")\n-                    .append(StringEscapeUtils.escapeHtml(Printers.ListToDescString(findTModel.getTModelInfos().getTModelInfo().get(i).getDescription())))\n-                    .append(\"</td></tr>\");\n-        }\n-        sb.append(\"</table>\");\n-        return sb.toString();\n-    }\n-\n-    public static String BusinessListAsTable(BusinessList findBusiness, HttpSession session, boolean isChooser) {\n-        StringBuilder sb = new StringBuilder();\n-        sb.append(\"<table class=\\\"table table-hover\\\"<tr><th>\");\n-        if (isChooser) {\n-            sb.append(\"</th><th>\");\n-        }\n-        sb.append(ResourceLoader.GetResource(session, \"items.name\")).\n-                append(\"</th><th>\").\n-                append(ResourceLoader.GetResource(session, \"items.service\")).\n-                append(\"</th></tr>\");\n-        for (int i = 0; i < findBusiness.getBusinessInfos().getBusinessInfo().size(); i++) {\n-            sb.append(\"<tr><td>\");\n-            if (isChooser) {\n-                sb.append(\"<input type=\\\"checkbox\\\" class=\\\"modalableBusinessChooser\\\" id=\\\"\").\n-                        append(StringEscapeUtils.escapeHtml(findBusiness.getBusinessInfos().getBusinessInfo().get(i).getBusinessKey())).\n-                        append(\"\\\"></td><td>\");\n-            }\n-            sb.append(\"<a title=\\\"\").\n-                    append(StringEscapeUtils.escapeHtml(findBusiness.getBusinessInfos().getBusinessInfo().get(i).getBusinessKey())).\n-                    append(\"\\\"  href=\\\"businessEditor2.jsp?id=\").\n-                    append(StringEscapeUtils.escapeHtml(findBusiness.getBusinessInfos().getBusinessInfo().get(i).getBusinessKey())).\n-                    append(\"\\\">\").\n-                    append(StringEscapeUtils.escapeHtml(Printers.ListNamesToString(findBusiness.getBusinessInfos().getBusinessInfo().get(i).getName()))).\n-                    append(\"</a></td><td>\").\n-                    append(\"<a class=\\\"btn btn-primary\\\" href=\\\"javascript:ShowServicesByBusinessKey('\").\n-                    append(StringEscapeUtils.escapeJavaScript(findBusiness.getBusinessInfos().getBusinessInfo().get(i).getBusinessKey())).\n-                    append(\"');\\\">\");\n-\n-            if (findBusiness.getBusinessInfos().getBusinessInfo().get(i).getServiceInfos() == null) {\n-                sb.append(\"0\");\n-            } else {\n-                sb.append(\"Show \").append(findBusiness.getBusinessInfos().getBusinessInfo().get(i).getServiceInfos().getServiceInfo().size());\n-            }\n-            sb.append(\"</a>\");\n-            if (!isChooser) {\n-                sb.append(\"<a class=\\\"btn btn-primary\\\" href=\\\"serviceEditor.jsp?bizid=\").\n-                        append(StringEscapeUtils.escapeHtml(findBusiness.getBusinessInfos().getBusinessInfo().get(i).getBusinessKey())).\n-                        append(\"\\\"><i class=\\\"icon-plus-sign icon-white  icon-large\\\"></i></a>\");\n-            }\n-            sb.append(\"</td></tr>\");\n-\n-            sb.append(\"<tr><td colspan=3><div id=\\\"\").\n-                    append(StringEscapeUtils.escapeHtml(findBusiness.getBusinessInfos().getBusinessInfo().get(i).getBusinessKey())).\n-                    append(\"\\\"></div></td></tr>\");\n-        }\n-        sb.append(\"</table>\");\n-        return sb.toString();\n-    }\n-\n-    /**\n-     * service list as html\n-     * @param findService\n-     * @param chooser\n-     * @param session\n-     * @return \n-     */\n-    public static String ServiceListAsHtml(ServiceList findService, boolean chooser, HttpSession session) {\n-        StringBuilder sb = new StringBuilder();\n-        sb.append(\"<table class=\\\"table\\\"><tr><th>\");\n-        if (chooser) {\n-            sb.append(\"</th><th>\");\n-        }\n-        sb.append(ResourceLoader.GetResource(session, \"items.name\")).\n-                append(\"</th><th>\").\n-                append(ResourceLoader.GetResource(session, \"items.key\")).\n-                append(\"</th><th>\").\n-                append(ResourceLoader.GetResource(session, \"items.business\")).\n-                append(\"</th></tr>\");\n-        for (int i = 0; i < findService.getServiceInfos().getServiceInfo().size(); i++) {\n-            sb.append(\"<tr><td>\");\n-            if (chooser) {\n-                sb.append(\"<input class=\\\"modalableServiceChooser\\\" type=\\\"checkbox\\\" id=\\\"\").\n-                        append(StringEscapeUtils.escapeHtml(findService.getServiceInfos().getServiceInfo().get(i).getServiceKey())).\n-                        append(\"\\\">\");\n-                sb.append(\"</td><td>\");\n-            }\n-            sb.append(\"<a href=\\\"serviceEditor.jsp?id=\").\n-                    append(StringEscapeUtils.escapeHtml(findService.getServiceInfos().getServiceInfo().get(i).getServiceKey())).\n-                    append(\"\\\" title=\\\"\").\n-                    append(StringEscapeUtils.escapeHtml(findService.getServiceInfos().getServiceInfo().get(i).getServiceKey()))\n-                    .append(\"\\\">\");\n-            sb.append(Printers.ListNamesToString(findService.getServiceInfos().getServiceInfo().get(i).getName())).append(\"<i class=\\\"icon-edit icon-large\\\"></i<</a></td><td>\");\n-           \n-            sb.append((findService.getServiceInfos().getServiceInfo().get(i).getServiceKey())).append(\"</td><td>\");\n-             sb.append(\"<a href=\\\"businessEditor2.jsp?id=\")\n-                    .append(StringEscapeUtils.escapeHtml((findService.getServiceInfos().getServiceInfo().get(i).getBusinessKey())))\n-                    .append(\"\\\">\");\n-            sb.append(StringEscapeUtils.escapeHtml((findService.getServiceInfos().getServiceInfo().get(i).getBusinessKey())))\n-                    .append(\"<i class=\\\"icon-edit icon-large\\\"></i<</a></td></tr>\");\n-        }\n-        sb.append(\"</table>\");\n-        return sb.toString();\n-    }\n-}\n", "diff --git a/juddiv3-war/src/main/java/org/apache/juddi/webconsole/hub/builders/SubscriptionHelper.java b/juddiv3-war/src/main/java/org/apache/juddi/webconsole/hub/builders/SubscriptionHelper.java\ndeleted file mode 100644\nindex 59ea1567f..000000000\n--- a/juddiv3-war/src/main/java/org/apache/juddi/webconsole/hub/builders/SubscriptionHelper.java\n+++ /dev/null\n@@ -1,145 +0,0 @@\n-/*\n- * To change this template, choose Tools | Templates\n- * and open the template in the editor.\n- */\n-package org.apache.juddi.webconsole.hub.builders;\n-\n-import java.util.List;\n-import org.apache.commons.lang.StringEscapeUtils;\n-import org.uddi.sub_v3.Subscription;\n-\n-/**\n- * Provides some basic helper functions for the edit Subscription page\n- *\n- * @author <a href=\"mailto:alexoree@apache.org\">Alex O'Ree</a>\n- */\n-public class SubscriptionHelper {\n-\n-    public static String getItemKeySpecific(Subscription sub) {\n-        if (sub == null) {\n-            return \"\";\n-        }\n-        if (sub.getSubscriptionFilter() == null) {\n-            return \"\";\n-        }\n-        if (sub.getSubscriptionFilter().getGetAssertionStatusReport() != null && sub.getSubscriptionFilter().getGetAssertionStatusReport().getCompletionStatus() != null) {\n-            return sub.getSubscriptionFilter().getGetAssertionStatusReport().getCompletionStatus().toString();\n-        }\n-\n-        if (sub.getSubscriptionFilter().getGetBindingDetail() != null) {\n-            return ToHtmlOption(sub.getSubscriptionFilter().getGetBindingDetail().getBindingKey());\n-        }\n-\n-        if (sub.getSubscriptionFilter().getGetBusinessDetail() != null) {\n-            return ToHtmlOption(sub.getSubscriptionFilter().getGetBusinessDetail().getBusinessKey());\n-        }\n-\n-        if (sub.getSubscriptionFilter().getGetServiceDetail() != null) {\n-            return ToHtmlOption(sub.getSubscriptionFilter().getGetServiceDetail().getServiceKey());\n-        }\n-\n-        if (sub.getSubscriptionFilter().getGetTModelDetail() != null) {\n-            return ToHtmlOption(sub.getSubscriptionFilter().getGetTModelDetail().getTModelKey());\n-        }\n-        return \"\";\n-    }\n-\n-    public static String ToHtmlOption(List<String> items) {\n-        StringBuilder sb = new StringBuilder();\n-        if (items == null || items.isEmpty()) {\n-            return null;\n-        }\n-        for (int i = 0; i < items.size(); i++) {\n-            if (items.get(i) == null) {\n-                continue;\n-            }\n-            if (items.get(i).trim().isEmpty()) {\n-                continue;\n-            }\n-            sb.append(\"<option value\\\"\").append(StringEscapeUtils.escapeHtml(items.get(i).trim()))\n-                    .append(\"\\\">\")\n-                    .append(StringEscapeUtils.escapeHtml(items.get(i)))\n-                    .append(\"</option>\");\n-        }\n-        return sb.toString();\n-    }\n-\n-    public static boolean isSpecificItem(Subscription sub) {\n-        if (sub == null) {\n-            throw new IllegalArgumentException();\n-        }\n-        if (sub.getSubscriptionFilter() == null) {\n-            throw new IllegalArgumentException();\n-        }\n-        return (sub.getSubscriptionFilter().getGetAssertionStatusReport() != null\n-                || sub.getSubscriptionFilter().getGetBindingDetail() != null\n-                || sub.getSubscriptionFilter().getGetBusinessDetail() != null\n-                || sub.getSubscriptionFilter().getGetServiceDetail() != null\n-                || sub.getSubscriptionFilter().getGetTModelDetail() != null);\n-    }\n-\n-    public static String isBindingSpecific(Subscription sub) {\n-        if (sub == null) {\n-            return \"\";\n-        }\n-        if (sub.getSubscriptionKey() == null) {\n-            return \"\";\n-        }\n-        if (sub.getSubscriptionFilter().getGetBindingDetail() != null && !sub.getSubscriptionFilter().getGetBindingDetail().getBindingKey().isEmpty()) {\n-            return \" active \";\n-        }\n-        return \"\";\n-    }\n-\n-    public static String isBusinessSpecific(Subscription sub) {\n-        if (sub == null) {\n-            return \"\";\n-        }\n-        if (sub.getSubscriptionKey() == null) {\n-            return \"\";\n-        }\n-        if (sub.getSubscriptionFilter().getGetBusinessDetail() != null && !sub.getSubscriptionFilter().getGetBusinessDetail().getBusinessKey().isEmpty()) {\n-            return \" active \";\n-        }\n-        return \"\";\n-    }\n-\n-    public static String isServiceSpecific(Subscription sub) {\n-        if (sub == null) {\n-            return \"\";\n-        }\n-        if (sub.getSubscriptionKey() == null) {\n-            return \"\";\n-        }\n-        if (sub.getSubscriptionFilter().getGetServiceDetail() != null && !sub.getSubscriptionFilter().getGetServiceDetail().getServiceKey().isEmpty()) {\n-            return \" active \";\n-        }\n-        return \"\";\n-    }\n-\n-    public static String isTModelSpecific(Subscription sub) {\n-        if (sub == null) {\n-            return \"\";\n-        }\n-        if (sub.getSubscriptionKey() == null) {\n-            return \"\";\n-        }\n-        if (sub.getSubscriptionFilter().getGetTModelDetail() != null && !sub.getSubscriptionFilter().getGetTModelDetail().getTModelKey().isEmpty()) {\n-            return \" active \";\n-        }\n-        return \"\";\n-    }\n-\n-    public static String isPublisherAssertionSpecific(Subscription sub) {\n-        if (sub == null) {\n-            return \"\";\n-        }\n-        if (sub.getSubscriptionKey() == null) {\n-            return \"\";\n-        }\n-        if (sub.getSubscriptionFilter().getGetAssertionStatusReport() != null && sub.getSubscriptionFilter().getGetAssertionStatusReport().getCompletionStatus() != null) {\n-            return \" active \";\n-        }\n-        return \"\";\n-    }\n-}\n", "diff --git a/juddiv3-war/src/main/java/org/apache/juddi/webconsole/resources/ResourceLoader.java b/juddiv3-war/src/main/java/org/apache/juddi/webconsole/resources/ResourceLoader.java\ndeleted file mode 100644\nindex ba6e363a4..000000000\n--- a/juddiv3-war/src/main/java/org/apache/juddi/webconsole/resources/ResourceLoader.java\n+++ /dev/null\n@@ -1,68 +0,0 @@\n-/*\n- * To change this template, choose Tools | Templates\n- * and open the template in the editor.\n- */\n-package org.apache.juddi.webconsole.resources;\n-\n-import java.util.HashMap;\n-import java.util.Locale;\n-import java.util.Map;\n-import java.util.MissingResourceException;\n-import java.util.ResourceBundle;\n-import javax.servlet.http.HttpSession;\n-\n-/**\n- * This a resource loader for specific locales for internationalization,\n- * provides some basic caching to prevent round trip disk access\n- *\n- * @author <a href=\"mailto:alexoree@apache.org\">Alex O'Ree</a>\n- */\n-public class ResourceLoader {\n-\n-    private static Map map = new HashMap();\n-\n-    /**\n-     * returns a localized string in the locale defined within\n-     * session.getAttribute(\"locale\") or in the default locale, en\n-     *\n-     * @param session\n-     * @param key\n-     * @return a localized string\n-     * @throws IllegalArgumentException if the key is null\n-     * @throws MissingResourceException if the resource bundle can't be found\n-     */\n-    public static String GetResource(HttpSession session, String key) throws MissingResourceException {\n-        if (key == null) {\n-            throw new IllegalArgumentException(\"key\");\n-        }\n-        String locale = (String) session.getAttribute(\"locale\");\n-        return GetResource(locale, key);\n-    }\n-\n-    /**\n-     * returns a localized string in the locale defined within locale or in the\n-     * default locale, en\n-     *\n-     * @param session\n-     * @param key\n-     * @return a localized string\n-     * @throws IllegalArgumentException if the key is null\n-     * @throws MissingResourceException if the resource bundle can't be found\n-     */\n-    public static String GetResource(String locale, String key) throws MissingResourceException {\n-        if (key == null) {\n-            throw new IllegalArgumentException(\"key\");\n-        }\n-\n-        ResourceBundle bundle = (ResourceBundle) map.get(locale);\n-        if (bundle == null) {\n-            bundle = ResourceBundle.getBundle(\"org.apache.juddi.webconsole.resources.web\", new Locale(locale));\n-            map.put(locale, bundle);\n-        }\n-        try {\n-            return bundle.getString(key.trim());\n-        } catch (Exception ex) {\n-            return \"key \" + key + \" not found \" + ex.getMessage();\n-        }\n-    }\n-}\n", "diff --git a/juddiv3-war/src/main/resources/org/apache/juddi/adminconsole/resources/web.properties b/juddiv3-war/src/main/resources/org/apache/juddi/adminconsole/resources/web.properties\nnew file mode 100644\nindex 000000000..c27f21417\n--- /dev/null\n+++ b/juddiv3-war/src/main/resources/org/apache/juddi/adminconsole/resources/web.properties\n@@ -0,0 +1,368 @@\n+# To change this template, choose Tools | Templates\n+# and open the template in the editor.\n+\n+language=en\n+direction=LTR\n+title=Apache jUDDI - Open Source UDDI Discovery Services\n+description=jUDDI is a free open source implementation of OASIS's UDDI specification. Think of it as a phone book for web services.\n+navbar.home=Home\n+\n+navbar.discover=Discover\n+navbar.businesses=Businesses\n+\n+navbar.businesses.tooltip=Browse for businesses\n+navbar.services=Services\n+\n+navbar.services.tooltip=Browse for Services\n+navbar.tmodels=tModels\n+\n+navbar.tmodels.tooltip=Browse for tModels\n+navbar.publishers=Publishers\n+\n+navbar.publishers.tooltip=Browse for Publishers\n+\n+navbar.search=Search\n+navbar.search.tooltip=Search\n+navbar.create=Create\n+navbar.create.business=Business\n+navbar.create.business.tooltip=Create a Business\n+navbar.create.service=Service\n+navbar.create.service.tooltip=Create a Service\n+navbar.create.tmodel=tModel\n+navbar.create.tmodel.tooltip=Create a tModel\n+navbar.create.tmodelkeygen.tooltip=Create a tModel Key Generator\n+navbar.create.tmodel=tModel\n+navbar.create.publisher=Publisher\n+navbar.create.publisher.tooltip=Create a Publisher\n+navbar.create.tmodelkeygen=tModel Partition (Key Generator)\n+\n+navbar.subscriptions=Subscriptions\n+navbar.subscriptions.view=View Subscriptions\n+navbar.subscriptions.create=Create Subscriptions\n+navbar.subscriptions.view.tooltip=View My Subscriptions\n+navbar.subscriptions.create.tooltip=Create a Subscription\n+\n+navbar.settings=Settings\n+navbar.settings.config=Configure\n+navbar.settings.config.tooltip=Configure this UDDI Browser\n+\n+navbar.help.userguide=User's Guide\n+navbar.help.devguide=Developer's Guide\n+navbar.help.api=API Documentation\n+navbar.help.wiki=jUDDI Wiki\n+navbar.help.bugreport=File a Bug Report\n+navbar.help.website=Official jUDDI Website\n+navbar.help.mailinglist=Mailing List Archive\n+\n+navbar.login.username=Username\n+navbar.login.password=Password\n+navbar.login.button=Login\n+navbar.login.logout=Click to logout\n+\n+index.juddi=jUDDI (pronounced \"Judy\") is an open source Java implementation of the Universal Description, Discovery, and Integration (UDDI v3) specification for (Web) Services. Think of UDDI as the yellow pages of the phone book for web services.\n+learnmore=Learn More\n+viewdetails=View Details\n+index.learn=Learn all about OASIS's UDDI Technical Specification\n+index.search=An advanced search capability that allows you search for specific criteria.\n+index.browse=Flip through the pages of UDDI. Whether you're just curious or you're looking for something specific and don't know what to search for, the browse feature is a good place to start.\n+index.browse.title=Browse\n+index.search.title=Search\n+index.learn.title=About UDDI\n+footer.apachecopyright=&copy; 2013 The Apache Software Foundation. All Rights Reserved.\n+modal.digitalsignaturewarning.title=Digital Signature Warning\n+modal.digitalsignaturewarning.body=This item is digitally signed. This means that when saving your changes, all existing signatures will become invalid and will automatically be excluded from the save process. \n+modal.close=Close\n+modal.savechanges=Save Changes\n+totals.records=Total records\n+totals.recordsreturned=Records Returned\n+totals.offset=Offset\n+items.lang=Language\n+items.loading=Loading\n+pages.businesseditor.title=Business Editor\n+pages.businesskey=Business Key\n+pages.businesskey.description=The Business Key is the unique identifier for this business and exists within this registry.\n+pages.editor.tabnav.general=General\n+pages.editor.tabnav.discovery=Discovery\n+pages.editor.tabnav.contacts=Contacts\n+pages.editor.tabnav.categories=Categories\n+pages.editor.tabnav.identifiers=Identifiers\n+pages.editor.tabnav.services=Services\n+pages.editor.tabnav.signatures=Signatures\n+pages.editor.tabnav.opinfo=Operational Info\n+pages.editor.tabnav.relatedbusinesses=Related Businesses\n+items.name=Name\n+items.business.name.description=Businesses are identified by one or more name. Multiple names are useful for different languages, legal names, or abbreviations.\n+items.value=Value\n+items.description=Description\n+items.businesses.description=businesses can have more than one description, such as in a different language\n+items.discoveryurl=Discovery URLs\n+items.discoveryurl.description=are typically a link to a simple web page with additional information on it, such as a listing a services. Two reserved values are specified in the specification, 'homepage' and 'businessEntity'.\n+items.type=Type\n+items.contacts=Contacts\n+items.contacts.description=Each business typically has several points of contact for a person or a job role within the business so that someone who finds the information can make human contact for any purpose. Examples for Type: \"technical questions\", \"technical contact\", \"establish account\", \"sales contact\".\n+items.email=Email\n+items.phone=Phone\n+items.address=Address\n+items.addressline.add=Add an addline (at least one is required).\n+items.addressvalue=Address Value\n+items.keyname.optional=Key Name (optional)\n+items.keyvalue.optional=Key Value (optional)\n+items.categories.description=UDDI uses a taxonomy system to categorize businesses and their services. These categories are defined as UDDI tModels and are defined by the administrator(s) of this UDDI node. These categories are appended to business registrations either by adding one or more \"Key References\" or by adding one or more \"Key Reference Groups\", which in turn can be a zero or more of Key References as part of it.\n+items.keyrefcats=Keyed Reference Categories\n+items.keyrefcat.add=Add Key Reference\n+items.keyrefgroup=Keyed Reference Groups\n+items.keyrefgroup.add=Add Key Reference Group\n+items.key=Key\n+items.identifiers=Identifiers\n+items.identifiers.description=optionally, you can attach identifiers that uniquely identify this item from other systems, such as a tax ID or a <a href=\"http://www.whitehouse.gov/sites/default/files/omb/grants/duns_num_guide.pdf\">DUNS Number</a>.\n+items.signed.not=This item is not digitally signed.\n+item.signed=This item is digitally signed. Signature Count: \n+items.signed.viewcert=View Certificate\n+actions.save=Save\n+actions.delete=Delete\n+actions.sign=Digitally Sign\n+actions.transfer=Transfer Ownership\n+actions.subscribe=Subscribe\n+errors.unknownentity=Error, Unrecongized entity type.\n+errors.nodatareturned=No data returned.\n+items.business=Business\n+error.generic=Error \n+errors.tmodel.prefix=A tModel partition key generator must have a name that starts with uddi: \n+errors.tmodel.postfix=A tModel partition key generator must have a name that ends with :keyGenerator\n+messages.success=Success\n+errors.norecordsfound=No records were found.\n+#just a prefix\n+errors.uddi=UDDI Error \n+errors.nocertavaiable=Error, no certificate was available.\n+items.nodeid=Node ID\n+items.authorizedname=Authorized Name\n+items.created=Created\n+items.modified=Modified\n+items.modifiedwithchildren=Modified include children\n+items.signed=This item is digitally signed. Count:\n+errors.nobusinessid=No business ID was specified.\n+errors.noservicesdefined=No services are defined.\n+actions.save.bindingtemplate=Binding Template saved successfully!\n+actions.save.service=Service saved successfully!\n+errors.noinput.businesskey=Error, no input was provided for the business key.\n+items.pubisher.name=Publisher Name\n+items.publisher.authname=Authorized Name\n+items.publisher.admin=Administrator\n+errors.noinput=No input was provided.\n+actions.save.tmodel=tModel saved successfully!\n+actions.delete.tmodel=tModel deleted successfully.\n+actions.delete.business=Business deleted successfully.\n+actions.delete.service=Service deleted successfully.\n+search.wrylf=What are you looking for?\n+items.tmodel=tModel\n+items.bindingtemplate=Binding Template\n+search.criteria=Search Criteria\n+search.criteria.byname=By Name\n+search.criteria.bycategory=By Category\n+search.criteria.bykey=By Unique Identifier\n+search.criteria.bytmodel=By tModel\n+search.tip=*Tip: use '%' for any number of wild card characters and '_' for a single wild card character.\n+search.results=Search Results\n+search.searchfirst=Try searching first\n+items.publisher=Publisher\n+items.dsigs=Digital Signatures\n+items.service.browser=Service Browser\n+items.tmodel.browser=tModel Browser\n+items.dsigs.description=This page will enable you to digitally sign a UDDI entity using a Java Applet and an X509 Digital Certificate. Windows and MacOS are supported.\n+items.settings.description=Administrators can use this page to change the way this UDDI browser is configured, such as endpoint URLs, SSL stores, authentication mechanisms and more.\n+pages.tmodelpart.title=tModel Key Generators (Partitions)\n+pages.tmodelpart.content=TModel Key Generators are a special kind of tModel that enables you to define new tModels with any arbitrary tModel prefix that you want. For example, if you wanted a tModel defined as \"uddi:www.mycompany.com:ServiceAuthenticationMethod\", you would first have to create a tModel key generator with the value of \"uddi:www.mycompany.com:keyGenerator\". This is part of the UDDI specification and acts as a governance mechanism. You can also create a tModel Key Generator by using the Creat tModel menu option and by adding the appropriate settings.\n+pages.tmodelpart.juddinote=For jUDDI implementations of UDDI, the \"root\" account cannot be used to create a keyGenerator.\n+pages.tmodelpart.key=The UDDI tModel key\n+pages.thmodepart.name=A name describing the key\n+pages.viewsubscriptions.content=UDDI offers the ability for users to subscribe for notification to changes in most entities within a UDDI registry. However, the notification part is a bit strange. Users of strict UDDIv3 registries have only one option, periodically poll the UDDI registry for changes via the Subscription API. Although there's data types defined within the UDDI v3 specification, there's no API method for setting up a callback style of subscription, where the registry user hosts a web service that waits for notifications. In a callback subscription, those that need the information are notified immediately.<br><br>jUDDI based registries have an extension to the UDDIv3 specification that enables call back type of communication and is thus preferred mechanism.\n+pages.serviceeditor.title=Service Editor\n+errors.generic=Error\n+pages.businesseditor.businesslist=Business Services\n+pages.businesseditor.businesslist2=are defined for this business.\n+items.service=Service\n+errors.notsignedin=Either an error occured, or you're not signed in.\n+pages.viewsubscriptions.listingheader=UDDI Subscriptions\n+pages.viewsubscriptions.nosubs=No subscriptions are currently defined.\n+errors.juddiapi.without.juddi=You're not connected to a jUDDI registry. Contact the administrator or check the configuration file.\n+items.services.name.descriptions=Services are identified by one or more name. Multiple names are useful for different languages, legal names, or abbreviations.\n+items.services.description=services can have more than one description, such as in a different language.\n+items.bindingtemplate.keyrefgrp=Binding Template Keyed Reference Groups\n+items.bindingtemplate.keyrefcat=Binding Template Keyed Reference Categories\n+items.overviewurl=Overview Documents\n+items.overviewurl.description=These are typically URLs to web pages that describe this tModel's details and usage scenarios.\n+items.tmodelinstance.description=tModel Instance Description\n+items.tmodelinstance.description2=tModel instance infos can have more than one description, such as in a different language.\n+items.tmodelinstance.parameters=tModel Instance Parameters\n+items.service.key=Service Key\n+items.service.key.description=The Business Key is the unique identifier for the business that this service belongs to. If you specify a service key, it must be prefixed with an existing partition (key generator).\n+items.bindingtemplate.description=A service in UDDI really defines a specific type of service, not necessarily an implementation of a service. Binding templates define specifically an implementation of a service and normally includes an access point describing how to use the service. Each service may have 0 or more binding templates. Some registries impose limits on the number of binding templates per service.\n+items.bindingtemplate.add=Add a Binding Template\n+items.bindingtemplate.key=Binding Template Key\n+items.bindingtemplate.description.add=Add a Binding Template Description - binding templates can have more than one description, such as in a different language.\n+items.accesspoint=Access Point\n+items.accesspoint.description=UDDI allows for a choice of either a Hosting Redirector OR an Access Point. Access Point is recommend. The access point is usually a URL for the service endpoint.\n+items.accesspoint.type=Access Point Type\n+items.accesspoint.value=Access Point Value\n+items.hostingredirector=Hosting Redirector\n+items.tmodelinstance.info=tModel Instance Information\n+items.tmodelinstance.info.desc=a binding template can have additional information attached to it using the tModel Instance.\n+items.overviewurl.add=Add an Overview Document\n+items.overviewurl.description.add=Add an Overview Document Description\n+items.tmodelinstance.add=Add a tModel Instance\n+items.tmodelinstance.description.add=Add a tModel Instance Description\n+items.tmodel.key=tModel Key\n+items.overviewdocument.description=Overview Document Descriptions\n+navbar.help=Help\n+pages.tmodeleditor.title=tModel Editor\n+pages.editor.tabnav.overview=Overview Documents\n+pages.editor.tabnav.overview.description=These are typically URLs to web pages that describe this tModel's details and usage scenarios.\n+items.tmodel.description=tModels can have more than one description, such as in a different language.\n+items.tmodel.key.description=\\ The tModel Key is the unique identifier. If you specify a tModel, it must be prefixed with an existing partition (key generator), other one is generated for you.\n+items.tmodel.name=Name - The name describes this tModel. It is a required field.\n+items.clicktoedit=Click to edit\n+pleasewait=Please wait\n+items.description.add=Add a Description\n+items.name.add=Add a Name\n+items.contact.primary=Primary Contact\n+#suggestion\n+items.phone.types=(Extension, Domestic, International, DSN)\n+items.sortcode=Sort Code\n+items.contact.type=Contact Type\n+items.contact.default=(Job Title, Role)\n+items.addresstype.default=(headquarters. sales office, billing)\n+items.welcome=Welcome\n+items.expires=Expires\n+items.actions=Actions\n+actions.asxml=View as XML\n+items.name.description=UDDI entities can have more than one name, such as abbreviations or in another language.\n+items.signatures.invalid=Signature is invalid! Reason: \n+items.signatures.valid=Digital Signature is valid.\n+items.unknown=Error, unable to identify which type of object you wanted.\n+items.service.add=Add a Service\n+items.publisherassertion.add=Add a Business Relationship (Publisher Assertion)\n+actions.saved=Saved!\n+items.details=Details\n+navbar.publisherassertions=Publisher Assertions\n+navbar.publisherassertions.tooltip=Allows you to configure relationships between businesses.\n+navbar.create.mybiz=My Businesses\n+navbar.create.mybiz.tooltip=A list of all businesses that you can alter.\n+navbar.create.mybiz.content=My Businesses contains a list of all the UDDI business elements that you have access to. This typically means that you can make changes to it, however this may vary between vendors.\n+actions.transfer.description=Transfer this entity to another UDDI node or publisher.\n+actions.subscribe.description=Alert me when this entity changes.\n+items.publisherassertions.from=This Business\n+items.publisherassertions.to=Is related to business\n+items.publisherassertions.relationship=Relationship\n+items.status=Status\n+actions.deleted=Deleted\n+navbar.subscriptions.feed=News Feed\n+items.picker=Picker\n+navbar.subscriptions.feed.tooltip=A new feed based on your subscription settings.\n+items.tmodel.chooser=tModel Chooser\n+actions.select=Select\n+actions.cancel=Cancel\n+navbar.transfer=Transfer Custody\n+navbar.transfer.tooltip=Transfer Ownership to another Publisher\n+items.subscriptions.assertion=Assertion Status Report Changed\n+items.subscriptions.bindings=Bindings Changed\n+items.subscriptions.business=Businesses Changed\n+items.subscriptions.assertion2=Business Relationships (Publisher Assertions)\n+items.subscriptions.services=Services Changed\n+items.subscriptions.servicelist=Service Listing\n+items.subscriptions.tmodels=tModels Changed\n+items.subscriptions.tmodels2=tModel Listing\n+actions.canceled=Canceled\n+actions.success=Success!\n+items.transfertoken=Transfer Token\n+items.transferkeys=Keys to Transfer (KeyBag)\n+error.ohno=Oh no!\n+error.occurred=Unfortunately, an error occurred. \n+error.pleasereport=Please do us a favor and report to your jUDDI administrator.\n+error.timeofevent=Time the event occurred\n+error.reportadmin=If you are the administrator, please review the server logs and report the findings to the following URL.\n+error.filereport=File a Bug Report\n+navbar.help.about=About\n+navbar.help.about.tooltip=About this site\n+pages.about.content=This website is part of the <a href=\"http://juddi.apache.org\">Apache jUDDI</a> project and provides end user functionality for\\n            interacting with a UDDI version 3 registry as defined by the OASIS standard located here: <a href=\"http://uddi.org/pubs/uddi-v3.0.2-20041019.htm\">http://uddi.org/pubs/uddi-v3.0.2-20041019.htm</a>.\\n            <br><br>\\n            This user interface should work with any UDDI v3 implementation but was designed and tested with the Apache jUDDI server and communicates via \\n            web service transactions.\\n            <br><br>\\n            This user interface is open source and uses a number of other open source libraries and capabilities which are listed below.\n+items.binding.chooser=Binding Chooser\n+items.service.chooser=Service Chooser\n+items.business.chooser=Business Chooser\n+items.assertion.chooser=Publisher Assertion Status\n+items.subscription.CompletionStatus.STATUS_COMPLETE=This means that there is a visible relationship between two businesses.\n+items.subscription.CompletionStatus.STATUS_FROM_KEY_INCOMPLETE=This indicates that a business has has asserted a relationship with one of your businesses, but you have not reciprocated the relationship.\n+items.subscription.CompletionStatus.STATUS_TO_KEY_INCOMPLETE=This indicates that the owner of the business has asserted a relationship with another business, but it has not be reciprocated.\n+items.subscription.CompletionStatus.STATUS_BOTH_INCOMPLETE=This indicates that the publisher assertion embedded in the assertion Status Item has been deleted from both ends of the business relationship.\n+pages.subscription.content=UDDI has a feature that allows you to be alerted of updates to either specific UDDI entries or to search results. This page will help you setup a subscription to meet your needs. Note: only one type of subscription filter can be defined per subscription. Normally, users can make as many subscriptions as they want, however it may be effectively limited by the registry implementation.\n+pages.subscription.step1=Step 1 - What do you type of information to you want alerts on?\n+pages.subscription.step2=Step 2 - Which items do you want alerts on?\n+pages.subscription.step1.specific=Changes to a specific item\n+pages.subscription.step1.search=Changes to search results, such as a new item\n+items.publisherassertion.status=Publisher Assertion Status\n+actions.add=Add\n+actions.remove=Remove\n+items.findqualifiers=Find Qualifiers\n+pages.subscription.step3=Step 3 - How do want to receive the alerts?\n+pages.subscription.step3.direct=Send me alerts directly\n+pages.subscription.step3.direct.tooltip=Either via a UDDI Subscription Client API, Email or some other notifier\n+pages.subscription.step3.pickup=I'll pick them up\n+pages.subscription.step3.pickup.tooltip=Either via this website or from your own software that periodically checks for updates\n+pages.subscription.step3.content=In order for a UDDI server to notify you of updates asynchronously, you first have to define a business, with a service, with a binding template that tells UDDI where to send the notification (Access Point value). Some UDDI servers (such as Apache jUDDI) require you to also add a tModel Instance defining the transport parameter, such as \n+pages.subscription.step4=Step 4 - Options\n+items.notificationinterval=Notification Interval (hh:mm:ss)\n+items.expiration=Expiration\n+items.subscriptionbrief=Brief Subscription\n+items.maxrecords.callback=Max records per callback\n+navbar.subscriptions.feed.content=The news feed provides you a list of all updated content per your subscription settings\n+pages.transfer.content=\\ UDDI supports the transfer the ownership of Businesses (and all their child objects including services, binding templates) and tModel entities to another publisher. Publishers represent one or more logins or usernames.<br><Br>Transfers can occur within a UDDI registry node (intra-node) and between multiple registries nodes (inter-node). This utility will help you setup intra-node transfers only. No known UDDI implementations support inter-node transfers (replication API's are not implemented.<br><br>The process is straightforward, select what entities you want to transfer, then click OK. A token will be presented to you which then need to give to the other publisher. The other publisher then needs to accept the token and transfer the ownership to the publisher. Finally, the token is then destroyed to prevent any inadvertent transfers.<br>Transfers can be aborted (token invalidated) before the other publisher transfers the ownership over. Once it's been transfered and you want to undo the transfer, contact the registry administrator and the other publisher.\n+pages.transfer.createtoken=Create a new Token\n+pages.transfer.discardtoken=Discard a transfer token (abort the transfer)\n+pages.transfer.accepttransfer=Accept a Transfer\n+actions.refresh=Refresh\n+pages.transfer.gettoken=Get a Transfer Token\n+items.token=Token\n+actions.accept=Accept\n+pages.transfer.createtoken.content=This tab will help you create a transfer token. Once you have created it, copy the entire contents of the token and give it to the person you're transfering ownership to.\n+pages.transfer.discardtoken.content=Made a mistake? No problem. Enter the token below along with the keys to be transfered and it will be removed from the system, preventing any future transfer. It must match exactly. Note: both fields require XML content.\n+pages.transfer.accepttransfer.content=If another UDDI publisher gave you a transfer token and you all agreed to transfer ownership of a business or tModel, it can be done here. Enter the transfer token. It must match exactly.\n+actions.savethis=Copy and save this information to your computer. There's no way to retrieve this information again! \n+navbar.help.source=Source Code\n+actions.approve=Approve\n+navbar.create.serviceimport=Register Services from WSDL\n+navbar.create.serviceimport.tooltip=Based on the UDDI TC, Using WSDL in a UDDI Registry\n+warning.ssl=Warning, you're not using SSL and your password could be exposed!\n+pages.home.title=jUDDI Administration\n+pages.home.config=Configure jUDDI\n+pages.home.stats=Status and Statistics\n+pages.home.stats.content=Find out how busy jUDDI is.\n+pages.home.admin=Administration\n+pages.home.admin.content=Administration options, such as deleting entities.\n+items.statistics=Statistics\n+items.happyjuddi=Happy jUDDI\n+pages.configure.info=Just click to edit each field, then click save when you are done. (Not all fields can be modified)\n+pages.configure.server=Server Config\n+pages.configure.admin=Admin Console Config (this web site)\n+page.config.debug=Show Debug Information\n+pages.config.add=Add a new setting\n+pages.config.add.note=Note: the key must start with either client., config.props, or juddi.\n+pages.config.savefailed=Save Failed!\n+pages.admin.content=This page lets you access the jUDDI Web Service. Its functions are outside the scope of the UDDI specification and provide basic administrative functions for managing your UDDI node. <br><br><b>You'll need to be logged (top right) in order to do anything.</b><br> Please select an item from the drop down menu.\n+pages.admin.notes=* For items that require XML input, leave the UDDI authentication token blank. It will be populated automatically.\n+actions.go=Go!\n+items.results=Results\n+items.enable=Enabled\n+items.noinput=No input required.\n+items.noauthtoken=Leave authToken blank\n+max.bindings.per.service=Maximum Bindings per Service\n+max.services.per.business=Maximum Services per Business\n+max.business=Maximum Businesses\n+max.tmodel=Maximum tModels\n+pages.admin.max=If the maximum value is not defined, then it defaults to the server's default maximum settings. If the maximum value is -1, then the there are no limits.\n+items.inquiry=Inquiry\n+items.publish=Publish\n+items.security=Security\n+items.subscription=Subscription\n+items.subscription.list=Subscription Listener\n+items.custodytransfer=Custody Transfer\n+items.replication=Replication\n+items.transport=Transport\n+items.clientname=Client Name\n", "diff --git a/juddiv3-war/src/main/resources/org/apache/juddi/adminconsole/resources/web_es.properties b/juddiv3-war/src/main/resources/org/apache/juddi/adminconsole/resources/web_es.properties\nnew file mode 100644\nindex 000000000..8306016f2\n--- /dev/null\n+++ b/juddiv3-war/src/main/resources/org/apache/juddi/adminconsole/resources/web_es.properties\n@@ -0,0 +1,369 @@\n+# To change this template, choose Tools | Templates\n+# and open the template in the editor.\n+\n+language=es\n+direction=LTR\n+title=Apache jUDDI - de C\\u00f3digo Abierto UDDI Descubrimiento de Servicios\n+description=jUDDI es una implementaci\\u00f3n de c\\u00f3digo abierto de la especificaci\\u00f3n OASIS UDDI. Piense en ello como una gu\\u00eda telef\\u00f3nica para servicios web.\n+navbar.home=Casa\n+\n+navbar.discover=Descubrir\n+navbar.businesses=Negocios\n+\n+navbar.businesses.tooltip=Busque Negocios\n+navbar.services=Servicios\n+\n+navbar.services.tooltip=Busque Servicios\n+navbar.tmodels=tModels\n+\n+navbar.tmodels.tooltip=Busque tModels\n+navbar.publishers=Editores\n+\n+navbar.publishers.tooltip=Busque Editores\n+\n+navbar.search=Buscar\n+navbar.search.tooltip=Buscar\n+navbar.create=Crear\n+navbar.create.business=Negocios\n+navbar.create.business.tooltip=Crear un Negocio\n+navbar.create.service=Servicios\n+navbar.create.service.tooltip=Crear un Servicio\n+navbar.create.tmodel=tModel\n+navbar.create.tmodel.tooltip=Crear un tModel\n+navbar.create.tmodelkeygen.tooltip=Crear un tModel Generador de Claves\n+# To change this template, choose Tools | Templates\n+# and open the template in the editor.\n+navbar.create.tmodel=tModel\n+navbar.create.publisher=Editor\n+navbar.create.publisher.tooltip=Crear un  Editor\n+navbar.create.tmodelkeygen=tModel Partition (Key Generator)\n+\n+navbar.subscriptions=Suscripciones\n+navbar.subscriptions.view=Ver Suscripciones\n+navbar.subscriptions.create=Crear Suscripciones\n+navbar.subscriptions.view.tooltip=Ver Mis Suscripciones\n+navbar.subscriptions.create.tooltip=Crear una suscripci\\u00f3n\n+\n+navbar.settings=Configuraci\\u00f3n\n+navbar.settings.config=Configurar\n+navbar.settings.config.tooltip=Configure este Navegador UDDI\n+\n+navbar.help.userguide=Gu\\u00eda de usuarios\n+navbar.help.devguide=Gu\\u00eda del desarrollador\n+navbar.help.api=API Documentaci\\u00f3n\n+navbar.help.wiki=jUDDI Wiki\n+navbar.help.bugreport=Presentar un informe de errores\n+navbar.help.website=Sitio web oficial jUDDI\n+navbar.help.mailinglist=Mailing List Archive\n+\n+navbar.login.username=Nombre de usuario\n+navbar.login.password=Contrase\\u00f1a\n+navbar.login.button=Login\n+navbar.login.logout=Pulse para salir\n+\n+index.juddi=jUDDI (pronunciado \"Judy\") es una implementaci\\u00f3n de c\\u00f3digo abierto de Java de la Universal Description, Discovery and Integration (UDDI v3) especificaci\\u00f3n (Web) Servicios. Piense en UDDI como las p\\u00e1ginas amarillas de la gu\\u00eda telef\\u00f3nica para los servicios web.\n+learnmore=Aprender M\\u00e1s\n+viewdetails=Ver los Detalles\n+index.learn=Aprenda todo acerca de UDDI Especificaci\\u00f3n T\\u00e9cnica de OASIS\n+index.search=Una funci\\u00f3n de b\\u00fasqueda avanzada que le permite buscar un criterio espec\\u00edfico.\n+index.browse=Flip a trav\\u00e9s de las p\\u00e1ginas de UDDI. Si usted es curiosidad o que est\\u00e1 buscando algo espec\\u00edfico y no saben qu\\u00e9 buscar, la funci\\u00f3n de b\\u00fasqueda es un buen lugar para comenzar.\n+index.browse.title=Busque\n+index.search.title=Buscar\n+index.learn.title=Acerca de UDDI\n+footer.apachecopyright=&copy; 2013 La Fundaci\\u00f3n de Software Apache. Todos los Derechos Reservados.\n+modal.digitalsignaturewarning.title=Advertencia de firma digital\n+modal.digitalsignaturewarning.body=Este art\\u00edculo est\\u00e1 firmado digitalmente. Esto significa que al guardar los cambios, todas las firmas existentes dejar\\u00e1n de ser v\\u00e1lidos y ser\\u00e1n autom\\u00e1ticamente excluidos del proceso de guardado.\n+modal.close=Cerrar\n+modal.savechanges=Guardar cambios\n+totals.records=Total de Registros\n+totals.recordsreturned=Registros Devueltos\n+totals.offset=Offset\n+items.lang=Idioma\n+items.loading=Carga\n+pages.businesseditor.title=Empresas Editor\n+pages.businesskey=Business Key\n+pages.businesskey.description=La clave del negocio es el identificador \\u00fanico para este negocio y existe dentro de este registro.\n+pages.editor.tabnav.general=General\n+pages.editor.tabnav.discovery=Descubrimiento\n+pages.editor.tabnav.contacts=Contactos\n+pages.editor.tabnav.categories=Categor\\u00edas\n+pages.editor.tabnav.identifiers=Identificadores\n+pages.editor.tabnav.services=Servicios\n+pages.editor.tabnav.signatures=Firmas\n+pages.editor.tabnav.opinfo=Informaci\\u00f3n sobre el Funcionamiento\n+pages.editor.tabnav.relatedbusinesses=Los negocios relacionados\n+items.name=Nombre\n+items.business.name.description=Las empresas est\\u00e1n identificados por una o m\\u00e1s nombre. Varios nombres son \\u00fatiles para diferentes idiomas, nombres legales o abreviaturas.\n+items.value=Valor\n+items.description=Descripci\\u00f3n\n+items.businesses.description=negocios pueden tener m\\u00e1s de una descripci\\u00f3n, tal como en un idioma diferente\n+items.discoveryurl=Descubrimiento URLs\n+items.discoveryurl.description=son t\\u00edpicamente un enlace a una p\\u00e1gina web simple con informaci\\u00f3n adicional sobre \\u00e9l, tal como un listado a los servicios. Dos valores reservados se especifican en la especificaci\\u00f3n, 'homepage' y \"businessEntity '.\n+items.type=Tipo\n+items.contacts=Contactos\n+items.contacts.description=Cada negocio tiene t\\u00edpicamente varios puntos de contacto de una persona o de un puesto de trabajo dentro de la empresa para que alguien que encuentra la informaci\\u00f3n puede hacer que el contacto humano con cualquier prop\\u00f3sito. Ejemplos de tipo: \"cuestiones t\\u00e9cnicas\", \"contacto t\\u00e9cnico\", \"establecer la cuenta\", \"contacto de ventas\".\n+items.email=Email\n+items.phone=Tel\\u00e9fono\n+items.address=Direcci\\u00f3n\n+items.addressline.add=Agregar una l\\u00ednea de direcci\\u00f3n (al menos uno es necesario).\n+items.addressvalue=Direcci\\u00f3n del Valor\n+items.keyname.optional=Nombre de clave (opcional)\n+items.keyvalue.optional=Valor de clave (opcional)\n+items.categories.description=UDDI utiliza un sistema de taxonom\\u00eda para categorizar a las empresas y sus servicios. Estas categor\\u00edas son definidas como estructuras tModel UDDI y est\\u00e1n definidos por el administrador (s) de este nodo UDDI. Estas categor\\u00edas se a\\u00f1aden a los registros empresariales mediante la adici\\u00f3n de uno o m\\u00e1s \"Referencias clave\" o mediante la adici\\u00f3n de uno o m\\u00e1s \"grupos de referencia de teclas\", que a su vez puede ser un cero o m\\u00e1s de las referencias clave en el contexto de la misma.\n+items.keyrefcats=Categor\\u00edas con clave de referencia\n+items.keyrefcat.add=Agregar referencia clave\n+items.keyrefgroup=Grupos con clave de referencia\n+items.keyrefgroup.add=Agregar grupo de referencia clave\n+items.key=Clave\n+items.identifiers=Identificadores\n+items.identifiers.description=opcionalmente, puede asociar los identificadores que identifican este tema a partir de otros sistemas, como por ejemplo un n\\u00famero de identificaci\\u00f3n fiscal o un <a href = http://www.whitehouse.gov/sites/default/files/omb/grants/duns_num_guide.pdf \"\"> N\\u00famero DUNS </ a>.\n+items.signed.not=Este art\\u00edculo no est\\u00e1 firmado digitalmente.\n+item.signed=Este art\\u00edculo est\\u00e1 firmado digitalmente. Firma de visitas:\n+items.signed.viewcert=Ver certificado\n+actions.save=Guardar\n+actions.delete=Borrar\n+actions.sign=Firmar Digitalmente\n+actions.transfer=Transferencia de la propiedad\n+actions.subscribe=Suscribir\n+errors.unknownentity=Error, Tipo de entidad Unrecongized.\n+errors.nodatareturned=No se obtuvieron datos.\n+items.business=Negocios\n+error.generic=Error\n+errors.tmodel.prefix=Una partici\\u00f3n tModel generador de claves debe tener un nombre que comienza con uddi:\n+errors.tmodel.postfix=A tModel partition key generator must have a name that ends with :keyGenerator\n+messages.success=\\u00e9xito\n+errors.norecordsfound=No se encontraron registros..\n+errors.uddi=UDDI Error \n+errors.nocertavaiable=Error, no se dispone de certificado.\n+items.nodeid=Node ID\n+items.authorizedname=Nombre autorizado\n+items.created=Creado\n+items.modified=Modificado\n+items.modifiedwithchildren=Modificado incluir a los ni\\u00f1os\n+items.signed=Este art\\u00edculo est\\u00e1 firmado digitalmente. Count:\n+errors.nobusinessid=No se ha especificado ID de empresa\n+errors.noservicesdefined=No hay servicios est\\u00e1n definidos.\n+actions.save.bindingtemplate=Enlace de plantillas guardado correctamente!\n+actions.save.service=Servicio guardado correctamente!\n+errors.noinput.businesskey=Error, no se facilit\\u00f3 la entrada de la clave de negocio.\n+items.pubisher.name=Nombre del editor\n+items.publisher.authname=Nombre Autorizado\n+items.publisher.admin=Administrador\n+errors.noinput=Sin entrada fue proporcionada.\n+actions.save.tmodel=tModel guardado correctamente!\n+actions.delete.tmodel=tModel eliminado correctamente.\n+actions.delete.business=Negocios eliminado correctamente.\n+actions.delete.service=Servicio eliminado correctamente.\n+search.wrylf=\\u00bfQu\\u00e9 est\\u00e1s buscando?\n+items.tmodel=tModel\n+items.bindingtemplate=Enlace de Plantillas\n+search.criteria=Criterios de B\\u00fasqueda\n+search.criteria.byname=Por Nombre\n+search.criteria.bycategory=Por Categor\\u00eda\n+search.criteria.bykey=Por Unique Identifier\n+search.criteria.bytmodel=Por tModel\n+search.tip=* Consejo: '%' uso para cualquier n\\u00famero de caracteres comod\\u00edn y '_' para un car\\u00e1cter comod\\u00edn \\u00fanico.\n+search.results=Resultados de la b\\u00fasqueda\n+search.searchfirst=Intenta buscar primero\n+items.publisher=Editor\n+items.dsigs=Firmas Digitales\n+items.service.browser=Servicio Explorar\n+items.tmodel.browser=tModel Explorar\n+items.dsigs.description=Esta p\\u00e1gina le permitir\\u00e1 firmar digitalmente una entidad UDDI mediante un applet de Java y un certificado X509 Digital. Windows y MacOS son compatibles.\n+items.settings.description=Los administradores pueden utilizar esta p\\u00e1gina para cambiar la forma en que se configura este navegador UDDI, como direcciones URL de punto final, tiendas de SSL, los mecanismos de autenticaci\\u00f3n y m\\u00e1s.\n+pages.tmodelpart.title=tModel clave Generadores (particiones)\n+pages.tmodelpart.content=Generadores TModel clave son un tipo especial de tModel que permite definir nuevas estructuras tModel con cualquier prefijo arbitrario tModel que desea. Por ejemplo, si usted quiere un tModel define como \"uddi: www.mycompany.com:ServiceAuthenticationMethod\", primero tendr\\u00eda que crear un generador de claves tModel con el valor de \"uddi: www.mycompany.com:keyGenerator\". Esto es parte de la especificaci\\u00f3n UDDI y act\\u00faa como un mecanismo de gobernanza. Tambi\\u00e9n puede crear un generador de claves tModel mediante la opci\\u00f3n de men\\u00fa tModel Creat y a\\u00f1adiendo los valores adecuados.\n+pages.tmodelpart.juddinote=Para implementaciones jUDDI de UDDI, la cuenta \"root\" no se puede utilizar para crear un keygenerator.\n+pages.tmodelpart.key=El tModel UDDI clave\n+pages.thmodepart.name=Un nombre de describir la tecla\n+pages.viewsubscriptions.content=UDDI ofrece la posibilidad a los usuarios a suscribirse para la notificaci\\u00f3n de los cambios en la mayor\\u00eda de las entidades en un registro UDDI. Sin embargo, la parte de notificaci\\u00f3n es un poco extra\\u00f1o. Los usuarios de los estrictos UDDIv3 registros tienen una sola opci\\u00f3n, sondean peri\\u00f3dicamente el registro UDDI para los cambios a trav\\u00e9s de la API de Suscripci\\u00f3n. Aunque hay tipos de datos definidos en la especificaci\\u00f3n UDDI v3, no hay m\\u00e9todo de la API para la creaci\\u00f3n de un estilo de devoluci\\u00f3n de llamada de suscripci\\u00f3n, donde el usuario recibe un registro de servicios web que espera para las notificaciones. En una suscripci\\u00f3n de devoluci\\u00f3n de llamada, los que necesitan la informaci\\u00f3n se notificar\\u00e1 de inmediato. <br> <br> Registros basados \\u200b\\u200bjUDDI tener una extensi\\u00f3n de la especificaci\\u00f3n UDDIv3 que permite llamar de nuevo tipo de comunicaci\\u00f3n y por lo tanto mecanismo preferido.\n+pages.serviceeditor.title=Servicio Editor\n+errors.generic=Error\n+pages.businesseditor.businesslist=Servicios Empresariales\n+pages.businesseditor.businesslist2=se definen para este negocio.\n+items.service=Servicio\n+errors.notsignedin=O ha ocurrido un error, o no te has conectado pulg\n+pages.viewsubscriptions.listingheader=UDDI Suscripciones\n+pages.viewsubscriptions.nosubs=No hay suscripciones se definen actualmente.\n+errors.juddiapi.without.juddi=Usted no est\\u00e1 conectado a un registro jUDDI. P\\u00f3ngase en contacto con el administrador o consulte el archivo de configuraci\\u00f3n.\n+items.services.name.descriptions=Los servicios son identificadas por una o m\\u00e1s nombre. Varios nombres son \\u00fatiles para diferentes idiomas, nombres legales o abreviaturas.\n+items.services.description=servicios puede tener m\\u00e1s de una descripci\\u00f3n, tal como en un idioma diferente.\n+items.bindingtemplate.keyrefgrp=Enlace de grupos de plantillas de referencia con clave\n+items.bindingtemplate.keyrefcat=Encuadernaci\\u00f3n Categor\\u00edas de plantillas de referencia con clave\n+items.overviewurl=Documentos Informaci\\u00f3n\n+items.overviewurl.description=Por lo general son las URL a las p\\u00e1ginas web que describen detalles de este tModel y escenarios de uso.\n+items.tmodelinstance.description=Descripci\\u00f3n tModel Instancia\n+items.tmodelinstance.description2=informaciones sobre TModel instancia puede tener m\\u00e1s de una descripci\\u00f3n, tal como en un idioma diferente.\n+items.tmodelinstance.parameters=Par\\u00e1metros TModel Instancia\n+items.service.key=Servicio Clave\n+items.service.key.description=La clave del negocio es el identificador \\u00fanico para el negocio que este servicio pertenece. Si se especifica una clave de servicio, debe ser precedido por una partici\\u00f3n existente (generador de claves).\n+items.bindingtemplate.description=Un servicio en UDDI realmente define un tipo espec\\u00edfico de servicio, no necesariamente una implementaci\\u00f3n de un servicio. Plantillas de uni\\u00f3n definir espec\\u00edficamente una implementaci\\u00f3n de un servicio y normalmente incluye un punto de acceso que describe c\\u00f3mo utilizar el servicio. Cada servicio puede tener 0 o m\\u00e1s plantillas de uni\\u00f3n. Algunos registros imponer l\\u00edmites en el n\\u00famero de plantillas de uni\\u00f3n por servicio.\n+items.bindingtemplate.add=Agregar un Enlace de plantillas\n+items.bindingtemplate.key=Key Enlace de plantillas\n+items.bindingtemplate.description.add=A\\u00f1adir una descripci\\u00f3n de plantillas Binding - Plantillas de uni\\u00f3n pueden tener m\\u00e1s de una descripci\\u00f3n, por ejemplo, en un idioma diferente.\n+items.accesspoint=Punto de Acceso\n+items.accesspoint.description=UDDI permite una opci\\u00f3n de un redireccionamiento de alojamiento o un punto de acceso. Punto de Acceso es recomendable. El punto de acceso es generalmente una URL para el extremo de servicio.\n+items.accesspoint.type=Tipo de Punto de Acceso\n+items.accesspoint.value=Valor del Punto de Acceso\n+items.hostingredirector=Redireccionamiento Hosting\n+items.tmodelinstance.info=tModel informaci\\u00f3n de instancia\n+items.tmodelinstance.info.desc=un modelo de uni\\u00f3n puede disponer de informaci\\u00f3n adicional que se le atribuye el uso de la Instancia tModel.\n+items.overviewurl.add=Agregar un documento general\\n\n+items.overviewurl.description.add=Agregar un Documento Descripci\\u00f3n general\n+items.tmodelinstance.add=Agregar una instancia de tModel\n+items.tmodelinstance.description.add=Agregar una descripci\\u00f3n Instancia tModel\n+items.tmodel.key=tModel Clave\n+items.overviewdocument.description=Descripci\\u00f3n General del Documenton\n+navbar.help=Ayudar\n+pages.tmodeleditor.title=tModel Editor\n+pages.editor.tabnav.overview=Documentos Informaci\\u00f3n General\n+pages.editor.tabnav.overview.description=ads\n+items.tmodel.description=tModels puede tener m\\u00e1s de una descripci\\u00f3n, tal como en un idioma diferente.\n+items.tmodel.key.description=La clave tModel es el identificador \\u00fanico. Si se especifica un tModel, debe estar precedido de una partici\\u00f3n existente (generador de claves), la otra se genera para usted.\n+items.tmodel.name=Nombre - El nombre describe esta estructura tModel. Se trata de un campo obligatorio.\n+items.clicktoedit=Haga clic para editar\n+pleasewait=Por favor, espere\n+items.description.add=Agregar una descripci\\u00f3n\n+items.name.add=Agregar un Nombre\n+items.contact.primary=Contacto Primario\n+#suggestion\n+items.phone.types=(Extensi\\u00f3n, nacionales, internacionales, DSN)\n+items.sortcode=C\\u00f3digo de Clasificaci\\u00f3n\n+items.contact.type=Tipo de Contacto\n+items.contact.default=(T\\u00edtulo del trabajo, Papel)\n+items.addresstype.default=(headquarters. oficina de ventas, facturaci\\u00f3n)\n+items.welcome=Bienvenido\n+items.expires=Expira\n+items.actions=Acciones\n+actions.asxml=Ver como XML\n+items.name.description=Entidades UDDI pueden tener m\\u00e1s de un nombre, como abreviaturas o en otro idioma.\n+items.signatures.invalid=La firma es v\\u00e1lida! Raz\\u00f3n:\n+items.signatures.valid=La firma digital es v\\u00e1lida.\n+items.unknown=Error, no puede identificar el tipo de objeto que quer\\u00eda.\n+items.service.add=Agregar un Servicio\n+items.publisherassertion.add=Agregar una Relaci\\u00f3n de Negocios (aserci\\u00f3n Publisher)\n+actions.saved=Salvo!\n+items.details=Detalles\n+navbar.publisherassertions=Las Afirmaciones Editor\n+navbar.publisherassertions.tooltip=Permite configurar las relaciones entre empresas.\n+navbar.create.mybiz=Mis Empresas\n+navbar.create.mybiz.tooltip=Una lista de todos los negocios que se pueden alterar.\n+navbar.create.mybiz.content=Mis empresas contiene una lista de todos los elementos empresariales UDDI que usted tiene acceso. Esto normalmente significa que usted puede hacer cambios en \\u00e9l, sin embargo esto puede variar entre los proveedores.\n+actions.transfer.description=Traslade esta entidad a otro nodo UDDI o el editor.\n+actions.subscribe.description=Avisarme cuando esta entidad los cambios.\n+items.publisherassertions.from=Este Negocio\n+items.publisherassertions.to=Est\\u00e1 relacionado con los negocios\n+items.publisherassertions.relationship=Relaci\\u00f3n\n+items.status=Estado\n+actions.deleted=Suprimido\n+navbar.subscriptions.feed=Noticias Corriente\n+items.picker=Selector\n+navbar.subscriptions.feed.tooltip=Un nuevo avance basado en la configuraci\\u00f3n de la suscripci\\u00f3n.\n+items.tmodel.chooser=tModel Selector\n+actions.select=Seleccionar\n+actions.cancel=Cancelar\n+navbar.transfer=Transferencia de Custodia\n+navbar.transfer.tooltip=Transferencia de la propiedad a otra Editor\n+items.subscriptions.assertion=Informe sobre la situaci\\u00f3n de aserci\\u00f3n cambiado\n+items.subscriptions.bindings=Vinculaciones Cambiado\n+items.subscriptions.business=Las empresas Cambiado\n+items.subscriptions.assertion2=Relaciones comerciales (Aseveraciones Editorial)\n+items.subscriptions.services=Servicios Cambiado\n+items.subscriptions.servicelist=Lista de servicios\n+items.subscriptions.tmodels=tModels Cambiado\n+items.subscriptions.tmodels2=Listado tModel\n+actions.canceled=Cancelado\n+actions.success=\\u00c9xito!\n+items.transfertoken=Traslado Token\n+items.transferkeys=Claves para la transferencia (Bolsa de clave)\n+error.ohno=\\u00a1Ay no!\n+error.occurred=Por desgracia, se ha producido un error.\n+error.pleasereport=Por favor, haga el favor de informe al administrador jUDDI.\n+error.timeofevent=Hora en que ocurri\\u00f3 el evento\n+error.reportadmin=Si usted es el administrador, por favor revise los registros del servidor y reportar los resultados a la siguiente URL.\n+error.filereport=Presentar un informe de errores\n+navbar.help.about=Acerca de\n+navbar.help.about.tooltip=Acerca de este sitio\n+pages.about.content=Este sitio es parte de la <a href=\"http://juddi.apache.org\"> Apache jUDDI </ a> proyecto y proporciona funcionalidad para el usuario final\\n\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0 interactuar con una versi\\u00f3n 3 registro UDDI tal como se define por la norma OASIS se encuentra aqu\\u00ed: <un\\n\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0 <br>\\n\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0 Esta interfaz de usuario deber\\u00eda funcionar con cualquier aplicaci\\u00f3n UDDI v3, pero fue dise\\u00f1ado y probado con el servidor Apache jUDDI y se comunica a trav\\u00e9s de\\n\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0 transacciones de servicios Web.\\n\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0 <br>\\n\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0 Esta interfaz de usuario es de c\\u00f3digo abierto y utiliza una serie de otras bibliotecas y las capacidades que se enumeran a continuaci\\u00f3n de c\\u00f3digo abierto.\n+items.binding.chooser=Binding Selector\n+items.service.chooser=Servicio de Selector\n+items.business.chooser=Negocio Selector\n+items.assertion.chooser=Editorial Status Aserci\\u00f3n\n+items.subscription.CompletionStatus.STATUS_COMPLETE=Esto significa que existe una relaci\\u00f3n visible entre dos empresas.\n+items.subscription.CompletionStatus.STATUS_FROM_KEY_INCOMPLETE=Esto indica que un negocio se ha sostenido una relaci\\u00f3n con una de sus empresas, pero no ha correspondido a la relaci\\u00f3n.\n+items.subscription.CompletionStatus.STATUS_TO_KEY_INCOMPLETE=Esto indica que el propietario de la empresa ha afirmado una relaci\\u00f3n con otra empresa, pero no se ha correspondido.\n+items.subscription.CompletionStatus.STATUS_BOTH_INCOMPLETE=Esto indica que la afirmaci\\u00f3n editor incrustado en el Estado afirmaci\\u00f3n art\\u00edculo ha sido borrado de ambos extremos de la relaci\\u00f3n de negocios.\n+pages.subscription.content=UDDI tiene una caracter\\u00edstica que le permite ser alertado de cambios a cualquiera de las entradas espec\\u00edficas UDDI o para los resultados de b\\u00fasqueda. Esta p\\u00e1gina le ayudar\\u00e1 a configurar una suscripci\\u00f3n para satisfacer sus necesidades. Nota: s\\u00f3lo un tipo de filtro de suscripci\\u00f3n puede ser definido por suscripci\\u00f3n. Normalmente, los usuarios pueden hacer tantas suscripciones como quieren, sin embargo, puede ser efectivamente limitado por la aplicaci\\u00f3n de registro.\n+pages.subscription.step1=Paso 1 - \\u00bfQu\\u00e9 tipo de informaci\\u00f3n que desea recibir alertas sobre?\n+pages.subscription.step2=Paso 2 - \\u00bfA qu\\u00e9 elementos desea que las alertas en?\n+pages.subscription.step1.specific=Los cambios en un elemento espec\\u00edfico\n+pages.subscription.step1.search=Los cambios en los resultados de b\\u00fasqueda, tales como un nuevo elemento\n+items.publisherassertion.status=Editorial Status aserci\\u00f3n\n+actions.add=A\\u00f1adir\n+actions.remove=Eliminar\n+items.findqualifiers=Encontrar Calificadores\n+pages.subscription.step3=Paso 3 - \\u00bfC\\u00f3mo desea recibir las alertas?\n+pages.subscription.step3.direct=Recibir avisos directamente\n+pages.subscription.step3.direct.tooltip=O a trav\\u00e9s de una suscripci\\u00f3n de cliente API UDDI, correo electr\\u00f3nico o cualquier otro notificador\n+pages.subscription.step3.pickup=Yo recoger\\u00e9\n+pages.subscription.step3.pickup.tooltip=O a trav\\u00e9s de este sitio web o de su propio software que comprueba peri\\u00f3dicamente si hay actualizaciones\n+pages.subscription.step3.content=Para que un servidor UDDI para notificarle de cambios de forma as\\u00edncrona, primero hay que definir un negocio con una empresa, con una plantilla de enlace que dice UDDI donde enviar la notificaci\\u00f3n (valor del punto de acceso). Algunos servidores UDDI (como Apache jUDDI) requieren que usted agregue tambi\\u00e9n una instancia tModel definir el par\\u00e1metro de transporte, tales como\n+pages.subscription.step4=Paso 4 - Opciones\n+items.notificationinterval=Notificaci\\u00f3n Intervalo (hh: mm: ss)\n+items.expiration=Vencimiento\n+items.subscriptionbrief=Breve Suscripci\\u00f3n\n+items.maxrecords.callback=Registros m\\u00e1ximos por devoluci\\u00f3n de llamada\n+navbar.subscriptions.feed.content=El servicio de noticias que proporciona una lista de todo el contenido actualizado por la configuraci\\u00f3n de suscripci\\u00f3n\n+pages.transfer.content=UDDI soporta la transferencia de la propiedad de las empresas (y todos sus objetos secundarios, incluidos los servicios, las plantillas de uni\\u00f3n) y entidades tModel a otro editor. Editores representan una o m\\u00e1s conexiones o nombres de usuario. <br> Transferencias <Br> pueden ocurrir dentro de un nodo de registro UDDI (intra-nodo) y entre varios nodos de registros (entre nodos). Esta utilidad le ayudar\\u00e1 a configurar las transferencias intra-nodo \\u00fanico. No se conocen las implementaciones UDDI soportan transferencias entre nodos (API de replicaci\\u00f3n no se implementan. <br> El proceso es sencillo, seleccionar qu\\u00e9 entidades que desea transferir y haga clic en Aceptar. Una muestra se presentar\\u00e1 para que luego tenga que dar al otro editor. el otro editor debe entonces aceptar el token y transferir la propiedad a \\u00e9l. Finalmente, el token se destruye para evitar cualquier transferencia involuntaria. <br> transferencias pueden ser abortados (token invalide) antes de que el otro editor transfiere la propiedad de. Una vez que se ha trasladado y desea deshacer la transferencia, p\\u00f3ngase en contacto con el administrador del registro y el otro editor.\n+pages.transfer.createtoken=Crear un nuevo Token\n+pages.transfer.discardtoken=Descartar un token de transferencia (abortar la transferencia)\n+pages.transfer.accepttransfer=Aceptar una transferencia\n+actions.refresh=Refrescar\n+pages.transfer.gettoken=Obtener un token de transferencia\n+items.token=Token\n+actions.accept=Accept\n+pages.transfer.createtoken.content=Esta ficha le ayudar\\u00e1 a crear un token de transferencia. Una vez que haya creado, copiar todo el contenido de la ficha y d\\u00e1rselo a la persona que est\\u00e1 transfiriendo la propiedad a.\n+pages.transfer.discardtoken.content=Cometido un error? No hay problema. Introduzca el token a continuaci\\u00f3n junto con las claves para ser transferidos y se elimina del sistema, impedir cualquier transferencia de futuro. Debe coincidir exactamente. Nota: los campos requieren contenido XML.\n+pages.transfer.accepttransfer.content=Si otro editor UDDI le dio un token de transferencia y todos ustedes se comprometi\\u00f3 a transferir la propiedad de un negocio o tModel, se puede hacer aqu\\u00ed. Introduzca el token de transferencia. Debe coincidir exactamente.\n+actions.savethis=Copie y guarde esta informaci\\u00f3n a su ordenador. No hay manera de recuperar esta informaci\\u00f3n de nuevo!\n+navbar.help.source=C\\u00f3digo Fuente\n+actions.approve=Aprobar\n+navbar.create.serviceimport=Registro de Servicios de WSDL\n+navbar.create.serviceimport.tooltip=Basado en el UDDI TC, utilizando WSDL en un registro UDDI\n+warning.ssl=Atenci\\u00f3n, usted no est\\u00e1 usando SSL y su clave podr\\u00eda estar expuesto!\n+pages.home.title=Administraci\\u00f3n jUDDI\n+pages.home.config=Configurar jUDDI\n+pages.home.stats=Estado y estad\\u00edsticas\n+pages.home.stats.content=Descubra c\\u00f3mo ocupado jUDDI es.\n+pages.home.admin=Administraci\\u00f3n\n+pages.home.admin.content=Opciones de administraci\\u00f3n, tales como la supresi\\u00f3n de entidades.\n+items.statistics=Estad\\u00edstica\n+items.happyjuddi=jUDDI felices\n+pages.configure.info=Basta con hacer clic para editar cada campo, haga clic en Guardar cuando haya terminado. (No todos los campos se pueden modificar)\n+pages.configure.server=Server Config\n+pages.configure.admin=Consola de administraci\\u00f3n de configuraci\\u00f3n (este sitio web)\n+page.config.debug=Mostrar informaci\\u00f3n de depuraci\\u00f3n\n+pages.config.add=A\\u00f1adir un nuevo ajuste\n+pages.config.add.note=Nota: la clave debe empezar con el cliente, config.props o jUDDI.\n+pages.config.savefailed=Save Failed!\n+pages.admin.content=Esta p\\u00e1gina le permite acceder al Servicio Web jUDDI. Entre sus funciones se encuentran fuera del alcance de la especificaci\\u00f3n UDDI y proporcionan funciones administrativas b\\u00e1sicas para la gesti\\u00f3n de su nodo UDDI. <br> <b> Tendr\\u00e1 que estar conectado (arriba a la derecha) con el fin de hacer cualquier cosa. </ b> <br> Por favor, seleccione un elemento de la lista desplegable.\n+pages.admin.notes=* Para los art\\u00edculos que requieren la entrada XML, deje la autenticaci\\u00f3n de UDDI en blanco token. Se rellena autom\\u00e1ticamente.\n+actions.go=Ejecutar!\n+items.results=Resultados\n+items.enable=Habilitado\n+items.noinput=No requiere entrada.\n+items.noauthtoken=Deja authToken blanco\n+max.bindings.per.service=M\\u00e1ximos encuadernaci\\u00f3ns por servicio\n+max.services.per.business=M\\u00e1ximos servicios por empresa\n+max.business=M\\u00e1ximos Empresas\n+max.tmodel=M\\u00e1ximos tModels\n+pages.admin.max=Si el valor m\\u00e1ximo no est\\u00e1 definido, entonces el valor predeterminado es la configuraci\\u00f3n por defecto m\\u00e1ximas del servidor. Si el valor m\\u00e1ximo es -1, entonces el que no hay l\\u00edmites.\n+items.inquiry=Coroner\n+items.publish=Publicar\n+items.security=Seguridad\n+items.subscription=Suscripci\\u00f3n\n+items.subscription.list=Listener Suscripci\\u00f3n\n+items.custodytransfer=Transferencia de Custodia\n+items.replication=Replicaci\\u00f3n\n+items.transport=Transporte\n+items.clientname=Nombre del Cliente\n", "diff --git a/juddiv3-war/src/main/resources/org/apache/juddi/webconsole/resources/web.properties b/juddiv3-war/src/main/resources/org/apache/juddi/webconsole/resources/web.properties\ndeleted file mode 100644\nindex c27f21417..000000000\n--- a/juddiv3-war/src/main/resources/org/apache/juddi/webconsole/resources/web.properties\n+++ /dev/null\n@@ -1,368 +0,0 @@\n-# To change this template, choose Tools | Templates\n-# and open the template in the editor.\n-\n-language=en\n-direction=LTR\n-title=Apache jUDDI - Open Source UDDI Discovery Services\n-description=jUDDI is a free open source implementation of OASIS's UDDI specification. Think of it as a phone book for web services.\n-navbar.home=Home\n-\n-navbar.discover=Discover\n-navbar.businesses=Businesses\n-\n-navbar.businesses.tooltip=Browse for businesses\n-navbar.services=Services\n-\n-navbar.services.tooltip=Browse for Services\n-navbar.tmodels=tModels\n-\n-navbar.tmodels.tooltip=Browse for tModels\n-navbar.publishers=Publishers\n-\n-navbar.publishers.tooltip=Browse for Publishers\n-\n-navbar.search=Search\n-navbar.search.tooltip=Search\n-navbar.create=Create\n-navbar.create.business=Business\n-navbar.create.business.tooltip=Create a Business\n-navbar.create.service=Service\n-navbar.create.service.tooltip=Create a Service\n-navbar.create.tmodel=tModel\n-navbar.create.tmodel.tooltip=Create a tModel\n-navbar.create.tmodelkeygen.tooltip=Create a tModel Key Generator\n-navbar.create.tmodel=tModel\n-navbar.create.publisher=Publisher\n-navbar.create.publisher.tooltip=Create a Publisher\n-navbar.create.tmodelkeygen=tModel Partition (Key Generator)\n-\n-navbar.subscriptions=Subscriptions\n-navbar.subscriptions.view=View Subscriptions\n-navbar.subscriptions.create=Create Subscriptions\n-navbar.subscriptions.view.tooltip=View My Subscriptions\n-navbar.subscriptions.create.tooltip=Create a Subscription\n-\n-navbar.settings=Settings\n-navbar.settings.config=Configure\n-navbar.settings.config.tooltip=Configure this UDDI Browser\n-\n-navbar.help.userguide=User's Guide\n-navbar.help.devguide=Developer's Guide\n-navbar.help.api=API Documentation\n-navbar.help.wiki=jUDDI Wiki\n-navbar.help.bugreport=File a Bug Report\n-navbar.help.website=Official jUDDI Website\n-navbar.help.mailinglist=Mailing List Archive\n-\n-navbar.login.username=Username\n-navbar.login.password=Password\n-navbar.login.button=Login\n-navbar.login.logout=Click to logout\n-\n-index.juddi=jUDDI (pronounced \"Judy\") is an open source Java implementation of the Universal Description, Discovery, and Integration (UDDI v3) specification for (Web) Services. Think of UDDI as the yellow pages of the phone book for web services.\n-learnmore=Learn More\n-viewdetails=View Details\n-index.learn=Learn all about OASIS's UDDI Technical Specification\n-index.search=An advanced search capability that allows you search for specific criteria.\n-index.browse=Flip through the pages of UDDI. Whether you're just curious or you're looking for something specific and don't know what to search for, the browse feature is a good place to start.\n-index.browse.title=Browse\n-index.search.title=Search\n-index.learn.title=About UDDI\n-footer.apachecopyright=&copy; 2013 The Apache Software Foundation. All Rights Reserved.\n-modal.digitalsignaturewarning.title=Digital Signature Warning\n-modal.digitalsignaturewarning.body=This item is digitally signed. This means that when saving your changes, all existing signatures will become invalid and will automatically be excluded from the save process. \n-modal.close=Close\n-modal.savechanges=Save Changes\n-totals.records=Total records\n-totals.recordsreturned=Records Returned\n-totals.offset=Offset\n-items.lang=Language\n-items.loading=Loading\n-pages.businesseditor.title=Business Editor\n-pages.businesskey=Business Key\n-pages.businesskey.description=The Business Key is the unique identifier for this business and exists within this registry.\n-pages.editor.tabnav.general=General\n-pages.editor.tabnav.discovery=Discovery\n-pages.editor.tabnav.contacts=Contacts\n-pages.editor.tabnav.categories=Categories\n-pages.editor.tabnav.identifiers=Identifiers\n-pages.editor.tabnav.services=Services\n-pages.editor.tabnav.signatures=Signatures\n-pages.editor.tabnav.opinfo=Operational Info\n-pages.editor.tabnav.relatedbusinesses=Related Businesses\n-items.name=Name\n-items.business.name.description=Businesses are identified by one or more name. Multiple names are useful for different languages, legal names, or abbreviations.\n-items.value=Value\n-items.description=Description\n-items.businesses.description=businesses can have more than one description, such as in a different language\n-items.discoveryurl=Discovery URLs\n-items.discoveryurl.description=are typically a link to a simple web page with additional information on it, such as a listing a services. Two reserved values are specified in the specification, 'homepage' and 'businessEntity'.\n-items.type=Type\n-items.contacts=Contacts\n-items.contacts.description=Each business typically has several points of contact for a person or a job role within the business so that someone who finds the information can make human contact for any purpose. Examples for Type: \"technical questions\", \"technical contact\", \"establish account\", \"sales contact\".\n-items.email=Email\n-items.phone=Phone\n-items.address=Address\n-items.addressline.add=Add an addline (at least one is required).\n-items.addressvalue=Address Value\n-items.keyname.optional=Key Name (optional)\n-items.keyvalue.optional=Key Value (optional)\n-items.categories.description=UDDI uses a taxonomy system to categorize businesses and their services. These categories are defined as UDDI tModels and are defined by the administrator(s) of this UDDI node. These categories are appended to business registrations either by adding one or more \"Key References\" or by adding one or more \"Key Reference Groups\", which in turn can be a zero or more of Key References as part of it.\n-items.keyrefcats=Keyed Reference Categories\n-items.keyrefcat.add=Add Key Reference\n-items.keyrefgroup=Keyed Reference Groups\n-items.keyrefgroup.add=Add Key Reference Group\n-items.key=Key\n-items.identifiers=Identifiers\n-items.identifiers.description=optionally, you can attach identifiers that uniquely identify this item from other systems, such as a tax ID or a <a href=\"http://www.whitehouse.gov/sites/default/files/omb/grants/duns_num_guide.pdf\">DUNS Number</a>.\n-items.signed.not=This item is not digitally signed.\n-item.signed=This item is digitally signed. Signature Count: \n-items.signed.viewcert=View Certificate\n-actions.save=Save\n-actions.delete=Delete\n-actions.sign=Digitally Sign\n-actions.transfer=Transfer Ownership\n-actions.subscribe=Subscribe\n-errors.unknownentity=Error, Unrecongized entity type.\n-errors.nodatareturned=No data returned.\n-items.business=Business\n-error.generic=Error \n-errors.tmodel.prefix=A tModel partition key generator must have a name that starts with uddi: \n-errors.tmodel.postfix=A tModel partition key generator must have a name that ends with :keyGenerator\n-messages.success=Success\n-errors.norecordsfound=No records were found.\n-#just a prefix\n-errors.uddi=UDDI Error \n-errors.nocertavaiable=Error, no certificate was available.\n-items.nodeid=Node ID\n-items.authorizedname=Authorized Name\n-items.created=Created\n-items.modified=Modified\n-items.modifiedwithchildren=Modified include children\n-items.signed=This item is digitally signed. Count:\n-errors.nobusinessid=No business ID was specified.\n-errors.noservicesdefined=No services are defined.\n-actions.save.bindingtemplate=Binding Template saved successfully!\n-actions.save.service=Service saved successfully!\n-errors.noinput.businesskey=Error, no input was provided for the business key.\n-items.pubisher.name=Publisher Name\n-items.publisher.authname=Authorized Name\n-items.publisher.admin=Administrator\n-errors.noinput=No input was provided.\n-actions.save.tmodel=tModel saved successfully!\n-actions.delete.tmodel=tModel deleted successfully.\n-actions.delete.business=Business deleted successfully.\n-actions.delete.service=Service deleted successfully.\n-search.wrylf=What are you looking for?\n-items.tmodel=tModel\n-items.bindingtemplate=Binding Template\n-search.criteria=Search Criteria\n-search.criteria.byname=By Name\n-search.criteria.bycategory=By Category\n-search.criteria.bykey=By Unique Identifier\n-search.criteria.bytmodel=By tModel\n-search.tip=*Tip: use '%' for any number of wild card characters and '_' for a single wild card character.\n-search.results=Search Results\n-search.searchfirst=Try searching first\n-items.publisher=Publisher\n-items.dsigs=Digital Signatures\n-items.service.browser=Service Browser\n-items.tmodel.browser=tModel Browser\n-items.dsigs.description=This page will enable you to digitally sign a UDDI entity using a Java Applet and an X509 Digital Certificate. Windows and MacOS are supported.\n-items.settings.description=Administrators can use this page to change the way this UDDI browser is configured, such as endpoint URLs, SSL stores, authentication mechanisms and more.\n-pages.tmodelpart.title=tModel Key Generators (Partitions)\n-pages.tmodelpart.content=TModel Key Generators are a special kind of tModel that enables you to define new tModels with any arbitrary tModel prefix that you want. For example, if you wanted a tModel defined as \"uddi:www.mycompany.com:ServiceAuthenticationMethod\", you would first have to create a tModel key generator with the value of \"uddi:www.mycompany.com:keyGenerator\". This is part of the UDDI specification and acts as a governance mechanism. You can also create a tModel Key Generator by using the Creat tModel menu option and by adding the appropriate settings.\n-pages.tmodelpart.juddinote=For jUDDI implementations of UDDI, the \"root\" account cannot be used to create a keyGenerator.\n-pages.tmodelpart.key=The UDDI tModel key\n-pages.thmodepart.name=A name describing the key\n-pages.viewsubscriptions.content=UDDI offers the ability for users to subscribe for notification to changes in most entities within a UDDI registry. However, the notification part is a bit strange. Users of strict UDDIv3 registries have only one option, periodically poll the UDDI registry for changes via the Subscription API. Although there's data types defined within the UDDI v3 specification, there's no API method for setting up a callback style of subscription, where the registry user hosts a web service that waits for notifications. In a callback subscription, those that need the information are notified immediately.<br><br>jUDDI based registries have an extension to the UDDIv3 specification that enables call back type of communication and is thus preferred mechanism.\n-pages.serviceeditor.title=Service Editor\n-errors.generic=Error\n-pages.businesseditor.businesslist=Business Services\n-pages.businesseditor.businesslist2=are defined for this business.\n-items.service=Service\n-errors.notsignedin=Either an error occured, or you're not signed in.\n-pages.viewsubscriptions.listingheader=UDDI Subscriptions\n-pages.viewsubscriptions.nosubs=No subscriptions are currently defined.\n-errors.juddiapi.without.juddi=You're not connected to a jUDDI registry. Contact the administrator or check the configuration file.\n-items.services.name.descriptions=Services are identified by one or more name. Multiple names are useful for different languages, legal names, or abbreviations.\n-items.services.description=services can have more than one description, such as in a different language.\n-items.bindingtemplate.keyrefgrp=Binding Template Keyed Reference Groups\n-items.bindingtemplate.keyrefcat=Binding Template Keyed Reference Categories\n-items.overviewurl=Overview Documents\n-items.overviewurl.description=These are typically URLs to web pages that describe this tModel's details and usage scenarios.\n-items.tmodelinstance.description=tModel Instance Description\n-items.tmodelinstance.description2=tModel instance infos can have more than one description, such as in a different language.\n-items.tmodelinstance.parameters=tModel Instance Parameters\n-items.service.key=Service Key\n-items.service.key.description=The Business Key is the unique identifier for the business that this service belongs to. If you specify a service key, it must be prefixed with an existing partition (key generator).\n-items.bindingtemplate.description=A service in UDDI really defines a specific type of service, not necessarily an implementation of a service. Binding templates define specifically an implementation of a service and normally includes an access point describing how to use the service. Each service may have 0 or more binding templates. Some registries impose limits on the number of binding templates per service.\n-items.bindingtemplate.add=Add a Binding Template\n-items.bindingtemplate.key=Binding Template Key\n-items.bindingtemplate.description.add=Add a Binding Template Description - binding templates can have more than one description, such as in a different language.\n-items.accesspoint=Access Point\n-items.accesspoint.description=UDDI allows for a choice of either a Hosting Redirector OR an Access Point. Access Point is recommend. The access point is usually a URL for the service endpoint.\n-items.accesspoint.type=Access Point Type\n-items.accesspoint.value=Access Point Value\n-items.hostingredirector=Hosting Redirector\n-items.tmodelinstance.info=tModel Instance Information\n-items.tmodelinstance.info.desc=a binding template can have additional information attached to it using the tModel Instance.\n-items.overviewurl.add=Add an Overview Document\n-items.overviewurl.description.add=Add an Overview Document Description\n-items.tmodelinstance.add=Add a tModel Instance\n-items.tmodelinstance.description.add=Add a tModel Instance Description\n-items.tmodel.key=tModel Key\n-items.overviewdocument.description=Overview Document Descriptions\n-navbar.help=Help\n-pages.tmodeleditor.title=tModel Editor\n-pages.editor.tabnav.overview=Overview Documents\n-pages.editor.tabnav.overview.description=These are typically URLs to web pages that describe this tModel's details and usage scenarios.\n-items.tmodel.description=tModels can have more than one description, such as in a different language.\n-items.tmodel.key.description=\\ The tModel Key is the unique identifier. If you specify a tModel, it must be prefixed with an existing partition (key generator), other one is generated for you.\n-items.tmodel.name=Name - The name describes this tModel. It is a required field.\n-items.clicktoedit=Click to edit\n-pleasewait=Please wait\n-items.description.add=Add a Description\n-items.name.add=Add a Name\n-items.contact.primary=Primary Contact\n-#suggestion\n-items.phone.types=(Extension, Domestic, International, DSN)\n-items.sortcode=Sort Code\n-items.contact.type=Contact Type\n-items.contact.default=(Job Title, Role)\n-items.addresstype.default=(headquarters. sales office, billing)\n-items.welcome=Welcome\n-items.expires=Expires\n-items.actions=Actions\n-actions.asxml=View as XML\n-items.name.description=UDDI entities can have more than one name, such as abbreviations or in another language.\n-items.signatures.invalid=Signature is invalid! Reason: \n-items.signatures.valid=Digital Signature is valid.\n-items.unknown=Error, unable to identify which type of object you wanted.\n-items.service.add=Add a Service\n-items.publisherassertion.add=Add a Business Relationship (Publisher Assertion)\n-actions.saved=Saved!\n-items.details=Details\n-navbar.publisherassertions=Publisher Assertions\n-navbar.publisherassertions.tooltip=Allows you to configure relationships between businesses.\n-navbar.create.mybiz=My Businesses\n-navbar.create.mybiz.tooltip=A list of all businesses that you can alter.\n-navbar.create.mybiz.content=My Businesses contains a list of all the UDDI business elements that you have access to. This typically means that you can make changes to it, however this may vary between vendors.\n-actions.transfer.description=Transfer this entity to another UDDI node or publisher.\n-actions.subscribe.description=Alert me when this entity changes.\n-items.publisherassertions.from=This Business\n-items.publisherassertions.to=Is related to business\n-items.publisherassertions.relationship=Relationship\n-items.status=Status\n-actions.deleted=Deleted\n-navbar.subscriptions.feed=News Feed\n-items.picker=Picker\n-navbar.subscriptions.feed.tooltip=A new feed based on your subscription settings.\n-items.tmodel.chooser=tModel Chooser\n-actions.select=Select\n-actions.cancel=Cancel\n-navbar.transfer=Transfer Custody\n-navbar.transfer.tooltip=Transfer Ownership to another Publisher\n-items.subscriptions.assertion=Assertion Status Report Changed\n-items.subscriptions.bindings=Bindings Changed\n-items.subscriptions.business=Businesses Changed\n-items.subscriptions.assertion2=Business Relationships (Publisher Assertions)\n-items.subscriptions.services=Services Changed\n-items.subscriptions.servicelist=Service Listing\n-items.subscriptions.tmodels=tModels Changed\n-items.subscriptions.tmodels2=tModel Listing\n-actions.canceled=Canceled\n-actions.success=Success!\n-items.transfertoken=Transfer Token\n-items.transferkeys=Keys to Transfer (KeyBag)\n-error.ohno=Oh no!\n-error.occurred=Unfortunately, an error occurred. \n-error.pleasereport=Please do us a favor and report to your jUDDI administrator.\n-error.timeofevent=Time the event occurred\n-error.reportadmin=If you are the administrator, please review the server logs and report the findings to the following URL.\n-error.filereport=File a Bug Report\n-navbar.help.about=About\n-navbar.help.about.tooltip=About this site\n-pages.about.content=This website is part of the <a href=\"http://juddi.apache.org\">Apache jUDDI</a> project and provides end user functionality for\\n            interacting with a UDDI version 3 registry as defined by the OASIS standard located here: <a href=\"http://uddi.org/pubs/uddi-v3.0.2-20041019.htm\">http://uddi.org/pubs/uddi-v3.0.2-20041019.htm</a>.\\n            <br><br>\\n            This user interface should work with any UDDI v3 implementation but was designed and tested with the Apache jUDDI server and communicates via \\n            web service transactions.\\n            <br><br>\\n            This user interface is open source and uses a number of other open source libraries and capabilities which are listed below.\n-items.binding.chooser=Binding Chooser\n-items.service.chooser=Service Chooser\n-items.business.chooser=Business Chooser\n-items.assertion.chooser=Publisher Assertion Status\n-items.subscription.CompletionStatus.STATUS_COMPLETE=This means that there is a visible relationship between two businesses.\n-items.subscription.CompletionStatus.STATUS_FROM_KEY_INCOMPLETE=This indicates that a business has has asserted a relationship with one of your businesses, but you have not reciprocated the relationship.\n-items.subscription.CompletionStatus.STATUS_TO_KEY_INCOMPLETE=This indicates that the owner of the business has asserted a relationship with another business, but it has not be reciprocated.\n-items.subscription.CompletionStatus.STATUS_BOTH_INCOMPLETE=This indicates that the publisher assertion embedded in the assertion Status Item has been deleted from both ends of the business relationship.\n-pages.subscription.content=UDDI has a feature that allows you to be alerted of updates to either specific UDDI entries or to search results. This page will help you setup a subscription to meet your needs. Note: only one type of subscription filter can be defined per subscription. Normally, users can make as many subscriptions as they want, however it may be effectively limited by the registry implementation.\n-pages.subscription.step1=Step 1 - What do you type of information to you want alerts on?\n-pages.subscription.step2=Step 2 - Which items do you want alerts on?\n-pages.subscription.step1.specific=Changes to a specific item\n-pages.subscription.step1.search=Changes to search results, such as a new item\n-items.publisherassertion.status=Publisher Assertion Status\n-actions.add=Add\n-actions.remove=Remove\n-items.findqualifiers=Find Qualifiers\n-pages.subscription.step3=Step 3 - How do want to receive the alerts?\n-pages.subscription.step3.direct=Send me alerts directly\n-pages.subscription.step3.direct.tooltip=Either via a UDDI Subscription Client API, Email or some other notifier\n-pages.subscription.step3.pickup=I'll pick them up\n-pages.subscription.step3.pickup.tooltip=Either via this website or from your own software that periodically checks for updates\n-pages.subscription.step3.content=In order for a UDDI server to notify you of updates asynchronously, you first have to define a business, with a service, with a binding template that tells UDDI where to send the notification (Access Point value). Some UDDI servers (such as Apache jUDDI) require you to also add a tModel Instance defining the transport parameter, such as \n-pages.subscription.step4=Step 4 - Options\n-items.notificationinterval=Notification Interval (hh:mm:ss)\n-items.expiration=Expiration\n-items.subscriptionbrief=Brief Subscription\n-items.maxrecords.callback=Max records per callback\n-navbar.subscriptions.feed.content=The news feed provides you a list of all updated content per your subscription settings\n-pages.transfer.content=\\ UDDI supports the transfer the ownership of Businesses (and all their child objects including services, binding templates) and tModel entities to another publisher. Publishers represent one or more logins or usernames.<br><Br>Transfers can occur within a UDDI registry node (intra-node) and between multiple registries nodes (inter-node). This utility will help you setup intra-node transfers only. No known UDDI implementations support inter-node transfers (replication API's are not implemented.<br><br>The process is straightforward, select what entities you want to transfer, then click OK. A token will be presented to you which then need to give to the other publisher. The other publisher then needs to accept the token and transfer the ownership to the publisher. Finally, the token is then destroyed to prevent any inadvertent transfers.<br>Transfers can be aborted (token invalidated) before the other publisher transfers the ownership over. Once it's been transfered and you want to undo the transfer, contact the registry administrator and the other publisher.\n-pages.transfer.createtoken=Create a new Token\n-pages.transfer.discardtoken=Discard a transfer token (abort the transfer)\n-pages.transfer.accepttransfer=Accept a Transfer\n-actions.refresh=Refresh\n-pages.transfer.gettoken=Get a Transfer Token\n-items.token=Token\n-actions.accept=Accept\n-pages.transfer.createtoken.content=This tab will help you create a transfer token. Once you have created it, copy the entire contents of the token and give it to the person you're transfering ownership to.\n-pages.transfer.discardtoken.content=Made a mistake? No problem. Enter the token below along with the keys to be transfered and it will be removed from the system, preventing any future transfer. It must match exactly. Note: both fields require XML content.\n-pages.transfer.accepttransfer.content=If another UDDI publisher gave you a transfer token and you all agreed to transfer ownership of a business or tModel, it can be done here. Enter the transfer token. It must match exactly.\n-actions.savethis=Copy and save this information to your computer. There's no way to retrieve this information again! \n-navbar.help.source=Source Code\n-actions.approve=Approve\n-navbar.create.serviceimport=Register Services from WSDL\n-navbar.create.serviceimport.tooltip=Based on the UDDI TC, Using WSDL in a UDDI Registry\n-warning.ssl=Warning, you're not using SSL and your password could be exposed!\n-pages.home.title=jUDDI Administration\n-pages.home.config=Configure jUDDI\n-pages.home.stats=Status and Statistics\n-pages.home.stats.content=Find out how busy jUDDI is.\n-pages.home.admin=Administration\n-pages.home.admin.content=Administration options, such as deleting entities.\n-items.statistics=Statistics\n-items.happyjuddi=Happy jUDDI\n-pages.configure.info=Just click to edit each field, then click save when you are done. (Not all fields can be modified)\n-pages.configure.server=Server Config\n-pages.configure.admin=Admin Console Config (this web site)\n-page.config.debug=Show Debug Information\n-pages.config.add=Add a new setting\n-pages.config.add.note=Note: the key must start with either client., config.props, or juddi.\n-pages.config.savefailed=Save Failed!\n-pages.admin.content=This page lets you access the jUDDI Web Service. Its functions are outside the scope of the UDDI specification and provide basic administrative functions for managing your UDDI node. <br><br><b>You'll need to be logged (top right) in order to do anything.</b><br> Please select an item from the drop down menu.\n-pages.admin.notes=* For items that require XML input, leave the UDDI authentication token blank. It will be populated automatically.\n-actions.go=Go!\n-items.results=Results\n-items.enable=Enabled\n-items.noinput=No input required.\n-items.noauthtoken=Leave authToken blank\n-max.bindings.per.service=Maximum Bindings per Service\n-max.services.per.business=Maximum Services per Business\n-max.business=Maximum Businesses\n-max.tmodel=Maximum tModels\n-pages.admin.max=If the maximum value is not defined, then it defaults to the server's default maximum settings. If the maximum value is -1, then the there are no limits.\n-items.inquiry=Inquiry\n-items.publish=Publish\n-items.security=Security\n-items.subscription=Subscription\n-items.subscription.list=Subscription Listener\n-items.custodytransfer=Custody Transfer\n-items.replication=Replication\n-items.transport=Transport\n-items.clientname=Client Name\n", "diff --git a/juddiv3-war/src/main/resources/org/apache/juddi/webconsole/resources/web_es.properties b/juddiv3-war/src/main/resources/org/apache/juddi/webconsole/resources/web_es.properties\ndeleted file mode 100644\nindex 8306016f2..000000000\n--- a/juddiv3-war/src/main/resources/org/apache/juddi/webconsole/resources/web_es.properties\n+++ /dev/null\n@@ -1,369 +0,0 @@\n-# To change this template, choose Tools | Templates\n-# and open the template in the editor.\n-\n-language=es\n-direction=LTR\n-title=Apache jUDDI - de C\\u00f3digo Abierto UDDI Descubrimiento de Servicios\n-description=jUDDI es una implementaci\\u00f3n de c\\u00f3digo abierto de la especificaci\\u00f3n OASIS UDDI. Piense en ello como una gu\\u00eda telef\\u00f3nica para servicios web.\n-navbar.home=Casa\n-\n-navbar.discover=Descubrir\n-navbar.businesses=Negocios\n-\n-navbar.businesses.tooltip=Busque Negocios\n-navbar.services=Servicios\n-\n-navbar.services.tooltip=Busque Servicios\n-navbar.tmodels=tModels\n-\n-navbar.tmodels.tooltip=Busque tModels\n-navbar.publishers=Editores\n-\n-navbar.publishers.tooltip=Busque Editores\n-\n-navbar.search=Buscar\n-navbar.search.tooltip=Buscar\n-navbar.create=Crear\n-navbar.create.business=Negocios\n-navbar.create.business.tooltip=Crear un Negocio\n-navbar.create.service=Servicios\n-navbar.create.service.tooltip=Crear un Servicio\n-navbar.create.tmodel=tModel\n-navbar.create.tmodel.tooltip=Crear un tModel\n-navbar.create.tmodelkeygen.tooltip=Crear un tModel Generador de Claves\n-# To change this template, choose Tools | Templates\n-# and open the template in the editor.\n-navbar.create.tmodel=tModel\n-navbar.create.publisher=Editor\n-navbar.create.publisher.tooltip=Crear un  Editor\n-navbar.create.tmodelkeygen=tModel Partition (Key Generator)\n-\n-navbar.subscriptions=Suscripciones\n-navbar.subscriptions.view=Ver Suscripciones\n-navbar.subscriptions.create=Crear Suscripciones\n-navbar.subscriptions.view.tooltip=Ver Mis Suscripciones\n-navbar.subscriptions.create.tooltip=Crear una suscripci\\u00f3n\n-\n-navbar.settings=Configuraci\\u00f3n\n-navbar.settings.config=Configurar\n-navbar.settings.config.tooltip=Configure este Navegador UDDI\n-\n-navbar.help.userguide=Gu\\u00eda de usuarios\n-navbar.help.devguide=Gu\\u00eda del desarrollador\n-navbar.help.api=API Documentaci\\u00f3n\n-navbar.help.wiki=jUDDI Wiki\n-navbar.help.bugreport=Presentar un informe de errores\n-navbar.help.website=Sitio web oficial jUDDI\n-navbar.help.mailinglist=Mailing List Archive\n-\n-navbar.login.username=Nombre de usuario\n-navbar.login.password=Contrase\\u00f1a\n-navbar.login.button=Login\n-navbar.login.logout=Pulse para salir\n-\n-index.juddi=jUDDI (pronunciado \"Judy\") es una implementaci\\u00f3n de c\\u00f3digo abierto de Java de la Universal Description, Discovery and Integration (UDDI v3) especificaci\\u00f3n (Web) Servicios. Piense en UDDI como las p\\u00e1ginas amarillas de la gu\\u00eda telef\\u00f3nica para los servicios web.\n-learnmore=Aprender M\\u00e1s\n-viewdetails=Ver los Detalles\n-index.learn=Aprenda todo acerca de UDDI Especificaci\\u00f3n T\\u00e9cnica de OASIS\n-index.search=Una funci\\u00f3n de b\\u00fasqueda avanzada que le permite buscar un criterio espec\\u00edfico.\n-index.browse=Flip a trav\\u00e9s de las p\\u00e1ginas de UDDI. Si usted es curiosidad o que est\\u00e1 buscando algo espec\\u00edfico y no saben qu\\u00e9 buscar, la funci\\u00f3n de b\\u00fasqueda es un buen lugar para comenzar.\n-index.browse.title=Busque\n-index.search.title=Buscar\n-index.learn.title=Acerca de UDDI\n-footer.apachecopyright=&copy; 2013 La Fundaci\\u00f3n de Software Apache. Todos los Derechos Reservados.\n-modal.digitalsignaturewarning.title=Advertencia de firma digital\n-modal.digitalsignaturewarning.body=Este art\\u00edculo est\\u00e1 firmado digitalmente. Esto significa que al guardar los cambios, todas las firmas existentes dejar\\u00e1n de ser v\\u00e1lidos y ser\\u00e1n autom\\u00e1ticamente excluidos del proceso de guardado.\n-modal.close=Cerrar\n-modal.savechanges=Guardar cambios\n-totals.records=Total de Registros\n-totals.recordsreturned=Registros Devueltos\n-totals.offset=Offset\n-items.lang=Idioma\n-items.loading=Carga\n-pages.businesseditor.title=Empresas Editor\n-pages.businesskey=Business Key\n-pages.businesskey.description=La clave del negocio es el identificador \\u00fanico para este negocio y existe dentro de este registro.\n-pages.editor.tabnav.general=General\n-pages.editor.tabnav.discovery=Descubrimiento\n-pages.editor.tabnav.contacts=Contactos\n-pages.editor.tabnav.categories=Categor\\u00edas\n-pages.editor.tabnav.identifiers=Identificadores\n-pages.editor.tabnav.services=Servicios\n-pages.editor.tabnav.signatures=Firmas\n-pages.editor.tabnav.opinfo=Informaci\\u00f3n sobre el Funcionamiento\n-pages.editor.tabnav.relatedbusinesses=Los negocios relacionados\n-items.name=Nombre\n-items.business.name.description=Las empresas est\\u00e1n identificados por una o m\\u00e1s nombre. Varios nombres son \\u00fatiles para diferentes idiomas, nombres legales o abreviaturas.\n-items.value=Valor\n-items.description=Descripci\\u00f3n\n-items.businesses.description=negocios pueden tener m\\u00e1s de una descripci\\u00f3n, tal como en un idioma diferente\n-items.discoveryurl=Descubrimiento URLs\n-items.discoveryurl.description=son t\\u00edpicamente un enlace a una p\\u00e1gina web simple con informaci\\u00f3n adicional sobre \\u00e9l, tal como un listado a los servicios. Dos valores reservados se especifican en la especificaci\\u00f3n, 'homepage' y \"businessEntity '.\n-items.type=Tipo\n-items.contacts=Contactos\n-items.contacts.description=Cada negocio tiene t\\u00edpicamente varios puntos de contacto de una persona o de un puesto de trabajo dentro de la empresa para que alguien que encuentra la informaci\\u00f3n puede hacer que el contacto humano con cualquier prop\\u00f3sito. Ejemplos de tipo: \"cuestiones t\\u00e9cnicas\", \"contacto t\\u00e9cnico\", \"establecer la cuenta\", \"contacto de ventas\".\n-items.email=Email\n-items.phone=Tel\\u00e9fono\n-items.address=Direcci\\u00f3n\n-items.addressline.add=Agregar una l\\u00ednea de direcci\\u00f3n (al menos uno es necesario).\n-items.addressvalue=Direcci\\u00f3n del Valor\n-items.keyname.optional=Nombre de clave (opcional)\n-items.keyvalue.optional=Valor de clave (opcional)\n-items.categories.description=UDDI utiliza un sistema de taxonom\\u00eda para categorizar a las empresas y sus servicios. Estas categor\\u00edas son definidas como estructuras tModel UDDI y est\\u00e1n definidos por el administrador (s) de este nodo UDDI. Estas categor\\u00edas se a\\u00f1aden a los registros empresariales mediante la adici\\u00f3n de uno o m\\u00e1s \"Referencias clave\" o mediante la adici\\u00f3n de uno o m\\u00e1s \"grupos de referencia de teclas\", que a su vez puede ser un cero o m\\u00e1s de las referencias clave en el contexto de la misma.\n-items.keyrefcats=Categor\\u00edas con clave de referencia\n-items.keyrefcat.add=Agregar referencia clave\n-items.keyrefgroup=Grupos con clave de referencia\n-items.keyrefgroup.add=Agregar grupo de referencia clave\n-items.key=Clave\n-items.identifiers=Identificadores\n-items.identifiers.description=opcionalmente, puede asociar los identificadores que identifican este tema a partir de otros sistemas, como por ejemplo un n\\u00famero de identificaci\\u00f3n fiscal o un <a href = http://www.whitehouse.gov/sites/default/files/omb/grants/duns_num_guide.pdf \"\"> N\\u00famero DUNS </ a>.\n-items.signed.not=Este art\\u00edculo no est\\u00e1 firmado digitalmente.\n-item.signed=Este art\\u00edculo est\\u00e1 firmado digitalmente. Firma de visitas:\n-items.signed.viewcert=Ver certificado\n-actions.save=Guardar\n-actions.delete=Borrar\n-actions.sign=Firmar Digitalmente\n-actions.transfer=Transferencia de la propiedad\n-actions.subscribe=Suscribir\n-errors.unknownentity=Error, Tipo de entidad Unrecongized.\n-errors.nodatareturned=No se obtuvieron datos.\n-items.business=Negocios\n-error.generic=Error\n-errors.tmodel.prefix=Una partici\\u00f3n tModel generador de claves debe tener un nombre que comienza con uddi:\n-errors.tmodel.postfix=A tModel partition key generator must have a name that ends with :keyGenerator\n-messages.success=\\u00e9xito\n-errors.norecordsfound=No se encontraron registros..\n-errors.uddi=UDDI Error \n-errors.nocertavaiable=Error, no se dispone de certificado.\n-items.nodeid=Node ID\n-items.authorizedname=Nombre autorizado\n-items.created=Creado\n-items.modified=Modificado\n-items.modifiedwithchildren=Modificado incluir a los ni\\u00f1os\n-items.signed=Este art\\u00edculo est\\u00e1 firmado digitalmente. Count:\n-errors.nobusinessid=No se ha especificado ID de empresa\n-errors.noservicesdefined=No hay servicios est\\u00e1n definidos.\n-actions.save.bindingtemplate=Enlace de plantillas guardado correctamente!\n-actions.save.service=Servicio guardado correctamente!\n-errors.noinput.businesskey=Error, no se facilit\\u00f3 la entrada de la clave de negocio.\n-items.pubisher.name=Nombre del editor\n-items.publisher.authname=Nombre Autorizado\n-items.publisher.admin=Administrador\n-errors.noinput=Sin entrada fue proporcionada.\n-actions.save.tmodel=tModel guardado correctamente!\n-actions.delete.tmodel=tModel eliminado correctamente.\n-actions.delete.business=Negocios eliminado correctamente.\n-actions.delete.service=Servicio eliminado correctamente.\n-search.wrylf=\\u00bfQu\\u00e9 est\\u00e1s buscando?\n-items.tmodel=tModel\n-items.bindingtemplate=Enlace de Plantillas\n-search.criteria=Criterios de B\\u00fasqueda\n-search.criteria.byname=Por Nombre\n-search.criteria.bycategory=Por Categor\\u00eda\n-search.criteria.bykey=Por Unique Identifier\n-search.criteria.bytmodel=Por tModel\n-search.tip=* Consejo: '%' uso para cualquier n\\u00famero de caracteres comod\\u00edn y '_' para un car\\u00e1cter comod\\u00edn \\u00fanico.\n-search.results=Resultados de la b\\u00fasqueda\n-search.searchfirst=Intenta buscar primero\n-items.publisher=Editor\n-items.dsigs=Firmas Digitales\n-items.service.browser=Servicio Explorar\n-items.tmodel.browser=tModel Explorar\n-items.dsigs.description=Esta p\\u00e1gina le permitir\\u00e1 firmar digitalmente una entidad UDDI mediante un applet de Java y un certificado X509 Digital. Windows y MacOS son compatibles.\n-items.settings.description=Los administradores pueden utilizar esta p\\u00e1gina para cambiar la forma en que se configura este navegador UDDI, como direcciones URL de punto final, tiendas de SSL, los mecanismos de autenticaci\\u00f3n y m\\u00e1s.\n-pages.tmodelpart.title=tModel clave Generadores (particiones)\n-pages.tmodelpart.content=Generadores TModel clave son un tipo especial de tModel que permite definir nuevas estructuras tModel con cualquier prefijo arbitrario tModel que desea. Por ejemplo, si usted quiere un tModel define como \"uddi: www.mycompany.com:ServiceAuthenticationMethod\", primero tendr\\u00eda que crear un generador de claves tModel con el valor de \"uddi: www.mycompany.com:keyGenerator\". Esto es parte de la especificaci\\u00f3n UDDI y act\\u00faa como un mecanismo de gobernanza. Tambi\\u00e9n puede crear un generador de claves tModel mediante la opci\\u00f3n de men\\u00fa tModel Creat y a\\u00f1adiendo los valores adecuados.\n-pages.tmodelpart.juddinote=Para implementaciones jUDDI de UDDI, la cuenta \"root\" no se puede utilizar para crear un keygenerator.\n-pages.tmodelpart.key=El tModel UDDI clave\n-pages.thmodepart.name=Un nombre de describir la tecla\n-pages.viewsubscriptions.content=UDDI ofrece la posibilidad a los usuarios a suscribirse para la notificaci\\u00f3n de los cambios en la mayor\\u00eda de las entidades en un registro UDDI. Sin embargo, la parte de notificaci\\u00f3n es un poco extra\\u00f1o. Los usuarios de los estrictos UDDIv3 registros tienen una sola opci\\u00f3n, sondean peri\\u00f3dicamente el registro UDDI para los cambios a trav\\u00e9s de la API de Suscripci\\u00f3n. Aunque hay tipos de datos definidos en la especificaci\\u00f3n UDDI v3, no hay m\\u00e9todo de la API para la creaci\\u00f3n de un estilo de devoluci\\u00f3n de llamada de suscripci\\u00f3n, donde el usuario recibe un registro de servicios web que espera para las notificaciones. En una suscripci\\u00f3n de devoluci\\u00f3n de llamada, los que necesitan la informaci\\u00f3n se notificar\\u00e1 de inmediato. <br> <br> Registros basados \\u200b\\u200bjUDDI tener una extensi\\u00f3n de la especificaci\\u00f3n UDDIv3 que permite llamar de nuevo tipo de comunicaci\\u00f3n y por lo tanto mecanismo preferido.\n-pages.serviceeditor.title=Servicio Editor\n-errors.generic=Error\n-pages.businesseditor.businesslist=Servicios Empresariales\n-pages.businesseditor.businesslist2=se definen para este negocio.\n-items.service=Servicio\n-errors.notsignedin=O ha ocurrido un error, o no te has conectado pulg\n-pages.viewsubscriptions.listingheader=UDDI Suscripciones\n-pages.viewsubscriptions.nosubs=No hay suscripciones se definen actualmente.\n-errors.juddiapi.without.juddi=Usted no est\\u00e1 conectado a un registro jUDDI. P\\u00f3ngase en contacto con el administrador o consulte el archivo de configuraci\\u00f3n.\n-items.services.name.descriptions=Los servicios son identificadas por una o m\\u00e1s nombre. Varios nombres son \\u00fatiles para diferentes idiomas, nombres legales o abreviaturas.\n-items.services.description=servicios puede tener m\\u00e1s de una descripci\\u00f3n, tal como en un idioma diferente.\n-items.bindingtemplate.keyrefgrp=Enlace de grupos de plantillas de referencia con clave\n-items.bindingtemplate.keyrefcat=Encuadernaci\\u00f3n Categor\\u00edas de plantillas de referencia con clave\n-items.overviewurl=Documentos Informaci\\u00f3n\n-items.overviewurl.description=Por lo general son las URL a las p\\u00e1ginas web que describen detalles de este tModel y escenarios de uso.\n-items.tmodelinstance.description=Descripci\\u00f3n tModel Instancia\n-items.tmodelinstance.description2=informaciones sobre TModel instancia puede tener m\\u00e1s de una descripci\\u00f3n, tal como en un idioma diferente.\n-items.tmodelinstance.parameters=Par\\u00e1metros TModel Instancia\n-items.service.key=Servicio Clave\n-items.service.key.description=La clave del negocio es el identificador \\u00fanico para el negocio que este servicio pertenece. Si se especifica una clave de servicio, debe ser precedido por una partici\\u00f3n existente (generador de claves).\n-items.bindingtemplate.description=Un servicio en UDDI realmente define un tipo espec\\u00edfico de servicio, no necesariamente una implementaci\\u00f3n de un servicio. Plantillas de uni\\u00f3n definir espec\\u00edficamente una implementaci\\u00f3n de un servicio y normalmente incluye un punto de acceso que describe c\\u00f3mo utilizar el servicio. Cada servicio puede tener 0 o m\\u00e1s plantillas de uni\\u00f3n. Algunos registros imponer l\\u00edmites en el n\\u00famero de plantillas de uni\\u00f3n por servicio.\n-items.bindingtemplate.add=Agregar un Enlace de plantillas\n-items.bindingtemplate.key=Key Enlace de plantillas\n-items.bindingtemplate.description.add=A\\u00f1adir una descripci\\u00f3n de plantillas Binding - Plantillas de uni\\u00f3n pueden tener m\\u00e1s de una descripci\\u00f3n, por ejemplo, en un idioma diferente.\n-items.accesspoint=Punto de Acceso\n-items.accesspoint.description=UDDI permite una opci\\u00f3n de un redireccionamiento de alojamiento o un punto de acceso. Punto de Acceso es recomendable. El punto de acceso es generalmente una URL para el extremo de servicio.\n-items.accesspoint.type=Tipo de Punto de Acceso\n-items.accesspoint.value=Valor del Punto de Acceso\n-items.hostingredirector=Redireccionamiento Hosting\n-items.tmodelinstance.info=tModel informaci\\u00f3n de instancia\n-items.tmodelinstance.info.desc=un modelo de uni\\u00f3n puede disponer de informaci\\u00f3n adicional que se le atribuye el uso de la Instancia tModel.\n-items.overviewurl.add=Agregar un documento general\\n\n-items.overviewurl.description.add=Agregar un Documento Descripci\\u00f3n general\n-items.tmodelinstance.add=Agregar una instancia de tModel\n-items.tmodelinstance.description.add=Agregar una descripci\\u00f3n Instancia tModel\n-items.tmodel.key=tModel Clave\n-items.overviewdocument.description=Descripci\\u00f3n General del Documenton\n-navbar.help=Ayudar\n-pages.tmodeleditor.title=tModel Editor\n-pages.editor.tabnav.overview=Documentos Informaci\\u00f3n General\n-pages.editor.tabnav.overview.description=ads\n-items.tmodel.description=tModels puede tener m\\u00e1s de una descripci\\u00f3n, tal como en un idioma diferente.\n-items.tmodel.key.description=La clave tModel es el identificador \\u00fanico. Si se especifica un tModel, debe estar precedido de una partici\\u00f3n existente (generador de claves), la otra se genera para usted.\n-items.tmodel.name=Nombre - El nombre describe esta estructura tModel. Se trata de un campo obligatorio.\n-items.clicktoedit=Haga clic para editar\n-pleasewait=Por favor, espere\n-items.description.add=Agregar una descripci\\u00f3n\n-items.name.add=Agregar un Nombre\n-items.contact.primary=Contacto Primario\n-#suggestion\n-items.phone.types=(Extensi\\u00f3n, nacionales, internacionales, DSN)\n-items.sortcode=C\\u00f3digo de Clasificaci\\u00f3n\n-items.contact.type=Tipo de Contacto\n-items.contact.default=(T\\u00edtulo del trabajo, Papel)\n-items.addresstype.default=(headquarters. oficina de ventas, facturaci\\u00f3n)\n-items.welcome=Bienvenido\n-items.expires=Expira\n-items.actions=Acciones\n-actions.asxml=Ver como XML\n-items.name.description=Entidades UDDI pueden tener m\\u00e1s de un nombre, como abreviaturas o en otro idioma.\n-items.signatures.invalid=La firma es v\\u00e1lida! Raz\\u00f3n:\n-items.signatures.valid=La firma digital es v\\u00e1lida.\n-items.unknown=Error, no puede identificar el tipo de objeto que quer\\u00eda.\n-items.service.add=Agregar un Servicio\n-items.publisherassertion.add=Agregar una Relaci\\u00f3n de Negocios (aserci\\u00f3n Publisher)\n-actions.saved=Salvo!\n-items.details=Detalles\n-navbar.publisherassertions=Las Afirmaciones Editor\n-navbar.publisherassertions.tooltip=Permite configurar las relaciones entre empresas.\n-navbar.create.mybiz=Mis Empresas\n-navbar.create.mybiz.tooltip=Una lista de todos los negocios que se pueden alterar.\n-navbar.create.mybiz.content=Mis empresas contiene una lista de todos los elementos empresariales UDDI que usted tiene acceso. Esto normalmente significa que usted puede hacer cambios en \\u00e9l, sin embargo esto puede variar entre los proveedores.\n-actions.transfer.description=Traslade esta entidad a otro nodo UDDI o el editor.\n-actions.subscribe.description=Avisarme cuando esta entidad los cambios.\n-items.publisherassertions.from=Este Negocio\n-items.publisherassertions.to=Est\\u00e1 relacionado con los negocios\n-items.publisherassertions.relationship=Relaci\\u00f3n\n-items.status=Estado\n-actions.deleted=Suprimido\n-navbar.subscriptions.feed=Noticias Corriente\n-items.picker=Selector\n-navbar.subscriptions.feed.tooltip=Un nuevo avance basado en la configuraci\\u00f3n de la suscripci\\u00f3n.\n-items.tmodel.chooser=tModel Selector\n-actions.select=Seleccionar\n-actions.cancel=Cancelar\n-navbar.transfer=Transferencia de Custodia\n-navbar.transfer.tooltip=Transferencia de la propiedad a otra Editor\n-items.subscriptions.assertion=Informe sobre la situaci\\u00f3n de aserci\\u00f3n cambiado\n-items.subscriptions.bindings=Vinculaciones Cambiado\n-items.subscriptions.business=Las empresas Cambiado\n-items.subscriptions.assertion2=Relaciones comerciales (Aseveraciones Editorial)\n-items.subscriptions.services=Servicios Cambiado\n-items.subscriptions.servicelist=Lista de servicios\n-items.subscriptions.tmodels=tModels Cambiado\n-items.subscriptions.tmodels2=Listado tModel\n-actions.canceled=Cancelado\n-actions.success=\\u00c9xito!\n-items.transfertoken=Traslado Token\n-items.transferkeys=Claves para la transferencia (Bolsa de clave)\n-error.ohno=\\u00a1Ay no!\n-error.occurred=Por desgracia, se ha producido un error.\n-error.pleasereport=Por favor, haga el favor de informe al administrador jUDDI.\n-error.timeofevent=Hora en que ocurri\\u00f3 el evento\n-error.reportadmin=Si usted es el administrador, por favor revise los registros del servidor y reportar los resultados a la siguiente URL.\n-error.filereport=Presentar un informe de errores\n-navbar.help.about=Acerca de\n-navbar.help.about.tooltip=Acerca de este sitio\n-pages.about.content=Este sitio es parte de la <a href=\"http://juddi.apache.org\"> Apache jUDDI </ a> proyecto y proporciona funcionalidad para el usuario final\\n\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0 interactuar con una versi\\u00f3n 3 registro UDDI tal como se define por la norma OASIS se encuentra aqu\\u00ed: <un\\n\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0 <br>\\n\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0 Esta interfaz de usuario deber\\u00eda funcionar con cualquier aplicaci\\u00f3n UDDI v3, pero fue dise\\u00f1ado y probado con el servidor Apache jUDDI y se comunica a trav\\u00e9s de\\n\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0 transacciones de servicios Web.\\n\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0 <br>\\n\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0 Esta interfaz de usuario es de c\\u00f3digo abierto y utiliza una serie de otras bibliotecas y las capacidades que se enumeran a continuaci\\u00f3n de c\\u00f3digo abierto.\n-items.binding.chooser=Binding Selector\n-items.service.chooser=Servicio de Selector\n-items.business.chooser=Negocio Selector\n-items.assertion.chooser=Editorial Status Aserci\\u00f3n\n-items.subscription.CompletionStatus.STATUS_COMPLETE=Esto significa que existe una relaci\\u00f3n visible entre dos empresas.\n-items.subscription.CompletionStatus.STATUS_FROM_KEY_INCOMPLETE=Esto indica que un negocio se ha sostenido una relaci\\u00f3n con una de sus empresas, pero no ha correspondido a la relaci\\u00f3n.\n-items.subscription.CompletionStatus.STATUS_TO_KEY_INCOMPLETE=Esto indica que el propietario de la empresa ha afirmado una relaci\\u00f3n con otra empresa, pero no se ha correspondido.\n-items.subscription.CompletionStatus.STATUS_BOTH_INCOMPLETE=Esto indica que la afirmaci\\u00f3n editor incrustado en el Estado afirmaci\\u00f3n art\\u00edculo ha sido borrado de ambos extremos de la relaci\\u00f3n de negocios.\n-pages.subscription.content=UDDI tiene una caracter\\u00edstica que le permite ser alertado de cambios a cualquiera de las entradas espec\\u00edficas UDDI o para los resultados de b\\u00fasqueda. Esta p\\u00e1gina le ayudar\\u00e1 a configurar una suscripci\\u00f3n para satisfacer sus necesidades. Nota: s\\u00f3lo un tipo de filtro de suscripci\\u00f3n puede ser definido por suscripci\\u00f3n. Normalmente, los usuarios pueden hacer tantas suscripciones como quieren, sin embargo, puede ser efectivamente limitado por la aplicaci\\u00f3n de registro.\n-pages.subscription.step1=Paso 1 - \\u00bfQu\\u00e9 tipo de informaci\\u00f3n que desea recibir alertas sobre?\n-pages.subscription.step2=Paso 2 - \\u00bfA qu\\u00e9 elementos desea que las alertas en?\n-pages.subscription.step1.specific=Los cambios en un elemento espec\\u00edfico\n-pages.subscription.step1.search=Los cambios en los resultados de b\\u00fasqueda, tales como un nuevo elemento\n-items.publisherassertion.status=Editorial Status aserci\\u00f3n\n-actions.add=A\\u00f1adir\n-actions.remove=Eliminar\n-items.findqualifiers=Encontrar Calificadores\n-pages.subscription.step3=Paso 3 - \\u00bfC\\u00f3mo desea recibir las alertas?\n-pages.subscription.step3.direct=Recibir avisos directamente\n-pages.subscription.step3.direct.tooltip=O a trav\\u00e9s de una suscripci\\u00f3n de cliente API UDDI, correo electr\\u00f3nico o cualquier otro notificador\n-pages.subscription.step3.pickup=Yo recoger\\u00e9\n-pages.subscription.step3.pickup.tooltip=O a trav\\u00e9s de este sitio web o de su propio software que comprueba peri\\u00f3dicamente si hay actualizaciones\n-pages.subscription.step3.content=Para que un servidor UDDI para notificarle de cambios de forma as\\u00edncrona, primero hay que definir un negocio con una empresa, con una plantilla de enlace que dice UDDI donde enviar la notificaci\\u00f3n (valor del punto de acceso). Algunos servidores UDDI (como Apache jUDDI) requieren que usted agregue tambi\\u00e9n una instancia tModel definir el par\\u00e1metro de transporte, tales como\n-pages.subscription.step4=Paso 4 - Opciones\n-items.notificationinterval=Notificaci\\u00f3n Intervalo (hh: mm: ss)\n-items.expiration=Vencimiento\n-items.subscriptionbrief=Breve Suscripci\\u00f3n\n-items.maxrecords.callback=Registros m\\u00e1ximos por devoluci\\u00f3n de llamada\n-navbar.subscriptions.feed.content=El servicio de noticias que proporciona una lista de todo el contenido actualizado por la configuraci\\u00f3n de suscripci\\u00f3n\n-pages.transfer.content=UDDI soporta la transferencia de la propiedad de las empresas (y todos sus objetos secundarios, incluidos los servicios, las plantillas de uni\\u00f3n) y entidades tModel a otro editor. Editores representan una o m\\u00e1s conexiones o nombres de usuario. <br> Transferencias <Br> pueden ocurrir dentro de un nodo de registro UDDI (intra-nodo) y entre varios nodos de registros (entre nodos). Esta utilidad le ayudar\\u00e1 a configurar las transferencias intra-nodo \\u00fanico. No se conocen las implementaciones UDDI soportan transferencias entre nodos (API de replicaci\\u00f3n no se implementan. <br> El proceso es sencillo, seleccionar qu\\u00e9 entidades que desea transferir y haga clic en Aceptar. Una muestra se presentar\\u00e1 para que luego tenga que dar al otro editor. el otro editor debe entonces aceptar el token y transferir la propiedad a \\u00e9l. Finalmente, el token se destruye para evitar cualquier transferencia involuntaria. <br> transferencias pueden ser abortados (token invalide) antes de que el otro editor transfiere la propiedad de. Una vez que se ha trasladado y desea deshacer la transferencia, p\\u00f3ngase en contacto con el administrador del registro y el otro editor.\n-pages.transfer.createtoken=Crear un nuevo Token\n-pages.transfer.discardtoken=Descartar un token de transferencia (abortar la transferencia)\n-pages.transfer.accepttransfer=Aceptar una transferencia\n-actions.refresh=Refrescar\n-pages.transfer.gettoken=Obtener un token de transferencia\n-items.token=Token\n-actions.accept=Accept\n-pages.transfer.createtoken.content=Esta ficha le ayudar\\u00e1 a crear un token de transferencia. Una vez que haya creado, copiar todo el contenido de la ficha y d\\u00e1rselo a la persona que est\\u00e1 transfiriendo la propiedad a.\n-pages.transfer.discardtoken.content=Cometido un error? No hay problema. Introduzca el token a continuaci\\u00f3n junto con las claves para ser transferidos y se elimina del sistema, impedir cualquier transferencia de futuro. Debe coincidir exactamente. Nota: los campos requieren contenido XML.\n-pages.transfer.accepttransfer.content=Si otro editor UDDI le dio un token de transferencia y todos ustedes se comprometi\\u00f3 a transferir la propiedad de un negocio o tModel, se puede hacer aqu\\u00ed. Introduzca el token de transferencia. Debe coincidir exactamente.\n-actions.savethis=Copie y guarde esta informaci\\u00f3n a su ordenador. No hay manera de recuperar esta informaci\\u00f3n de nuevo!\n-navbar.help.source=C\\u00f3digo Fuente\n-actions.approve=Aprobar\n-navbar.create.serviceimport=Registro de Servicios de WSDL\n-navbar.create.serviceimport.tooltip=Basado en el UDDI TC, utilizando WSDL en un registro UDDI\n-warning.ssl=Atenci\\u00f3n, usted no est\\u00e1 usando SSL y su clave podr\\u00eda estar expuesto!\n-pages.home.title=Administraci\\u00f3n jUDDI\n-pages.home.config=Configurar jUDDI\n-pages.home.stats=Estado y estad\\u00edsticas\n-pages.home.stats.content=Descubra c\\u00f3mo ocupado jUDDI es.\n-pages.home.admin=Administraci\\u00f3n\n-pages.home.admin.content=Opciones de administraci\\u00f3n, tales como la supresi\\u00f3n de entidades.\n-items.statistics=Estad\\u00edstica\n-items.happyjuddi=jUDDI felices\n-pages.configure.info=Basta con hacer clic para editar cada campo, haga clic en Guardar cuando haya terminado. (No todos los campos se pueden modificar)\n-pages.configure.server=Server Config\n-pages.configure.admin=Consola de administraci\\u00f3n de configuraci\\u00f3n (este sitio web)\n-page.config.debug=Mostrar informaci\\u00f3n de depuraci\\u00f3n\n-pages.config.add=A\\u00f1adir un nuevo ajuste\n-pages.config.add.note=Nota: la clave debe empezar con el cliente, config.props o jUDDI.\n-pages.config.savefailed=Save Failed!\n-pages.admin.content=Esta p\\u00e1gina le permite acceder al Servicio Web jUDDI. Entre sus funciones se encuentran fuera del alcance de la especificaci\\u00f3n UDDI y proporcionan funciones administrativas b\\u00e1sicas para la gesti\\u00f3n de su nodo UDDI. <br> <b> Tendr\\u00e1 que estar conectado (arriba a la derecha) con el fin de hacer cualquier cosa. </ b> <br> Por favor, seleccione un elemento de la lista desplegable.\n-pages.admin.notes=* Para los art\\u00edculos que requieren la entrada XML, deje la autenticaci\\u00f3n de UDDI en blanco token. Se rellena autom\\u00e1ticamente.\n-actions.go=Ejecutar!\n-items.results=Resultados\n-items.enable=Habilitado\n-items.noinput=No requiere entrada.\n-items.noauthtoken=Deja authToken blanco\n-max.bindings.per.service=M\\u00e1ximos encuadernaci\\u00f3ns por servicio\n-max.services.per.business=M\\u00e1ximos servicios por empresa\n-max.business=M\\u00e1ximos Empresas\n-max.tmodel=M\\u00e1ximos tModels\n-pages.admin.max=Si el valor m\\u00e1ximo no est\\u00e1 definido, entonces el valor predeterminado es la configuraci\\u00f3n por defecto m\\u00e1ximas del servidor. Si el valor m\\u00e1ximo es -1, entonces el que no hay l\\u00edmites.\n-items.inquiry=Coroner\n-items.publish=Publicar\n-items.security=Seguridad\n-items.subscription=Suscripci\\u00f3n\n-items.subscription.list=Listener Suscripci\\u00f3n\n-items.custodytransfer=Transferencia de Custodia\n-items.replication=Replicaci\\u00f3n\n-items.transport=Transporte\n-items.clientname=Nombre del Cliente\n", "diff --git a/juddiv3-war/src/main/webapp/admin/about.jsp b/juddiv3-war/src/main/webapp/admin/about.jsp\nindex 284654f29..fdfc20665 100644\n--- a/juddiv3-war/src/main/webapp/admin/about.jsp\n+++ b/juddiv3-war/src/main/webapp/admin/about.jsp\n@@ -6,7 +6,7 @@\n \n \n <%@page import=\"java.net.URLEncoder\"%>\n-<%@page import=\"org.apache.juddi.webconsole.hub.builders.Printers\"%>\n+<%@page import=\"org.apache.juddi.adminconsole.hub.builders.Printers\"%>\n <%@page import=\"org.uddi.api_v3.RegisteredInfo\"%>\n <%@page import=\"java.util.Iterator\"%>\n <%@page import=\"java.util.Map.Entry\"%>\n", "diff --git a/juddiv3-war/src/main/webapp/admin/admin.jsp b/juddiv3-war/src/main/webapp/admin/admin.jsp\nindex c15e4e43e..1da5126ee 100644\n--- a/juddiv3-war/src/main/webapp/admin/admin.jsp\n+++ b/juddiv3-war/src/main/webapp/admin/admin.jsp\n@@ -33,7 +33,7 @@\n \n                 <div class=\"span12\">\n                         <% UddiAdminHub x = UddiAdminHub.getInstance(application, session);\n-                        %>\n+                        %> \n                         <%=ResourceLoader.GetResource(session, \"pages.admin.content\")%>\n                         <br>\n                         <select onchange=\"toggledivs();\" id=\"divselector\">\n", "diff --git a/juddiv3-war/src/main/webapp/admin/ajax/go.jsp b/juddiv3-war/src/main/webapp/admin/ajax/go.jsp\nindex 0aa75a431..f074f7891 100644\n--- a/juddiv3-war/src/main/webapp/admin/ajax/go.jsp\n+++ b/juddiv3-war/src/main/webapp/admin/ajax/go.jsp\n@@ -4,8 +4,8 @@\n     Author     : Alex O'Ree\n --%>\n \n-<%@page import=\"org.apache.juddi.webconsole.resources.ResourceLoader\"%>\n-<%@page import=\"org.apache.juddi.webconsole.hub.UddiAdminHub\"%>\n+<%@page import=\"org.apache.juddi.adminconsole.resources.ResourceLoader\"%>\n+<%@page import=\"org.apache.juddi.adminconsole.hub.UddiAdminHub\"%>\n <%@page import=\"org.apache.commons.lang.StringEscapeUtils\"%>\n <%@page import=\"java.util.Enumeration\"%>\n <%@page contentType=\"text/html\" pageEncoding=\"UTF-8\"%>\n", "diff --git a/juddiv3-war/src/main/webapp/admin/ajax/loginpost.jsp b/juddiv3-war/src/main/webapp/admin/ajax/loginpost.jsp\nindex bd3f6bfce..adb422658 100644\n--- a/juddiv3-war/src/main/webapp/admin/ajax/loginpost.jsp\n+++ b/juddiv3-war/src/main/webapp/admin/ajax/loginpost.jsp\n@@ -10,8 +10,8 @@\n <%@page import=\"java.util.Properties\"%>\n <%@page import=\"java.io.InputStream\"%>\n <%@page import=\"java.net.URL\"%>\n-<%@page import=\"org.apache.juddi.webconsole.AES\"%>\n-<%@page import=\"org.apache.juddi.webconsole.hub.UddiAdminHub\"%>\n+<%@page import=\"org.apache.juddi.adminconsole.AES\"%>\n+<%@page import=\"org.apache.juddi.adminconsole.hub.UddiAdminHub\"%>\n <%@page contentType=\"text/html\" pageEncoding=\"UTF-8\"%>\n <%@include  file=\"../csrf.jsp\" %>\n <%        boolean ok = true;\n", "diff --git a/juddiv3-war/src/main/webapp/admin/ajax/saveconfig.jsp b/juddiv3-war/src/main/webapp/admin/ajax/saveconfig.jsp\nindex ed4bdf680..8419526b9 100644\n--- a/juddiv3-war/src/main/webapp/admin/ajax/saveconfig.jsp\n+++ b/juddiv3-war/src/main/webapp/admin/ajax/saveconfig.jsp\n@@ -4,7 +4,7 @@\n     Author     : Alex O'Ree\n --%>\n \n-<%@page import=\"org.apache.juddi.webconsole.resources.ResourceLoader\"%>\n+<%@page import=\"org.apache.juddi.adminconsole.resources.ResourceLoader\"%>\n <%@page import=\"org.apache.commons.lang.StringEscapeUtils\"%>\n <%@page import=\"org.apache.juddi.config.AppConfig\"%>\n <%@page import=\"org.apache.commons.configuration.Configuration\"%>\n", "diff --git a/juddiv3-war/src/main/webapp/admin/csrf.jsp b/juddiv3-war/src/main/webapp/admin/csrf.jsp\nindex a7bf6541c..88c2e3c4e 100644\n--- a/juddiv3-war/src/main/webapp/admin/csrf.jsp\n+++ b/juddiv3-war/src/main/webapp/admin/csrf.jsp\n@@ -4,8 +4,8 @@\n     Author     : Alex O'Ree\n --%>\n \n-<%@page import=\"org.apache.juddi.webconsole.hub.UddiAdminHub\"%>\n-<%@page import=\"org.apache.juddi.webconsole.CrossSiteRequestForgeryException\"%>\n+<%@page import=\"org.apache.juddi.adminconsole.hub.UddiAdminHub\"%>\n+<%@page import=\"org.apache.juddi.adminconsole.CrossSiteRequestForgeryException\"%>\n <%@page contentType=\"text/html\" pageEncoding=\"UTF-8\"%>\n <%\n     //this is to catch someone that bookmarked a page after selecting a language\n", "diff --git a/juddiv3-war/src/main/webapp/admin/error.jsp b/juddiv3-war/src/main/webapp/admin/error.jsp\nindex 0725ffb87..91716e28e 100644\n--- a/juddiv3-war/src/main/webapp/admin/error.jsp\n+++ b/juddiv3-war/src/main/webapp/admin/error.jsp\n@@ -22,7 +22,7 @@\n     Author     : Alex O'Ree\n --%>\n \n-<%@page import=\"org.apache.juddi.webconsole.resources.ResourceLoader\"%>\n+<%@page import=\"org.apache.juddi.adminconsole.resources.ResourceLoader\"%>\n <%@page import=\"javax.xml.datatype.DatatypeFactory\"%>\n <%@page import=\"java.util.GregorianCalendar\"%>\n <%@page contentType=\"text/html\" pageEncoding=\"UTF-8\"%>\n", "diff --git a/juddiv3-war/src/main/webapp/admin/header-bottom.jsp b/juddiv3-war/src/main/webapp/admin/header-bottom.jsp\nindex 1587909df..4059c4737 100644\n--- a/juddiv3-war/src/main/webapp/admin/header-bottom.jsp\n+++ b/juddiv3-war/src/main/webapp/admin/header-bottom.jsp\n@@ -12,7 +12,7 @@\n <%@page import=\"java.util.jar.JarFile\"%>\n <%@page import=\"java.net.URL\"%>\n <%@page import=\"java.util.Enumeration\"%>\n-<%@page import=\"org.apache.juddi.webconsole.resources.ResourceLoader\"%>\n+<%@page import=\"org.apache.juddi.adminconsole.resources.ResourceLoader\"%>\n <%@page contentType=\"text/html\" pageEncoding=\"UTF-8\"%>\n \n </div> <!-- /container -->\n", "diff --git a/juddiv3-war/src/main/webapp/admin/header-top.jsp b/juddiv3-war/src/main/webapp/admin/header-top.jsp\nindex f9d3635d2..4a730cff5 100644\n--- a/juddiv3-war/src/main/webapp/admin/header-top.jsp\n+++ b/juddiv3-war/src/main/webapp/admin/header-top.jsp\n@@ -20,8 +20,8 @@\n     Author     : Alex O'Ree\n --%>\n \n-<%@page import=\"org.apache.juddi.webconsole.hub.UddiAdminHub\"%>\n-<%@page import=\"org.apache.juddi.webconsole.resources.ResourceLoader\"%>\n+<%@page import=\"org.apache.juddi.adminconsole.hub.UddiAdminHub\"%>\n+<%@page import=\"org.apache.juddi.adminconsole.resources.ResourceLoader\"%>\n <%@page contentType=\"text/html\" pageEncoding=\"UTF-8\"%>\n <!DOCTYPE html>\n <%\n", "diff --git a/juddiv3-war/src/main/webapp/admin/js/i18n.js.jsp b/juddiv3-war/src/main/webapp/admin/js/i18n.js.jsp\nindex e168bf060..d95f84513 100644\n--- a/juddiv3-war/src/main/webapp/admin/js/i18n.js.jsp\n+++ b/juddiv3-war/src/main/webapp/admin/js/i18n.js.jsp\n@@ -1,5 +1,5 @@\n \n-<%@page import=\"org.apache.juddi.webconsole.resources.ResourceLoader\"%>\n+<%@page import=\"org.apache.juddi.adminconsole.resources.ResourceLoader\"%>\n <%-- \n /*\n  * Copyright 2001-2013 The Apache Software Foundation.\n", "diff --git a/juddiv3-war/src/main/webapp/admin/login.jsp b/juddiv3-war/src/main/webapp/admin/login.jsp\nindex b5628a5df..4c5b56f2e 100644\n--- a/juddiv3-war/src/main/webapp/admin/login.jsp\n+++ b/juddiv3-war/src/main/webapp/admin/login.jsp\n@@ -4,8 +4,8 @@\n     Author     : Alex O'Ree\n --%>\n \n-<%@page import=\"org.apache.juddi.webconsole.hub.UddiAdminHub\"%>\n-<%@page import=\"org.apache.juddi.webconsole.resources.ResourceLoader\"%>\n+<%@page import=\"org.apache.juddi.adminconsole.hub.UddiAdminHub\"%>\n+<%@page import=\"org.apache.juddi.adminconsole.resources.ResourceLoader\"%>\n <%@page import=\"org.apache.commons.lang.StringEscapeUtils\"%>\n <%@page contentType=\"text/html\" pageEncoding=\"UTF-8\"%>\n \n", "diff --git a/juddiv3-war/src/main/webapp/admin/logout.jsp b/juddiv3-war/src/main/webapp/admin/logout.jsp\nindex 47ae58b0d..80d6bb052 100644\n--- a/juddiv3-war/src/main/webapp/admin/logout.jsp\n+++ b/juddiv3-war/src/main/webapp/admin/logout.jsp\n@@ -4,7 +4,7 @@\n     Author     : Alex O'Ree\n --%>\n \n-<%@page import=\"org.apache.juddi.webconsole.hub.UddiAdminHub\"%>\n+<%@page import=\"org.apache.juddi.adminconsole.hub.UddiAdminHub\"%>\n <%@page contentType=\"text/html\" pageEncoding=\"UTF-8\"%>\n <%\n     UddiAdminHub hub = UddiAdminHub.getInstance(application, session);\n", "diff --git a/juddiv3-war/src/main/webapp/admin/stats.jsp b/juddiv3-war/src/main/webapp/admin/stats.jsp\nindex 22ac8cb27..a6c85570a 100644\n--- a/juddiv3-war/src/main/webapp/admin/stats.jsp\n+++ b/juddiv3-war/src/main/webapp/admin/stats.jsp\n@@ -7,7 +7,7 @@\n \n <%@page import=\"javax.persistence.EntityTransaction\"%>\n <%@page import=\"org.uddi.api_v3.BusinessEntity\"%>\n-<%@page import=\"org.apache.juddi.config.Property\"%>\n+<%@page import=\"org.apache.juddi.config.Property\"%> \n <%@page import=\"org.apache.juddi.config.AppConfig\"%>\n <%@page import=\"javax.persistence.EntityManager\"%>\n <%@page import=\"org.apache.juddi.config.PersistenceManager\"%>\n"], "label": 0, "cve": "CVE-2015-5241", "rank": 3, "commit": "02b69843db137915f13f6bb294b865d0e843f72a", "cve_attention_tokens": []}
{"cve_desc": "In index.php in WonderCMS before 2.4.1, remote attackers can delete arbitrary files via directory traversal.", "commit_msg": "Update README.md\n\nAdditional instruction for functions.php (has to be inside active theme folder).\n", "diff": ["diff --git a/README.md b/README.md\nindex 5b21654..5472050 100644\n--- a/README.md\n+++ b/README.md\n@@ -31,8 +31,8 @@ WonderCMS works on most hosting packages (and **even on some free hosting provid\n  - custom homepage\n  - highlighted current page in menu\n  - 404 page\n- - SEO support - custom title, keywords and description for each page\n- - optional functions.php file - includes itself when you create it (the location of the functions.php should be inside your theme folder)\n+ - SEO support (custom title, keywords and description for each page)\n+ - optional functions.php file - includes itself when you create it (the location of the functions.php should be inside your active theme folder)\n  - no known vulnerabilities - special thanks to yassineaddi, hypnito, and other security researchers\n \n ## Links\n"], "label": 0, "cve": "CVE-2018-7172", "rank": 11, "commit": "2d4b137f300770b12c4b8bb79b16a8fc6d557223", "cve_attention_tokens": []}
{"cve_desc": "Cross-site scripting (XSS) vulnerability in HtmlSessionInformationsReport.java in JavaMelody 1.46 and earlier allows remote attackers to inject arbitrary web script or HTML via a crafted X-Forwarded-For header.", "commit_msg": "issue 333: In the collector server, send an email when an application becomes unavailable\n", "diff": ["diff --git a/javamelody-core/src/main/java/net/bull/javamelody/CollectorServer.java b/javamelody-core/src/main/java/net/bull/javamelody/CollectorServer.java\nindex 0f20756e..1504b85c 100644\n--- a/javamelody-core/src/main/java/net/bull/javamelody/CollectorServer.java\n+++ b/javamelody-core/src/main/java/net/bull/javamelody/CollectorServer.java\n@@ -43,7 +43,7 @@ class CollectorServer {\n \n \tprivate static final int NB_COLLECT_THREADS = 10;\n \n-\tfinal Map<String, Throwable> lastCollectExceptionsByApplication = new ConcurrentHashMap<String, Throwable>();\n+\tprivate final Map<String, Throwable> lastCollectExceptionsByApplication = new ConcurrentHashMap<String, Throwable>();\n \tprivate final Map<String, RemoteCollector> remoteCollectorsByApplication = new ConcurrentHashMap<String, RemoteCollector>();\n \n \tprivate final ExecutorService executorService = Executors\n@@ -111,17 +111,7 @@ class CollectorServer {\n \t\t\texecutorService.submit(new Runnable() {\n \t\t\t\t@Override\n \t\t\t\tpublic void run() {\n-\t\t\t\t\ttry {\n-\t\t\t\t\t\tcollectForApplication(application, urls);\n-\t\t\t\t\t\tlastCollectExceptionsByApplication.remove(application);\n-\t\t\t\t\t} catch (final Throwable e) { // NOPMD\n-\t\t\t\t\t\t// si erreur sur une webapp (indisponibilit\u00e9 par exemple), on continue avec les autres\n-\t\t\t\t\t\t// et il ne doit y avoir aucune erreur dans cette task\n-\t\t\t\t\t\tLOGGER.warn(\"exception while collecting data for application \"\n-\t\t\t\t\t\t\t\t+ application);\n-\t\t\t\t\t\tLOGGER.warn(e.getMessage(), e);\n-\t\t\t\t\t\tlastCollectExceptionsByApplication.put(application, e);\n-\t\t\t\t\t}\n+\t\t\t\t\tcollectForApplicationWithoutErrors(application, urls);\n \t\t\t\t}\n \t\t\t});\n \t\t}\n@@ -131,6 +121,36 @@ class CollectorServer {\n \t\treturn collectForApplication(new RemoteCollector(application, urls));\n \t}\n \n+\tvoid collectForApplicationWithoutErrors(String application, List<URL> urls) {\n+\t\ttry {\n+\t\t\tcollectForApplication(application, urls);\n+\t\t\tfinal boolean becameAvailable = lastCollectExceptionsByApplication\n+\t\t\t\t\t.containsKey(application);\n+\t\t\tlastCollectExceptionsByApplication.remove(application);\n+\n+\t\t\tif (becameAvailable) {\n+\t\t\t\tfinal String subject = \"The application \" + application\n+\t\t\t\t\t\t+ \" is available again for the monitoring server\";\n+\t\t\t\tnotifyAdmins(subject, subject);\n+\t\t\t}\n+\t\t} catch (final Throwable e) { // NOPMD\n+\t\t\t// si erreur sur une webapp (indisponibilit\u00e9 par exemple), on continue avec les autres\n+\t\t\t// et il ne doit y avoir aucune erreur dans cette task\n+\t\t\tLOGGER.warn(\"exception while collecting data for application \" + application);\n+\t\t\tLOGGER.warn(e.toString(), e);\n+\t\t\tfinal boolean becameUnavailable = !lastCollectExceptionsByApplication\n+\t\t\t\t\t.containsKey(application);\n+\t\t\tlastCollectExceptionsByApplication.put(application, e);\n+\n+\t\t\tif (becameUnavailable) {\n+\t\t\t\tfinal String subject = \"The application \" + application\n+\t\t\t\t\t\t+ \" is unavailable for the monitoring server\";\n+\t\t\t\tfinal String message = subject + \"\\n\\nCause:\\n\" + e.toString();\n+\t\t\t\tnotifyAdmins(subject, message);\n+\t\t\t}\n+\t\t}\n+\t}\n+\n \tString collectForApplication(String application, List<URL> urls) throws IOException {\n \t\tfinal boolean remoteCollectorAvailable = isApplicationDataAvailable(application);\n \t\tfinal RemoteCollector remoteCollector;\n@@ -333,6 +353,19 @@ class CollectorServer {\n \t\treturn Collections.unmodifiableMap(lastCollectExceptionsByApplication);\n \t}\n \n+\tprivate void notifyAdmins(String subject, String message) {\n+\t\tfinal String mailSession = Parameters.getParameter(Parameter.MAIL_SESSION);\n+\t\tfinal String adminEmails = Parameters.getParameter(Parameter.ADMIN_EMAILS);\n+\t\tif (mailSession != null && adminEmails != null) {\n+\t\t\tfinal Mailer mailer = new Mailer(mailSession);\n+\t\t\ttry {\n+\t\t\t\tmailer.send(adminEmails, subject, message, null, false);\n+\t\t\t} catch (final Exception e) {\n+\t\t\t\tLOGGER.warn(e.toString(), e);\n+\t\t\t}\n+\t\t}\n+\t}\n+\n \tvoid scheduleReportMailForCollectorServer(String application) {\n \t\tassert application != null;\n \t\tfor (final Period period : MailReport.getMailPeriods()) {\n"], "label": 0, "cve": "CVE-2013-4378", "rank": 25, "commit": "b82694dbabe77f8a907ecf464f8d6d13c7cc1867", "cve_attention_tokens": []}
{"cve_desc": "Stored XSS vulnerability in Flyspray 1.0-rc4 before 1.0-rc6 allows an authenticated user to inject JavaScript to gain administrator privileges and also to execute JavaScript against other users (including unauthenticated users), via the name, title, or id parameter to plugins/dokuwiki/lib/plugins/changelinks/syntax.php.", "commit_msg": "captcha_securimage for Flyspray (#610)\n\ngives the option to enable a captcha for the new user registration.\n", "diff": ["diff --git a/composer.json b/composer.json\nindex d0bb3ba6..c774f332 100644\n--- a/composer.json\n+++ b/composer.json\n@@ -10,6 +10,7 @@\n         \"adodb/adodb-php\": \"~5.20\",\n         \"jamiebicknell/Sparkline\": \"1.*\",\n         \"ezyang/htmlpurifier\": \"~4.8.0\",\n+        \"dapphp/securimage\": \"3.6.5\",\n         \"league/oauth2-client\": \"~0.3|~0.12\" \n     },\n     \"repositories\": [\n@@ -18,6 +19,12 @@\n             \"url\": \"https://github.com/jamiebicknell/Sparkline\"\n         }\n     ],\n+    \"scripts\": {\n+        \"post-update-cmd\": [\n+                \"rm -rf vendor/dapphp/securimage/captcha.html vendor/dapphp/securimage/example_form.php vendor/dapphp/securimage/example_form.ajax.php vendor/dapphp/securimage/securimage_play.swf vendor/dapphp/securimage/examples/\",\n+                \"echo '<?php return array(\\\"session_name\\\"=>\\\"flyspray\\\"); ?>' > vendor/dapphp/securimage/config.inc.php\"\n+        ]\n+    },\n     \"autoload\": {\n         \"classmap\": [\"includes\"],\n         \"files\": [\"includes/utf8.inc.php\"],\n", "diff --git a/includes/modify.inc.php b/includes/modify.inc.php\nindex 3047b570..7223a933 100644\n--- a/includes/modify.inc.php\n+++ b/includes/modify.inc.php\n@@ -749,6 +749,17 @@ switch ($action = Req::val('action'))\n             break;\n         }\n \n+\t\tif($fs->prefs['captcha_securimage']){\n+\t\t\t$image = new Securimage(); \n+\t\t\tif ($image->check($_POST['captcha_code']) == true) {\n+\t\t\t\t# ok  \n+\t\t\t} else {\n+\t\t\t\t# wrong code\n+\t\t\t\tFlyspray::show_error(L('captchaerror'));\n+\t\t\t\tbreak;\n+\t\t\t}\n+\t\t}\n+\n         if (!Post::val('user_name') || !Post::val('real_name')\n             || !Post::val('email_address'))\n         {\n@@ -1203,7 +1214,7 @@ switch ($action = Req::val('action'))\n         /* The following code has been modified to accomodate a default_message for \"all project\" */\n         $settings = array('jabber_server', 'jabber_port', 'jabber_username', 'notify_registration',\n \t\t'jabber_password', 'anon_group', 'user_notify', 'admin_email', 'email_ssl', 'email_tls',\n-\t\t'lang_code', 'gravatars', 'hide_emails', 'spam_proof', 'default_project', 'dateformat', 'jabber_ssl',\n+\t\t'lang_code', 'gravatars', 'hide_emails', 'spam_proof', 'captcha_securimage', 'default_project', 'dateformat', 'jabber_ssl',\n \t\t'dateformat_extended', 'anon_reg', 'global_theme', 'smtp_server', 'page_title',\n \t\t'smtp_user', 'smtp_pass', 'funky_urls', 'reminder_daemon','cache_feeds', 'intro_message',\n \t\t'disable_lostpw','disable_changepw','days_before_alert', 'emailNoHTML', 'need_approval', 'pages_welcome_msg',\n", "diff --git a/lang/en.php b/lang/en.php\nindex 6321f90a..ad5697a3 100644\n--- a/lang/en.php\n+++ b/lang/en.php\n@@ -1089,5 +1089,8 @@ Regards,',\n 'editorunderlinehint'     => 'underline',\n 'editorstrikethrough'     => 'S',\n 'editorstrikethroughhint' => 'strikethrough',\n+'captchaerror'            => 'CAPTCHA not solved. Please try again.',\n+'registercaptcha'         => 'Please solve the CAPTCHA.',\n+'regcaptcha'              => 'Show a CAPTCHA for new user registration.',\n );\n ?>\n", "diff --git a/scripts/register.php b/scripts/register.php\nindex 3db0a88a..77dcadc5 100644\n--- a/scripts/register.php\n+++ b/scripts/register.php\n@@ -28,6 +28,15 @@ if ($user->can_register()) {\n \n         $page->pushTpl('register.magic.tpl');\n     } else {\n+\t\tif($fs->prefs['captcha_securimage']){\n+\t\t\t$captchaoptions = array(\n+\t\t\t\t'input_name' => 'captcha_code',\n+\t\t\t\t'disable_flash_fallback' => true\n+\t\t\t);\n+\t\t\t$captcha_securimage_html=Securimage::getCaptchaHtml($captchaoptions);\n+\t\t\t$page->assign('captcha_securimage_html', $captcha_securimage_html);\n+\t\t}\n+\n         $page->pushTpl('register.no-magic.tpl');\n     }\n } elseif ($user->can_self_register()) {\n", "diff --git a/setup/upgrade/1.0/flyspray-install.xml b/setup/upgrade/1.0/flyspray-install.xml\nindex f8ad74e9..f09b5929 100644\n--- a/setup/upgrade/1.0/flyspray-install.xml\n+++ b/setup/upgrade/1.0/flyspray-install.xml\n@@ -1353,6 +1353,7 @@\n     <query>INSERT INTO prefs VALUES (DEFAULT, 'custom_style', '');</query>\n     <query>INSERT INTO prefs VALUES (DEFAULT, 'general_integration', '');</query>\n     <query>INSERT INTO prefs VALUES (DEFAULT, 'footer_integration', '');</query>\n+    <query>INSERT INTO prefs VALUES (DEFAULT, 'captcha_securimage', '0');</query>\t  \n     <query>INSERT INTO projects VALUES (DEFAULT, 'Default Project', 'CleanFS', 0, 'Welcome to your first Flyspray project!  We hope that Flyspray provides you with many hours of increased productivity.  If you have any issues, go to http://flyspray.org . You can customise this message [[?do=pm&amp;project=1|here]]', 1, 'id category tasktype priority severity summary status progress', 'tasktype category severity priority status private assignedto reportedin dueversion duedate progress os votes', 1, 1, 0, '', '', NULL, '0', NULL, NULL, '', 'en', 0, 0, 0, NULL, 'index', 0, 0,'Undecided', '', 0, 0, 0, 'id', 'DESC', '', 1 );</query>\n     <query>INSERT INTO tasks VALUES (DEFAULT, 1, 1, 1452600000, 1, 0, 0, 0, ' ', 'Sample Task', 'This isn''t a real task.  You should close it and start opening some real tasks.', 2, 1, 1, 1, 0, 1, 1, 2, 0, 0, 0, 0, 0, '', '0', 0, 0, 0);</query>\n     <query>INSERT INTO users VALUES (DEFAULT, 'super', '1b3231655cebb7a1f783eddf27d254ca', 'Mr Super User', 'super@example.com', 'super@example.com', 0, 1, 1, '', '', '', 25, 0, 0, 0, 0, 'en', '0', '', '', 0, 0);</query>\n", "diff --git a/setup/upgrade/1.0/upgrade.info b/setup/upgrade/1.0/upgrade.info\nindex d6d83063..213dd76d 100644\n--- a/setup/upgrade/1.0/upgrade.info\n+++ b/setup/upgrade/1.0/upgrade.info\n@@ -58,3 +58,4 @@ votes_per_project=\"10\"\n custom_style=\"\"\n general_integration=\"\"\n footer_integration=\"\"\n+captcha_securimage=\"0\"\n", "diff --git a/themes/CleanFS/templates/admin.prefs.tpl b/themes/CleanFS/templates/admin.prefs.tpl\nindex 5a3e6075..438582e7 100644\n--- a/themes/CleanFS/templates/admin.prefs.tpl\n+++ b/themes/CleanFS/templates/admin.prefs.tpl\n@@ -213,13 +213,18 @@ function ShowHidePassword(id) {\n           <label for=\"needapproval\"><?php echo Filters::noXSS(L('regapprovedbyadmin')); ?></label>\n           <?php echo tpl_checkbox('need_approval', $fs->prefs['need_approval'], 'needapproval', 1, ($fs->prefs['only_oauth_reg']) ? array('disabled' => 'disabled', 'onclick' => 'check_change(true, \"needapproval\", \"spamproof\")') : array('onclick' => 'check_change(\"needapproval\", \"spamproof\")')); ?>\n         </li>\n-\n+\t\n         <li>\n           <label for=\"spamproof\"><?php echo Filters::noXSS(L('spamproof')); ?></label>\n           <?php echo tpl_checkbox('spam_proof', $fs->prefs['spam_proof'], 'spamproof', 1, ($fs->prefs['need_approval'] || $fs->prefs['only_oauth_reg'] ) ? array('disabled' => 'true') : ''); ?>\n         </li>\n-\n-        <li>\n+\t\n+\t<li>\n+\t\t<label for=\"captcha_securimage\"><?php echo Filters::noXSS(L('regcaptcha')); ?></label>\n+\t\t<?php echo tpl_checkbox('captcha_securimage', $fs->prefs['captcha_securimage'], 'captcha_securimage'); ?>\n+\t</li>\n+        \n+\t<li>\n           <label for=\"notify_registration\"><?php echo Filters::noXSS(L('notify_registration')); ?></label>\n           <?php echo tpl_checkbox('notify_registration', $fs->prefs['notify_registration'], 'notify_registration'); ?>\n         </li>\n", "diff --git a/themes/CleanFS/templates/register.no-magic.tpl b/themes/CleanFS/templates/register.no-magic.tpl\nindex 3e246d65..fd852a97 100644\n--- a/themes/CleanFS/templates/register.no-magic.tpl\n+++ b/themes/CleanFS/templates/register.no-magic.tpl\n@@ -48,6 +48,17 @@\n \t\t\t<?php echo tpl_options($times, Req::val('time_zone', 0)); ?>\n \t\t\t</select>\n \t\t</li>\n+\t\t<?php if($fs->prefs['captcha_securimage']) : ?>\n+\t\t<li class=\"captchali\">\n+\t\t\t<style>\n+                        #captcha_code{width:100px;}\n+                        .captchali .securimage label{width:auto;}\n+                        .captchali .securimage {display:inline-block; width:300px;}\n+                        </style>\n+\t\t\t<label for=\"captcha_code\"><?php echo Filters::noXSS(L('registercaptcha')); ?></label>\n+\t\t\t<div class=\"securimage\"><?php echo $captcha_securimage_html; ?></div>\n+\t\t</li>\n+\t\t<?php endif; ?>\n \t</ul>\n \t<div>\n \t\t<input type=\"hidden\" name=\"action\" value=\"register.sendcode\" />\n"], "label": 0, "cve": "CVE-2017-15214", "rank": 2, "commit": "91c821222afbcc865e41d0729ed298ac9d9da545", "cve_attention_tokens": ["xss"]}
{"cve_desc": "Jenkins versions 2.56 and earlier as well as 2.46.1 LTS and earlier are vulnerable to an XStream: Java crash when trying to instantiate void/Void.", "commit_msg": "Adjusting comment.\n", "diff": ["diff --git a/core/src/main/java/jenkins/model/Jenkins.java b/core/src/main/java/jenkins/model/Jenkins.java\nindex 7d6b3edd50..77eaeb8b01 100644\n--- a/core/src/main/java/jenkins/model/Jenkins.java\n+++ b/core/src/main/java/jenkins/model/Jenkins.java\n@@ -876,7 +876,7 @@ public class Jenkins extends AbstractCIBase implements DirectlyModifiableTopLeve\n             adjuncts = new AdjunctManager(servletContext, pluginManager.uberClassLoader,\"adjuncts/\"+SESSION_HASH, TimeUnit2.DAYS.toMillis(365));\n \n             // TODO pending move to standard blacklist, or API to append filter\n-            if (System.getProperty(ClassFilter.FILE_OVERRIDE_LOCATION_PROPERTY) == null) { // TODO 2.4+ SystemProperties\n+            if (System.getProperty(ClassFilter.FILE_OVERRIDE_LOCATION_PROPERTY) == null) { // not using SystemProperties since ClassFilter does not either\n                 try {\n                     Field blacklistPatternsF = ClassFilter.DEFAULT.getClass().getDeclaredField(\"blacklistPatterns\");\n                     blacklistPatternsF.setAccessible(true);\n"], "label": 0, "cve": "CVE-2017-1000355", "rank": 8, "commit": "566cb370d7254087cbeb7cd713acff720e61b5ab", "cve_attention_tokens": []}
{"cve_desc": "The loadUserByUsername function in hudson/security/HudsonPrivateSecurityRealm.java in Jenkins before 1.551 and LTS before 1.532.2 allows remote attackers to determine whether a user exists via vectors related to failed login attempts.", "commit_msg": "[FIXED JENKINS-17606] Reuse existing fingerprint action if present.\nPrevents multiple FingerprintActions.\n\n", "diff": ["diff --git a/changelog.html b/changelog.html\nindex 84242554e0..9f67ad35ad 100644\n--- a/changelog.html\n+++ b/changelog.html\n@@ -82,6 +82,9 @@ Upcoming changes</a>\n   <li class=bug>\n     Wrong log message for out-of-order build record repair.\n     (<a href=\"https://issues.jenkins-ci.org/browse/JENKINS-20730\">issue 20730</a>)\n+  <li class=bug>\n+    Existing Fingerprint Action is reused and not added a second time.\n+    (<a href=\"https://issues.jenkins-ci.org/browse/JENKINS-17606\">issue 19832</a>)\n </ul>\n </div><!--=TRUNK-END=-->\n \n", "diff --git a/core/src/main/java/hudson/tasks/Fingerprinter.java b/core/src/main/java/hudson/tasks/Fingerprinter.java\nindex 046231d8f2..ef01582c48 100644\n--- a/core/src/main/java/hudson/tasks/Fingerprinter.java\n+++ b/core/src/main/java/hudson/tasks/Fingerprinter.java\n@@ -132,7 +132,12 @@ public class Fingerprinter extends Recorder implements Serializable, DependencyD\n                 record(build, listener, record, expandedArtifacts);\n             }\n \n-            build.addAction(new FingerprintAction(build,record));\n+            FingerprintAction fingerprintAction = build.getAction(FingerprintAction.class);\n+            if (fingerprintAction != null) {\n+                fingerprintAction.add(record);\n+            } else {\n+                build.addAction(new FingerprintAction(build,record));\n+            }\n \n             if (enableFingerprintsInDependencyGraph) {\n                 Jenkins.getInstance().rebuildDependencyGraphAsync();\n", "diff --git a/test/src/test/java/hudson/tasks/FingerprinterTest.java b/test/src/test/java/hudson/tasks/FingerprinterTest.java\nindex fb6924d6a2..b270c1ca4e 100644\n--- a/test/src/test/java/hudson/tasks/FingerprinterTest.java\n+++ b/test/src/test/java/hudson/tasks/FingerprinterTest.java\n@@ -24,17 +24,15 @@\n \n package hudson.tasks;\n \n+import com.google.common.collect.ImmutableMap;\n+import com.google.common.collect.ImmutableSet;\n+import hudson.Launcher;\n import hudson.Util;\n import hudson.XmlFile;\n import hudson.matrix.Axis;\n import hudson.matrix.AxisList;\n import hudson.matrix.MatrixProject;\n-import hudson.model.AbstractProject;\n-import hudson.model.Fingerprint;\n-import hudson.model.FingerprintCleanupThread;\n-import hudson.model.FreeStyleBuild;\n-import hudson.model.FreeStyleProject;\n-import hudson.model.Result;\n+import hudson.model.*;\n import hudson.util.RunList;\n import java.io.File;\n \n@@ -43,10 +41,13 @@ import java.util.Arrays;\n import java.util.Collection;\n import java.util.HashSet;\n import java.util.List;\n+\n+import static org.hamcrest.Matchers.hasSize;\n import static org.junit.Assert.*;\n \n import hudson.util.StreamTaskListener;\n import jenkins.model.Jenkins;\n+import org.hamcrest.Matchers;\n import org.junit.BeforeClass;\n import org.junit.Rule;\n import org.junit.Test;\n@@ -111,6 +112,26 @@ public class FingerprinterTest {\n         assertTrue(downstreamProjects.contains(downstream));\n     }\n \n+    private static class FingerprintAddingBuilder extends Builder {\n+        @Override\n+        public boolean perform(AbstractBuild<?, ?> build, Launcher launcher, BuildListener listener) throws InterruptedException, IOException {\n+            build.addAction(new Fingerprinter.FingerprintAction(build, ImmutableMap.of(singleFiles2[0], \"fakefingerprint\")));\n+            return true;\n+        }\n+    }\n+\n+    @Test public void presentFingerprintActionIsReused() throws Exception {\n+        FreeStyleProject project = createFreeStyleProjectWithFingerprints(singleContents, singleFiles);\n+        project.getBuildersList().add(new FingerprintAddingBuilder());\n+\n+        FreeStyleBuild build = j.buildAndAssertSuccess(project);\n+\n+        assertThat(build.getActions(Fingerprinter.FingerprintAction.class), hasSize(1));\n+\n+        Fingerprinter.FingerprintAction action = build.getAction(Fingerprinter.FingerprintAction.class);\n+        assertEquals(action.getRecords().keySet(), ImmutableSet.of(singleFiles2[0], singleFiles[0]));\n+    }\n+\n     @Test public void multipleUpstreamDependencies() throws Exception {\n         FreeStyleProject upstream = createFreeStyleProjectWithFingerprints(singleContents, singleFiles);\n         FreeStyleProject upstream2 = createFreeStyleProjectWithFingerprints(singleContents2, singleFiles2);\n"], "label": 0, "cve": "CVE-2014-2064", "rank": 7, "commit": "be7a97ee32b57dcb27b8fd6c908ebbe451220902", "cve_attention_tokens": []}
{"cve_desc": "confirm.php in ATutor 2.2 and earlier allows remote attackers to bypass authentication and gain access as an existing user via the auto_login parameter.", "commit_msg": "reset topnavlistcontainer overflow to auto, to remove scrollbar from IE when its not needed\n\n", "diff": ["diff --git a/themes/default/styles.css b/themes/default/styles.css\nindex 8c7ab3410..cb7db9587 100644\n--- a/themes/default/styles.css\n+++ b/themes/default/styles.css\n@@ -10,6 +10,7 @@ blueish bg: #F5F9FC\n \tbackground-image: linear-gradient(#FAFAFA, #EAEAEA);\n */\n \n+ms-viewport {width : auto} \n \n html,body{\n \theight:100%;\n@@ -1694,8 +1695,9 @@ div#topnavlistcontainer {\n \tpadding-bottom:.5em;\n \tfloat:left;\n     margin-right: -14px !important;\n-    overflow-x:scroll;\n+    overflow-x:auto;\n     overflow-y: hidden;\n+    \n }\n ul#topnavlist {\n \tpadding: 0;\n"], "label": 0, "cve": "CVE-2014-9753", "rank": 45, "commit": "b577c070c37699f9e259591e6fcf9b2d918f96d3", "cve_attention_tokens": []}
{"cve_desc": "It was discovered that sos-collector does not properly set the default permissions of newly created files, making all files created by the tool readable by any local user. A local attacker may use this flaw by waiting for a legit user to run sos-collector and steal the collected data in the /var/tmp directory.", "commit_msg": "[tests] Add basic unit tests\n\nAdds a few basic tests such as ensuring SSH connections function, and\nthat options are properly parsed.\n\nSigned-off-by: Jake Hunsaker <jhunsake@redhat.com>\n\n", "diff": ["diff --git a/tests/option_tests.py b/tests/option_tests.py\nnew file mode 100644\nindex 0000000..f9bd0bf\n--- /dev/null\n+++ b/tests/option_tests.py\n@@ -0,0 +1,34 @@\n+import unittest\n+\n+from soscollector.configuration import Configuration, ClusterOption\n+\n+\n+class OptionTests(unittest.TestCase):\n+\n+    def setUp(self):\n+        args = {\n+            'nodes': 'localhost',\n+            'cluster_options': 'foo.bar=foobar',\n+            'enable_plugins': 'foobar,barfoo',\n+            'skip_plugins': 'barfoo'\n+        }\n+        self.config = Configuration(args)\n+\n+    def test_option_parse(self):\n+        self.assertEquals(self.config['nodes'], 'localhost')\n+\n+    def test_cluster_options_parsing(self):\n+        self.assertIsInstance(self.config['cluster_options'], list)\n+        self.assertIsInstance(self.config['cluster_options'][0], ClusterOption)\n+\n+    def test_cluster_options_value(self):\n+        opt = self.config['cluster_options'][0]\n+        self.assertEquals(opt.value, 'foobar')\n+        self.assertEquals(opt.name, 'bar')\n+        self.assertEquals(opt.cluster, 'foo')\n+\n+    def test_sos_options_plugins(self):\n+        self.assertIsInstance(self.config['enable_plugins'], list)\n+        self.assertIsInstance(self.config['skip_plugins'], list)\n+        self.assertEquals(self.config['enable_plugins'], ['foobar', 'barfoo'])\n+        self.assertEquals(self.config['skip_plugins'], ['barfoo'])\n", "diff --git a/tests/sosnode_tests.py b/tests/sosnode_tests.py\nnew file mode 100644\nindex 0000000..586924b\n--- /dev/null\n+++ b/tests/sosnode_tests.py\n@@ -0,0 +1,24 @@\n+import unittest\n+\n+from soscollector.sosnode import SosNode\n+from soscollector.configuration import Configuration\n+\n+class SosNodeTests(unittest.TestCase):\n+\n+    def setUp(self):\n+        args = {'nodes': 'localhost'}\n+        self.config = Configuration(args=args)\n+        self.node = SosNode('127.0.0.1', self.config, force=True,\n+                            load_facts=False)\n+\n+    def test_connect_local_no_check(self):\n+        self.assertTrue(self.node.connected)\n+\n+    def test_connect_local_check(self):\n+        node = SosNode('127.0.0.1', self.config, force=True)\n+        self.assertTrue(node.connected)\n+\n+    def test_command_exec(self):\n+        out = self.node.run_command('echo sos-collector')\n+        self.assertEquals(out['status'], 0)\n+        self.assertEquals(out['stdout'], 'sos-collector\\n')\n"], "label": 0, "cve": "CVE-2018-14650", "rank": 50, "commit": "52dab3092382d092df233092f5097909ff554f2d", "cve_attention_tokens": ["properly"]}
{"cve_desc": "In The Sleuth Kit (TSK) through 4.6.4, hfs_cat_traverse in tsk/fs/hfs.c does not properly determine when a key length is too large, which allows attackers to cause a denial of service (SEGV on unknown address with READ memory access in a tsk_getu16 call in hfs_dir_open_meta_cb in tsk/fs/hfs_dent.c).", "commit_msg": "fix bug that allows reading past end of layout file\n\n", "diff": ["diff --git a/bindings/java/src/org/sleuthkit/datamodel/LayoutFile.java b/bindings/java/src/org/sleuthkit/datamodel/LayoutFile.java\nindex 410ed4e79..fdec0e47c 100644\n--- a/bindings/java/src/org/sleuthkit/datamodel/LayoutFile.java\n+++ b/bindings/java/src/org/sleuthkit/datamodel/LayoutFile.java\n@@ -140,6 +140,12 @@ public void close() {\n \tprotected int readInt(byte[] buf, long offset, long len) throws TskCoreException {\n \t\tlong offsetInThisLayoutContent = 0; // current offset in this LayoutContent\n \t\tint bytesRead = 0; // Bytes read so far\n+\t\t\n+\t\t// if the caller has requested more data than we have in the file\n+\t\t// then make sure we don't go beyond the end of the file\n+\t\tlong readLen = len;\n+\t\tif (offset + readLen > size) \n+\t\t\treadLen = size - offset;\n \n \t\tif (imageHandle == -1) {\n \t\t\tContent dataSource = getDataSource();\n@@ -152,17 +158,17 @@ protected int readInt(byte[] buf, long offset, long len) throws TskCoreException\n \t\t}\n \n \t\tfor (TskFileRange range : getRanges()) {\n-\t\t\tif (bytesRead < len) { // we haven't read enough yet\n+\t\t\tif (bytesRead < readLen) { // we haven't read enough yet\n \t\t\t\tif (offset < offsetInThisLayoutContent + range.getByteLen()) { // if we are in a range object we want to read from\n \t\t\t\t\tlong offsetInRange = 0; // how far into the current range object to start reading\n \t\t\t\t\tif (bytesRead == 0) { // we haven't read anything yet so we want to read from the correct offset in this range object\n \t\t\t\t\t\toffsetInRange = offset - offsetInThisLayoutContent; // start reading from the correct offset\n \t\t\t\t\t}\n \t\t\t\t\tlong offsetInImage = range.getByteStart() + offsetInRange; // how far into the image to start reading\n-\t\t\t\t\tlong lenToRead = Math.min(range.getByteLen() - offsetInRange, len - bytesRead); // how much we can read this time\n-\t\t\t\t\tint lenRead = readImgToOffset(imageHandle, buf, bytesRead, offsetInImage, (int) lenToRead);\n+\t\t\t\t\tlong lenToReadInRange = Math.min(range.getByteLen() - offsetInRange, readLen - bytesRead); // how much we can read this time\n+\t\t\t\t\tint lenRead = readImgToOffset(imageHandle, buf, bytesRead, offsetInImage, (int) lenToReadInRange);\n \t\t\t\t\tbytesRead += lenRead;\n-\t\t\t\t\tif (lenToRead != lenRead) { // If image read failed or was cut short\n+\t\t\t\t\tif (lenToReadInRange != lenRead) { // If image read failed or was cut short\n \t\t\t\t\t\tbreak;\n \t\t\t\t\t}\n \t\t\t\t}\n"], "label": 0, "cve": "CVE-2018-19497", "rank": 39, "commit": "4f367bddca883fe7fc5b200bba28fff2bc6eb27b", "cve_attention_tokens": []}
{"cve_desc": "ImageMagick 7.0.6-2 has a memory leak vulnerability in WritePCXImage in coders/pcx.c.", "commit_msg": "https://github.com/ImageMagick/ImageMagick/issues/577\n\n", "diff": ["diff --git a/coders/pict.c b/coders/pict.c\nindex 052eff67a..fec025bb1 100644\n--- a/coders/pict.c\n+++ b/coders/pict.c\n@@ -1744,7 +1744,16 @@ static MagickBooleanType WritePICTImage(const ImageInfo *image_info,\n   if ((buffer == (unsigned char *) NULL) ||\n       (packed_scanline == (unsigned char *) NULL) ||\n       (scanline == (unsigned char *) NULL))\n-    ThrowWriterException(ResourceLimitError,\"MemoryAllocationFailed\");\n+    {\n+      if (scanline != (unsigned char *) NULL)\n+        scanline=(unsigned char *) RelinquishMagickMemory(scanline);\n+      if (packed_scanline != (unsigned char *) NULL)\n+        packed_scanline=(unsigned char *) RelinquishMagickMemory(\n+          packed_scanline);\n+      if (buffer != (unsigned char *) NULL)\n+        buffer=(unsigned char *) RelinquishMagickMemory(buffer);\n+      ThrowWriterException(ResourceLimitError,\"MemoryAllocationFailed\");\n+    }\n   (void) ResetMagickMemory(scanline,0,row_bytes);\n   (void) ResetMagickMemory(packed_scanline,0,(size_t) (row_bytes+MaxCount));\n   /*\n"], "label": 0, "cve": "CVE-2017-12668", "rank": 21, "commit": "c1b09bbec148f6ae11d0b686fdb89ac6dc0ab14e", "cve_attention_tokens": []}
{"cve_desc": "Cross-site scripting (XSS) vulnerability in ZMI pages that use the manage_tabs_message in Zope 2.11.4, 2.11.2, 2.10.9, 2.10.7, 2.10.6, 2.10.5, 2.10.4, 2.10.2, 2.10.1, 2.12.", "commit_msg": "LP #142478:  normalize terms passed to ``PLexicon.queryLexicon``\n\no Use the lexicon's pipeline (e.g., case flattening, stop word removal, etc.)\n\no Forward-port from 2.12 branch.\n\n", "diff": ["diff --git a/doc/CHANGES.rst b/doc/CHANGES.rst\nindex 92751c2b0..fa04c2fbc 100644\n--- a/doc/CHANGES.rst\n+++ b/doc/CHANGES.rst\n@@ -153,6 +153,9 @@ Features Added\n Bugs Fixed\n ++++++++++\n \n+- LP #142478:  normalize terms passed to ``PLexicon.queryLexicon`` using\n+  the lexicon's pipeline (e.g., case flattening, stop word removal, etc.)\n+\n - LP #143604: Removed top-level database-quota-size from zope.conf, some\n   storages support a quota option instead.\n \n", "diff --git a/src/Products/ZCTextIndex/ZCTextIndex.py b/src/Products/ZCTextIndex/ZCTextIndex.py\nindex f3a987cba..97a375772 100644\n--- a/src/Products/ZCTextIndex/ZCTextIndex.py\n+++ b/src/Products/ZCTextIndex/ZCTextIndex.py\n@@ -358,7 +358,7 @@ class PLexicon(Lexicon, Implicit, SimpleItem):\n         \"\"\"\n         if words:\n             wids = []\n-            for word in words:\n+            for word in self.parseTerms(words):\n                 wids.extend(self.globToWordIds(word))\n             words = [self.get_word(wid) for wid in wids]\n         else:\n@@ -384,16 +384,20 @@ class PLexicon(Lexicon, Implicit, SimpleItem):\n             columns.append(words[i:i + rows])\n             i += rows\n \n-        return self._queryLexicon(self, REQUEST,\n-                                  page=page,\n-                                  rows=rows,\n-                                  cols=cols,\n-                                  start_word=start+1,\n-                                  end_word=end,\n-                                  word_count=word_count,\n-                                  page_count=page_count,\n-                                  page_range=xrange(page_count),\n-                                  page_columns=columns)\n+        info = dict(page=page,\n+                    rows=rows,\n+                    cols=cols,\n+                    start_word=start+1,\n+                    end_word=end,\n+                    word_count=word_count,\n+                    page_count=page_count,\n+                    page_range=xrange(page_count),\n+                    page_columns=columns)\n+\n+        if REQUEST is not None:\n+            return self._queryLexicon(self, REQUEST, **info)\n+\n+        return info\n \n     security.declareProtected(LexiconMgmtPerm, 'manage_main')\n     manage_main = DTMLFile('dtml/manageLexicon', globals())\n", "diff --git a/src/Products/ZCTextIndex/tests/testZCTextIndex.py b/src/Products/ZCTextIndex/tests/testZCTextIndex.py\nindex fa0289dd5..5fc46cc72 100644\n--- a/src/Products/ZCTextIndex/tests/testZCTextIndex.py\n+++ b/src/Products/ZCTextIndex/tests/testZCTextIndex.py\n@@ -245,6 +245,7 @@ class ZCIndexTestsBase:\n                     nbest, total = self.zc_index.query(w)\n                     self.assertEqual(total, 0, \"did not expect to find %s\" % w)\n \n+\n class CosineIndexTests(ZCIndexTestsBase, testIndex.CosineIndexTest):\n \n     # A fairly involved test of the ranking calculations based on\n@@ -566,13 +567,144 @@ class OkapiQueryTests(QueryTestsBase):\n \n class PLexiconTests(unittest.TestCase):\n \n-    def test_z3interfaces(self):\n+    def _getTargetClass(self):\n+        from Products.ZCTextIndex.ZCTextIndex import PLexicon\n+        return PLexicon\n+\n+    def _makeOne(self, id='testing', title='Testing', *pipeline):\n+        return self._getTargetClass()(id, title, *pipeline)\n+\n+    def test_class_conforms_to_ILexicon(self):\n         from Products.ZCTextIndex.interfaces import ILexicon\n+        from zope.interface.verify import verifyClass\n+        verifyClass(ILexicon, self._getTargetClass())\n+\n+    def test_instance_conforms_to_ILexicon(self):\n+        from Products.ZCTextIndex.interfaces import ILexicon\n+        from zope.interface.verify import verifyObject\n+        verifyObject(ILexicon, self._makeOne())\n+\n+    def test_class_conforms_to_IZCLexicon(self):\n         from Products.ZCTextIndex.interfaces import IZCLexicon\n         from zope.interface.verify import verifyClass\n+        verifyClass(IZCLexicon, self._getTargetClass())\n \n-        verifyClass(ILexicon, PLexicon)\n-        verifyClass(IZCLexicon, PLexicon)\n+    def test_instance_conforms_to_IZCLexicon(self):\n+        from Products.ZCTextIndex.interfaces import IZCLexicon\n+        from zope.interface.verify import verifyObject\n+        verifyObject(IZCLexicon, self._makeOne())\n+\n+    def test_queryLexicon_defaults_empty(self):\n+        lexicon = self._makeOne()\n+        info = lexicon.queryLexicon(REQUEST=None, words=None)\n+        self.assertEqual(info['page'], 0)\n+        self.assertEqual(info['rows'], 20)\n+        self.assertEqual(info['cols'], 4)\n+        self.assertEqual(info['start_word'], 1)\n+        self.assertEqual(info['end_word'], 0)\n+        self.assertEqual(info['word_count'], 0)\n+        self.assertEqual(list(info['page_range']), [])\n+        self.assertEqual(info['page_columns'], [])\n+\n+    def test_queryLexicon_defaults_non_empty(self):\n+        WORDS = 'aaa bbb ccc ddd eee fff ggg'.split()\n+        lexicon = self._makeOne()\n+        lexicon.sourceToWordIds(WORDS)\n+        info = lexicon.queryLexicon(REQUEST=None, words=None)\n+        self.assertEqual(info['page'], 0)\n+        self.assertEqual(info['rows'], 20)\n+        self.assertEqual(info['cols'], 4)\n+        self.assertEqual(info['start_word'], 1)\n+        self.assertEqual(info['end_word'], 7)\n+        self.assertEqual(info['word_count'], 7)\n+        self.assertEqual(list(info['page_range']), [0])\n+        self.assertEqual(info['page_columns'], [WORDS])\n+\n+    def test_queryLexicon_row_breaks(self):\n+        WORDS = 'aaa bbb ccc ddd eee fff ggg'.split()\n+        lexicon = self._makeOne()\n+        lexicon.sourceToWordIds(WORDS)\n+        info = lexicon.queryLexicon(REQUEST=None, words=None, rows=4)\n+        self.assertEqual(info['page'], 0)\n+        self.assertEqual(info['rows'], 4)\n+        self.assertEqual(info['cols'], 4)\n+        self.assertEqual(info['start_word'], 1)\n+        self.assertEqual(info['end_word'], 7)\n+        self.assertEqual(info['word_count'], 7)\n+        self.assertEqual(list(info['page_range']), [0])\n+        self.assertEqual(info['page_columns'], [WORDS[0:4], WORDS[4:]])\n+\n+    def test_queryLexicon_page_breaks(self):\n+        WORDS = 'aaa bbb ccc ddd eee fff ggg'.split()\n+        lexicon = self._makeOne()\n+        lexicon.sourceToWordIds(WORDS)\n+        info = lexicon.queryLexicon(REQUEST=None, words=None, rows=2, cols=2)\n+        self.assertEqual(info['page'], 0)\n+        self.assertEqual(info['rows'], 2)\n+        self.assertEqual(info['cols'], 2)\n+        self.assertEqual(info['start_word'], 1)\n+        self.assertEqual(info['end_word'], 4)\n+        self.assertEqual(info['word_count'], 7)\n+        self.assertEqual(list(info['page_range']), [0, 1])\n+        self.assertEqual(info['page_columns'], [WORDS[0:2], WORDS[2:4]])\n+\n+    def test_queryLexicon_page_break_not_first(self):\n+        WORDS = 'aaa bbb ccc ddd eee fff ggg'.split()\n+        lexicon = self._makeOne()\n+        lexicon.sourceToWordIds(WORDS)\n+        info = lexicon.queryLexicon(REQUEST=None, words=None,\n+                                    page=1, rows=2, cols=2)\n+        self.assertEqual(info['page'], 1)\n+        self.assertEqual(info['rows'], 2)\n+        self.assertEqual(info['cols'], 2)\n+        self.assertEqual(info['start_word'], 5)\n+        self.assertEqual(info['end_word'], 7)\n+        self.assertEqual(info['word_count'], 7)\n+        self.assertEqual(list(info['page_range']), [0, 1])\n+        self.assertEqual(info['page_columns'], [WORDS[4:6], WORDS[6:]])\n+\n+    def test_queryLexicon_words_no_globbing(self):\n+        WORDS = 'aaa bbb ccc ddd eee fff ggg'.split()\n+        lexicon = self._makeOne()\n+        lexicon.sourceToWordIds(WORDS)\n+        info = lexicon.queryLexicon(REQUEST=None, words=['aaa', 'bbb'])\n+        self.assertEqual(info['page'], 0)\n+        self.assertEqual(info['rows'], 20)\n+        self.assertEqual(info['cols'], 4)\n+        self.assertEqual(info['start_word'], 1)\n+        self.assertEqual(info['end_word'], 2)\n+        self.assertEqual(info['word_count'], 2)\n+        self.assertEqual(list(info['page_range']), [0])\n+        self.assertEqual(info['page_columns'], [['aaa', 'bbb']])\n+\n+    def test_queryLexicon_words_w_globbing(self):\n+        WORDS = 'aaa bbb ccc ddd eee fff ggg'.split()\n+        lexicon = self._makeOne()\n+        lexicon.sourceToWordIds(WORDS)\n+        info = lexicon.queryLexicon(REQUEST=None, words=['aa*', 'bbb*'])\n+        self.assertEqual(info['page'], 0)\n+        self.assertEqual(info['rows'], 20)\n+        self.assertEqual(info['cols'], 4)\n+        self.assertEqual(info['start_word'], 1)\n+        self.assertEqual(info['end_word'], 2)\n+        self.assertEqual(info['word_count'], 2)\n+        self.assertEqual(list(info['page_range']), [0])\n+        self.assertEqual(info['page_columns'], [['aaa', 'bbb']])\n+\n+    def test_queryLexicon_uses_pipeline_for_normalization(self):\n+        from Products.ZCTextIndex.Lexicon import CaseNormalizer\n+        WORDS = 'aaa bbb ccc ddd eee fff ggg'.split()\n+        lexicon = self._makeOne('test', 'Testing', CaseNormalizer())\n+        lexicon.sourceToWordIds(WORDS)\n+        info = lexicon.queryLexicon(REQUEST=None, words=['AA*', 'Bbb*'])\n+        self.assertEqual(info['page'], 0)\n+        self.assertEqual(info['rows'], 20)\n+        self.assertEqual(info['cols'], 4)\n+        self.assertEqual(info['start_word'], 1)\n+        self.assertEqual(info['end_word'], 2)\n+        self.assertEqual(info['word_count'], 2)\n+        self.assertEqual(list(info['page_range']), [0])\n+        self.assertEqual(info['page_columns'], [['aaa', 'bbb']])\n \n \n def test_suite():\n"], "label": 0, "cve": "CVE-2009-5145", "rank": 47, "commit": "ec14575101c6a0f73042bd50f2f342ebff1f92c6", "cve_attention_tokens": []}
{"cve_desc": "In tmux before version 3.1c the function input_csi_dispatch_sgr_colon() in file input.c contained a stack-based buffer-overflow that can be exploited by terminal output.", "commit_msg": "Only send XDA on 0.\n\n", "diff": ["diff --git a/input.c b/input.c\nindex ebd2bc27..ffa22995 100644\n--- a/input.c\n+++ b/input.c\n@@ -1609,7 +1609,9 @@ input_csi_dispatch(struct input_ctx *ictx)\n \t\t\tscreen_set_cursor_style(s, n);\n \t\tbreak;\n \tcase INPUT_CSI_XDA:\n-\t\tinput_reply(ictx, \"\\033P>|tmux %s\\033\\\\\", getversion());\n+\t\tn = input_get(ictx, 0, 0, 0);\n+\t\tif (n != 0)\n+\t\t\tinput_reply(ictx, \"\\033P>|tmux %s\\033\\\\\", getversion());\n \t\tbreak;\n \n \t}\n"], "label": 0, "cve": "CVE-2020-27347", "rank": 23, "commit": "0b828b91a5f9bdf8d62e4352a842ec98a32b0b92", "cve_attention_tokens": []}
{"cve_desc": "An issue was discovered in Mutt before 1.10.1 and NeoMutt before 2018-07-16. They allow remote IMAP servers to execute arbitrary commands via backquote characters, related to the mailboxes command associated with a manual subscription or unsubscription.", "commit_msg": "Remove pgperrfile from pgp_class_application_handler\n\n", "diff": ["diff --git a/ncrypt/pgp.c b/ncrypt/pgp.c\nindex 1922bf81b..9c74acf70 100644\n--- a/ncrypt/pgp.c\n+++ b/ncrypt/pgp.c\n@@ -407,7 +407,6 @@ int pgp_class_application_handler(struct Body *m, struct State *s)\n   long bytes;\n   LOFF_T last_pos, offset;\n   char buf[HUGE_STRING];\n-  char pgperrfile[PATH_MAX];\n   char tmpfname[PATH_MAX];\n   FILE *pgpout = NULL, *pgpin = NULL, *pgperr = NULL;\n   FILE *tmpfp = NULL;\n@@ -517,14 +516,13 @@ int pgp_class_application_handler(struct Body *m, struct State *s)\n           goto out;\n         }\n \n-        mutt_mktemp(pgperrfile, sizeof(pgperrfile));\n-        if ((pgperr = mutt_file_fopen(pgperrfile, \"w+\")) == NULL)\n+        pgperr = mutt_file_mkstemp();\n+        if (!pgperr)\n         {\n-          mutt_perror(pgperrfile);\n+          mutt_perror(\"mutt_file_mkstemp() failed!\");\n           rc = -1;\n           goto out;\n         }\n-        unlink(pgperrfile);\n \n         thepid = pgp_invoke_decode(&pgpin, NULL, NULL, -1, fileno(pgpout),\n                                    fileno(pgperr), tmpfname, (needpass != 0));\n"], "label": 0, "cve": "CVE-2018-14354", "rank": 46, "commit": "3c82dadcb3421d3ebf4cc85a056fa34d9474b0d4", "cve_attention_tokens": []}
{"cve_desc": "A flaw was found in jackson-databind before 2.9.10.7. FasterXML mishandles the interaction between serialization gadgets and typing. The highest threat from this vulnerability is to data confidentiality and integrity as well as system availability.", "commit_msg": "Add a mention on release notes of #2858\n\n", "diff": ["diff --git a/release-notes/VERSION b/release-notes/VERSION\nindex 136665c1e..7179f832f 100644\n--- a/release-notes/VERSION\n+++ b/release-notes/VERSION\n@@ -4,6 +4,12 @@ Project: jackson-databind\n === Releases ===\n ------------------------------------------------------------------------\n \n+Since last release\n+\n+- Bunch of CVE backports from 2.9 (via https://github.com/FasterXML/jackson-databind/pull/2858)\n+  *  #2653 #2658 #2659 #2660 #2662 #2664 #2666 #2670 #2680 #2682 #2688 #2698\n+     #2704 #2765 #2798 #2814 #2826 #2827 #2854\n+\n 2.7.9.7 (10-Mar-2020)\n \n #2410: Block one more gadget type (HikariCP, CVE-2019-14540)\n"], "label": 0, "cve": "CVE-2021-20190", "rank": 14, "commit": "74bfed9c7f9434de4a539becfe03e4da28a22247", "cve_attention_tokens": ["faster"]}
{"cve_desc": "The (1) django.http.HttpResponseRedirect and (2) django.http.HttpResponsePermanentRedirect classes in Django before 1.3.2 and 1.4.x before 1.4.1 do not validate the scheme of a redirect target, which might allow remote attackers to conduct cross-site scripting (XSS) attacks via a data: URL.", "commit_msg": "[1.3.X] Fixed #14648 -- Fixed annotated date querysets when `GeoManager` is used.  Thanks, codysoyland, for the bug report.\n\nBackport of r16796 from trunk.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/branches/releases/1.3.X@16844 bcc190cf-cafb-0310-a4f2-bffc1f526a37\n\n", "diff": ["diff --git a/django/contrib/gis/db/backends/spatialite/compiler.py b/django/contrib/gis/db/backends/spatialite/compiler.py\ndeleted file mode 100644\nindex 3f81ae68a1..0000000000\n--- a/django/contrib/gis/db/backends/spatialite/compiler.py\n+++ /dev/null\n@@ -1,32 +0,0 @@\n-from django.db.backends.util import typecast_timestamp\n-from django.db.models.sql import compiler\n-from django.db.models.sql.constants import MULTI\n-from django.contrib.gis.db.models.sql.compiler import GeoSQLCompiler as BaseGeoSQLCompiler\n-\n-SQLCompiler = compiler.SQLCompiler\n-\n-class GeoSQLCompiler(BaseGeoSQLCompiler, SQLCompiler):\n-    pass\n-\n-class SQLInsertCompiler(compiler.SQLInsertCompiler, GeoSQLCompiler):\n-    pass\n-\n-class SQLDeleteCompiler(compiler.SQLDeleteCompiler, GeoSQLCompiler):\n-    pass\n-\n-class SQLUpdateCompiler(compiler.SQLUpdateCompiler, GeoSQLCompiler):\n-    pass\n-\n-class SQLAggregateCompiler(compiler.SQLAggregateCompiler, GeoSQLCompiler):\n-    pass\n-\n-class SQLDateCompiler(compiler.SQLDateCompiler, GeoSQLCompiler):\n-    \"\"\"\n-    This is overridden for GeoDjango to properly cast date columns, see #16757.\n-    \"\"\"\n-    def results_iter(self):\n-        offset = len(self.query.extra_select)\n-        for rows in self.execute_sql(MULTI):\n-            for row in rows:\n-                date = typecast_timestamp(str(row[offset]))\n-                yield date\n", "diff --git a/django/contrib/gis/db/backends/spatialite/operations.py b/django/contrib/gis/db/backends/spatialite/operations.py\nindex 1dc612c97b..e6f8409fdb 100644\n--- a/django/contrib/gis/db/backends/spatialite/operations.py\n+++ b/django/contrib/gis/db/backends/spatialite/operations.py\n@@ -48,7 +48,7 @@ def get_dist_ops(operator):\n     return (SpatiaLiteDistance(operator),)\n \n class SpatiaLiteOperations(DatabaseOperations, BaseSpatialOperations):\n-    compiler_module = 'django.contrib.gis.db.backends.spatialite.compiler'\n+    compiler_module = 'django.contrib.gis.db.models.sql.compiler'\n     name = 'spatialite'\n     spatialite = True\n     version_regex = re.compile(r'^(?P<major>\\d)\\.(?P<minor1>\\d)\\.(?P<minor2>\\d+)')\n", "diff --git a/django/contrib/gis/db/models/sql/compiler.py b/django/contrib/gis/db/models/sql/compiler.py\nindex 782ce78368..405a000f42 100644\n--- a/django/contrib/gis/db/models/sql/compiler.py\n+++ b/django/contrib/gis/db/models/sql/compiler.py\n@@ -1,7 +1,7 @@\n from itertools import izip\n-from django.db.backends.util import truncate_name\n+from django.db.backends.util import truncate_name, typecast_timestamp\n from django.db.models.sql import compiler\n-from django.db.models.sql.constants import TABLE_NAME\n+from django.db.models.sql.constants import TABLE_NAME, MULTI\n from django.db.models.sql.query import get_proxied_model\n \n SQLCompiler = compiler.SQLCompiler\n@@ -194,7 +194,7 @@ class GeoSQLCompiler(compiler.SQLCompiler):\n             # We resolve the rest of the columns if we're on Oracle or if\n             # the `geo_values` attribute is defined.\n             for value, field in map(None, row[index_start:], fields):\n-                values.append(self.query.convert_values(value, field, connection=self.connection))\n+                values.append(self.query.convert_values(value, field, self.connection))\n         else:\n             values.extend(row[index_start:])\n         return tuple(values)\n@@ -275,4 +275,24 @@ class SQLAggregateCompiler(compiler.SQLAggregateCompiler, GeoSQLCompiler):\n     pass\n \n class SQLDateCompiler(compiler.SQLDateCompiler, GeoSQLCompiler):\n-    pass\n+    \"\"\"\n+    This is overridden for GeoDjango to properly cast date columns, since\n+    `GeoQuery.resolve_columns` is used for spatial values.\n+    See #14648, #16757.\n+    \"\"\"\n+    def results_iter(self):\n+        if self.connection.ops.oracle:\n+            from django.db.models.fields import DateTimeField\n+            fields = [DateTimeField()]\n+        else:\n+            needs_string_cast = self.connection.features.needs_datetime_string_cast\n+\n+        offset = len(self.query.extra_select)\n+        for rows in self.execute_sql(MULTI):\n+            for row in rows:\n+                date = row[offset]\n+                if self.connection.ops.oracle:\n+                    date = self.resolve_columns(row, fields)[offset]\n+                elif needs_string_cast:\n+                    date = typecast_timestamp(str(date))\n+                yield date\n", "diff --git a/django/contrib/gis/tests/relatedapp/fixtures/initial_data.json.gz b/django/contrib/gis/tests/relatedapp/fixtures/initial_data.json.gz\nindex 68bf54c1b0..893763724b 100644\nBinary files a/django/contrib/gis/tests/relatedapp/fixtures/initial_data.json.gz and b/django/contrib/gis/tests/relatedapp/fixtures/initial_data.json.gz differ\n", "diff --git a/django/contrib/gis/tests/relatedapp/models.py b/django/contrib/gis/tests/relatedapp/models.py\nindex 2e9a62b61f..aec4e15749 100644\n--- a/django/contrib/gis/tests/relatedapp/models.py\n+++ b/django/contrib/gis/tests/relatedapp/models.py\n@@ -36,6 +36,7 @@ class Parcel(models.Model):\n # These use the GeoManager but do not have any geographic fields.\n class Author(models.Model):\n     name = models.CharField(max_length=100)\n+    dob = models.DateField()\n     objects = models.GeoManager()\n \n class Article(models.Model):\n", "diff --git a/django/contrib/gis/tests/relatedapp/tests.py b/django/contrib/gis/tests/relatedapp/tests.py\nindex 250783b2de..1a6197cb6d 100644\n--- a/django/contrib/gis/tests/relatedapp/tests.py\n+++ b/django/contrib/gis/tests/relatedapp/tests.py\n@@ -1,3 +1,4 @@\n+from datetime import date\n from django.test import TestCase\n \n from django.contrib.gis.geos import GEOSGeometry, Point, MultiPoint\n@@ -281,4 +282,11 @@ class RelatedGeoModelTest(TestCase):\n         # evaluated as list generation swallows TypeError in CPython.\n         sql = str(qs.query)\n \n+    def test16_annotated_date_queryset(self):\n+        \"Ensure annotated date querysets work if spatial backend is used.  See #14648.\"\n+        birth_years = [dt.year for dt in \n+                       list(Author.objects.annotate(num_books=Count('books')).dates('dob', 'year'))]\n+        birth_years.sort()\n+        self.assertEqual([1950, 1974], birth_years)\n+\n     # TODO: Related tests for KML, GML, and distance lookups.\n"], "label": 0, "cve": "CVE-2012-3442", "rank": 56, "commit": "ae51b46d1904ac14c3c67e440db9ae3506f300ec", "cve_attention_tokens": []}
{"cve_desc": "Heap-based buffer overflow in the curl_easy_unescape function in lib/escape.c in cURL and libcurl 7.7 through 7.30.0 allows remote attackers to cause a denial of service (application crash) or possibly execute arbitrary code via a crafted string ending in a \"%\" (percent) character.", "commit_msg": "url: Added smtp and pop3 hostnames to the protocol detection list\n\n", "diff": ["diff --git a/lib/url.c b/lib/url.c\nindex b43829220..cef8a9806 100644\n--- a/lib/url.c\n+++ b/lib/url.c\n@@ -3771,6 +3771,10 @@ static CURLcode parseurlandfillconn(struct SessionHandle *data,\n         protop = \"LDAP\";\n       else if(checkprefix(\"IMAP.\", conn->host.name))\n         protop = \"IMAP\";\n+      else if(checkprefix(\"SMTP.\", conn->host.name))\n+        protop = \"smtp\";\n+      else if(checkprefix(\"POP3.\", conn->host.name))\n+        protop = \"pop3\";\n       else {\n         protop = \"http\";\n       }\n"], "label": 0, "cve": "CVE-2013-2174", "rank": 45, "commit": "2af9fd49608700d07384431f350823a6c76e8185", "cve_attention_tokens": []}
{"cve_desc": "In affected versions of WordPress, due to an issue in wp_validate_redirect() and URL sanitization, an arbitrary external link can be crafted leading to unintended/open redirect when clicked. This has been patched in version 5.4.2, along with all the previously affected versions via a minor release (5.3.4, 5.2.7, 5.1.6, 5.0.10, 4.9.15, 4.8.14, 4.7.18, 4.6.19, 4.5.22, 4.4.23, 4.3.24, 4.2.28, 4.1.31, 4.0.31, 3.9.32, 3.8.34, 3.7.34).", "commit_msg": "Bundled Themes: Twenty Twenty submenu items disappear underneath the Cover block.\nFixes the submenu issue by raising the z-index value of the site-header from 1 to 2.\n\nThis brings the changes in [47609] to the 5.4 branch.\n\nProps kjellr, JavierCasares.\nFixes #49322.\n\n\ngit-svn-id: https://develop.svn.wordpress.org/branches/5.4@47825 602fd350-edb4-49c9-b593-d223f7449a82\n\n", "diff": ["diff --git a/src/wp-content/themes/twentytwenty/style-rtl.css b/src/wp-content/themes/twentytwenty/style-rtl.css\nindex a1214bafcb..ae9bcb3412 100644\n--- a/src/wp-content/themes/twentytwenty/style-rtl.css\n+++ b/src/wp-content/themes/twentytwenty/style-rtl.css\n@@ -5598,7 +5598,7 @@ a.to-the-top > * {\n \t/* Site Header --------------------------- */\n \n \t#site-header {\n-\t\tz-index: 1;\n+\t\tz-index: 2;\n \t}\n \n \t.header-inner {\n", "diff --git a/src/wp-content/themes/twentytwenty/style.css b/src/wp-content/themes/twentytwenty/style.css\nindex 8183f8be0c..dfcd64fa07 100644\n--- a/src/wp-content/themes/twentytwenty/style.css\n+++ b/src/wp-content/themes/twentytwenty/style.css\n@@ -5670,7 +5670,7 @@ a.to-the-top > * {\n \t/* Site Header --------------------------- */\n \n \t#site-header {\n-\t\tz-index: 1;\n+\t\tz-index: 2;\n \t}\n \n \t.header-inner {\n"], "label": 0, "cve": "CVE-2020-4048", "rank": 18, "commit": "54bb2e0a4fba531a860357032f2433c6e63bb971", "cve_attention_tokens": []}
{"cve_desc": "In PrestaShop between versions 1.6.0.0 and 1.7.6.5, there is a reflected XSS with `date_from` and `date_to` parameters in the dashboard page This problem is fixed in 1.7.6.5", "commit_msg": "Id must be cast in integer\n\n", "diff": ["diff --git a/classes/controller/AdminController.php b/classes/controller/AdminController.php\nindex b5c03449e6..e2e8058c86 100644\n--- a/classes/controller/AdminController.php\n+++ b/classes/controller/AdminController.php\n@@ -4081,7 +4081,7 @@ class AdminControllerCore extends Controller\n                 $result = true;\n                 foreach ($this->boxes as $id) {\n                     /** @var $to_delete ObjectModel */\n-                    $to_delete = new $this->className($id);\n+                    $to_delete = new $this->className((int) $id);\n                     $delete_ok = true;\n                     if ($this->deleted) {\n                         $to_delete->deleted = 1;\n@@ -4097,7 +4097,7 @@ class AdminControllerCore extends Controller\n                     if ($delete_ok) {\n                         PrestaShopLogger::addLog(sprintf($this->l('%s deletion', 'AdminTab', false, false), $this->className), 1, null, $this->className, (int) $to_delete->id, true, (int) $this->context->employee->id);\n                     } else {\n-                        $this->errors[] = $this->trans('Can\\'t delete #%id%', array('%id%' => $id), 'Admin.Notifications.Error');\n+                        $this->errors[] = $this->trans('Can\\'t delete #%id%', array('%id%' => (int) $id), 'Admin.Notifications.Error');\n                     }\n                 }\n                 if ($result) {\n"], "label": 0, "cve": "CVE-2020-5271", "rank": 20, "commit": "b918ba8274cc709aaf548d84903564eb124c24b9", "cve_attention_tokens": []}
{"cve_desc": "firefly-iii is vulnerable to Improper Restriction of Excessive Authentication Attempts", "commit_msg": "Update PHP code, code cleanup.\n\n", "diff": ["diff --git a/app/Api/V1/Controllers/Data/Bulk/AccountController.php b/app/Api/V1/Controllers/Data/Bulk/AccountController.php\nindex 09719a0b3e..a3584e1ed6 100644\n--- a/app/Api/V1/Controllers/Data/Bulk/AccountController.php\n+++ b/app/Api/V1/Controllers/Data/Bulk/AccountController.php\n@@ -1,4 +1,25 @@\n <?php\n+\n+/*\n+ * AccountController.php\n+ * Copyright (c) 2021 james@firefly-iii.org\n+ *\n+ * This file is part of Firefly III (https://github.com/firefly-iii).\n+ *\n+ * This program is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU Affero General Public License as\n+ * published by the Free Software Foundation, either version 3 of the\n+ * License, or (at your option) any later version.\n+ *\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU Affero General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU Affero General Public License\n+ * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n+ */\n+\n declare(strict_types=1);\n \n namespace FireflyIII\\Api\\V1\\Controllers\\Data\\Bulk;\n", "diff --git a/app/Api/V1/Controllers/Data/Bulk/TransactionController.php b/app/Api/V1/Controllers/Data/Bulk/TransactionController.php\nindex 7ce0be96e8..1138b4838c 100644\n--- a/app/Api/V1/Controllers/Data/Bulk/TransactionController.php\n+++ b/app/Api/V1/Controllers/Data/Bulk/TransactionController.php\n@@ -1,5 +1,27 @@\n <?php\n \n+/*\n+ * TransactionController.php\n+ * Copyright (c) 2021 james@firefly-iii.org\n+ *\n+ * This file is part of Firefly III (https://github.com/firefly-iii).\n+ *\n+ * This program is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU Affero General Public License as\n+ * published by the Free Software Foundation, either version 3 of the\n+ * License, or (at your option) any later version.\n+ *\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU Affero General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU Affero General Public License\n+ * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n+ */\n+\n+declare(strict_types=1);\n+\n namespace FireflyIII\\Api\\V1\\Controllers\\Data\\Bulk;\n \n use FireflyIII\\Api\\V1\\Controllers\\Controller;\n@@ -72,4 +94,4 @@ private function updatesTransactionAccount(array $params): bool\n         return array_key_exists('source_account_id', $params['where']) && array_key_exists('destination_account_id', $params['update']);\n     }\n \n-}\n\\ No newline at end of file\n+}\n", "diff --git a/app/Api/V1/Controllers/Data/Export/ExportController.php b/app/Api/V1/Controllers/Data/Export/ExportController.php\nindex f90de392d8..72786554b4 100644\n--- a/app/Api/V1/Controllers/Data/Export/ExportController.php\n+++ b/app/Api/V1/Controllers/Data/Export/ExportController.php\n@@ -1,7 +1,7 @@\n <?php\n-declare(strict_types=1);\n+\n /*\n- * AccountController.php\n+ * ExportController.php\n  * Copyright (c) 2021 james@firefly-iii.org\n  *\n  * This file is part of Firefly III (https://github.com/firefly-iii).\n@@ -20,6 +20,8 @@\n  * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n  */\n \n+declare(strict_types=1);\n+\n namespace FireflyIII\\Api\\V1\\Controllers\\Data\\Export;\n \n use FireflyIII\\Api\\V1\\Controllers\\Controller;\n", "diff --git a/app/Api/V1/Controllers/Insight/Expense/BillController.php b/app/Api/V1/Controllers/Insight/Expense/BillController.php\nindex 7bb372af26..c73cc8e1b8 100644\n--- a/app/Api/V1/Controllers/Insight/Expense/BillController.php\n+++ b/app/Api/V1/Controllers/Insight/Expense/BillController.php\n@@ -1,7 +1,7 @@\n <?php\n-declare(strict_types=1);\n+\n /*\n- * PeriodController.php\n+ * BillController.php\n  * Copyright (c) 2021 james@firefly-iii.org\n  *\n  * This file is part of Firefly III (https://github.com/firefly-iii).\n@@ -20,6 +20,8 @@\n  * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n  */\n \n+declare(strict_types=1);\n+\n namespace FireflyIII\\Api\\V1\\Controllers\\Insight\\Expense;\n \n use FireflyIII\\Api\\V1\\Controllers\\Controller;\n", "diff --git a/app/Api/V1/Controllers/Insight/Expense/TagController.php b/app/Api/V1/Controllers/Insight/Expense/TagController.php\nindex bdbeeb8f23..d9e16fba55 100644\n--- a/app/Api/V1/Controllers/Insight/Expense/TagController.php\n+++ b/app/Api/V1/Controllers/Insight/Expense/TagController.php\n@@ -1,7 +1,7 @@\n <?php\n-declare(strict_types=1);\n+\n /*\n- * PeriodController.php\n+ * TagController.php\n  * Copyright (c) 2021 james@firefly-iii.org\n  *\n  * This file is part of Firefly III (https://github.com/firefly-iii).\n@@ -20,6 +20,8 @@\n  * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n  */\n \n+declare(strict_types=1);\n+\n namespace FireflyIII\\Api\\V1\\Controllers\\Insight\\Expense;\n \n use FireflyIII\\Api\\V1\\Controllers\\Controller;\n", "diff --git a/app/Api/V1/Controllers/Insight/Income/TagController.php b/app/Api/V1/Controllers/Insight/Income/TagController.php\nindex 6b3714f7ac..37eb525a60 100644\n--- a/app/Api/V1/Controllers/Insight/Income/TagController.php\n+++ b/app/Api/V1/Controllers/Insight/Income/TagController.php\n@@ -1,7 +1,7 @@\n <?php\n-declare(strict_types=1);\n+\n /*\n- * PeriodController.php\n+ * TagController.php\n  * Copyright (c) 2021 james@firefly-iii.org\n  *\n  * This file is part of Firefly III (https://github.com/firefly-iii).\n@@ -20,6 +20,8 @@\n  * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n  */\n \n+declare(strict_types=1);\n+\n namespace FireflyIII\\Api\\V1\\Controllers\\Insight\\Income;\n \n use FireflyIII\\Api\\V1\\Controllers\\Controller;\n", "diff --git a/app/Api/V1/Requests/Data/Bulk/MoveTransactionsRequest.php b/app/Api/V1/Requests/Data/Bulk/MoveTransactionsRequest.php\nindex 3e17e64644..e343066d47 100644\n--- a/app/Api/V1/Requests/Data/Bulk/MoveTransactionsRequest.php\n+++ b/app/Api/V1/Requests/Data/Bulk/MoveTransactionsRequest.php\n@@ -1,4 +1,25 @@\n <?php\n+\n+/*\n+ * MoveTransactionsRequest.php\n+ * Copyright (c) 2021 james@firefly-iii.org\n+ *\n+ * This file is part of Firefly III (https://github.com/firefly-iii).\n+ *\n+ * This program is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU Affero General Public License as\n+ * published by the Free Software Foundation, either version 3 of the\n+ * License, or (at your option) any later version.\n+ *\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU Affero General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU Affero General Public License\n+ * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n+ */\n+\n declare(strict_types=1);\n \n namespace FireflyIII\\Api\\V1\\Requests\\Data\\Bulk;\n", "diff --git a/app/Api/V1/Requests/Data/Bulk/TransactionRequest.php b/app/Api/V1/Requests/Data/Bulk/TransactionRequest.php\nindex 3231425c13..02e013fdea 100644\n--- a/app/Api/V1/Requests/Data/Bulk/TransactionRequest.php\n+++ b/app/Api/V1/Requests/Data/Bulk/TransactionRequest.php\n@@ -1,5 +1,27 @@\n <?php\n \n+/*\n+ * TransactionRequest.php\n+ * Copyright (c) 2021 james@firefly-iii.org\n+ *\n+ * This file is part of Firefly III (https://github.com/firefly-iii).\n+ *\n+ * This program is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU Affero General Public License as\n+ * published by the Free Software Foundation, either version 3 of the\n+ * License, or (at your option) any later version.\n+ *\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU Affero General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU Affero General Public License\n+ * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n+ */\n+\n+declare(strict_types=1);\n+\n namespace FireflyIII\\Api\\V1\\Requests\\Data\\Bulk;\n \n use FireflyIII\\Enums\\ClauseType;\n@@ -61,4 +83,4 @@ function (Validator $validator) {\n             }\n         );\n     }\n-}\n\\ No newline at end of file\n+}\n", "diff --git a/app/Api/V1/Requests/User/PreferenceUpdateRequest.php b/app/Api/V1/Requests/User/PreferenceUpdateRequest.php\nindex dede3ef1ab..067fd12730 100644\n--- a/app/Api/V1/Requests/User/PreferenceUpdateRequest.php\n+++ b/app/Api/V1/Requests/User/PreferenceUpdateRequest.php\n@@ -1,7 +1,7 @@\n <?php\n-declare(strict_types=1);\n+\n /*\n- * PreferenceStoreRequest.php\n+ * PreferenceUpdateRequest.php\n  * Copyright (c) 2021 james@firefly-iii.org\n  *\n  * This file is part of Firefly III (https://github.com/firefly-iii).\n@@ -20,6 +20,8 @@\n  * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n  */\n \n+declare(strict_types=1);\n+\n namespace FireflyIII\\Api\\V1\\Requests\\User;\n \n use FireflyIII\\Support\\Request\\ChecksLogin;\n", "diff --git a/app/Console/Commands/Correction/FixPostgresSequences.php b/app/Console/Commands/Correction/FixPostgresSequences.php\nindex e012790f71..eec112169d 100644\n--- a/app/Console/Commands/Correction/FixPostgresSequences.php\n+++ b/app/Console/Commands/Correction/FixPostgresSequences.php\n@@ -1,4 +1,25 @@\n <?php\n+\n+/*\n+ * FixPostgresSequences.php\n+ * Copyright (c) 2021 james@firefly-iii.org\n+ *\n+ * This file is part of Firefly III (https://github.com/firefly-iii).\n+ *\n+ * This program is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU Affero General Public License as\n+ * published by the Free Software Foundation, either version 3 of the\n+ * License, or (at your option) any later version.\n+ *\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU Affero General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU Affero General Public License\n+ * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n+ */\n+\n declare(strict_types=1);\n \n namespace FireflyIII\\Console\\Commands\\Correction;\n", "diff --git a/app/Console/Commands/Upgrade/UpgradeLiabilities.php b/app/Console/Commands/Upgrade/UpgradeLiabilities.php\nindex 26435e1107..87b72a934a 100644\n--- a/app/Console/Commands/Upgrade/UpgradeLiabilities.php\n+++ b/app/Console/Commands/Upgrade/UpgradeLiabilities.php\n@@ -1,4 +1,25 @@\n <?php\n+\n+/*\n+ * UpgradeLiabilities.php\n+ * Copyright (c) 2021 james@firefly-iii.org\n+ *\n+ * This file is part of Firefly III (https://github.com/firefly-iii).\n+ *\n+ * This program is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU Affero General Public License as\n+ * published by the Free Software Foundation, either version 3 of the\n+ * License, or (at your option) any later version.\n+ *\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU Affero General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU Affero General Public License\n+ * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n+ */\n+\n declare(strict_types=1);\n \n namespace FireflyIII\\Console\\Commands\\Upgrade;\n", "diff --git a/app/Console/Commands/VerifySecurityAlerts.php b/app/Console/Commands/VerifySecurityAlerts.php\nindex 7caa2774b0..4d4bdd33bf 100644\n--- a/app/Console/Commands/VerifySecurityAlerts.php\n+++ b/app/Console/Commands/VerifySecurityAlerts.php\n@@ -1,4 +1,25 @@\n <?php\n+\n+/*\n+ * VerifySecurityAlerts.php\n+ * Copyright (c) 2021 james@firefly-iii.org\n+ *\n+ * This file is part of Firefly III (https://github.com/firefly-iii).\n+ *\n+ * This program is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU Affero General Public License as\n+ * published by the Free Software Foundation, either version 3 of the\n+ * License, or (at your option) any later version.\n+ *\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU Affero General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU Affero General Public License\n+ * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n+ */\n+\n declare(strict_types=1);\n \n namespace FireflyIII\\Console\\Commands;\n", "diff --git a/app/Enums/ClauseType.php b/app/Enums/ClauseType.php\nindex fc13218603..1897aee173 100644\n--- a/app/Enums/ClauseType.php\n+++ b/app/Enums/ClauseType.php\n@@ -1,5 +1,27 @@\n <?php\n \n+/*\n+ * ClauseType.php\n+ * Copyright (c) 2021 james@firefly-iii.org\n+ *\n+ * This file is part of Firefly III (https://github.com/firefly-iii).\n+ *\n+ * This program is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU Affero General Public License as\n+ * published by the Free Software Foundation, either version 3 of the\n+ * License, or (at your option) any later version.\n+ *\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU Affero General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU Affero General Public License\n+ * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n+ */\n+\n+declare(strict_types=1);\n+\n namespace FireflyIII\\Enums;\n \n /**\n@@ -10,4 +32,4 @@ class ClauseType\n     public const TRANSACTION = 'transaction';\n     public const WHERE       = 'where';\n     public const UPDATE      = 'update';\n-}\n\\ No newline at end of file\n+}\n", "diff --git a/app/Events/StoredAccount.php b/app/Events/StoredAccount.php\nindex eb016dd6d1..b8a77937b9 100644\n--- a/app/Events/StoredAccount.php\n+++ b/app/Events/StoredAccount.php\n@@ -1,5 +1,5 @@\n <?php\n-declare(strict_types=1);\n+\n /*\n  * StoredAccount.php\n  * Copyright (c) 2021 james@firefly-iii.org\n@@ -20,6 +20,8 @@\n  * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n  */\n \n+declare(strict_types=1);\n+\n namespace FireflyIII\\Events;\n \n use FireflyIII\\Models\\Account;\n", "diff --git a/app/Events/UpdatedAccount.php b/app/Events/UpdatedAccount.php\nindex 5afa242e3e..a71e50b357 100644\n--- a/app/Events/UpdatedAccount.php\n+++ b/app/Events/UpdatedAccount.php\n@@ -1,7 +1,7 @@\n <?php\n-declare(strict_types=1);\n+\n /*\n- * StoredAccount.php\n+ * UpdatedAccount.php\n  * Copyright (c) 2021 james@firefly-iii.org\n  *\n  * This file is part of Firefly III (https://github.com/firefly-iii).\n@@ -20,6 +20,9 @@\n  * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n  */\n \n+declare(strict_types=1);\n+\n+\n namespace FireflyIII\\Events;\n \n use FireflyIII\\Models\\Account;\n", "diff --git a/app/Generator/Webhook/StandardMessageGenerator.php b/app/Generator/Webhook/StandardMessageGenerator.php\nindex f48404cfde..a01140490e 100644\n--- a/app/Generator/Webhook/StandardMessageGenerator.php\n+++ b/app/Generator/Webhook/StandardMessageGenerator.php\n@@ -1,8 +1,8 @@\n <?php\n-declare(strict_types=1);\n+\n /*\n- * WebhookMessageGenerator.php\n- * Copyright (c) 2020 james@firefly-iii.org\n+ * StandardMessageGenerator.php\n+ * Copyright (c) 2021 james@firefly-iii.org\n  *\n  * This file is part of Firefly III (https://github.com/firefly-iii).\n  *\n@@ -20,6 +20,8 @@\n  * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n  */\n \n+declare(strict_types=1);\n+\n namespace FireflyIII\\Generator\\Webhook;\n \n use FireflyIII\\Exceptions\\FireflyException;\n", "diff --git a/app/Handlers/Events/LDAPEventHandler.php b/app/Handlers/Events/LDAPEventHandler.php\nindex ab8fa15e3d..84253d3c79 100644\n--- a/app/Handlers/Events/LDAPEventHandler.php\n+++ b/app/Handlers/Events/LDAPEventHandler.php\n@@ -1,5 +1,5 @@\n <?php\n-declare(strict_types=1);\n+\n /*\n  * LDAPEventHandler.php\n  * Copyright (c) 2021 james@firefly-iii.org\n@@ -20,6 +20,8 @@\n  * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n  */\n \n+declare(strict_types=1);\n+\n namespace FireflyIII\\Handlers\\Events;\n \n \n", "diff --git a/app/Handlers/Events/StoredAccountEventHandler.php b/app/Handlers/Events/StoredAccountEventHandler.php\nindex 4784cfd546..59c670e135 100644\n--- a/app/Handlers/Events/StoredAccountEventHandler.php\n+++ b/app/Handlers/Events/StoredAccountEventHandler.php\n@@ -1,5 +1,5 @@\n <?php\n-declare(strict_types=1);\n+\n /*\n  * StoredAccountEventHandler.php\n  * Copyright (c) 2021 james@firefly-iii.org\n@@ -20,6 +20,8 @@\n  * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n  */\n \n+declare(strict_types=1);\n+\n namespace FireflyIII\\Handlers\\Events;\n \n use FireflyIII\\Events\\StoredAccount;\n", "diff --git a/app/Handlers/Events/UpdatedAccountEventHandler.php b/app/Handlers/Events/UpdatedAccountEventHandler.php\nindex 23414e04f5..ec070538ff 100644\n--- a/app/Handlers/Events/UpdatedAccountEventHandler.php\n+++ b/app/Handlers/Events/UpdatedAccountEventHandler.php\n@@ -1,5 +1,5 @@\n <?php\n-declare(strict_types=1);\n+\n /*\n  * UpdatedAccountEventHandler.php\n  * Copyright (c) 2021 james@firefly-iii.org\n@@ -20,6 +20,8 @@\n  * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n  */\n \n+declare(strict_types=1);\n+\n namespace FireflyIII\\Handlers\\Events;\n \n \n", "diff --git a/app/Ldap/AttributeHandler.php b/app/Ldap/AttributeHandler.php\nindex 99f8f75c4b..bdde31ef88 100644\n--- a/app/Ldap/AttributeHandler.php\n+++ b/app/Ldap/AttributeHandler.php\n@@ -1,5 +1,5 @@\n <?php\n-declare(strict_types=1);\n+\n /*\n  * AttributeHandler.php\n  * Copyright (c) 2021 james@firefly-iii.org\n@@ -20,6 +20,8 @@\n  * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n  */\n \n+declare(strict_types=1);\n+\n namespace FireflyIII\\Ldap;\n \n use FireflyIII\\User as DatabaseUser;\n", "diff --git a/app/Rules/IsValidBulkClause.php b/app/Rules/IsValidBulkClause.php\nindex 6126cf7c3a..d10b78c0dd 100644\n--- a/app/Rules/IsValidBulkClause.php\n+++ b/app/Rules/IsValidBulkClause.php\n@@ -1,5 +1,27 @@\n <?php\n \n+/*\n+ * IsValidBulkClause.php\n+ * Copyright (c) 2021 james@firefly-iii.org\n+ *\n+ * This file is part of Firefly III (https://github.com/firefly-iii).\n+ *\n+ * This program is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU Affero General Public License as\n+ * published by the Free Software Foundation, either version 3 of the\n+ * License, or (at your option) any later version.\n+ *\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU Affero General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU Affero General Public License\n+ * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n+ */\n+\n+declare(strict_types=1);\n+\n namespace FireflyIII\\Rules;\n \n use Illuminate\\Contracts\\Validation\\Rule;\n@@ -91,4 +113,4 @@ private function basicValidation(string $value): bool\n \n         return true;\n     }\n-}\n\\ No newline at end of file\n+}\n", "diff --git a/app/Services/Internal/Support/CreditRecalculateService.php b/app/Services/Internal/Support/CreditRecalculateService.php\nindex cbe7a735e9..7c50885384 100644\n--- a/app/Services/Internal/Support/CreditRecalculateService.php\n+++ b/app/Services/Internal/Support/CreditRecalculateService.php\n@@ -1,5 +1,5 @@\n <?php\n-declare(strict_types=1);\n+\n /*\n  * CreditRecalculateService.php\n  * Copyright (c) 2021 james@firefly-iii.org\n@@ -20,6 +20,9 @@\n  * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n  */\n \n+declare(strict_types=1);\n+\n+\n namespace FireflyIII\\Services\\Internal\\Support;\n \n \n", "diff --git a/app/Support/Binder/EitherConfigKey.php b/app/Support/Binder/EitherConfigKey.php\nindex b46cca11ae..b344771c96 100644\n--- a/app/Support/Binder/EitherConfigKey.php\n+++ b/app/Support/Binder/EitherConfigKey.php\n@@ -1,7 +1,7 @@\n <?php\n-declare(strict_types=1);\n+\n /*\n- * StaticConfigKey.php\n+ * EitherConfigKey.php\n  * Copyright (c) 2021 james@firefly-iii.org\n  *\n  * This file is part of Firefly III (https://github.com/firefly-iii).\n@@ -20,6 +20,8 @@\n  * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n  */\n \n+declare(strict_types=1);\n+\n namespace FireflyIII\\Support\\Binder;\n use Illuminate\\Routing\\Route;\n use Symfony\\Component\\HttpKernel\\Exception\\NotFoundHttpException;\n", "diff --git a/app/Validation/Account/LiabilityValidation.php b/app/Validation/Account/LiabilityValidation.php\nindex 0a7df89e64..f8990f4190 100644\n--- a/app/Validation/Account/LiabilityValidation.php\n+++ b/app/Validation/Account/LiabilityValidation.php\n@@ -1,5 +1,5 @@\n <?php\n-declare(strict_types=1);\n+\n /*\n  * LiabilityValidation.php\n  * Copyright (c) 2021 james@firefly-iii.org\n@@ -20,6 +20,8 @@\n  * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n  */\n \n+declare(strict_types=1);\n+\n namespace FireflyIII\\Validation\\Account;\n \n \n", "diff --git a/app/Validation/Api/Data/Bulk/ValidatesBulkTransactionQuery.php b/app/Validation/Api/Data/Bulk/ValidatesBulkTransactionQuery.php\nindex 1126569355..7f5f21839d 100644\n--- a/app/Validation/Api/Data/Bulk/ValidatesBulkTransactionQuery.php\n+++ b/app/Validation/Api/Data/Bulk/ValidatesBulkTransactionQuery.php\n@@ -1,5 +1,27 @@\n <?php\n \n+/*\n+ * ValidatesBulkTransactionQuery.php\n+ * Copyright (c) 2021 james@firefly-iii.org\n+ *\n+ * This file is part of Firefly III (https://github.com/firefly-iii).\n+ *\n+ * This program is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU Affero General Public License as\n+ * published by the Free Software Foundation, either version 3 of the\n+ * License, or (at your option) any later version.\n+ *\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU Affero General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU Affero General Public License\n+ * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n+ */\n+\n+declare(strict_types=1);\n+\n namespace FireflyIII\\Validation\\Api\\Data\\Bulk;\n \n use FireflyIII\\Repositories\\Account\\AccountRepositoryInterface;\n@@ -50,4 +72,4 @@ protected function validateTransactionQuery(Validator $validator): void\n         }\n     }\n \n-}\n\\ No newline at end of file\n+}\n", "diff --git a/changelog.md b/changelog.md\nindex 8b1b210468..c4a6eb5751 100644\n--- a/changelog.md\n+++ b/changelog.md\n@@ -35,6 +35,12 @@ ### API\n - You can disable webhooks with an extra field in API submissions.\n - There is a static cron token (see `.env.example`) which is useful for Docker.\n \n+## 5.5.13 - 2021-07-25\n+\n+### Security\n+\n+- This version of Firefly III fixes [CVE-2021-3663](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2021-3663)\n+\n ## 5.5.12 - 2021-06-03\n \n \u26a0\ufe0f On July 1st 2021 the Docker tag will change to `fireflyiii/core`. You can already start using the new tag.\n", "diff --git a/config/bulk.php b/config/bulk.php\nindex 4539a0c192..22ff667693 100644\n--- a/config/bulk.php\n+++ b/config/bulk.php\n@@ -1,4 +1,5 @@\n <?php\n+declare(strict_types=1);\n \n use FireflyIII\\Enums\\ClauseType;\n \n@@ -11,4 +12,4 @@\n             'destination_account_id' => 'required|numeric|belongsToUser:accounts,id',\n         ],\n     ],\n-];\n\\ No newline at end of file\n+];\n", "diff --git a/config/firefly.php b/config/firefly.php\nindex 1ceadd3f9b..71f560d3b2 100644\n--- a/config/firefly.php\n+++ b/config/firefly.php\n@@ -101,7 +101,7 @@\n         'webhooks'     => true,\n         'handle_debts' => true,\n     ],\n-    'version'                      => '5.6.0-alpha.1',\n+    'version'                      => '5.6.0-alpha.2',\n     'api_version'                  => '1.5.3',\n     'db_version'                   => 17,\n \n@@ -164,7 +164,7 @@\n         // 'id_ID' => ['name_locale' => 'Bahasa Indonesia', 'name_english' => 'Indonesian'],\n         // 'is_IS' => ['name_locale' => 'Icelandic', 'name_english' => 'Icelandic'],\n         'it_IT' => ['name_locale' => 'Italiano', 'name_english' => 'Italian'],\n-        'ja_JA' => ['name_locale' => 'Japanese', 'name_english' => 'Japanese'],\n+        'ja_JP' => ['name_locale' => 'Japanese', 'name_english' => 'Japanese'],\n         // 'lt_LT' => ['name_locale' => 'Lietuvi\u0173', 'name_english' => 'Lithuanian'],\n         'nb_NO' => ['name_locale' => 'Norsk', 'name_english' => 'Norwegian'],\n         'nl_NL' => ['name_locale' => 'Nederlands', 'name_english' => 'Dutch'],\n", "diff --git a/sonar-project.properties b/sonar-project.properties\nindex ad9eae4cb5..8fec489bf2 100644\n--- a/sonar-project.properties\n+++ b/sonar-project.properties\n@@ -1,5 +1,5 @@\n sonar.projectKey=firefly-iii\n-sonar.projectVersion=5.6.0-alpha.1\n+sonar.projectVersion=5.6.0-alpha.2\n sonar.sources=app,bootstrap,database,resources/assets,resources/views,routes,tests,frontend/src/components,frontend/src/pages\n sonar.login=2859ca0fb90d8419e211190a8892b3e1721244cb\n sonar.sourceEncoding=UTF-8\n"], "label": 0, "cve": "CVE-2021-3663", "rank": 2, "commit": "8328c26df318daaf139a270f3066122992f16b6d", "cve_attention_tokens": []}
{"cve_desc": "mod/lti/service.php in Moodle through 2.3.11, 2.4.x before 2.4.11, 2.5.x before 2.5.7, 2.6.x before 2.6.4, and 2.7.x before 2.7.1 allows remote attackers to read arbitrary files via an XML external entity declaration in conjunction with an entity reference, related to an XML External Entity (XXE) issue.", "commit_msg": "Moodle release 2.4.11\n\n", "diff": ["diff --git a/version.php b/version.php\nindex 589fb608ce7..3a54f9ed30a 100644\n--- a/version.php\n+++ b/version.php\n@@ -29,11 +29,11 @@\n \n defined('MOODLE_INTERNAL') || die();\n \n-$version  = 2012120310.00;              // 20121203      = branching date YYYYMMDD - do not modify!\n+$version  = 2012120311.00;              // 20121203      = branching date YYYYMMDD - do not modify!\n                                         //         RR    = release increments - 00 in DEV branches\n                                         //           .XX = incremental changes\n \n-$release  = '2.4.10 (Build: 20140512)';  // Human-friendly version name\n+$release  = '2.4.11 (Build: 20140714)';  // Human-friendly version name\n \n $branch   = '24';                       // this version's branch\n $maturity = MATURITY_STABLE;            // this version's maturity level\n"], "label": 0, "cve": "CVE-2014-3542", "rank": 13, "commit": "928f14b3cc509b9ad27b3172a8417e2ffe03ce72", "cve_attention_tokens": []}
{"cve_desc": "GLPI is a Free Asset and IT Management Software package, that provides ITIL Service Desk features, licenses tracking and software auditing. In versions prior to 10.0.0 one can use ticket's followups or setup login messages with a stylesheet link. This may allow for a cross site scripting attack vector. This issue is partially mitigated by cors security of browsers, though users are still advised to upgrade.", "commit_msg": "Twig content templates in place documentation (#9344)\n\n* Twig content templates documentation\n\n* UX\n\n* Fix lint\n\n* Minor changes\n\n* Fix lint\n\n* Remove defineParameters\n\n* Move methods\n\n* Remove duplicated method, improve PHPdoc\n\n* Fix documentation page DOM\n\n* Use interface, mutualize code\n\nCo-authored-by: C\u00e9dric Anne <cedric.anne@gmail.com>\n", "diff": ["diff --git a/css/styles.scss b/css/styles.scss\nindex 1bfa2cd681..474d6258b2 100644\n--- a/css/styles.scss\n+++ b/css/styles.scss\n@@ -5385,6 +5385,28 @@ tr.log_history_filter_row {\n    dd {\n       margin-left: 20px;\n    }\n+\n+   td, th {\n+      padding-right: 24px;\n+      padding-bottom: 8px;\n+      font-size: 12px;\n+   }\n+\n+   th {\n+      text-align: left;\n+   }\n+}\n+\n+.documentation-large {\n+   max-width: 1000px;\n+}\n+\n+.documentation-page {\n+   #footer-login {\n+      position: unset;\n+      text-align: center;\n+      padding-bottom: 30px;\n+   }\n }\n \n td.diff {\n@@ -6519,7 +6541,7 @@ input[name=as_map] {\n }\n \n @media screen and (min-width: $break_lphones) {\n-   .documentation #summary {\n+   .documentation #summary, .documentation .summary {\n       position: fixed;\n       top: 40px;\n       left: 15px;\n@@ -6542,6 +6564,12 @@ input[name=as_map] {\n    }\n }\n \n+@media screen and (max-width: 1400px) {\n+   .documentation-large {\n+      margin-left: 200px;\n+   }\n+}\n+\n /** Fixes for Font Awesome 5 icons not showing at all or\n with incorrect shading in some cases */\n \n", "diff --git a/front/contenttemplates/documentation.php b/front/contenttemplates/documentation.php\nnew file mode 100644\nindex 0000000000..2b38339810\n--- /dev/null\n+++ b/front/contenttemplates/documentation.php\n@@ -0,0 +1,62 @@\n+<?php\n+/**\n+ * ---------------------------------------------------------------------\n+ * GLPI - Gestionnaire Libre de Parc Informatique\n+ * Copyright (C) 2015-2021 Teclib' and contributors.\n+ *\n+ * http://glpi-project.org\n+ *\n+ * based on GLPI - Gestionnaire Libre de Parc Informatique\n+ * Copyright (C) 2003-2014 by the INDEPNET Development Team.\n+ *\n+ * ---------------------------------------------------------------------\n+ *\n+ * LICENSE\n+ *\n+ * This file is part of GLPI.\n+ *\n+ * GLPI is free software; you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation; either version 2 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * GLPI is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with GLPI. If not, see <http://www.gnu.org/licenses/>.\n+ * ---------------------------------------------------------------------\n+ */\n+\n+include ('../../inc/includes.php');\n+\n+use Glpi\\ContentTemplates\\TemplateManager;\n+use Michelf\\MarkdownExtra;\n+\n+// Check mandatory parameter\n+$preset = $_GET['preset'] ?? null;\n+if (is_null($preset)) {\n+   Toolbox::throwError(400, \"Missing mandatory 'preset' parameter\", \"string\");\n+}\n+\n+echo Html::includeHeader(__(\"Template variables documentation\"));\n+echo \"<body class='documentation-page'>\";\n+echo \"<div id='page'>\";\n+echo \"<div class='documentation documentation-large'>\";\n+\n+// Parse markdown\n+$md = new MarkdownExtra();\n+$md->header_id_func = function($headerName) {\n+   return Toolbox::slugify($headerName, '');\n+};\n+echo $md->transform(TemplateManager::generateMarkdownDocumentation($preset));\n+\n+echo \"</div>\";\n+echo \"</div>\";\n+\n+// Footer closes main and div\n+echo \"<main>\";\n+echo \"<div>\";\n+Html::nullFooter();\n", "diff --git a/inc/abstractitilchildtemplate.class.php b/inc/abstractitilchildtemplate.class.php\nindex 0d103cead4..b1963ffacb 100644\n--- a/inc/abstractitilchildtemplate.class.php\n+++ b/inc/abstractitilchildtemplate.class.php\n@@ -30,11 +30,7 @@\n  * ---------------------------------------------------------------------\n  */\n \n-use Glpi\\ContentTemplates\\Parameters\\ChangeParameters;\n-use Glpi\\ContentTemplates\\Parameters\\ParametersTypes\\AttributeParameter;\n-use Glpi\\ContentTemplates\\Parameters\\ParametersTypes\\ObjectParameter;\n-use Glpi\\ContentTemplates\\Parameters\\ProblemParameters;\n-use Glpi\\ContentTemplates\\Parameters\\TicketParameters;\n+use Glpi\\ContentTemplates\\ParametersPreset;\n use Glpi\\ContentTemplates\\TemplateManager;\n \n if (!defined('GLPI_ROOT')) {\n@@ -52,12 +48,17 @@ abstract class AbstractITILChildTemplate extends CommonDropdown\n       parent::showForm($ID, $options);\n \n       // Add autocompletion for ticket properties (twig templates)\n-      Html::activateUserTemplateAutocompletion('textarea[name=content]', [\n-         (new AttributeParameter('itemtype', __('Itemtype')))->compute(),\n-         (new ObjectParameter(new TicketParameters()))->compute(),\n-         (new ObjectParameter(new ChangeParameters()))->compute(),\n-         (new ObjectParameter(new ProblemParameters()))->compute(),\n-      ]);\n+      $parameters = ParametersPreset::getForAbstractTemplates();\n+      Html::activateUserTemplateAutocompletion(\n+         'textarea[name=content]',\n+         TemplateManager::computeParameters($parameters)\n+      );\n+\n+      // Add related documentation\n+      Html::addTemplateDocumentationLinkJS(\n+         'textarea[name=content]',\n+         ParametersPreset::ITIL_CHILD_TEMPLATE\n+      );\n    }\n \n    function prepareInputForAdd($input) {\n", "diff --git a/inc/contenttemplates/parameters/abstractparameters.class.php b/inc/contenttemplates/parameters/abstractparameters.class.php\nindex a21fa5da3f..f785838352 100644\n--- a/inc/contenttemplates/parameters/abstractparameters.class.php\n+++ b/inc/contenttemplates/parameters/abstractparameters.class.php\n@@ -45,16 +45,6 @@ if (!defined('GLPI_ROOT')) {\n  */\n abstract class AbstractParameters implements TemplatesParametersInterface\n {\n-   /**\n-    * To be defined in each subclasses, define all available parameters for one or more itemtypes.\n-    * These parameters informations are meant to be used for autocompletion on the client side.\n-    *\n-    * Result will be returned by `self::getAvailableParameters()`.\n-    *\n-    * @return \\Glpi\\ContentTemplates\\Parameters\\ParametersTypes\\AbstractParameterType[]\n-    */\n-   abstract protected function defineParameters(): array;\n-\n    /**\n     * To by defined in each subclasses, get the exposed values for a given item\n     * These values will be used as parameters when rendering a twig template.\n@@ -90,14 +80,4 @@ abstract class AbstractParameters implements TemplatesParametersInterface\n \n       return $this->defineValues($item);\n    }\n-\n-   public function getAvailableParameters(): array {\n-      $parameters = [];\n-\n-      foreach ($this->defineParameters() as $parameter) {\n-         $parameters[] = $parameter->compute();\n-      }\n-\n-      return $parameters;\n-   }\n }\n", "diff --git a/inc/contenttemplates/parameters/assetparameters.class.php b/inc/contenttemplates/parameters/assetparameters.class.php\nindex 93abfe50af..52c7f5ff7a 100644\n--- a/inc/contenttemplates/parameters/assetparameters.class.php\n+++ b/inc/contenttemplates/parameters/assetparameters.class.php\n@@ -62,7 +62,7 @@ class AssetParameters extends AbstractParameters\n       return $CFG_GLPI[\"asset_types\"];\n    }\n \n-   protected function defineParameters(): array {\n+   public function getAvailableParameters(): array {\n       return [\n          new AttributeParameter(\"id\", __('ID')),\n          new AttributeParameter(\"name\", __('Name')),\n", "diff --git a/inc/contenttemplates/parameters/commonitilobjectparameters.class.php b/inc/contenttemplates/parameters/commonitilobjectparameters.class.php\nindex ef3999cc9e..4ace449baf 100644\n--- a/inc/contenttemplates/parameters/commonitilobjectparameters.class.php\n+++ b/inc/contenttemplates/parameters/commonitilobjectparameters.class.php\n@@ -57,7 +57,7 @@ if (!defined('GLPI_ROOT')) {\n  */\n abstract class CommonITILObjectParameters extends AbstractParameters\n {\n-   protected function defineParameters(): array {\n+   public function getAvailableParameters(): array {\n       return [\n          new AttributeParameter(\"id\", __('ID')),\n          new AttributeParameter(\"ref\", __(\"Reference (# + id)\")),\n", "diff --git a/inc/contenttemplates/parameters/dropdownparameters.class.php b/inc/contenttemplates/parameters/dropdownparameters.class.php\nindex 5590ed5ddd..754f3f74f9 100644\n--- a/inc/contenttemplates/parameters/dropdownparameters.class.php\n+++ b/inc/contenttemplates/parameters/dropdownparameters.class.php\n@@ -47,7 +47,7 @@ if (!defined('GLPI_ROOT')) {\n  */\n abstract class DropdownParameters extends AbstractParameters\n {\n-   protected function defineParameters(): array {\n+   public function getAvailableParameters(): array {\n       return [\n          new AttributeParameter(\"id\", __('ID')),\n          new AttributeParameter(\"name\", __('Name')),\n", "diff --git a/inc/contenttemplates/parameters/knowbaseitemparameters.class.php b/inc/contenttemplates/parameters/knowbaseitemparameters.class.php\nindex 1d7e03bcae..867ab305c6 100644\n--- a/inc/contenttemplates/parameters/knowbaseitemparameters.class.php\n+++ b/inc/contenttemplates/parameters/knowbaseitemparameters.class.php\n@@ -60,7 +60,7 @@ class KnowbaseItemParameters extends AbstractParameters\n       return [KnowbaseItem::class];\n    }\n \n-   protected function defineParameters(): array {\n+   public function getAvailableParameters(): array {\n       return [\n          new AttributeParameter(\"id\", __('ID')),\n          new AttributeParameter(\"name\", __('Subject')),\n", "diff --git a/inc/contenttemplates/parameters/levelagreementparameters.class.php b/inc/contenttemplates/parameters/levelagreementparameters.class.php\nindex e70e46a9a3..8ffe64683d 100644\n--- a/inc/contenttemplates/parameters/levelagreementparameters.class.php\n+++ b/inc/contenttemplates/parameters/levelagreementparameters.class.php\n@@ -48,7 +48,7 @@ if (!defined('GLPI_ROOT')) {\n  */\n abstract class LevelAgreementParameters extends AbstractParameters\n {\n-   protected function defineParameters(): array {\n+   public function getAvailableParameters(): array {\n       return [\n          new AttributeParameter(\"id\", __('ID')),\n          new AttributeParameter(\"name\", __('Name')),\n", "diff --git a/inc/contenttemplates/parameters/parameterstypes/abstractparametertype.class.php b/inc/contenttemplates/parameters/parameterstypes/abstractparametertype.class.php\nindex 94098e7a8f..36569df4ce 100644\n--- a/inc/contenttemplates/parameters/parameterstypes/abstractparametertype.class.php\n+++ b/inc/contenttemplates/parameters/parameterstypes/abstractparametertype.class.php\n@@ -41,25 +41,36 @@ if (!defined('GLPI_ROOT')) {\n  *\n  * @since 10.0.0\n  */\n-abstract class AbstractParameterType\n+abstract class AbstractParameterType implements ParameterTypeInterface\n {\n    /**\n-    * The parameter key that need to be used to retrieve its value in a template\n+    * The parameter key that need to be used to retrieve its value in a template.\n     *\n     * @var string\n     */\n    protected $key;\n \n    /**\n-    * The parameter label, to be displayed in the client side autocompletion\n+    * The parameter label, to be displayed in the client side autocompletion.\n     *\n     * @var string\n     */\n-   protected $label;\n+    protected $label;\n \n    /**\n-    * To be defined in each subclasses, convert the parameter data into an array\n-    * that can be shared to the client side code as json and used for autocompletion.\n+    * @param string  $key     Key to access this value\n+    * @param string  $label   Label to display in the autocompletion widget\n     */\n-   abstract public function compute(): array;\n+   public function __construct(string $key, string $label) {\n+      $this->key = $key;\n+      $this->label = $label;\n+   }\n+\n+   public function getDocumentationField(): string {\n+      return $this->key;\n+   }\n+\n+   public function getDocumentationLabel(): string {\n+      return $this->label;\n+   }\n }\n", "diff --git a/inc/contenttemplates/parameters/parameterstypes/arrayparameter.class.php b/inc/contenttemplates/parameters/parameterstypes/arrayparameter.class.php\nindex a336f28b02..2995f0fafa 100644\n--- a/inc/contenttemplates/parameters/parameterstypes/arrayparameter.class.php\n+++ b/inc/contenttemplates/parameters/parameterstypes/arrayparameter.class.php\n@@ -32,7 +32,7 @@\n \n namespace Glpi\\ContentTemplates\\Parameters\\ParametersTypes;\n \n-use Glpi\\ContentTemplates\\Parameters\\AbstractParameters;\n+use Glpi\\ContentTemplates\\Parameters\\TemplatesParametersInterface;\n \n if (!defined('GLPI_ROOT')) {\n    die(\"Sorry. You can't access this file directly\");\n@@ -47,44 +47,44 @@ if (!defined('GLPI_ROOT')) {\n  */\n class ArrayParameter extends AbstractParameterType\n {\n-   /**\n-    * This parameter will need to be handled in a loop, this key will be the\n-    * suggested variable name when iterating on its children.\n-    *\n-    * @var string\n-    */\n-   protected $items_key;\n-\n    /**\n     * Parameters of each item contained in this array.\n     *\n-    * @var ObjectParameter\n+    * @var TemplatesParametersInterface\n     */\n-   protected $content;\n+   protected $template_parameters;\n \n    /**\n-    * @param string              $key        Key to access this value\n-    * @param AbstractParameters  $parameters Parameters of each item contained in this array\n-    * @param string              $label      Label to display in the autocompletion widget\n+    * @param string                       $key        Key to access this value\n+    * @param TemplatesParametersInterface $parameters Parameters of each item contained in this array\n+    * @param string                       $label      Label to display in the autocompletion widget\n     */\n    public function __construct(\n       string $key,\n-      AbstractParameters $parameters,\n+      TemplatesParametersInterface $parameters,\n       string $label\n    ) {\n-      $this->key = $key;\n-      $this->label = $label;\n-      $this->items_key = $parameters->getDefaultNodeName();\n-      $this->content = new ObjectParameter($parameters);\n+      parent::__construct($key, $label);\n+      $this->template_parameters = $parameters;\n    }\n \n    public function compute(): array {\n+      $object_parameters = new ObjectParameter($this->template_parameters);\n       return [\n          'type'      => \"ArrayParameter\",\n          'key'       => $this->key,\n          'label'     => $this->label,\n-         'items_key' => $this->items_key,\n-         'content'   => $this->content->compute(),\n+         'items_key' => $this->template_parameters->getDefaultNodeName(),\n+         'content'   => $object_parameters->compute(),\n       ];\n    }\n+\n+   public function getDocumentationUsage(?string $parent = null): string {\n+      $parent = !empty($parent) ? \"$parent.\" : \"\";\n+      return \"{% for {$this->template_parameters->getDefaultNodeName()} in {$parent}{$this->key} %}\";\n+   }\n+\n+   public function getDocumentationReferences(): ?TemplatesParametersInterface {\n+      return $this->template_parameters;\n+   }\n }\n", "diff --git a/inc/contenttemplates/parameters/parameterstypes/attributeparameter.class.php b/inc/contenttemplates/parameters/parameterstypes/attributeparameter.class.php\nindex 0000c53597..6fb10308a7 100644\n--- a/inc/contenttemplates/parameters/parameterstypes/attributeparameter.class.php\n+++ b/inc/contenttemplates/parameters/parameterstypes/attributeparameter.class.php\n@@ -32,6 +32,8 @@\n \n namespace Glpi\\ContentTemplates\\Parameters\\ParametersTypes;\n \n+use Glpi\\ContentTemplates\\Parameters\\TemplatesParametersInterface;\n+\n if (!defined('GLPI_ROOT')) {\n    die(\"Sorry. You can't access this file directly\");\n }\n@@ -61,8 +63,7 @@ class AttributeParameter extends AbstractParameterType\n     * @param string $filter Recommanded twig filter to apply on this value\n     */\n    public function __construct(string $key, string $label, string $filter = \"\") {\n-      $this->key = $key;\n-      $this->label = $label;\n+      parent::__construct($key, $label);\n       $this->filter = $filter;\n    }\n \n@@ -74,4 +75,14 @@ class AttributeParameter extends AbstractParameterType\n          'filter' => $this->filter,\n       ];\n    }\n+\n+   public function getDocumentationUsage(?string $parent = null): string {\n+      $parent = !empty($parent)       ? \"$parent.\"          : \"\";\n+      $filter = !empty($this->filter) ? \"| {$this->filter}\" : \"\";\n+      return \"{{ {$parent}{$this->key} $filter }}\";\n+   }\n+\n+   public function getDocumentationReferences(): ?TemplatesParametersInterface {\n+      return null;\n+   }\n }\n", "diff --git a/inc/contenttemplates/parameters/parameterstypes/objectparameter.class.php b/inc/contenttemplates/parameters/parameterstypes/objectparameter.class.php\nindex cb11af9030..fc245726f9 100644\n--- a/inc/contenttemplates/parameters/parameterstypes/objectparameter.class.php\n+++ b/inc/contenttemplates/parameters/parameterstypes/objectparameter.class.php\n@@ -32,7 +32,8 @@\n \n namespace Glpi\\ContentTemplates\\Parameters\\ParametersTypes;\n \n-use Glpi\\ContentTemplates\\Parameters\\AbstractParameters;\n+use Glpi\\ContentTemplates\\Parameters\\TemplatesParametersInterface;\n+use Glpi\\ContentTemplates\\TemplateManager;\n \n if (!defined('GLPI_ROOT')) {\n    die(\"Sorry. You can't access this file directly\");\n@@ -49,25 +50,40 @@ class ObjectParameter extends AbstractParameterType\n    /**\n     * Parameters availables in the item that will be linked.\n     *\n-    * @var AbstractParameters\n+    * @var TemplatesParametersInterface\n     */\n    protected $template_parameters;\n \n    /**\n-    * @param AbstractParameters $template_parameters  Parameters to add\n-    * @param null|string $key                         Key to access this value\n+    * @param TemplatesParametersInterface $template_parameters Parameters to add\n+    * @param null|string                  $key                 Key to access this value\n     */\n-   public function __construct(AbstractParameters $template_parameters, ?string $key = null) {\n-      $this->key = $key ?? $template_parameters->getDefaultNodeName();\n+   public function __construct(TemplatesParametersInterface $template_parameters, ?string $key = null) {\n+      parent::__construct(\n+         $key ?? $template_parameters->getDefaultNodeName(),\n+         $template_parameters->getObjectLabel()\n+      );\n       $this->template_parameters = $template_parameters;\n    }\n \n    public function compute(): array {\n+      $sub_parameters = $this->template_parameters->getAvailableParameters();\n+      $properties =  TemplateManager::computeParameters($sub_parameters);\n+\n       return [\n          'type'       => \"ObjectParameter\",\n          'key'        => $this->key,\n-         'label'      => $this->template_parameters->getObjectLabel(),\n-         'properties' => $this->template_parameters->getAvailableParameters(),\n+         'label'      => $this->label,\n+         'properties' => $properties,\n       ];\n    }\n+\n+   public function getDocumentationUsage(?string $parent = null): string {\n+      $parent = !empty($parent) ? \"$parent.\" : \"\";\n+      return \"{{ {$parent}{$this->key}.XXX }}\";\n+   }\n+\n+   public function getDocumentationReferences(): ?TemplatesParametersInterface {\n+      return $this->template_parameters;\n+   }\n }\n", "diff --git a/inc/contenttemplates/parameters/parameterstypes/parametertypeinterface.class.php b/inc/contenttemplates/parameters/parameterstypes/parametertypeinterface.class.php\nnew file mode 100644\nindex 0000000000..dbf26eb959\n--- /dev/null\n+++ b/inc/contenttemplates/parameters/parameterstypes/parametertypeinterface.class.php\n@@ -0,0 +1,85 @@\n+<?php\n+/**\n+ * ---------------------------------------------------------------------\n+ * GLPI - Gestionnaire Libre de Parc Informatique\n+ * Copyright (C) 2015-2021 Teclib' and contributors.\n+ *\n+ * http://glpi-project.org\n+ *\n+ * based on GLPI - Gestionnaire Libre de Parc Informatique\n+ * Copyright (C) 2003-2014 by the INDEPNET Development Team.\n+ *\n+ * ---------------------------------------------------------------------\n+ *\n+ * LICENSE\n+ *\n+ * This file is part of GLPI.\n+ *\n+ * GLPI is free software; you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation; either version 2 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * GLPI is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with GLPI. If not, see <http://www.gnu.org/licenses/>.\n+ * ---------------------------------------------------------------------\n+ */\n+\n+namespace Glpi\\ContentTemplates\\Parameters\\ParametersTypes;\n+\n+use Glpi\\ContentTemplates\\Parameters\\TemplatesParametersInterface;\n+\n+if (!defined('GLPI_ROOT')) {\n+   die(\"Sorry. You can't access this file directly\");\n+}\n+\n+/**\n+ * Interface for parameters types.\n+ *\n+ * @since 10.0.0\n+ */\n+interface ParameterTypeInterface\n+{\n+   /**\n+    * To be defined in each subclasses, convert the parameter data into an array\n+    * that can be shared to the client side code as json and used for autocompletion.\n+    *\n+    * @return array\n+    */\n+   public function compute(): array;\n+\n+   /**\n+    * Label to use for this parameter's documentation\n+    *\n+    * @return string\n+    */\n+   public function getDocumentationLabel(): string;\n+\n+   /**\n+    * Recommended usage (twig code) to use for this parameter's documentation\n+    *\n+    * @param string|null $parent\n+    *\n+    * @return string\n+    */\n+   public function getDocumentationUsage(?string $parent = null): string;\n+\n+   /**\n+    * Reference to others parameters for this parameter's documentation\n+    *\n+    * @return TemplatesParametersInterface|null\n+    */\n+   public function getDocumentationReferences(): ?TemplatesParametersInterface;\n+\n+   /**\n+    * Field name for this parameter's documentation\n+    *\n+    * @return string\n+    */\n+   public function getDocumentationField(): string;\n+}\n", "diff --git a/inc/contenttemplates/parameters/supplierparameters.class.php b/inc/contenttemplates/parameters/supplierparameters.class.php\nindex 6ce32d715f..99bed659a4 100644\n--- a/inc/contenttemplates/parameters/supplierparameters.class.php\n+++ b/inc/contenttemplates/parameters/supplierparameters.class.php\n@@ -60,7 +60,7 @@ class SupplierParameters extends TreeDropdownParameters\n       return [Supplier::class];\n    }\n \n-   protected function defineParameters(): array {\n+   public function getAvailableParameters(): array {\n       return [\n          new AttributeParameter(\"id\", __('ID')),\n          new AttributeParameter(\"name\", __('Name')),\n", "diff --git a/inc/contenttemplates/parameters/templatesparametersinterface.class.php b/inc/contenttemplates/parameters/templatesparametersinterface.class.php\nindex a8985716b8..da06039d14 100644\n--- a/inc/contenttemplates/parameters/templatesparametersinterface.class.php\n+++ b/inc/contenttemplates/parameters/templatesparametersinterface.class.php\n@@ -63,16 +63,16 @@ interface TemplatesParametersInterface\n     * Get values for a given item, used for template rendering\n     *\n     * @param CommonDBTM $item\n-    * @param bool       $root\n     *\n     * @return array\n     */\n    public function getValues(CommonDBTM $item): array;\n \n    /**\n-    * Get the available parameters, used by autocomplete\n+    * To be defined in each subclasses, define all available parameters for one or more itemtypes.\n+    * These parameters informations are meant to be used for autocompletion on the client side.\n     *\n-    * @return array\n+    * @return \\Glpi\\ContentTemplates\\Parameters\\ParametersTypes\\ParameterTypeInterface[]\n     */\n    public function getAvailableParameters(): array;\n }\n", "diff --git a/inc/contenttemplates/parameters/ticketparameters.class.php b/inc/contenttemplates/parameters/ticketparameters.class.php\nindex 94ebfcf0eb..e782b65e0e 100644\n--- a/inc/contenttemplates/parameters/ticketparameters.class.php\n+++ b/inc/contenttemplates/parameters/ticketparameters.class.php\n@@ -71,8 +71,8 @@ class TicketParameters extends CommonITILObjectParameters\n       return [Ticket::class];\n    }\n \n-   protected function defineParameters(): array {\n-      return array_merge(parent::defineParameters(), [\n+   public function getAvailableParameters(): array {\n+      return array_merge(parent::getAvailableParameters(), [\n          new AttributeParameter(\"type\", _n('Type', 'Types', 1)),\n          new AttributeParameter(\"global_validation\", _n('Approval', 'Approvals', 1)),\n          new AttributeParameter(\"tto\", __('Time to own'), 'date(\"d/m/y H:i\")'),\n", "diff --git a/inc/contenttemplates/parameters/treedropdownparameters.class.php b/inc/contenttemplates/parameters/treedropdownparameters.class.php\nindex bc7a141ecd..ceebb777f0 100644\n--- a/inc/contenttemplates/parameters/treedropdownparameters.class.php\n+++ b/inc/contenttemplates/parameters/treedropdownparameters.class.php\n@@ -47,8 +47,8 @@ if (!defined('GLPI_ROOT')) {\n  */\n abstract class TreeDropdownParameters extends DropdownParameters\n {\n-   protected function defineParameters(): array {\n-      $parameter = parent::defineParameters();\n+   public function getAvailableParameters(): array {\n+      $parameter = parent::getAvailableParameters();\n       $parameter[] = new AttributeParameter(\"completename\", __('Complete name'));\n       return $parameter;\n    }\n", "diff --git a/inc/contenttemplates/parameters/userparameters.class.php b/inc/contenttemplates/parameters/userparameters.class.php\nindex 178ce0133e..aa9396663f 100644\n--- a/inc/contenttemplates/parameters/userparameters.class.php\n+++ b/inc/contenttemplates/parameters/userparameters.class.php\n@@ -61,7 +61,7 @@ class UserParameters extends AbstractParameters\n       return [User::class];\n    }\n \n-   protected function defineParameters(): array {\n+   public function getAvailableParameters(): array {\n       return [\n          new AttributeParameter(\"id\", __('ID')),\n          new AttributeParameter(\"login\", __('Login')),\n", "diff --git a/inc/contenttemplates/parameterspreset.class.php b/inc/contenttemplates/parameterspreset.class.php\nnew file mode 100644\nindex 0000000000..465d226289\n--- /dev/null\n+++ b/inc/contenttemplates/parameterspreset.class.php\n@@ -0,0 +1,140 @@\n+<?php\n+/**\n+ * ---------------------------------------------------------------------\n+ * GLPI - Gestionnaire Libre de Parc Informatique\n+ * Copyright (C) 2015-2021 Teclib' and contributors.\n+ *\n+ * http://glpi-project.org\n+ *\n+ * based on GLPI - Gestionnaire Libre de Parc Informatique\n+ * Copyright (C) 2003-2014 by the INDEPNET Development Team.\n+ *\n+ * ---------------------------------------------------------------------\n+ *\n+ * LICENSE\n+ *\n+ * This file is part of GLPI.\n+ *\n+ * GLPI is free software; you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation; either version 2 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * GLPI is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with GLPI. If not, see <http://www.gnu.org/licenses/>.\n+ * ---------------------------------------------------------------------\n+ */\n+\n+namespace Glpi\\ContentTemplates;\n+\n+use Glpi\\ContentTemplates\\Parameters\\ChangeParameters;\n+use Glpi\\ContentTemplates\\Parameters\\ParametersTypes\\AttributeParameter;\n+use Glpi\\ContentTemplates\\Parameters\\ParametersTypes\\ObjectParameter;\n+use Glpi\\ContentTemplates\\Parameters\\ProblemParameters;\n+use Glpi\\ContentTemplates\\Parameters\\TicketParameters;\n+use ITILSolution;\n+use SolutionTemplate;\n+use TaskTemplate;\n+use TicketTemplate;\n+\n+if (!defined('GLPI_ROOT')) {\n+   die(\"Sorry. You can't access this file directly\");\n+}\n+\n+/**\n+ * Helper class to get some predefined groups of twig parameters\n+ */\n+class ParametersPreset\n+{\n+   /**\n+    * Twig parameters that will be avaiable in solution/task/followup form\n+    */\n+   public const ITIL_CHILD_TEMPLATE = 'itilchildtemplate';\n+\n+   /**\n+    * Twig parameters that will be available in the solution massive actions\n+    * form for tickets\n+    */\n+   public const TICKET_SOLUTION = 'ticketsolution';\n+\n+   /**\n+    * Get parameters from their unique key (one of the contant above).\n+    * This is useful when sending data through a form, the controller can\n+    * receive a key value and fetch the parameters with this method.\n+    *\n+    * @param string $key\n+    *\n+    * @return array\n+    */\n+   public static function getByKey(string $key): array {\n+      switch ($key) {\n+         case self::ITIL_CHILD_TEMPLATE:\n+            return self::getForAbstractTemplates();\n+\n+         case self::TICKET_SOLUTION:\n+            return self::getForTicketSolution();\n+\n+         default:\n+            return [];\n+      }\n+   }\n+\n+   /**\n+    * Get context to be displayed in the variable list page for each keys\n+    *\n+    * @param string $key\n+    *\n+    * @return string\n+    */\n+   public static function getContextByKey(string $key): string {\n+      switch ($key) {\n+         case self::ITIL_CHILD_TEMPLATE:\n+            $types = [\n+               TicketTemplate::getTypeName(1),\n+               TaskTemplate::getTypeName(1),\n+               SolutionTemplate::getTypeName(1),\n+            ];\n+\n+            return implode(\"/\", $types);\n+\n+         case self::TICKET_SOLUTION:\n+            return ITILSolution::getTypeName(1);\n+\n+         default:\n+            return \"\";\n+      }\n+   }\n+\n+   /**\n+    * Twig parameters that will be avaiable in solution/task/followup form\n+    *\n+    * @return array\n+    */\n+   public static function getForAbstractTemplates(): array {\n+      return [\n+         new AttributeParameter('itemtype', __('Itemtype')),\n+         new ObjectParameter(new TicketParameters()),\n+         new ObjectParameter(new ChangeParameters()),\n+         new ObjectParameter(new ProblemParameters())\n+      ];\n+   }\n+\n+   /**\n+    * Twig parameters that will be available in the solution massive actions\n+    * form for tickets\n+    *\n+    * @return array\n+    */\n+   public static function getForTicketSolution(): array {\n+      return [\n+         new AttributeParameter('itemtype', __('Itemtype')),\n+         new ObjectParameter(new TicketParameters()),\n+      ];\n+   }\n+\n+}\n", "diff --git a/inc/contenttemplates/templatedocumentation.class.php b/inc/contenttemplates/templatedocumentation.class.php\nnew file mode 100644\nindex 0000000000..566b0f8587\n--- /dev/null\n+++ b/inc/contenttemplates/templatedocumentation.class.php\n@@ -0,0 +1,169 @@\n+<?php\n+/**\n+ * ---------------------------------------------------------------------\n+ * GLPI - Gestionnaire Libre de Parc Informatique\n+ * Copyright (C) 2015-2021 Teclib' and contributors.\n+ *\n+ * http://glpi-project.org\n+ *\n+ * based on GLPI - Gestionnaire Libre de Parc Informatique\n+ * Copyright (C) 2003-2014 by the INDEPNET Development Team.\n+ *\n+ * ---------------------------------------------------------------------\n+ *\n+ * LICENSE\n+ *\n+ * This file is part of GLPI.\n+ *\n+ * GLPI is free software; you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation; either version 2 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * GLPI is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with GLPI. If not, see <http://www.gnu.org/licenses/>.\n+ * ---------------------------------------------------------------------\n+ */\n+\n+namespace Glpi\\ContentTemplates;\n+\n+use Glpi\\Toolbox\\MarkdownBuilder;\n+\n+if (!defined('GLPI_ROOT')) {\n+   die(\"Sorry. You can't access this file directly\");\n+}\n+\n+/**\n+ * Class used to build the twig variable documentation for a given set of\n+ * parameters\n+ */\n+class TemplateDocumentation\n+{\n+   /**\n+    * Documentation summary, keep link to all the sections\n+    *\n+    * @var array\n+    */\n+   protected $summary;\n+\n+   /**\n+    * Sections of the documentations.\n+    * The first section contains the available parameters, the followings\n+    * sections contains any extra references needed to work on this parameters\n+    *\n+    * @var array\n+    */\n+   protected $sections;\n+\n+   /**\n+    * Context of the displayed variables\n+    *\n+    * @var string\n+    */\n+   protected $context;\n+\n+   public function __construct(string $context) {\n+      $this->context = $context;\n+      $this->sections = [];\n+      $this->summary = [];\n+   }\n+\n+   /**\n+    * Build the documentation as markdown\n+    *\n+    * @return string\n+    */\n+   public function build(): string {\n+      $content = \"\";\n+\n+      // Build header\n+      $header = new MarkdownBuilder();\n+      $header->addH1(sprintf(__(\"Available variables (%s)\"), $this->context));\n+      $content .= $header->getMarkdown();\n+\n+      // Build summary\n+      $summary = new MarkdownBuilder();\n+      $summary->addH2(_x(\"Documentation\", \"Summary\"), \"summary\");\n+      foreach ($this->summary as $section_title) {\n+         $summary->addSummaryEntry($section_title);\n+      }\n+      $content .= $summary->getMarkdown();\n+\n+      // Build main content\n+      foreach ($this->sections as $section) {\n+         $content .= $section->getMarkdown();\n+      }\n+\n+      return $content;\n+   }\n+\n+   /**\n+    * Add a section to the documentation.\n+    *\n+    * @param string $title              Section's title\n+    * @param array $parameters          Parameters to be displayed in this section\n+    * @param string|null $fields_prefix Prefix to happen to the parameters fields name\n+    */\n+   public function addSection(\n+      string $title,\n+      array $parameters,\n+      ?string $fields_prefix = null\n+   ) {\n+      // Check if this section is already defined, needed as some parameters\n+      // might have the same references\n+      if (isset($this->sections[$title])) {\n+         return;\n+      }\n+\n+      // Keep track of this section in the summary\n+      $this->summary[] = $title;\n+\n+      $new_section = new MarkdownBuilder();\n+      $new_section->addH2($title);\n+\n+      // Set table header\n+      $new_section->addTableHeader([\n+         __(\"Variable\"),\n+         __(\"Label\"),\n+         __(\"Usage\"),\n+         __(\"References\"),\n+      ]);\n+\n+      // Keep track of parameters needing aditionnal references\n+      $references = [];\n+\n+      // Add a row for each parameters\n+      foreach ($parameters as $parameter) {\n+         /** @var \\Glpi\\ContentTemplates\\Parameters\\ParametersTypes\\ParameterTypeInterface $parameter */\n+         $row = [\n+            $parameter->getDocumentationField(),\n+            $parameter->getDocumentationLabel(),\n+            MarkdownBuilder::code($parameter->getDocumentationUsage($fields_prefix)),\n+         ];\n+\n+         $ref = $parameter->getDocumentationReferences();\n+         if (!is_null($ref)) {\n+            $row[] = MarkdownBuilder::navigationLink($ref->getObjectLabel());\n+            $references[] = $ref;\n+         }\n+\n+         $new_section->addTableRow($row);\n+      }\n+\n+      $this->sections[$title] = $new_section;\n+\n+      // Add sections for each references\n+      foreach ($references as $reference) {\n+         $this->addSection(\n+            $reference->getObjectLabel(),\n+            $reference->getAvailableParameters(),\n+            $reference->getDefaultNodeName()\n+         );\n+      }\n+   }\n+}\n", "diff --git a/inc/contenttemplates/templatemanager.class.php b/inc/contenttemplates/templatemanager.class.php\nindex 02c4dd87d1..f378f8e384 100644\n--- a/inc/contenttemplates/templatemanager.class.php\n+++ b/inc/contenttemplates/templatemanager.class.php\n@@ -176,4 +176,35 @@ class TemplateManager\n       $functions = ['date', 'max', 'min','random', 'range'];\n       return new SecurityPolicy($tags, $filters, $methods, $properties, $functions);\n    }\n+\n+   /**\n+    * Generate the documentation of the given parameters\n+    *\n+    * @param string $preset_parameters_key\n+    *\n+    * @return string\n+    */\n+   public static function generateMarkdownDocumentation(\n+      string $preset_parameters_key\n+   ): string {\n+      $parameters = ParametersPreset::getByKey($preset_parameters_key);\n+      $context = ParametersPreset::getContextByKey($preset_parameters_key);\n+\n+      $documentation = new TemplateDocumentation($context);\n+      $documentation->addSection(__(\"Root variables\"), $parameters);\n+      return $documentation->build();\n+   }\n+\n+   /**\n+    * Compute the given parameters\n+    *\n+    * @param array $parameters\n+    *\n+    * @return array\n+    */\n+   public static function computeParameters(array $parameters) {\n+      return array_map(function($parameter) {\n+         return $parameter->compute();\n+      }, $parameters);\n+   }\n }\n", "diff --git a/inc/html.class.php b/inc/html.class.php\nindex 758293b389..70e8dab585 100644\n--- a/inc/html.class.php\n+++ b/inc/html.class.php\n@@ -4087,6 +4087,60 @@ JAVASCRIPT\n       );\n    }\n \n+   /**\n+    * Insert an html link to the twig template variables documentation page\n+    *\n+    * @param string $preset_traget Preset of parameters for which to show documentation (key)\n+    * @param string|null $link_id  Useful if you need to interract with the link through client side code\n+    */\n+   public static function addTemplateDocumentationLink(\n+      string $preset_target,\n+      ?string $link_id = null\n+   ) {\n+      global $CFG_GLPI;\n+\n+      $url = \"/front/contenttemplates/documentation.php?preset=$preset_target\";\n+      $link =  $CFG_GLPI['root_doc'] . $url;\n+      $params = [\n+         'target' => '_blank',\n+         'style'  => 'margin-top:6px; display: block'\n+      ];\n+\n+      if (!is_null($link_id)) {\n+         $params['id'] = $link_id;\n+      }\n+\n+      $text = __('Available variables') . ' <i class=\"fas fa-question-circle\"></i>';\n+\n+      echo Html::link($text, $link, $params);\n+   }\n+\n+   /**\n+    * Insert an html link to the twig template variables documentation page and\n+    * move it before the given textarea.\n+    * Useful if you don't have access to the form where you want to put this link at\n+    *\n+    * @param string $selector JQuery selector to find the target textarea\n+    * @param string $preset_traget   Preset of parameters for which to show documentation (key)\n+    */\n+   public static function addTemplateDocumentationLinkJS(\n+      string $selector,\n+      string $preset_target\n+   ) {\n+      $link_id = \"template_documentation_\" . mt_rand();\n+      self::addTemplateDocumentationLink($preset_target, $link_id);\n+\n+      // Move link before the given textarea\n+      echo Html::scriptBlock(<<<JAVASCRIPT\n+         $(\n+            function() {\n+               $('{$selector}').parent().append($('#{$link_id}'));\n+            }\n+         );\n+JAVASCRIPT\n+      );\n+   }\n+\n    /**\n     * Convert rich text content to simple text content\n     *\n@@ -5276,7 +5330,7 @@ JAVASCRIPT;\n          unset($options['confirm']);\n       }\n       // Do not escape title if it is an image or a i tag (fontawesome)\n-      if (!preg_match('/^<i(mg)?.*/', $text)) {\n+      if (!preg_match('/<i(mg)?.*/', $text)) {\n          $text = Html::cleanInputText($text);\n       }\n \n", "diff --git a/inc/ticket.class.php b/inc/ticket.class.php\nindex fc0f03d423..d6170aa88f 100644\n--- a/inc/ticket.class.php\n+++ b/inc/ticket.class.php\n@@ -30,9 +30,9 @@\n  * ---------------------------------------------------------------------\n  */\n \n-use Glpi\\ContentTemplates\\Parameters\\ParametersTypes\\AttributeParameter;\n-use Glpi\\ContentTemplates\\Parameters\\ParametersTypes\\ObjectParameter;\n use Glpi\\ContentTemplates\\Parameters\\TicketParameters;\n+use Glpi\\ContentTemplates\\ParametersPreset;\n+use Glpi\\ContentTemplates\\TemplateManager;\n use Glpi\\Event;\n use Glpi\\Toolbox\\RichText;\n \n@@ -2666,7 +2666,10 @@ JAVASCRIPT;\n \n             echo '<div class=\"form-row-vertical\">';\n             $label = __('Description');\n-            echo \"<label for='content'>$label</label>\";\n+\n+            echo \"<label for='content'>\";\n+            echo \"$label&nbsp;&nbsp;\";\n+            echo \"</label>\";\n             Html::textarea(['name'              => 'content',\n                             'value'             => '',\n                             'rand'              => $rand,\n@@ -2678,10 +2681,13 @@ JAVASCRIPT;\n                             'enable_images'     => false,\n                             'cols'              => 12,\n                             'rows'              => 80]);\n-            Html::activateUserTemplateAutocompletion('textarea[name=content]', [\n-               (new AttributeParameter('itemtype', __('Itemtype')))->compute(),\n-               (new ObjectParameter(new TicketParameters()))->compute(),\n-            ]);\n+            Html::addTemplateDocumentationLink(ParametersPreset::TICKET_SOLUTION);\n+            $parameters = ParametersPreset::getForTicketSolution();\n+            Html::activateUserTemplateAutocompletion(\n+               'textarea[name=content]',\n+               TemplateManager::computeParameters($parameters)\n+            );\n+\n             echo '</div>'; // .form-row\n \n             echo '</div>'; // .horizontal-form\n", "diff --git a/inc/toolbox/markdownbuilder.class.php b/inc/toolbox/markdownbuilder.class.php\nnew file mode 100644\nindex 0000000000..642122ece5\n--- /dev/null\n+++ b/inc/toolbox/markdownbuilder.class.php\n@@ -0,0 +1,182 @@\n+<?php\n+/**\n+ * ---------------------------------------------------------------------\n+ * GLPI - Gestionnaire Libre de Parc Informatique\n+ * Copyright (C) 2015-2021 Teclib' and contributors.\n+ *\n+ * http://glpi-project.org\n+ *\n+ * based on GLPI - Gestionnaire Libre de Parc Informatique\n+ * Copyright (C) 2003-2014 by the INDEPNET Development Team.\n+ *\n+ * ---------------------------------------------------------------------\n+ *\n+ * LICENSE\n+ *\n+ * This file is part of GLPI.\n+ *\n+ * GLPI is free software; you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation; either version 2 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * GLPI is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with GLPI. If not, see <http://www.gnu.org/licenses/>.\n+ * ---------------------------------------------------------------------\n+ */\n+\n+namespace Glpi\\Toolbox;\n+\n+use Toolbox;\n+\n+/**\n+ * Helper class to build markdown content\n+ */\n+class MarkdownBuilder\n+{\n+   /**\n+    * Generated markdown content\n+    *\n+    * @var string\n+    */\n+   protected $content = \"\";\n+\n+   /**\n+    * Get the generated markdown content\n+    *\n+    * @return string\n+    */\n+   public function getMarkdown(): string {\n+      return $this->content;\n+   }\n+\n+   /**\n+    * Add a header to the markdown content\n+    *\n+    * @param string $prefix Header type (#, ##, ...)\n+    * @param string $content Header content\n+    * @param string|null $css_class Css class to add to this header\n+    */\n+   protected function addHeader(\n+      string $prefix,\n+      string $content,\n+      ?string $css_class = null\n+   ) {\n+      $css_class = !is_null($css_class) ? \"{.$css_class}\" : \"\";\n+      $this->content .= sprintf(\"%s %s %s \\n\", $prefix, $content, $css_class);\n+   }\n+\n+   /**\n+    * Add a h1 header\n+    *\n+    * @param string $content Header content\n+    * @param string|null $css_class Css class to add to this header\n+    */\n+   public function addH1(string $content, ?string $css_class = null) {\n+      $this->addHeader(\"#\", $content, $css_class);\n+   }\n+\n+   /**\n+    * Add a h2 header\n+    *\n+    * @param string $content Header content\n+    * @param string|null $css_class Css class to add to this header\n+    */\n+   public function addH2(string $content, ?string $css_class = null) {\n+      $this->addHeader(\"##\", $content, $css_class);\n+   }\n+\n+   /**\n+    * Add a h3 header\n+    *\n+    * @param string $content Header content\n+    * @param string|null $css_class Css class to add to this header\n+    */\n+   public function addH3(string $content, ?string $css_class = null) {\n+      $this->addHeader(\"###\", $content, $css_class);\n+   }\n+\n+   /**\n+    * Add a h4 header\n+    *\n+    * @param string $content Header content\n+    * @param string|null $css_class Css class to add to this header\n+    */\n+   public function addH4(string $content, ?string $css_class = null) {\n+      $this->addHeader(\"####\", $content, $css_class);\n+   }\n+\n+   /**\n+    * Add a h5 header\n+    *\n+    * @param string $content Header content\n+    * @param string|null $css_class Css class to add to this header\n+    */\n+   public function addH5(string $content, ?string $css_class = null) {\n+      $this->addHeader(\"#####\", $content, $css_class);\n+   }\n+\n+   /**\n+    * Add a h6 header\n+    *\n+    * @param string $content Header content\n+    * @param string|null $css_class Css class to add to this header\n+    */\n+   public function addH6(string $content, ?string $css_class = null) {\n+      $this->addHeader(\"######\", $content, $css_class);\n+   }\n+\n+   /**\n+    * Add a table row\n+    *\n+    * @param array $values\n+    */\n+   public function addTableRow(array $values) {\n+      $this->content .= \"|\" . implode(\"|\", $values) . \"\\n\";\n+   }\n+\n+   /**\n+    * Add a table header\n+    *\n+    * @param array $values\n+    */\n+   public function addTableHeader(array $headers) {\n+      $separator = array_fill(0, count($headers), '------');\n+      $this->addTableRow($headers);\n+      $this->addTableRow($separator);\n+   }\n+\n+   /**\n+    * Helper function to encapsulate single line code\n+    *\n+    * @return string\n+    */\n+   public static function code($code): string {\n+      return sprintf(\"```%s```\", $code);\n+   }\n+\n+   /**\n+    * Helper function create a navigation link\n+    *\n+    * @return string\n+    */\n+   public static function navigationLink($label) {\n+      $link = Toolbox::slugify($label, '');\n+      return \"[$label](#$link)\";\n+   }\n+\n+   /**\n+    * Helper function create a summary entry\n+    *\n+    * @return string\n+    */\n+   public function addSummaryEntry($label) {\n+      $link = self::navigationLink($label);\n+      $this->content .= \"* $link\\n\";\n+   }\n+}\n", "diff --git a/tests/functionnal/Glpi/ContentTemplates/Parameters/AbstractParameters.php b/tests/functionnal/Glpi/ContentTemplates/Parameters/AbstractParameters.php\nindex 793efe3093..bc0ff80015 100644\n--- a/tests/functionnal/Glpi/ContentTemplates/Parameters/AbstractParameters.php\n+++ b/tests/functionnal/Glpi/ContentTemplates/Parameters/AbstractParameters.php\n@@ -33,10 +33,13 @@\n namespace tests\\units\\Glpi\\ContentTemplates\\Parameters;\n \n use DbTestCase;\n+use Glpi\\ContentTemplates\\TemplateManager;\n \n class AbstractParameters extends DbTestCase\n {\n    protected function testGetAvailableParameters($values, $parameters): void {\n+      $parameters = TemplateManager::computeParameters($parameters);\n+\n       $values_keys = array_keys($values);\n       $parameters_keys = array_column($parameters, 'key');\n \n"], "label": 0, "cve": "CVE-2022-24869", "rank": 65, "commit": "e4f712a9390ed0bd799857726aadfcc43f09fa0a", "cve_attention_tokens": []}
{"cve_desc": "message/index.php in Moodle through 2.5.9, 2.6.x before 2.6.9, 2.7.x before 2.7.6, and 2.8.x before 2.8.4 does not consider the moodle/site:readallmessages capability before accessing arbitrary conversations, which allows remote authenticated users to obtain sensitive personal-contact and unread-message-count information via a modified URL.", "commit_msg": "MDL-49216 mod_forum: Move subquery to outer component\n\nIt is not possible to order sub-query results with some RDBMs, and the\nsubquery is not necessary anyway.\n\n", "diff": ["diff --git a/mod/forum/lib.php b/mod/forum/lib.php\nindex b3b527f9cce..c4c2216c42a 100644\n--- a/mod/forum/lib.php\n+++ b/mod/forum/lib.php\n@@ -2522,9 +2522,8 @@ function forum_count_discussion_replies($forumid, $forumsort=\"\", $limit=-1, $pag\n                   FROM {forum_posts} p\n                        JOIN {forum_discussions} d ON p.discussion = d.id\n                  WHERE d.forum = ?\n-              GROUP BY p.discussion $groupby\n-              $orderby\";\n-        return $DB->get_records_sql(\"SELECT * FROM ($sql) sq\", array($forumid), $limitfrom, $limitnum);\n+              GROUP BY p.discussion $groupby $orderby\";\n+        return $DB->get_records_sql($sql, array($forumid), $limitfrom, $limitnum);\n     }\n }\n \n"], "label": 0, "cve": "CVE-2015-2266", "rank": 11, "commit": "933fa26e63fe3b3b51e48590a339913333060117", "cve_attention_tokens": []}
{"cve_desc": "code/sitefeatures/PageCommentInterface.php in SilverStripe 2.4.x before 2.4.6 might allow remote attackers to execute arbitrary code via a crafted cookie in a user comment submission, which is not properly handled when it is deserialized.", "commit_msg": "BUGFIX: fixing random changing of access tab radio buttons when refreshing the CMS with a URL such as /admin#Root_Access in Firefox.\n\n", "diff": ["diff --git a/javascript/LeftAndMain.js b/javascript/LeftAndMain.js\nindex 35d700cd..778c63b4 100644\n--- a/javascript/LeftAndMain.js\n+++ b/javascript/LeftAndMain.js\n@@ -7,6 +7,13 @@ if(typeof(jQuery) != 'undefined') {\n \t\t$(document).ready(function() {\n \t\t\twindow.onresize(true);\n \t\t});\n+\n+\t\t//Turn off autocomplete to fix the access tab randomly switching radio buttons in Firefox when refresh the page\n+\t\t// with an anchor tag in the URL. E.g: /admin#Root_Access\n+\t\t//Autocomplete in the CMS also causes strangeness in other browsers, so this turns it off for all browsers.\n+\t\t//see the following for demo and explanation of the Firefox bug:\n+\t\t//  http://www.ryancramer.com/journal/entries/radio_buttons_firefox/\n+\t\t$(\"#Form_EditForm\").attr(\"autocomplete\", \"off\");\n \t})(jQuery);\n }\n \n"], "label": 0, "cve": "CVE-2011-4962", "rank": 4, "commit": "af0bf453b24356b7f5bea251ce1f467f2f961427", "cve_attention_tokens": []}
{"cve_desc": "In FreeRADIUS 3.0 through 3.0.19, on average 1 in every 2048 EAP-pwd handshakes fails because the password element cannot be found within 10 iterations of the hunting and pecking loop. This leaks information that an attacker can use to recover the password of any user. This information leakage is similar to the \"Dragonblood\" attack and CVE-2019-9494.", "commit_msg": "Update ChangeLog\n", "diff": ["diff --git a/doc/ChangeLog b/doc/ChangeLog\nindex 9f31093226..8472359bfb 100644\n--- a/doc/ChangeLog\n+++ b/doc/ChangeLog\n@@ -13,6 +13,8 @@ FreeRADIUS 3.0.20 Wed 10 Apr 2019 09:00:00 EDT urgency=low\n \t  Since there is not standard yet for EAP with TLS 1.3, it\n \t  will not work.\n \t* Added tripplite dictionary. #2760\n+\t* Switch to the async interface for rlm_sql_postgresql so that\n+\t  we can eforce query_timeout.\n \n \tBug fixes\n \t* Allow listen.ipaddr to reference an IPv6-only host #2627\n"], "label": 0, "cve": "CVE-2019-13456", "rank": 10, "commit": "5afe26ac8a031d466ed75997c7b95db068cab3e4", "cve_attention_tokens": ["eap"]}
{"cve_desc": "getID3() before 1.9.8, as used in ownCloud Server before 5.0.15 and 6.0.x before 6.0.2, allows remote attackers to read arbitrary files, cause a denial of service, or possibly have other impact via an XML External Entity (XXE) attack.", "commit_msg": "Update write.id3v2.php\n\ntrim harmful\n", "diff": ["diff --git a/getid3/write.id3v2.php b/getid3/write.id3v2.php\nindex 03d43ff..7b6eaa1 100644\n--- a/getid3/write.id3v2.php\n+++ b/getid3/write.id3v2.php\n@@ -1544,7 +1544,7 @@ class getid3_write_id3v2\n \t\t\t\t\t\t$frame_data = false;\n \t\t\t\t\t\tif ($this->ID3v2FrameIsAllowed($frame_name, $source_data_array)) {\n \t\t\t\t\t\t\tif(array_key_exists('description', $source_data_array) && array_key_exists('encodingid', $source_data_array) && array_key_exists('encoding', $this->tag_data)) {\n-\t\t\t\t\t\t\t\t$source_data_array['description'] = trim(getid3_lib::iconv_fallback($this->tag_data['encoding'], $source_data_array['encoding'], $source_data_array['description']));\n+\t\t\t\t\t\t\t\t$source_data_array['description'] = getid3_lib::iconv_fallback($this->tag_data['encoding'], $source_data_array['encoding'], $source_data_array['description']);\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t\tif ($frame_data = $this->GenerateID3v2FrameData($frame_name, $source_data_array)) {\n \t\t\t\t\t\t\t\t$FrameUnsynchronisation = false;\n"], "label": 0, "cve": "CVE-2014-2053", "rank": 16, "commit": "a7b7f4282a02ed3448e870e602a940e8666f7828", "cve_attention_tokens": []}
{"cve_desc": "Heap-based buffer overflow in the dissector_postgresql function in dissectors/ec_postgresql.c in Ettercap before 0.8.1 allows remote attackers to cause a denial of service or possibly execute arbitrary code via a crafted password length value that is inconsistent with the actual length of the password.", "commit_msg": "Fixed many dissectors missing valid ports and SSL wrappers\n\n", "diff": ["diff --git a/src/dissectors/ec_ftp.c b/src/dissectors/ec_ftp.c\nindex d80db808..ea6b21ee 100644\n--- a/src/dissectors/ec_ftp.c\n+++ b/src/dissectors/ec_ftp.c\n@@ -1,5 +1,5 @@\n /*\n-    ettercap -- dissector FTP -- TCP 21\n+    ettercap -- dissector FTP -- TCP 21 992\n \n     Copyright (C) ALoR & NaGA\n \n@@ -23,7 +23,7 @@\n #include <ec_decode.h>\n #include <ec_dissect.h>\n #include <ec_session.h>\n-\n+#include <ec_sslwrap.h>\n \n /* protos */\n \n@@ -40,6 +40,7 @@ void ftp_init(void);\n void __init ftp_init(void)\n {\n    dissect_add(\"ftp\", APP_LAYER_TCP, 21, dissector_ftp);\n+   sslw_dissect_add(\"ftps\", 992, dissector_ftp, SSL_ENABLED);\n }\n \n FUNC_DECODER(dissector_ftp)\n", "diff --git a/src/dissectors/ec_icq.c b/src/dissectors/ec_icq.c\nindex e1bac903..9e2f06c3 100644\n--- a/src/dissectors/ec_icq.c\n+++ b/src/dissectors/ec_icq.c\n@@ -1,5 +1,5 @@\n /*\n-    ettercap -- dissector icq -- TCP 5190\n+    ettercap -- dissector icq -- TCP 5190 5191 5192 5193\n \n     Copyright (C) ALoR & NaGA\n \n@@ -64,6 +64,9 @@ static void decode_pwd(char *pwd, char *outpwd);\n static void __init icq_init(void)\n {\n    dissect_add(\"icq\", APP_LAYER_TCP, 5190, dissector_icq);\n+   dissect_add(\"icq\", APP_LAYER_TCP, 5191, dissector_icq);\n+   dissect_add(\"icq\", APP_LAYER_TCP, 5192, dissector_icq);\n+   dissect_add(\"icq\", APP_LAYER_TCP, 5193, dissector_icq);\n }\n \n FUNC_DECODER(dissector_icq)\n", "diff --git a/src/dissectors/ec_irc.c b/src/dissectors/ec_irc.c\nindex 549aea4f..af865414 100644\n--- a/src/dissectors/ec_irc.c\n+++ b/src/dissectors/ec_irc.c\n@@ -1,5 +1,5 @@\n /*\n-    ettercap -- dissector irc -- TCP 6666 6667 6668 6669\n+    ettercap -- dissector irc -- TCP 6665 6666 6667 6668 6669\n \n     Copyright (C) ALoR & NaGA\n \n@@ -39,6 +39,7 @@ void irc_init(void);\n \n void __init irc_init(void)\n {\n+   dissect_add(\"irc\", APP_LAYER_TCP, 6665, dissector_irc);\n    dissect_add(\"irc\", APP_LAYER_TCP, 6666, dissector_irc);\n    dissect_add(\"irc\", APP_LAYER_TCP, 6667, dissector_irc);\n    dissect_add(\"irc\", APP_LAYER_TCP, 6668, dissector_irc);\n", "diff --git a/src/dissectors/ec_iscsi.c b/src/dissectors/ec_iscsi.c\nindex 8c93027c..39d89e6d 100644\n--- a/src/dissectors/ec_iscsi.c\n+++ b/src/dissectors/ec_iscsi.c\n@@ -1,5 +1,5 @@\n /*\n-    ettercap -- dissector for iSCSI CHAP authentication -- TCP 3260\n+    ettercap -- dissector for iSCSI CHAP authentication -- TCP 860 3260\n \n     Copyright (C) Dhiru Kholia (dhiru at openwall.com)\n \n@@ -96,6 +96,7 @@ static unsigned char *_memmem(unsigned char *haystack, int hlen, char *needle, i\n \n void __init iscsi_init(void)\n {\n+   dissect_add(\"iscsi\", APP_LAYER_TCP, 860, dissector_iscsi);\n    dissect_add(\"iscsi\", APP_LAYER_TCP, 3260, dissector_iscsi);\n }\n \n", "diff --git a/src/dissectors/ec_mountd.c b/src/dissectors/ec_mountd.c\nindex d02d8ba8..fdb3e964 100644\n--- a/src/dissectors/ec_mountd.c\n+++ b/src/dissectors/ec_mountd.c\n@@ -1,5 +1,5 @@\n /*\n-    ettercap -- dissector mountd - RPC\n+    ettercap -- dissector mountd -- TCP 2049\n \n     Copyright (C) ALoR & NaGA\n \n@@ -45,6 +45,7 @@ void mountd_init(void);\n void __init mountd_init(void)\n {\n    /* This is inserted into the dissectors' chain by the portmap dissector */\n+   dissect_add(\"mountd\", APP_LAYER_TCP, 2049, dissector_mountd);\n }\n \n FUNC_DECODER(dissector_mountd)\n", "diff --git a/src/dissectors/ec_radius.c b/src/dissectors/ec_radius.c\nindex 816c15ec..8267fb3d 100644\n--- a/src/dissectors/ec_radius.c\n+++ b/src/dissectors/ec_radius.c\n@@ -1,5 +1,5 @@\n /*\n-    ettercap -- dissector RADIUS -- UDP 1645 1646\n+    ettercap -- dissector RADIUS -- TCP/UDP 1645 1646 1812\n \n     Copyright (C) ALoR & NaGA\n \n@@ -95,6 +95,8 @@ void __init radius_init(void)\n {\n    dissect_add(\"radius\", APP_LAYER_UDP, 1645, dissector_radius);\n    dissect_add(\"radius\", APP_LAYER_UDP, 1646, dissector_radius);\n+   dissect_add(\"radius\", APP_LAYER_TCP, 1812, dissector_radius);\n+   dissect_add(\"radius\", APP_LAYER_UDP, 1812, dissector_radius);\n }\n \n FUNC_DECODER(dissector_radius)\n", "diff --git a/src/dissectors/ec_rlogin.c b/src/dissectors/ec_rlogin.c\nindex e1bf74ca..09b336bc 100644\n--- a/src/dissectors/ec_rlogin.c\n+++ b/src/dissectors/ec_rlogin.c\n@@ -1,5 +1,7 @@\n /*\n-    ettercap -- dissector RLOGIN -- TCP 512 513\n+    ettercap -- dissector RLOGIN -- TCP 512 513 514, UDP 513\n+\n+    These ports are the well known Unix R-Services (rexec, rlogin, rshell, rwho)\n \n     Copyright (C) ALoR & NaGA\n \n@@ -41,6 +43,8 @@ void __init rlogin_init(void)\n {\n    dissect_add(\"rlogin\", APP_LAYER_TCP, 512, dissector_rlogin);\n    dissect_add(\"rlogin\", APP_LAYER_TCP, 513, dissector_rlogin);\n+   dissect_add(\"rlogin\", APP_LAYER_UDP, 513, dissector_rlogin);\n+   dissect_add(\"rlogin\", APP_LAYER_TCP, 514, dissector_rlogin);\n }\n \n /*\n", "diff --git a/src/dissectors/ec_x11.c b/src/dissectors/ec_x11.c\nindex ee78d35c..fba1c35d 100644\n--- a/src/dissectors/ec_x11.c\n+++ b/src/dissectors/ec_x11.c\n@@ -1,5 +1,5 @@\n /*\n-    ettercap -- dissector X11 -- TCP 6000, 6001, ...\n+    ettercap -- dissector X11 -- TCP 6000, 6001, ..., 6063\n \n     Copyright (C) ALoR & NaGA\n \n@@ -57,6 +57,66 @@ void __init x11_init(void)\n    dissect_add(\"x11\", APP_LAYER_TCP, 6001, dissector_x11);\n    dissect_add(\"x11\", APP_LAYER_TCP, 6002, dissector_x11);\n    dissect_add(\"x11\", APP_LAYER_TCP, 6003, dissector_x11);\n+   dissect_add(\"x11\", APP_LAYER_TCP, 6004, dissector_x11);\n+   dissect_add(\"x11\", APP_LAYER_TCP, 6005, dissector_x11);\n+   dissect_add(\"x11\", APP_LAYER_TCP, 6006, dissector_x11);\n+   dissect_add(\"x11\", APP_LAYER_TCP, 6007, dissector_x11);\n+   dissect_add(\"x11\", APP_LAYER_TCP, 6008, dissector_x11);\n+   dissect_add(\"x11\", APP_LAYER_TCP, 6009, dissector_x11);\n+   dissect_add(\"x11\", APP_LAYER_TCP, 6010, dissector_x11);\n+   dissect_add(\"x11\", APP_LAYER_TCP, 6011, dissector_x11);\n+   dissect_add(\"x11\", APP_LAYER_TCP, 6012, dissector_x11);\n+   dissect_add(\"x11\", APP_LAYER_TCP, 6013, dissector_x11);\n+   dissect_add(\"x11\", APP_LAYER_TCP, 6014, dissector_x11);\n+   dissect_add(\"x11\", APP_LAYER_TCP, 6015, dissector_x11);\n+   dissect_add(\"x11\", APP_LAYER_TCP, 6016, dissector_x11);\n+   dissect_add(\"x11\", APP_LAYER_TCP, 6017, dissector_x11);\n+   dissect_add(\"x11\", APP_LAYER_TCP, 6018, dissector_x11);\n+   dissect_add(\"x11\", APP_LAYER_TCP, 6019, dissector_x11);\n+   dissect_add(\"x11\", APP_LAYER_TCP, 6020, dissector_x11);\n+   dissect_add(\"x11\", APP_LAYER_TCP, 6021, dissector_x11);\n+   dissect_add(\"x11\", APP_LAYER_TCP, 6022, dissector_x11);\n+   dissect_add(\"x11\", APP_LAYER_TCP, 6023, dissector_x11);\n+   dissect_add(\"x11\", APP_LAYER_TCP, 6024, dissector_x11);\n+   dissect_add(\"x11\", APP_LAYER_TCP, 6025, dissector_x11);\n+   dissect_add(\"x11\", APP_LAYER_TCP, 6026, dissector_x11);\n+   dissect_add(\"x11\", APP_LAYER_TCP, 6027, dissector_x11);\n+   dissect_add(\"x11\", APP_LAYER_TCP, 6028, dissector_x11);\n+   dissect_add(\"x11\", APP_LAYER_TCP, 6029, dissector_x11);\n+   dissect_add(\"x11\", APP_LAYER_TCP, 6030, dissector_x11);\n+   dissect_add(\"x11\", APP_LAYER_TCP, 6031, dissector_x11);\n+   dissect_add(\"x11\", APP_LAYER_TCP, 6032, dissector_x11);\n+   dissect_add(\"x11\", APP_LAYER_TCP, 6033, dissector_x11);\n+   dissect_add(\"x11\", APP_LAYER_TCP, 6034, dissector_x11);\n+   dissect_add(\"x11\", APP_LAYER_TCP, 6035, dissector_x11);\n+   dissect_add(\"x11\", APP_LAYER_TCP, 6036, dissector_x11);\n+   dissect_add(\"x11\", APP_LAYER_TCP, 6037, dissector_x11);\n+   dissect_add(\"x11\", APP_LAYER_TCP, 6038, dissector_x11);\n+   dissect_add(\"x11\", APP_LAYER_TCP, 6039, dissector_x11);\n+   dissect_add(\"x11\", APP_LAYER_TCP, 6040, dissector_x11);\n+   dissect_add(\"x11\", APP_LAYER_TCP, 6041, dissector_x11);\n+   dissect_add(\"x11\", APP_LAYER_TCP, 6042, dissector_x11);\n+   dissect_add(\"x11\", APP_LAYER_TCP, 6043, dissector_x11);\n+   dissect_add(\"x11\", APP_LAYER_TCP, 6044, dissector_x11);\n+   dissect_add(\"x11\", APP_LAYER_TCP, 6045, dissector_x11);\n+   dissect_add(\"x11\", APP_LAYER_TCP, 6046, dissector_x11);\n+   dissect_add(\"x11\", APP_LAYER_TCP, 6047, dissector_x11);\n+   dissect_add(\"x11\", APP_LAYER_TCP, 6048, dissector_x11);\n+   dissect_add(\"x11\", APP_LAYER_TCP, 6049, dissector_x11);\n+   dissect_add(\"x11\", APP_LAYER_TCP, 6050, dissector_x11);\n+   dissect_add(\"x11\", APP_LAYER_TCP, 6051, dissector_x11);\n+   dissect_add(\"x11\", APP_LAYER_TCP, 6052, dissector_x11);\n+   dissect_add(\"x11\", APP_LAYER_TCP, 6053, dissector_x11);\n+   dissect_add(\"x11\", APP_LAYER_TCP, 6054, dissector_x11);\n+   dissect_add(\"x11\", APP_LAYER_TCP, 6055, dissector_x11);\n+   dissect_add(\"x11\", APP_LAYER_TCP, 6056, dissector_x11);\n+   dissect_add(\"x11\", APP_LAYER_TCP, 6057, dissector_x11);\n+   dissect_add(\"x11\", APP_LAYER_TCP, 6058, dissector_x11);\n+   dissect_add(\"x11\", APP_LAYER_TCP, 6059, dissector_x11);\n+   dissect_add(\"x11\", APP_LAYER_TCP, 6060, dissector_x11);\n+   dissect_add(\"x11\", APP_LAYER_TCP, 6061, dissector_x11);\n+   dissect_add(\"x11\", APP_LAYER_TCP, 6062, dissector_x11);\n+   dissect_add(\"x11\", APP_LAYER_TCP, 6063, dissector_x11);\n }\n \n FUNC_DECODER(dissector_x11)\n"], "label": 0, "cve": "CVE-2014-6395", "rank": 9, "commit": "4a31725e414d891004643d714cd58cc8af44ec50", "cve_attention_tokens": []}
{"cve_desc": "The csnmp_read_table function in snmp.c in the SNMP plugin in collectd before 5.6.3 is susceptible to a double free in a certain error case, which could lead to a crash (or potentially have other impact).", "commit_msg": "collectd.spec: fixes to previous commit\n\n", "diff": ["diff --git a/contrib/redhat/collectd.spec b/contrib/redhat/collectd.spec\nindex c8b650f9..7dab1db4 100644\n--- a/contrib/redhat/collectd.spec\n+++ b/contrib/redhat/collectd.spec\n@@ -148,6 +148,7 @@\n %define with_write_http 0%{!?_without_write_http:1}\n %define with_write_log 0%{!?_without_write_log:1}\n %define with_write_redis 0%{!?_without_write_redis:1}\n+%define with_write_riemann 0%{!?_without_write_riemann:1}\n %define with_write_sensu 0%{!?_without_write_sensu:1}\n %define with_write_tsdb 0%{!?_without_write_tsdb:1}\n %define with_xmms 0%{!?_without_xmms:0%{?_has_xmms}}\n@@ -222,6 +223,7 @@\n %define with_redis 0\n %define with_rrdcached 0\n %define with_write_redis 0\n+%define with_write_riemann 0\n %define with_xmms 0\n %endif\n \n"], "label": 0, "cve": "CVE-2017-16820", "rank": 17, "commit": "d9e13d4d5a04cf35bf4c0cd0a826af7dbb212c90", "cve_attention_tokens": []}
{"cve_desc": "A NULL pointer dereference was discovered in AP4_AtomSampleTable::GetSample in Core/Ap4AtomSampleTable.cpp in Bento4 version 1.5.0-617. The vulnerability causes a segmentation fault and application crash, which leads to remote denial of service.", "commit_msg": "fix warning\n\n", "diff": ["diff --git a/Source/C++/Crypto/Ap4AesBlockCipher.cpp b/Source/C++/Crypto/Ap4AesBlockCipher.cpp\nindex 9d23c8a..9802e4b 100644\n--- a/Source/C++/Crypto/Ap4AesBlockCipher.cpp\n+++ b/Source/C++/Crypto/Ap4AesBlockCipher.cpp\n@@ -1692,7 +1692,7 @@ static aes_rval aes_enc_blk(const unsigned char in_blk[], unsigned char out_blk[\n         {\n             kp += nc;\n             round(fwd_rnd, p1, p0, kp); \n-            pt = p0, p0 = p1, p1 = pt;\n+            pt = p0; p0 = p1; p1 = pt;\n         }\n #endif\n         kp += nc;\n@@ -1814,7 +1814,7 @@ static aes_rval aes_dec_blk(const unsigned char in_blk[], unsigned char out_blk[\n         {\n             kp -= nc;\n             round(inv_rnd, p1, p0, kp); \n-            pt = p0, p0 = p1, p1 = pt;\n+            pt = p0; p0 = p1; p1 = pt;\n         }\n #endif\n         kp -= nc;\n"], "label": 0, "cve": "CVE-2017-14640", "rank": 14, "commit": "db1622e5e5a8bcce3872334ae0f935f4f056eff8", "cve_attention_tokens": []}
{"cve_desc": "Libsixel prior to v1.8.3 contains a stack buffer overflow in the function gif_process_raster at fromgif.c.", "commit_msg": "Merge PR #94, fixing CVE-2018-19757, Thanks to NOKUBI Takatsugu(@knok)\n\n", "diff": [], "label": 0, "cve": "CVE-2020-21050", "rank": 54, "commit": "d64ced2ba9a0bb05497243b19b221eb8b0297ac8", "cve_attention_tokens": []}
{"cve_desc": "Cross-site scripting (XSS) vulnerability in flowplayer.swf in the Flash fallback feature in Flowplayer HTML5 5.4.3 allows remote attackers to inject arbitrary web script or HTML by using URL encoding within the callback parameter name.  NOTE: this vulnerability exists because of an incomplete fix for CVE-2013-7342.", "commit_msg": "Merge pull request #603 from flowplayer/bug/599\n\nFix #599 - Pass player as event parameter\n", "diff": [], "label": 0, "cve": "CVE-2013-7343", "rank": 31, "commit": "6a1a455b3bedc1387fc1212c86faab504b10611a", "cve_attention_tokens": []}
{"cve_desc": "Socket.io is a realtime application framework that provides communication via websockets. Because socket.io 0.9.6 and earlier depends on `Math.random()` to create socket IDs, the IDs are predictable. An attacker is able to guess the socket ID and gain access to socket.io servers, potentially obtaining sensitive information.", "commit_msg": "Corrects unsafe usage of for..in, permitting socket.io to be used in environments where Object, Function, etc. have been extended.\n\nhttp://yuiblog.com/blog/2006/09/26/for-in-intrigue/\n\n", "diff": ["diff --git a/lib/manager.js b/lib/manager.js\nindex 69e07761..7251adfd 100644\n--- a/lib/manager.js\n+++ b/lib/manager.js\n@@ -93,7 +93,9 @@ function Manager (server, options) {\n   };\n \n   for (var i in options) {\n-    this.settings[i] = options[i];\n+    if (options.hasOwnProperty(i)) {\n+      this.settings[i] = options[i];\n+    }\n   }\n \n   var self = this;\n@@ -129,8 +131,10 @@ function Manager (server, options) {\n   });\n \n   for (var i in transports) {\n-    if (transports[i].init) {\n-      transports[i].init(this);\n+    if (transports.hasOwnProperty(i)) {\n+      if (transports[i].init) {\n+        transports[i].init(this);\n+      }\n     }\n   }\n \n@@ -489,8 +493,10 @@ Manager.prototype.onClientMessage = function (id, packet) {\n \n Manager.prototype.onClientDisconnect = function (id, reason) {\n   for (var name in this.namespaces) {\n-    this.namespaces[name].handleDisconnect(id, reason, typeof this.roomClients[id] !== 'undefined' &&\n-      typeof this.roomClients[id][name] !== 'undefined');\n+    if (this.namespaces.hasOwnProperty(name)) {\n+      this.namespaces[name].handleDisconnect(id, reason, typeof this.roomClients[id] !== 'undefined' &&\n+        typeof this.roomClients[id][name] !== 'undefined');\n+    }\n   }\n \n   this.onDisconnect(id);\n@@ -524,7 +530,9 @@ Manager.prototype.onDisconnect = function (id, local) {\n \n   if (this.roomClients[id]) {\n     for (var room in this.roomClients[id]) {\n-      this.onLeave(id, room);\n+      if (this.roomClients[id].hasOwnProperty(room)) {\n+        this.onLeave(id, room);\n+      }\n     }\n     delete this.roomClients[id]\n   }\n@@ -674,11 +682,13 @@ Manager.prototype.handleClient = function (data, req) {\n \n       // initialize the socket for all namespaces\n       for (var i in this.namespaces) {\n-        var socket = this.namespaces[i].socket(data.id, true);\n+        if (this.namespaces.hasOwnProperty(i)) {\n+          var socket = this.namespaces[i].socket(data.id, true);\n \n-        // echo back connect packet and fire connection event\n-        if (i === '') {\n-          this.namespaces[i].handlePacket(data.id, { type: 'connect' });\n+          // echo back connect packet and fire connection event\n+          if (i === '') {\n+            this.namespaces[i].handlePacket(data.id, { type: 'connect' });\n+          }\n         }\n       }\n \n"], "label": 0, "cve": "CVE-2017-16031", "rank": 9, "commit": "aeb904f58b611707b13c542357e8e02ba4d0d413", "cve_attention_tokens": []}
{"cve_desc": "Versions of Apache CXF Fediz prior to 1.4.4 do not fully disable Document Type Declarations (DTDs) when either parsing the Identity Provider response in the application plugins, or in the Identity Provider itself when parsing certain XML-based parameters.", "commit_msg": "Adding 1.4.3 release notes\n\n", "diff": ["diff --git a/release_notes.txt b/release_notes.txt\nindex 2e6c56c3..284b23cf 100644\n--- a/release_notes.txt\n+++ b/release_notes.txt\n@@ -1,4 +1,4 @@\n-Apache CXF Fediz 1.4.2 Release Notes\n+Apache CXF Fediz 1.4.3 Release Notes\n ------------------------------------\n \n 1. Overview\n@@ -65,6 +65,20 @@ N.A.\n \n 8. Specific issues, features, and improvements fixed in this version\n \n+Release Notes - CXF-Fediz - Version 1.4.3\n+\n+Bug\n+\n+    [FEDIZ-211] - Local IdP redirection (after token expiry) is not working\n+    [FEDIZ-212] - Multiple OIDC logout return to login page\n+    [FEDIZ-213] - Spring plugins don't handle token expiration properly\n+    [FEDIZ-214] - OIDC generated already expired id_token\n+\n+Improvement\n+\n+    [FEDIZ-210] - Limit IdP request parameter size\n+\n+\n Release Notes - CXF-Fediz - Version 1.4.2\n \n Improvement\n"], "label": 0, "cve": "CVE-2018-8038", "rank": 36, "commit": "d9391674db8dd20a76f0b441cbfd364a38c36b8d", "cve_attention_tokens": []}
{"cve_desc": "Heap-based buffer overflow in the opj_dwt_interleave_v function in dwt.c in OpenJPEG, as used in PDFium in Google Chrome before 53.0.2785.89 on Windows and OS X and before 53.0.2785.92 on Linux, allows remote attackers to execute arbitrary code via crafted coordinate values in JPEG 2000 data.", "commit_msg": "Avoids undefined shift behaviour in m_dc_level_shift computation\n\nFixes warning found on clusterfuzz-testcase-minimized-5146316340461568\nhttps://bugs.chromium.org/p/oss-fuzz/issues/detail?id=2495\n\nCredit to OSS Fuzz\n\n", "diff": ["diff --git a/src/lib/openjp2/j2k.c b/src/lib/openjp2/j2k.c\nindex 6b86ddfe..8bd77f43 100644\n--- a/src/lib/openjp2/j2k.c\n+++ b/src/lib/openjp2/j2k.c\n@@ -2231,9 +2231,12 @@ static OPJ_BOOL opj_j2k_read_siz(opj_j2k_t *p_j2k,\n                           i, l_img_comp->dx, l_img_comp->dy);\n             return OPJ_FALSE;\n         }\n-        if (l_img_comp->prec > 38) { /* TODO openjpeg won't handle more than ? */\n+        /* Avoids later undefined shift in computation of */\n+        /* p_j2k->m_specific_param.m_decoder.m_default_tcp->tccps[i].m_dc_level_shift = 1\n+                    << (l_image->comps[i].prec - 1); */\n+        if (l_img_comp->prec > 32) {\n             opj_event_msg(p_manager, EVT_ERROR,\n-                          \"Invalid values for comp = %d : prec=%u (should be between 1 and 38 according to the JPEG2000 norm)\\n\",\n+                          \"Invalid values for comp = %d : prec=%u (should be between 1 and 38 according to the JPEG2000 norm. OpenJpeg only supports up to 32)\\n\",\n                           i, l_img_comp->prec);\n             return OPJ_FALSE;\n         }\n@@ -6267,6 +6270,13 @@ static OPJ_BOOL opj_j2k_read_cbd(opj_j2k_t *p_j2k,\n         ++p_header_data;\n         l_comp->sgnd = (l_comp_def >> 7) & 1;\n         l_comp->prec = (l_comp_def & 0x7f) + 1;\n+\n+        if (l_comp->prec > 32) {\n+            opj_event_msg(p_manager, EVT_ERROR,\n+                          \"Invalid values for comp = %d : prec=%u (should be between 1 and 38 according to the JPEG2000 norm. OpenJpeg only supports up to 32)\\n\",\n+                          i, l_comp->prec);\n+            return OPJ_FALSE;\n+        }\n         ++l_comp;\n     }\n \n", "diff --git a/tests/nonregression/CMakeLists.txt b/tests/nonregression/CMakeLists.txt\nindex 187c1cb0..677f96cd 100644\n--- a/tests/nonregression/CMakeLists.txt\n+++ b/tests/nonregression/CMakeLists.txt\n@@ -82,6 +82,7 @@ set(BLACKLIST_JPEG2000\n     issue476.jp2 #kdu_jp2info ok\n     issue475.jp2 #kdu_jp2info ok\n     issue413.jp2 #kdu_jp2info ok\n+    issue823.jp2 #kdu_jp2info ok\n    )\n \n file(GLOB_RECURSE OPJ_DATA_NR_LIST\n"], "label": 0, "cve": "CVE-2016-5157", "rank": 62, "commit": "d6fa30099797c68c6a67decf58571dd59dbf734b", "cve_attention_tokens": []}
{"cve_desc": "The DCM reader in ImageMagick before 6.9.4-5 and 7.x before 7.0.1-7 allows remote attackers to have unspecified impact by leveraging lack of validation of (1) pixel.red, (2) pixel.green, and (3) pixel.blue.", "commit_msg": "...\n\n", "diff": ["diff --git a/config/policy.xml b/config/policy.xml\nindex 5ec314c46..29d8a0b8b 100644\n--- a/config/policy.xml\n+++ b/config/policy.xml\n@@ -64,5 +64,6 @@\n   <!-- <policy domain=\"coder\" rights=\"none\" pattern=\"MVG\" /> -->\n   <!-- <policy domain=\"delegate\" rights=\"none\" pattern=\"HTTPS\" /> -->\n   <!-- <policy domain=\"path\" rights=\"none\" pattern=\"@*\" /> -->\n+  <!-- <policy domain=\"path\" rights=\"none\" pattern=\"|*\" /> -->\n   <policy domain=\"cache\" name=\"shared-secret\" value=\"passphrase\" stealth=\"true\"/>\n </policymap>\n"], "label": 0, "cve": "CVE-2016-5691", "rank": 28, "commit": "18107aaa0d5f8b46e4740722678f1dffddbe4338", "cve_attention_tokens": []}
{"cve_desc": "code-server is vulnerable to Inefficient Regular Expression Complexity", "commit_msg": "add CodeTogether docs\n\n", "diff": ["diff --git a/docs/collaboration.md b/docs/collaboration.md\nindex d1235ec0..0a7cc235 100644\n--- a/docs/collaboration.md\n+++ b/docs/collaboration.md\n@@ -29,3 +29,33 @@ SERVICE_URL=https://open-vsx.org/vscode/gallery \\\n ### Sharing with Duckly\n \n As `code-server` is based on VS Code, you can follow the steps described on Duckly's [Pair programming with VS Code](https://duckly.com/tools/vscode) page and skip the installation step.\n+\n+## Code sharing with CodeTogether\n+\n+[CodeTogether](https://www.codetogether.com/) is another service with cross-platform live collaborative features:\n+\n+- sharing ports\n+- shared read/write terminals\n+- joining via web browser or another IDE\n+\n+However, some of these are [paid options](https://www.codetogether.com/pricing/).\n+\n+### Installing the CodeTogether extension\n+\n+1. Install the CodeTogether extension from OpenVSX on `code-server`.\n+\n+   ```sh\n+   SERVICE_URL=https://open-vsx.org/vscode/gallery \\\n+     ITEM_URL=https://open-vsx.org/vscode/item \\\n+     code-server --install-extension genuitecllc.codetogether\n+   ```\n+\n+2. CodeTogether requires VS Code's proposed API to run. Start code-server with the following flag:\n+\n+   ```sh\n+   code-server --enable-proposed-api genuitecllc.codetogether\n+   ```\n+\n+   Or you could add a value in code-server's [config file](https://coder.com/docs/code-server/v3.11.1/FAQ#how-does-the-config-file-work).\n+\n+3. Refresh code-server and navigate to the CodeTogether icon in the sidebar to start collaborating.\n"], "label": 0, "cve": "CVE-2021-3810", "rank": 23, "commit": "5dc7d17d16666d902b017d5600e7d4ffab469390", "cve_attention_tokens": []}
{"cve_desc": "An issue was discovered in mj2/opj_mj2_extract.c in OpenJPEG 2.3.0. The output prefix was not checked for length, which could overflow a buffer, when providing a prefix with 50 or more characters on the command line.", "commit_msg": "jp2: convert: fix null pointer dereference\n\nTile components in a JP2 image might have null data pointer by defining a\nzero component size (for example using large horizontal or vertical\nsampling periods). This null data pointer leads to null image component\ndata pointer, causing crash when dereferenced without != null check in\nimagetopnm.\n\nAdd != null check.\n\nThis commit addresses #1152 (CVE-2018-18088).\n\n", "diff": ["diff --git a/src/bin/jp2/convert.c b/src/bin/jp2/convert.c\nindex fa02e31c..e670cd82 100644\n--- a/src/bin/jp2/convert.c\n+++ b/src/bin/jp2/convert.c\n@@ -2233,6 +2233,11 @@ int imagetopnm(opj_image_t * image, const char *outfile, int force_split)\n                 opj_version(), wr, hr, max);\n \n         red = image->comps[compno].data;\n+        if (!red) {\n+            fclose(fdest);\n+            continue;\n+        }\n+\n         adjustR =\n             (image->comps[compno].sgnd ? 1 << (image->comps[compno].prec - 1) : 0);\n \n"], "label": 0, "cve": "CVE-2018-7648", "rank": 37, "commit": "cab352e249ed3372dd9355c85e837613fff98fa2", "cve_attention_tokens": []}
{"cve_desc": "scheme/webauthn.c in Glewlwyd SSO server through 2.5.3 has a buffer overflow during FIDO2 signature validation in webauthn registration.", "commit_msg": "Update dependencies version in cmake\n\n", "diff": ["diff --git a/CMakeLists.txt b/CMakeLists.txt\nindex 9c3b7315..7f7523ee 100644\n--- a/CMakeLists.txt\n+++ b/CMakeLists.txt\n@@ -29,10 +29,10 @@ set(PROJECT_DESCRIPTION \"Single Sign On server, OAuth2, Openid Connect, multiple\n set(PROJECT_BUGREPORT_PATH \"https://github.com/babelouest/glewlwyd/issues\")\n set(ORCANIA_VERSION_REQUIRED \"2.2.1\")\n set(YDER_VERSION_REQUIRED \"1.4.14\")\n-set(ULFIUS_VERSION_REQUIRED \"2.7.4\")\n+set(ULFIUS_VERSION_REQUIRED \"2.7.5\")\n set(HOEL_VERSION_REQUIRED \"1.4.18\")\n set(RHONABWY_VERSION_REQUIRED \"1.1.1\")\n-set(IDDAWC_VERSION_REQUIRED \"1.0.1\")\n+set(IDDAWC_VERSION_REQUIRED \"1.1.0\")\n set(LIBCBOR_VERSION_REQUIRED \"0.5.0\")\n set(JANSSON_VERSION_REQUIRED \"2.11\")\n \n"], "label": 0, "cve": "CVE-2021-40818", "rank": 62, "commit": "95708153c0c4968b32d9f62d3863eea923a1e082", "cve_attention_tokens": []}
{"cve_desc": "Froxlor before 0.9.33.2 with the default configuration/setup might allow remote attackers to obtain the database password by reading /logs/sql-error.log.", "commit_msg": "fix ssl setttings for rewrite vhosts on nginx, fixes #1568\n\n- previously the ssl settings were missing in rewrite vhosts\n- this caused ssl errors for these hosts as the default certificate has been used instead of the vhost specific cert.\n- this seem to only apply for nginx, not apache\n\n", "diff": ["diff --git a/scripts/jobs/cron_tasks.inc.http.30.nginx.php b/scripts/jobs/cron_tasks.inc.http.30.nginx.php\nindex 60e2f91c..79dcc445 100644\n--- a/scripts/jobs/cron_tasks.inc.http.30.nginx.php\n+++ b/scripts/jobs/cron_tasks.inc.http.30.nginx.php\n@@ -419,6 +419,14 @@ class nginx extends HttpConfigBase {\n \t\t\t$domain['documentroot'] = 'https://' . $domain['domain'] . $_sslport . '/';\n \t\t}\n \n+\t\t// create ssl settings first since they are required for normal and redirect vhosts\n+\t\tif ($ssl_vhost === true\n+\t\t\t&& $domain['ssl'] == '1'\n+\t\t\t&& Settings::Get('system.use_ssl') == '1'\n+\t\t) {\n+\t\t\t$vhost_content.= \"\\n\" . $this->composeSslSettings($domain) . \"\\n\";\n+\t\t}\n+\n \t\t// if the documentroot is an URL we just redirect\n \t\tif (preg_match('/^https?\\:\\/\\//', $domain['documentroot'])) {\n \t\t\t$uri = $this->idnaConvert->encode($domain['documentroot']);\n@@ -434,12 +442,6 @@ class nginx extends HttpConfigBase {\n \n \t\t\tif ($this->_deactivated == false) {\n \n-\t\t\t\tif ($ssl_vhost === true\n-\t\t\t\t\t&& $domain['ssl'] == '1'\n-\t\t\t\t\t&& Settings::Get('system.use_ssl') == '1'\n-\t\t\t\t) {\n-\t\t\t\t\t$vhost_content.= $this->composeSslSettings($domain);\n-\t\t\t\t}\n \t\t\t\t$vhost_content = $this->mergeVhostCustom($vhost_content, $this->create_pathOptions($domain)) . \"\\n\";\n \t\t\t\t$vhost_content.= $this->composePhpOptions($domain, $ssl_vhost);\n \n"], "label": 0, "cve": "CVE-2015-5959", "rank": 59, "commit": "6996f6516cc0010b9b19cd695ce2bdec95a82cd3", "cve_attention_tokens": []}
{"cve_desc": "badges/external.php in Moodle 2.5.x before 2.5.2 does not properly handle an object obtained by unserializing a description of an external badge, which allows remote attackers to conduct PHP object injection attacks via unspecified vectors, as demonstrated by overwriting the value of the userid parameter.", "commit_msg": "MDL-38314 repository: Improving performance of upgrade script\n\n", "diff": ["diff --git a/lib/db/upgrade.php b/lib/db/upgrade.php\nindex bf1cb78ce4b..72b13c8e1aa 100644\n--- a/lib/db/upgrade.php\n+++ b/lib/db/upgrade.php\n@@ -2175,12 +2175,17 @@ function xmldb_main_upgrade($oldversion) {\n     if ($oldversion < 2013051400.09) {\n \n         // Remove orphan repository instances.\n-        $sql = 'SELECT contextid FROM {repository_instances} ri\n-                WHERE NOT EXISTS (\n-                    SELECT id FROM {context} c\n-                        WHERE c.id = ri.contextid)';\n-        $ids = $DB->get_fieldset_sql($sql);\n-        $DB->delete_records_list('repository_instances', 'contextid', $ids);\n+        if ($DB->get_dbfamily() === 'mysql') {\n+            $sql = \"DELETE {repository_instances} FROM {repository_instances}\n+                    LEFT JOIN {context} ON {context}.id = {repository_instances}.contextid\n+                    WHERE {context}.id IS NULL\";\n+        } else {\n+            $sql = \"DELETE FROM {repository_instances}\n+                    WHERE NOT EXISTS (\n+                        SELECT 'x' FROM {context}\n+                        WHERE {context}.id = {repository_instances}.contextid)\";\n+        }\n+        $DB->execute($sql);\n \n         // Main savepoint reached.\n         upgrade_main_savepoint(true, 2013051400.09);\n"], "label": 0, "cve": "CVE-2013-5674", "rank": 61, "commit": "03ab0ed880f7e524e358f66ae620250c9c327d3e", "cve_attention_tokens": []}
{"cve_desc": "Linaro/OP-TEE OP-TEE 3.3.0 and earlier is affected by: Buffer Overflow. The impact is: Execution of code in TEE core (kernel) context. The component is: optee_os. The fixed version is: 3.4.0 and later.", "commit_msg": "core: simplify shm cookie handling\n\nSimplifies SHM cookie handling by storing the cookie in the mobj instead\nof putting the burden on the caller. The cookie parameter is dropped\nfrom the thread_rpc_*_payload() functions. All callers of those\nfunctions are also updated and unused cookie members of related structs\nare removed too.\n\nAcked-by: Jerome Forissier <jerome.forissier@linaro.org>\nSigned-off-by: Jens Wiklander <jens.wiklander@linaro.org>\n\n", "diff": ["diff --git a/core/arch/arm/include/kernel/thread.h b/core/arch/arm/include/kernel/thread.h\nindex 6e3dade6e..add9ae00c 100644\n--- a/core/arch/arm/include/kernel/thread.h\n+++ b/core/arch/arm/include/kernel/thread.h\n@@ -70,7 +70,6 @@ struct thread_specific_data {\n \tstruct pgt_cache pgt_cache;\n \tvoid *rpc_fs_payload;\n \tstruct mobj *rpc_fs_payload_mobj;\n-\tuint64_t rpc_fs_payload_cookie;\n \tsize_t rpc_fs_payload_size;\n };\n \n@@ -584,19 +583,17 @@ bool thread_enable_prealloc_rpc_cache(void);\n  * Allocates data for payload buffers.\n  *\n  * @size:\tsize in bytes of payload buffer\n- * @cookie:\treturned cookie used when freeing the buffer\n  *\n  * @returns\tmobj that describes allocated buffer or NULL on error\n  */\n-struct mobj *thread_rpc_alloc_payload(size_t size, uint64_t *cookie);\n+struct mobj *thread_rpc_alloc_payload(size_t size);\n \n /**\n  * Free physical memory previously allocated with thread_rpc_alloc_payload()\n  *\n- * @cookie:\tcookie received when allocating the buffer\n  * @mobj:\tmobj that describes the buffer\n  */\n-void thread_rpc_free_payload(uint64_t cookie, struct mobj *mobj);\n+void thread_rpc_free_payload(struct mobj *mobj);\n \n /**\n  * Does an RPC using a preallocated argument buffer\n@@ -616,20 +613,18 @@ unsigned long thread_smc(unsigned long func_id, unsigned long a1,\n  * Buffer is exported to user mode applications.\n  *\n  * @size:\tsize in bytes of payload buffer\n- * @cookie:\treturned cookie used when freeing the buffer\n  *\n  * @returns\tmobj that describes allocated buffer or NULL on error\n  */\n-struct mobj *thread_rpc_alloc_global_payload(size_t size, uint64_t *cookie);\n+struct mobj *thread_rpc_alloc_global_payload(size_t size);\n \n /**\n  * Free physical memory previously allocated with\n  * thread_rpc_alloc_global_payload()\n  *\n- * @cookie:\tcookie received when allocating the buffer\n  * @mobj:\tmobj that describes the buffer\n  */\n-void thread_rpc_free_global_payload(uint64_t cookie, struct mobj *mobj);\n+void thread_rpc_free_global_payload(struct mobj *mobj);\n \n #endif /*ASM*/\n \n", "diff --git a/core/arch/arm/include/mm/mobj.h b/core/arch/arm/include/mm/mobj.h\nindex f2389a615..66bf567a9 100644\n--- a/core/arch/arm/include/mm/mobj.h\n+++ b/core/arch/arm/include/mm/mobj.h\n@@ -13,6 +13,7 @@\n #include <tee_api_types.h>\n #include <types_ext.h>\n \n+#define MOBJ_INVALID_COOKIE\t0xffffffffffffffff\n \n struct mobj {\n \tconst struct mobj_ops *ops;\n@@ -30,6 +31,7 @@ struct mobj_ops {\n \tvoid (*free)(struct mobj *mobj);\n \tvoid (*update_mapping)(struct mobj *mobj, struct user_ta_ctx *utc,\n \t\t\t       vaddr_t va);\n+\tuint64_t (*get_cookie)(struct mobj *mobj);\n };\n \n extern struct mobj mobj_virt;\n@@ -85,6 +87,14 @@ static inline void mobj_update_mapping(struct mobj *mobj,\n \t\tmobj->ops->update_mapping(mobj, utc, va);\n }\n \n+static inline uint64_t mobj_get_cookie(struct mobj *mobj)\n+{\n+\tif (mobj && mobj->ops && mobj->ops->get_cookie)\n+\t\treturn mobj->ops->get_cookie(mobj);\n+\n+\treturn MOBJ_INVALID_COOKIE;\n+}\n+\n static inline bool mobj_is_nonsec(struct mobj *mobj)\n {\n \treturn mobj_matches(mobj, CORE_MEM_NON_SEC);\n@@ -182,7 +192,7 @@ void mobj_reg_shm_unguard(struct mobj *mobj);\n struct mobj *mobj_mapped_shm_alloc(paddr_t *pages, size_t num_pages,\n \t\t\t\t   paddr_t page_offset, uint64_t cookie);\n \n-struct mobj *mobj_shm_alloc(paddr_t pa, size_t size);\n+struct mobj *mobj_shm_alloc(paddr_t pa, size_t size, uint64_t cookie);\n \n struct mobj *mobj_paged_alloc(size_t size);\n \n", "diff --git a/core/arch/arm/kernel/ree_fs_ta.c b/core/arch/arm/kernel/ree_fs_ta.c\nindex 5ac027c7d..299b92c2f 100644\n--- a/core/arch/arm/kernel/ree_fs_ta.c\n+++ b/core/arch/arm/kernel/ree_fs_ta.c\n@@ -23,7 +23,6 @@\n struct user_ta_store_handle {\n \tstruct shdr *nw_ta; /* Non-secure (shared memory) */\n \tsize_t nw_ta_size;\n-\tuint64_t cookie;\n \tstruct mobj *mobj;\n \tsize_t offs;\n \tstruct shdr *shdr; /* Verified secure copy of @nw_ta's signed header */\n@@ -36,14 +35,12 @@ struct user_ta_store_handle {\n  * address of the raw TA binary is received in out parameter @ta.\n  */\n static TEE_Result rpc_load(const TEE_UUID *uuid, struct shdr **ta,\n-\t\t\t   uint64_t *cookie_ta, size_t *ta_size,\n-\t\t\t   struct mobj **mobj)\n+\t\t\t   size_t *ta_size, struct mobj **mobj)\n {\n \tTEE_Result res;\n \tstruct optee_msg_param params[2];\n-\tuint64_t cta = 0;\n \n-\tif (!uuid || !ta || !cookie_ta || !mobj || !ta_size)\n+\tif (!uuid || !ta || !mobj || !ta_size)\n \t\treturn TEE_ERROR_BAD_PARAMETERS;\n \n \tmemset(params, 0, sizeof(params));\n@@ -58,24 +55,23 @@ static TEE_Result rpc_load(const TEE_UUID *uuid, struct shdr **ta,\n \tif (res != TEE_SUCCESS)\n \t\treturn res;\n \n-\t*mobj = thread_rpc_alloc_payload(params[1].u.tmem.size, &cta);\n+\t*mobj = thread_rpc_alloc_payload(params[1].u.tmem.size);\n \tif (!*mobj)\n \t\treturn TEE_ERROR_OUT_OF_MEMORY;\n \n \t*ta = mobj_get_va(*mobj, 0);\n \t/* We don't expect NULL as thread_rpc_alloc_payload() was successful */\n \tassert(*ta);\n-\t*cookie_ta = cta;\n \t*ta_size = params[1].u.tmem.size;\n \n \tparams[0].attr = OPTEE_MSG_ATTR_TYPE_VALUE_INPUT;\n \ttee_uuid_to_octets((void *)&params[0].u.value, uuid);\n \tmsg_param_init_memparam(params + 1, *mobj, 0, params[1].u.tmem.size,\n-\t\t\t\tcta, MSG_PARAM_MEM_DIR_OUT);\n+\t\t\t\tMSG_PARAM_MEM_DIR_OUT);\n \n \tres = thread_rpc_cmd(OPTEE_MSG_RPC_CMD_LOAD_TA, 2, params);\n \tif (res != TEE_SUCCESS)\n-\t\tthread_rpc_free_payload(cta, *mobj);\n+\t\tthread_rpc_free_payload(*mobj);\n \treturn res;\n }\n \n@@ -89,7 +85,6 @@ static TEE_Result ta_open(const TEE_UUID *uuid,\n \tuint32_t hash_algo = 0;\n \tstruct shdr *ta = NULL;\n \tsize_t ta_size = 0;\n-\tuint64_t cookie = 0;\n \tTEE_Result res;\n \tsize_t offs;\n \n@@ -98,7 +93,7 @@ static TEE_Result ta_open(const TEE_UUID *uuid,\n \t\treturn TEE_ERROR_OUT_OF_MEMORY;\n \n \t/* Request TA from tee-supplicant */\n-\tres = rpc_load(uuid, &ta, &cookie, &ta_size, &mobj);\n+\tres = rpc_load(uuid, &ta, &ta_size, &mobj);\n \tif (res != TEE_SUCCESS)\n \t\tgoto error;\n \n@@ -170,7 +165,6 @@ static TEE_Result ta_open(const TEE_UUID *uuid,\n \n \thandle->nw_ta = ta;\n \thandle->nw_ta_size = ta_size;\n-\thandle->cookie = cookie;\n \thandle->offs = offs;\n \thandle->hash_algo = hash_algo;\n \thandle->hash_ctx = hash_ctx;\n@@ -182,7 +176,7 @@ static TEE_Result ta_open(const TEE_UUID *uuid,\n error_free_hash:\n \tcrypto_hash_free_ctx(hash_ctx, hash_algo);\n error_free_payload:\n-\tthread_rpc_free_payload(cookie, mobj);\n+\tthread_rpc_free_payload(mobj);\n error:\n \tshdr_free(shdr);\n \tfree(handle);\n@@ -248,7 +242,7 @@ static void ta_close(struct user_ta_store_handle *h)\n {\n \tif (!h)\n \t\treturn;\n-\tthread_rpc_free_payload(h->cookie, h->mobj);\n+\tthread_rpc_free_payload(h->mobj);\n \tcrypto_hash_free_ctx(h->hash_ctx, h->hash_algo);\n \tfree(h->shdr);\n \tfree(h);\n", "diff --git a/core/arch/arm/kernel/thread.c b/core/arch/arm/kernel/thread.c\nindex 67560bd48..a3d713332 100644\n--- a/core/arch/arm/kernel/thread.c\n+++ b/core/arch/arm/kernel/thread.c\n@@ -610,9 +610,8 @@ void __weak __thread_std_smc_entry(struct thread_smc_args *args)\n \n \t\ttee_fs_rpc_cache_clear(&thr->tsd);\n \t\tif (!thread_prealloc_rpc_cache) {\n-\t\t\tthread_rpc_free_arg(thr->rpc_carg);\n+\t\t\tthread_rpc_free_arg(mobj_get_cookie(thr->rpc_mobj));\n \t\t\tmobj_free(thr->rpc_mobj);\n-\t\t\tthr->rpc_carg = 0;\n \t\t\tthr->rpc_arg = 0;\n \t\t\tthr->rpc_mobj = NULL;\n \t\t}\n@@ -1331,9 +1330,8 @@ bool thread_disable_prealloc_rpc_cache(uint64_t *cookie)\n \trv = true;\n \tfor (n = 0; n < CFG_NUM_THREADS; n++) {\n \t\tif (threads[n].rpc_arg) {\n+\t\t\t*cookie = mobj_get_cookie(threads[n].rpc_mobj);\n \t\t\tmobj_free(threads[n].rpc_mobj);\n-\t\t\t*cookie = threads[n].rpc_carg;\n-\t\t\tthreads[n].rpc_carg = 0;\n \t\t\tthreads[n].rpc_arg = NULL;\n \t\t\tgoto out;\n \t\t}\n@@ -1374,11 +1372,10 @@ out:\n  * Allocates data for struct optee_msg_arg.\n  *\n  * @size:\tsize in bytes of struct optee_msg_arg\n- * @cookie:\treturned cookie used when freeing the buffer\n  *\n  * @returns\tmobj that describes allocated buffer or NULL on error\n  */\n-static struct mobj *thread_rpc_alloc_arg(size_t size, uint64_t *cookie)\n+static struct mobj *thread_rpc_alloc_arg(size_t size)\n {\n \tpaddr_t pa;\n \tuint64_t co;\n@@ -1397,19 +1394,17 @@ static struct mobj *thread_rpc_alloc_arg(size_t size, uint64_t *cookie)\n \n \t/* Check if this region is in static shared space */\n \tif (core_pbuf_is(CORE_MEM_NSEC_SHM, pa, size))\n-\t\tmobj = mobj_shm_alloc(pa, size);\n+\t\tmobj = mobj_shm_alloc(pa, size, co);\n \telse if ((!(pa & SMALL_PAGE_MASK)) && size <= SMALL_PAGE_SIZE)\n \t\tmobj = mobj_mapped_shm_alloc(&pa, 1, 0, co);\n \n \tif (!mobj)\n \t\tgoto err;\n \n-\t*cookie = co;\n \treturn mobj;\n err:\n \tthread_rpc_free_arg(co);\n \tmobj_free(mobj);\n-\t*cookie = 0;\n \treturn NULL;\n }\n \n@@ -1420,22 +1415,22 @@ static bool get_rpc_arg(uint32_t cmd, size_t num_params,\n \tstruct optee_msg_arg *arg = thr->rpc_arg;\n \tstruct mobj *mobj;\n \tsize_t sz = OPTEE_MSG_GET_ARG_SIZE(THREAD_RPC_MAX_NUM_PARAMS);\n-\tuint64_t c;\n \n \tif (num_params > THREAD_RPC_MAX_NUM_PARAMS)\n \t\treturn false;\n \n \tif (!arg) {\n-\t\tmobj = thread_rpc_alloc_arg(sz, &c);\n+\t\tmobj = thread_rpc_alloc_arg(sz);\n \t\tif (!mobj)\n \t\t\treturn false;\n \n \t\targ = mobj_get_va(mobj, 0);\n-\t\tif (!arg)\n-\t\t\tgoto bad;\n+\t\tif (!arg) {\n+\t\t\tthread_rpc_free_arg(mobj_get_cookie(mobj));\n+\t\t\treturn false;\n+\t\t}\n \n \t\tthr->rpc_arg = arg;\n-\t\tthr->rpc_carg = c;\n \t\tthr->rpc_mobj = mobj;\n \t}\n \n@@ -1445,12 +1440,8 @@ static bool get_rpc_arg(uint32_t cmd, size_t num_params,\n \targ->ret = TEE_ERROR_GENERIC; /* in case value isn't updated */\n \n \t*arg_ret = arg;\n-\t*carg_ret = thr->rpc_carg;\n+\t*carg_ret = mobj_get_cookie(thr->rpc_mobj);\n \treturn true;\n-\n-bad:\n-\tthread_rpc_free_arg(c);\n-\treturn false;\n }\n \n uint32_t thread_rpc_cmd(uint32_t cmd, size_t num_params,\n@@ -1528,16 +1519,16 @@ static void thread_rpc_free(unsigned int bt, uint64_t cookie, struct mobj *mobj)\n  *\t\tfailed.\n  * @cookie:\treturned cookie used when freeing the buffer\n  */\n-static struct mobj *thread_rpc_alloc(size_t size, size_t align, unsigned int bt,\n-\t\t\t\t     uint64_t *cookie)\n+static struct mobj *thread_rpc_alloc(size_t size, size_t align, unsigned int bt)\n {\n \tuint32_t rpc_args[THREAD_RPC_NUM_ARGS] = { OPTEE_SMC_RETURN_RPC_CMD };\n \tstruct optee_msg_arg *arg;\n \tuint64_t carg;\n \tstruct mobj *mobj = NULL;\n+\tuint64_t cookie;\n \n \tif (!get_rpc_arg(OPTEE_MSG_RPC_CMD_SHM_ALLOC, 1, &arg, &carg))\n-\t\tgoto fail;\n+\t\treturn NULL;\n \n \targ->params[0].attr = OPTEE_MSG_ATTR_TYPE_VALUE_INPUT;\n \targ->params[0].u.value.a = bt;\n@@ -1548,55 +1539,56 @@ static struct mobj *thread_rpc_alloc(size_t size, size_t align, unsigned int bt,\n \tthread_rpc(rpc_args);\n \n \tif (arg->ret != TEE_SUCCESS)\n-\t\tgoto fail;\n+\t\treturn NULL;\n \n \tif (arg->num_params != 1)\n-\t\tgoto fail;\n+\t\treturn NULL;\n \n \tif (arg->params[0].attr == OPTEE_MSG_ATTR_TYPE_TMEM_OUTPUT) {\n-\t\t*cookie = arg->params[0].u.tmem.shm_ref;\n+\t\tcookie = arg->params[0].u.tmem.shm_ref;\n \t\tmobj = mobj_shm_alloc(arg->params[0].u.tmem.buf_ptr,\n-\t\t\t\t      arg->params[0].u.tmem.size);\n+\t\t\t\t      arg->params[0].u.tmem.size,\n+\t\t\t\t      cookie);\n \t} else if (arg->params[0].attr == (OPTEE_MSG_ATTR_TYPE_TMEM_OUTPUT |\n \t\t\t\t\t   OPTEE_MSG_ATTR_NONCONTIG)) {\n-\t\t*cookie = arg->params[0].u.tmem.shm_ref;\n+\t\tcookie = arg->params[0].u.tmem.shm_ref;\n \t\tmobj = msg_param_mobj_from_noncontig(\n \t\t\targ->params[0].u.tmem.buf_ptr,\n \t\t\targ->params[0].u.tmem.size,\n-\t\t\t*cookie,\n+\t\t\tcookie,\n \t\t\ttrue);\n-\t} else\n-\t\tgoto fail;\n+\t} else {\n+\t\treturn NULL;\n+\t}\n \n-\tif (!mobj)\n-\t\tgoto free_first;\n+\tif (!mobj) {\n+\t\tthread_rpc_free(bt, cookie, mobj);\n+\t\treturn NULL;\n+\t}\n \n \tassert(mobj_is_nonsec(mobj));\n-\treturn mobj;\n \n-free_first:\n-\tthread_rpc_free(bt, *cookie, mobj);\n-fail:\n-\t*cookie = 0;\n-\treturn NULL;\n+\treturn mobj;\n }\n \n-struct mobj *thread_rpc_alloc_payload(size_t size, uint64_t *cookie)\n+struct mobj *thread_rpc_alloc_payload(size_t size)\n {\n-\treturn thread_rpc_alloc(size, 8, OPTEE_MSG_RPC_SHM_TYPE_APPL, cookie);\n+\treturn thread_rpc_alloc(size, 8, OPTEE_MSG_RPC_SHM_TYPE_APPL);\n }\n \n-void thread_rpc_free_payload(uint64_t cookie, struct mobj *mobj)\n+void thread_rpc_free_payload(struct mobj *mobj)\n {\n-\tthread_rpc_free(OPTEE_MSG_RPC_SHM_TYPE_APPL, cookie, mobj);\n+\tthread_rpc_free(OPTEE_MSG_RPC_SHM_TYPE_APPL, mobj_get_cookie(mobj),\n+\t\t\tmobj);\n }\n \n-struct mobj *thread_rpc_alloc_global_payload(size_t size, uint64_t *cookie)\n+struct mobj *thread_rpc_alloc_global_payload(size_t size)\n {\n-\treturn thread_rpc_alloc(size, 8, OPTEE_MSG_RPC_SHM_TYPE_GLOBAL, cookie);\n+\treturn thread_rpc_alloc(size, 8, OPTEE_MSG_RPC_SHM_TYPE_GLOBAL);\n }\n \n-void thread_rpc_free_global_payload(uint64_t cookie, struct mobj *mobj)\n+void thread_rpc_free_global_payload(struct mobj *mobj)\n {\n-\tthread_rpc_free(OPTEE_MSG_RPC_SHM_TYPE_GLOBAL, cookie, mobj);\n+\tthread_rpc_free(OPTEE_MSG_RPC_SHM_TYPE_GLOBAL, mobj_get_cookie(mobj),\n+\t\t\tmobj);\n }\n", "diff --git a/core/arch/arm/kernel/thread_private.h b/core/arch/arm/kernel/thread_private.h\nindex fe0a10557..148faee5f 100644\n--- a/core/arch/arm/kernel/thread_private.h\n+++ b/core/arch/arm/kernel/thread_private.h\n@@ -91,7 +91,6 @@ struct thread_ctx {\n \tstruct thread_vfp_state vfp_state;\n #endif\n \tvoid *rpc_arg;\n-\tuint64_t rpc_carg;\n \tstruct mobj *rpc_mobj;\n \tstruct mutex_head mutexes;\n \tstruct thread_specific_data tsd;\n", "diff --git a/core/arch/arm/mm/mobj.c b/core/arch/arm/mm/mobj.c\nindex b2bdf6bb9..d936ff52f 100644\n--- a/core/arch/arm/mm/mobj.c\n+++ b/core/arch/arm/mm/mobj.c\n@@ -416,6 +416,11 @@ static TEE_Result mobj_reg_shm_get_cattr(struct mobj *mobj __unused,\n \n static bool mobj_reg_shm_matches(struct mobj *mobj, enum buf_is_attr attr);\n \n+static uint64_t mobj_reg_shm_get_cookie(struct mobj *mobj)\n+{\n+\treturn to_mobj_reg_shm(mobj)->cookie;\n+}\n+\n static const struct mobj_ops mobj_reg_shm_ops __rodata_unpaged = {\n \t.get_pa = mobj_reg_shm_get_pa,\n \t.get_phys_offs = mobj_reg_shm_get_phys_offs,\n@@ -423,6 +428,7 @@ static const struct mobj_ops mobj_reg_shm_ops __rodata_unpaged = {\n \t.get_cattr = mobj_reg_shm_get_cattr,\n \t.matches = mobj_reg_shm_matches,\n \t.free = mobj_reg_shm_free,\n+\t.get_cookie = mobj_reg_shm_get_cookie,\n };\n \n static bool mobj_reg_shm_matches(struct mobj *mobj __maybe_unused,\n@@ -716,6 +722,7 @@ service_init(mobj_mapped_shm_init);\n struct mobj_shm {\n \tstruct mobj mobj;\n \tpaddr_t pa;\n+\tuint64_t cookie;\n };\n \n static struct mobj_shm *to_mobj_shm(struct mobj *mobj);\n@@ -771,12 +778,18 @@ static void mobj_shm_free(struct mobj *mobj)\n \tfree(m);\n }\n \n+static uint64_t mobj_shm_get_cookie(struct mobj *mobj)\n+{\n+\treturn to_mobj_shm(mobj)->cookie;\n+}\n+\n static const struct mobj_ops mobj_shm_ops __rodata_unpaged = {\n \t.get_va = mobj_shm_get_va,\n \t.get_pa = mobj_shm_get_pa,\n \t.get_phys_offs = mobj_shm_get_phys_offs,\n \t.matches = mobj_shm_matches,\n \t.free = mobj_shm_free,\n+\t.get_cookie = mobj_shm_get_cookie,\n };\n \n static struct mobj_shm *to_mobj_shm(struct mobj *mobj)\n@@ -785,7 +798,7 @@ static struct mobj_shm *to_mobj_shm(struct mobj *mobj)\n \treturn container_of(mobj, struct mobj_shm, mobj);\n }\n \n-struct mobj *mobj_shm_alloc(paddr_t pa, size_t size)\n+struct mobj *mobj_shm_alloc(paddr_t pa, size_t size, uint64_t cookie)\n {\n \tstruct mobj_shm *m;\n \n@@ -799,6 +812,7 @@ struct mobj *mobj_shm_alloc(paddr_t pa, size_t size)\n \tm->mobj.size = size;\n \tm->mobj.ops = &mobj_shm_ops;\n \tm->pa = pa;\n+\tm->cookie = cookie;\n \n \treturn &m->mobj;\n }\n", "diff --git a/core/arch/arm/pta/benchmark.c b/core/arch/arm/pta/benchmark.c\nindex 492ce1d90..5d1c4d91b 100644\n--- a/core/arch/arm/pta/benchmark.c\n+++ b/core/arch/arm/pta/benchmark.c\n@@ -27,7 +27,6 @@ static size_t bench_ts_size;\n \n static struct mutex bench_reg_mu = MUTEX_INITIALIZER;\n static struct mobj *bench_mobj;\n-static uint64_t bench_cookie;\n \n static TEE_Result rpc_reg_global_buf(uint64_t type, paddr_t phta, size_t size)\n {\n@@ -73,8 +72,7 @@ static TEE_Result alloc_benchmark_buffer(uint32_t type,\n \t\treturn TEE_ERROR_BAD_STATE;\n \t}\n \n-\tbench_mobj = thread_rpc_alloc_global_payload(bench_ts_size,\n-\t\t\t\t\t\t     &bench_cookie);\n+\tbench_mobj = thread_rpc_alloc_global_payload(bench_ts_size);\n \tif (!bench_mobj) {\n \t\tEMSG(TA_PRINT_PREFIX\n \t\t\t\"can't create mobj for timestamp buffer\");\n@@ -84,7 +82,7 @@ static TEE_Result alloc_benchmark_buffer(uint32_t type,\n \n \tbench_ts_global = (struct tee_ts_global *)mobj_get_va(bench_mobj, 0);\n \tif (!bench_ts_global) {\n-\t\tthread_rpc_free_global_payload(bench_cookie, bench_mobj);\n+\t\tthread_rpc_free_global_payload(bench_mobj);\n \n \t\tmutex_unlock(&bench_reg_mu);\n \t\treturn TEE_ERROR_BAD_STATE;\n@@ -159,7 +157,7 @@ static TEE_Result unregister_benchmark(uint32_t type,\n \n \tres = rpc_reg_global_buf(OPTEE_MSG_RPC_CMD_BENCH_REG_DEL, 0, 0);\n \n-\tthread_rpc_free_global_payload(bench_cookie, bench_mobj);\n+\tthread_rpc_free_global_payload(bench_mobj);\n \treturn res;\n }\n \n", "diff --git a/core/arch/arm/pta/gprof.c b/core/arch/arm/pta/gprof.c\nindex 35588464b..de270245a 100644\n--- a/core/arch/arm/pta/gprof.c\n+++ b/core/arch/arm/pta/gprof.c\n@@ -22,10 +22,9 @@ static TEE_Result gprof_send_rpc(TEE_UUID *uuid, void *buf, size_t len,\n \tstruct optee_msg_param params[3];\n \tstruct mobj *mobj;\n \tTEE_Result res = TEE_ERROR_GENERIC;\n-\tuint64_t c = 0;\n \tchar *va;\n \n-\tmobj = thread_rpc_alloc_payload(sizeof(*uuid) + len, &c);\n+\tmobj = thread_rpc_alloc_payload(sizeof(*uuid) + len);\n \tif (!mobj)\n \t\treturn TEE_ERROR_OUT_OF_MEMORY;\n \n@@ -40,9 +39,9 @@ static TEE_Result gprof_send_rpc(TEE_UUID *uuid, void *buf, size_t len,\n \tparams[0].attr = OPTEE_MSG_ATTR_TYPE_VALUE_INOUT;\n \tparams[0].u.value.a = *id;\n \n-\tmsg_param_init_memparam(params + 1, mobj, 0, sizeof(*uuid), c,\n+\tmsg_param_init_memparam(params + 1, mobj, 0, sizeof(*uuid),\n \t\t\t\tMSG_PARAM_MEM_DIR_IN);\n-\tmsg_param_init_memparam(params + 2, mobj, sizeof(*uuid), len, c,\n+\tmsg_param_init_memparam(params + 2, mobj, sizeof(*uuid), len,\n \t\t\t\tMSG_PARAM_MEM_DIR_IN);\n \n \tres = thread_rpc_cmd(OPTEE_MSG_RPC_CMD_GPROF, 3, params);\n@@ -51,7 +50,7 @@ static TEE_Result gprof_send_rpc(TEE_UUID *uuid, void *buf, size_t len,\n \n \t*id = (uint32_t)params[0].u.value.a;\n exit:\n-\tthread_rpc_free_payload(c, mobj);\n+\tthread_rpc_free_payload(mobj);\n \treturn res;\n }\n \n", "diff --git a/core/arch/arm/tee/entry_std.c b/core/arch/arm/tee/entry_std.c\nindex 92fdf0fc4..0b60ed5a5 100644\n--- a/core/arch/arm/tee/entry_std.c\n+++ b/core/arch/arm/tee/entry_std.c\n@@ -498,7 +498,7 @@ static struct mobj *get_cmd_buffer(paddr_t parg, uint32_t *num_params)\n \t*num_params = READ_ONCE(arg->num_params);\n \targs_size = OPTEE_MSG_GET_ARG_SIZE(*num_params);\n \n-\treturn mobj_shm_alloc(parg, args_size);\n+\treturn mobj_shm_alloc(parg, args_size, MOBJ_INVALID_COOKIE);\n }\n \n /*\n", "diff --git a/core/arch/arm/tee/pta_socket.c b/core/arch/arm/tee/pta_socket.c\nindex 3f2d5a3d4..d9a5ac676 100644\n--- a/core/arch/arm/tee/pta_socket.c\n+++ b/core/arch/arm/tee/pta_socket.c\n@@ -23,7 +23,6 @@ static TEE_Result socket_open(uint32_t instance_id, uint32_t param_types,\n {\n \tstruct mobj *mobj;\n \tTEE_Result res;\n-\tuint64_t cookie;\n \tvoid *va;\n \tstruct optee_msg_param msg_params[4];\n \tuint32_t exp_pt = TEE_PARAM_TYPES(TEE_PARAM_TYPE_VALUE_INPUT,\n@@ -39,7 +38,7 @@ static TEE_Result socket_open(uint32_t instance_id, uint32_t param_types,\n \n \tmemset(msg_params, 0, sizeof(msg_params));\n \n-\tva = tee_fs_rpc_cache_alloc(params[1].memref.size, &mobj, &cookie);\n+\tva = tee_fs_rpc_cache_alloc(params[1].memref.size, &mobj);\n \tif (!va)\n \t\treturn TEE_ERROR_OUT_OF_MEMORY;\n \n@@ -54,7 +53,7 @@ static TEE_Result socket_open(uint32_t instance_id, uint32_t param_types,\n \n \t/* server address */\n \tif (!msg_param_init_memparam(msg_params + 2, mobj, 0,\n-\t\t\t\t     params[1].memref.size, cookie,\n+\t\t\t\t     params[1].memref.size,\n \t\t\t\t     MSG_PARAM_MEM_DIR_IN))\n \t\treturn TEE_ERROR_BAD_STATE;\n \tmemcpy(va, params[1].memref.buffer, params[1].memref.size);\n@@ -100,7 +99,6 @@ static TEE_Result socket_send(uint32_t instance_id, uint32_t param_types,\n {\n \tstruct mobj *mobj;\n \tTEE_Result res;\n-\tuint64_t cookie;\n \tvoid *va;\n \tstruct optee_msg_param msg_params[3];\n \tuint32_t exp_pt = TEE_PARAM_TYPES(TEE_PARAM_TYPE_VALUE_INPUT,\n@@ -116,7 +114,7 @@ static TEE_Result socket_send(uint32_t instance_id, uint32_t param_types,\n \n \tmemset(msg_params, 0, sizeof(msg_params));\n \n-\tva = tee_fs_rpc_cache_alloc(params[1].memref.size, &mobj, &cookie);\n+\tva = tee_fs_rpc_cache_alloc(params[1].memref.size, &mobj);\n \tif (!va)\n \t\treturn TEE_ERROR_OUT_OF_MEMORY;\n \n@@ -127,7 +125,7 @@ static TEE_Result socket_send(uint32_t instance_id, uint32_t param_types,\n \n \t/* buffer */\n \tif (!msg_param_init_memparam(msg_params + 1, mobj, 0,\n-\t\t\t\t     params[1].memref.size, cookie,\n+\t\t\t\t     params[1].memref.size,\n \t\t\t\t     MSG_PARAM_MEM_DIR_IN))\n \t\treturn TEE_ERROR_BAD_STATE;\n \n@@ -147,7 +145,6 @@ static TEE_Result socket_recv(uint32_t instance_id, uint32_t param_types,\n {\n \tstruct mobj *mobj;\n \tTEE_Result res;\n-\tuint64_t cookie;\n \tvoid *va;\n \tstruct optee_msg_param msg_params[3];\n \tuint32_t exp_pt = TEE_PARAM_TYPES(TEE_PARAM_TYPE_VALUE_INPUT,\n@@ -163,7 +160,7 @@ static TEE_Result socket_recv(uint32_t instance_id, uint32_t param_types,\n \n \tmemset(msg_params, 0, sizeof(msg_params));\n \n-\tva = tee_fs_rpc_cache_alloc(params[1].memref.size, &mobj, &cookie);\n+\tva = tee_fs_rpc_cache_alloc(params[1].memref.size, &mobj);\n \tif (!va)\n \t\treturn TEE_ERROR_OUT_OF_MEMORY;\n \n@@ -174,7 +171,7 @@ static TEE_Result socket_recv(uint32_t instance_id, uint32_t param_types,\n \n \t/* buffer */\n \tif (!msg_param_init_memparam(msg_params + 1, mobj, 0,\n-\t\t\t\t     params[1].memref.size, cookie,\n+\t\t\t\t     params[1].memref.size,\n \t\t\t\t     MSG_PARAM_MEM_DIR_OUT))\n \t\treturn TEE_ERROR_BAD_STATE;\n \n@@ -194,7 +191,6 @@ static TEE_Result socket_ioctl(uint32_t instance_id, uint32_t param_types,\n {\n \tstruct mobj *mobj;\n \tTEE_Result res;\n-\tuint64_t cookie;\n \tvoid *va;\n \tstruct optee_msg_param msg_params[3];\n \tuint32_t exp_pt = TEE_PARAM_TYPES(TEE_PARAM_TYPE_VALUE_INPUT,\n@@ -210,7 +206,7 @@ static TEE_Result socket_ioctl(uint32_t instance_id, uint32_t param_types,\n \n \tmemset(msg_params, 0, sizeof(msg_params));\n \n-\tva = tee_fs_rpc_cache_alloc(params[1].memref.size, &mobj, &cookie);\n+\tva = tee_fs_rpc_cache_alloc(params[1].memref.size, &mobj);\n \tif (!va)\n \t\treturn TEE_ERROR_OUT_OF_MEMORY;\n \n@@ -221,7 +217,7 @@ static TEE_Result socket_ioctl(uint32_t instance_id, uint32_t param_types,\n \n \t/* buffer */\n \tif (!msg_param_init_memparam(msg_params + 1, mobj, 0,\n-\t\t\t\t     params[1].memref.size, cookie,\n+\t\t\t\t     params[1].memref.size,\n \t\t\t\t     MSG_PARAM_MEM_DIR_INOUT))\n \t\treturn TEE_ERROR_BAD_STATE;\n \n", "diff --git a/core/include/kernel/msg_param.h b/core/include/kernel/msg_param.h\nindex e8e9c8991..4c9e5ae63 100644\n--- a/core/include/kernel/msg_param.h\n+++ b/core/include/kernel/msg_param.h\n@@ -66,7 +66,6 @@ struct mobj *msg_param_mobj_from_noncontig(paddr_t buf_ptr, size_t size,\n  * @mobj\t- mobj describing the shared memory buffer\n  * @offset\t- offset of the buffer\n  * @size\t- size of the buffer\n- * @cookie\t- NW cookie of the shared buffer\n  * @dir\t\t- data direction\n  *\n  * Idea behind this function is that thread_rpc_alloc() can return\n@@ -81,7 +80,7 @@ struct mobj *msg_param_mobj_from_noncontig(paddr_t buf_ptr, size_t size,\n  */\n bool msg_param_init_memparam(struct optee_msg_param *param, struct mobj *mobj,\n \t\t\t     size_t offset, size_t size,\n-\t\t\t     uint64_t cookie, enum msg_param_mem_dir dir);\n+\t\t\t     enum msg_param_mem_dir dir);\n /**\n  * msg_param_get_buf_size() - helper functions that reads [T/R]MEM\n  *\t\t\t      parameter size\n", "diff --git a/core/include/tee/tee_fs_rpc.h b/core/include/tee/tee_fs_rpc.h\nindex 1cab39b7e..2af5ccda6 100644\n--- a/core/include/tee/tee_fs_rpc.h\n+++ b/core/include/tee/tee_fs_rpc.h\n@@ -74,6 +74,6 @@ static inline void tee_fs_rpc_cache_clear(\n  * cache. The pointer is guaranteed to point to a large enough area or to\n  * be NULL.\n  */\n-void *tee_fs_rpc_cache_alloc(size_t size, struct mobj **mobj, uint64_t *cookie);\n+void *tee_fs_rpc_cache_alloc(size_t size, struct mobj **mobj);\n \n #endif /* TEE_FS_RPC_H */\n", "diff --git a/core/kernel/msg_param.c b/core/kernel/msg_param.c\nindex 000e0f5a5..43f6df10e 100644\n--- a/core/kernel/msg_param.c\n+++ b/core/kernel/msg_param.c\n@@ -143,7 +143,7 @@ out:\n \n bool msg_param_init_memparam(struct optee_msg_param *param, struct mobj *mobj,\n \t\t\t     size_t offset, size_t size,\n-\t\t\t     uint64_t cookie, enum msg_param_mem_dir dir)\n+\t\t\t     enum msg_param_mem_dir dir)\n {\n \tif (mobj_matches(mobj, CORE_MEM_REG_SHM)) {\n \t\t/* Registered SHM mobj */\n@@ -163,7 +163,7 @@ bool msg_param_init_memparam(struct optee_msg_param *param, struct mobj *mobj,\n \n \t\tparam->u.rmem.size = size;\n \t\tparam->u.rmem.offs = offset;\n-\t\tparam->u.rmem.shm_ref = cookie;\n+\t\tparam->u.rmem.shm_ref = mobj_get_cookie(mobj);\n \t} else if (mobj_matches(mobj, CORE_MEM_NSEC_SHM)) {\n \t\t/* MOBJ from from predefined pool */\n \t\tpaddr_t pa;\n@@ -186,7 +186,7 @@ bool msg_param_init_memparam(struct optee_msg_param *param, struct mobj *mobj,\n \t\t}\n \n \t\tparam->u.tmem.buf_ptr = pa + offset;\n-\t\tparam->u.tmem.shm_ref = cookie;\n+\t\tparam->u.tmem.shm_ref = mobj_get_cookie(mobj);\n \t\tparam->u.tmem.size = size;\n \t} else\n \t\treturn false;\n", "diff --git a/core/tee/tadb.c b/core/tee/tadb.c\nindex 5b7f2407d..125ac8337 100644\n--- a/core/tee/tadb.c\n+++ b/core/tee/tadb.c\n@@ -60,7 +60,6 @@ struct tee_tadb_ta_read {\n \tstruct tadb_entry entry;\n \tsize_t pos;\n \tvoid *ctx;\n-\tuint64_t ta_cookie;\n \tstruct mobj *ta_mobj;\n \tuint8_t *ta_buf;\n };\n@@ -88,19 +87,18 @@ static TEE_Result ta_operation_open(unsigned int cmd, uint32_t file_number,\n \tstruct mobj *mobj;\n \tTEE_Result res;\n \tvoid *va;\n-\tuint64_t cookie;\n \tstruct optee_msg_param params[] = {\n \t\t[0] = { .attr = OPTEE_MSG_ATTR_TYPE_VALUE_INPUT,\n \t\t\t.u.value.a = cmd },\n \t\t[2] = { .attr = OPTEE_MSG_ATTR_TYPE_VALUE_OUTPUT }\n \t};\n \n-\tva = tee_fs_rpc_cache_alloc(TEE_FS_NAME_MAX, &mobj, &cookie);\n+\tva = tee_fs_rpc_cache_alloc(TEE_FS_NAME_MAX, &mobj);\n \tif (!va)\n \t\treturn TEE_ERROR_OUT_OF_MEMORY;\n \n \tif (!msg_param_init_memparam(params + 1, mobj, 0, TEE_FS_NAME_MAX,\n-\t\t\t\t     cookie, MSG_PARAM_MEM_DIR_IN))\n+\t\t\t\t     MSG_PARAM_MEM_DIR_IN))\n \t\treturn TEE_ERROR_BAD_STATE;\n \n \tfile_num_to_str(va, TEE_FS_NAME_MAX, file_number);\n@@ -116,18 +114,17 @@ static TEE_Result ta_operation_remove(uint32_t file_number)\n {\n \tstruct mobj *mobj;\n \tvoid *va;\n-\tuint64_t cookie;\n \tstruct optee_msg_param params[2] = {\n \t\t[0] = { .attr = OPTEE_MSG_ATTR_TYPE_VALUE_INPUT,\n \t\t\t.u.value.a = OPTEE_MRF_REMOVE },\n \t};\n \n-\tva = tee_fs_rpc_cache_alloc(TEE_FS_NAME_MAX, &mobj, &cookie);\n+\tva = tee_fs_rpc_cache_alloc(TEE_FS_NAME_MAX, &mobj);\n \tif (!va)\n \t\treturn TEE_ERROR_OUT_OF_MEMORY;\n \n \tif (!msg_param_init_memparam(params + 1, mobj, 0, TEE_FS_NAME_MAX,\n-\t\t\t\t     cookie, MSG_PARAM_MEM_DIR_IN))\n+\t\t\t\t     MSG_PARAM_MEM_DIR_IN))\n \t\treturn TEE_ERROR_BAD_STATE;\n \n \tfile_num_to_str(va, TEE_FS_NAME_MAX, file_number);\n@@ -703,7 +700,7 @@ static TEE_Result ta_load(struct tee_tadb_ta_read *ta)\n \tif (ta->ta_mobj)\n \t\treturn TEE_SUCCESS;\n \n-\tta->ta_mobj = thread_rpc_alloc_payload(sz, &ta->ta_cookie);\n+\tta->ta_mobj = thread_rpc_alloc_payload(sz);\n \tif (!ta->ta_mobj)\n \t\treturn TEE_ERROR_OUT_OF_MEMORY;\n \n@@ -711,12 +708,12 @@ static TEE_Result ta_load(struct tee_tadb_ta_read *ta)\n \tassert(ta->ta_buf);\n \n \tif (!msg_param_init_memparam(params + 1, ta->ta_mobj, 0, sz,\n-\t\t\t\t     ta->ta_cookie, MSG_PARAM_MEM_DIR_OUT))\n+\t\t\t\t     MSG_PARAM_MEM_DIR_OUT))\n \t\treturn TEE_ERROR_BAD_STATE;\n \n \tres = thread_rpc_cmd(OPTEE_MSG_RPC_CMD_FS, ARRAY_SIZE(params), params);\n \tif (res) {\n-\t\tthread_rpc_free_payload(ta->ta_cookie, ta->ta_mobj);\n+\t\tthread_rpc_free_payload(ta->ta_mobj);\n \t\tta->ta_mobj = NULL;\n \t}\n \treturn res;\n@@ -780,7 +777,7 @@ void tee_tadb_ta_close(struct tee_tadb_ta_read *ta)\n \tcrypto_authenc_final(ta->ctx, TADB_AUTH_ENC_ALG);\n \tcrypto_authenc_free_ctx(ta->ctx, TADB_AUTH_ENC_ALG);\n \tif (ta->ta_mobj)\n-\t\tthread_rpc_free_payload(ta->ta_cookie, ta->ta_mobj);\n+\t\tthread_rpc_free_payload(ta->ta_mobj);\n \ttee_fs_rpc_close(OPTEE_MSG_RPC_CMD_FS, ta->fd);\n \ttadb_put(ta->db);\n \tfree(ta);\n", "diff --git a/core/tee/tee_fs_rpc.c b/core/tee/tee_fs_rpc.c\nindex 21ebc5866..5c97617c0 100644\n--- a/core/tee/tee_fs_rpc.c\n+++ b/core/tee/tee_fs_rpc.c\n@@ -36,9 +36,8 @@ static TEE_Result operation_open(uint32_t id, unsigned int cmd,\n \tstruct mobj *mobj;\n \tTEE_Result res;\n \tvoid *va;\n-\tuint64_t cookie;\n \n-\tva = tee_fs_rpc_cache_alloc(TEE_FS_NAME_MAX, &mobj, &cookie);\n+\tva = tee_fs_rpc_cache_alloc(TEE_FS_NAME_MAX, &mobj);\n \tif (!va)\n \t\treturn TEE_ERROR_OUT_OF_MEMORY;\n \n@@ -46,7 +45,7 @@ static TEE_Result operation_open(uint32_t id, unsigned int cmd,\n \top.params[0].u.value.a = cmd;\n \n \tif (!msg_param_init_memparam(op.params + 1, mobj, 0, TEE_FS_NAME_MAX,\n-\t\t\t\t     cookie, MSG_PARAM_MEM_DIR_IN))\n+\t\t\t\t     MSG_PARAM_MEM_DIR_IN))\n \t\treturn TEE_ERROR_BAD_STATE;\n \n \tres = tee_svc_storage_create_filename(va, TEE_FS_NAME_MAX,\n@@ -81,9 +80,8 @@ static TEE_Result operation_open_dfh(uint32_t id, unsigned int cmd,\n \tstruct mobj *mobj;\n \tTEE_Result res;\n \tvoid *va;\n-\tuint64_t cookie;\n \n-\tva = tee_fs_rpc_cache_alloc(TEE_FS_NAME_MAX, &mobj, &cookie);\n+\tva = tee_fs_rpc_cache_alloc(TEE_FS_NAME_MAX, &mobj);\n \tif (!va)\n \t\treturn TEE_ERROR_OUT_OF_MEMORY;\n \n@@ -91,7 +89,7 @@ static TEE_Result operation_open_dfh(uint32_t id, unsigned int cmd,\n \top.params[0].u.value.a = cmd;\n \n \tif (!msg_param_init_memparam(op.params + 1, mobj, 0, TEE_FS_NAME_MAX,\n-\t\t\t\t     cookie, MSG_PARAM_MEM_DIR_IN))\n+\t\t\t\t     MSG_PARAM_MEM_DIR_IN))\n \t\treturn TEE_ERROR_BAD_STATE;\n \n \tres = tee_svc_storage_create_filename_dfh(va, TEE_FS_NAME_MAX, dfh);\n@@ -139,12 +137,11 @@ TEE_Result tee_fs_rpc_read_init(struct tee_fs_rpc_operation *op,\n {\n \tstruct mobj *mobj;\n \tuint8_t *va;\n-\tuint64_t cookie;\n \n \tif (offset < 0)\n \t\treturn TEE_ERROR_BAD_PARAMETERS;\n \n-\tva = tee_fs_rpc_cache_alloc(data_len, &mobj, &cookie);\n+\tva = tee_fs_rpc_cache_alloc(data_len, &mobj);\n \tif (!va)\n \t\treturn TEE_ERROR_OUT_OF_MEMORY;\n \n@@ -157,7 +154,7 @@ TEE_Result tee_fs_rpc_read_init(struct tee_fs_rpc_operation *op,\n \top->params[0].u.value.b = fd;\n \top->params[0].u.value.c = offset;\n \n-\tif (!msg_param_init_memparam(op->params + 1, mobj, 0, data_len, cookie,\n+\tif (!msg_param_init_memparam(op->params + 1, mobj, 0, data_len,\n \t\t\t\t     MSG_PARAM_MEM_DIR_OUT))\n \t\treturn TEE_ERROR_BAD_STATE;\n \n@@ -182,12 +179,11 @@ TEE_Result tee_fs_rpc_write_init(struct tee_fs_rpc_operation *op,\n {\n \tstruct mobj *mobj;\n \tuint8_t *va;\n-\tuint64_t cookie;\n \n \tif (offset < 0)\n \t\treturn TEE_ERROR_BAD_PARAMETERS;\n \n-\tva = tee_fs_rpc_cache_alloc(data_len, &mobj, &cookie);\n+\tva = tee_fs_rpc_cache_alloc(data_len, &mobj);\n \tif (!va)\n \t\treturn TEE_ERROR_OUT_OF_MEMORY;\n \n@@ -200,7 +196,7 @@ TEE_Result tee_fs_rpc_write_init(struct tee_fs_rpc_operation *op,\n \top->params[0].u.value.b = fd;\n \top->params[0].u.value.c = offset;\n \n-\tif (!msg_param_init_memparam(op->params + 1, mobj, 0, data_len, cookie,\n+\tif (!msg_param_init_memparam(op->params + 1, mobj, 0, data_len,\n \t\t\t\t     MSG_PARAM_MEM_DIR_IN))\n \t\treturn TEE_ERROR_BAD_STATE;\n \n@@ -232,9 +228,8 @@ TEE_Result tee_fs_rpc_remove(uint32_t id, struct tee_pobj *po)\n \tstruct tee_fs_rpc_operation op = { .id = id, .num_params = 2 };\n \tstruct mobj *mobj;\n \tvoid *va;\n-\tuint64_t cookie;\n \n-\tva = tee_fs_rpc_cache_alloc(TEE_FS_NAME_MAX, &mobj, &cookie);\n+\tva = tee_fs_rpc_cache_alloc(TEE_FS_NAME_MAX, &mobj);\n \tif (!va)\n \t\treturn TEE_ERROR_OUT_OF_MEMORY;\n \n@@ -242,7 +237,7 @@ TEE_Result tee_fs_rpc_remove(uint32_t id, struct tee_pobj *po)\n \top.params[0].u.value.a = OPTEE_MRF_REMOVE;\n \n \tif (!msg_param_init_memparam(op.params + 1, mobj, 0, TEE_FS_NAME_MAX,\n-\t\t\t\t     cookie, MSG_PARAM_MEM_DIR_IN))\n+\t\t\t\t     MSG_PARAM_MEM_DIR_IN))\n \t\treturn TEE_ERROR_BAD_STATE;\n \n \tres = tee_svc_storage_create_filename(va, TEE_FS_NAME_MAX,\n@@ -260,9 +255,8 @@ TEE_Result tee_fs_rpc_remove_dfh(uint32_t id,\n \tstruct tee_fs_rpc_operation op = { .id = id, .num_params = 2 };\n \tstruct mobj *mobj;\n \tvoid *va;\n-\tuint64_t cookie;\n \n-\tva = tee_fs_rpc_cache_alloc(TEE_FS_NAME_MAX, &mobj, &cookie);\n+\tva = tee_fs_rpc_cache_alloc(TEE_FS_NAME_MAX, &mobj);\n \tif (!va)\n \t\treturn TEE_ERROR_OUT_OF_MEMORY;\n \n@@ -270,7 +264,7 @@ TEE_Result tee_fs_rpc_remove_dfh(uint32_t id,\n \top.params[0].u.value.a = OPTEE_MRF_REMOVE;\n \n \tif (!msg_param_init_memparam(op.params + 1, mobj, 0, TEE_FS_NAME_MAX,\n-\t\t\t\t     cookie, MSG_PARAM_MEM_DIR_IN))\n+\t\t\t\t     MSG_PARAM_MEM_DIR_IN))\n \t\treturn TEE_ERROR_BAD_STATE;\n \n \tres = tee_svc_storage_create_filename_dfh(va, TEE_FS_NAME_MAX, dfh);\n@@ -287,10 +281,9 @@ TEE_Result tee_fs_rpc_rename(uint32_t id, struct tee_pobj *old,\n \tstruct tee_fs_rpc_operation op = { .id = id, .num_params = 3 };\n \tstruct mobj *mobj;\n \tchar *va;\n-\tuint64_t cookie;\n \tbool temp;\n \n-\tva = tee_fs_rpc_cache_alloc(TEE_FS_NAME_MAX * 2, &mobj, &cookie);\n+\tva = tee_fs_rpc_cache_alloc(TEE_FS_NAME_MAX * 2, &mobj);\n \tif (!va)\n \t\treturn TEE_ERROR_OUT_OF_MEMORY;\n \n@@ -299,7 +292,7 @@ TEE_Result tee_fs_rpc_rename(uint32_t id, struct tee_pobj *old,\n \top.params[0].u.value.b = overwrite;\n \n \tif (!msg_param_init_memparam(op.params + 1, mobj, 0, TEE_FS_NAME_MAX,\n-\t\t\t\t     cookie, MSG_PARAM_MEM_DIR_IN))\n+\t\t\t\t     MSG_PARAM_MEM_DIR_IN))\n \t\treturn TEE_ERROR_BAD_STATE;\n \n \tif (new)\n@@ -312,8 +305,7 @@ TEE_Result tee_fs_rpc_rename(uint32_t id, struct tee_pobj *old,\n \t\treturn res;\n \n \tif (!msg_param_init_memparam(op.params + 2, mobj, TEE_FS_NAME_MAX,\n-\t\t\t\t     TEE_FS_NAME_MAX, cookie,\n-\t\t\t\t     MSG_PARAM_MEM_DIR_IN))\n+\t\t\t\t     TEE_FS_NAME_MAX, MSG_PARAM_MEM_DIR_IN))\n \t\treturn TEE_ERROR_BAD_STATE;\n \n \tif (new) {\n@@ -338,13 +330,12 @@ TEE_Result tee_fs_rpc_opendir(uint32_t id, const TEE_UUID *uuid,\n \tstruct tee_fs_rpc_operation op = { .id = id, .num_params = 3 };\n \tstruct mobj *mobj;\n \tvoid *va;\n-\tuint64_t cookie;\n \tstruct tee_fs_dir *dir = calloc(1, sizeof(*dir));\n \n \tif (!dir)\n \t\treturn TEE_ERROR_OUT_OF_MEMORY;\n \n-\tva = tee_fs_rpc_cache_alloc(TEE_FS_NAME_MAX, &mobj, &cookie);\n+\tva = tee_fs_rpc_cache_alloc(TEE_FS_NAME_MAX, &mobj);\n \tif (!va) {\n \t\tres = TEE_ERROR_OUT_OF_MEMORY;\n \t\tgoto err_exit;\n@@ -354,7 +345,7 @@ TEE_Result tee_fs_rpc_opendir(uint32_t id, const TEE_UUID *uuid,\n \top.params[0].u.value.a = OPTEE_MRF_OPENDIR;\n \n \tif (!msg_param_init_memparam(op.params + 1, mobj, 0, TEE_FS_NAME_MAX,\n-\t\t\t\t     cookie, MSG_PARAM_MEM_DIR_IN)) {\n+\t\t\t\t     MSG_PARAM_MEM_DIR_IN)) {\n \t\tres = TEE_ERROR_BAD_STATE;\n \t\tgoto err_exit;\n \t}\n@@ -399,13 +390,12 @@ TEE_Result tee_fs_rpc_readdir(uint32_t id, struct tee_fs_dir *d,\n \tstruct tee_fs_rpc_operation op = { .id = id, .num_params = 2 };\n \tstruct mobj *mobj;\n \tvoid *va;\n-\tuint64_t cookie;\n \tconst size_t max_name_len = TEE_FS_NAME_MAX + 1;\n \n \tif (!d)\n \t\treturn TEE_ERROR_ITEM_NOT_FOUND;\n \n-\tva = tee_fs_rpc_cache_alloc(max_name_len, &mobj, &cookie);\n+\tva = tee_fs_rpc_cache_alloc(max_name_len, &mobj);\n \tif (!va)\n \t\treturn TEE_ERROR_OUT_OF_MEMORY;\n \n@@ -414,7 +404,7 @@ TEE_Result tee_fs_rpc_readdir(uint32_t id, struct tee_fs_dir *d,\n \top.params[0].u.value.b = d->nw_dir;\n \n \tif (!msg_param_init_memparam(op.params + 1, mobj, 0, max_name_len,\n-\t\t\t\t     cookie, MSG_PARAM_MEM_DIR_OUT))\n+\t\t\t\t     MSG_PARAM_MEM_DIR_OUT))\n \t\treturn TEE_ERROR_BAD_STATE;\n \n \tres = operation_commit(&op);\n", "diff --git a/core/tee/tee_fs_rpc_cache.c b/core/tee/tee_fs_rpc_cache.c\nindex d1fc51c02..3148aea2f 100644\n--- a/core/tee/tee_fs_rpc_cache.c\n+++ b/core/tee/tee_fs_rpc_cache.c\n@@ -12,20 +12,17 @@\n void tee_fs_rpc_cache_clear(struct thread_specific_data *tsd)\n {\n \tif (tsd->rpc_fs_payload) {\n-\t\tthread_rpc_free_payload(tsd->rpc_fs_payload_cookie,\n-\t\t\t\t\ttsd->rpc_fs_payload_mobj);\n+\t\tthread_rpc_free_payload(tsd->rpc_fs_payload_mobj);\n \t\ttsd->rpc_fs_payload = NULL;\n-\t\ttsd->rpc_fs_payload_cookie = 0;\n \t\ttsd->rpc_fs_payload_size = 0;\n \t\ttsd->rpc_fs_payload_mobj = NULL;\n \t}\n }\n \n-void *tee_fs_rpc_cache_alloc(size_t size, struct mobj **mobj, uint64_t *cookie)\n+void *tee_fs_rpc_cache_alloc(size_t size, struct mobj **mobj)\n {\n \tstruct thread_specific_data *tsd = thread_get_tsd();\n \tsize_t sz = size;\n-\tuint64_t c = 0;\n \tpaddr_t p;\n \tvoid *va;\n \n@@ -41,7 +38,7 @@ void *tee_fs_rpc_cache_alloc(size_t size, struct mobj **mobj, uint64_t *cookie)\n \tif (sz > tsd->rpc_fs_payload_size) {\n \t\ttee_fs_rpc_cache_clear(tsd);\n \n-\t\t*mobj = thread_rpc_alloc_payload(sz,  &c);\n+\t\t*mobj = thread_rpc_alloc_payload(sz);\n \t\tif (!*mobj)\n \t\t\treturn NULL;\n \n@@ -57,14 +54,12 @@ void *tee_fs_rpc_cache_alloc(size_t size, struct mobj **mobj, uint64_t *cookie)\n \n \t\ttsd->rpc_fs_payload = va;\n \t\ttsd->rpc_fs_payload_mobj = *mobj;\n-\t\ttsd->rpc_fs_payload_cookie = c;\n \t\ttsd->rpc_fs_payload_size = sz;\n \t} else\n \t\t*mobj = tsd->rpc_fs_payload_mobj;\n \n-\t*cookie = tsd->rpc_fs_payload_cookie;\n \treturn tsd->rpc_fs_payload;\n err:\n-\tthread_rpc_free_payload(c, *mobj);\n+\tthread_rpc_free_payload(*mobj);\n \treturn NULL;\n }\n", "diff --git a/core/tee/tee_rpmb_fs.c b/core/tee/tee_rpmb_fs.c\nindex 7ae604d65..e100fee03 100644\n--- a/core/tee/tee_rpmb_fs.c\n+++ b/core/tee/tee_rpmb_fs.c\n@@ -410,9 +410,7 @@ func_exit:\n \n struct tee_rpmb_mem {\n \tstruct mobj *phreq_mobj;\n-\tuint64_t phreq_cookie;\n \tstruct mobj *phresp_mobj;\n-\tuint64_t phresp_cookie;\n \tsize_t req_size;\n \tsize_t resp_size;\n };\n@@ -423,13 +421,11 @@ static void tee_rpmb_free(struct tee_rpmb_mem *mem)\n \t\treturn;\n \n \tif (mem->phreq_mobj) {\n-\t\tthread_rpc_free_payload(mem->phreq_cookie, mem->phreq_mobj);\n-\t\tmem->phreq_cookie = 0;\n+\t\tthread_rpc_free_payload(mem->phreq_mobj);\n \t\tmem->phreq_mobj = NULL;\n \t}\n \tif (mem->phresp_mobj) {\n-\t\tthread_rpc_free_payload(mem->phresp_cookie, mem->phresp_mobj);\n-\t\tmem->phresp_cookie = 0;\n+\t\tthread_rpc_free_payload(mem->phresp_mobj);\n \t\tmem->phresp_mobj = NULL;\n \t}\n }\n@@ -447,9 +443,8 @@ static TEE_Result tee_rpmb_alloc(size_t req_size, size_t resp_size,\n \n \tmemset(mem, 0, sizeof(*mem));\n \n-\tmem->phreq_mobj = thread_rpc_alloc_payload(req_s, &mem->phreq_cookie);\n-\tmem->phresp_mobj =\n-\t\tthread_rpc_alloc_payload(resp_s, &mem->phresp_cookie);\n+\tmem->phreq_mobj = thread_rpc_alloc_payload(req_s);\n+\tmem->phresp_mobj = thread_rpc_alloc_payload(resp_s);\n \n \tif (!mem->phreq_mobj || !mem->phresp_mobj) {\n \t\tres = TEE_ERROR_OUT_OF_MEMORY;\n@@ -479,13 +474,11 @@ static TEE_Result tee_rpmb_invoke(struct tee_rpmb_mem *mem)\n \tmemset(params, 0, sizeof(params));\n \n \tif (!msg_param_init_memparam(params + 0, mem->phreq_mobj, 0,\n-\t\t\t\t     mem->req_size, mem->phreq_cookie,\n-\t\t\t\t     MSG_PARAM_MEM_DIR_IN))\n+\t\t\t\t     mem->req_size, MSG_PARAM_MEM_DIR_IN))\n \t\treturn TEE_ERROR_BAD_STATE;\n \n \tif (!msg_param_init_memparam(params + 1, mem->phresp_mobj, 0,\n-\t\t\t\t     mem->resp_size, mem->phresp_cookie,\n-\t\t\t\t     MSG_PARAM_MEM_DIR_OUT))\n+\t\t\t\t     mem->resp_size, MSG_PARAM_MEM_DIR_OUT))\n \t\treturn TEE_ERROR_BAD_STATE;\n \n \treturn thread_rpc_cmd(OPTEE_MSG_RPC_CMD_RPMB, 2, params);\n"], "label": 0, "cve": "CVE-2019-1010297", "rank": 6, "commit": "cd278f78382b8717bd18ba6de7b26a6cbd0fa3e5", "cve_attention_tokens": []}
{"cve_desc": "It was discovered that the zebra daemon in Quagga before 1.0.20161017 suffered from a stack-based buffer overflow when processing IPv6 Neighbor Discovery messages. The root cause was relying on BUFSIZ to be compatible with a message size; however, BUFSIZ is system-dependent.", "commit_msg": "bgpd: Add clear command to force a bestpath recalculation and re-advertisement of a prefix\n\nAdd these commands to bgp:\n\nclear ip bgp prefix A.B.C.D/M\nclear bgp ipv6 (unicast|multicast) prefix X:X::X:X/M\n\nThese two commands forces a bestpath calculation to happen again if\nnecessary to re-advertise the prefix.\n\nSigned-off-by: Daniel Walton <dwalton@cumulusnetworks.com>\n\n", "diff": ["diff --git a/bgpd/bgp_route.c b/bgpd/bgp_route.c\nindex 17b87f49..48645cf0 100644\n--- a/bgpd/bgp_route.c\n+++ b/bgpd/bgp_route.c\n@@ -1602,7 +1602,8 @@ bgp_process_main (struct work_queue *wq, void *data)\n   new_select = old_and_new.new;\n \n   /* Nothing to do. */\n-  if (old_select && old_select == new_select)\n+  if (old_select && old_select == new_select \n+      && !CHECK_FLAG(rn->flags, BGP_NODE_USER_CLEAR))\n     {\n       if (! CHECK_FLAG (old_select->flags, BGP_INFO_ATTR_CHANGED))\n         {\n@@ -1616,6 +1617,9 @@ bgp_process_main (struct work_queue *wq, void *data)\n         }\n     }\n \n+  /* If the user did \"clear ip bgp prefix x.x.x.x\" this flag will be set */\n+  UNSET_FLAG(rn->flags, BGP_NODE_USER_CLEAR);\n+\n   if (old_select)\n     bgp_info_unset_flag (rn, old_select, BGP_INFO_SELECTED);\n   if (new_select)\n", "diff --git a/bgpd/bgp_table.h b/bgpd/bgp_table.h\nindex 3b4e6cf3..8e963aee 100644\n--- a/bgpd/bgp_table.h\n+++ b/bgpd/bgp_table.h\n@@ -65,6 +65,7 @@ struct bgp_node\n \n   u_char flags;\n #define BGP_NODE_PROCESS_SCHEDULED\t(1 << 0)\n+#define BGP_NODE_USER_CLEAR             (1 << 1)\n };\n \n /*\n", "diff --git a/bgpd/bgp_vty.c b/bgpd/bgp_vty.c\nindex 4c1de16a..406ecb12 100644\n--- a/bgpd/bgp_vty.c\n+++ b/bgpd/bgp_vty.c\n@@ -4680,6 +4680,87 @@ bgp_clear (struct vty *vty, struct bgp *bgp,  afi_t afi, safi_t safi,\n   return CMD_SUCCESS;\n }\n \n+/* Recalculate bestpath and re-advertise a prefix */\n+static int\n+bgp_clear_prefix (struct vty *vty, char *view_name, const char *ip_str,\n+                  afi_t afi, safi_t safi, struct prefix_rd *prd)\n+{\n+  int ret;\n+  struct prefix match;\n+  struct bgp_node *rn;\n+  struct bgp_node *rm;\n+  struct bgp *bgp;\n+  struct bgp_table *table;\n+  struct bgp_table *rib;\n+\n+  /* BGP structure lookup. */\n+  if (view_name)\n+    {\n+      bgp = bgp_lookup_by_name (view_name);\n+      if (bgp == NULL)\n+        {\n+          vty_out (vty, \"%% Can't find BGP view %s%s\", view_name, VTY_NEWLINE);\n+          return CMD_WARNING;\n+        }\n+    }\n+  else\n+    {\n+      bgp = bgp_get_default ();\n+      if (bgp == NULL)\n+        {\n+          vty_out (vty, \"%% No BGP process is configured%s\", VTY_NEWLINE);\n+          return CMD_WARNING;\n+        }\n+    }\n+\n+  /* Check IP address argument. */\n+  ret = str2prefix (ip_str, &match);\n+  if (! ret)\n+    {\n+      vty_out (vty, \"%% address is malformed%s\", VTY_NEWLINE);\n+      return CMD_WARNING;\n+    }\n+\n+  match.family = afi2family (afi);\n+  rib = bgp->rib[afi][safi];\n+\n+  if (safi == SAFI_MPLS_VPN)\n+    {\n+      for (rn = bgp_table_top (rib); rn; rn = bgp_route_next (rn))\n+        {\n+          if (prd && memcmp (rn->p.u.val, prd->val, 8) != 0)\n+            continue;\n+\n+          if ((table = rn->info) != NULL)\n+            {\n+              if ((rm = bgp_node_match (table, &match)) != NULL)\n+                {\n+                  if (rm->p.prefixlen == match.prefixlen)\n+                    {\n+                      SET_FLAG (rn->flags, BGP_NODE_USER_CLEAR);\n+                      bgp_process (bgp, rm, afi, safi);\n+                    }\n+                  bgp_unlock_node (rm);\n+                }\n+            }\n+        }\n+    }\n+  else\n+    {\n+      if ((rn = bgp_node_match (rib, &match)) != NULL)\n+        {\n+          if (rn->p.prefixlen == match.prefixlen)\n+            {\n+              SET_FLAG (rn->flags, BGP_NODE_USER_CLEAR);\n+              bgp_process (bgp, rn, afi, safi);\n+            }\n+          bgp_unlock_node (rn);\n+        }\n+    }\n+\n+  return CMD_SUCCESS;\n+}\n+\n static int\n bgp_clear_vty (struct vty *vty, const char *name, afi_t afi, safi_t safi,\n                enum clear_sort sort, enum bgp_clear_type stype, \n@@ -4842,6 +4923,27 @@ ALIAS (clear_ip_bgp_external,\n        \"Address family\\n\"\n        \"Clear all external peers\\n\")\n \n+DEFUN (clear_ip_bgp_prefix,\n+       clear_ip_bgp_prefix_cmd,\n+       \"clear ip bgp prefix A.B.C.D/M\",\n+       CLEAR_STR\n+       IP_STR\n+       BGP_STR\n+       \"Clear bestpath and re-advertise\\n\"\n+       \"IP prefix <network>/<length>, e.g., 35.0.0.0/8\\n\")\n+{\n+  return bgp_clear_prefix (vty, NULL, argv[0], AFI_IP, SAFI_UNICAST, NULL);\n+}\n+\n+ALIAS (clear_ip_bgp_prefix,\n+       clear_bgp_prefix_cmd,\n+       \"clear bgp prefix A.B.C.D/M\",\n+       CLEAR_STR\n+       BGP_STR\n+       \"Clear bestpath and re-advertise\\n\"\n+       \"IP prefix <network>/<length>, e.g., 35.0.0.0/8\\n\")\n+\n+\n DEFUN (clear_ip_bgp_as,\n        clear_ip_bgp_as_cmd,\n        \"clear ip bgp \" CMD_AS_RANGE,\n@@ -5072,6 +5174,22 @@ ALIAS (clear_bgp_all_soft_out,\n        \"Clear all peers\\n\"\n        \"Soft reconfig outbound update\\n\")\n \n+DEFUN (clear_bgp_ipv6_safi_prefix,\n+       clear_bgp_ipv6_safi_prefix_cmd,\n+       \"clear bgp ipv6 (unicast|multicast) prefix X:X::X:X/M\",\n+       CLEAR_STR\n+       BGP_STR\n+       \"Address family\\n\"\n+       \"Address Family Modifier\\n\"\n+       \"Clear bestpath and re-advertise\\n\"\n+       \"IPv6 prefix <network>/<length>,  e.g.,  3ffe::/16\\n\")\n+{\n+  if (strncmp (argv[0], \"m\", 1) == 0)\n+    return bgp_clear_prefix (vty, NULL, argv[1], AFI_IP6, SAFI_MULTICAST, NULL);\n+  else\n+    return bgp_clear_prefix (vty, NULL, argv[1], AFI_IP6, SAFI_UNICAST, NULL);\n+}\n+\n DEFUN (clear_ip_bgp_peer_soft_out,\n        clear_ip_bgp_peer_soft_out_cmd,\n        \"clear ip bgp A.B.C.D soft out\",\n@@ -10909,6 +11027,10 @@ bgp_vty_init (void)\n   install_element (ENABLE_NODE, &clear_bgp_ipv6_as_in_cmd);\n   install_element (ENABLE_NODE, &clear_bgp_ipv6_as_in_prefix_filter_cmd);\n \n+  /* clear ip bgp prefix  */\n+  install_element (ENABLE_NODE, &clear_ip_bgp_prefix_cmd);\n+  install_element (ENABLE_NODE, &clear_bgp_ipv6_safi_prefix_cmd);\n+\n   /* \"clear ip bgp neighbor soft out\" */\n   install_element (ENABLE_NODE, &clear_ip_bgp_all_soft_out_cmd);\n   install_element (ENABLE_NODE, &clear_ip_bgp_instance_all_soft_out_cmd);\n"], "label": 0, "cve": "CVE-2016-1245", "rank": 46, "commit": "325fcfb6d83c9add415e24e786035b67b00fd719", "cve_attention_tokens": []}
